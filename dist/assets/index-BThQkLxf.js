var Ale=Object.defineProperty;var Tle=(n,e,t)=>e in n?Ale(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var gw=(n,e,t)=>Tle(n,typeof e!="symbol"?e+"":e,t);function jX(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var _H=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Mle(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var Yk={exports:{}},yw={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CH;function Rle(){if(CH)return yw;CH=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var a in i)a!=="key"&&(s[a]=i[a])}else s=i;return i=s.ref,{$$typeof:n,type:r,key:o,ref:i!==void 0?i:null,props:s}}return yw.Fragment=e,yw.jsx=t,yw.jsxs=t,yw}var EH;function Nle(){return EH||(EH=1,Yk.exports=Rle()),Yk.exports}var V=Nle(),Jk={exports:{}},Mr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AH;function Ile(){if(AH)return Mr;AH=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.iterator;function f(X){return X===null||typeof X!="object"?null:(X=d&&X[d]||X["@@iterator"],typeof X=="function"?X:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function b(X,te,ne){this.props=X,this.context=te,this.refs=v,this.updater=ne||p}b.prototype.isReactComponent={},b.prototype.setState=function(X,te){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,te,"setState")},b.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function x(){}x.prototype=b.prototype;function _(X,te,ne){this.props=X,this.context=te,this.refs=v,this.updater=ne||p}var E=_.prototype=new x;E.constructor=_,g(E,b.prototype),E.isPureReactComponent=!0;var C=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},R=Object.prototype.hasOwnProperty;function L(X,te,ne,le,ye,ue){return ne=ue.ref,{$$typeof:n,type:X,key:te,ref:ne!==void 0?ne:null,props:ue}}function B(X,te){return L(X.type,te,void 0,void 0,void 0,X.props)}function N(X){return typeof X=="object"&&X!==null&&X.$$typeof===n}function I(X){var te={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(ne){return te[ne]})}var D=/\/+/g;function P(X,te){return typeof X=="object"&&X!==null&&X.key!=null?I(""+X.key):te.toString(36)}function G(){}function W(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(G,G):(X.status="pending",X.then(function(te){X.status==="pending"&&(X.status="fulfilled",X.value=te)},function(te){X.status==="pending"&&(X.status="rejected",X.reason=te)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function q(X,te,ne,le,ye){var ue=typeof X;(ue==="undefined"||ue==="boolean")&&(X=null);var be=!1;if(X===null)be=!0;else switch(ue){case"bigint":case"string":case"number":be=!0;break;case"object":switch(X.$$typeof){case n:case e:be=!0;break;case u:return be=X._init,q(be(X._payload),te,ne,le,ye)}}if(be)return ye=ye(X),be=le===""?"."+P(X,0):le,C(ye)?(ne="",be!=null&&(ne=be.replace(D,"$&/")+"/"),q(ye,te,ne,"",function(ze){return ze})):ye!=null&&(N(ye)&&(ye=B(ye,ne+(ye.key==null||X&&X.key===ye.key?"":(""+ye.key).replace(D,"$&/")+"/")+be)),te.push(ye)),1;be=0;var xe=le===""?".":le+":";if(C(X))for(var Pe=0;Pe<X.length;Pe++)le=X[Pe],ue=xe+P(le,Pe),be+=q(le,te,ne,ue,ye);else if(Pe=f(X),typeof Pe=="function")for(X=Pe.call(X),Pe=0;!(le=X.next()).done;)le=le.value,ue=xe+P(le,Pe++),be+=q(le,te,ne,ue,ye);else if(ue==="object"){if(typeof X.then=="function")return q(W(X),te,ne,le,ye);throw te=String(X),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return be}function z(X,te,ne){if(X==null)return X;var le=[],ye=0;return q(X,le,"","",function(ue){return te.call(ne,ue,ye++)}),le}function J(X){if(X._status===-1){var te=X._result;te=te(),te.then(function(ne){(X._status===0||X._status===-1)&&(X._status=1,X._result=ne)},function(ne){(X._status===0||X._status===-1)&&(X._status=2,X._result=ne)}),X._status===-1&&(X._status=0,X._result=te)}if(X._status===1)return X._result.default;throw X._result}var Q=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)};function Y(){}return Mr.Children={map:z,forEach:function(X,te,ne){z(X,function(){te.apply(this,arguments)},ne)},count:function(X){var te=0;return z(X,function(){te++}),te},toArray:function(X){return z(X,function(te){return te})||[]},only:function(X){if(!N(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},Mr.Component=b,Mr.Fragment=t,Mr.Profiler=i,Mr.PureComponent=_,Mr.StrictMode=r,Mr.Suspense=l,Mr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Mr.__COMPILER_RUNTIME={__proto__:null,c:function(X){return M.H.useMemoCache(X)}},Mr.cache=function(X){return function(){return X.apply(null,arguments)}},Mr.cloneElement=function(X,te,ne){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var le=g({},X.props),ye=X.key,ue=void 0;if(te!=null)for(be in te.ref!==void 0&&(ue=void 0),te.key!==void 0&&(ye=""+te.key),te)!R.call(te,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&te.ref===void 0||(le[be]=te[be]);var be=arguments.length-2;if(be===1)le.children=ne;else if(1<be){for(var xe=Array(be),Pe=0;Pe<be;Pe++)xe[Pe]=arguments[Pe+2];le.children=xe}return L(X.type,ye,void 0,void 0,ue,le)},Mr.createContext=function(X){return X={$$typeof:o,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:s,_context:X},X},Mr.createElement=function(X,te,ne){var le,ye={},ue=null;if(te!=null)for(le in te.key!==void 0&&(ue=""+te.key),te)R.call(te,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ye[le]=te[le]);var be=arguments.length-2;if(be===1)ye.children=ne;else if(1<be){for(var xe=Array(be),Pe=0;Pe<be;Pe++)xe[Pe]=arguments[Pe+2];ye.children=xe}if(X&&X.defaultProps)for(le in be=X.defaultProps,be)ye[le]===void 0&&(ye[le]=be[le]);return L(X,ue,void 0,void 0,null,ye)},Mr.createRef=function(){return{current:null}},Mr.forwardRef=function(X){return{$$typeof:a,render:X}},Mr.isValidElement=N,Mr.lazy=function(X){return{$$typeof:u,_payload:{_status:-1,_result:X},_init:J}},Mr.memo=function(X,te){return{$$typeof:c,type:X,compare:te===void 0?null:te}},Mr.startTransition=function(X){var te=M.T,ne={};M.T=ne;try{var le=X(),ye=M.S;ye!==null&&ye(ne,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(Y,Q)}catch(ue){Q(ue)}finally{M.T=te}},Mr.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Mr.use=function(X){return M.H.use(X)},Mr.useActionState=function(X,te,ne){return M.H.useActionState(X,te,ne)},Mr.useCallback=function(X,te){return M.H.useCallback(X,te)},Mr.useContext=function(X){return M.H.useContext(X)},Mr.useDebugValue=function(){},Mr.useDeferredValue=function(X,te){return M.H.useDeferredValue(X,te)},Mr.useEffect=function(X,te,ne){var le=M.H;if(typeof ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(X,te)},Mr.useId=function(){return M.H.useId()},Mr.useImperativeHandle=function(X,te,ne){return M.H.useImperativeHandle(X,te,ne)},Mr.useInsertionEffect=function(X,te){return M.H.useInsertionEffect(X,te)},Mr.useLayoutEffect=function(X,te){return M.H.useLayoutEffect(X,te)},Mr.useMemo=function(X,te){return M.H.useMemo(X,te)},Mr.useOptimistic=function(X,te){return M.H.useOptimistic(X,te)},Mr.useReducer=function(X,te,ne){return M.H.useReducer(X,te,ne)},Mr.useRef=function(X){return M.H.useRef(X)},Mr.useState=function(X){return M.H.useState(X)},Mr.useSyncExternalStore=function(X,te,ne){return M.H.useSyncExternalStore(X,te,ne)},Mr.useTransition=function(){return M.H.useTransition()},Mr.version="19.1.0",Mr}var TH;function Mv(){return TH||(TH=1,Jk.exports=Ile()),Jk.exports}var F=Mv();const Ne=Zp(F),KM=jX({__proto__:null,default:Ne},[F]);var Zk={exports:{}},vw={},Qk={exports:{}},eO={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MH;function Dle(){return MH||(MH=1,function(n){function e(z,J){var Q=z.length;z.push(J);e:for(;0<Q;){var Y=Q-1>>>1,X=z[Y];if(0<i(X,J))z[Y]=J,z[Q]=X,Q=Y;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var J=z[0],Q=z.pop();if(Q!==J){z[0]=Q;e:for(var Y=0,X=z.length,te=X>>>1;Y<te;){var ne=2*(Y+1)-1,le=z[ne],ye=ne+1,ue=z[ye];if(0>i(le,Q))ye<X&&0>i(ue,le)?(z[Y]=ue,z[ye]=Q,Y=ye):(z[Y]=le,z[ne]=Q,Y=ne);else if(ye<X&&0>i(ue,Q))z[Y]=ue,z[ye]=Q,Y=ye;else break e}}return J}function i(z,J){var Q=z.sortIndex-J.sortIndex;return Q!==0?Q:z.id-J.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,g=!1,v=!1,b=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function C(z){for(var J=t(c);J!==null;){if(J.callback===null)r(c);else if(J.startTime<=z)r(c),J.sortIndex=J.expirationTime,e(l,J);else break;J=t(c)}}function M(z){if(v=!1,C(z),!g)if(t(l)!==null)g=!0,R||(R=!0,P());else{var J=t(c);J!==null&&q(M,J.startTime-z)}}var R=!1,L=-1,B=5,N=-1;function I(){return b?!0:!(n.unstable_now()-N<B)}function D(){if(b=!1,R){var z=n.unstable_now();N=z;var J=!0;try{e:{g=!1,v&&(v=!1,_(L),L=-1),p=!0;var Q=f;try{t:{for(C(z),d=t(l);d!==null&&!(d.expirationTime>z&&I());){var Y=d.callback;if(typeof Y=="function"){d.callback=null,f=d.priorityLevel;var X=Y(d.expirationTime<=z);if(z=n.unstable_now(),typeof X=="function"){d.callback=X,C(z),J=!0;break t}d===t(l)&&r(l),C(z)}else r(l);d=t(l)}if(d!==null)J=!0;else{var te=t(c);te!==null&&q(M,te.startTime-z),J=!1}}break e}finally{d=null,f=Q,p=!1}J=void 0}}finally{J?P():R=!1}}}var P;if(typeof E=="function")P=function(){E(D)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,W=G.port2;G.port1.onmessage=D,P=function(){W.postMessage(null)}}else P=function(){x(D,0)};function q(z,J){L=x(function(){z(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_next=function(z){switch(f){case 1:case 2:case 3:var J=3;break;default:J=f}var Q=f;f=J;try{return z()}finally{f=Q}},n.unstable_requestPaint=function(){b=!0},n.unstable_runWithPriority=function(z,J){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=f;f=z;try{return J()}finally{f=Q}},n.unstable_scheduleCallback=function(z,J,Q){var Y=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?Y+Q:Y):Q=Y,z){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=Q+X,z={id:u++,callback:J,priorityLevel:z,startTime:Q,expirationTime:X,sortIndex:-1},Q>Y?(z.sortIndex=Q,e(c,z),t(l)===null&&z===t(c)&&(v?(_(L),L=-1):v=!0,q(M,Q-Y))):(z.sortIndex=X,e(l,z),g||p||(g=!0,R||(R=!0,P()))),z},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(z){var J=f;return function(){var Q=f;f=J;try{return z.apply(this,arguments)}finally{f=Q}}}}(eO)),eO}var RH;function kle(){return RH||(RH=1,Qk.exports=Dle()),Qk.exports}var tO={exports:{}},Xa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NH;function Ole(){if(NH)return Xa;NH=1;var n=Mv();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(l,c,u){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:d==null?null:""+d,children:l,containerInfo:c,implementation:u}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Xa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Xa.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(l,c,null,u)},Xa.flushSync=function(l){var c=o.T,u=r.p;try{if(o.T=null,r.p=2,l)return l()}finally{o.T=c,r.p=u,r.d.f()}},Xa.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},Xa.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Xa.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,d=a(u,c.crossOrigin),f=typeof c.integrity=="string"?c.integrity:void 0,p=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:d,integrity:f,fetchPriority:p}):u==="script"&&r.d.X(l,{crossOrigin:d,integrity:f,fetchPriority:p,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Xa.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=a(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},Xa.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,d=a(u,c.crossOrigin);r.d.L(l,u,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Xa.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=a(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},Xa.requestFormReset=function(l){r.d.r(l)},Xa.unstable_batchedUpdates=function(l,c){return l(c)},Xa.useFormState=function(l,c,u){return o.H.useFormState(l,c,u)},Xa.useFormStatus=function(){return o.H.useHostTransitionStatus()},Xa.version="19.1.0",Xa}var IH;function XX(){if(IH)return tO.exports;IH=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),tO.exports=Ole(),tO.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DH;function Ble(){if(DH)return vw;DH=1;var n=kle(),e=Mv(),t=XX();function r(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)m+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function s(h){var m=h,w=h;if(h.alternate)for(;m.return;)m=m.return;else{h=m;do m=h,(m.flags&4098)!==0&&(w=m.return),h=m.return;while(h)}return m.tag===3?w:null}function o(h){if(h.tag===13){var m=h.memoizedState;if(m===null&&(h=h.alternate,h!==null&&(m=h.memoizedState)),m!==null)return m.dehydrated}return null}function a(h){if(s(h)!==h)throw Error(r(188))}function l(h){var m=h.alternate;if(!m){if(m=s(h),m===null)throw Error(r(188));return m!==h?null:h}for(var w=h,A=m;;){var k=w.return;if(k===null)break;var U=k.alternate;if(U===null){if(A=k.return,A!==null){w=A;continue}break}if(k.child===U.child){for(U=k.child;U;){if(U===w)return a(k),h;if(U===A)return a(k),m;U=U.sibling}throw Error(r(188))}if(w.return!==A.return)w=k,A=U;else{for(var ie=!1,he=k.child;he;){if(he===w){ie=!0,w=k,A=U;break}if(he===A){ie=!0,A=k,w=U;break}he=he.sibling}if(!ie){for(he=U.child;he;){if(he===w){ie=!0,w=U,A=k;break}if(he===A){ie=!0,A=U,w=k;break}he=he.sibling}if(!ie)throw Error(r(189))}}if(w.alternate!==A)throw Error(r(190))}if(w.tag!==3)throw Error(r(188));return w.stateNode.current===w?h:m}function c(h){var m=h.tag;if(m===5||m===26||m===27||m===6)return h;for(h=h.child;h!==null;){if(m=c(h),m!==null)return m;h=h.sibling}return null}var u=Object.assign,d=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function P(h){return h===null||typeof h!="object"?null:(h=D&&h[D]||h["@@iterator"],typeof h=="function"?h:null)}var G=Symbol.for("react.client.reference");function W(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===G?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case g:return"Fragment";case b:return"Profiler";case v:return"StrictMode";case M:return"Suspense";case R:return"SuspenseList";case N:return"Activity"}if(typeof h=="object")switch(h.$$typeof){case p:return"Portal";case E:return(h.displayName||"Context")+".Provider";case _:return(h._context.displayName||"Context")+".Consumer";case C:var m=h.render;return h=h.displayName,h||(h=m.displayName||m.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case L:return m=h.displayName||null,m!==null?m:W(h.type)||"Memo";case B:m=h._payload,h=h._init;try{return W(h(m))}catch{}}return null}var q=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},Y=[],X=-1;function te(h){return{current:h}}function ne(h){0>X||(h.current=Y[X],Y[X]=null,X--)}function le(h,m){X++,Y[X]=h.current,h.current=m}var ye=te(null),ue=te(null),be=te(null),xe=te(null);function Pe(h,m){switch(le(be,m),le(ue,h),le(ye,null),m.nodeType){case 9:case 11:h=(h=m.documentElement)&&(h=h.namespaceURI)?J6(h):0;break;default:if(h=m.tagName,m=m.namespaceURI)m=J6(m),h=Z6(m,h);else switch(h){case"svg":h=1;break;case"math":h=2;break;default:h=0}}ne(ye),le(ye,h)}function ze(){ne(ye),ne(ue),ne(be)}function Ke(h){h.memoizedState!==null&&le(xe,h);var m=ye.current,w=Z6(m,h.type);m!==w&&(le(ue,h),le(ye,w))}function pt(h){ue.current===h&&(ne(ye),ne(ue)),xe.current===h&&(ne(xe),dw._currentValue=Q)}var dt=Object.prototype.hasOwnProperty,pe=n.unstable_scheduleCallback,Le=n.unstable_cancelCallback,Ue=n.unstable_shouldYield,Ze=n.unstable_requestPaint,je=n.unstable_now,lt=n.unstable_getCurrentPriorityLevel,st=n.unstable_ImmediatePriority,at=n.unstable_UserBlockingPriority,Ut=n.unstable_NormalPriority,mt=n.unstable_LowPriority,ce=n.unstable_IdlePriority,re=n.log,$e=n.unstable_setDisableYieldValue,qe=null,ot=null;function et(h){if(typeof re=="function"&&$e(h),ot&&typeof ot.setStrictMode=="function")try{ot.setStrictMode(qe,h)}catch{}}var Ft=Math.clz32?Math.clz32:qt,At=Math.log,Ct=Math.LN2;function qt(h){return h>>>=0,h===0?32:31-(At(h)/Ct|0)|0}var yt=256,Mt=4194304;function on(h){var m=h&42;if(m!==0)return m;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function tn(h,m,w){var A=h.pendingLanes;if(A===0)return 0;var k=0,U=h.suspendedLanes,ie=h.pingedLanes;h=h.warmLanes;var he=A&134217727;return he!==0?(A=he&~U,A!==0?k=on(A):(ie&=he,ie!==0?k=on(ie):w||(w=he&~h,w!==0&&(k=on(w))))):(he=A&~U,he!==0?k=on(he):ie!==0?k=on(ie):w||(w=A&~h,w!==0&&(k=on(w)))),k===0?0:m!==0&&m!==k&&(m&U)===0&&(U=k&-k,w=m&-m,U>=w||U===32&&(w&4194048)!==0)?m:k}function zt(h,m){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&m)===0}function fn(h,m){switch(h){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Te(){var h=yt;return yt<<=1,(yt&4194048)===0&&(yt=256),h}function Xe(){var h=Mt;return Mt<<=1,(Mt&62914560)===0&&(Mt=4194304),h}function Lt(h){for(var m=[],w=0;31>w;w++)m.push(h);return m}function en(h,m){h.pendingLanes|=m,m!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function Vt(h,m,w,A,k,U){var ie=h.pendingLanes;h.pendingLanes=w,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=w,h.entangledLanes&=w,h.errorRecoveryDisabledLanes&=w,h.shellSuspendCounter=0;var he=h.entanglements,Re=h.expirationTimes,rt=h.hiddenUpdates;for(w=ie&~w;0<w;){var kt=31-Ft(w),Pt=1<<kt;he[kt]=0,Re[kt]=-1;var ht=rt[kt];if(ht!==null)for(rt[kt]=null,kt=0;kt<ht.length;kt++){var gt=ht[kt];gt!==null&&(gt.lane&=-536870913)}w&=~Pt}A!==0&&Ot(h,A,0),U!==0&&k===0&&h.tag!==0&&(h.suspendedLanes|=U&~(ie&~m))}function Ot(h,m,w){h.pendingLanes|=m,h.suspendedLanes&=~m;var A=31-Ft(m);h.entangledLanes|=m,h.entanglements[A]=h.entanglements[A]|1073741824|w&4194090}function un(h,m){var w=h.entangledLanes|=m;for(h=h.entanglements;w;){var A=31-Ft(w),k=1<<A;k&m|h[A]&m&&(h[A]|=m),w&=~k}}function In(h){switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=128;break;case 268435456:h=134217728;break;default:h=0}return h}function Tr(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function lr(){var h=J.p;return h!==0?h:(h=window.event,h===void 0?32:yH(h.type))}function to(h,m){var w=J.p;try{return J.p=h,m()}finally{J.p=w}}var ns=Math.random().toString(36).slice(2),pi="__reactFiber$"+ns,Si="__reactProps$"+ns,Ri="__reactContainer$"+ns,as="__reactEvents$"+ns,Fa="__reactListeners$"+ns,vr="__reactHandles$"+ns,Nn="__reactResources$"+ns,Fs="__reactMarker$"+ns;function ci(h){delete h[pi],delete h[Si],delete h[as],delete h[Fa],delete h[vr]}function oe(h){var m=h[pi];if(m)return m;for(var w=h.parentNode;w;){if(m=w[Ri]||w[pi]){if(w=m.alternate,m.child!==null||w!==null&&w.child!==null)for(h=nH(h);h!==null;){if(w=h[pi])return w;h=nH(h)}return m}h=w,w=h.parentNode}return null}function me(h){if(h=h[pi]||h[Ri]){var m=h.tag;if(m===5||m===6||m===13||m===26||m===27||m===3)return h}return null}function Oe(h){var m=h.tag;if(m===5||m===26||m===27||m===6)return h.stateNode;throw Error(r(33))}function nt(h){var m=h[Nn];return m||(m=h[Nn]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function ct(h){h[Fs]=!0}var St=new Set,jt={};function se(h,m){Se(h,m),Se(h+"Capture",m)}function Se(h,m){for(jt[h]=m,h=0;h<m.length;h++)St.add(m[h])}var Ae=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Me={},Ce={};function It(h){return dt.call(Ce,h)?!0:dt.call(Me,h)?!1:Ae.test(h)?Ce[h]=!0:(Me[h]=!0,!1)}function vt(h,m,w){if(It(m))if(w===null)h.removeAttribute(m);else{switch(typeof w){case"undefined":case"function":case"symbol":h.removeAttribute(m);return;case"boolean":var A=m.toLowerCase().slice(0,5);if(A!=="data-"&&A!=="aria-"){h.removeAttribute(m);return}}h.setAttribute(m,""+w)}}function Tt(h,m,w){if(w===null)h.removeAttribute(m);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(m);return}h.setAttribute(m,""+w)}}function Et(h,m,w,A){if(A===null)h.removeAttribute(w);else{switch(typeof A){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(w);return}h.setAttributeNS(m,w,""+A)}}var Xt,Qt;function Wt(h){if(Xt===void 0)try{throw Error()}catch(w){var m=w.stack.trim().match(/\n( *(at )?)/);Xt=m&&m[1]||"",Qt=-1<w.stack.indexOf(`
    at`)?" (<anonymous>)":-1<w.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xt+h+Qt}var bn=!1;function Hn(h,m){if(!h||bn)return"";bn=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var A={DetermineComponentFrameRoot:function(){try{if(m){var Pt=function(){throw Error()};if(Object.defineProperty(Pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Pt,[])}catch(gt){var ht=gt}Reflect.construct(h,[],Pt)}else{try{Pt.call()}catch(gt){ht=gt}h.call(Pt.prototype)}}else{try{throw Error()}catch(gt){ht=gt}(Pt=h())&&typeof Pt.catch=="function"&&Pt.catch(function(){})}}catch(gt){if(gt&&ht&&typeof gt.stack=="string")return[gt.stack,ht.stack]}return[null,null]}};A.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var k=Object.getOwnPropertyDescriptor(A.DetermineComponentFrameRoot,"name");k&&k.configurable&&Object.defineProperty(A.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var U=A.DetermineComponentFrameRoot(),ie=U[0],he=U[1];if(ie&&he){var Re=ie.split(`
`),rt=he.split(`
`);for(k=A=0;A<Re.length&&!Re[A].includes("DetermineComponentFrameRoot");)A++;for(;k<rt.length&&!rt[k].includes("DetermineComponentFrameRoot");)k++;if(A===Re.length||k===rt.length)for(A=Re.length-1,k=rt.length-1;1<=A&&0<=k&&Re[A]!==rt[k];)k--;for(;1<=A&&0<=k;A--,k--)if(Re[A]!==rt[k]){if(A!==1||k!==1)do if(A--,k--,0>k||Re[A]!==rt[k]){var kt=`
`+Re[A].replace(" at new "," at ");return h.displayName&&kt.includes("<anonymous>")&&(kt=kt.replace("<anonymous>",h.displayName)),kt}while(1<=A&&0<=k);break}}}finally{bn=!1,Error.prepareStackTrace=w}return(w=h?h.displayName||h.name:"")?Wt(w):""}function On(h){switch(h.tag){case 26:case 27:case 5:return Wt(h.type);case 16:return Wt("Lazy");case 13:return Wt("Suspense");case 19:return Wt("SuspenseList");case 0:case 15:return Hn(h.type,!1);case 11:return Hn(h.type.render,!1);case 1:return Hn(h.type,!0);case 31:return Wt("Activity");default:return""}}function ar(h){try{var m="";do m+=On(h),h=h.return;while(h);return m}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}function yn(h){switch(typeof h){case"bigint":case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function ln(h){var m=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function Rr(h){var m=ln(h)?"checked":"value",w=Object.getOwnPropertyDescriptor(h.constructor.prototype,m),A=""+h[m];if(!h.hasOwnProperty(m)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var k=w.get,U=w.set;return Object.defineProperty(h,m,{configurable:!0,get:function(){return k.call(this)},set:function(ie){A=""+ie,U.call(this,ie)}}),Object.defineProperty(h,m,{enumerable:w.enumerable}),{getValue:function(){return A},setValue:function(ie){A=""+ie},stopTracking:function(){h._valueTracker=null,delete h[m]}}}}function Jn(h){h._valueTracker||(h._valueTracker=Rr(h))}function Kr(h){if(!h)return!1;var m=h._valueTracker;if(!m)return!0;var w=m.getValue(),A="";return h&&(A=ln(h)?h.checked?"true":"false":h.value),h=A,h!==w?(m.setValue(h),!0):!1}function cr(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}var jn=/[\n"\\]/g;function Zn(h){return h.replace(jn,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function Mn(h,m,w,A,k,U,ie,he){h.name="",ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"?h.type=ie:h.removeAttribute("type"),m!=null?ie==="number"?(m===0&&h.value===""||h.value!=m)&&(h.value=""+yn(m)):h.value!==""+yn(m)&&(h.value=""+yn(m)):ie!=="submit"&&ie!=="reset"||h.removeAttribute("value"),m!=null?wi(h,ie,yn(m)):w!=null?wi(h,ie,yn(w)):A!=null&&h.removeAttribute("value"),k==null&&U!=null&&(h.defaultChecked=!!U),k!=null&&(h.checked=k&&typeof k!="function"&&typeof k!="symbol"),he!=null&&typeof he!="function"&&typeof he!="symbol"&&typeof he!="boolean"?h.name=""+yn(he):h.removeAttribute("name")}function Wr(h,m,w,A,k,U,ie,he){if(U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(h.type=U),m!=null||w!=null){if(!(U!=="submit"&&U!=="reset"||m!=null))return;w=w!=null?""+yn(w):"",m=m!=null?""+yn(m):w,he||m===h.value||(h.value=m),h.defaultValue=m}A=A??k,A=typeof A!="function"&&typeof A!="symbol"&&!!A,h.checked=he?h.checked:!!A,h.defaultChecked=!!A,ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"&&(h.name=ie)}function wi(h,m,w){m==="number"&&cr(h.ownerDocument)===h||h.defaultValue===""+w||(h.defaultValue=""+w)}function Sr(h,m,w,A){if(h=h.options,m){m={};for(var k=0;k<w.length;k++)m["$"+w[k]]=!0;for(w=0;w<h.length;w++)k=m.hasOwnProperty("$"+h[w].value),h[w].selected!==k&&(h[w].selected=k),k&&A&&(h[w].defaultSelected=!0)}else{for(w=""+yn(w),m=null,k=0;k<h.length;k++){if(h[k].value===w){h[k].selected=!0,A&&(h[k].defaultSelected=!0);return}m!==null||h[k].disabled||(m=h[k])}m!==null&&(m.selected=!0)}}function _i(h,m,w){if(m!=null&&(m=""+yn(m),m!==h.value&&(h.value=m),w==null)){h.defaultValue!==m&&(h.defaultValue=m);return}h.defaultValue=w!=null?""+yn(w):""}function ad(h,m,w,A){if(m==null){if(A!=null){if(w!=null)throw Error(r(92));if(q(A)){if(1<A.length)throw Error(r(93));A=A[0]}w=A}w==null&&(w=""),m=w}w=yn(m),h.defaultValue=w,A=h.textContent,A===w&&A!==""&&A!==null&&(h.value=A)}function ps(h,m){if(m){var w=h.firstChild;if(w&&w===h.lastChild&&w.nodeType===3){w.nodeValue=m;return}}h.textContent=m}var s0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function uu(h,m,w){var A=m.indexOf("--")===0;w==null||typeof w=="boolean"||w===""?A?h.setProperty(m,""):m==="float"?h.cssFloat="":h[m]="":A?h.setProperty(m,w):typeof w!="number"||w===0||s0.has(m)?m==="float"?h.cssFloat=w:h[m]=(""+w).trim():h[m]=w+"px"}function vh(h,m,w){if(m!=null&&typeof m!="object")throw Error(r(62));if(h=h.style,w!=null){for(var A in w)!w.hasOwnProperty(A)||m!=null&&m.hasOwnProperty(A)||(A.indexOf("--")===0?h.setProperty(A,""):A==="float"?h.cssFloat="":h[A]="");for(var k in m)A=m[k],m.hasOwnProperty(k)&&w[k]!==A&&uu(h,k,A)}else for(var U in m)m.hasOwnProperty(U)&&uu(h,U,m[U])}function Pf(h){if(h.indexOf("-")===-1)return!1;switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ld=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Uf(h){return Wv.test(""+h)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":h}var cm=null;function um(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var Xl=null,ul=null;function o0(h){var m=me(h);if(m&&(h=m.stateNode)){var w=h[Si]||null;e:switch(h=m.stateNode,m.type){case"input":if(Mn(h,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name),m=w.name,w.type==="radio"&&m!=null){for(w=h;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll('input[name="'+Zn(""+m)+'"][type="radio"]'),m=0;m<w.length;m++){var A=w[m];if(A!==h&&A.form===h.form){var k=A[Si]||null;if(!k)throw Error(r(90));Mn(A,k.value,k.defaultValue,k.defaultValue,k.checked,k.defaultChecked,k.type,k.name)}}for(m=0;m<w.length;m++)A=w[m],A.form===h.form&&Kr(A)}break e;case"textarea":_i(h,w.value,w.defaultValue);break e;case"select":m=w.value,m!=null&&Sr(h,!!w.multiple,m,!1)}}}var zf=!1;function a0(h,m,w){if(zf)return h(m,w);zf=!0;try{var A=h(m);return A}finally{if(zf=!1,(Xl!==null||ul!==null)&&(Au(),Xl&&(m=Xl,h=ul,ul=Xl=null,o0(m),h)))for(m=0;m<h.length;m++)o0(h[m])}}function bh(h,m){var w=h.stateNode;if(w===null)return null;var A=w[Si]||null;if(A===null)return null;w=A[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(A=!A.disabled)||(h=h.type,A=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!A;break e;default:h=!1}if(h)return null;if(w&&typeof w!="function")throw Error(r(231,m,typeof w));return w}var Pa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xh=!1;if(Pa)try{var cd={};Object.defineProperty(cd,"passive",{get:function(){xh=!0}}),window.addEventListener("test",cd,cd),window.removeEventListener("test",cd,cd)}catch{xh=!1}var pa=null,ma=null,dm=null;function l0(){if(dm)return dm;var h,m=ma,w=m.length,A,k="value"in pa?pa.value:pa.textContent,U=k.length;for(h=0;h<w&&m[h]===k[h];h++);var ie=w-h;for(A=1;A<=ie&&m[w-A]===k[U-A];A++);return dm=k.slice(h,1<A?1-A:void 0)}function Oc(h){var m=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&m===13&&(h=13)):h=m,h===10&&(h=13),32<=h||h===13?h:0}function ud(){return!0}function dd(){return!1}function no(h){function m(w,A,k,U,ie){this._reactName=w,this._targetInst=k,this.type=A,this.nativeEvent=U,this.target=ie,this.currentTarget=null;for(var he in h)h.hasOwnProperty(he)&&(w=h[he],this[he]=w?w(U):U[he]);return this.isDefaultPrevented=(U.defaultPrevented!=null?U.defaultPrevented:U.returnValue===!1)?ud:dd,this.isPropagationStopped=dd,this}return u(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=ud)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=ud)},persist:function(){},isPersistent:ud}),m}var ga={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hd=no(ga),du=u({},ga,{view:0,detail:0}),jv=no(du),ql,dl,fd,pd=u({},du,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sh,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==fd&&(fd&&h.type==="mousemove"?(ql=h.screenX-fd.screenX,dl=h.screenY-fd.screenY):dl=ql=0,fd=h),ql)},movementY:function(h){return"movementY"in h?h.movementY:dl}}),c0=no(pd),u0=u({},pd,{dataTransfer:0}),hm=no(u0),Ps=u({},du,{relatedTarget:0}),fm=no(Ps),d0=u({},ga,{animationName:0,elapsedTime:0,pseudoElement:0}),h0=no(d0),f0=u({},ga,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),p0=no(f0),md=u({},ga,{data:0}),Hf=no(md),Xv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function m0(h){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(h):(h=Kv[h])?!!m[h]:!1}function Sh(){return m0}var Yv=u({},du,{key:function(h){if(h.key){var m=Xv[h.key]||h.key;if(m!=="Unidentified")return m}return h.type==="keypress"?(h=Oc(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?qv[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sh,charCode:function(h){return h.type==="keypress"?Oc(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?Oc(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),g0=no(Yv),Vf=u({},pd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pm=no(Vf),Jv=u({},du,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sh}),y0=no(Jv),Gf=u({},ga,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bc=no(Gf),v0=u({},pd,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),mS=no(v0),b0=u({},ga,{newState:0,oldState:0}),$c=no(b0),O=[9,13,27,32],j=Pa&&"CompositionEvent"in window,ee=null;Pa&&"documentMode"in document&&(ee=document.documentMode);var ae=Pa&&"TextEvent"in window&&!ee,we=Pa&&(!j||ee&&8<ee&&11>=ee),Ee=" ",_e=!1;function He(h,m){switch(h){case"keyup":return O.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ft(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var Ht=!1;function Zt(h,m){switch(h){case"compositionend":return ft(m);case"keypress":return m.which!==32?null:(_e=!0,Ee);case"textInput":return h=m.data,h===Ee&&_e?null:h;default:return null}}function Un(h,m){if(Ht)return h==="compositionend"||!j&&He(h,m)?(h=l0(),dm=ma=pa=null,Ht=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return we&&m.locale!=="ko"?null:m.data;default:return null}}var Cn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cn(h){var m=h&&h.nodeName&&h.nodeName.toLowerCase();return m==="input"?!!Cn[h.type]:m==="textarea"}function xn(h,m,w,A){Xl?ul?ul.push(A):ul=[A]:Xl=A,m=TA(m,"onChange"),0<m.length&&(w=new hd("onChange","change",null,w,A),h.push({event:w,listeners:m}))}var ir=null,Yr=null;function mi(h){j6(h,0)}function ls(h){var m=Oe(h);if(Kr(m))return h}function Io(h,m){if(h==="change")return m}var ro=!1;if(Pa){var kr;if(Pa){var rs="oninput"in document;if(!rs){var ya=document.createElement("div");ya.setAttribute("oninput","return;"),rs=typeof ya.oninput=="function"}kr=rs}else kr=!1;ro=kr&&(!document.documentMode||9<document.documentMode)}function Pi(){ir&&(ir.detachEvent("onpropertychange",Zv),Yr=ir=null)}function Zv(h){if(h.propertyName==="value"&&ls(Yr)){var m=[];xn(m,Yr,h,um(h)),a0(mi,m)}}function gS(h,m,w){h==="focusin"?(Pi(),ir=m,Yr=w,ir.attachEvent("onpropertychange",Zv)):h==="focusout"&&Pi()}function Qv(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return ls(Yr)}function Wf(h,m){if(h==="click")return ls(m)}function hl(h,m){if(h==="input"||h==="change")return ls(m)}function D2(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var Ua=typeof Object.is=="function"?Object.is:D2;function Lc(h,m){if(Ua(h,m))return!0;if(typeof h!="object"||h===null||typeof m!="object"||m===null)return!1;var w=Object.keys(h),A=Object.keys(m);if(w.length!==A.length)return!1;for(A=0;A<w.length;A++){var k=w[A];if(!dt.call(m,k)||!Ua(h[k],m[k]))return!1}return!0}function za(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function yS(h,m){var w=za(h);h=0;for(var A;w;){if(w.nodeType===3){if(A=h+w.textContent.length,h<=m&&A>=m)return{node:w,offset:m-h};h=A}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=za(w)}}function vS(h,m){return h&&m?h===m?!0:h&&h.nodeType===3?!1:m&&m.nodeType===3?vS(h,m.parentNode):"contains"in h?h.contains(m):h.compareDocumentPosition?!!(h.compareDocumentPosition(m)&16):!1:!1}function bS(h){h=h!=null&&h.ownerDocument!=null&&h.ownerDocument.defaultView!=null?h.ownerDocument.defaultView:window;for(var m=cr(h.document);m instanceof h.HTMLIFrameElement;){try{var w=typeof m.contentWindow.location.href=="string"}catch{w=!1}if(w)h=m.contentWindow;else break;m=cr(h.document)}return m}function x0(h){var m=h&&h.nodeName&&h.nodeName.toLowerCase();return m&&(m==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||m==="textarea"||h.contentEditable==="true")}var xS=Pa&&"documentMode"in document&&11>=document.documentMode,gd=null,eb=null,S0=null,tb=!1;function SS(h,m,w){var A=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;tb||gd==null||gd!==cr(A)||(A=gd,"selectionStart"in A&&x0(A)?A={start:A.selectionStart,end:A.selectionEnd}:(A=(A.ownerDocument&&A.ownerDocument.defaultView||window).getSelection(),A={anchorNode:A.anchorNode,anchorOffset:A.anchorOffset,focusNode:A.focusNode,focusOffset:A.focusOffset}),S0&&Lc(S0,A)||(S0=A,A=TA(eb,"onSelect"),0<A.length&&(m=new hd("onSelect","select",null,m,w),h.push({event:m,listeners:A}),m.target=gd)))}function Do(h,m){var w={};return w[h.toLowerCase()]=m.toLowerCase(),w["Webkit"+h]="webkit"+m,w["Moz"+h]="moz"+m,w}var wh={animationend:Do("Animation","AnimationEnd"),animationiteration:Do("Animation","AnimationIteration"),animationstart:Do("Animation","AnimationStart"),transitionrun:Do("Transition","TransitionRun"),transitionstart:Do("Transition","TransitionStart"),transitioncancel:Do("Transition","TransitionCancel"),transitionend:Do("Transition","TransitionEnd")},nb={},k2={};Pa&&(k2=document.createElement("div").style,"AnimationEvent"in window||(delete wh.animationend.animation,delete wh.animationiteration.animation,delete wh.animationstart.animation),"TransitionEvent"in window||delete wh.transitionend.transition);function yd(h){if(nb[h])return nb[h];if(!wh[h])return h;var m=wh[h],w;for(w in m)if(m.hasOwnProperty(w)&&w in k2)return nb[h]=m[w];return h}var va=yd("animationend"),wS=yd("animationiteration"),Ha=yd("animationstart"),O2=yd("transitionrun"),vd=yd("transitionstart"),mm=yd("transitioncancel"),bd=yd("transitionend"),rb=new Map,w0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");w0.push("scrollEnd");function po(h,m){rb.set(h,m),se(m,[h])}var _S=new WeakMap;function ko(h,m){if(typeof h=="object"&&h!==null){var w=_S.get(h);return w!==void 0?w:(m={value:h,source:m,stack:ar(m)},_S.set(h,m),m)}return{value:h,source:m,stack:ar(m)}}var qo=[],Kl=0,ib=0;function _0(){for(var h=Kl,m=ib=Kl=0;m<h;){var w=qo[m];qo[m++]=null;var A=qo[m];qo[m++]=null;var k=qo[m];qo[m++]=null;var U=qo[m];if(qo[m++]=null,A!==null&&k!==null){var ie=A.pending;ie===null?k.next=k:(k.next=ie.next,ie.next=k),A.pending=k}U!==0&&CS(w,k,U)}}function _h(h,m,w,A){qo[Kl++]=h,qo[Kl++]=m,qo[Kl++]=w,qo[Kl++]=A,ib|=A,h.lanes|=A,h=h.alternate,h!==null&&(h.lanes|=A)}function sb(h,m,w,A){return _h(h,m,w,A),gm(h)}function xd(h,m){return _h(h,null,null,m),gm(h)}function CS(h,m,w){h.lanes|=w;var A=h.alternate;A!==null&&(A.lanes|=w);for(var k=!1,U=h.return;U!==null;)U.childLanes|=w,A=U.alternate,A!==null&&(A.childLanes|=w),U.tag===22&&(h=U.stateNode,h===null||h._visibility&1||(k=!0)),h=U,U=U.return;return h.tag===3?(U=h.stateNode,k&&m!==null&&(k=31-Ft(w),h=U.hiddenUpdates,A=h[k],A===null?h[k]=[m]:A.push(m),m.lane=w|536870912),U):null}function gm(h){if(50<Eu)throw Eu=0,cp=null,Error(r(185));for(var m=h.return;m!==null;)h=m,m=h.return;return h.tag===3?h.stateNode:null}var Ch={};function ES(h,m,w,A){this.tag=h,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Va(h,m,w,A){return new ES(h,m,w,A)}function C0(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Es(h,m){var w=h.alternate;return w===null?(w=Va(h.tag,m,h.key,h.mode),w.elementType=h.elementType,w.type=h.type,w.stateNode=h.stateNode,w.alternate=h,h.alternate=w):(w.pendingProps=m,w.type=h.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=h.flags&65011712,w.childLanes=h.childLanes,w.lanes=h.lanes,w.child=h.child,w.memoizedProps=h.memoizedProps,w.memoizedState=h.memoizedState,w.updateQueue=h.updateQueue,m=h.dependencies,w.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},w.sibling=h.sibling,w.index=h.index,w.ref=h.ref,w.refCleanup=h.refCleanup,w}function AS(h,m){h.flags&=65011714;var w=h.alternate;return w===null?(h.childLanes=0,h.lanes=m,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=w.childLanes,h.lanes=w.lanes,h.child=w.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=w.memoizedProps,h.memoizedState=w.memoizedState,h.updateQueue=w.updateQueue,h.type=w.type,m=w.dependencies,h.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),h}function mo(h,m,w,A,k,U){var ie=0;if(A=h,typeof h=="function")C0(h)&&(ie=1);else if(typeof h=="string")ie=fle(h,w,ye.current)?26:h==="html"||h==="head"||h==="body"?27:5;else e:switch(h){case N:return h=Va(31,w,m,k),h.elementType=N,h.lanes=U,h;case g:return Eh(w.children,k,U,m);case v:ie=8,k|=24;break;case b:return h=Va(12,w,m,k|2),h.elementType=b,h.lanes=U,h;case M:return h=Va(13,w,m,k),h.elementType=M,h.lanes=U,h;case R:return h=Va(19,w,m,k),h.elementType=R,h.lanes=U,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case x:case E:ie=10;break e;case _:ie=9;break e;case C:ie=11;break e;case L:ie=14;break e;case B:ie=16,A=null;break e}ie=29,w=Error(r(130,h===null?"null":typeof h,"")),A=null}return m=Va(ie,w,m,k),m.elementType=h,m.type=A,m.lanes=U,m}function Eh(h,m,w,A){return h=Va(7,h,A,m),h.lanes=w,h}function E0(h,m,w){return h=Va(6,h,null,m),h.lanes=w,h}function ob(h,m,w){return m=Va(4,h.children!==null?h.children:[],h.key,m),m.lanes=w,m.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},m}var ym=[],Ga=0,A0=null,vm=0,Oo=[],fl=0,Ah=null,hu=1,fu="";function Sd(h,m){ym[Ga++]=vm,ym[Ga++]=A0,A0=h,vm=m}function ab(h,m,w){Oo[fl++]=hu,Oo[fl++]=fu,Oo[fl++]=Ah,Ah=h;var A=hu;h=fu;var k=32-Ft(A)-1;A&=~(1<<k),w+=1;var U=32-Ft(m)+k;if(30<U){var ie=k-k%5;U=(A&(1<<ie)-1).toString(32),A>>=ie,k-=ie,hu=1<<32-Ft(m)+k|w<<k|A,fu=U+h}else hu=1<<U|w<<k|A,fu=h}function TS(h){h.return!==null&&(Sd(h,1),ab(h,1,0))}function MS(h){for(;h===A0;)A0=ym[--Ga],ym[Ga]=null,vm=ym[--Ga],ym[Ga]=null;for(;h===Ah;)Ah=Oo[--fl],Oo[fl]=null,fu=Oo[--fl],Oo[fl]=null,hu=Oo[--fl],Oo[fl]=null}var ba=null,cs=null,ni=!1,Yl=null,pl=!1,lb=Error(r(519));function Th(h){var m=Error(r(418,""));throw jf(ko(m,h)),lb}function B2(h){var m=h.stateNode,w=h.type,A=h.memoizedProps;switch(m[pi]=h,m[Si]=A,w){case"dialog":Ur("cancel",m),Ur("close",m);break;case"iframe":case"object":case"embed":Ur("load",m);break;case"video":case"audio":for(w=0;w<sw.length;w++)Ur(sw[w],m);break;case"source":Ur("error",m);break;case"img":case"image":case"link":Ur("error",m),Ur("load",m);break;case"details":Ur("toggle",m);break;case"input":Ur("invalid",m),Wr(m,A.value,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name,!0),Jn(m);break;case"select":Ur("invalid",m);break;case"textarea":Ur("invalid",m),ad(m,A.value,A.defaultValue,A.children),Jn(m)}w=A.children,typeof w!="string"&&typeof w!="number"&&typeof w!="bigint"||m.textContent===""+w||A.suppressHydrationWarning===!0||Y6(m.textContent,w)?(A.popover!=null&&(Ur("beforetoggle",m),Ur("toggle",m)),A.onScroll!=null&&Ur("scroll",m),A.onScrollEnd!=null&&Ur("scrollend",m),A.onClick!=null&&(m.onclick=MA),m=!0):m=!1,m||Th(h)}function RS(h){for(ba=h.return;ba;)switch(ba.tag){case 5:case 13:pl=!1;return;case 27:case 3:pl=!0;return;default:ba=ba.return}}function Fc(h){if(h!==ba)return!1;if(!ni)return RS(h),ni=!0,!1;var m=h.tag,w;if((w=m!==3&&m!==27)&&((w=m===5)&&(w=h.type,w=!(w!=="form"&&w!=="button")||$k(h.type,h.memoizedProps)),w=!w),w&&cs&&Th(h),RS(h),m===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));e:{for(h=h.nextSibling,m=0;h;){if(h.nodeType===8)if(w=h.data,w==="/$"){if(m===0){cs=Bd(h.nextSibling);break e}m--}else w!=="$"&&w!=="$!"&&w!=="$?"||m++;h=h.nextSibling}cs=null}}else m===27?(m=cs,Vm(h.type)?(h=Uk,Uk=null,cs=h):cs=m):cs=ba?Bd(h.stateNode.nextSibling):null;return!0}function bm(){cs=ba=null,ni=!1}function ui(){var h=Yl;return h!==null&&(Gn===null?Gn=h:Gn.push.apply(Gn,h),Yl=null),h}function jf(h){Yl===null?Yl=[h]:Yl.push(h)}var NS=te(null),Mh=null,wd=null;function Rh(h,m,w){le(NS,m._currentValue),m._currentValue=w}function _d(h){h._currentValue=NS.current,ne(NS)}function IS(h,m,w){for(;h!==null;){var A=h.alternate;if((h.childLanes&m)!==m?(h.childLanes|=m,A!==null&&(A.childLanes|=m)):A!==null&&(A.childLanes&m)!==m&&(A.childLanes|=m),h===w)break;h=h.return}}function T0(h,m,w,A){var k=h.child;for(k!==null&&(k.return=h);k!==null;){var U=k.dependencies;if(U!==null){var ie=k.child;U=U.firstContext;e:for(;U!==null;){var he=U;U=k;for(var Re=0;Re<m.length;Re++)if(he.context===m[Re]){U.lanes|=w,he=U.alternate,he!==null&&(he.lanes|=w),IS(U.return,w,h),A||(ie=null);break e}U=he.next}}else if(k.tag===18){if(ie=k.return,ie===null)throw Error(r(341));ie.lanes|=w,U=ie.alternate,U!==null&&(U.lanes|=w),IS(ie,w,h),ie=null}else ie=k.child;if(ie!==null)ie.return=k;else for(ie=k;ie!==null;){if(ie===h){ie=null;break}if(k=ie.sibling,k!==null){k.return=ie.return,ie=k;break}ie=ie.return}k=ie}}function Jl(h,m,w,A){h=null;for(var k=m,U=!1;k!==null;){if(!U){if((k.flags&524288)!==0)U=!0;else if((k.flags&262144)!==0)break}if(k.tag===10){var ie=k.alternate;if(ie===null)throw Error(r(387));if(ie=ie.memoizedProps,ie!==null){var he=k.type;Ua(k.pendingProps.value,ie.value)||(h!==null?h.push(he):h=[he])}}else if(k===xe.current){if(ie=k.alternate,ie===null)throw Error(r(387));ie.memoizedState.memoizedState!==k.memoizedState.memoizedState&&(h!==null?h.push(dw):h=[dw])}k=k.return}h!==null&&T0(m,h,w,A),m.flags|=262144}function M0(h){for(h=h.firstContext;h!==null;){if(!Ua(h.context._currentValue,h.memoizedValue))return!0;h=h.next}return!1}function pu(h){Mh=h,wd=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function ms(h){return cb(Mh,h)}function R0(h,m){return Mh===null&&pu(h),cb(h,m)}function cb(h,m){var w=m._currentValue;if(m={context:m,memoizedValue:w,next:null},wd===null){if(h===null)throw Error(r(308));wd=m,h.dependencies={lanes:0,firstContext:m},h.flags|=524288}else wd=wd.next=m;return w}var DS=typeof AbortController<"u"?AbortController:function(){var h=[],m=this.signal={aborted:!1,addEventListener:function(w,A){h.push(A)}};this.abort=function(){m.aborted=!0,h.forEach(function(w){return w()})}},yk=n.unstable_scheduleCallback,$2=n.unstable_NormalPriority,Us={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ub(){return{controller:new DS,data:new Map,refCount:0}}function xm(h){h.refCount--,h.refCount===0&&yk($2,function(){h.controller.abort()})}var Sm=null,N0=0,pr=0,wm=null;function ml(h,m){if(Sm===null){var w=Sm=[];N0=0,pr=Tk(),wm={status:"pending",value:void 0,then:function(A){w.push(A)}}}return N0++,m.then(db,db),m}function db(){if(--N0===0&&Sm!==null){wm!==null&&(wm.status="fulfilled");var h=Sm;Sm=null,pr=0,wm=null;for(var m=0;m<h.length;m++)(0,h[m])()}}function vk(h,m){var w=[],A={status:"pending",value:null,reason:null,then:function(k){w.push(k)}};return h.then(function(){A.status="fulfilled",A.value=m;for(var k=0;k<w.length;k++)(0,w[k])(m)},function(k){for(A.status="rejected",A.reason=k,k=0;k<w.length;k++)(0,w[k])(void 0)}),A}var I0=z.S;z.S=function(h,m){typeof m=="object"&&m!==null&&typeof m.then=="function"&&ml(h,m),I0!==null&&I0(h,m)};var Zl=te(null);function Nh(){var h=Zl.current;return h!==null?h:ur.pooledCache}function D0(h,m){m===null?le(Zl,Zl.current):le(Zl,m.pool)}function hb(){var h=Nh();return h===null?null:{parent:Us._currentValue,pool:h}}var k0=Error(r(460)),kS=Error(r(474)),Pc=Error(r(542)),O0={then:function(){}};function fb(h){return h=h.status,h==="fulfilled"||h==="rejected"}function _m(){}function pb(h,m,w){switch(w=h[w],w===void 0?h.push(m):w!==m&&(m.then(_m,_m),m=w),m.status){case"fulfilled":return m.value;case"rejected":throw h=m.reason,L2(h),h;default:if(typeof m.status=="string")m.then(_m,_m);else{if(h=ur,h!==null&&100<h.shellSuspendCounter)throw Error(r(482));h=m,h.status="pending",h.then(function(A){if(m.status==="pending"){var k=m;k.status="fulfilled",k.value=A}},function(A){if(m.status==="pending"){var k=m;k.status="rejected",k.reason=A}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw h=m.reason,L2(h),h}throw Ql=m,k0}}var Ql=null;function OS(){if(Ql===null)throw Error(r(459));var h=Ql;return Ql=null,h}function L2(h){if(h===k0||h===Pc)throw Error(r(483))}var Cd=!1;function BS(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qn(h,m){h=h.updateQueue,m.updateQueue===h&&(m.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function mu(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function Ed(h,m,w){var A=h.updateQueue;if(A===null)return null;if(A=A.shared,(di&2)!==0){var k=A.pending;return k===null?m.next=m:(m.next=k.next,k.next=m),A.pending=m,m=gm(h),CS(h,null,w),m}return _h(h,A,m,w),gm(h)}function Xf(h,m,w){if(m=m.updateQueue,m!==null&&(m=m.shared,(w&4194048)!==0)){var A=m.lanes;A&=h.pendingLanes,w|=A,m.lanes=w,un(h,w)}}function Cm(h,m){var w=h.updateQueue,A=h.alternate;if(A!==null&&(A=A.updateQueue,w===A)){var k=null,U=null;if(w=w.firstBaseUpdate,w!==null){do{var ie={lane:w.lane,tag:w.tag,payload:w.payload,callback:null,next:null};U===null?k=U=ie:U=U.next=ie,w=w.next}while(w!==null);U===null?k=U=m:U=U.next=m}else k=U=m;w={baseState:A.baseState,firstBaseUpdate:k,lastBaseUpdate:U,shared:A.shared,callbacks:A.callbacks},h.updateQueue=w;return}h=w.lastBaseUpdate,h===null?w.firstBaseUpdate=m:h.next=m,w.lastBaseUpdate=m}var $S=!1;function B0(){if($S){var h=wm;if(h!==null)throw h}}function Em(h,m,w,A){$S=!1;var k=h.updateQueue;Cd=!1;var U=k.firstBaseUpdate,ie=k.lastBaseUpdate,he=k.shared.pending;if(he!==null){k.shared.pending=null;var Re=he,rt=Re.next;Re.next=null,ie===null?U=rt:ie.next=rt,ie=Re;var kt=h.alternate;kt!==null&&(kt=kt.updateQueue,he=kt.lastBaseUpdate,he!==ie&&(he===null?kt.firstBaseUpdate=rt:he.next=rt,kt.lastBaseUpdate=Re))}if(U!==null){var Pt=k.baseState;ie=0,kt=rt=Re=null,he=U;do{var ht=he.lane&-536870913,gt=ht!==he.lane;if(gt?(Fn&ht)===ht:(A&ht)===ht){ht!==0&&ht===pr&&($S=!0),kt!==null&&(kt=kt.next={lane:0,tag:he.tag,payload:he.payload,callback:null,next:null});e:{var sr=h,Xn=he;ht=m;var Gi=w;switch(Xn.tag){case 1:if(sr=Xn.payload,typeof sr=="function"){Pt=sr.call(Gi,Pt,ht);break e}Pt=sr;break e;case 3:sr.flags=sr.flags&-65537|128;case 0:if(sr=Xn.payload,ht=typeof sr=="function"?sr.call(Gi,Pt,ht):sr,ht==null)break e;Pt=u({},Pt,ht);break e;case 2:Cd=!0}}ht=he.callback,ht!==null&&(h.flags|=64,gt&&(h.flags|=8192),gt=k.callbacks,gt===null?k.callbacks=[ht]:gt.push(ht))}else gt={lane:ht,tag:he.tag,payload:he.payload,callback:he.callback,next:null},kt===null?(rt=kt=gt,Re=Pt):kt=kt.next=gt,ie|=ht;if(he=he.next,he===null){if(he=k.shared.pending,he===null)break;gt=he,he=gt.next,gt.next=null,k.lastBaseUpdate=gt,k.shared.pending=null}}while(!0);kt===null&&(Re=Pt),k.baseState=Re,k.firstBaseUpdate=rt,k.lastBaseUpdate=kt,U===null&&(k.shared.lanes=0),Xc|=ie,h.lanes=ie,h.memoizedState=Pt}}function Am(h,m){if(typeof h!="function")throw Error(r(191,h));h.call(m)}function F2(h,m){var w=h.callbacks;if(w!==null)for(h.callbacks=null,h=0;h<w.length;h++)Am(w[h],m)}var Tm=te(null),mb=te(0);function P2(h,m){h=sc,le(mb,h),le(Tm,m),sc=h|m.baseLanes}function LS(){le(mb,sc),le(Tm,Tm.current)}function $0(){sc=mb.current,ne(Tm),ne(mb)}var Ad=0,mr=null,gi=null,zs=null,gb=!1,Ih=!1,xa=!1,io=0,ec=0,Bo=null,U2=0;function As(){throw Error(r(321))}function Ko(h,m){if(m===null)return!1;for(var w=0;w<m.length&&w<h.length;w++)if(!Ua(h[w],m[w]))return!1;return!0}function Td(h,m,w,A,k,U){return Ad=U,mr=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,z.H=h===null||h.memoizedState===null?Eb:QS,xa=!1,U=w(A,k),xa=!1,Ih&&(U=H2(m,w,A,k)),z2(h),U}function z2(h){z.H=P0;var m=gi!==null&&gi.next!==null;if(Ad=0,zs=gi=mr=null,gb=!1,ec=0,Bo=null,m)throw Error(r(300));h===null||go||(h=h.dependencies,h!==null&&M0(h)&&(go=!0))}function H2(h,m,w,A){mr=h;var k=0;do{if(Ih&&(Bo=null),ec=0,Ih=!1,25<=k)throw Error(r(301));if(k+=1,zs=gi=null,h.updateQueue!=null){var U=h.updateQueue;U.lastEffect=null,U.events=null,U.stores=null,U.memoCache!=null&&(U.memoCache.index=0)}z.H=pA,U=m(w,A)}while(Ih);return U}function bk(){var h=z.H,m=h.useState()[0];return m=typeof m.then=="function"?Uc(m):m,h=h.useState()[0],(gi!==null?gi.memoizedState:null)!==h&&(mr.flags|=1024),m}function FS(){var h=io!==0;return io=0,h}function yb(h,m,w){m.updateQueue=h.updateQueue,m.flags&=-2053,h.lanes&=~w}function PS(h){if(gb){for(h=h.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}gb=!1}Ad=0,zs=gi=mr=null,Ih=!1,ec=io=0,Bo=null}function Sa(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zs===null?mr.memoizedState=zs=h:zs=zs.next=h,zs}function Hs(){if(gi===null){var h=mr.alternate;h=h!==null?h.memoizedState:null}else h=gi.next;var m=zs===null?mr.memoizedState:zs.next;if(m!==null)zs=m,gi=h;else{if(h===null)throw mr.alternate===null?Error(r(467)):Error(r(310));gi=h,h={memoizedState:gi.memoizedState,baseState:gi.baseState,baseQueue:gi.baseQueue,queue:gi.queue,next:null},zs===null?mr.memoizedState=zs=h:zs=zs.next=h}return zs}function Dh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Uc(h){var m=ec;return ec+=1,Bo===null&&(Bo=[]),h=pb(Bo,h,m),m=mr,(zs===null?m.memoizedState:zs.next)===null&&(m=m.alternate,z.H=m===null||m.memoizedState===null?Eb:QS),h}function vb(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return Uc(h);if(h.$$typeof===E)return ms(h)}throw Error(r(438,String(h)))}function US(h){var m=null,w=mr.updateQueue;if(w!==null&&(m=w.memoCache),m==null){var A=mr.alternate;A!==null&&(A=A.updateQueue,A!==null&&(A=A.memoCache,A!=null&&(m={data:A.data.map(function(k){return k.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),w===null&&(w=Dh(),mr.updateQueue=w),w.memoCache=m,w=m.data[m.index],w===void 0)for(w=m.data[m.index]=Array(h),A=0;A<h;A++)w[A]=I;return m.index++,w}function Md(h,m){return typeof m=="function"?m(h):m}function kh(h){var m=Hs();return zS(m,gi,h)}function zS(h,m,w){var A=h.queue;if(A===null)throw Error(r(311));A.lastRenderedReducer=w;var k=h.baseQueue,U=A.pending;if(U!==null){if(k!==null){var ie=k.next;k.next=U.next,U.next=ie}m.baseQueue=k=U,A.pending=null}if(U=h.baseState,k===null)h.memoizedState=U;else{m=k.next;var he=ie=null,Re=null,rt=m,kt=!1;do{var Pt=rt.lane&-536870913;if(Pt!==rt.lane?(Fn&Pt)===Pt:(Ad&Pt)===Pt){var ht=rt.revertLane;if(ht===0)Re!==null&&(Re=Re.next={lane:0,revertLane:0,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),Pt===pr&&(kt=!0);else if((Ad&ht)===ht){rt=rt.next,ht===pr&&(kt=!0);continue}else Pt={lane:0,revertLane:rt.revertLane,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},Re===null?(he=Re=Pt,ie=U):Re=Re.next=Pt,mr.lanes|=ht,Xc|=ht;Pt=rt.action,xa&&w(U,Pt),U=rt.hasEagerState?rt.eagerState:w(U,Pt)}else ht={lane:Pt,revertLane:rt.revertLane,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},Re===null?(he=Re=ht,ie=U):Re=Re.next=ht,mr.lanes|=Pt,Xc|=Pt;rt=rt.next}while(rt!==null&&rt!==m);if(Re===null?ie=U:Re.next=he,!Ua(U,h.memoizedState)&&(go=!0,kt&&(w=wm,w!==null)))throw w;h.memoizedState=U,h.baseState=ie,h.baseQueue=Re,A.lastRenderedState=U}return k===null&&(A.lanes=0),[h.memoizedState,A.dispatch]}function HS(h){var m=Hs(),w=m.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=h;var A=w.dispatch,k=w.pending,U=m.memoizedState;if(k!==null){w.pending=null;var ie=k=k.next;do U=h(U,ie.action),ie=ie.next;while(ie!==k);Ua(U,m.memoizedState)||(go=!0),m.memoizedState=U,m.baseQueue===null&&(m.baseState=U),w.lastRenderedState=U}return[U,A]}function V2(h,m,w){var A=mr,k=Hs(),U=ni;if(U){if(w===void 0)throw Error(r(407));w=w()}else w=m();var ie=!Ua((gi||k).memoizedState,w);ie&&(k.memoizedState=w,go=!0),k=k.queue;var he=W2.bind(null,A,k,h);if(Nm(2048,8,he,[h]),k.getSnapshot!==m||ie||zs!==null&&zs.memoizedState.tag&1){if(A.flags|=2048,Rm(9,L0(),G2.bind(null,A,k,w,m),null),ur===null)throw Error(r(349));U||(Ad&124)!==0||Mm(A,m,w)}return w}function Mm(h,m,w){h.flags|=16384,h={getSnapshot:m,value:w},m=mr.updateQueue,m===null?(m=Dh(),mr.updateQueue=m,m.stores=[h]):(w=m.stores,w===null?m.stores=[h]:w.push(h))}function G2(h,m,w,A){m.value=w,m.getSnapshot=A,j2(m)&&X2(h)}function W2(h,m,w){return w(function(){j2(m)&&X2(h)})}function j2(h){var m=h.getSnapshot;h=h.value;try{var w=m();return!Ua(h,w)}catch{return!0}}function X2(h){var m=xd(h,2);m!==null&&Ca(m,h,2)}function VS(h){var m=Sa();if(typeof h=="function"){var w=h;if(h=w(),xa){et(!0);try{w()}finally{et(!1)}}}return m.memoizedState=m.baseState=h,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Md,lastRenderedState:h},m}function q2(h,m,w,A){return h.baseState=w,zS(h,gi,typeof A=="function"?A:Md)}function xk(h,m,w,A,k){if(Cb(h))throw Error(r(485));if(h=m.action,h!==null){var U={payload:k,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ie){U.listeners.push(ie)}};z.T!==null?w(!0):U.isTransition=!1,A(U),w=m.pending,w===null?(U.next=m.pending=U,K2(m,U)):(U.next=w.next,m.pending=w.next=U)}}function K2(h,m){var w=m.action,A=m.payload,k=h.state;if(m.isTransition){var U=z.T,ie={};z.T=ie;try{var he=w(k,A),Re=z.S;Re!==null&&Re(ie,he),Y2(h,m,he)}catch(rt){GS(h,m,rt)}finally{z.T=U}}else try{U=w(k,A),Y2(h,m,U)}catch(rt){GS(h,m,rt)}}function Y2(h,m,w){w!==null&&typeof w=="object"&&typeof w.then=="function"?w.then(function(A){J2(h,m,A)},function(A){return GS(h,m,A)}):J2(h,m,w)}function J2(h,m,w){m.status="fulfilled",m.value=w,Z2(m),h.state=w,m=h.pending,m!==null&&(w=m.next,w===m?h.pending=null:(w=w.next,m.next=w,K2(h,w)))}function GS(h,m,w){var A=h.pending;if(h.pending=null,A!==null){A=A.next;do m.status="rejected",m.reason=w,Z2(m),m=m.next;while(m!==A)}h.action=null}function Z2(h){h=h.listeners;for(var m=0;m<h.length;m++)(0,h[m])()}function WS(h,m){return m}function Q2(h,m){if(ni){var w=ur.formState;if(w!==null){e:{var A=mr;if(ni){if(cs){t:{for(var k=cs,U=pl;k.nodeType!==8;){if(!U){k=null;break t}if(k=Bd(k.nextSibling),k===null){k=null;break t}}U=k.data,k=U==="F!"||U==="F"?k:null}if(k){cs=Bd(k.nextSibling),A=k.data==="F!";break e}}Th(A)}A=!1}A&&(m=w[0])}}return w=Sa(),w.memoizedState=w.baseState=m,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:WS,lastRenderedState:m},w.queue=A,w=hA.bind(null,mr,A),A.dispatch=w,A=VS(!1),U=_b.bind(null,mr,!1,A.queue),A=Sa(),k={state:m,dispatch:null,action:h,pending:null},A.queue=k,w=xk.bind(null,mr,k,U,w),k.dispatch=w,A.memoizedState=h,[m,w,!1]}function eA(h){var m=Hs();return tA(m,gi,h)}function tA(h,m,w){if(m=zS(h,m,WS)[0],h=kh(Md)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var A=Uc(m)}catch(ie){throw ie===k0?Pc:ie}else A=m;m=Hs();var k=m.queue,U=k.dispatch;return w!==m.memoizedState&&(mr.flags|=2048,Rm(9,L0(),Sk.bind(null,k,w),null)),[A,U,h]}function Sk(h,m){h.action=m}function nA(h){var m=Hs(),w=gi;if(w!==null)return tA(m,w,h);Hs(),m=m.memoizedState,w=Hs();var A=w.queue.dispatch;return w.memoizedState=h,[m,A,!1]}function Rm(h,m,w,A){return h={tag:h,create:w,deps:A,inst:m,next:null},m=mr.updateQueue,m===null&&(m=Dh(),mr.updateQueue=m),w=m.lastEffect,w===null?m.lastEffect=h.next=h:(A=w.next,w.next=h,h.next=A,m.lastEffect=h),h}function L0(){return{destroy:void 0,resource:void 0}}function jS(){return Hs().memoizedState}function bb(h,m,w,A){var k=Sa();A=A===void 0?null:A,mr.flags|=h,k.memoizedState=Rm(1|m,L0(),w,A)}function Nm(h,m,w,A){var k=Hs();A=A===void 0?null:A;var U=k.memoizedState.inst;gi!==null&&A!==null&&Ko(A,gi.memoizedState.deps)?k.memoizedState=Rm(m,U,w,A):(mr.flags|=h,k.memoizedState=Rm(1|m,U,w,A))}function XS(h,m){bb(8390656,8,h,m)}function qS(h,m){Nm(2048,8,h,m)}function xb(h,m){return Nm(4,2,h,m)}function Sb(h,m){return Nm(4,4,h,m)}function rA(h,m){if(typeof m=="function"){h=h();var w=m(h);return function(){typeof w=="function"?w():m(null)}}if(m!=null)return h=h(),m.current=h,function(){m.current=null}}function iA(h,m,w){w=w!=null?w.concat([h]):null,Nm(4,4,rA.bind(null,m,h),w)}function KS(){}function sA(h,m){var w=Hs();m=m===void 0?null:m;var A=w.memoizedState;return m!==null&&Ko(m,A[1])?A[0]:(w.memoizedState=[h,m],h)}function YS(h,m){var w=Hs();m=m===void 0?null:m;var A=w.memoizedState;if(m!==null&&Ko(m,A[1]))return A[0];if(A=h(),xa){et(!0);try{h()}finally{et(!1)}}return w.memoizedState=[A,m],A}function wb(h,m,w){return w===void 0||(Ad&1073741824)!==0?h.memoizedState=m:(h.memoizedState=w,h=$b(),mr.lanes|=h,Xc|=h,w)}function oA(h,m,w,A){return Ua(w,m)?w:Tm.current!==null?(h=wb(h,w,A),Ua(h,m)||(go=!0),h):(Ad&42)===0?(go=!0,h.memoizedState=w):(h=$b(),mr.lanes|=h,Xc|=h,m)}function aA(h,m,w,A,k){var U=J.p;J.p=U!==0&&8>U?U:8;var ie=z.T,he={};z.T=he,_b(h,!1,m,w);try{var Re=k(),rt=z.S;if(rt!==null&&rt(he,Re),Re!==null&&typeof Re=="object"&&typeof Re.then=="function"){var kt=vk(Re,A);F0(h,m,kt,vs(h))}else F0(h,m,A,vs(h))}catch(Pt){F0(h,m,{then:function(){},status:"rejected",reason:Pt},vs())}finally{J.p=U,z.T=ie}}function wk(){}function JS(h,m,w,A){if(h.tag!==5)throw Error(r(476));var k=lA(h).queue;aA(h,k,m,Q,w===null?wk:function(){return cA(h),w(A)})}function lA(h){var m=h.memoizedState;if(m!==null)return m;m={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Md,lastRenderedState:Q},next:null};var w={};return m.next={memoizedState:w,baseState:w,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Md,lastRenderedState:w},next:null},h.memoizedState=m,h=h.alternate,h!==null&&(h.memoizedState=m),m}function cA(h){var m=lA(h).next.queue;F0(h,m,{},vs())}function ZS(){return ms(dw)}function uA(){return Hs().memoizedState}function dA(){return Hs().memoizedState}function _k(h){for(var m=h.return;m!==null;){switch(m.tag){case 24:case 3:var w=vs();h=mu(w);var A=Ed(m,h,w);A!==null&&(Ca(A,m,w),Xf(A,m,w)),m={cache:ub()},h.payload=m;return}m=m.return}}function Ck(h,m,w){var A=vs();w={lane:A,revertLane:0,action:w,hasEagerState:!1,eagerState:null,next:null},Cb(h)?fA(m,w):(w=sb(h,m,w,A),w!==null&&(Ca(w,h,A),gl(w,m,A)))}function hA(h,m,w){var A=vs();F0(h,m,w,A)}function F0(h,m,w,A){var k={lane:A,revertLane:0,action:w,hasEagerState:!1,eagerState:null,next:null};if(Cb(h))fA(m,k);else{var U=h.alternate;if(h.lanes===0&&(U===null||U.lanes===0)&&(U=m.lastRenderedReducer,U!==null))try{var ie=m.lastRenderedState,he=U(ie,w);if(k.hasEagerState=!0,k.eagerState=he,Ua(he,ie))return _h(h,m,k,0),ur===null&&_0(),!1}catch{}finally{}if(w=sb(h,m,k,A),w!==null)return Ca(w,h,A),gl(w,m,A),!0}return!1}function _b(h,m,w,A){if(A={lane:2,revertLane:Tk(),action:A,hasEagerState:!1,eagerState:null,next:null},Cb(h)){if(m)throw Error(r(479))}else m=sb(h,w,A,2),m!==null&&Ca(m,h,2)}function Cb(h){var m=h.alternate;return h===mr||m!==null&&m===mr}function fA(h,m){Ih=gb=!0;var w=h.pending;w===null?m.next=m:(m.next=w.next,w.next=m),h.pending=m}function gl(h,m,w){if((w&4194048)!==0){var A=m.lanes;A&=h.pendingLanes,w|=A,m.lanes=w,un(h,w)}}var P0={readContext:ms,use:vb,useCallback:As,useContext:As,useEffect:As,useImperativeHandle:As,useLayoutEffect:As,useInsertionEffect:As,useMemo:As,useReducer:As,useRef:As,useState:As,useDebugValue:As,useDeferredValue:As,useTransition:As,useSyncExternalStore:As,useId:As,useHostTransitionStatus:As,useFormState:As,useActionState:As,useOptimistic:As,useMemoCache:As,useCacheRefresh:As},Eb={readContext:ms,use:vb,useCallback:function(h,m){return Sa().memoizedState=[h,m===void 0?null:m],h},useContext:ms,useEffect:XS,useImperativeHandle:function(h,m,w){w=w!=null?w.concat([h]):null,bb(4194308,4,rA.bind(null,m,h),w)},useLayoutEffect:function(h,m){return bb(4194308,4,h,m)},useInsertionEffect:function(h,m){bb(4,2,h,m)},useMemo:function(h,m){var w=Sa();m=m===void 0?null:m;var A=h();if(xa){et(!0);try{h()}finally{et(!1)}}return w.memoizedState=[A,m],A},useReducer:function(h,m,w){var A=Sa();if(w!==void 0){var k=w(m);if(xa){et(!0);try{w(m)}finally{et(!1)}}}else k=m;return A.memoizedState=A.baseState=k,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:k},A.queue=h,h=h.dispatch=Ck.bind(null,mr,h),[A.memoizedState,h]},useRef:function(h){var m=Sa();return h={current:h},m.memoizedState=h},useState:function(h){h=VS(h);var m=h.queue,w=hA.bind(null,mr,m);return m.dispatch=w,[h.memoizedState,w]},useDebugValue:KS,useDeferredValue:function(h,m){var w=Sa();return wb(w,h,m)},useTransition:function(){var h=VS(!1);return h=aA.bind(null,mr,h.queue,!0,!1),Sa().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,m,w){var A=mr,k=Sa();if(ni){if(w===void 0)throw Error(r(407));w=w()}else{if(w=m(),ur===null)throw Error(r(349));(Fn&124)!==0||Mm(A,m,w)}k.memoizedState=w;var U={value:w,getSnapshot:m};return k.queue=U,XS(W2.bind(null,A,U,h),[h]),A.flags|=2048,Rm(9,L0(),G2.bind(null,A,U,w,m),null),w},useId:function(){var h=Sa(),m=ur.identifierPrefix;if(ni){var w=fu,A=hu;w=(A&~(1<<32-Ft(A)-1)).toString(32)+w,m=""+m+"R"+w,w=io++,0<w&&(m+="H"+w.toString(32)),m+=""}else w=U2++,m=""+m+"r"+w.toString(32)+"";return h.memoizedState=m},useHostTransitionStatus:ZS,useFormState:Q2,useActionState:Q2,useOptimistic:function(h){var m=Sa();m.memoizedState=m.baseState=h;var w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=w,m=_b.bind(null,mr,!0,w),w.dispatch=m,[h,m]},useMemoCache:US,useCacheRefresh:function(){return Sa().memoizedState=_k.bind(null,mr)}},QS={readContext:ms,use:vb,useCallback:sA,useContext:ms,useEffect:qS,useImperativeHandle:iA,useInsertionEffect:xb,useLayoutEffect:Sb,useMemo:YS,useReducer:kh,useRef:jS,useState:function(){return kh(Md)},useDebugValue:KS,useDeferredValue:function(h,m){var w=Hs();return oA(w,gi.memoizedState,h,m)},useTransition:function(){var h=kh(Md)[0],m=Hs().memoizedState;return[typeof h=="boolean"?h:Uc(h),m]},useSyncExternalStore:V2,useId:uA,useHostTransitionStatus:ZS,useFormState:eA,useActionState:eA,useOptimistic:function(h,m){var w=Hs();return q2(w,gi,h,m)},useMemoCache:US,useCacheRefresh:dA},pA={readContext:ms,use:vb,useCallback:sA,useContext:ms,useEffect:qS,useImperativeHandle:iA,useInsertionEffect:xb,useLayoutEffect:Sb,useMemo:YS,useReducer:HS,useRef:jS,useState:function(){return HS(Md)},useDebugValue:KS,useDeferredValue:function(h,m){var w=Hs();return gi===null?wb(w,h,m):oA(w,gi.memoizedState,h,m)},useTransition:function(){var h=HS(Md)[0],m=Hs().memoizedState;return[typeof h=="boolean"?h:Uc(h),m]},useSyncExternalStore:V2,useId:uA,useHostTransitionStatus:ZS,useFormState:nA,useActionState:nA,useOptimistic:function(h,m){var w=Hs();return gi!==null?q2(w,gi,h,m):(w.baseState=h,[h,w.queue.dispatch])},useMemoCache:US,useCacheRefresh:dA},qf=null,U0=0;function z0(h){var m=U0;return U0+=1,qf===null&&(qf=[]),pb(qf,h,m)}function Im(h,m){m=m.props.ref,h.ref=m!==void 0?m:null}function Ab(h,m){throw m.$$typeof===d?Error(r(525)):(h=Object.prototype.toString.call(m),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":h)))}function mA(h){var m=h._init;return m(h._payload)}function gA(h){function m(Je,We){if(h){var tt=Je.deletions;tt===null?(Je.deletions=[We],Je.flags|=16):tt.push(We)}}function w(Je,We){if(!h)return null;for(;We!==null;)m(Je,We),We=We.sibling;return null}function A(Je){for(var We=new Map;Je!==null;)Je.key!==null?We.set(Je.key,Je):We.set(Je.index,Je),Je=Je.sibling;return We}function k(Je,We){return Je=Es(Je,We),Je.index=0,Je.sibling=null,Je}function U(Je,We,tt){return Je.index=tt,h?(tt=Je.alternate,tt!==null?(tt=tt.index,tt<We?(Je.flags|=67108866,We):tt):(Je.flags|=67108866,We)):(Je.flags|=1048576,We)}function ie(Je){return h&&Je.alternate===null&&(Je.flags|=67108866),Je}function he(Je,We,tt,Bt){return We===null||We.tag!==6?(We=E0(tt,Je.mode,Bt),We.return=Je,We):(We=k(We,tt),We.return=Je,We)}function Re(Je,We,tt,Bt){var En=tt.type;return En===g?kt(Je,We,tt.props.children,Bt,tt.key):We!==null&&(We.elementType===En||typeof En=="object"&&En!==null&&En.$$typeof===B&&mA(En)===We.type)?(We=k(We,tt.props),Im(We,tt),We.return=Je,We):(We=mo(tt.type,tt.key,tt.props,null,Je.mode,Bt),Im(We,tt),We.return=Je,We)}function rt(Je,We,tt,Bt){return We===null||We.tag!==4||We.stateNode.containerInfo!==tt.containerInfo||We.stateNode.implementation!==tt.implementation?(We=ob(tt,Je.mode,Bt),We.return=Je,We):(We=k(We,tt.children||[]),We.return=Je,We)}function kt(Je,We,tt,Bt,En){return We===null||We.tag!==7?(We=Eh(tt,Je.mode,Bt,En),We.return=Je,We):(We=k(We,tt),We.return=Je,We)}function Pt(Je,We,tt){if(typeof We=="string"&&We!==""||typeof We=="number"||typeof We=="bigint")return We=E0(""+We,Je.mode,tt),We.return=Je,We;if(typeof We=="object"&&We!==null){switch(We.$$typeof){case f:return tt=mo(We.type,We.key,We.props,null,Je.mode,tt),Im(tt,We),tt.return=Je,tt;case p:return We=ob(We,Je.mode,tt),We.return=Je,We;case B:var Bt=We._init;return We=Bt(We._payload),Pt(Je,We,tt)}if(q(We)||P(We))return We=Eh(We,Je.mode,tt,null),We.return=Je,We;if(typeof We.then=="function")return Pt(Je,z0(We),tt);if(We.$$typeof===E)return Pt(Je,R0(Je,We),tt);Ab(Je,We)}return null}function ht(Je,We,tt,Bt){var En=We!==null?We.key:null;if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return En!==null?null:he(Je,We,""+tt,Bt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case f:return tt.key===En?Re(Je,We,tt,Bt):null;case p:return tt.key===En?rt(Je,We,tt,Bt):null;case B:return En=tt._init,tt=En(tt._payload),ht(Je,We,tt,Bt)}if(q(tt)||P(tt))return En!==null?null:kt(Je,We,tt,Bt,null);if(typeof tt.then=="function")return ht(Je,We,z0(tt),Bt);if(tt.$$typeof===E)return ht(Je,We,R0(Je,tt),Bt);Ab(Je,tt)}return null}function gt(Je,We,tt,Bt,En){if(typeof Bt=="string"&&Bt!==""||typeof Bt=="number"||typeof Bt=="bigint")return Je=Je.get(tt)||null,he(We,Je,""+Bt,En);if(typeof Bt=="object"&&Bt!==null){switch(Bt.$$typeof){case f:return Je=Je.get(Bt.key===null?tt:Bt.key)||null,Re(We,Je,Bt,En);case p:return Je=Je.get(Bt.key===null?tt:Bt.key)||null,rt(We,Je,Bt,En);case B:var Lr=Bt._init;return Bt=Lr(Bt._payload),gt(Je,We,tt,Bt,En)}if(q(Bt)||P(Bt))return Je=Je.get(tt)||null,kt(We,Je,Bt,En,null);if(typeof Bt.then=="function")return gt(Je,We,tt,z0(Bt),En);if(Bt.$$typeof===E)return gt(Je,We,tt,R0(We,Bt),En);Ab(We,Bt)}return null}function sr(Je,We,tt,Bt){for(var En=null,Lr=null,Bn=We,qn=We=0,Zo=null;Bn!==null&&qn<tt.length;qn++){Bn.index>qn?(Zo=Bn,Bn=null):Zo=Bn.sibling;var fi=ht(Je,Bn,tt[qn],Bt);if(fi===null){Bn===null&&(Bn=Zo);break}h&&Bn&&fi.alternate===null&&m(Je,Bn),We=U(fi,We,qn),Lr===null?En=fi:Lr.sibling=fi,Lr=fi,Bn=Zo}if(qn===tt.length)return w(Je,Bn),ni&&Sd(Je,qn),En;if(Bn===null){for(;qn<tt.length;qn++)Bn=Pt(Je,tt[qn],Bt),Bn!==null&&(We=U(Bn,We,qn),Lr===null?En=Bn:Lr.sibling=Bn,Lr=Bn);return ni&&Sd(Je,qn),En}for(Bn=A(Bn);qn<tt.length;qn++)Zo=gt(Bn,Je,qn,tt[qn],Bt),Zo!==null&&(h&&Zo.alternate!==null&&Bn.delete(Zo.key===null?qn:Zo.key),We=U(Zo,We,qn),Lr===null?En=Zo:Lr.sibling=Zo,Lr=Zo);return h&&Bn.forEach(function(qm){return m(Je,qm)}),ni&&Sd(Je,qn),En}function Xn(Je,We,tt,Bt){if(tt==null)throw Error(r(151));for(var En=null,Lr=null,Bn=We,qn=We=0,Zo=null,fi=tt.next();Bn!==null&&!fi.done;qn++,fi=tt.next()){Bn.index>qn?(Zo=Bn,Bn=null):Zo=Bn.sibling;var qm=ht(Je,Bn,fi.value,Bt);if(qm===null){Bn===null&&(Bn=Zo);break}h&&Bn&&qm.alternate===null&&m(Je,Bn),We=U(qm,We,qn),Lr===null?En=qm:Lr.sibling=qm,Lr=qm,Bn=Zo}if(fi.done)return w(Je,Bn),ni&&Sd(Je,qn),En;if(Bn===null){for(;!fi.done;qn++,fi=tt.next())fi=Pt(Je,fi.value,Bt),fi!==null&&(We=U(fi,We,qn),Lr===null?En=fi:Lr.sibling=fi,Lr=fi);return ni&&Sd(Je,qn),En}for(Bn=A(Bn);!fi.done;qn++,fi=tt.next())fi=gt(Bn,Je,qn,fi.value,Bt),fi!==null&&(h&&fi.alternate!==null&&Bn.delete(fi.key===null?qn:fi.key),We=U(fi,We,qn),Lr===null?En=fi:Lr.sibling=fi,Lr=fi);return h&&Bn.forEach(function(Ele){return m(Je,Ele)}),ni&&Sd(Je,qn),En}function Gi(Je,We,tt,Bt){if(typeof tt=="object"&&tt!==null&&tt.type===g&&tt.key===null&&(tt=tt.props.children),typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case f:e:{for(var En=tt.key;We!==null;){if(We.key===En){if(En=tt.type,En===g){if(We.tag===7){w(Je,We.sibling),Bt=k(We,tt.props.children),Bt.return=Je,Je=Bt;break e}}else if(We.elementType===En||typeof En=="object"&&En!==null&&En.$$typeof===B&&mA(En)===We.type){w(Je,We.sibling),Bt=k(We,tt.props),Im(Bt,tt),Bt.return=Je,Je=Bt;break e}w(Je,We);break}else m(Je,We);We=We.sibling}tt.type===g?(Bt=Eh(tt.props.children,Je.mode,Bt,tt.key),Bt.return=Je,Je=Bt):(Bt=mo(tt.type,tt.key,tt.props,null,Je.mode,Bt),Im(Bt,tt),Bt.return=Je,Je=Bt)}return ie(Je);case p:e:{for(En=tt.key;We!==null;){if(We.key===En)if(We.tag===4&&We.stateNode.containerInfo===tt.containerInfo&&We.stateNode.implementation===tt.implementation){w(Je,We.sibling),Bt=k(We,tt.children||[]),Bt.return=Je,Je=Bt;break e}else{w(Je,We);break}else m(Je,We);We=We.sibling}Bt=ob(tt,Je.mode,Bt),Bt.return=Je,Je=Bt}return ie(Je);case B:return En=tt._init,tt=En(tt._payload),Gi(Je,We,tt,Bt)}if(q(tt))return sr(Je,We,tt,Bt);if(P(tt)){if(En=P(tt),typeof En!="function")throw Error(r(150));return tt=En.call(tt),Xn(Je,We,tt,Bt)}if(typeof tt.then=="function")return Gi(Je,We,z0(tt),Bt);if(tt.$$typeof===E)return Gi(Je,We,R0(Je,tt),Bt);Ab(Je,tt)}return typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint"?(tt=""+tt,We!==null&&We.tag===6?(w(Je,We.sibling),Bt=k(We,tt),Bt.return=Je,Je=Bt):(w(Je,We),Bt=E0(tt,Je.mode,Bt),Bt.return=Je,Je=Bt),ie(Je)):w(Je,We)}return function(Je,We,tt,Bt){try{U0=0;var En=Gi(Je,We,tt,Bt);return qf=null,En}catch(Bn){if(Bn===k0||Bn===Pc)throw Bn;var Lr=Va(29,Bn,null,Je.mode);return Lr.lanes=Bt,Lr.return=Je,Lr}finally{}}}var Kf=gA(!0),yA=gA(!1),Ni=te(null),zc=null;function Oh(h){var m=h.alternate;le(Ts,Ts.current&1),le(Ni,h),zc===null&&(m===null||Tm.current!==null||m.memoizedState!==null)&&(zc=h)}function vA(h){if(h.tag===22){if(le(Ts,Ts.current),le(Ni,h),zc===null){var m=h.alternate;m!==null&&m.memoizedState!==null&&(zc=h)}}else Bh()}function Bh(){le(Ts,Ts.current),le(Ni,Ni.current)}function gu(h){ne(Ni),zc===h&&(zc=null),ne(Ts)}var Ts=te(0);function Rd(h){for(var m=h;m!==null;){if(m.tag===13){var w=m.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||Pk(w)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}function $h(h,m,w,A){m=h.memoizedState,w=w(A,m),w=w==null?m:u({},m,w),h.memoizedState=w,h.lanes===0&&(h.updateQueue.baseState=w)}var wa={enqueueSetState:function(h,m,w){h=h._reactInternals;var A=vs(),k=mu(A);k.payload=m,w!=null&&(k.callback=w),m=Ed(h,k,A),m!==null&&(Ca(m,h,A),Xf(m,h,A))},enqueueReplaceState:function(h,m,w){h=h._reactInternals;var A=vs(),k=mu(A);k.tag=1,k.payload=m,w!=null&&(k.callback=w),m=Ed(h,k,A),m!==null&&(Ca(m,h,A),Xf(m,h,A))},enqueueForceUpdate:function(h,m){h=h._reactInternals;var w=vs(),A=mu(w);A.tag=2,m!=null&&(A.callback=m),m=Ed(h,A,w),m!==null&&(Ca(m,h,w),Xf(m,h,w))}};function bA(h,m,w,A,k,U,ie){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(A,U,ie):m.prototype&&m.prototype.isPureReactComponent?!Lc(w,A)||!Lc(k,U):!0}function xA(h,m,w,A){h=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(w,A),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(w,A),m.state!==h&&wa.enqueueReplaceState(m,m.state,null)}function yu(h,m){var w=m;if("ref"in m){w={};for(var A in m)A!=="ref"&&(w[A]=m[A])}if(h=h.defaultProps){w===m&&(w=u({},w));for(var k in h)w[k]===void 0&&(w[k]=h[k])}return w}var Yf=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)};function H0(h){Yf(h)}function Tb(h){console.error(h)}function SA(h){Yf(h)}function Mb(h,m){try{var w=h.onUncaughtError;w(m.value,{componentStack:m.stack})}catch(A){setTimeout(function(){throw A})}}function tc(h,m,w){try{var A=h.onCaughtError;A(w.value,{componentStack:w.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(k){setTimeout(function(){throw k})}}function Rb(h,m,w){return w=mu(w),w.tag=3,w.payload={element:null},w.callback=function(){Mb(h,m)},w}function wA(h){return h=mu(h),h.tag=3,h}function Nb(h,m,w,A){var k=w.type.getDerivedStateFromError;if(typeof k=="function"){var U=A.value;h.payload=function(){return k(U)},h.callback=function(){tc(m,w,A)}}var ie=w.stateNode;ie!==null&&typeof ie.componentDidCatch=="function"&&(h.callback=function(){tc(m,w,A),typeof k!="function"&&(Cl===null?Cl=new Set([this]):Cl.add(this));var he=A.stack;this.componentDidCatch(A.value,{componentStack:he!==null?he:""})})}function Ek(h,m,w,A,k){if(w.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){if(m=w.alternate,m!==null&&Jl(m,w,k,!0),w=Ni.current,w!==null){switch(w.tag){case 13:return zc===null?y():w.alternate===null&&Zi===0&&(Zi=3),w.flags&=-257,w.flags|=65536,w.lanes=k,A===O0?w.flags|=16384:(m=w.updateQueue,m===null?w.updateQueue=new Set([A]):m.add(A),bt(h,A,k)),!1;case 22:return w.flags|=65536,A===O0?w.flags|=16384:(m=w.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([A])},w.updateQueue=m):(w=m.retryQueue,w===null?m.retryQueue=new Set([A]):w.add(A)),bt(h,A,k)),!1}throw Error(r(435,w.tag))}return bt(h,A,k),y(),!1}if(ni)return m=Ni.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=k,A!==lb&&(h=Error(r(422),{cause:A}),jf(ko(h,w)))):(A!==lb&&(m=Error(r(423),{cause:A}),jf(ko(m,w))),h=h.current.alternate,h.flags|=65536,k&=-k,h.lanes|=k,A=ko(A,w),k=Rb(h.stateNode,A,k),Cm(h,k),Zi!==4&&(Zi=2)),!1;var U=Error(r(520),{cause:A});if(U=ko(U,w),hi===null?hi=[U]:hi.push(U),Zi!==4&&(Zi=2),m===null)return!0;A=ko(A,w),w=m;do{switch(w.tag){case 3:return w.flags|=65536,h=k&-k,w.lanes|=h,h=Rb(w.stateNode,A,h),Cm(w,h),!1;case 1:if(m=w.type,U=w.stateNode,(w.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Cl===null||!Cl.has(U))))return w.flags|=65536,k&=-k,w.lanes|=k,k=wA(k),Nb(k,h,w,A),Cm(w,k),!1}w=w.return}while(w!==null);return!1}var _A=Error(r(461)),go=!1;function Ms(h,m,w,A){m.child=h===null?yA(m,null,w,A):Kf(m,h.child,w,A)}function Wa(h,m,w,A,k){w=w.render;var U=m.ref;if("ref"in A){var ie={};for(var he in A)he!=="ref"&&(ie[he]=A[he])}else ie=A;return pu(m),A=Td(h,m,w,ie,U,k),he=FS(),h!==null&&!go?(yb(h,m,k),yo(h,m,k)):(ni&&he&&TS(m),m.flags|=1,Ms(h,m,A,k),m.child)}function ja(h,m,w,A,k){if(h===null){var U=w.type;return typeof U=="function"&&!C0(U)&&U.defaultProps===void 0&&w.compare===null?(m.tag=15,m.type=U,ew(h,m,U,A,k)):(h=mo(w.type,null,A,m,m.mode,k),h.ref=m.ref,h.return=m,m.child=h)}if(U=h.child,!V0(h,k)){var ie=U.memoizedProps;if(w=w.compare,w=w!==null?w:Lc,w(ie,A)&&h.ref===m.ref)return yo(h,m,k)}return m.flags|=1,h=Es(U,A),h.ref=m.ref,h.return=m,m.child=h}function ew(h,m,w,A,k){if(h!==null){var U=h.memoizedProps;if(Lc(U,A)&&h.ref===m.ref)if(go=!1,m.pendingProps=A=U,V0(h,k))(h.flags&131072)!==0&&(go=!0);else return m.lanes=h.lanes,yo(h,m,k)}return Dm(h,m,w,A,k)}function Jf(h,m,w){var A=m.pendingProps,k=A.children,U=h!==null?h.memoizedState:null;if(A.mode==="hidden"){if((m.flags&128)!==0){if(A=U!==null?U.baseLanes|w:w,h!==null){for(k=m.child=h.child,U=0;k!==null;)U=U|k.lanes|k.childLanes,k=k.sibling;m.childLanes=U&~A}else m.childLanes=0,m.child=null;return Zf(h,m,A,w)}if((w&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},h!==null&&D0(m,U!==null?U.cachePool:null),U!==null?P2(m,U):LS(),vA(m);else return m.lanes=m.childLanes=536870912,Zf(h,m,U!==null?U.baseLanes|w:w,w)}else U!==null?(D0(m,U.cachePool),P2(m,U),Bh(),m.memoizedState=null):(h!==null&&D0(m,null),LS(),Bh());return Ms(h,m,k,w),m.child}function Zf(h,m,w,A){var k=Nh();return k=k===null?null:{parent:Us._currentValue,pool:k},m.memoizedState={baseLanes:w,cachePool:k},h!==null&&D0(m,null),LS(),vA(m),h!==null&&Jl(h,m,A,!0),null}function Qf(h,m){var w=m.ref;if(w===null)h!==null&&h.ref!==null&&(m.flags|=4194816);else{if(typeof w!="function"&&typeof w!="object")throw Error(r(284));(h===null||h.ref!==w)&&(m.flags|=4194816)}}function Dm(h,m,w,A,k){return pu(m),w=Td(h,m,w,A,void 0,k),A=FS(),h!==null&&!go?(yb(h,m,k),yo(h,m,k)):(ni&&A&&TS(m),m.flags|=1,Ms(h,m,w,k),m.child)}function yl(h,m,w,A,k,U){return pu(m),m.updateQueue=null,w=H2(m,A,w,k),z2(h),A=FS(),h!==null&&!go?(yb(h,m,U),yo(h,m,U)):(ni&&A&&TS(m),m.flags|=1,Ms(h,m,w,U),m.child)}function vl(h,m,w,A,k){if(pu(m),m.stateNode===null){var U=Ch,ie=w.contextType;typeof ie=="object"&&ie!==null&&(U=ms(ie)),U=new w(A,U),m.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,U.updater=wa,m.stateNode=U,U._reactInternals=m,U=m.stateNode,U.props=A,U.state=m.memoizedState,U.refs={},BS(m),ie=w.contextType,U.context=typeof ie=="object"&&ie!==null?ms(ie):Ch,U.state=m.memoizedState,ie=w.getDerivedStateFromProps,typeof ie=="function"&&($h(m,w,ie,A),U.state=m.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(ie=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),ie!==U.state&&wa.enqueueReplaceState(U,U.state,null),Em(m,A,U,k),B0(),U.state=m.memoizedState),typeof U.componentDidMount=="function"&&(m.flags|=4194308),A=!0}else if(h===null){U=m.stateNode;var he=m.memoizedProps,Re=yu(w,he);U.props=Re;var rt=U.context,kt=w.contextType;ie=Ch,typeof kt=="object"&&kt!==null&&(ie=ms(kt));var Pt=w.getDerivedStateFromProps;kt=typeof Pt=="function"||typeof U.getSnapshotBeforeUpdate=="function",he=m.pendingProps!==he,kt||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(he||rt!==ie)&&xA(m,U,A,ie),Cd=!1;var ht=m.memoizedState;U.state=ht,Em(m,A,U,k),B0(),rt=m.memoizedState,he||ht!==rt||Cd?(typeof Pt=="function"&&($h(m,w,Pt,A),rt=m.memoizedState),(Re=Cd||bA(m,w,Re,A,ht,rt,ie))?(kt||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(m.flags|=4194308)):(typeof U.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=A,m.memoizedState=rt),U.props=A,U.state=rt,U.context=ie,A=Re):(typeof U.componentDidMount=="function"&&(m.flags|=4194308),A=!1)}else{U=m.stateNode,Qn(h,m),ie=m.memoizedProps,kt=yu(w,ie),U.props=kt,Pt=m.pendingProps,ht=U.context,rt=w.contextType,Re=Ch,typeof rt=="object"&&rt!==null&&(Re=ms(rt)),he=w.getDerivedStateFromProps,(rt=typeof he=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(ie!==Pt||ht!==Re)&&xA(m,U,A,Re),Cd=!1,ht=m.memoizedState,U.state=ht,Em(m,A,U,k),B0();var gt=m.memoizedState;ie!==Pt||ht!==gt||Cd||h!==null&&h.dependencies!==null&&M0(h.dependencies)?(typeof he=="function"&&($h(m,w,he,A),gt=m.memoizedState),(kt=Cd||bA(m,w,kt,A,ht,gt,Re)||h!==null&&h.dependencies!==null&&M0(h.dependencies))?(rt||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(A,gt,Re),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(A,gt,Re)),typeof U.componentDidUpdate=="function"&&(m.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof U.componentDidUpdate!="function"||ie===h.memoizedProps&&ht===h.memoizedState||(m.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||ie===h.memoizedProps&&ht===h.memoizedState||(m.flags|=1024),m.memoizedProps=A,m.memoizedState=gt),U.props=A,U.state=gt,U.context=Re,A=kt):(typeof U.componentDidUpdate!="function"||ie===h.memoizedProps&&ht===h.memoizedState||(m.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||ie===h.memoizedProps&&ht===h.memoizedState||(m.flags|=1024),A=!1)}return U=A,Qf(h,m),A=(m.flags&128)!==0,U||A?(U=m.stateNode,w=A&&typeof w.getDerivedStateFromError!="function"?null:U.render(),m.flags|=1,h!==null&&A?(m.child=Kf(m,h.child,null,k),m.child=Kf(m,null,w,k)):Ms(h,m,w,k),m.memoizedState=U.state,h=m.child):h=yo(h,m,k),h}function Lh(h,m,w,A){return bm(),m.flags|=256,Ms(h,m,w,A),m.child}var Hc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vc(h){return{baseLanes:h,cachePool:hb()}}function so(h,m,w){return h=h!==null?h.childLanes&~w:0,m&&(h|=oc),h}function km(h,m,w){var A=m.pendingProps,k=!1,U=(m.flags&128)!==0,ie;if((ie=U)||(ie=h!==null&&h.memoizedState===null?!1:(Ts.current&2)!==0),ie&&(k=!0,m.flags&=-129),ie=(m.flags&32)!==0,m.flags&=-33,h===null){if(ni){if(k?Oh(m):Bh(),ni){var he=cs,Re;if(Re=he){e:{for(Re=he,he=pl;Re.nodeType!==8;){if(!he){he=null;break e}if(Re=Bd(Re.nextSibling),Re===null){he=null;break e}}he=Re}he!==null?(m.memoizedState={dehydrated:he,treeContext:Ah!==null?{id:hu,overflow:fu}:null,retryLane:536870912,hydrationErrors:null},Re=Va(18,null,null,0),Re.stateNode=he,Re.return=m,m.child=Re,ba=m,cs=null,Re=!0):Re=!1}Re||Th(m)}if(he=m.memoizedState,he!==null&&(he=he.dehydrated,he!==null))return Pk(he)?m.lanes=32:m.lanes=536870912,null;gu(m)}return he=A.children,A=A.fallback,k?(Bh(),k=m.mode,he=ep({mode:"hidden",children:he},k),A=Eh(A,k,w,null),he.return=m,A.return=m,he.sibling=A,m.child=he,k=m.child,k.memoizedState=Vc(w),k.childLanes=so(h,ie,w),m.memoizedState=Hc,A):(Oh(m),vu(m,he))}if(Re=h.memoizedState,Re!==null&&(he=Re.dehydrated,he!==null)){if(U)m.flags&256?(Oh(m),m.flags&=-257,m=$o(h,m,w)):m.memoizedState!==null?(Bh(),m.child=h.child,m.flags|=128,m=null):(Bh(),k=A.fallback,he=m.mode,A=ep({mode:"visible",children:A.children},he),k=Eh(k,he,w,null),k.flags|=2,A.return=m,k.return=m,A.sibling=k,m.child=A,Kf(m,h.child,null,w),A=m.child,A.memoizedState=Vc(w),A.childLanes=so(h,ie,w),m.memoizedState=Hc,m=k);else if(Oh(m),Pk(he)){if(ie=he.nextSibling&&he.nextSibling.dataset,ie)var rt=ie.dgst;ie=rt,A=Error(r(419)),A.stack="",A.digest=ie,jf({value:A,source:null,stack:null}),m=$o(h,m,w)}else if(go||Jl(h,m,w,!1),ie=(w&h.childLanes)!==0,go||ie){if(ie=ur,ie!==null&&(A=w&-w,A=(A&42)!==0?1:In(A),A=(A&(ie.suspendedLanes|w))!==0?0:A,A!==0&&A!==Re.retryLane))throw Re.retryLane=A,xd(h,A),Ca(ie,h,A),_A;he.data==="$?"||y(),m=$o(h,m,w)}else he.data==="$?"?(m.flags|=192,m.child=h.child,m=null):(h=Re.treeContext,cs=Bd(he.nextSibling),ba=m,ni=!0,Yl=null,pl=!1,h!==null&&(Oo[fl++]=hu,Oo[fl++]=fu,Oo[fl++]=Ah,hu=h.id,fu=h.overflow,Ah=m),m=vu(m,A.children),m.flags|=4096);return m}return k?(Bh(),k=A.fallback,he=m.mode,Re=h.child,rt=Re.sibling,A=Es(Re,{mode:"hidden",children:A.children}),A.subtreeFlags=Re.subtreeFlags&65011712,rt!==null?k=Es(rt,k):(k=Eh(k,he,w,null),k.flags|=2),k.return=m,A.return=m,A.sibling=k,m.child=A,A=k,k=m.child,he=h.child.memoizedState,he===null?he=Vc(w):(Re=he.cachePool,Re!==null?(rt=Us._currentValue,Re=Re.parent!==rt?{parent:rt,pool:rt}:Re):Re=hb(),he={baseLanes:he.baseLanes|w,cachePool:Re}),k.memoizedState=he,k.childLanes=so(h,ie,w),m.memoizedState=Hc,A):(Oh(m),w=h.child,h=w.sibling,w=Es(w,{mode:"visible",children:A.children}),w.return=m,w.sibling=null,h!==null&&(ie=m.deletions,ie===null?(m.deletions=[h],m.flags|=16):ie.push(h)),m.child=w,m.memoizedState=null,w)}function vu(h,m){return m=ep({mode:"visible",children:m},h.mode),m.return=h,h.child=m}function ep(h,m){return h=Va(22,h,null,m),h.lanes=0,h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},h}function $o(h,m,w){return Kf(m,h.child,null,w),h=vu(m,m.pendingProps.children),h.flags|=2,m.memoizedState=null,h}function Lo(h,m,w){h.lanes|=m;var A=h.alternate;A!==null&&(A.lanes|=m),IS(h.return,m,w)}function jr(h,m,w,A,k){var U=h.memoizedState;U===null?h.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:A,tail:w,tailMode:k}:(U.isBackwards=m,U.rendering=null,U.renderingStartTime=0,U.last=A,U.tail=w,U.tailMode=k)}function nc(h,m,w){var A=m.pendingProps,k=A.revealOrder,U=A.tail;if(Ms(h,m,A.children,w),A=Ts.current,(A&2)!==0)A=A&1|2,m.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=m.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&Lo(h,w,m);else if(h.tag===19)Lo(h,w,m);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===m)break e;for(;h.sibling===null;){if(h.return===null||h.return===m)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}A&=1}switch(le(Ts,A),k){case"forwards":for(w=m.child,k=null;w!==null;)h=w.alternate,h!==null&&Rd(h)===null&&(k=w),w=w.sibling;w=k,w===null?(k=m.child,m.child=null):(k=w.sibling,w.sibling=null),jr(m,!1,k,w,U);break;case"backwards":for(w=null,k=m.child,m.child=null;k!==null;){if(h=k.alternate,h!==null&&Rd(h)===null){m.child=k;break}h=k.sibling,k.sibling=w,w=k,k=h}jr(m,!0,w,null,U);break;case"together":jr(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function yo(h,m,w){if(h!==null&&(m.dependencies=h.dependencies),Xc|=m.lanes,(w&m.childLanes)===0)if(h!==null){if(Jl(h,m,w,!1),(w&m.childLanes)===0)return null}else return null;if(h!==null&&m.child!==h.child)throw Error(r(153));if(m.child!==null){for(h=m.child,w=Es(h,h.pendingProps),m.child=w,w.return=m;h.sibling!==null;)h=h.sibling,w=w.sibling=Es(h,h.pendingProps),w.return=m;w.sibling=null}return m.child}function V0(h,m){return(h.lanes&m)!==0?!0:(h=h.dependencies,!!(h!==null&&M0(h)))}function rc(h,m,w){switch(m.tag){case 3:Pe(m,m.stateNode.containerInfo),Rh(m,Us,h.memoizedState.cache),bm();break;case 27:case 5:Ke(m);break;case 4:Pe(m,m.stateNode.containerInfo);break;case 10:Rh(m,m.type,m.memoizedProps.value);break;case 13:var A=m.memoizedState;if(A!==null)return A.dehydrated!==null?(Oh(m),m.flags|=128,null):(w&m.child.childLanes)!==0?km(h,m,w):(Oh(m),h=yo(h,m,w),h!==null?h.sibling:null);Oh(m);break;case 19:var k=(h.flags&128)!==0;if(A=(w&m.childLanes)!==0,A||(Jl(h,m,w,!1),A=(w&m.childLanes)!==0),k){if(A)return nc(h,m,w);m.flags|=128}if(k=m.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),le(Ts,Ts.current),A)break;return null;case 22:case 23:return m.lanes=0,Jf(h,m,w);case 24:Rh(m,Us,h.memoizedState.cache)}return yo(h,m,w)}function tp(h,m,w){if(h!==null)if(h.memoizedProps!==m.pendingProps)go=!0;else{if(!V0(h,w)&&(m.flags&128)===0)return go=!1,rc(h,m,w);go=(h.flags&131072)!==0}else go=!1,ni&&(m.flags&1048576)!==0&&ab(m,vm,m.index);switch(m.lanes=0,m.tag){case 16:e:{h=m.pendingProps;var A=m.elementType,k=A._init;if(A=k(A._payload),m.type=A,typeof A=="function")C0(A)?(h=yu(A,h),m.tag=1,m=vl(null,m,A,h,w)):(m.tag=0,m=Dm(null,m,A,h,w));else{if(A!=null){if(k=A.$$typeof,k===C){m.tag=11,m=Wa(null,m,A,h,w);break e}else if(k===L){m.tag=14,m=ja(null,m,A,h,w);break e}}throw m=W(A)||A,Error(r(306,m,""))}}return m;case 0:return Dm(h,m,m.type,m.pendingProps,w);case 1:return A=m.type,k=yu(A,m.pendingProps),vl(h,m,A,k,w);case 3:e:{if(Pe(m,m.stateNode.containerInfo),h===null)throw Error(r(387));A=m.pendingProps;var U=m.memoizedState;k=U.element,Qn(h,m),Em(m,A,null,w);var ie=m.memoizedState;if(A=ie.cache,Rh(m,Us,A),A!==U.cache&&T0(m,[Us],w,!0),B0(),A=ie.element,U.isDehydrated)if(U={element:A,isDehydrated:!1,cache:ie.cache},m.updateQueue.baseState=U,m.memoizedState=U,m.flags&256){m=Lh(h,m,A,w);break e}else if(A!==k){k=ko(Error(r(424)),m),jf(k),m=Lh(h,m,A,w);break e}else{switch(h=m.stateNode.containerInfo,h.nodeType){case 9:h=h.body;break;default:h=h.nodeName==="HTML"?h.ownerDocument.body:h}for(cs=Bd(h.firstChild),ba=m,ni=!0,Yl=null,pl=!0,w=yA(m,null,A,w),m.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling}else{if(bm(),A===k){m=yo(h,m,w);break e}Ms(h,m,A,w)}m=m.child}return m;case 26:return Qf(h,m),h===null?(w=oH(m.type,null,m.pendingProps,null))?m.memoizedState=w:ni||(w=m.type,h=m.pendingProps,A=RA(be.current).createElement(w),A[pi]=m,A[Si]=h,Ea(A,w,h),ct(A),m.stateNode=A):m.memoizedState=oH(m.type,h.memoizedProps,m.pendingProps,h.memoizedState),null;case 27:return Ke(m),h===null&&ni&&(A=m.stateNode=rH(m.type,m.pendingProps,be.current),ba=m,pl=!0,k=cs,Vm(m.type)?(Uk=k,cs=Bd(A.firstChild)):cs=k),Ms(h,m,m.pendingProps.children,w),Qf(h,m),h===null&&(m.flags|=4194304),m.child;case 5:return h===null&&ni&&((k=A=cs)&&(A=ele(A,m.type,m.pendingProps,pl),A!==null?(m.stateNode=A,ba=m,cs=Bd(A.firstChild),pl=!1,k=!0):k=!1),k||Th(m)),Ke(m),k=m.type,U=m.pendingProps,ie=h!==null?h.memoizedProps:null,A=U.children,$k(k,U)?A=null:ie!==null&&$k(k,ie)&&(m.flags|=32),m.memoizedState!==null&&(k=Td(h,m,bk,null,null,w),dw._currentValue=k),Qf(h,m),Ms(h,m,A,w),m.child;case 6:return h===null&&ni&&((h=w=cs)&&(w=tle(w,m.pendingProps,pl),w!==null?(m.stateNode=w,ba=m,cs=null,h=!0):h=!1),h||Th(m)),null;case 13:return km(h,m,w);case 4:return Pe(m,m.stateNode.containerInfo),A=m.pendingProps,h===null?m.child=Kf(m,null,A,w):Ms(h,m,A,w),m.child;case 11:return Wa(h,m,m.type,m.pendingProps,w);case 7:return Ms(h,m,m.pendingProps,w),m.child;case 8:return Ms(h,m,m.pendingProps.children,w),m.child;case 12:return Ms(h,m,m.pendingProps.children,w),m.child;case 10:return A=m.pendingProps,Rh(m,m.type,A.value),Ms(h,m,A.children,w),m.child;case 9:return k=m.type._context,A=m.pendingProps.children,pu(m),k=ms(k),A=A(k),m.flags|=1,Ms(h,m,A,w),m.child;case 14:return ja(h,m,m.type,m.pendingProps,w);case 15:return ew(h,m,m.type,m.pendingProps,w);case 19:return nc(h,m,w);case 31:return A=m.pendingProps,w=m.mode,A={mode:A.mode,children:A.children},h===null?(w=ep(A,w),w.ref=m.ref,m.child=w,w.return=m,m=w):(w=Es(h.child,A),w.ref=m.ref,m.child=w,w.return=m,m=w),m;case 22:return Jf(h,m,w);case 24:return pu(m),A=ms(Us),h===null?(k=Nh(),k===null&&(k=ur,U=ub(),k.pooledCache=U,U.refCount++,U!==null&&(k.pooledCacheLanes|=w),k=U),m.memoizedState={parent:A,cache:k},BS(m),Rh(m,Us,k)):((h.lanes&w)!==0&&(Qn(h,m),Em(m,null,null,w),B0()),k=h.memoizedState,U=m.memoizedState,k.parent!==A?(k={parent:A,cache:A},m.memoizedState=k,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=k),Rh(m,Us,A)):(A=U.cache,Rh(m,Us,A),A!==k.cache&&T0(m,[Us],w,!0))),Ms(h,m,m.pendingProps.children,w),m.child;case 29:throw m.pendingProps}throw Error(r(156,m.tag))}function Gc(h){h.flags|=4}function G0(h,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)h.flags&=-16777217;else if(h.flags|=16777216,!dH(m)){if(m=Ni.current,m!==null&&((Fn&4194048)===Fn?zc!==null:(Fn&62914560)!==Fn&&(Fn&536870912)===0||m!==zc))throw Ql=O0,kS;h.flags|=8192}}function Nd(h,m){m!==null&&(h.flags|=4),h.flags&16384&&(m=h.tag!==22?Xe():536870912,h.lanes|=m,Zr|=m)}function np(h,m){if(!ni)switch(h.tailMode){case"hidden":m=h.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?h.tail=null:w.sibling=null;break;case"collapsed":w=h.tail;for(var A=null;w!==null;)w.alternate!==null&&(A=w),w=w.sibling;A===null?m||h.tail===null?h.tail=null:h.tail.sibling=null:A.sibling=null}}function Ui(h){var m=h.alternate!==null&&h.alternate.child===h.child,w=0,A=0;if(m)for(var k=h.child;k!==null;)w|=k.lanes|k.childLanes,A|=k.subtreeFlags&65011712,A|=k.flags&65011712,k.return=h,k=k.sibling;else for(k=h.child;k!==null;)w|=k.lanes|k.childLanes,A|=k.subtreeFlags,A|=k.flags,k.return=h,k=k.sibling;return h.subtreeFlags|=A,h.childLanes=w,m}function tw(h,m,w){var A=m.pendingProps;switch(MS(m),m.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ui(m),null;case 1:return Ui(m),null;case 3:return w=m.stateNode,A=null,h!==null&&(A=h.memoizedState.cache),m.memoizedState.cache!==A&&(m.flags|=2048),_d(Us),ze(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(h===null||h.child===null)&&(Fc(m)?Gc(m):h===null||h.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,ui())),Ui(m),null;case 26:return w=m.memoizedState,h===null?(Gc(m),w!==null?(Ui(m),G0(m,w)):(Ui(m),m.flags&=-16777217)):w?w!==h.memoizedState?(Gc(m),Ui(m),G0(m,w)):(Ui(m),m.flags&=-16777217):(h.memoizedProps!==A&&Gc(m),Ui(m),m.flags&=-16777217),null;case 27:pt(m),w=be.current;var k=m.type;if(h!==null&&m.stateNode!=null)h.memoizedProps!==A&&Gc(m);else{if(!A){if(m.stateNode===null)throw Error(r(166));return Ui(m),null}h=ye.current,Fc(m)?B2(m):(h=rH(k,A,w),m.stateNode=h,Gc(m))}return Ui(m),null;case 5:if(pt(m),w=m.type,h!==null&&m.stateNode!=null)h.memoizedProps!==A&&Gc(m);else{if(!A){if(m.stateNode===null)throw Error(r(166));return Ui(m),null}if(h=ye.current,Fc(m))B2(m);else{switch(k=RA(be.current),h){case 1:h=k.createElementNS("http://www.w3.org/2000/svg",w);break;case 2:h=k.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;default:switch(w){case"svg":h=k.createElementNS("http://www.w3.org/2000/svg",w);break;case"math":h=k.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;case"script":h=k.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof A.is=="string"?k.createElement("select",{is:A.is}):k.createElement("select"),A.multiple?h.multiple=!0:A.size&&(h.size=A.size);break;default:h=typeof A.is=="string"?k.createElement(w,{is:A.is}):k.createElement(w)}}h[pi]=m,h[Si]=A;e:for(k=m.child;k!==null;){if(k.tag===5||k.tag===6)h.appendChild(k.stateNode);else if(k.tag!==4&&k.tag!==27&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===m)break e;for(;k.sibling===null;){if(k.return===null||k.return===m)break e;k=k.return}k.sibling.return=k.return,k=k.sibling}m.stateNode=h;e:switch(Ea(h,w,A),w){case"button":case"input":case"select":case"textarea":h=!!A.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Gc(m)}}return Ui(m),m.flags&=-16777217,null;case 6:if(h&&m.stateNode!=null)h.memoizedProps!==A&&Gc(m);else{if(typeof A!="string"&&m.stateNode===null)throw Error(r(166));if(h=be.current,Fc(m)){if(h=m.stateNode,w=m.memoizedProps,A=null,k=ba,k!==null)switch(k.tag){case 27:case 5:A=k.memoizedProps}h[pi]=m,h=!!(h.nodeValue===w||A!==null&&A.suppressHydrationWarning===!0||Y6(h.nodeValue,w)),h||Th(m)}else h=RA(h).createTextNode(A),h[pi]=m,m.stateNode=h}return Ui(m),null;case 13:if(A=m.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(k=Fc(m),A!==null&&A.dehydrated!==null){if(h===null){if(!k)throw Error(r(318));if(k=m.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(r(317));k[pi]=m}else bm(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Ui(m),k=!1}else k=ui(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=k),k=!0;if(!k)return m.flags&256?(gu(m),m):(gu(m),null)}if(gu(m),(m.flags&128)!==0)return m.lanes=w,m;if(w=A!==null,h=h!==null&&h.memoizedState!==null,w){A=m.child,k=null,A.alternate!==null&&A.alternate.memoizedState!==null&&A.alternate.memoizedState.cachePool!==null&&(k=A.alternate.memoizedState.cachePool.pool);var U=null;A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(U=A.memoizedState.cachePool.pool),U!==k&&(A.flags|=2048)}return w!==h&&w&&(m.child.flags|=8192),Nd(m,m.updateQueue),Ui(m),null;case 4:return ze(),h===null&&Ik(m.stateNode.containerInfo),Ui(m),null;case 10:return _d(m.type),Ui(m),null;case 19:if(ne(Ts),k=m.memoizedState,k===null)return Ui(m),null;if(A=(m.flags&128)!==0,U=k.rendering,U===null)if(A)np(k,!1);else{if(Zi!==0||h!==null&&(h.flags&128)!==0)for(h=m.child;h!==null;){if(U=Rd(h),U!==null){for(m.flags|=128,np(k,!1),h=U.updateQueue,m.updateQueue=h,Nd(m,h),m.subtreeFlags=0,h=w,w=m.child;w!==null;)AS(w,h),w=w.sibling;return le(Ts,Ts.current&1|2),m.child}h=h.sibling}k.tail!==null&&je()>Yo&&(m.flags|=128,A=!0,np(k,!1),m.lanes=4194304)}else{if(!A)if(h=Rd(U),h!==null){if(m.flags|=128,A=!0,h=h.updateQueue,m.updateQueue=h,Nd(m,h),np(k,!0),k.tail===null&&k.tailMode==="hidden"&&!U.alternate&&!ni)return Ui(m),null}else 2*je()-k.renderingStartTime>Yo&&w!==536870912&&(m.flags|=128,A=!0,np(k,!1),m.lanes=4194304);k.isBackwards?(U.sibling=m.child,m.child=U):(h=k.last,h!==null?h.sibling=U:m.child=U,k.last=U)}return k.tail!==null?(m=k.tail,k.rendering=m,k.tail=m.sibling,k.renderingStartTime=je(),m.sibling=null,h=Ts.current,le(Ts,A?h&1|2:h&1),m):(Ui(m),null);case 22:case 23:return gu(m),$0(),A=m.memoizedState!==null,h!==null?h.memoizedState!==null!==A&&(m.flags|=8192):A&&(m.flags|=8192),A?(w&536870912)!==0&&(m.flags&128)===0&&(Ui(m),m.subtreeFlags&6&&(m.flags|=8192)):Ui(m),w=m.updateQueue,w!==null&&Nd(m,w.retryQueue),w=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),A=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(A=m.memoizedState.cachePool.pool),A!==w&&(m.flags|=2048),h!==null&&ne(Zl),null;case 24:return w=null,h!==null&&(w=h.memoizedState.cache),m.memoizedState.cache!==w&&(m.flags|=2048),_d(Us),Ui(m),null;case 25:return null;case 30:return null}throw Error(r(156,m.tag))}function Om(h,m){switch(MS(m),m.tag){case 1:return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 3:return _d(Us),ze(),h=m.flags,(h&65536)!==0&&(h&128)===0?(m.flags=h&-65537|128,m):null;case 26:case 27:case 5:return pt(m),null;case 13:if(gu(m),h=m.memoizedState,h!==null&&h.dehydrated!==null){if(m.alternate===null)throw Error(r(340));bm()}return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 19:return ne(Ts),null;case 4:return ze(),null;case 10:return _d(m.type),null;case 22:case 23:return gu(m),$0(),h!==null&&ne(Zl),h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 24:return _d(Us),null;case 25:return null;default:return null}}function Bm(h,m){switch(MS(m),m.tag){case 3:_d(Us),ze();break;case 26:case 27:case 5:pt(m);break;case 4:ze();break;case 13:gu(m);break;case 19:ne(Ts);break;case 10:_d(m.type);break;case 22:case 23:gu(m),$0(),h!==null&&ne(Zl);break;case 24:_d(Us)}}function rp(h,m){try{var w=m.updateQueue,A=w!==null?w.lastEffect:null;if(A!==null){var k=A.next;w=k;do{if((w.tag&h)===h){A=void 0;var U=w.create,ie=w.inst;A=U(),ie.destroy=A}w=w.next}while(w!==k)}}catch(he){Ve(m,m.return,he)}}function bl(h,m,w){try{var A=m.updateQueue,k=A!==null?A.lastEffect:null;if(k!==null){var U=k.next;A=U;do{if((A.tag&h)===h){var ie=A.inst,he=ie.destroy;if(he!==void 0){ie.destroy=void 0,k=m;var Re=w,rt=he;try{rt()}catch(kt){Ve(k,Re,kt)}}}A=A.next}while(A!==U)}}catch(kt){Ve(m,m.return,kt)}}function ip(h){var m=h.updateQueue;if(m!==null){var w=h.stateNode;try{F2(m,w)}catch(A){Ve(h,h.return,A)}}}function Id(h,m,w){w.props=yu(h.type,h.memoizedProps),w.state=h.memoizedState;try{w.componentWillUnmount()}catch(A){Ve(h,m,A)}}function sp(h,m){try{var w=h.ref;if(w!==null){switch(h.tag){case 26:case 27:case 5:var A=h.stateNode;break;case 30:A=h.stateNode;break;default:A=h.stateNode}typeof w=="function"?h.refCleanup=w(A):w.current=A}}catch(k){Ve(h,m,k)}}function bu(h,m){var w=h.ref,A=h.refCleanup;if(w!==null)if(typeof A=="function")try{A()}catch(k){Ve(h,m,k)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof w=="function")try{w(null)}catch(k){Ve(h,m,k)}else w.current=null}function $m(h){var m=h.type,w=h.memoizedProps,A=h.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":w.autoFocus&&A.focus();break e;case"img":w.src?A.src=w.src:w.srcSet&&(A.srcset=w.srcSet)}}catch(k){Ve(h,h.return,k)}}function W0(h,m,w){try{var A=h.stateNode;Kae(A,h.type,w,m),A[Si]=m}catch(k){Ve(h,h.return,k)}}function j0(h){return h.tag===5||h.tag===3||h.tag===26||h.tag===27&&Vm(h.type)||h.tag===4}function Fh(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||j0(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.tag===27&&Vm(h.type)||h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Ph(h,m,w){var A=h.tag;if(A===5||A===6)h=h.stateNode,m?(w.nodeType===9?w.body:w.nodeName==="HTML"?w.ownerDocument.body:w).insertBefore(h,m):(m=w.nodeType===9?w.body:w.nodeName==="HTML"?w.ownerDocument.body:w,m.appendChild(h),w=w._reactRootContainer,w!=null||m.onclick!==null||(m.onclick=MA));else if(A!==4&&(A===27&&Vm(h.type)&&(w=h.stateNode,m=null),h=h.child,h!==null))for(Ph(h,m,w),h=h.sibling;h!==null;)Ph(h,m,w),h=h.sibling}function Uh(h,m,w){var A=h.tag;if(A===5||A===6)h=h.stateNode,m?w.insertBefore(h,m):w.appendChild(h);else if(A!==4&&(A===27&&Vm(h.type)&&(w=h.stateNode),h=h.child,h!==null))for(Uh(h,m,w),h=h.sibling;h!==null;)Uh(h,m,w),h=h.sibling}function zh(h){var m=h.stateNode,w=h.memoizedProps;try{for(var A=h.type,k=m.attributes;k.length;)m.removeAttributeNode(k[0]);Ea(m,A,w),m[pi]=h,m[Si]=w}catch(U){Ve(h,h.return,U)}}var xu=!1,zi=!1,Lm=!1,xl=typeof WeakSet=="function"?WeakSet:Set,Ii=null;function oo(h,m){if(h=h.containerInfo,Ok=BA,h=bS(h),x0(h)){if("selectionStart"in h)var w={start:h.selectionStart,end:h.selectionEnd};else e:{w=(w=h.ownerDocument)&&w.defaultView||window;var A=w.getSelection&&w.getSelection();if(A&&A.rangeCount!==0){w=A.anchorNode;var k=A.anchorOffset,U=A.focusNode;A=A.focusOffset;try{w.nodeType,U.nodeType}catch{w=null;break e}var ie=0,he=-1,Re=-1,rt=0,kt=0,Pt=h,ht=null;t:for(;;){for(var gt;Pt!==w||k!==0&&Pt.nodeType!==3||(he=ie+k),Pt!==U||A!==0&&Pt.nodeType!==3||(Re=ie+A),Pt.nodeType===3&&(ie+=Pt.nodeValue.length),(gt=Pt.firstChild)!==null;)ht=Pt,Pt=gt;for(;;){if(Pt===h)break t;if(ht===w&&++rt===k&&(he=ie),ht===U&&++kt===A&&(Re=ie),(gt=Pt.nextSibling)!==null)break;Pt=ht,ht=Pt.parentNode}Pt=gt}w=he===-1||Re===-1?null:{start:he,end:Re}}else w=null}w=w||{start:0,end:0}}else w=null;for(Bk={focusedElem:h,selectionRange:w},BA=!1,Ii=m;Ii!==null;)if(m=Ii,h=m.child,(m.subtreeFlags&1024)!==0&&h!==null)h.return=m,Ii=h;else for(;Ii!==null;){switch(m=Ii,U=m.alternate,h=m.flags,m.tag){case 0:break;case 11:case 15:break;case 1:if((h&1024)!==0&&U!==null){h=void 0,w=m,k=U.memoizedProps,U=U.memoizedState,A=w.stateNode;try{var sr=yu(w.type,k,w.elementType===w.type);h=A.getSnapshotBeforeUpdate(sr,U),A.__reactInternalSnapshotBeforeUpdate=h}catch(Xn){Ve(w,w.return,Xn)}}break;case 3:if((h&1024)!==0){if(h=m.stateNode.containerInfo,w=h.nodeType,w===9)Fk(h);else if(w===1)switch(h.nodeName){case"HEAD":case"HTML":case"BODY":Fk(h);break;default:h.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(r(163))}if(h=m.sibling,h!==null){h.return=m.return,Ii=h;break}Ii=m.return}}function Dd(h,m,w){var A=w.flags;switch(w.tag){case 0:case 11:case 15:_a(h,w),A&4&&rp(5,w);break;case 1:if(_a(h,w),A&4)if(h=w.stateNode,m===null)try{h.componentDidMount()}catch(ie){Ve(w,w.return,ie)}else{var k=yu(w.type,m.memoizedProps);m=m.memoizedState;try{h.componentDidUpdate(k,m,h.__reactInternalSnapshotBeforeUpdate)}catch(ie){Ve(w,w.return,ie)}}A&64&&ip(w),A&512&&sp(w,w.return);break;case 3:if(_a(h,w),A&64&&(h=w.updateQueue,h!==null)){if(m=null,w.child!==null)switch(w.child.tag){case 27:case 5:m=w.child.stateNode;break;case 1:m=w.child.stateNode}try{F2(h,m)}catch(ie){Ve(w,w.return,ie)}}break;case 27:m===null&&A&4&&zh(w);case 26:case 5:_a(h,w),m===null&&A&4&&$m(w),A&512&&sp(w,w.return);break;case 12:_a(h,w);break;case 13:_a(h,w),A&4&&Hh(h,w),A&64&&(h=w.memoizedState,h!==null&&(h=h.dehydrated,h!==null&&(w=Qi.bind(null,w),nle(h,w))));break;case 22:if(A=w.memoizedState!==null||xu,!A){m=m!==null&&m.memoizedState!==null||zi,k=xu;var U=zi;xu=A,(zi=m)&&!U?Su(h,w,(w.subtreeFlags&8772)!==0):_a(h,w),xu=k,zi=U}break;case 30:break;default:_a(h,w)}}function wr(h){var m=h.alternate;m!==null&&(h.alternate=null,wr(m)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(m=h.stateNode,m!==null&&ci(m)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}var Vn=null,Jr=!1;function ic(h,m,w){for(w=w.child;w!==null;)op(h,m,w),w=w.sibling}function op(h,m,w){if(ot&&typeof ot.onCommitFiberUnmount=="function")try{ot.onCommitFiberUnmount(qe,w)}catch{}switch(w.tag){case 26:zi||bu(w,m),ic(h,m,w),w.memoizedState?w.memoizedState.count--:w.stateNode&&(w=w.stateNode,w.parentNode.removeChild(w));break;case 27:zi||bu(w,m);var A=Vn,k=Jr;Vm(w.type)&&(Vn=w.stateNode,Jr=!1),ic(h,m,w),aw(w.stateNode),Vn=A,Jr=k;break;case 5:zi||bu(w,m);case 6:if(A=Vn,k=Jr,Vn=null,ic(h,m,w),Vn=A,Jr=k,Vn!==null)if(Jr)try{(Vn.nodeType===9?Vn.body:Vn.nodeName==="HTML"?Vn.ownerDocument.body:Vn).removeChild(w.stateNode)}catch(U){Ve(w,m,U)}else try{Vn.removeChild(w.stateNode)}catch(U){Ve(w,m,U)}break;case 18:Vn!==null&&(Jr?(h=Vn,tH(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,w.stateNode),mw(h)):tH(Vn,w.stateNode));break;case 4:A=Vn,k=Jr,Vn=w.stateNode.containerInfo,Jr=!0,ic(h,m,w),Vn=A,Jr=k;break;case 0:case 11:case 14:case 15:zi||bl(2,w,m),zi||bl(4,w,m),ic(h,m,w);break;case 1:zi||(bu(w,m),A=w.stateNode,typeof A.componentWillUnmount=="function"&&Id(w,m,A)),ic(h,m,w);break;case 21:ic(h,m,w);break;case 22:zi=(A=zi)||w.memoizedState!==null,ic(h,m,w),zi=A;break;default:ic(h,m,w)}}function Hh(h,m){if(m.memoizedState===null&&(h=m.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{mw(h)}catch(w){Ve(m,m.return,w)}}function Ib(h){switch(h.tag){case 13:case 19:var m=h.stateNode;return m===null&&(m=h.stateNode=new xl),m;case 22:return h=h.stateNode,m=h._retryCache,m===null&&(m=h._retryCache=new xl),m;default:throw Error(r(435,h.tag))}}function ap(h,m){var w=Ib(h);m.forEach(function(A){var k=er.bind(null,h,A);w.has(A)||(w.add(A),A.then(k,k))})}function vo(h,m){var w=m.deletions;if(w!==null)for(var A=0;A<w.length;A++){var k=w[A],U=h,ie=m,he=ie;e:for(;he!==null;){switch(he.tag){case 27:if(Vm(he.type)){Vn=he.stateNode,Jr=!1;break e}break;case 5:Vn=he.stateNode,Jr=!1;break e;case 3:case 4:Vn=he.stateNode.containerInfo,Jr=!0;break e}he=he.return}if(Vn===null)throw Error(r(160));op(U,ie,k),Vn=null,Jr=!1,U=k.alternate,U!==null&&(U.return=null),k.return=null}if(m.subtreeFlags&13878)for(m=m.child;m!==null;)Db(m,h),m=m.sibling}var Wc=null;function Db(h,m){var w=h.alternate,A=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:vo(m,h),gs(h),A&4&&(bl(3,h,h.return),rp(3,h),bl(5,h,h.return));break;case 1:vo(m,h),gs(h),A&512&&(zi||w===null||bu(w,w.return)),A&64&&xu&&(h=h.updateQueue,h!==null&&(A=h.callbacks,A!==null&&(w=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=w===null?A:w.concat(A))));break;case 26:var k=Wc;if(vo(m,h),gs(h),A&512&&(zi||w===null||bu(w,w.return)),A&4){var U=w!==null?w.memoizedState:null;if(A=h.memoizedState,w===null)if(A===null)if(h.stateNode===null){e:{A=h.type,w=h.memoizedProps,k=k.ownerDocument||k;t:switch(A){case"title":U=k.getElementsByTagName("title")[0],(!U||U[Fs]||U[pi]||U.namespaceURI==="http://www.w3.org/2000/svg"||U.hasAttribute("itemprop"))&&(U=k.createElement(A),k.head.insertBefore(U,k.querySelector("head > title"))),Ea(U,A,w),U[pi]=h,ct(U),A=U;break e;case"link":var ie=cH("link","href",k).get(A+(w.href||""));if(ie){for(var he=0;he<ie.length;he++)if(U=ie[he],U.getAttribute("href")===(w.href==null||w.href===""?null:w.href)&&U.getAttribute("rel")===(w.rel==null?null:w.rel)&&U.getAttribute("title")===(w.title==null?null:w.title)&&U.getAttribute("crossorigin")===(w.crossOrigin==null?null:w.crossOrigin)){ie.splice(he,1);break t}}U=k.createElement(A),Ea(U,A,w),k.head.appendChild(U);break;case"meta":if(ie=cH("meta","content",k).get(A+(w.content||""))){for(he=0;he<ie.length;he++)if(U=ie[he],U.getAttribute("content")===(w.content==null?null:""+w.content)&&U.getAttribute("name")===(w.name==null?null:w.name)&&U.getAttribute("property")===(w.property==null?null:w.property)&&U.getAttribute("http-equiv")===(w.httpEquiv==null?null:w.httpEquiv)&&U.getAttribute("charset")===(w.charSet==null?null:w.charSet)){ie.splice(he,1);break t}}U=k.createElement(A),Ea(U,A,w),k.head.appendChild(U);break;default:throw Error(r(468,A))}U[pi]=h,ct(U),A=U}h.stateNode=A}else uH(k,h.type,h.stateNode);else h.stateNode=lH(k,A,h.memoizedProps);else U!==A?(U===null?w.stateNode!==null&&(w=w.stateNode,w.parentNode.removeChild(w)):U.count--,A===null?uH(k,h.type,h.stateNode):lH(k,A,h.memoizedProps)):A===null&&h.stateNode!==null&&W0(h,h.memoizedProps,w.memoizedProps)}break;case 27:vo(m,h),gs(h),A&512&&(zi||w===null||bu(w,w.return)),w!==null&&A&4&&W0(h,h.memoizedProps,w.memoizedProps);break;case 5:if(vo(m,h),gs(h),A&512&&(zi||w===null||bu(w,w.return)),h.flags&32){k=h.stateNode;try{ps(k,"")}catch(gt){Ve(h,h.return,gt)}}A&4&&h.stateNode!=null&&(k=h.memoizedProps,W0(h,k,w!==null?w.memoizedProps:k)),A&1024&&(Lm=!0);break;case 6:if(vo(m,h),gs(h),A&4){if(h.stateNode===null)throw Error(r(162));A=h.memoizedProps,w=h.stateNode;try{w.nodeValue=A}catch(gt){Ve(h,h.return,gt)}}break;case 3:if(DA=null,k=Wc,Wc=NA(m.containerInfo),vo(m,h),Wc=k,gs(h),A&4&&w!==null&&w.memoizedState.isDehydrated)try{mw(m.containerInfo)}catch(gt){Ve(h,h.return,gt)}Lm&&(Lm=!1,Vh(h));break;case 4:A=Wc,Wc=NA(h.stateNode.containerInfo),vo(m,h),gs(h),Wc=A;break;case 12:vo(m,h),gs(h);break;case 13:vo(m,h),gs(h),h.child.flags&8192&&h.memoizedState!==null!=(w!==null&&w.memoizedState!==null)&&(Ci=je()),A&4&&(A=h.updateQueue,A!==null&&(h.updateQueue=null,ap(h,A)));break;case 22:k=h.memoizedState!==null;var Re=w!==null&&w.memoizedState!==null,rt=xu,kt=zi;if(xu=rt||k,zi=kt||Re,vo(m,h),zi=kt,xu=rt,gs(h),A&8192)e:for(m=h.stateNode,m._visibility=k?m._visibility&-2:m._visibility|1,k&&(w===null||Re||xu||zi||Sl(h)),w=null,m=h;;){if(m.tag===5||m.tag===26){if(w===null){Re=w=m;try{if(U=Re.stateNode,k)ie=U.style,typeof ie.setProperty=="function"?ie.setProperty("display","none","important"):ie.display="none";else{he=Re.stateNode;var Pt=Re.memoizedProps.style,ht=Pt!=null&&Pt.hasOwnProperty("display")?Pt.display:null;he.style.display=ht==null||typeof ht=="boolean"?"":(""+ht).trim()}}catch(gt){Ve(Re,Re.return,gt)}}}else if(m.tag===6){if(w===null){Re=m;try{Re.stateNode.nodeValue=k?"":Re.memoizedProps}catch(gt){Ve(Re,Re.return,gt)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===h)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break e;for(;m.sibling===null;){if(m.return===null||m.return===h)break e;w===m&&(w=null),m=m.return}w===m&&(w=null),m.sibling.return=m.return,m=m.sibling}A&4&&(A=h.updateQueue,A!==null&&(w=A.retryQueue,w!==null&&(A.retryQueue=null,ap(h,w))));break;case 19:vo(m,h),gs(h),A&4&&(A=h.updateQueue,A!==null&&(h.updateQueue=null,ap(h,A)));break;case 30:break;case 21:break;default:vo(m,h),gs(h)}}function gs(h){var m=h.flags;if(m&2){try{for(var w,A=h.return;A!==null;){if(j0(A)){w=A;break}A=A.return}if(w==null)throw Error(r(160));switch(w.tag){case 27:var k=w.stateNode,U=Fh(h);Uh(h,U,k);break;case 5:var ie=w.stateNode;w.flags&32&&(ps(ie,""),w.flags&=-33);var he=Fh(h);Uh(h,he,ie);break;case 3:case 4:var Re=w.stateNode.containerInfo,rt=Fh(h);Ph(h,rt,Re);break;default:throw Error(r(161))}}catch(kt){Ve(h,h.return,kt)}h.flags&=-3}m&4096&&(h.flags&=-4097)}function Vh(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var m=h;Vh(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),h=h.sibling}}function _a(h,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)Dd(h,m.alternate,m),m=m.sibling}function Sl(h){for(h=h.child;h!==null;){var m=h;switch(m.tag){case 0:case 11:case 14:case 15:bl(4,m,m.return),Sl(m);break;case 1:bu(m,m.return);var w=m.stateNode;typeof w.componentWillUnmount=="function"&&Id(m,m.return,w),Sl(m);break;case 27:aw(m.stateNode);case 26:case 5:bu(m,m.return),Sl(m);break;case 22:m.memoizedState===null&&Sl(m);break;case 30:Sl(m);break;default:Sl(m)}h=h.sibling}}function Su(h,m,w){for(w=w&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var A=m.alternate,k=h,U=m,ie=U.flags;switch(U.tag){case 0:case 11:case 15:Su(k,U,w),rp(4,U);break;case 1:if(Su(k,U,w),A=U,k=A.stateNode,typeof k.componentDidMount=="function")try{k.componentDidMount()}catch(rt){Ve(A,A.return,rt)}if(A=U,k=A.updateQueue,k!==null){var he=A.stateNode;try{var Re=k.shared.hiddenCallbacks;if(Re!==null)for(k.shared.hiddenCallbacks=null,k=0;k<Re.length;k++)Am(Re[k],he)}catch(rt){Ve(A,A.return,rt)}}w&&ie&64&&ip(U),sp(U,U.return);break;case 27:zh(U);case 26:case 5:Su(k,U,w),w&&A===null&&ie&4&&$m(U),sp(U,U.return);break;case 12:Su(k,U,w);break;case 13:Su(k,U,w),w&&ie&4&&Hh(k,U);break;case 22:U.memoizedState===null&&Su(k,U,w),sp(U,U.return);break;case 30:break;default:Su(k,U,w)}m=m.sibling}}function kb(h,m){var w=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),h=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(h=m.memoizedState.cachePool.pool),h!==w&&(h!=null&&h.refCount++,w!=null&&xm(w))}function Ob(h,m){h=null,m.alternate!==null&&(h=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==h&&(m.refCount++,h!=null&&xm(h))}function Di(h,m,w,A){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)Bb(h,m,w,A),m=m.sibling}function Bb(h,m,w,A){var k=m.flags;switch(m.tag){case 0:case 11:case 15:Di(h,m,w,A),k&2048&&rp(9,m);break;case 1:Di(h,m,w,A);break;case 3:Di(h,m,w,A),k&2048&&(h=null,m.alternate!==null&&(h=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==h&&(m.refCount++,h!=null&&xm(h)));break;case 12:if(k&2048){Di(h,m,w,A),h=m.stateNode;try{var U=m.memoizedProps,ie=U.id,he=U.onPostCommit;typeof he=="function"&&he(ie,m.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(Re){Ve(m,m.return,Re)}}else Di(h,m,w,A);break;case 13:Di(h,m,w,A);break;case 23:break;case 22:U=m.stateNode,ie=m.alternate,m.memoizedState!==null?U._visibility&2?Di(h,m,w,A):jc(h,m):U._visibility&2?Di(h,m,w,A):(U._visibility|=2,kd(h,m,w,A,(m.subtreeFlags&10256)!==0)),k&2048&&kb(ie,m);break;case 24:Di(h,m,w,A),k&2048&&Ob(m.alternate,m);break;default:Di(h,m,w,A)}}function kd(h,m,w,A,k){for(k=k&&(m.subtreeFlags&10256)!==0,m=m.child;m!==null;){var U=h,ie=m,he=w,Re=A,rt=ie.flags;switch(ie.tag){case 0:case 11:case 15:kd(U,ie,he,Re,k),rp(8,ie);break;case 23:break;case 22:var kt=ie.stateNode;ie.memoizedState!==null?kt._visibility&2?kd(U,ie,he,Re,k):jc(U,ie):(kt._visibility|=2,kd(U,ie,he,Re,k)),k&&rt&2048&&kb(ie.alternate,ie);break;case 24:kd(U,ie,he,Re,k),k&&rt&2048&&Ob(ie.alternate,ie);break;default:kd(U,ie,he,Re,k)}m=m.sibling}}function jc(h,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var w=h,A=m,k=A.flags;switch(A.tag){case 22:jc(w,A),k&2048&&kb(A.alternate,A);break;case 24:jc(w,A),k&2048&&Ob(A.alternate,A);break;default:jc(w,A)}m=m.sibling}}var wl=8192;function Fm(h){if(h.subtreeFlags&wl)for(h=h.child;h!==null;)CA(h),h=h.sibling}function CA(h){switch(h.tag){case 26:Fm(h),h.flags&wl&&h.memoizedState!==null&&mle(Wc,h.memoizedState,h.memoizedProps);break;case 5:Fm(h);break;case 3:case 4:var m=Wc;Wc=NA(h.stateNode.containerInfo),Fm(h),Wc=m;break;case 22:h.memoizedState===null&&(m=h.alternate,m!==null&&m.memoizedState!==null?(m=wl,wl=16777216,Fm(h),wl=m):Fm(h));break;default:Fm(h)}}function EA(h){var m=h.alternate;if(m!==null&&(h=m.child,h!==null)){m.child=null;do m=h.sibling,h.sibling=null,h=m;while(h!==null)}}function Hi(h){var m=h.deletions;if((h.flags&16)!==0){if(m!==null)for(var w=0;w<m.length;w++){var A=m[w];Ii=A,_u(A,h)}EA(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)nw(h),h=h.sibling}function nw(h){switch(h.tag){case 0:case 11:case 15:Hi(h),h.flags&2048&&bl(9,h,h.return);break;case 3:Hi(h);break;case 12:Hi(h);break;case 22:var m=h.stateNode;h.memoizedState!==null&&m._visibility&2&&(h.return===null||h.return.tag!==13)?(m._visibility&=-3,wu(h)):Hi(h);break;default:Hi(h)}}function wu(h){var m=h.deletions;if((h.flags&16)!==0){if(m!==null)for(var w=0;w<m.length;w++){var A=m[w];Ii=A,_u(A,h)}EA(h)}for(h=h.child;h!==null;){switch(m=h,m.tag){case 0:case 11:case 15:bl(8,m,m.return),wu(m);break;case 22:w=m.stateNode,w._visibility&2&&(w._visibility&=-3,wu(m));break;default:wu(m)}h=h.sibling}}function _u(h,m){for(;Ii!==null;){var w=Ii;switch(w.tag){case 0:case 11:case 15:bl(8,w,m);break;case 23:case 22:if(w.memoizedState!==null&&w.memoizedState.cachePool!==null){var A=w.memoizedState.cachePool.pool;A!=null&&A.refCount++}break;case 24:xm(w.memoizedState.cache)}if(A=w.child,A!==null)A.return=w,Ii=A;else e:for(w=h;Ii!==null;){A=Ii;var k=A.sibling,U=A.return;if(wr(A),A===w){Ii=null;break e}if(k!==null){k.return=U,Ii=k;break e}Ii=U}}}var ys={getCacheForType:function(h){var m=ms(Us),w=m.data.get(h);return w===void 0&&(w=h(),m.data.set(h,w)),w}},rw=typeof WeakMap=="function"?WeakMap:Map,di=0,ur=null,Nr=null,Fn=0,br=0,us=null,_l=!1,Pm=!1,Um=!1,sc=0,Zi=0,Xc=0,Cu=0,lp=0,oc=0,Zr=0,hi=null,Gn=null,$r=!1,Ci=0,Yo=1/0,ac=null,Cl=null,ao=0,Jo=null,ki=null,El=0,Od=0,X0=null,Al=null,Eu=0,cp=null;function vs(){if((di&2)!==0&&Fn!==0)return Fn&-Fn;if(z.T!==null){var h=pr;return h!==0?h:Tk()}return lr()}function $b(){oc===0&&(oc=(Fn&536870912)===0||ni?Te():536870912);var h=Ni.current;return h!==null&&(h.flags|=32),oc}function Ca(h,m,w){(h===ur&&(br===2||br===9)||h.cancelPendingCommit!==null)&&(Wh(h,0),qc(h,Fn,oc,!1)),en(h,w),((di&2)===0||h!==ur)&&(h===ur&&((di&2)===0&&(Cu|=w),Zi===4&&qc(h,Fn,oc,!1)),qh(h))}function zm(h,m,w){if((di&6)!==0)throw Error(r(327));var A=!w&&(m&124)===0&&(m&h.expiredLanes)===0||zt(h,m),k=A?$(h,m):S(h,m,!0),U=A;do{if(k===0){Pm&&!A&&qc(h,m,0,!1);break}else{if(w=h.current.alternate,U&&!Gh(w)){k=S(h,m,!1),U=!1;continue}if(k===2){if(U=m,h.errorRecoveryDisabledLanes&U)var ie=0;else ie=h.pendingLanes&-536870913,ie=ie!==0?ie:ie&536870912?536870912:0;if(ie!==0){m=ie;e:{var he=h;k=hi;var Re=he.current.memoizedState.isDehydrated;if(Re&&(Wh(he,ie).flags|=256),ie=S(he,ie,!1),ie!==2){if(Um&&!Re){he.errorRecoveryDisabledLanes|=U,Cu|=U,k=4;break e}U=Gn,Gn=k,U!==null&&(Gn===null?Gn=U:Gn.push.apply(Gn,U))}k=ie}if(U=!1,k!==2)continue}}if(k===1){Wh(h,0),qc(h,m,0,!0);break}e:{switch(A=h,U=k,U){case 0:case 1:throw Error(r(345));case 4:if((m&4194048)!==m)break;case 6:qc(A,m,oc,!_l);break e;case 2:Gn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((m&62914560)===m&&(k=Ci+300-je(),10<k)){if(qc(A,m,oc,!_l),tn(A,0,!0)!==0)break e;A.timeoutHandle=Q6(q0.bind(null,A,w,Gn,ac,$r,m,oc,Cu,Zr,_l,U,2,-0,0),k);break e}q0(A,w,Gn,ac,$r,m,oc,Cu,Zr,_l,U,0,-0,0)}}break}while(!0);qh(h)}function q0(h,m,w,A,k,U,ie,he,Re,rt,kt,Pt,ht,gt){if(h.timeoutHandle=-1,Pt=m.subtreeFlags,(Pt&8192||(Pt&16785408)===16785408)&&(uw={stylesheets:null,count:0,unsuspend:ple},CA(m),Pt=gle(),Pt!==null)){h.cancelPendingCommit=Pt(Jt.bind(null,h,m,U,w,A,k,ie,he,Re,kt,1,ht,gt)),qc(h,U,ie,!rt);return}Jt(h,m,U,w,A,k,ie,he,Re)}function Gh(h){for(var m=h;;){var w=m.tag;if((w===0||w===11||w===15)&&m.flags&16384&&(w=m.updateQueue,w!==null&&(w=w.stores,w!==null)))for(var A=0;A<w.length;A++){var k=w[A],U=k.getSnapshot;k=k.value;try{if(!Ua(U(),k))return!1}catch{return!1}}if(w=m.child,m.subtreeFlags&16384&&w!==null)w.return=m,m=w;else{if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function qc(h,m,w,A){m&=~lp,m&=~Cu,h.suspendedLanes|=m,h.pingedLanes&=~m,A&&(h.warmLanes|=m),A=h.expirationTimes;for(var k=m;0<k;){var U=31-Ft(k),ie=1<<U;A[U]=-1,k&=~ie}w!==0&&Ot(h,w,m)}function Au(){return(di&6)===0?(iw(0),!1):!0}function up(){if(Nr!==null){if(br===0)var h=Nr.return;else h=Nr,wd=Mh=null,PS(h),qf=null,U0=0,h=Nr;for(;h!==null;)Bm(h.alternate,h),h=h.return;Nr=null}}function Wh(h,m){var w=h.timeoutHandle;w!==-1&&(h.timeoutHandle=-1,Jae(w)),w=h.cancelPendingCommit,w!==null&&(h.cancelPendingCommit=null,w()),up(),ur=h,Nr=w=Es(h.current,null),Fn=m,br=0,us=null,_l=!1,Pm=zt(h,m),Um=!1,Zr=oc=lp=Cu=Xc=Zi=0,Gn=hi=null,$r=!1,(m&8)!==0&&(m|=m&32);var A=h.entangledLanes;if(A!==0)for(h=h.entanglements,A&=m;0<A;){var k=31-Ft(A),U=1<<k;m|=h[k],A&=~U}return sc=m,_0(),w}function Lb(h,m){mr=null,z.H=P0,m===k0||m===Pc?(m=OS(),br=3):m===kS?(m=OS(),br=4):br=m===_A?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,us=m,Nr===null&&(Zi=1,Mb(h,ko(m,h.current)))}function Hm(){var h=z.H;return z.H=P0,h===null?P0:h}function Fb(){var h=z.A;return z.A=ys,h}function y(){Zi=4,_l||(Fn&4194048)!==Fn&&Ni.current!==null||(Pm=!0),(Xc&134217727)===0&&(Cu&134217727)===0||ur===null||qc(ur,Fn,oc,!1)}function S(h,m,w){var A=di;di|=2;var k=Hm(),U=Fb();(ur!==h||Fn!==m)&&(ac=null,Wh(h,m)),m=!1;var ie=Zi;e:do try{if(br!==0&&Nr!==null){var he=Nr,Re=us;switch(br){case 8:up(),ie=6;break e;case 3:case 2:case 9:case 6:Ni.current===null&&(m=!0);var rt=br;if(br=0,us=null,De(h,he,Re,rt),w&&Pm){ie=0;break e}break;default:rt=br,br=0,us=null,De(h,he,Re,rt)}}T(),ie=Zi;break}catch(kt){Lb(h,kt)}while(!0);return m&&h.shellSuspendCounter++,wd=Mh=null,di=A,z.H=k,z.A=U,Nr===null&&(ur=null,Fn=0,_0()),ie}function T(){for(;Nr!==null;)K(Nr)}function $(h,m){var w=di;di|=2;var A=Hm(),k=Fb();ur!==h||Fn!==m?(ac=null,Yo=je()+500,Wh(h,m)):Pm=zt(h,m);e:do try{if(br!==0&&Nr!==null){m=Nr;var U=us;t:switch(br){case 1:br=0,us=null,De(h,m,U,1);break;case 2:case 9:if(fb(U)){br=0,us=null,ge(m);break}m=function(){br!==2&&br!==9||ur!==h||(br=7),qh(h)},U.then(m,m);break e;case 3:br=7;break e;case 4:br=5;break e;case 7:fb(U)?(br=0,us=null,ge(m)):(br=0,us=null,De(h,m,U,7));break;case 5:var ie=null;switch(Nr.tag){case 26:ie=Nr.memoizedState;case 5:case 27:var he=Nr;if(!ie||dH(ie)){br=0,us=null;var Re=he.sibling;if(Re!==null)Nr=Re;else{var rt=he.return;rt!==null?(Nr=rt,Qe(rt)):Nr=null}break t}}br=0,us=null,De(h,m,U,5);break;case 6:br=0,us=null,De(h,m,U,6);break;case 8:up(),Zi=6;break e;default:throw Error(r(462))}}H();break}catch(kt){Lb(h,kt)}while(!0);return wd=Mh=null,z.H=A,z.A=k,di=w,Nr!==null?0:(ur=null,Fn=0,_0(),Zi)}function H(){for(;Nr!==null&&!Ue();)K(Nr)}function K(h){var m=tp(h.alternate,h,sc);h.memoizedProps=h.pendingProps,m===null?Qe(h):Nr=m}function ge(h){var m=h,w=m.alternate;switch(m.tag){case 15:case 0:m=yl(w,m,m.pendingProps,m.type,void 0,Fn);break;case 11:m=yl(w,m,m.pendingProps,m.type.render,m.ref,Fn);break;case 5:PS(m);default:Bm(w,m),m=Nr=AS(m,sc),m=tp(w,m,sc)}h.memoizedProps=h.pendingProps,m===null?Qe(h):Nr=m}function De(h,m,w,A){wd=Mh=null,PS(m),qf=null,U0=0;var k=m.return;try{if(Ek(h,k,m,w,Fn)){Zi=1,Mb(h,ko(w,h.current)),Nr=null;return}}catch(U){if(k!==null)throw Nr=k,U;Zi=1,Mb(h,ko(w,h.current)),Nr=null;return}m.flags&32768?(ni||A===1?h=!0:Pm||(Fn&536870912)!==0?h=!1:(_l=h=!0,(A===2||A===9||A===3||A===6)&&(A=Ni.current,A!==null&&A.tag===13&&(A.flags|=16384))),Dt(m,h)):Qe(m)}function Qe(h){var m=h;do{if((m.flags&32768)!==0){Dt(m,_l);return}h=m.return;var w=tw(m.alternate,m,sc);if(w!==null){Nr=w;return}if(m=m.sibling,m!==null){Nr=m;return}Nr=m=h}while(m!==null);Zi===0&&(Zi=5)}function Dt(h,m){do{var w=Om(h.alternate,h);if(w!==null){w.flags&=32767,Nr=w;return}if(w=h.return,w!==null&&(w.flags|=32768,w.subtreeFlags=0,w.deletions=null),!m&&(h=h.sibling,h!==null)){Nr=h;return}Nr=h=w}while(h!==null);Zi=6,Nr=null}function Jt(h,m,w,A,k,U,ie,he,Re){h.cancelPendingCommit=null;do jh();while(ao!==0);if((di&6)!==0)throw Error(r(327));if(m!==null){if(m===h.current)throw Error(r(177));if(U=m.lanes|m.childLanes,U|=ib,Vt(h,w,U,ie,he,Re),h===ur&&(Nr=ur=null,Fn=0),ki=m,Jo=h,El=w,Od=U,X0=k,Al=A,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(h.callbackNode=null,h.callbackPriority=0,ri(Ut,function(){return Xh(),null})):(h.callbackNode=null,h.callbackPriority=0),A=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||A){A=z.T,z.T=null,k=J.p,J.p=2,ie=di,di|=4;try{oo(h,m,w)}finally{di=ie,J.p=k,z.T=A}}ao=1,dn(),gn(),dr()}}function dn(){if(ao===1){ao=0;var h=Jo,m=ki,w=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||w){w=z.T,z.T=null;var A=J.p;J.p=2;var k=di;di|=4;try{Db(m,h);var U=Bk,ie=bS(h.containerInfo),he=U.focusedElem,Re=U.selectionRange;if(ie!==he&&he&&he.ownerDocument&&vS(he.ownerDocument.documentElement,he)){if(Re!==null&&x0(he)){var rt=Re.start,kt=Re.end;if(kt===void 0&&(kt=rt),"selectionStart"in he)he.selectionStart=rt,he.selectionEnd=Math.min(kt,he.value.length);else{var Pt=he.ownerDocument||document,ht=Pt&&Pt.defaultView||window;if(ht.getSelection){var gt=ht.getSelection(),sr=he.textContent.length,Xn=Math.min(Re.start,sr),Gi=Re.end===void 0?Xn:Math.min(Re.end,sr);!gt.extend&&Xn>Gi&&(ie=Gi,Gi=Xn,Xn=ie);var Je=yS(he,Xn),We=yS(he,Gi);if(Je&&We&&(gt.rangeCount!==1||gt.anchorNode!==Je.node||gt.anchorOffset!==Je.offset||gt.focusNode!==We.node||gt.focusOffset!==We.offset)){var tt=Pt.createRange();tt.setStart(Je.node,Je.offset),gt.removeAllRanges(),Xn>Gi?(gt.addRange(tt),gt.extend(We.node,We.offset)):(tt.setEnd(We.node,We.offset),gt.addRange(tt))}}}}for(Pt=[],gt=he;gt=gt.parentNode;)gt.nodeType===1&&Pt.push({element:gt,left:gt.scrollLeft,top:gt.scrollTop});for(typeof he.focus=="function"&&he.focus(),he=0;he<Pt.length;he++){var Bt=Pt[he];Bt.element.scrollLeft=Bt.left,Bt.element.scrollTop=Bt.top}}BA=!!Ok,Bk=Ok=null}finally{di=k,J.p=A,z.T=w}}h.current=m,ao=2}}function gn(){if(ao===2){ao=0;var h=Jo,m=ki,w=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||w){w=z.T,z.T=null;var A=J.p;J.p=2;var k=di;di|=4;try{Dd(h,m.alternate,m)}finally{di=k,J.p=A,z.T=w}}ao=3}}function dr(){if(ao===4||ao===3){ao=0,Ze();var h=Jo,m=ki,w=El,A=Al;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?ao=5:(ao=0,ki=Jo=null,Tl(h,h.pendingLanes));var k=h.pendingLanes;if(k===0&&(Cl=null),Tr(w),m=m.stateNode,ot&&typeof ot.onCommitFiberRoot=="function")try{ot.onCommitFiberRoot(qe,m,void 0,(m.current.flags&128)===128)}catch{}if(A!==null){m=z.T,k=J.p,J.p=2,z.T=null;try{for(var U=h.onRecoverableError,ie=0;ie<A.length;ie++){var he=A[ie];U(he.value,{componentStack:he.stack})}}finally{z.T=m,J.p=k}}(El&3)!==0&&jh(),qh(h),k=h.pendingLanes,(w&4194090)!==0&&(k&42)!==0?h===cp?Eu++:(Eu=0,cp=h):Eu=0,iw(0)}}function Tl(h,m){(h.pooledCacheLanes&=m)===0&&(m=h.pooledCache,m!=null&&(h.pooledCache=null,xm(m)))}function jh(h){return dn(),gn(),dr(),Xh()}function Xh(){if(ao!==5)return!1;var h=Jo,m=Od;Od=0;var w=Tr(El),A=z.T,k=J.p;try{J.p=32>w?32:w,z.T=null,w=X0,X0=null;var U=Jo,ie=El;if(ao=0,ki=Jo=null,El=0,(di&6)!==0)throw Error(r(331));var he=di;if(di|=4,nw(U.current),Bb(U,U.current,ie,w),di=he,iw(0,!1),ot&&typeof ot.onPostCommitFiberRoot=="function")try{ot.onPostCommitFiberRoot(qe,U)}catch{}return!0}finally{J.p=k,z.T=A,Tl(h,m)}}function ut(h,m,w){m=ko(w,m),m=Rb(h.stateNode,m,2),h=Ed(h,m,2),h!==null&&(en(h,2),qh(h))}function Ve(h,m,w){if(h.tag===3)ut(h,h,w);else for(;m!==null;){if(m.tag===3){ut(m,h,w);break}else if(m.tag===1){var A=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(Cl===null||!Cl.has(A))){h=ko(w,h),w=wA(2),A=Ed(m,w,2),A!==null&&(Nb(w,A,m,h),en(A,2),qh(A));break}}m=m.return}}function bt(h,m,w){var A=h.pingCache;if(A===null){A=h.pingCache=new rw;var k=new Set;A.set(m,k)}else k=A.get(m),k===void 0&&(k=new Set,A.set(m,k));k.has(w)||(Um=!0,k.add(w),h=Kt.bind(null,h,m,w),m.then(h,h))}function Kt(h,m,w){var A=h.pingCache;A!==null&&A.delete(m),h.pingedLanes|=h.suspendedLanes&w,h.warmLanes&=~w,ur===h&&(Fn&w)===w&&(Zi===4||Zi===3&&(Fn&62914560)===Fn&&300>je()-Ci?(di&2)===0&&Wh(h,0):lp|=w,Zr===Fn&&(Zr=0)),qh(h)}function Dn(h,m){m===0&&(m=Xe()),h=xd(h,m),h!==null&&(en(h,m),qh(h))}function Qi(h){var m=h.memoizedState,w=0;m!==null&&(w=m.retryLane),Dn(h,w)}function er(h,m){var w=0;switch(h.tag){case 13:var A=h.stateNode,k=h.memoizedState;k!==null&&(w=k.retryLane);break;case 19:A=h.stateNode;break;case 22:A=h.stateNode._retryCache;break;default:throw Error(r(314))}A!==null&&A.delete(m),Dn(h,w)}function ri(h,m){return pe(h,m)}var Rs=null,Or=null,Tu=!1,Pb=!1,Ak=!1,K0=0;function qh(h){h!==Or&&h.next===null&&(Or===null?Rs=Or=h:Or=Or.next=h),Pb=!0,Tu||(Tu=!0,Hae())}function iw(h,m){if(!Ak&&Pb){Ak=!0;do for(var w=!1,A=Rs;A!==null;){if(h!==0){var k=A.pendingLanes;if(k===0)var U=0;else{var ie=A.suspendedLanes,he=A.pingedLanes;U=(1<<31-Ft(42|h)+1)-1,U&=k&~(ie&~he),U=U&201326741?U&201326741|1:U?U|2:0}U!==0&&(w=!0,V6(A,U))}else U=Fn,U=tn(A,A===ur?U:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),(U&3)===0||zt(A,U)||(w=!0,V6(A,U));A=A.next}while(w);Ak=!1}}function zae(){U6()}function U6(){Pb=Tu=!1;var h=0;K0!==0&&(Yae()&&(h=K0),K0=0);for(var m=je(),w=null,A=Rs;A!==null;){var k=A.next,U=z6(A,m);U===0?(A.next=null,w===null?Rs=k:w.next=k,k===null&&(Or=w)):(w=A,(h!==0||(U&3)!==0)&&(Pb=!0)),A=k}iw(h)}function z6(h,m){for(var w=h.suspendedLanes,A=h.pingedLanes,k=h.expirationTimes,U=h.pendingLanes&-62914561;0<U;){var ie=31-Ft(U),he=1<<ie,Re=k[ie];Re===-1?((he&w)===0||(he&A)!==0)&&(k[ie]=fn(he,m)):Re<=m&&(h.expiredLanes|=he),U&=~he}if(m=ur,w=Fn,w=tn(h,h===m?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),A=h.callbackNode,w===0||h===m&&(br===2||br===9)||h.cancelPendingCommit!==null)return A!==null&&A!==null&&Le(A),h.callbackNode=null,h.callbackPriority=0;if((w&3)===0||zt(h,w)){if(m=w&-w,m===h.callbackPriority)return m;switch(A!==null&&Le(A),Tr(w)){case 2:case 8:w=at;break;case 32:w=Ut;break;case 268435456:w=ce;break;default:w=Ut}return A=H6.bind(null,h),w=pe(w,A),h.callbackPriority=m,h.callbackNode=w,m}return A!==null&&A!==null&&Le(A),h.callbackPriority=2,h.callbackNode=null,2}function H6(h,m){if(ao!==0&&ao!==5)return h.callbackNode=null,h.callbackPriority=0,null;var w=h.callbackNode;if(jh()&&h.callbackNode!==w)return null;var A=Fn;return A=tn(h,h===ur?A:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),A===0?null:(zm(h,A,m),z6(h,je()),h.callbackNode!=null&&h.callbackNode===w?H6.bind(null,h):null)}function V6(h,m){if(jh())return null;zm(h,m,!0)}function Hae(){Zae(function(){(di&6)!==0?pe(st,zae):U6()})}function Tk(){return K0===0&&(K0=Te()),K0}function G6(h){return h==null||typeof h=="symbol"||typeof h=="boolean"?null:typeof h=="function"?h:Uf(""+h)}function W6(h,m){var w=m.ownerDocument.createElement("input");return w.name=m.name,w.value=m.value,h.id&&w.setAttribute("form",h.id),m.parentNode.insertBefore(w,m),h=new FormData(h),w.parentNode.removeChild(w),h}function Vae(h,m,w,A,k){if(m==="submit"&&w&&w.stateNode===k){var U=G6((k[Si]||null).action),ie=A.submitter;ie&&(m=(m=ie[Si]||null)?G6(m.formAction):ie.getAttribute("formAction"),m!==null&&(U=m,ie=null));var he=new hd("action","action",null,A,k);h.push({event:he,listeners:[{instance:null,listener:function(){if(A.defaultPrevented){if(K0!==0){var Re=ie?W6(k,ie):new FormData(k);JS(w,{pending:!0,data:Re,method:k.method,action:U},null,Re)}}else typeof U=="function"&&(he.preventDefault(),Re=ie?W6(k,ie):new FormData(k),JS(w,{pending:!0,data:Re,method:k.method,action:U},U,Re))},currentTarget:k}]})}}for(var Mk=0;Mk<w0.length;Mk++){var Rk=w0[Mk],Gae=Rk.toLowerCase(),Wae=Rk[0].toUpperCase()+Rk.slice(1);po(Gae,"on"+Wae)}po(va,"onAnimationEnd"),po(wS,"onAnimationIteration"),po(Ha,"onAnimationStart"),po("dblclick","onDoubleClick"),po("focusin","onFocus"),po("focusout","onBlur"),po(O2,"onTransitionRun"),po(vd,"onTransitionStart"),po(mm,"onTransitionCancel"),po(bd,"onTransitionEnd"),Se("onMouseEnter",["mouseout","mouseover"]),Se("onMouseLeave",["mouseout","mouseover"]),Se("onPointerEnter",["pointerout","pointerover"]),Se("onPointerLeave",["pointerout","pointerover"]),se("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),se("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),se("onBeforeInput",["compositionend","keypress","textInput","paste"]),se("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),se("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),se("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sw="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jae=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sw));function j6(h,m){m=(m&4)!==0;for(var w=0;w<h.length;w++){var A=h[w],k=A.event;A=A.listeners;e:{var U=void 0;if(m)for(var ie=A.length-1;0<=ie;ie--){var he=A[ie],Re=he.instance,rt=he.currentTarget;if(he=he.listener,Re!==U&&k.isPropagationStopped())break e;U=he,k.currentTarget=rt;try{U(k)}catch(kt){Yf(kt)}k.currentTarget=null,U=Re}else for(ie=0;ie<A.length;ie++){if(he=A[ie],Re=he.instance,rt=he.currentTarget,he=he.listener,Re!==U&&k.isPropagationStopped())break e;U=he,k.currentTarget=rt;try{U(k)}catch(kt){Yf(kt)}k.currentTarget=null,U=Re}}}}function Ur(h,m){var w=m[as];w===void 0&&(w=m[as]=new Set);var A=h+"__bubble";w.has(A)||(X6(m,h,2,!1),w.add(A))}function Nk(h,m,w){var A=0;m&&(A|=4),X6(w,h,A,m)}var AA="_reactListening"+Math.random().toString(36).slice(2);function Ik(h){if(!h[AA]){h[AA]=!0,St.forEach(function(w){w!=="selectionchange"&&(jae.has(w)||Nk(w,!1,h),Nk(w,!0,h))});var m=h.nodeType===9?h:h.ownerDocument;m===null||m[AA]||(m[AA]=!0,Nk("selectionchange",!1,m))}}function X6(h,m,w,A){switch(yH(m)){case 2:var k=ble;break;case 8:k=xle;break;default:k=Wk}w=k.bind(null,m,w,h),k=void 0,!xh||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(k=!0),A?k!==void 0?h.addEventListener(m,w,{capture:!0,passive:k}):h.addEventListener(m,w,!0):k!==void 0?h.addEventListener(m,w,{passive:k}):h.addEventListener(m,w,!1)}function Dk(h,m,w,A,k){var U=A;if((m&1)===0&&(m&2)===0&&A!==null)e:for(;;){if(A===null)return;var ie=A.tag;if(ie===3||ie===4){var he=A.stateNode.containerInfo;if(he===k)break;if(ie===4)for(ie=A.return;ie!==null;){var Re=ie.tag;if((Re===3||Re===4)&&ie.stateNode.containerInfo===k)return;ie=ie.return}for(;he!==null;){if(ie=oe(he),ie===null)return;if(Re=ie.tag,Re===5||Re===6||Re===26||Re===27){A=U=ie;continue e}he=he.parentNode}}A=A.return}a0(function(){var rt=U,kt=um(w),Pt=[];e:{var ht=rb.get(h);if(ht!==void 0){var gt=hd,sr=h;switch(h){case"keypress":if(Oc(w)===0)break e;case"keydown":case"keyup":gt=g0;break;case"focusin":sr="focus",gt=fm;break;case"focusout":sr="blur",gt=fm;break;case"beforeblur":case"afterblur":gt=fm;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":gt=c0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":gt=hm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":gt=y0;break;case va:case wS:case Ha:gt=h0;break;case bd:gt=Bc;break;case"scroll":case"scrollend":gt=jv;break;case"wheel":gt=mS;break;case"copy":case"cut":case"paste":gt=p0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":gt=pm;break;case"toggle":case"beforetoggle":gt=$c}var Xn=(m&4)!==0,Gi=!Xn&&(h==="scroll"||h==="scrollend"),Je=Xn?ht!==null?ht+"Capture":null:ht;Xn=[];for(var We=rt,tt;We!==null;){var Bt=We;if(tt=Bt.stateNode,Bt=Bt.tag,Bt!==5&&Bt!==26&&Bt!==27||tt===null||Je===null||(Bt=bh(We,Je),Bt!=null&&Xn.push(ow(We,Bt,tt))),Gi)break;We=We.return}0<Xn.length&&(ht=new gt(ht,sr,null,w,kt),Pt.push({event:ht,listeners:Xn}))}}if((m&7)===0){e:{if(ht=h==="mouseover"||h==="pointerover",gt=h==="mouseout"||h==="pointerout",ht&&w!==cm&&(sr=w.relatedTarget||w.fromElement)&&(oe(sr)||sr[Ri]))break e;if((gt||ht)&&(ht=kt.window===kt?kt:(ht=kt.ownerDocument)?ht.defaultView||ht.parentWindow:window,gt?(sr=w.relatedTarget||w.toElement,gt=rt,sr=sr?oe(sr):null,sr!==null&&(Gi=s(sr),Xn=sr.tag,sr!==Gi||Xn!==5&&Xn!==27&&Xn!==6)&&(sr=null)):(gt=null,sr=rt),gt!==sr)){if(Xn=c0,Bt="onMouseLeave",Je="onMouseEnter",We="mouse",(h==="pointerout"||h==="pointerover")&&(Xn=pm,Bt="onPointerLeave",Je="onPointerEnter",We="pointer"),Gi=gt==null?ht:Oe(gt),tt=sr==null?ht:Oe(sr),ht=new Xn(Bt,We+"leave",gt,w,kt),ht.target=Gi,ht.relatedTarget=tt,Bt=null,oe(kt)===rt&&(Xn=new Xn(Je,We+"enter",sr,w,kt),Xn.target=tt,Xn.relatedTarget=Gi,Bt=Xn),Gi=Bt,gt&&sr)t:{for(Xn=gt,Je=sr,We=0,tt=Xn;tt;tt=Ub(tt))We++;for(tt=0,Bt=Je;Bt;Bt=Ub(Bt))tt++;for(;0<We-tt;)Xn=Ub(Xn),We--;for(;0<tt-We;)Je=Ub(Je),tt--;for(;We--;){if(Xn===Je||Je!==null&&Xn===Je.alternate)break t;Xn=Ub(Xn),Je=Ub(Je)}Xn=null}else Xn=null;gt!==null&&q6(Pt,ht,gt,Xn,!1),sr!==null&&Gi!==null&&q6(Pt,Gi,sr,Xn,!0)}}e:{if(ht=rt?Oe(rt):window,gt=ht.nodeName&&ht.nodeName.toLowerCase(),gt==="select"||gt==="input"&&ht.type==="file")var En=Io;else if(cn(ht))if(ro)En=hl;else{En=Qv;var Lr=gS}else gt=ht.nodeName,!gt||gt.toLowerCase()!=="input"||ht.type!=="checkbox"&&ht.type!=="radio"?rt&&Pf(rt.elementType)&&(En=Io):En=Wf;if(En&&(En=En(h,rt))){xn(Pt,En,w,kt);break e}Lr&&Lr(h,ht,rt),h==="focusout"&&rt&&ht.type==="number"&&rt.memoizedProps.value!=null&&wi(ht,"number",ht.value)}switch(Lr=rt?Oe(rt):window,h){case"focusin":(cn(Lr)||Lr.contentEditable==="true")&&(gd=Lr,eb=rt,S0=null);break;case"focusout":S0=eb=gd=null;break;case"mousedown":tb=!0;break;case"contextmenu":case"mouseup":case"dragend":tb=!1,SS(Pt,w,kt);break;case"selectionchange":if(xS)break;case"keydown":case"keyup":SS(Pt,w,kt)}var Bn;if(j)e:{switch(h){case"compositionstart":var qn="onCompositionStart";break e;case"compositionend":qn="onCompositionEnd";break e;case"compositionupdate":qn="onCompositionUpdate";break e}qn=void 0}else Ht?He(h,w)&&(qn="onCompositionEnd"):h==="keydown"&&w.keyCode===229&&(qn="onCompositionStart");qn&&(we&&w.locale!=="ko"&&(Ht||qn!=="onCompositionStart"?qn==="onCompositionEnd"&&Ht&&(Bn=l0()):(pa=kt,ma="value"in pa?pa.value:pa.textContent,Ht=!0)),Lr=TA(rt,qn),0<Lr.length&&(qn=new Hf(qn,h,null,w,kt),Pt.push({event:qn,listeners:Lr}),Bn?qn.data=Bn:(Bn=ft(w),Bn!==null&&(qn.data=Bn)))),(Bn=ae?Zt(h,w):Un(h,w))&&(qn=TA(rt,"onBeforeInput"),0<qn.length&&(Lr=new Hf("onBeforeInput","beforeinput",null,w,kt),Pt.push({event:Lr,listeners:qn}),Lr.data=Bn)),Vae(Pt,h,rt,w,kt)}j6(Pt,m)})}function ow(h,m,w){return{instance:h,listener:m,currentTarget:w}}function TA(h,m){for(var w=m+"Capture",A=[];h!==null;){var k=h,U=k.stateNode;if(k=k.tag,k!==5&&k!==26&&k!==27||U===null||(k=bh(h,w),k!=null&&A.unshift(ow(h,k,U)),k=bh(h,m),k!=null&&A.push(ow(h,k,U))),h.tag===3)return A;h=h.return}return[]}function Ub(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5&&h.tag!==27);return h||null}function q6(h,m,w,A,k){for(var U=m._reactName,ie=[];w!==null&&w!==A;){var he=w,Re=he.alternate,rt=he.stateNode;if(he=he.tag,Re!==null&&Re===A)break;he!==5&&he!==26&&he!==27||rt===null||(Re=rt,k?(rt=bh(w,U),rt!=null&&ie.unshift(ow(w,rt,Re))):k||(rt=bh(w,U),rt!=null&&ie.push(ow(w,rt,Re)))),w=w.return}ie.length!==0&&h.push({event:m,listeners:ie})}var Xae=/\r\n?/g,qae=/\u0000|\uFFFD/g;function K6(h){return(typeof h=="string"?h:""+h).replace(Xae,`
`).replace(qae,"")}function Y6(h,m){return m=K6(m),K6(h)===m}function MA(){}function Vi(h,m,w,A,k,U){switch(w){case"children":typeof A=="string"?m==="body"||m==="textarea"&&A===""||ps(h,A):(typeof A=="number"||typeof A=="bigint")&&m!=="body"&&ps(h,""+A);break;case"className":Tt(h,"class",A);break;case"tabIndex":Tt(h,"tabindex",A);break;case"dir":case"role":case"viewBox":case"width":case"height":Tt(h,w,A);break;case"style":vh(h,A,U);break;case"data":if(m!=="object"){Tt(h,"data",A);break}case"src":case"href":if(A===""&&(m!=="a"||w!=="href")){h.removeAttribute(w);break}if(A==null||typeof A=="function"||typeof A=="symbol"||typeof A=="boolean"){h.removeAttribute(w);break}A=Uf(""+A),h.setAttribute(w,A);break;case"action":case"formAction":if(typeof A=="function"){h.setAttribute(w,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof U=="function"&&(w==="formAction"?(m!=="input"&&Vi(h,m,"name",k.name,k,null),Vi(h,m,"formEncType",k.formEncType,k,null),Vi(h,m,"formMethod",k.formMethod,k,null),Vi(h,m,"formTarget",k.formTarget,k,null)):(Vi(h,m,"encType",k.encType,k,null),Vi(h,m,"method",k.method,k,null),Vi(h,m,"target",k.target,k,null)));if(A==null||typeof A=="symbol"||typeof A=="boolean"){h.removeAttribute(w);break}A=Uf(""+A),h.setAttribute(w,A);break;case"onClick":A!=null&&(h.onclick=MA);break;case"onScroll":A!=null&&Ur("scroll",h);break;case"onScrollEnd":A!=null&&Ur("scrollend",h);break;case"dangerouslySetInnerHTML":if(A!=null){if(typeof A!="object"||!("__html"in A))throw Error(r(61));if(w=A.__html,w!=null){if(k.children!=null)throw Error(r(60));h.innerHTML=w}}break;case"multiple":h.multiple=A&&typeof A!="function"&&typeof A!="symbol";break;case"muted":h.muted=A&&typeof A!="function"&&typeof A!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(A==null||typeof A=="function"||typeof A=="boolean"||typeof A=="symbol"){h.removeAttribute("xlink:href");break}w=Uf(""+A),h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":A!=null&&typeof A!="function"&&typeof A!="symbol"?h.setAttribute(w,""+A):h.removeAttribute(w);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":A&&typeof A!="function"&&typeof A!="symbol"?h.setAttribute(w,""):h.removeAttribute(w);break;case"capture":case"download":A===!0?h.setAttribute(w,""):A!==!1&&A!=null&&typeof A!="function"&&typeof A!="symbol"?h.setAttribute(w,A):h.removeAttribute(w);break;case"cols":case"rows":case"size":case"span":A!=null&&typeof A!="function"&&typeof A!="symbol"&&!isNaN(A)&&1<=A?h.setAttribute(w,A):h.removeAttribute(w);break;case"rowSpan":case"start":A==null||typeof A=="function"||typeof A=="symbol"||isNaN(A)?h.removeAttribute(w):h.setAttribute(w,A);break;case"popover":Ur("beforetoggle",h),Ur("toggle",h),vt(h,"popover",A);break;case"xlinkActuate":Et(h,"http://www.w3.org/1999/xlink","xlink:actuate",A);break;case"xlinkArcrole":Et(h,"http://www.w3.org/1999/xlink","xlink:arcrole",A);break;case"xlinkRole":Et(h,"http://www.w3.org/1999/xlink","xlink:role",A);break;case"xlinkShow":Et(h,"http://www.w3.org/1999/xlink","xlink:show",A);break;case"xlinkTitle":Et(h,"http://www.w3.org/1999/xlink","xlink:title",A);break;case"xlinkType":Et(h,"http://www.w3.org/1999/xlink","xlink:type",A);break;case"xmlBase":Et(h,"http://www.w3.org/XML/1998/namespace","xml:base",A);break;case"xmlLang":Et(h,"http://www.w3.org/XML/1998/namespace","xml:lang",A);break;case"xmlSpace":Et(h,"http://www.w3.org/XML/1998/namespace","xml:space",A);break;case"is":vt(h,"is",A);break;case"innerText":case"textContent":break;default:(!(2<w.length)||w[0]!=="o"&&w[0]!=="O"||w[1]!=="n"&&w[1]!=="N")&&(w=ld.get(w)||w,vt(h,w,A))}}function kk(h,m,w,A,k,U){switch(w){case"style":vh(h,A,U);break;case"dangerouslySetInnerHTML":if(A!=null){if(typeof A!="object"||!("__html"in A))throw Error(r(61));if(w=A.__html,w!=null){if(k.children!=null)throw Error(r(60));h.innerHTML=w}}break;case"children":typeof A=="string"?ps(h,A):(typeof A=="number"||typeof A=="bigint")&&ps(h,""+A);break;case"onScroll":A!=null&&Ur("scroll",h);break;case"onScrollEnd":A!=null&&Ur("scrollend",h);break;case"onClick":A!=null&&(h.onclick=MA);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jt.hasOwnProperty(w))e:{if(w[0]==="o"&&w[1]==="n"&&(k=w.endsWith("Capture"),m=w.slice(2,k?w.length-7:void 0),U=h[Si]||null,U=U!=null?U[w]:null,typeof U=="function"&&h.removeEventListener(m,U,k),typeof A=="function")){typeof U!="function"&&U!==null&&(w in h?h[w]=null:h.hasAttribute(w)&&h.removeAttribute(w)),h.addEventListener(m,A,k);break e}w in h?h[w]=A:A===!0?h.setAttribute(w,""):vt(h,w,A)}}}function Ea(h,m,w){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ur("error",h),Ur("load",h);var A=!1,k=!1,U;for(U in w)if(w.hasOwnProperty(U)){var ie=w[U];if(ie!=null)switch(U){case"src":A=!0;break;case"srcSet":k=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,m));default:Vi(h,m,U,ie,w,null)}}k&&Vi(h,m,"srcSet",w.srcSet,w,null),A&&Vi(h,m,"src",w.src,w,null);return;case"input":Ur("invalid",h);var he=U=ie=k=null,Re=null,rt=null;for(A in w)if(w.hasOwnProperty(A)){var kt=w[A];if(kt!=null)switch(A){case"name":k=kt;break;case"type":ie=kt;break;case"checked":Re=kt;break;case"defaultChecked":rt=kt;break;case"value":U=kt;break;case"defaultValue":he=kt;break;case"children":case"dangerouslySetInnerHTML":if(kt!=null)throw Error(r(137,m));break;default:Vi(h,m,A,kt,w,null)}}Wr(h,U,he,Re,rt,ie,k,!1),Jn(h);return;case"select":Ur("invalid",h),A=ie=U=null;for(k in w)if(w.hasOwnProperty(k)&&(he=w[k],he!=null))switch(k){case"value":U=he;break;case"defaultValue":ie=he;break;case"multiple":A=he;default:Vi(h,m,k,he,w,null)}m=U,w=ie,h.multiple=!!A,m!=null?Sr(h,!!A,m,!1):w!=null&&Sr(h,!!A,w,!0);return;case"textarea":Ur("invalid",h),U=k=A=null;for(ie in w)if(w.hasOwnProperty(ie)&&(he=w[ie],he!=null))switch(ie){case"value":A=he;break;case"defaultValue":k=he;break;case"children":U=he;break;case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(91));break;default:Vi(h,m,ie,he,w,null)}ad(h,A,k,U),Jn(h);return;case"option":for(Re in w)if(w.hasOwnProperty(Re)&&(A=w[Re],A!=null))switch(Re){case"selected":h.selected=A&&typeof A!="function"&&typeof A!="symbol";break;default:Vi(h,m,Re,A,w,null)}return;case"dialog":Ur("beforetoggle",h),Ur("toggle",h),Ur("cancel",h),Ur("close",h);break;case"iframe":case"object":Ur("load",h);break;case"video":case"audio":for(A=0;A<sw.length;A++)Ur(sw[A],h);break;case"image":Ur("error",h),Ur("load",h);break;case"details":Ur("toggle",h);break;case"embed":case"source":case"link":Ur("error",h),Ur("load",h);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(rt in w)if(w.hasOwnProperty(rt)&&(A=w[rt],A!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,m));default:Vi(h,m,rt,A,w,null)}return;default:if(Pf(m)){for(kt in w)w.hasOwnProperty(kt)&&(A=w[kt],A!==void 0&&kk(h,m,kt,A,w,void 0));return}}for(he in w)w.hasOwnProperty(he)&&(A=w[he],A!=null&&Vi(h,m,he,A,w,null))}function Kae(h,m,w,A){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var k=null,U=null,ie=null,he=null,Re=null,rt=null,kt=null;for(gt in w){var Pt=w[gt];if(w.hasOwnProperty(gt)&&Pt!=null)switch(gt){case"checked":break;case"value":break;case"defaultValue":Re=Pt;default:A.hasOwnProperty(gt)||Vi(h,m,gt,null,A,Pt)}}for(var ht in A){var gt=A[ht];if(Pt=w[ht],A.hasOwnProperty(ht)&&(gt!=null||Pt!=null))switch(ht){case"type":U=gt;break;case"name":k=gt;break;case"checked":rt=gt;break;case"defaultChecked":kt=gt;break;case"value":ie=gt;break;case"defaultValue":he=gt;break;case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(r(137,m));break;default:gt!==Pt&&Vi(h,m,ht,gt,A,Pt)}}Mn(h,ie,he,Re,rt,kt,U,k);return;case"select":gt=ie=he=ht=null;for(U in w)if(Re=w[U],w.hasOwnProperty(U)&&Re!=null)switch(U){case"value":break;case"multiple":gt=Re;default:A.hasOwnProperty(U)||Vi(h,m,U,null,A,Re)}for(k in A)if(U=A[k],Re=w[k],A.hasOwnProperty(k)&&(U!=null||Re!=null))switch(k){case"value":ht=U;break;case"defaultValue":he=U;break;case"multiple":ie=U;default:U!==Re&&Vi(h,m,k,U,A,Re)}m=he,w=ie,A=gt,ht!=null?Sr(h,!!w,ht,!1):!!A!=!!w&&(m!=null?Sr(h,!!w,m,!0):Sr(h,!!w,w?[]:"",!1));return;case"textarea":gt=ht=null;for(he in w)if(k=w[he],w.hasOwnProperty(he)&&k!=null&&!A.hasOwnProperty(he))switch(he){case"value":break;case"children":break;default:Vi(h,m,he,null,A,k)}for(ie in A)if(k=A[ie],U=w[ie],A.hasOwnProperty(ie)&&(k!=null||U!=null))switch(ie){case"value":ht=k;break;case"defaultValue":gt=k;break;case"children":break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(r(91));break;default:k!==U&&Vi(h,m,ie,k,A,U)}_i(h,ht,gt);return;case"option":for(var sr in w)if(ht=w[sr],w.hasOwnProperty(sr)&&ht!=null&&!A.hasOwnProperty(sr))switch(sr){case"selected":h.selected=!1;break;default:Vi(h,m,sr,null,A,ht)}for(Re in A)if(ht=A[Re],gt=w[Re],A.hasOwnProperty(Re)&&ht!==gt&&(ht!=null||gt!=null))switch(Re){case"selected":h.selected=ht&&typeof ht!="function"&&typeof ht!="symbol";break;default:Vi(h,m,Re,ht,A,gt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xn in w)ht=w[Xn],w.hasOwnProperty(Xn)&&ht!=null&&!A.hasOwnProperty(Xn)&&Vi(h,m,Xn,null,A,ht);for(rt in A)if(ht=A[rt],gt=w[rt],A.hasOwnProperty(rt)&&ht!==gt&&(ht!=null||gt!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":if(ht!=null)throw Error(r(137,m));break;default:Vi(h,m,rt,ht,A,gt)}return;default:if(Pf(m)){for(var Gi in w)ht=w[Gi],w.hasOwnProperty(Gi)&&ht!==void 0&&!A.hasOwnProperty(Gi)&&kk(h,m,Gi,void 0,A,ht);for(kt in A)ht=A[kt],gt=w[kt],!A.hasOwnProperty(kt)||ht===gt||ht===void 0&&gt===void 0||kk(h,m,kt,ht,A,gt);return}}for(var Je in w)ht=w[Je],w.hasOwnProperty(Je)&&ht!=null&&!A.hasOwnProperty(Je)&&Vi(h,m,Je,null,A,ht);for(Pt in A)ht=A[Pt],gt=w[Pt],!A.hasOwnProperty(Pt)||ht===gt||ht==null&&gt==null||Vi(h,m,Pt,ht,A,gt)}var Ok=null,Bk=null;function RA(h){return h.nodeType===9?h:h.ownerDocument}function J6(h){switch(h){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Z6(h,m){if(h===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return h===1&&m==="foreignObject"?0:h}function $k(h,m){return h==="textarea"||h==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var Lk=null;function Yae(){var h=window.event;return h&&h.type==="popstate"?h===Lk?!1:(Lk=h,!0):(Lk=null,!1)}var Q6=typeof setTimeout=="function"?setTimeout:void 0,Jae=typeof clearTimeout=="function"?clearTimeout:void 0,eH=typeof Promise=="function"?Promise:void 0,Zae=typeof queueMicrotask=="function"?queueMicrotask:typeof eH<"u"?function(h){return eH.resolve(null).then(h).catch(Qae)}:Q6;function Qae(h){setTimeout(function(){throw h})}function Vm(h){return h==="head"}function tH(h,m){var w=m,A=0,k=0;do{var U=w.nextSibling;if(h.removeChild(w),U&&U.nodeType===8)if(w=U.data,w==="/$"){if(0<A&&8>A){w=A;var ie=h.ownerDocument;if(w&1&&aw(ie.documentElement),w&2&&aw(ie.body),w&4)for(w=ie.head,aw(w),ie=w.firstChild;ie;){var he=ie.nextSibling,Re=ie.nodeName;ie[Fs]||Re==="SCRIPT"||Re==="STYLE"||Re==="LINK"&&ie.rel.toLowerCase()==="stylesheet"||w.removeChild(ie),ie=he}}if(k===0){h.removeChild(U),mw(m);return}k--}else w==="$"||w==="$?"||w==="$!"?k++:A=w.charCodeAt(0)-48;else A=0;w=U}while(w);mw(m)}function Fk(h){var m=h.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var w=m;switch(m=m.nextSibling,w.nodeName){case"HTML":case"HEAD":case"BODY":Fk(w),ci(w);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(w.rel.toLowerCase()==="stylesheet")continue}h.removeChild(w)}}function ele(h,m,w,A){for(;h.nodeType===1;){var k=w;if(h.nodeName.toLowerCase()!==m.toLowerCase()){if(!A&&(h.nodeName!=="INPUT"||h.type!=="hidden"))break}else if(A){if(!h[Fs])switch(m){case"meta":if(!h.hasAttribute("itemprop"))break;return h;case"link":if(U=h.getAttribute("rel"),U==="stylesheet"&&h.hasAttribute("data-precedence"))break;if(U!==k.rel||h.getAttribute("href")!==(k.href==null||k.href===""?null:k.href)||h.getAttribute("crossorigin")!==(k.crossOrigin==null?null:k.crossOrigin)||h.getAttribute("title")!==(k.title==null?null:k.title))break;return h;case"style":if(h.hasAttribute("data-precedence"))break;return h;case"script":if(U=h.getAttribute("src"),(U!==(k.src==null?null:k.src)||h.getAttribute("type")!==(k.type==null?null:k.type)||h.getAttribute("crossorigin")!==(k.crossOrigin==null?null:k.crossOrigin))&&U&&h.hasAttribute("async")&&!h.hasAttribute("itemprop"))break;return h;default:return h}}else if(m==="input"&&h.type==="hidden"){var U=k.name==null?null:""+k.name;if(k.type==="hidden"&&h.getAttribute("name")===U)return h}else return h;if(h=Bd(h.nextSibling),h===null)break}return null}function tle(h,m,w){if(m==="")return null;for(;h.nodeType!==3;)if((h.nodeType!==1||h.nodeName!=="INPUT"||h.type!=="hidden")&&!w||(h=Bd(h.nextSibling),h===null))return null;return h}function Pk(h){return h.data==="$!"||h.data==="$?"&&h.ownerDocument.readyState==="complete"}function nle(h,m){var w=h.ownerDocument;if(h.data!=="$?"||w.readyState==="complete")m();else{var A=function(){m(),w.removeEventListener("DOMContentLoaded",A)};w.addEventListener("DOMContentLoaded",A),h._reactRetry=A}}function Bd(h){for(;h!=null;h=h.nextSibling){var m=h.nodeType;if(m===1||m===3)break;if(m===8){if(m=h.data,m==="$"||m==="$!"||m==="$?"||m==="F!"||m==="F")break;if(m==="/$")return null}}return h}var Uk=null;function nH(h){h=h.previousSibling;for(var m=0;h;){if(h.nodeType===8){var w=h.data;if(w==="$"||w==="$!"||w==="$?"){if(m===0)return h;m--}else w==="/$"&&m++}h=h.previousSibling}return null}function rH(h,m,w){switch(m=RA(w),h){case"html":if(h=m.documentElement,!h)throw Error(r(452));return h;case"head":if(h=m.head,!h)throw Error(r(453));return h;case"body":if(h=m.body,!h)throw Error(r(454));return h;default:throw Error(r(451))}}function aw(h){for(var m=h.attributes;m.length;)h.removeAttributeNode(m[0]);ci(h)}var Mu=new Map,iH=new Set;function NA(h){return typeof h.getRootNode=="function"?h.getRootNode():h.nodeType===9?h:h.ownerDocument}var dp=J.d;J.d={f:rle,r:ile,D:sle,C:ole,L:ale,m:lle,X:ule,S:cle,M:dle};function rle(){var h=dp.f(),m=Au();return h||m}function ile(h){var m=me(h);m!==null&&m.tag===5&&m.type==="form"?cA(m):dp.r(h)}var zb=typeof document>"u"?null:document;function sH(h,m,w){var A=zb;if(A&&typeof m=="string"&&m){var k=Zn(m);k='link[rel="'+h+'"][href="'+k+'"]',typeof w=="string"&&(k+='[crossorigin="'+w+'"]'),iH.has(k)||(iH.add(k),h={rel:h,crossOrigin:w,href:m},A.querySelector(k)===null&&(m=A.createElement("link"),Ea(m,"link",h),ct(m),A.head.appendChild(m)))}}function sle(h){dp.D(h),sH("dns-prefetch",h,null)}function ole(h,m){dp.C(h,m),sH("preconnect",h,m)}function ale(h,m,w){dp.L(h,m,w);var A=zb;if(A&&h&&m){var k='link[rel="preload"][as="'+Zn(m)+'"]';m==="image"&&w&&w.imageSrcSet?(k+='[imagesrcset="'+Zn(w.imageSrcSet)+'"]',typeof w.imageSizes=="string"&&(k+='[imagesizes="'+Zn(w.imageSizes)+'"]')):k+='[href="'+Zn(h)+'"]';var U=k;switch(m){case"style":U=Hb(h);break;case"script":U=Vb(h)}Mu.has(U)||(h=u({rel:"preload",href:m==="image"&&w&&w.imageSrcSet?void 0:h,as:m},w),Mu.set(U,h),A.querySelector(k)!==null||m==="style"&&A.querySelector(lw(U))||m==="script"&&A.querySelector(cw(U))||(m=A.createElement("link"),Ea(m,"link",h),ct(m),A.head.appendChild(m)))}}function lle(h,m){dp.m(h,m);var w=zb;if(w&&h){var A=m&&typeof m.as=="string"?m.as:"script",k='link[rel="modulepreload"][as="'+Zn(A)+'"][href="'+Zn(h)+'"]',U=k;switch(A){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":U=Vb(h)}if(!Mu.has(U)&&(h=u({rel:"modulepreload",href:h},m),Mu.set(U,h),w.querySelector(k)===null)){switch(A){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(w.querySelector(cw(U)))return}A=w.createElement("link"),Ea(A,"link",h),ct(A),w.head.appendChild(A)}}}function cle(h,m,w){dp.S(h,m,w);var A=zb;if(A&&h){var k=nt(A).hoistableStyles,U=Hb(h);m=m||"default";var ie=k.get(U);if(!ie){var he={loading:0,preload:null};if(ie=A.querySelector(lw(U)))he.loading=5;else{h=u({rel:"stylesheet",href:h,"data-precedence":m},w),(w=Mu.get(U))&&zk(h,w);var Re=ie=A.createElement("link");ct(Re),Ea(Re,"link",h),Re._p=new Promise(function(rt,kt){Re.onload=rt,Re.onerror=kt}),Re.addEventListener("load",function(){he.loading|=1}),Re.addEventListener("error",function(){he.loading|=2}),he.loading|=4,IA(ie,m,A)}ie={type:"stylesheet",instance:ie,count:1,state:he},k.set(U,ie)}}}function ule(h,m){dp.X(h,m);var w=zb;if(w&&h){var A=nt(w).hoistableScripts,k=Vb(h),U=A.get(k);U||(U=w.querySelector(cw(k)),U||(h=u({src:h,async:!0},m),(m=Mu.get(k))&&Hk(h,m),U=w.createElement("script"),ct(U),Ea(U,"link",h),w.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},A.set(k,U))}}function dle(h,m){dp.M(h,m);var w=zb;if(w&&h){var A=nt(w).hoistableScripts,k=Vb(h),U=A.get(k);U||(U=w.querySelector(cw(k)),U||(h=u({src:h,async:!0,type:"module"},m),(m=Mu.get(k))&&Hk(h,m),U=w.createElement("script"),ct(U),Ea(U,"link",h),w.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},A.set(k,U))}}function oH(h,m,w,A){var k=(k=be.current)?NA(k):null;if(!k)throw Error(r(446));switch(h){case"meta":case"title":return null;case"style":return typeof w.precedence=="string"&&typeof w.href=="string"?(m=Hb(w.href),w=nt(k).hoistableStyles,A=w.get(m),A||(A={type:"style",instance:null,count:0,state:null},w.set(m,A)),A):{type:"void",instance:null,count:0,state:null};case"link":if(w.rel==="stylesheet"&&typeof w.href=="string"&&typeof w.precedence=="string"){h=Hb(w.href);var U=nt(k).hoistableStyles,ie=U.get(h);if(ie||(k=k.ownerDocument||k,ie={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},U.set(h,ie),(U=k.querySelector(lw(h)))&&!U._p&&(ie.instance=U,ie.state.loading=5),Mu.has(h)||(w={rel:"preload",as:"style",href:w.href,crossOrigin:w.crossOrigin,integrity:w.integrity,media:w.media,hrefLang:w.hrefLang,referrerPolicy:w.referrerPolicy},Mu.set(h,w),U||hle(k,h,w,ie.state))),m&&A===null)throw Error(r(528,""));return ie}if(m&&A!==null)throw Error(r(529,""));return null;case"script":return m=w.async,w=w.src,typeof w=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=Vb(w),w=nt(k).hoistableScripts,A=w.get(m),A||(A={type:"script",instance:null,count:0,state:null},w.set(m,A)),A):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,h))}}function Hb(h){return'href="'+Zn(h)+'"'}function lw(h){return'link[rel="stylesheet"]['+h+"]"}function aH(h){return u({},h,{"data-precedence":h.precedence,precedence:null})}function hle(h,m,w,A){h.querySelector('link[rel="preload"][as="style"]['+m+"]")?A.loading=1:(m=h.createElement("link"),A.preload=m,m.addEventListener("load",function(){return A.loading|=1}),m.addEventListener("error",function(){return A.loading|=2}),Ea(m,"link",w),ct(m),h.head.appendChild(m))}function Vb(h){return'[src="'+Zn(h)+'"]'}function cw(h){return"script[async]"+h}function lH(h,m,w){if(m.count++,m.instance===null)switch(m.type){case"style":var A=h.querySelector('style[data-href~="'+Zn(w.href)+'"]');if(A)return m.instance=A,ct(A),A;var k=u({},w,{"data-href":w.href,"data-precedence":w.precedence,href:null,precedence:null});return A=(h.ownerDocument||h).createElement("style"),ct(A),Ea(A,"style",k),IA(A,w.precedence,h),m.instance=A;case"stylesheet":k=Hb(w.href);var U=h.querySelector(lw(k));if(U)return m.state.loading|=4,m.instance=U,ct(U),U;A=aH(w),(k=Mu.get(k))&&zk(A,k),U=(h.ownerDocument||h).createElement("link"),ct(U);var ie=U;return ie._p=new Promise(function(he,Re){ie.onload=he,ie.onerror=Re}),Ea(U,"link",A),m.state.loading|=4,IA(U,w.precedence,h),m.instance=U;case"script":return U=Vb(w.src),(k=h.querySelector(cw(U)))?(m.instance=k,ct(k),k):(A=w,(k=Mu.get(U))&&(A=u({},w),Hk(A,k)),h=h.ownerDocument||h,k=h.createElement("script"),ct(k),Ea(k,"link",A),h.head.appendChild(k),m.instance=k);case"void":return null;default:throw Error(r(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(A=m.instance,m.state.loading|=4,IA(A,w.precedence,h));return m.instance}function IA(h,m,w){for(var A=w.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),k=A.length?A[A.length-1]:null,U=k,ie=0;ie<A.length;ie++){var he=A[ie];if(he.dataset.precedence===m)U=he;else if(U!==k)break}U?U.parentNode.insertBefore(h,U.nextSibling):(m=w.nodeType===9?w.head:w,m.insertBefore(h,m.firstChild))}function zk(h,m){h.crossOrigin==null&&(h.crossOrigin=m.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=m.referrerPolicy),h.title==null&&(h.title=m.title)}function Hk(h,m){h.crossOrigin==null&&(h.crossOrigin=m.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=m.referrerPolicy),h.integrity==null&&(h.integrity=m.integrity)}var DA=null;function cH(h,m,w){if(DA===null){var A=new Map,k=DA=new Map;k.set(w,A)}else k=DA,A=k.get(w),A||(A=new Map,k.set(w,A));if(A.has(h))return A;for(A.set(h,null),w=w.getElementsByTagName(h),k=0;k<w.length;k++){var U=w[k];if(!(U[Fs]||U[pi]||h==="link"&&U.getAttribute("rel")==="stylesheet")&&U.namespaceURI!=="http://www.w3.org/2000/svg"){var ie=U.getAttribute(m)||"";ie=h+ie;var he=A.get(ie);he?he.push(U):A.set(ie,[U])}}return A}function uH(h,m,w){h=h.ownerDocument||h,h.head.insertBefore(w,m==="title"?h.querySelector("head > title"):null)}function fle(h,m,w){if(w===1||m.itemProp!=null)return!1;switch(h){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return h=m.disabled,typeof m.precedence=="string"&&h==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function dH(h){return!(h.type==="stylesheet"&&(h.state.loading&3)===0)}var uw=null;function ple(){}function mle(h,m,w){if(uw===null)throw Error(r(475));var A=uw;if(m.type==="stylesheet"&&(typeof w.media!="string"||matchMedia(w.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var k=Hb(w.href),U=h.querySelector(lw(k));if(U){h=U._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(A.count++,A=kA.bind(A),h.then(A,A)),m.state.loading|=4,m.instance=U,ct(U);return}U=h.ownerDocument||h,w=aH(w),(k=Mu.get(k))&&zk(w,k),U=U.createElement("link"),ct(U);var ie=U;ie._p=new Promise(function(he,Re){ie.onload=he,ie.onerror=Re}),Ea(U,"link",w),m.instance=U}A.stylesheets===null&&(A.stylesheets=new Map),A.stylesheets.set(m,h),(h=m.state.preload)&&(m.state.loading&3)===0&&(A.count++,m=kA.bind(A),h.addEventListener("load",m),h.addEventListener("error",m))}}function gle(){if(uw===null)throw Error(r(475));var h=uw;return h.stylesheets&&h.count===0&&Vk(h,h.stylesheets),0<h.count?function(m){var w=setTimeout(function(){if(h.stylesheets&&Vk(h,h.stylesheets),h.unsuspend){var A=h.unsuspend;h.unsuspend=null,A()}},6e4);return h.unsuspend=m,function(){h.unsuspend=null,clearTimeout(w)}}:null}function kA(){if(this.count--,this.count===0){if(this.stylesheets)Vk(this,this.stylesheets);else if(this.unsuspend){var h=this.unsuspend;this.unsuspend=null,h()}}}var OA=null;function Vk(h,m){h.stylesheets=null,h.unsuspend!==null&&(h.count++,OA=new Map,m.forEach(yle,h),OA=null,kA.call(h))}function yle(h,m){if(!(m.state.loading&4)){var w=OA.get(h);if(w)var A=w.get(null);else{w=new Map,OA.set(h,w);for(var k=h.querySelectorAll("link[data-precedence],style[data-precedence]"),U=0;U<k.length;U++){var ie=k[U];(ie.nodeName==="LINK"||ie.getAttribute("media")!=="not all")&&(w.set(ie.dataset.precedence,ie),A=ie)}A&&w.set(null,A)}k=m.instance,ie=k.getAttribute("data-precedence"),U=w.get(ie)||A,U===A&&w.set(null,k),w.set(ie,k),this.count++,A=kA.bind(this),k.addEventListener("load",A),k.addEventListener("error",A),U?U.parentNode.insertBefore(k,U.nextSibling):(h=h.nodeType===9?h.head:h,h.insertBefore(k,h.firstChild)),m.state.loading|=4}}var dw={$$typeof:E,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function vle(h,m,w,A,k,U,ie,he){this.tag=1,this.containerInfo=h,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Lt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lt(0),this.hiddenUpdates=Lt(null),this.identifierPrefix=A,this.onUncaughtError=k,this.onCaughtError=U,this.onRecoverableError=ie,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=he,this.incompleteTransitions=new Map}function hH(h,m,w,A,k,U,ie,he,Re,rt,kt,Pt){return h=new vle(h,m,w,ie,he,Re,rt,Pt),m=1,U===!0&&(m|=24),U=Va(3,null,null,m),h.current=U,U.stateNode=h,m=ub(),m.refCount++,h.pooledCache=m,m.refCount++,U.memoizedState={element:A,isDehydrated:w,cache:m},BS(U),h}function fH(h){return h?(h=Ch,h):Ch}function pH(h,m,w,A,k,U){k=fH(k),A.context===null?A.context=k:A.pendingContext=k,A=mu(m),A.payload={element:w},U=U===void 0?null:U,U!==null&&(A.callback=U),w=Ed(h,A,m),w!==null&&(Ca(w,h,m),Xf(w,h,m))}function mH(h,m){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var w=h.retryLane;h.retryLane=w!==0&&w<m?w:m}}function Gk(h,m){mH(h,m),(h=h.alternate)&&mH(h,m)}function gH(h){if(h.tag===13){var m=xd(h,67108864);m!==null&&Ca(m,h,67108864),Gk(h,67108864)}}var BA=!0;function ble(h,m,w,A){var k=z.T;z.T=null;var U=J.p;try{J.p=2,Wk(h,m,w,A)}finally{J.p=U,z.T=k}}function xle(h,m,w,A){var k=z.T;z.T=null;var U=J.p;try{J.p=8,Wk(h,m,w,A)}finally{J.p=U,z.T=k}}function Wk(h,m,w,A){if(BA){var k=jk(A);if(k===null)Dk(h,m,A,$A,w),vH(h,A);else if(wle(k,h,m,w,A))A.stopPropagation();else if(vH(h,A),m&4&&-1<Sle.indexOf(h)){for(;k!==null;){var U=me(k);if(U!==null)switch(U.tag){case 3:if(U=U.stateNode,U.current.memoizedState.isDehydrated){var ie=on(U.pendingLanes);if(ie!==0){var he=U;for(he.pendingLanes|=2,he.entangledLanes|=2;ie;){var Re=1<<31-Ft(ie);he.entanglements[1]|=Re,ie&=~Re}qh(U),(di&6)===0&&(Yo=je()+500,iw(0))}}break;case 13:he=xd(U,2),he!==null&&Ca(he,U,2),Au(),Gk(U,2)}if(U=jk(A),U===null&&Dk(h,m,A,$A,w),U===k)break;k=U}k!==null&&A.stopPropagation()}else Dk(h,m,A,null,w)}}function jk(h){return h=um(h),Xk(h)}var $A=null;function Xk(h){if($A=null,h=oe(h),h!==null){var m=s(h);if(m===null)h=null;else{var w=m.tag;if(w===13){if(h=o(m),h!==null)return h;h=null}else if(w===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;h=null}else m!==h&&(h=null)}}return $A=h,null}function yH(h){switch(h){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lt()){case st:return 2;case at:return 8;case Ut:case mt:return 32;case ce:return 268435456;default:return 32}default:return 32}}var qk=!1,Gm=null,Wm=null,jm=null,hw=new Map,fw=new Map,Xm=[],Sle="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vH(h,m){switch(h){case"focusin":case"focusout":Gm=null;break;case"dragenter":case"dragleave":Wm=null;break;case"mouseover":case"mouseout":jm=null;break;case"pointerover":case"pointerout":hw.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":fw.delete(m.pointerId)}}function pw(h,m,w,A,k,U){return h===null||h.nativeEvent!==U?(h={blockedOn:m,domEventName:w,eventSystemFlags:A,nativeEvent:U,targetContainers:[k]},m!==null&&(m=me(m),m!==null&&gH(m)),h):(h.eventSystemFlags|=A,m=h.targetContainers,k!==null&&m.indexOf(k)===-1&&m.push(k),h)}function wle(h,m,w,A,k){switch(m){case"focusin":return Gm=pw(Gm,h,m,w,A,k),!0;case"dragenter":return Wm=pw(Wm,h,m,w,A,k),!0;case"mouseover":return jm=pw(jm,h,m,w,A,k),!0;case"pointerover":var U=k.pointerId;return hw.set(U,pw(hw.get(U)||null,h,m,w,A,k)),!0;case"gotpointercapture":return U=k.pointerId,fw.set(U,pw(fw.get(U)||null,h,m,w,A,k)),!0}return!1}function bH(h){var m=oe(h.target);if(m!==null){var w=s(m);if(w!==null){if(m=w.tag,m===13){if(m=o(w),m!==null){h.blockedOn=m,to(h.priority,function(){if(w.tag===13){var A=vs();A=In(A);var k=xd(w,A);k!==null&&Ca(k,w,A),Gk(w,A)}});return}}else if(m===3&&w.stateNode.current.memoizedState.isDehydrated){h.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}h.blockedOn=null}function LA(h){if(h.blockedOn!==null)return!1;for(var m=h.targetContainers;0<m.length;){var w=jk(h.nativeEvent);if(w===null){w=h.nativeEvent;var A=new w.constructor(w.type,w);cm=A,w.target.dispatchEvent(A),cm=null}else return m=me(w),m!==null&&gH(m),h.blockedOn=w,!1;m.shift()}return!0}function xH(h,m,w){LA(h)&&w.delete(m)}function _le(){qk=!1,Gm!==null&&LA(Gm)&&(Gm=null),Wm!==null&&LA(Wm)&&(Wm=null),jm!==null&&LA(jm)&&(jm=null),hw.forEach(xH),fw.forEach(xH)}function FA(h,m){h.blockedOn===m&&(h.blockedOn=null,qk||(qk=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,_le)))}var PA=null;function SH(h){PA!==h&&(PA=h,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){PA===h&&(PA=null);for(var m=0;m<h.length;m+=3){var w=h[m],A=h[m+1],k=h[m+2];if(typeof A!="function"){if(Xk(A||w)===null)continue;break}var U=me(w);U!==null&&(h.splice(m,3),m-=3,JS(U,{pending:!0,data:k,method:w.method,action:A},A,k))}}))}function mw(h){function m(Re){return FA(Re,h)}Gm!==null&&FA(Gm,h),Wm!==null&&FA(Wm,h),jm!==null&&FA(jm,h),hw.forEach(m),fw.forEach(m);for(var w=0;w<Xm.length;w++){var A=Xm[w];A.blockedOn===h&&(A.blockedOn=null)}for(;0<Xm.length&&(w=Xm[0],w.blockedOn===null);)bH(w),w.blockedOn===null&&Xm.shift();if(w=(h.ownerDocument||h).$$reactFormReplay,w!=null)for(A=0;A<w.length;A+=3){var k=w[A],U=w[A+1],ie=k[Si]||null;if(typeof U=="function")ie||SH(w);else if(ie){var he=null;if(U&&U.hasAttribute("formAction")){if(k=U,ie=U[Si]||null)he=ie.formAction;else if(Xk(k)!==null)continue}else he=ie.action;typeof he=="function"?w[A+1]=he:(w.splice(A,3),A-=3),SH(w)}}}function Kk(h){this._internalRoot=h}UA.prototype.render=Kk.prototype.render=function(h){var m=this._internalRoot;if(m===null)throw Error(r(409));var w=m.current,A=vs();pH(w,A,h,m,null,null)},UA.prototype.unmount=Kk.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var m=h.containerInfo;pH(h.current,2,null,h,null,null),Au(),m[Ri]=null}};function UA(h){this._internalRoot=h}UA.prototype.unstable_scheduleHydration=function(h){if(h){var m=lr();h={blockedOn:null,target:h,priority:m};for(var w=0;w<Xm.length&&m!==0&&m<Xm[w].priority;w++);Xm.splice(w,0,h),w===0&&bH(h)}};var wH=e.version;if(wH!=="19.1.0")throw Error(r(527,wH,"19.1.0"));J.findDOMNode=function(h){var m=h._reactInternals;if(m===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=l(m),h=h!==null?c(h):null,h=h===null?null:h.stateNode,h};var Cle={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zA=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zA.isDisabled&&zA.supportsFiber)try{qe=zA.inject(Cle),ot=zA}catch{}}return vw.createRoot=function(h,m){if(!i(h))throw Error(r(299));var w=!1,A="",k=H0,U=Tb,ie=SA,he=null;return m!=null&&(m.unstable_strictMode===!0&&(w=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onUncaughtError!==void 0&&(k=m.onUncaughtError),m.onCaughtError!==void 0&&(U=m.onCaughtError),m.onRecoverableError!==void 0&&(ie=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(he=m.unstable_transitionCallbacks)),m=hH(h,1,!1,null,null,w,A,k,U,ie,he,null),h[Ri]=m.current,Ik(h),new Kk(m)},vw.hydrateRoot=function(h,m,w){if(!i(h))throw Error(r(299));var A=!1,k="",U=H0,ie=Tb,he=SA,Re=null,rt=null;return w!=null&&(w.unstable_strictMode===!0&&(A=!0),w.identifierPrefix!==void 0&&(k=w.identifierPrefix),w.onUncaughtError!==void 0&&(U=w.onUncaughtError),w.onCaughtError!==void 0&&(ie=w.onCaughtError),w.onRecoverableError!==void 0&&(he=w.onRecoverableError),w.unstable_transitionCallbacks!==void 0&&(Re=w.unstable_transitionCallbacks),w.formState!==void 0&&(rt=w.formState)),m=hH(h,1,!0,m,w??null,A,k,U,ie,he,Re,rt),m.context=fH(null),w=m.current,A=vs(),A=In(A),k=mu(A),k.callback=null,Ed(w,k,A),w=A,m.current.lanes=w,en(m,w),qh(m),h[Ri]=m.current,Ik(h),new UA(m)},vw.version="19.1.0",vw}var kH;function $le(){if(kH)return Zk.exports;kH=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Zk.exports=Ble(),Zk.exports}var qX=$le();const Lle=({onComplete:n})=>{const[e,t]=F.useState(""),r="<Loading.../>";return F.useEffect(()=>{let i=0;const s=setInterval(()=>{t(r.substring(0,i)),i++,i>r.length&&(clearInterval(s),setTimeout(()=>{n()},1e3))},100);return()=>clearInterval(s)},[n]),V.jsxs("div",{className:"fixed inset-0 z-50 bg-black text-gray-100 flex flex-col items-center justify-center",children:[V.jsxs("div",{className:"mb-4 text-4xl font-mono font-bold",children:[e," ",V.jsx("span",{className:"animate-blink ml-1",children:" | "})]}),V.jsx("div",{className:"w-[200px] h-[2px] bg-gray-800 rounded relative overflow-hidden",children:V.jsx("div",{className:"w-[40%] h-full bg-blue-500 shadow-[0_0_15px_#3b82f6] animate-loading-bar",children:" "})})]})},Fle=({menuOpen:n,setMenuOpen:e})=>(F.useEffect(()=>{document.body.style.overflowY=n?"hidden":""},[n]),V.jsx("nav",{className:"fixed top-0 w-full z-40 bg-[rgba(10, 10, 10, 0.8)] backdrop-blur-lg border-b border-white/10 shadow-lg",children:V.jsx("div",{className:"max-w-5xl mx-auto px-4",children:V.jsxs("div",{className:"flex justify-between items-center h-16",children:[V.jsxs("a",{href:"#home",className:"font-mono text-xl font-bold text-white",children:["dennis",V.jsx("span",{className:"text-blue-500",children:".tech"})]}),V.jsx("div",{className:"w-7 h-5 relative cursor-pointer z-40 md:hidden",onClick:()=>e(t=>!t),children:""}),V.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[V.jsxs("a",{href:"#home",className:"text-gray-300 hove:text-white transition-colors",children:[" ","Home"]}),V.jsx("a",{href:"#about",className:"text-gray-300 hove:text-white transition-colors",children:"About"}),V.jsx("a",{href:"#work",className:"text-gray-300 hove:text-white transition-colors",children:"Work Experience"}),V.jsx("a",{href:"#projects",className:"text-gray-300 hove:text-white transition-colors",children:"Projects"}),V.jsx("a",{href:"#contact",className:"text-gray-300 hove:text-white transition-colors",children:"Contact"})]})]})})})),Ple=({menuOpen:n,setMenuOpen:e})=>V.jsxs("div",{className:`fixed top-0 left-0 w-full bg-[rgba(10, 10, 10, 0.95)] backdrop-blur-lg z-40 flex flex-col items-center justify-center transition-all duration-300 ease-in-out
                       ${n?"h-screen opacity-100 pointer-events-auto":"h-0 opacity-0 pointer-events-none"}`,children:[V.jsx("button",{onClick:()=>e(!1),className:"absolute top-6 right-6 text-white text-3xl focus:outline-none cursor-pointer","aria-label":"Close Menu",children:""}),V.jsxs("div",{className:"flex flex-col items-center space-y-8 text-center",children:[V.jsx("a",{href:"#home",className:`text-2xl font-semibold text-white my-4 hover:text-blue-400 transition-transform duration-300
                                ${n?"opacity-100 translate-y-0":"opacity-0 translate-y-5"}`,onClick:()=>e(!1),children:"Home"}),V.jsx("a",{href:"#about",className:`text-2xl font-semibold text-white my-4 hover:text-blue-400 transition-transform duration-300
                                ${n?"opacity-100 translate-y-0":"opacity-0 translate-y-5"}`,onClick:()=>e(!1),children:"About"}),V.jsx("a",{href:"#projects",className:`text-2xl font-semibold text-white my-4 hover:text-blue-400 transition-transform duration-300
                                ${n?"opacity-100 translate-y-0":"opacity-0 translate-y-5"}`,onClick:()=>e(!1),children:"Projects"}),V.jsx("a",{href:"#contact",className:`text-2xl font-semibold text-white my-4 hover:text-blue-400 transition-transform duration-300
                                ${n?"opacity-100 translate-y-0":"opacity-0 translate-y-5"}`,onClick:()=>e(!1),children:"Contact"})]})]}),wC=({children:n})=>{const e=F.useRef(null);return F.useEffect(()=>{const t=new IntersectionObserver(([r])=>{r.isIntersecting&&e.current.classList.add("visible")},{threshold:.2,rootMargin:"0px 0px -50px 0px"});return e.current&&t.observe(e.current),()=>t.disconnect()}),V.jsx("div",{ref:e,className:"reveal",children:n})},Ule=()=>V.jsx("section",{id:"home",className:"min-h-screen flex items-center justify-center relative",children:V.jsx(wC,{children:V.jsxs("div",{className:"text-center z-10 px-4 max-w-4xl mx-auto",children:[V.jsx("h1",{className:"text-5xl md:text-7xl font-bold mb-6 bg-gradient-to-r from-green-500 to-blue-500 bg-clip-text text-transparent leading-tight",children:"Hello, I am Dennis Wong"}),V.jsx("p",{className:"text-xl md:text-2xl md:font-bold text-white mb-8 max-w-2xl mx-auto",children:"Full Stack Developer & Software Engineer"}),V.jsxs("div",{className:"flex justify-center space-x-4",children:[V.jsx("a",{href:"#projects",className:`bg-blue-600 text-white py-3 px-6 rounded font-semibold transition relative
                                overflow-hidden hover:-translate-y-0.5 hover:shadow-[0_0_15px_rgba(59, 130, 246, 0.4)]`,children:"View Projects"}),V.jsx("a",{href:"#contacts",className:`bg-black-500 border-blue-500/50 text-blue-500 py-3 px-6 rounded font-semibold transition-all 
                                duration-200 hover:-translate-y-0.5 hover:shadow-[0_0_15px_rgba(59, 130, 246, 0.2)] hover:bg-blue-500/10`,children:"Contact Me"})]})]})})}),zle=()=>{const n=["React","ReactDOM","Vite","TailwindCSS","Javascript","Typescript"],e=["NodeJS","Python","Azure","SQL","MongoDB","ThingsBoard"];return V.jsx("section",{id:"about",className:"min-h-screen flex items-center justify-center py-20",children:V.jsx(wC,{children:V.jsxs("div",{className:"max-w-3xl mx-auto px-4",children:[V.jsx("h2",{className:"text-3xl font-bold mb-8 bg-gradient-to-r from-blue-500 to-green-500 bg-clip-text text-transparent text-center",children:"About Me"}),V.jsxs("div",{className:"rounded-xl p-8 border-white/10 bg-gray-500/20 bg-opacity-90 backdrop-filter backdrop-blur-xs border hover:-translate-y-1 transition-all",children:[V.jsx("p",{className:"text-gray-300 mb-6",children:"I'm Dennis Wong, a Computer Science student at UMass Boston with a 3.9 GPA, specializing in software development and data analysis. I bring hands-on experience from roles like Prospect Research Data Assistant, where I supported scholarships by managing large data sets for organizations like Vertex and State Street. I also interned at Johnson & Johnson, where I streamlined data for a medical tool database using Excel macros. A notable project I developed is a local Weather Station, a smart, connected weather station powered by an ESP32 board and various sensors. It collects real-time environmental data, sends it to a dashboard, and uses AI to predict future weather trends based on historical data. With skills in Java, C, C++, JavaScript, and MySQL, Im eager to apply my technical expertise to a software development or data analysis role."}),V.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[V.jsxs("div",{className:"rounded-xl p-6 hover:-translate-y-1 transition-all",children:[V.jsx("h3",{className:"text-xl font-bold mb-4",children:"Frontend"}),V.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((t,r)=>V.jsx("span",{className:`bg-blue-500/10 text-blue-500 py-1 px-3 rounded-full text-sm hover:bg-blue-500/20
                                                          hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.2)] transition`,children:t},r))})]}),V.jsxs("div",{className:"rounded-xl p-6 hover:-translate-y-1 transition-all",children:[V.jsx("h3",{className:"text-xl font-bold mb-4",children:"Backend"}),V.jsx("div",{className:"flex flex-wrap gap-2",children:e.map((t,r)=>V.jsx("span",{className:`bg-blue-500/10 text-blue-500 py-1 px-3 rounded-full text-sm hover:bg-blue-500/20
                                                          hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.2)] transition`,children:t},r))})]})]})]}),V.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[V.jsxs("div",{className:"p-6 rounded-xl border-white/10 border hover:-translate-y-1 transition-all bg-gray-500/20 bg-opacity-90 backdrop-filter backdrop-blur-xs",children:[V.jsx("h3",{className:"text-xl font-bold mb-4",children:"Education"}),V.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[V.jsxs("li",{children:[V.jsx("strong",{children:" B.S. in Computer Science - "})," University of Massachusetts Boston (2022-2025)"]}),V.jsxs("li",{children:[V.jsx("strong",{children:" Relevant Coursework - "}),"Data Structures & Algorithms | Internetworking | An Introduction to Software Engineering | Operating Systems | Computer Architecture & Organization"]}),V.jsxs("li",{children:[V.jsx("strong",{children:" Organizations & Awards - "}),"MathWorks Scholars, Dean's Academic Recognition List in the Honors College, Chancellor's Scholarship"]})]})]}),V.jsxs("div",{className:"p-6 rounded-xl border-white/10 border hover:-translate-y-1 transition-all bg-gray-500/20 bg-opacity-90 backdrop-filter backdrop-blur-xs",children:[V.jsx("h3",{className:"text-xl font-bold mb-4",children:"Professional Experience"}),V.jsxs("div",{className:"space-y-4 text-gray-300",children:[V.jsxs("div",{children:[V.jsx("h4",{children:V.jsx("strong",{children:" Prospect Research Data Assistant at UMass Boston (Feb 2023 - Present) "})}),V.jsx("p",{children:" Conducted data analysis on individuals and corporations to identify donors and prospects. "})]}),V.jsxs("div",{children:[V.jsx("h4",{children:V.jsx("strong",{children:" Biocompatibility & Toxicology Researcher (Feb 2021 - May 2021) "})}),V.jsx("p",{children:" Developed and refined a database to record safety on medical devices. "})]})]})]})]})]})})})},Hle=()=>V.jsx("section",{id:"projects",className:"min-h-screen flex items-center justify-center py-20",children:V.jsx(wC,{children:V.jsxs("div",{className:"max-w-5xl mx-auto px-4",children:[V.jsx("h2",{className:"text-3xl font-bold mb-8 bg-gradient-to-r from-blue-500 to-green-500 bg-clip-text text-transparent text-center",children:" Featured Projects "}),V.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[V.jsxs("div",{className:"p-6 rounded-xl border border-white/10 hover:-translate-y-1 hover:border-blue-500/30 hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.2)] transition bg-gray-500/20 bg-opacity-90 backdrop-filter backdrop-blur-xs",children:[V.jsx("h3",{className:"text-xl font-bold mb-2",children:" Weather Station "}),V.jsx("p",{className:"text-white-400 mb-4",children:"A smart, connected weather station powered by an ESP32 board and various sensors. It collects real-time environmental data, sends it to a dashboard, and uses AI to predict future weather trends based on historical data."}),V.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:["C++","Python","Microsoft Azure","Machine Learning"].map((n,e)=>V.jsx("span",{className:`bg-blue-500/10 text-blue-500 py-1 px-3 rounded-full text-sm hover:bg-blue-500/20
                                                          hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.1)] transition-all`,children:n},e))}),V.jsx("div",{className:"flex justify-between items-center",children:V.jsx("a",{href:"https://github.com/Gro0mp/Weather-Station",className:"text-blue-400 hover:text-blue-300 transition-colors my-4",children:"View Repository"})})]}),V.jsxs("div",{className:"p-6 rounded-xl border border-white/10 hover:-translate-y-1 hover:border-blue-500/30 hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.2)] transition bg-gray-500/20 bg-opacity-90 backdrop-filter backdrop-blur-xs",children:[V.jsx("h3",{className:"text-xl font-bold mb-2",children:" Game Search Engine "}),V.jsx("p",{className:"text-white-400 mb-4",children:"A Java-based recommendation engine that helps users discover new games based on their Steam library and preferences. The engine uses fuzzy search algorithms and tag-based analysis to provide personalized game recommendations."}),V.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:["Java","Data Analysis","JavaFX","Docker"].map((n,e)=>V.jsx("span",{className:`bg-blue-500/10 text-blue-500 py-1 px-3 rounded-full text-sm hover:bg-blue-500/20
                                                          hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.1)] transition-all`,children:n},e))}),V.jsx("div",{className:"flex justify-between items-center",children:V.jsx("a",{href:"https://github.com/Gro0mp/GameSearchEngine",className:"text-blue-400 hover:text-blue-300 transition-colors my-4",children:"View Repository"})})]}),V.jsxs("div",{className:"p-6 rounded-xl border border-white/10 hover:-translate-y-1 hover:border-blue-500/30 hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.2)] transition bg-gray-500/20 bg-opacity-90 backdrop-filter backdrop-blur-xs",children:[V.jsx("h3",{className:"text-xl font-bold mb-2",children:" Hearts of Iron IV Utilities "}),V.jsx("p",{className:"text-white-400 mb-4",children:"A Java-based recommendation engine that helps users discover new games based on their Steam library and preferences. The engine uses fuzzy search algorithms and tag-based analysis to provide personalized game recommendations."}),V.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:["Java","Data Analysis","JavaFX","Docker"].map((n,e)=>V.jsx("span",{className:`bg-blue-500/10 text-blue-500 py-1 px-3 rounded-full text-sm hover:bg-blue-500/20
                                                          hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.1)] transition-all`,children:n},e))}),V.jsx("div",{className:"flex justify-between items-center",children:V.jsx("a",{href:"https://github.com/Gro0mp/GameSearchEngine",className:"text-blue-400 hover:text-blue-300 transition-colors my-4",children:"View Repository"})})]})]})]})})}),L_={_origin:"https://api.emailjs.com"},Vle=(n,e="https://api.emailjs.com")=>{L_._userID=n,L_._origin=e},KX=(n,e,t)=>{if(!n)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class OH{constructor(e){this.status=e.status,this.text=e.responseText}}const YX=(n,e,t={})=>new Promise((r,i)=>{const s=new XMLHttpRequest;s.addEventListener("load",({target:o})=>{const a=new OH(o);a.status===200||a.text==="OK"?r(a):i(a)}),s.addEventListener("error",({target:o})=>{i(new OH(o))}),s.open("POST",L_._origin+n,!0),Object.keys(t).forEach(o=>{s.setRequestHeader(o,t[o])}),s.send(e)}),Gle=(n,e,t,r)=>{const i=r||L_._userID;return KX(i,n,e),YX("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:i,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"})},Wle=n=>{let e;if(typeof n=="string"?e=document.querySelector(n):e=n,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},jle=(n,e,t,r)=>{const i=r||L_._userID,s=Wle(t);KX(i,n,e);const o=new FormData(s);return o.append("lib_version","3.2.0"),o.append("service_id",n),o.append("template_id",e),o.append("user_id",i),YX("/api/v1.0/email/send-form",o)},Xle={init:Vle,send:Gle,sendForm:jle},qle=()=>{const[n,e]=F.useState({name:"",email:"",message:""}),t=r=>{r.preventDefault(),Xle.sendForm("service_nbmyx6d","template_10zndbn",r.target,"wESNT5IROq61fZ-In").then(i=>{alert("Message Sent Successfully"),e({name:"",email:"",message:""})}).catch(()=>{alert("Message Error")})};return V.jsx("section",{id:"contact",className:"min-h-screen flex items-center justify-center py-20",children:V.jsx(wC,{children:V.jsxs("div",{className:"px-4 w-150",children:[V.jsx("h2",{className:"text-3xl font-bold mb-8 bg-gradient-to-r from-blue-500 to-green-500 bg-clip-text text-transparent text-center",children:"Get In Touch!"}),V.jsxs("form",{className:"space-y-6",onSubmit:t,children:[V.jsx("div",{className:"relative",children:V.jsx("input",{type:"text",id:"name",name:"name",required:!0,value:n.name,className:"w-full bg-white/5 border border-white/10 rounded px-4 py-3 text-white transition focus:outline-none focus:border-blue-500 focus:bg-blue-500/5",placeholder:"Name...",onChange:r=>e({...n,name:r.target.value})})}),V.jsx("div",{className:"relative",children:V.jsx("input",{type:"email",id:"email",name:"email",required:!0,value:n.email,className:"w-full bg-white/5 border border-white/10 rounded px-4 py-3 text-white transition focus:outline-none focus:border-blue-500 focus:bg-blue-500/5",placeholder:"example@gmail.com",onChange:r=>e({...n,email:r.target.value})})}),V.jsx("div",{className:"relative",children:V.jsx("textarea",{id:"message",name:"message",rows:5,value:n.message,className:"w-full bg-white/5 border border-white/10 rounded px-4 py-3 text-white transition focus:outline-none focus:border-blue-500 focus:bg-blue-500/5",placeholder:"Message...",onChange:r=>e({...n,message:r.target.value})})}),V.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white py-3 px-6 rounded font-medium transition relative overflow-hidden hover:-translate-y-0.5 hover:shadow-[0_0_15px_rgba(59, 130, 246, 0.4)] hover:bg-blue-500/10] cursor-pointer",children:"Send Message"})]})]})})})},Kle=()=>V.jsx("section",{id:"work",className:"min-h-screen flex items-center justify-center py-20",children:V.jsx(wC,{children:V.jsxs("div",{className:"max-w-5xl mx-auto px-4",children:[V.jsx("h2",{className:"text-3xl font-bold mb-8 bg-gradient-to-r from-blue-500 to-green-500 bg-clip-text text-transparent text-center",children:" Work Experience "}),V.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[V.jsxs("div",{className:"p-6 rounded-xl border border-white/10 hover:-translate-y-1 hover:border-blue-500/30 hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.2)] transition bg-gray-500/20 bg-opacity-90 backdrop-filter backdrop-blur-xs",children:[V.jsx("h3",{className:"text-xl font-bold mb-2",children:" Prospect Research Data Assistant "}),V.jsx("p",{className:"text-white-400 mb-4",children:V.jsxs("ul",{className:"list-disc list-inside",children:[V.jsx("li",{children:"Conducted in-depth research on individuals, foundations, and corporations to identify potential donors and prospects"}),V.jsx("li",{children:"Analyzed and interpreted data to prepare reports on donor giving patterns and interests"}),V.jsx("li",{children:"Maintained accurate and up-to-date donor and prospect information in our advance database."})]})}),V.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:["Data Analysis","Data Management","MySQL","Excel"].map((n,e)=>V.jsx("span",{className:`bg-blue-500/10 text-blue-500 py-1 px-3 rounded-full text-sm hover:bg-blue-500/20
                                                          hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.1)] transition-all`,children:n},e))})]}),V.jsxs("div",{className:"p-6 rounded-xl border border-white/10 hover:-translate-y-1 hover:border-blue-500/30 hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.2)] transition bg-gray-500/20 bg-opacity-90 backdrop-filter backdrop-blur-xs",children:[V.jsx("h3",{className:"text-xl font-bold mb-2",children:" Biocompatibility & Toxicology Research Intern "}),V.jsx("p",{className:"text-white-400 mb-4",children:V.jsxs("ul",{className:"list-disc list-inside",children:[V.jsx("li",{children:"Discussed with managers at Johnson & Johnson on how to refine the database to be increasingly efficient and improve user experience."}),V.jsx("li",{children:"Scanned experimental documentation containing information under which medical tools are tested in."}),V.jsx("li",{children:"Efficiently and properly recorded the data stored in the medical device documents. And ensure that it is understandable to future employees at Johnson & Johnson."})]})}),V.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:["Data Analysis","Data Management","MySQL","Excel"].map((n,e)=>V.jsx("span",{className:`bg-blue-500/10 text-blue-500 py-1 px-3 rounded-full text-sm hover:bg-blue-500/20
                                                          hover:shadow-[0_2px_8px_rgba(59, 130, 246, 0.1)] transition-all`,children:n},e))})]})]})]})})});/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const _C="179",Wy={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Iy={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},JX=0,V$=1,ZX=2,Yle=3,QX=0,JN=1,g_=2,Wd=3,wf=0,Ma=1,Zc=2,pf=0,jy=1,G$=2,W$=3,j$=4,eq=5,og=100,tq=101,nq=102,rq=103,iq=104,sq=200,oq=201,aq=202,lq=203,YM=204,JM=205,cq=206,uq=207,dq=208,hq=209,fq=210,pq=211,mq=212,gq=213,yq=214,ZM=0,QM=1,eR=2,nv=3,tR=4,nR=5,rR=6,iR=7,CC=0,vq=1,bq=2,mf=0,xq=1,Sq=2,wq=3,yP=4,_q=5,Cq=6,Eq=7,X$="attached",Aq="detached",Cg=300,_f=301,Eg=302,t1=303,F_=304,I1=306,Ag=1e3,co=1001,n1=1002,sa=1003,ZN=1004,Jle=1004,Dy=1005,Zle=1005,oi=1006,$x=1007,Qle=1007,Hu=1008,q$=1008,zl=1009,QN=1010,eI=1011,r1=1012,EC=1013,Cf=1014,is=1015,Xs=1016,tI=1017,nI=1018,i1=1020,vP=35902,bP=1021,xP=1022,uo=1023,s1=1026,o1=1027,AC=1028,TC=1029,SP=1030,rI=1031,ece=1032,iI=1033,y_=33776,v_=33777,b_=33778,x_=33779,sR=35840,oR=35841,aR=35842,lR=35843,cR=36196,uR=37492,dR=37496,hR=37808,fR=37809,pR=37810,mR=37811,gR=37812,yR=37813,vR=37814,bR=37815,xR=37816,SR=37817,wR=37818,_R=37819,CR=37820,ER=37821,S_=36492,AR=36494,TR=36495,wP=36283,MR=36284,RR=36285,NR=36286,_P=2200,CP=2201,Tq=2202,a1=2300,l1=2301,vM=2302,ky=2400,Oy=2401,P_=2402,sI=2500,EP=2501,Mq=0,AP=1,IR=2,Rq=3200,Nq=3201,tce=3202,nce=3203,Hg=0,Iq=1,Rp="",Aa="srgb",Yu="srgb-linear",U_="linear",$i="srgb",rce=0,vy=7680,ice=7681,sce=7682,oce=7683,ace=34055,lce=34056,cce=5386,uce=512,dce=513,hce=514,fce=515,pce=516,mce=517,gce=518,K$=519,Dq=512,kq=513,Oq=514,TP=515,Bq=516,$q=517,Lq=518,Fq=519,z_=35044,yce=35048,vce=35040,bce=35045,xce=35049,Sce=35041,wce=35046,_ce=35050,Cce=35042,Ece="100",Y$="300 es",tu=2e3,c1=2001,Ace={COMPUTE:"compute",RENDER:"render"},Tce={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},Mce={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};class kf{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners;if(r===void 0)return;const i=r[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const r=t[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const qa=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let BH=1234567;const Xy=Math.PI/180,u1=180/Math.PI;function iu(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(qa[n&255]+qa[n>>8&255]+qa[n>>16&255]+qa[n>>24&255]+"-"+qa[e&255]+qa[e>>8&255]+"-"+qa[e>>16&15|64]+qa[e>>24&255]+"-"+qa[t&63|128]+qa[t>>8&255]+"-"+qa[t>>16&255]+qa[t>>24&255]+qa[r&255]+qa[r>>8&255]+qa[r>>16&255]+qa[r>>24&255]).toLowerCase()}function nr(n,e,t){return Math.max(e,Math.min(t,n))}function MP(n,e){return(n%e+e)%e}function Rce(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function Nce(n,e,t){return n!==e?(t-n)/(e-n):0}function w_(n,e,t){return(1-t)*n+t*e}function Ice(n,e,t,r){return w_(n,e,1-Math.exp(-t*r))}function Dce(n,e=1){return e-Math.abs(MP(n,e*2)-e)}function kce(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Oce(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Bce(n,e){return n+Math.floor(Math.random()*(e-n+1))}function $ce(n,e){return n+Math.random()*(e-n)}function Lce(n){return n*(.5-Math.random())}function Fce(n){n!==void 0&&(BH=n);let e=BH+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Pce(n){return n*Xy}function Uce(n){return n*u1}function zce(n){return(n&n-1)===0&&n!==0}function Hce(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Vce(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Gce(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+r)/2),u=o((e+r)/2),d=s((e-r)/2),f=o((e-r)/2),p=s((r-e)/2),g=o((r-e)/2);switch(i){case"XYX":n.set(a*u,l*d,l*f,a*c);break;case"YZY":n.set(l*f,a*u,l*d,a*c);break;case"ZXZ":n.set(l*d,l*f,a*u,a*c);break;case"XZX":n.set(a*u,l*g,l*p,a*c);break;case"YXY":n.set(l*p,a*u,l*g,a*c);break;case"ZYZ":n.set(l*g,l*p,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Ll(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function _r(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const oI={DEG2RAD:Xy,RAD2DEG:u1,generateUUID:iu,clamp:nr,euclideanModulo:MP,mapLinear:Rce,inverseLerp:Nce,lerp:w_,damp:Ice,pingpong:Dce,smoothstep:kce,smootherstep:Oce,randInt:Bce,randFloat:$ce,randFloatSpread:Lce,seededRandom:Fce,degToRad:Pce,radToDeg:Uce,isPowerOfTwo:zce,ceilPowerOfTwo:Hce,floorPowerOfTwo:Vce,setQuaternionFromProperEuler:Gce,normalize:_r,denormalize:Ll};class Nt{constructor(e=0,t=0){Nt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=nr(this.x,e.x,t.x),this.y=nr(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=nr(this.x,e,t),this.y=nr(this.y,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(nr(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(nr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class _s{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],d=r[i+3];const f=s[o+0],p=s[o+1],g=s[o+2],v=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d;return}if(a===1){e[t+0]=f,e[t+1]=p,e[t+2]=g,e[t+3]=v;return}if(d!==v||l!==f||c!==p||u!==g){let b=1-a;const x=l*f+c*p+u*g+d*v,_=x>=0?1:-1,E=1-x*x;if(E>Number.EPSILON){const M=Math.sqrt(E),R=Math.atan2(M,x*_);b=Math.sin(b*R)/M,a=Math.sin(a*R)/M}const C=a*_;if(l=l*b+f*C,c=c*b+p*C,u=u*b+g*C,d=d*b+v*C,b===1-a){const M=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=M,c*=M,u*=M,d*=M}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],d=s[o],f=s[o+1],p=s[o+2],g=s[o+3];return e[t]=a*g+u*d+l*p-c*f,e[t+1]=l*g+u*f+c*d-a*p,e[t+2]=c*g+u*p+a*f-l*d,e[t+3]=u*g-a*d-l*f-c*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),d=a(s/2),f=l(r/2),p=l(i/2),g=l(s/2);switch(o){case"XYZ":this._x=f*u*d+c*p*g,this._y=c*p*d-f*u*g,this._z=c*u*g+f*p*d,this._w=c*u*d-f*p*g;break;case"YXZ":this._x=f*u*d+c*p*g,this._y=c*p*d-f*u*g,this._z=c*u*g-f*p*d,this._w=c*u*d+f*p*g;break;case"ZXY":this._x=f*u*d-c*p*g,this._y=c*p*d+f*u*g,this._z=c*u*g+f*p*d,this._w=c*u*d-f*p*g;break;case"ZYX":this._x=f*u*d-c*p*g,this._y=c*p*d+f*u*g,this._z=c*u*g-f*p*d,this._w=c*u*d+f*p*g;break;case"YZX":this._x=f*u*d+c*p*g,this._y=c*p*d+f*u*g,this._z=c*u*g-f*p*d,this._w=c*u*d-f*p*g;break;case"XZY":this._x=f*u*d-c*p*g,this._y=c*p*d-f*u*g,this._z=c*u*g+f*p*d,this._w=c*u*d+f*p*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],f=r+a+d;if(f>0){const p=.5/Math.sqrt(f+1);this._w=.25/p,this._x=(u-l)*p,this._y=(s-c)*p,this._z=(o-i)*p}else if(r>a&&r>d){const p=2*Math.sqrt(1+r-a-d);this._w=(u-l)/p,this._x=.25*p,this._y=(i+o)/p,this._z=(s+c)/p}else if(a>d){const p=2*Math.sqrt(1+a-r-d);this._w=(s-c)/p,this._x=(i+o)/p,this._y=.25*p,this._z=(l+u)/p}else{const p=2*Math.sqrt(1+d-r-a);this._w=(o-i)/p,this._x=(s+c)/p,this._y=(l+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<1e-8?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(nr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const p=1-t;return this._w=p*o+t*this._w,this._x=p*r+t*this._x,this._y=p*i+t*this._y,this._z=p*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,f=Math.sin(t*u)/c;return this._w=o*d+this._w*f,this._x=r*d+this._x*f,this._y=i*d+this._y*f,this._z=s*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ve{constructor(e=0,t=0,r=0){ve.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion($H.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion($H.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),u=2*(a*t-s*i),d=2*(s*r-o*t);return this.x=t+l*c+o*d-a*u,this.y=r+l*u+a*c-s*d,this.z=i+l*d+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=nr(this.x,e.x,t.x),this.y=nr(this.y,e.y,t.y),this.z=nr(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=nr(this.x,e,t),this.y=nr(this.y,e,t),this.z=nr(this.z,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(nr(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return nO.copy(this).projectOnVector(e),this.sub(nO)}reflect(e){return this.sub(nO.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(nr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const nO=new ve,$H=new _s;class xr{constructor(e,t,r,i,s,o,a,l,c){xr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c)}set(e,t,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],d=r[7],f=r[2],p=r[5],g=r[8],v=i[0],b=i[3],x=i[6],_=i[1],E=i[4],C=i[7],M=i[2],R=i[5],L=i[8];return s[0]=o*v+a*_+l*M,s[3]=o*b+a*E+l*R,s[6]=o*x+a*C+l*L,s[1]=c*v+u*_+d*M,s[4]=c*b+u*E+d*R,s[7]=c*x+u*C+d*L,s[2]=f*v+p*_+g*M,s[5]=f*b+p*E+g*R,s[8]=f*x+p*C+g*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,f=a*l-u*s,p=c*s-o*l,g=t*d+r*f+i*p;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return e[0]=d*v,e[1]=(i*c-u*r)*v,e[2]=(a*r-i*o)*v,e[3]=f*v,e[4]=(u*t-i*l)*v,e[5]=(i*s-a*t)*v,e[6]=p*v,e[7]=(r*l-c*t)*v,e[8]=(o*t-r*s)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(rO.makeScale(e,t)),this}rotate(e){return this.premultiply(rO.makeRotation(-e)),this}translate(e,t){return this.premultiply(rO.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const rO=new xr;function Pq(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const Wce={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function kx(n,e){return new Wce[n](e)}function H_(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Uq(){const n=H_("canvas");return n.style.display="block",n}const LH={};function Lx(n){n in LH||(LH[n]=!0,console.warn(n))}function jce(n,e,t){return new Promise(function(r,i){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:i();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:r()}}setTimeout(s,t)})}const FH=new xr().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),PH=new xr().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Xce(){const n={enabled:!0,workingColorSpace:Yu,spaces:{},convert:function(i,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===$i&&(i.r=Op(i.r),i.g=Op(i.g),i.b=Op(i.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===$i&&(i.r=Fx(i.r),i.g=Fx(i.g),i.b=Fx(i.b))),i},workingToColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},colorSpaceToWorking:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Rp?U_:this.spaces[i].transfer},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,o){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(i,s){return Lx("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(i,s)},toWorkingColorSpace:function(i,s){return Lx("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(i,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],r=[.3127,.329];return n.define({[Yu]:{primaries:e,whitePoint:r,transfer:U_,toXYZ:FH,fromXYZ:PH,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Aa},outputColorSpaceConfig:{drawingBufferColorSpace:Aa}},[Aa]:{primaries:e,whitePoint:r,transfer:$i,toXYZ:FH,fromXYZ:PH,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Aa}}}),n}const Qr=Xce();function Op(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Fx(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Gb;class zq{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{Gb===void 0&&(Gb=H_("canvas")),Gb.width=e.width,Gb.height=e.height;const i=Gb.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),r=Gb}return r.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=H_("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Op(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Op(t[r]/255)*255):t[r]=Op(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let qce=0;class ug{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:qce++}),this.uuid=iu(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(iO(i[o].image)):s.push(iO(i[o]))}else s=iO(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function iO(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?zq.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Kce=0;const sO=new ve;class Ti extends kf{constructor(e=Ti.DEFAULT_IMAGE,t=Ti.DEFAULT_MAPPING,r=co,i=co,s=oi,o=Hu,a=uo,l=zl,c=Ti.DEFAULT_ANISOTROPY,u=Rp){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Kce++}),this.uuid=iu(),this.name="",this.source=new ug(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Nt(0,0),this.repeat=new Nt(1,1),this.center=new Nt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new xr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(sO).x}get height(){return this.source.getSize(sO).y}get depth(){return this.source.getSize(sO).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}i&&r&&i.isVector2&&r.isVector2||i&&r&&i.isVector3&&r.isVector3||i&&r&&i.isMatrix3&&r.isMatrix3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Cg)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ag:e.x=e.x-Math.floor(e.x);break;case co:e.x=e.x<0?0:1;break;case n1:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ag:e.y=e.y-Math.floor(e.y);break;case co:e.y=e.y<0?0:1;break;case n1:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Ti.DEFAULT_IMAGE=null;Ti.DEFAULT_MAPPING=Cg;Ti.DEFAULT_ANISOTROPY=1;class Hr{constructor(e=0,t=0,r=0,i=1){Hr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,c=l[0],u=l[4],d=l[8],f=l[1],p=l[5],g=l[9],v=l[2],b=l[6],x=l[10];if(Math.abs(u-f)<.01&&Math.abs(d-v)<.01&&Math.abs(g-b)<.01){if(Math.abs(u+f)<.1&&Math.abs(d+v)<.1&&Math.abs(g+b)<.1&&Math.abs(c+p+x-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const E=(c+1)/2,C=(p+1)/2,M=(x+1)/2,R=(u+f)/4,L=(d+v)/4,B=(g+b)/4;return E>C&&E>M?E<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(E),i=R/r,s=L/r):C>M?C<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(C),r=R/i,s=B/i):M<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(M),r=L/s,i=B/s),this.set(r,i,s,t),this}let _=Math.sqrt((b-g)*(b-g)+(d-v)*(d-v)+(f-u)*(f-u));return Math.abs(_)<.001&&(_=1),this.x=(b-g)/_,this.y=(d-v)/_,this.z=(f-u)/_,this.w=Math.acos((c+p+x-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=nr(this.x,e.x,t.x),this.y=nr(this.y,e.y,t.y),this.z=nr(this.z,e.z,t.z),this.w=nr(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=nr(this.x,e,t),this.y=nr(this.y,e,t),this.z=nr(this.z,e,t),this.w=nr(this.w,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(nr(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RP extends kf{constructor(e=1,t=1,r={}){super(),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:oi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},r),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=r.depth,this.scissor=new Hr(0,0,e,t),this.scissorTest=!1,this.viewport=new Hr(0,0,e,t);const i={width:e,height:t,depth:r.depth},s=new Ti(i);this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(r),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples,this.multiview=r.multiview}_setTextureOptions(e={}){const t={minFilter:oi,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let r=0;r<this.textures.length;r++)this.textures[r].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r,this.textures[i].isArrayTexture=this.textures[i].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,r=e.textures.length;t<r;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const i=Object.assign({},e.textures[t].image);this.textures[t].source=new ug(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ec extends RP{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class aI extends Ti{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=sa,this.minFilter=sa,this.wrapR=co,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Yce extends Ec{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new aI(null,e,t,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class lI extends Ti{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=sa,this.minFilter=sa,this.wrapR=co,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Jce extends Ec{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new lI(null,e,t,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class Ra{constructor(e=new ve(1/0,1/0,1/0),t=new ve(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint($d.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint($d.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=$d.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,$d):$d.fromBufferAttribute(s,o),$d.applyMatrix4(e.matrixWorld),this.expandByPoint($d);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),HA.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),HA.copy(r.boundingBox)),HA.applyMatrix4(e.matrixWorld),this.union(HA)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,$d),$d.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(bw),VA.subVectors(this.max,bw),Wb.subVectors(e.a,bw),jb.subVectors(e.b,bw),Xb.subVectors(e.c,bw),Km.subVectors(jb,Wb),Ym.subVectors(Xb,jb),Y0.subVectors(Wb,Xb);let t=[0,-Km.z,Km.y,0,-Ym.z,Ym.y,0,-Y0.z,Y0.y,Km.z,0,-Km.x,Ym.z,0,-Ym.x,Y0.z,0,-Y0.x,-Km.y,Km.x,0,-Ym.y,Ym.x,0,-Y0.y,Y0.x,0];return!oO(t,Wb,jb,Xb,VA)||(t=[1,0,0,0,1,0,0,0,1],!oO(t,Wb,jb,Xb,VA))?!1:(GA.crossVectors(Km,Ym),t=[GA.x,GA.y,GA.z],oO(t,Wb,jb,Xb,VA))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,$d).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize($d).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(hp[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),hp[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),hp[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),hp[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),hp[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),hp[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),hp[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),hp[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(hp),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const hp=[new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve],$d=new ve,HA=new Ra,Wb=new ve,jb=new ve,Xb=new ve,Km=new ve,Ym=new ve,Y0=new ve,bw=new ve,VA=new ve,GA=new ve,J0=new ve;function oO(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){J0.fromArray(n,s);const a=i.x*Math.abs(J0.x)+i.y*Math.abs(J0.y)+i.z*Math.abs(J0.z),l=e.dot(J0),c=t.dot(J0),u=r.dot(J0);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const Zce=new Ra,xw=new ve,aO=new ve;let oa=class{constructor(e=new ve,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):Zce.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;xw.subVectors(e,this.center);const t=xw.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(xw,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(aO.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(xw.copy(e.center).add(aO)),this.expandByPoint(xw.copy(e.center).sub(aO))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}};const fp=new ve,lO=new ve,WA=new ve,Jm=new ve,cO=new ve,jA=new ve,uO=new ve;class Rv{constructor(e=new ve,t=new ve(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,fp)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=fp.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(fp.copy(this.origin).addScaledVector(this.direction,t),fp.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){lO.copy(e).add(t).multiplyScalar(.5),WA.copy(t).sub(e).normalize(),Jm.copy(this.origin).sub(lO);const s=e.distanceTo(t)*.5,o=-this.direction.dot(WA),a=Jm.dot(this.direction),l=-Jm.dot(WA),c=Jm.lengthSq(),u=Math.abs(1-o*o);let d,f,p,g;if(u>0)if(d=o*l-a,f=o*a-l,g=s*u,d>=0)if(f>=-g)if(f<=g){const v=1/u;d*=v,f*=v,p=d*(d+o*f+2*a)+f*(o*d+f+2*l)+c}else f=s,d=Math.max(0,-(o*f+a)),p=-d*d+f*(f+2*l)+c;else f=-s,d=Math.max(0,-(o*f+a)),p=-d*d+f*(f+2*l)+c;else f<=-g?(d=Math.max(0,-(-o*s+a)),f=d>0?-s:Math.min(Math.max(-s,-l),s),p=-d*d+f*(f+2*l)+c):f<=g?(d=0,f=Math.min(Math.max(-s,-l),s),p=f*(f+2*l)+c):(d=Math.max(0,-(o*s+a)),f=d>0?s:Math.min(Math.max(-s,-l),s),p=-d*d+f*(f+2*l)+c);else f=o>0?-s:s,d=Math.max(0,-(o*f+a)),p=-d*d+f*(f+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(lO).addScaledVector(WA,f),p}intersectSphere(e,t){fp.subVectors(e.center,this.origin);const r=fp.dot(this.direction),i=fp.dot(fp)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,f=this.origin;return c>=0?(r=(e.min.x-f.x)*c,i=(e.max.x-f.x)*c):(r=(e.max.x-f.x)*c,i=(e.min.x-f.x)*c),u>=0?(s=(e.min.y-f.y)*u,o=(e.max.y-f.y)*u):(s=(e.max.y-f.y)*u,o=(e.min.y-f.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),d>=0?(a=(e.min.z-f.z)*d,l=(e.max.z-f.z)*d):(a=(e.max.z-f.z)*d,l=(e.min.z-f.z)*d),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,fp)!==null}intersectTriangle(e,t,r,i,s){cO.subVectors(t,e),jA.subVectors(r,e),uO.crossVectors(cO,jA);let o=this.direction.dot(uO),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Jm.subVectors(this.origin,e);const l=a*this.direction.dot(jA.crossVectors(Jm,jA));if(l<0)return null;const c=a*this.direction.dot(cO.cross(Jm));if(c<0||l+c>o)return null;const u=-a*Jm.dot(uO);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class zn{constructor(e,t,r,i,s,o,a,l,c,u,d,f,p,g,v,b){zn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c,u,d,f,p,g,v,b)}set(e,t,r,i,s,o,a,l,c,u,d,f,p,g,v,b){const x=this.elements;return x[0]=e,x[4]=t,x[8]=r,x[12]=i,x[1]=s,x[5]=o,x[9]=a,x[13]=l,x[2]=c,x[6]=u,x[10]=d,x[14]=f,x[3]=p,x[7]=g,x[11]=v,x[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new zn().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/qb.setFromMatrixColumn(e,0).length(),s=1/qb.setFromMatrixColumn(e,1).length(),o=1/qb.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const f=o*u,p=o*d,g=a*u,v=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=p+g*c,t[5]=f-v*c,t[9]=-a*l,t[2]=v-f*c,t[6]=g+p*c,t[10]=o*l}else if(e.order==="YXZ"){const f=l*u,p=l*d,g=c*u,v=c*d;t[0]=f+v*a,t[4]=g*a-p,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=p*a-g,t[6]=v+f*a,t[10]=o*l}else if(e.order==="ZXY"){const f=l*u,p=l*d,g=c*u,v=c*d;t[0]=f-v*a,t[4]=-o*d,t[8]=g+p*a,t[1]=p+g*a,t[5]=o*u,t[9]=v-f*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const f=o*u,p=o*d,g=a*u,v=a*d;t[0]=l*u,t[4]=g*c-p,t[8]=f*c+v,t[1]=l*d,t[5]=v*c+f,t[9]=p*c-g,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const f=o*l,p=o*c,g=a*l,v=a*c;t[0]=l*u,t[4]=v-f*d,t[8]=g*d+p,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=p*d+g,t[10]=f-v*d}else if(e.order==="XZY"){const f=o*l,p=o*c,g=a*l,v=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=f*d+v,t[5]=o*u,t[9]=p*d-g,t[2]=g*d-p,t[6]=a*u,t[10]=v*d+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Qce,e,eue)}lookAt(e,t,r){const i=this.elements;return Kc.subVectors(e,t),Kc.lengthSq()===0&&(Kc.z=1),Kc.normalize(),Zm.crossVectors(r,Kc),Zm.lengthSq()===0&&(Math.abs(r.z)===1?Kc.x+=1e-4:Kc.z+=1e-4,Kc.normalize(),Zm.crossVectors(r,Kc)),Zm.normalize(),XA.crossVectors(Kc,Zm),i[0]=Zm.x,i[4]=XA.x,i[8]=Kc.x,i[1]=Zm.y,i[5]=XA.y,i[9]=Kc.y,i[2]=Zm.z,i[6]=XA.z,i[10]=Kc.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],d=r[5],f=r[9],p=r[13],g=r[2],v=r[6],b=r[10],x=r[14],_=r[3],E=r[7],C=r[11],M=r[15],R=i[0],L=i[4],B=i[8],N=i[12],I=i[1],D=i[5],P=i[9],G=i[13],W=i[2],q=i[6],z=i[10],J=i[14],Q=i[3],Y=i[7],X=i[11],te=i[15];return s[0]=o*R+a*I+l*W+c*Q,s[4]=o*L+a*D+l*q+c*Y,s[8]=o*B+a*P+l*z+c*X,s[12]=o*N+a*G+l*J+c*te,s[1]=u*R+d*I+f*W+p*Q,s[5]=u*L+d*D+f*q+p*Y,s[9]=u*B+d*P+f*z+p*X,s[13]=u*N+d*G+f*J+p*te,s[2]=g*R+v*I+b*W+x*Q,s[6]=g*L+v*D+b*q+x*Y,s[10]=g*B+v*P+b*z+x*X,s[14]=g*N+v*G+b*J+x*te,s[3]=_*R+E*I+C*W+M*Q,s[7]=_*L+E*D+C*q+M*Y,s[11]=_*B+E*P+C*z+M*X,s[15]=_*N+E*G+C*J+M*te,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],f=e[10],p=e[14],g=e[3],v=e[7],b=e[11],x=e[15];return g*(+s*l*d-i*c*d-s*a*f+r*c*f+i*a*p-r*l*p)+v*(+t*l*p-t*c*f+s*o*f-i*o*p+i*c*u-s*l*u)+b*(+t*c*d-t*a*p-s*o*d+r*o*p+s*a*u-r*c*u)+x*(-i*a*u-t*l*d+t*a*f+i*o*d-r*o*f+r*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],p=e[11],g=e[12],v=e[13],b=e[14],x=e[15],_=d*b*c-v*f*c+v*l*p-a*b*p-d*l*x+a*f*x,E=g*f*c-u*b*c-g*l*p+o*b*p+u*l*x-o*f*x,C=u*v*c-g*d*c+g*a*p-o*v*p-u*a*x+o*d*x,M=g*d*l-u*v*l-g*a*f+o*v*f+u*a*b-o*d*b,R=t*_+r*E+i*C+s*M;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/R;return e[0]=_*L,e[1]=(v*f*s-d*b*s-v*i*p+r*b*p+d*i*x-r*f*x)*L,e[2]=(a*b*s-v*l*s+v*i*c-r*b*c-a*i*x+r*l*x)*L,e[3]=(d*l*s-a*f*s-d*i*c+r*f*c+a*i*p-r*l*p)*L,e[4]=E*L,e[5]=(u*b*s-g*f*s+g*i*p-t*b*p-u*i*x+t*f*x)*L,e[6]=(g*l*s-o*b*s-g*i*c+t*b*c+o*i*x-t*l*x)*L,e[7]=(o*f*s-u*l*s+u*i*c-t*f*c-o*i*p+t*l*p)*L,e[8]=C*L,e[9]=(g*d*s-u*v*s-g*r*p+t*v*p+u*r*x-t*d*x)*L,e[10]=(o*v*s-g*a*s+g*r*c-t*v*c-o*r*x+t*a*x)*L,e[11]=(u*a*s-o*d*s-u*r*c+t*d*c+o*r*p-t*a*p)*L,e[12]=M*L,e[13]=(u*v*i-g*d*i+g*r*f-t*v*f-u*r*b+t*d*b)*L,e[14]=(g*a*i-o*v*i-g*r*l+t*v*l+o*r*b-t*a*b)*L,e[15]=(o*d*i-u*a*i+u*r*l-t*d*l-o*r*f+t*a*f)*L,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,f=s*c,p=s*u,g=s*d,v=o*u,b=o*d,x=a*d,_=l*c,E=l*u,C=l*d,M=r.x,R=r.y,L=r.z;return i[0]=(1-(v+x))*M,i[1]=(p+C)*M,i[2]=(g-E)*M,i[3]=0,i[4]=(p-C)*R,i[5]=(1-(f+x))*R,i[6]=(b+_)*R,i[7]=0,i[8]=(g+E)*L,i[9]=(b-_)*L,i[10]=(1-(f+v))*L,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=qb.set(i[0],i[1],i[2]).length();const o=qb.set(i[4],i[5],i[6]).length(),a=qb.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Ld.copy(this);const c=1/s,u=1/o,d=1/a;return Ld.elements[0]*=c,Ld.elements[1]*=c,Ld.elements[2]*=c,Ld.elements[4]*=u,Ld.elements[5]*=u,Ld.elements[6]*=u,Ld.elements[8]*=d,Ld.elements[9]*=d,Ld.elements[10]*=d,t.setFromRotationMatrix(Ld),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=tu,l=!1){const c=this.elements,u=2*s/(t-e),d=2*s/(r-i),f=(t+e)/(t-e),p=(r+i)/(r-i);let g,v;if(l)g=s/(o-s),v=o*s/(o-s);else if(a===tu)g=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===c1)g=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return c[0]=u,c[4]=0,c[8]=f,c[12]=0,c[1]=0,c[5]=d,c[9]=p,c[13]=0,c[2]=0,c[6]=0,c[10]=g,c[14]=v,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=tu,l=!1){const c=this.elements,u=2/(t-e),d=2/(r-i),f=-(t+e)/(t-e),p=-(r+i)/(r-i);let g,v;if(l)g=1/(o-s),v=o/(o-s);else if(a===tu)g=-2/(o-s),v=-(o+s)/(o-s);else if(a===c1)g=-1/(o-s),v=-s/(o-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return c[0]=u,c[4]=0,c[8]=0,c[12]=f,c[1]=0,c[5]=d,c[9]=0,c[13]=p,c[2]=0,c[6]=0,c[10]=g,c[14]=v,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const qb=new ve,Ld=new zn,Qce=new ve(0,0,0),eue=new ve(1,1,1),Zm=new ve,XA=new ve,Kc=new ve,UH=new zn,zH=new _s;class Ac{constructor(e=0,t=0,r=0,i=Ac.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],d=i[2],f=i[6],p=i[10];switch(t){case"XYZ":this._y=Math.asin(nr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-nr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(nr(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-nr(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(nr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-nr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return UH.makeRotationFromQuaternion(e),this.setFromRotationMatrix(UH,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return zH.setFromEuler(this),this.setFromQuaternion(zH,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ac.DEFAULT_ORDER="XYZ";class d1{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let tue=0;const HH=new ve,Kb=new _s,pp=new zn,qA=new ve,Sw=new ve,nue=new ve,rue=new _s,VH=new ve(1,0,0),GH=new ve(0,1,0),WH=new ve(0,0,1),jH={type:"added"},iue={type:"removed"},Yb={type:"childadded",child:null},dO={type:"childremoved",child:null};class ei extends kf{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:tue++}),this.uuid=iu(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ei.DEFAULT_UP.clone();const e=new ve,t=new Ac,r=new _s,i=new ve(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new zn},normalMatrix:{value:new xr}}),this.matrix=new zn,this.matrixWorld=new zn,this.matrixAutoUpdate=ei.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ei.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new d1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Kb.setFromAxisAngle(e,t),this.quaternion.multiply(Kb),this}rotateOnWorldAxis(e,t){return Kb.setFromAxisAngle(e,t),this.quaternion.premultiply(Kb),this}rotateX(e){return this.rotateOnAxis(VH,e)}rotateY(e){return this.rotateOnAxis(GH,e)}rotateZ(e){return this.rotateOnAxis(WH,e)}translateOnAxis(e,t){return HH.copy(e).applyQuaternion(this.quaternion),this.position.add(HH.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(VH,e)}translateY(e){return this.translateOnAxis(GH,e)}translateZ(e){return this.translateOnAxis(WH,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(pp.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?qA.copy(e):qA.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Sw.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?pp.lookAt(Sw,qA,this.up):pp.lookAt(qA,Sw,this.up),this.quaternion.setFromRotationMatrix(pp),i&&(pp.extractRotation(i.matrixWorld),Kb.setFromRotationMatrix(pp),this.quaternion.premultiply(Kb.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(jH),Yb.child=e,this.dispatchEvent(Yb),Yb.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(iue),dO.child=e,this.dispatchEvent(dO),dO.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),pp.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),pp.multiply(e.parent.matrixWorld)),e.applyMatrix4(pp),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(jH),Yb.child=e,this.dispatchEvent(Yb),Yb.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Sw,e,nue),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Sw,rue,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(a=>({...a,boundingBox:a.boundingBox?a.boundingBox.toJSON():void 0,boundingSphere:a.boundingSphere?a.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(a=>({...a})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(i.boundingBox=this.boundingBox.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),f=o(e.skeletons),p=o(e.animations),g=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),f.length>0&&(r.skeletons=f),p.length>0&&(r.animations=p),g.length>0&&(r.nodes=g)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}ei.DEFAULT_UP=new ve(0,1,0);ei.DEFAULT_MATRIX_AUTO_UPDATE=!0;ei.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Fd=new ve,mp=new ve,hO=new ve,gp=new ve,Jb=new ve,Zb=new ve,XH=new ve,fO=new ve,pO=new ve,mO=new ve,gO=new Hr,yO=new Hr,vO=new Hr;class yc{constructor(e=new ve,t=new ve,r=new ve){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Fd.subVectors(e,t),i.cross(Fd);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Fd.subVectors(i,t),mp.subVectors(r,t),hO.subVectors(e,t);const o=Fd.dot(Fd),a=Fd.dot(mp),l=Fd.dot(hO),c=mp.dot(mp),u=mp.dot(hO),d=o*c-a*a;if(d===0)return s.set(0,0,0),null;const f=1/d,p=(c*l-a*u)*f,g=(o*u-a*l)*f;return s.set(1-p-g,g,p)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,gp)===null?!1:gp.x>=0&&gp.y>=0&&gp.x+gp.y<=1}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,gp)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,gp.x),l.addScaledVector(o,gp.y),l.addScaledVector(a,gp.z),l)}static getInterpolatedAttribute(e,t,r,i,s,o){return gO.setScalar(0),yO.setScalar(0),vO.setScalar(0),gO.fromBufferAttribute(e,t),yO.fromBufferAttribute(e,r),vO.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(gO,s.x),o.addScaledVector(yO,s.y),o.addScaledVector(vO,s.z),o}static isFrontFacing(e,t,r,i){return Fd.subVectors(r,t),mp.subVectors(e,t),Fd.cross(mp).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Fd.subVectors(this.c,this.b),mp.subVectors(this.a,this.b),Fd.cross(mp).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return yc.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return yc.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,s){return yc.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return yc.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return yc.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;Jb.subVectors(i,r),Zb.subVectors(s,r),fO.subVectors(e,r);const l=Jb.dot(fO),c=Zb.dot(fO);if(l<=0&&c<=0)return t.copy(r);pO.subVectors(e,i);const u=Jb.dot(pO),d=Zb.dot(pO);if(u>=0&&d<=u)return t.copy(i);const f=l*d-u*c;if(f<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(r).addScaledVector(Jb,o);mO.subVectors(e,s);const p=Jb.dot(mO),g=Zb.dot(mO);if(g>=0&&p<=g)return t.copy(s);const v=p*c-l*g;if(v<=0&&c>=0&&g<=0)return a=c/(c-g),t.copy(r).addScaledVector(Zb,a);const b=u*g-p*d;if(b<=0&&d-u>=0&&p-g>=0)return XH.subVectors(s,i),a=(d-u)/(d-u+(p-g)),t.copy(i).addScaledVector(XH,a);const x=1/(b+v+f);return o=v*x,a=f*x,t.copy(r).addScaledVector(Jb,o).addScaledVector(Zb,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Hq={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Qm={h:0,s:0,l:0},KA={h:0,s:0,l:0};function bO(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let rn=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Aa){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Qr.colorSpaceToWorking(this,t),this}setRGB(e,t,r,i=Qr.workingColorSpace){return this.r=e,this.g=t,this.b=r,Qr.colorSpaceToWorking(this,i),this}setHSL(e,t,r,i=Qr.workingColorSpace){if(e=MP(e,1),t=nr(t,0,1),r=nr(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=bO(o,s,e+1/3),this.g=bO(o,s,e),this.b=bO(o,s,e-1/3)}return Qr.colorSpaceToWorking(this,i),this}setStyle(e,t=Aa){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Aa){const r=Hq[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Op(e.r),this.g=Op(e.g),this.b=Op(e.b),this}copyLinearToSRGB(e){return this.r=Fx(e.r),this.g=Fx(e.g),this.b=Fx(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Aa){return Qr.workingToColorSpace(Ka.copy(this),e),Math.round(nr(Ka.r*255,0,255))*65536+Math.round(nr(Ka.g*255,0,255))*256+Math.round(nr(Ka.b*255,0,255))}getHexString(e=Aa){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Qr.workingColorSpace){Qr.workingToColorSpace(Ka.copy(this),t);const r=Ka.r,i=Ka.g,s=Ka.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case r:l=(i-s)/d+(i<s?6:0);break;case i:l=(s-r)/d+2;break;case s:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Qr.workingColorSpace){return Qr.workingToColorSpace(Ka.copy(this),t),e.r=Ka.r,e.g=Ka.g,e.b=Ka.b,e}getStyle(e=Aa){Qr.workingToColorSpace(Ka.copy(this),e);const t=Ka.r,r=Ka.g,i=Ka.b;return e!==Aa?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(Qm),this.setHSL(Qm.h+e,Qm.s+t,Qm.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Qm),e.getHSL(KA);const r=w_(Qm.h,KA.h,t),i=w_(Qm.s,KA.s,t),s=w_(Qm.l,KA.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Ka=new rn;rn.NAMES=Hq;let sue=0;class Vo extends kf{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:sue++}),this.uuid=iu(),this.name="",this.type="Material",this.blending=jy,this.side=wf,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=YM,this.blendDst=JM,this.blendEquation=og,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new rn(0,0,0),this.blendAlpha=0,this.depthFunc=nv,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=K$,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=vy,this.stencilZFail=vy,this.stencilZPass=vy,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==jy&&(r.blending=this.blending),this.side!==wf&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==YM&&(r.blendSrc=this.blendSrc),this.blendDst!==JM&&(r.blendDst=this.blendDst),this.blendEquation!==og&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==nv&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==K$&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==vy&&(r.stencilFail=this.stencilFail),this.stencilZFail!==vy&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==vy&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class bc extends Vo{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new rn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ac,this.combine=CC,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Np=oue();function oue(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;(c&8388608)===0;)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function dc(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=nr(n,-65504,65504),Np.floatView[0]=n;const e=Np.uint32View[0],t=e>>23&511;return Np.baseTable[t]+((e&8388607)>>Np.shiftTable[t])}function Qw(n){const e=n>>10;return Np.uint32View[0]=Np.mantissaTable[Np.offsetTable[e]+(n&1023)]+Np.exponentTable[e],Np.floatView[0]}class Kd{static toHalfFloat(e){return dc(e)}static fromHalfFloat(e){return Qw(e)}}const bo=new ve,YA=new Nt;let aue=0;class ai{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:aue++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=z_,this.updateRanges=[],this.gpuType=is,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)YA.fromBufferAttribute(this,t),YA.applyMatrix3(e),this.setXY(t,YA.x,YA.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)bo.fromBufferAttribute(this,t),bo.applyMatrix3(e),this.setXYZ(t,bo.x,bo.y,bo.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)bo.fromBufferAttribute(this,t),bo.applyMatrix4(e),this.setXYZ(t,bo.x,bo.y,bo.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)bo.fromBufferAttribute(this,t),bo.applyNormalMatrix(e),this.setXYZ(t,bo.x,bo.y,bo.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)bo.fromBufferAttribute(this,t),bo.transformDirection(e),this.setXYZ(t,bo.x,bo.y,bo.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=Ll(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=_r(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ll(t,this.array)),t}setX(e,t){return this.normalized&&(t=_r(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ll(t,this.array)),t}setY(e,t){return this.normalized&&(t=_r(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ll(t,this.array)),t}setZ(e,t){return this.normalized&&(t=_r(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ll(t,this.array)),t}setW(e,t){return this.normalized&&(t=_r(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=_r(t,this.array),r=_r(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=_r(t,this.array),r=_r(r,this.array),i=_r(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=_r(t,this.array),r=_r(r,this.array),i=_r(i,this.array),s=_r(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==z_&&(e.usage=this.usage),e}}class lue extends ai{constructor(e,t,r){super(new Int8Array(e),t,r)}}class cue extends ai{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class uue extends ai{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class due extends ai{constructor(e,t,r){super(new Int16Array(e),t,r)}}class NP extends ai{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class hue extends ai{constructor(e,t,r){super(new Int32Array(e),t,r)}}class IP extends ai{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class fue extends ai{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=Qw(this.array[e*this.itemSize]);return this.normalized&&(t=Ll(t,this.array)),t}setX(e,t){return this.normalized&&(t=_r(t,this.array)),this.array[e*this.itemSize]=dc(t),this}getY(e){let t=Qw(this.array[e*this.itemSize+1]);return this.normalized&&(t=Ll(t,this.array)),t}setY(e,t){return this.normalized&&(t=_r(t,this.array)),this.array[e*this.itemSize+1]=dc(t),this}getZ(e){let t=Qw(this.array[e*this.itemSize+2]);return this.normalized&&(t=Ll(t,this.array)),t}setZ(e,t){return this.normalized&&(t=_r(t,this.array)),this.array[e*this.itemSize+2]=dc(t),this}getW(e){let t=Qw(this.array[e*this.itemSize+3]);return this.normalized&&(t=Ll(t,this.array)),t}setW(e,t){return this.normalized&&(t=_r(t,this.array)),this.array[e*this.itemSize+3]=dc(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=_r(t,this.array),r=_r(r,this.array)),this.array[e+0]=dc(t),this.array[e+1]=dc(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=_r(t,this.array),r=_r(r,this.array),i=_r(i,this.array)),this.array[e+0]=dc(t),this.array[e+1]=dc(r),this.array[e+2]=dc(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=_r(t,this.array),r=_r(r,this.array),i=_r(i,this.array),s=_r(s,this.array)),this.array[e+0]=dc(t),this.array[e+1]=dc(r),this.array[e+2]=dc(i),this.array[e+3]=dc(s),this}}class An extends ai{constructor(e,t,r){super(new Float32Array(e),t,r)}}let pue=0;const Ru=new zn,xO=new ei,Qb=new ve,Yc=new Ra,ww=new Ra,Qo=new ve;class gr extends kf{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:pue++}),this.uuid=iu(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Pq(e)?IP:NP)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new xr().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ru.makeRotationFromQuaternion(e),this.applyMatrix4(Ru),this}rotateX(e){return Ru.makeRotationX(e),this.applyMatrix4(Ru),this}rotateY(e){return Ru.makeRotationY(e),this.applyMatrix4(Ru),this}rotateZ(e){return Ru.makeRotationZ(e),this.applyMatrix4(Ru),this}translate(e,t,r){return Ru.makeTranslation(e,t,r),this.applyMatrix4(Ru),this}scale(e,t,r){return Ru.makeScale(e,t,r),this.applyMatrix4(Ru),this}lookAt(e){return xO.lookAt(e),xO.updateMatrix(),this.applyMatrix4(xO.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Qb).negate(),this.translate(Qb.x,Qb.y,Qb.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const r=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];r.push(o.x,o.y,o.z||0)}this.setAttribute("position",new An(r,3))}else{const r=Math.min(e.length,t.count);for(let i=0;i<r;i++){const s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ra);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ve(-1/0,-1/0,-1/0),new ve(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Yc.setFromBufferAttribute(s),this.morphTargetsRelative?(Qo.addVectors(this.boundingBox.min,Yc.min),this.boundingBox.expandByPoint(Qo),Qo.addVectors(this.boundingBox.max,Yc.max),this.boundingBox.expandByPoint(Qo)):(this.boundingBox.expandByPoint(Yc.min),this.boundingBox.expandByPoint(Yc.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new oa);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ve,1/0);return}if(e){const r=this.boundingSphere.center;if(Yc.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];ww.setFromBufferAttribute(a),this.morphTargetsRelative?(Qo.addVectors(Yc.min,ww.min),Yc.expandByPoint(Qo),Qo.addVectors(Yc.max,ww.max),Yc.expandByPoint(Qo)):(Yc.expandByPoint(ww.min),Yc.expandByPoint(ww.max))}Yc.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)Qo.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Qo));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Qo.fromBufferAttribute(a,c),l&&(Qb.fromBufferAttribute(e,c),Qo.add(Qb)),i=Math.max(i,r.distanceToSquared(Qo))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ai(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let B=0;B<r.count;B++)a[B]=new ve,l[B]=new ve;const c=new ve,u=new ve,d=new ve,f=new Nt,p=new Nt,g=new Nt,v=new ve,b=new ve;function x(B,N,I){c.fromBufferAttribute(r,B),u.fromBufferAttribute(r,N),d.fromBufferAttribute(r,I),f.fromBufferAttribute(s,B),p.fromBufferAttribute(s,N),g.fromBufferAttribute(s,I),u.sub(c),d.sub(c),p.sub(f),g.sub(f);const D=1/(p.x*g.y-g.x*p.y);isFinite(D)&&(v.copy(u).multiplyScalar(g.y).addScaledVector(d,-p.y).multiplyScalar(D),b.copy(d).multiplyScalar(p.x).addScaledVector(u,-g.x).multiplyScalar(D),a[B].add(v),a[N].add(v),a[I].add(v),l[B].add(b),l[N].add(b),l[I].add(b))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.count}]);for(let B=0,N=_.length;B<N;++B){const I=_[B],D=I.start,P=I.count;for(let G=D,W=D+P;G<W;G+=3)x(e.getX(G+0),e.getX(G+1),e.getX(G+2))}const E=new ve,C=new ve,M=new ve,R=new ve;function L(B){M.fromBufferAttribute(i,B),R.copy(M);const N=a[B];E.copy(N),E.sub(M.multiplyScalar(M.dot(N))).normalize(),C.crossVectors(R,N);const D=C.dot(l[B])<0?-1:1;o.setXYZW(B,E.x,E.y,E.z,D)}for(let B=0,N=_.length;B<N;++B){const I=_[B],D=I.start,P=I.count;for(let G=D,W=D+P;G<W;G+=3)L(e.getX(G+0)),L(e.getX(G+1)),L(e.getX(G+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new ai(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let f=0,p=r.count;f<p;f++)r.setXYZ(f,0,0,0);const i=new ve,s=new ve,o=new ve,a=new ve,l=new ve,c=new ve,u=new ve,d=new ve;if(e)for(let f=0,p=e.count;f<p;f+=3){const g=e.getX(f+0),v=e.getX(f+1),b=e.getX(f+2);i.fromBufferAttribute(t,g),s.fromBufferAttribute(t,v),o.fromBufferAttribute(t,b),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),a.fromBufferAttribute(r,g),l.fromBufferAttribute(r,v),c.fromBufferAttribute(r,b),a.add(u),l.add(u),c.add(u),r.setXYZ(g,a.x,a.y,a.z),r.setXYZ(v,l.x,l.y,l.z),r.setXYZ(b,c.x,c.y,c.z)}else for(let f=0,p=t.count;f<p;f+=3)i.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),o.fromBufferAttribute(t,f+2),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),r.setXYZ(f+0,u.x,u.y,u.z),r.setXYZ(f+1,u.x,u.y,u.z),r.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Qo.fromBufferAttribute(e,t),Qo.normalize(),e.setXYZ(t,Qo.x,Qo.y,Qo.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,f=new c.constructor(l.length*u);let p=0,g=0;for(let v=0,b=l.length;v<b;v++){a.isInterleavedBufferAttribute?p=l[v]*a.data.stride+a.offset:p=l[v]*u;for(let x=0;x<u;x++)f[g++]=c[p++]}return new ai(f,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new gr,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const f=c[u],p=e(f,r);l.push(p)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,f=c.length;d<f;d++){const p=c[d];u.push(p.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere=a.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone());const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let f=0,p=d.length;f<p;f++)u.push(d[f].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const qH=new zn,Z0=new Rv,JA=new oa,KH=new ve,ZA=new ve,QA=new ve,eT=new ve,SO=new ve,tT=new ve,YH=new ve,nT=new ve;class Li extends ei{constructor(e=new gr,t=new bc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){tT.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],d=s[l];u!==0&&(SO.fromBufferAttribute(d,e),o?tT.addScaledVector(SO,u):tT.addScaledVector(SO.sub(t),u))}t.add(tT)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),JA.copy(r.boundingSphere),JA.applyMatrix4(s),Z0.copy(e.ray).recast(e.near),!(JA.containsPoint(Z0.origin)===!1&&(Z0.intersectSphere(JA,KH)===null||Z0.origin.distanceToSquared(KH)>(e.far-e.near)**2))&&(qH.copy(s).invert(),Z0.copy(e.ray).applyMatrix4(qH),!(r.boundingBox!==null&&Z0.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,Z0)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,f=s.groups,p=s.drawRange;if(a!==null)if(Array.isArray(o))for(let g=0,v=f.length;g<v;g++){const b=f[g],x=o[b.materialIndex],_=Math.max(b.start,p.start),E=Math.min(a.count,Math.min(b.start+b.count,p.start+p.count));for(let C=_,M=E;C<M;C+=3){const R=a.getX(C),L=a.getX(C+1),B=a.getX(C+2);i=rT(this,x,e,r,c,u,d,R,L,B),i&&(i.faceIndex=Math.floor(C/3),i.face.materialIndex=b.materialIndex,t.push(i))}}else{const g=Math.max(0,p.start),v=Math.min(a.count,p.start+p.count);for(let b=g,x=v;b<x;b+=3){const _=a.getX(b),E=a.getX(b+1),C=a.getX(b+2);i=rT(this,o,e,r,c,u,d,_,E,C),i&&(i.faceIndex=Math.floor(b/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let g=0,v=f.length;g<v;g++){const b=f[g],x=o[b.materialIndex],_=Math.max(b.start,p.start),E=Math.min(l.count,Math.min(b.start+b.count,p.start+p.count));for(let C=_,M=E;C<M;C+=3){const R=C,L=C+1,B=C+2;i=rT(this,x,e,r,c,u,d,R,L,B),i&&(i.faceIndex=Math.floor(C/3),i.face.materialIndex=b.materialIndex,t.push(i))}}else{const g=Math.max(0,p.start),v=Math.min(l.count,p.start+p.count);for(let b=g,x=v;b<x;b+=3){const _=b,E=b+1,C=b+2;i=rT(this,o,e,r,c,u,d,_,E,C),i&&(i.faceIndex=Math.floor(b/3),t.push(i))}}}}function mue(n,e,t,r,i,s,o,a){let l;if(e.side===Ma?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===wf,a),l===null)return null;nT.copy(a),nT.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(nT);return c<t.near||c>t.far?null:{distance:c,point:nT.clone(),object:n}}function rT(n,e,t,r,i,s,o,a,l,c){n.getVertexPosition(a,ZA),n.getVertexPosition(l,QA),n.getVertexPosition(c,eT);const u=mue(n,e,t,r,ZA,QA,eT,YH);if(u){const d=new ve;yc.getBarycoord(YH,ZA,QA,eT,d),i&&(u.uv=yc.getInterpolatedAttribute(i,a,l,c,d,new Nt)),s&&(u.uv1=yc.getInterpolatedAttribute(s,a,l,c,d,new Nt)),o&&(u.normal=yc.getInterpolatedAttribute(o,a,l,c,d,new ve),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new ve,materialIndex:0};yc.getNormal(ZA,QA,eT,f.normal),u.face=f,u.barycoord=d}return u}class Qp extends gr{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let f=0,p=0;g("z","y","x",-1,-1,r,t,e,o,s,0),g("z","y","x",1,-1,r,t,-e,o,s,1),g("x","z","y",1,1,e,r,t,i,o,2),g("x","z","y",1,-1,e,r,-t,i,o,3),g("x","y","z",1,-1,e,t,r,i,s,4),g("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new An(c,3)),this.setAttribute("normal",new An(u,3)),this.setAttribute("uv",new An(d,2));function g(v,b,x,_,E,C,M,R,L,B,N){const I=C/L,D=M/B,P=C/2,G=M/2,W=R/2,q=L+1,z=B+1;let J=0,Q=0;const Y=new ve;for(let X=0;X<z;X++){const te=X*D-G;for(let ne=0;ne<q;ne++){const le=ne*I-P;Y[v]=le*_,Y[b]=te*E,Y[x]=W,c.push(Y.x,Y.y,Y.z),Y[v]=0,Y[b]=0,Y[x]=R>0?1:-1,u.push(Y.x,Y.y,Y.z),d.push(ne/L),d.push(1-X/B),J+=1}}for(let X=0;X<B;X++)for(let te=0;te<L;te++){const ne=f+te+q*X,le=f+te+q*(X+1),ye=f+(te+1)+q*(X+1),ue=f+(te+1)+q*X;l.push(ne,le,ue),l.push(le,ye,ue),Q+=6}a.addGroup(p,Q,N),p+=Q,f+=J}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qp(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function h1(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Il(n){const e={};for(let t=0;t<n.length;t++){const r=h1(n[t]);for(const i in r)e[i]=r[i]}return e}function gue(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function Vq(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Qr.workingColorSpace}const DP={clone:h1,merge:Il};var yue=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,vue=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Da extends Vo{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=yue,this.fragmentShader=vue,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=h1(e.uniforms),this.uniformsGroups=gue(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class cI extends ei{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new zn,this.projectionMatrix=new zn,this.projectionMatrixInverse=new zn,this.coordinateSystem=tu,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const eg=new ve,JH=new Nt,ZH=new Nt;class So extends cI{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=u1*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Xy*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return u1*2*Math.atan(Math.tan(Xy*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){eg.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(eg.x,eg.y).multiplyScalar(-e/eg.z),eg.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(eg.x,eg.y).multiplyScalar(-e/eg.z)}getViewSize(e,t){return this.getViewBounds(e,JH,ZH),t.subVectors(ZH,JH)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Xy*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const ex=-90,tx=1;class Gq extends ei{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new So(ex,tx,e,t);i.layers=this.layers,this.add(i);const s=new So(ex,tx,e,t);s.layers=this.layers,this.add(s);const o=new So(ex,tx,e,t);o.layers=this.layers,this.add(o);const a=new So(ex,tx,e,t);a.layers=this.layers,this.add(a);const l=new So(ex,tx,e,t);l.layers=this.layers,this.add(l);const c=new So(ex,tx,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===tu)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===c1)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,d=e.getRenderTarget(),f=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const v=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,c),r.texture.generateMipmaps=v,e.setRenderTarget(r,5,i),e.render(t,u),e.setRenderTarget(d,f,p),e.xr.enabled=g,r.texture.needsPMREMUpdate=!0}}class MC extends Ti{constructor(e=[],t=_f,r,i,s,o,a,l,c,u){super(e,t,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class kP extends Ec{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new MC(i),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Qp(5,5,5),s=new Da({name:"CubemapFromEquirect",uniforms:h1(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Ma,blending:pf});s.uniforms.tEquirect.value=t;const o=new Li(i,s),a=t.minFilter;return t.minFilter===Hu&&(t.minFilter=oi),new Gq(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,r=!0,i=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}class kp extends ei{constructor(){super(),this.isGroup=!0,this.type="Group"}}const bue={type:"move"};class bM{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new kp,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new kp,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ve,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ve),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new kp,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ve,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ve),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const v of e.hand.values()){const b=t.getJointPose(v,r),x=this._getHandJoint(c,v);b!==null&&(x.matrix.fromArray(b.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.matrixWorldNeedsUpdate=!0,x.jointRadius=b.radius),x.visible=b!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],f=u.position.distanceTo(d.position),p=.02,g=.005;c.inputState.pinching&&f>p+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=p-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(bue)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new kp;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class uI{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new rn(e),this.density=t}clone(){return new uI(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class RC{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new rn(e),this.near=t,this.far=r}clone(){return new RC(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let D1=class extends ei{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ac,this.environmentIntensity=1,this.environmentRotation=new Ac,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};class NC{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=z_,this.updateRanges=[],this.version=0,this.uuid=iu()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=iu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=iu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ml=new ve;class Tg{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Ml.fromBufferAttribute(this,t),Ml.applyMatrix4(e),this.setXYZ(t,Ml.x,Ml.y,Ml.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Ml.fromBufferAttribute(this,t),Ml.applyNormalMatrix(e),this.setXYZ(t,Ml.x,Ml.y,Ml.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Ml.fromBufferAttribute(this,t),Ml.transformDirection(e),this.setXYZ(t,Ml.x,Ml.y,Ml.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=Ll(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=_r(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=_r(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=_r(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=_r(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=_r(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ll(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ll(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ll(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ll(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=_r(t,this.array),r=_r(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=_r(t,this.array),r=_r(r,this.array),i=_r(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=_r(t,this.array),r=_r(r,this.array),i=_r(i,this.array),s=_r(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new ai(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Tg(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class OP extends Vo{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new rn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let nx;const _w=new ve,rx=new ve,ix=new ve,sx=new Nt,Cw=new Nt,Wq=new zn,iT=new ve,Ew=new ve,sT=new ve,QH=new Nt,wO=new Nt,eV=new Nt;class jq extends ei{constructor(e=new OP){if(super(),this.isSprite=!0,this.type="Sprite",nx===void 0){nx=new gr;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new NC(t,5);nx.setIndex([0,1,2,0,2,3]),nx.setAttribute("position",new Tg(r,3,0,!1)),nx.setAttribute("uv",new Tg(r,2,3,!1))}this.geometry=nx,this.material=e,this.center=new Nt(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),rx.setFromMatrixScale(this.matrixWorld),Wq.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),ix.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&rx.multiplyScalar(-ix.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;oT(iT.set(-.5,-.5,0),ix,o,rx,i,s),oT(Ew.set(.5,-.5,0),ix,o,rx,i,s),oT(sT.set(.5,.5,0),ix,o,rx,i,s),QH.set(0,0),wO.set(1,0),eV.set(1,1);let a=e.ray.intersectTriangle(iT,Ew,sT,!1,_w);if(a===null&&(oT(Ew.set(-.5,.5,0),ix,o,rx,i,s),wO.set(0,1),a=e.ray.intersectTriangle(iT,sT,Ew,!1,_w),a===null))return;const l=e.ray.origin.distanceTo(_w);l<e.near||l>e.far||t.push({distance:l,point:_w.clone(),uv:yc.getInterpolation(_w,iT,Ew,sT,QH,wO,eV,new Nt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function oT(n,e,t,r,i,s){sx.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(Cw.x=s*sx.x-i*sx.y,Cw.y=i*sx.x+s*sx.y):Cw.copy(sx),n.copy(e),n.x+=Cw.x,n.y+=Cw.y,n.applyMatrix4(Wq)}const aT=new ve,tV=new ve;class Xq extends ei{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let r=0;r<t.length;r++)if(t[r].distance===e){const i=t.splice(r,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){aT.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(aT);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){aT.setFromMatrixPosition(e.matrixWorld),tV.setFromMatrixPosition(this.matrixWorld);const r=aT.distanceTo(tV)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const nV=new ve,rV=new Hr,iV=new Hr,xue=new ve,sV=new zn,lT=new ve,_O=new oa,oV=new zn,CO=new Rv;class BP extends Li{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=X$,this.bindMatrix=new zn,this.bindMatrixInverse=new zn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ra),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,lT),this.boundingBox.expandByPoint(lT)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new oa),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,lT),this.boundingSphere.expandByPoint(lT)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_O.copy(this.boundingSphere),_O.applyMatrix4(i),e.ray.intersectsSphere(_O)!==!1&&(oV.copy(i).invert(),CO.copy(e.ray).applyMatrix4(oV),!(this.boundingBox!==null&&CO.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,CO)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Hr,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===X$?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Aq?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;rV.fromBufferAttribute(i.attributes.skinIndex,e),iV.fromBufferAttribute(i.attributes.skinWeight,e),nV.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=iV.getComponent(s);if(o!==0){const a=rV.getComponent(s);sV.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(xue.copy(nV).applyMatrix4(sV),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class dI extends ei{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Jd extends Ti{constructor(e=null,t=1,r=1,i,s,o,a,l,c=sa,u=sa,d,f){super(null,o,a,l,c,u,i,s,d,f),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const aV=new zn,Sue=new zn;class IC{constructor(e=[],t=[]){this.uuid=iu(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new zn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new zn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:Sue;aV.multiplyMatrices(a,t[s]),aV.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new IC(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Jd(t,e,e,uo,is);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new dI),this.bones.push(o),this.boneInverses.push(new zn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class rv extends ai{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const ox=new zn,lV=new zn,cT=[],cV=new Ra,wue=new zn,Aw=new Li,Tw=new oa;class $P extends Li{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new rv(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,wue)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Ra),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,ox),cV.copy(e.boundingBox).applyMatrix4(ox),this.boundingBox.union(cV)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new oa),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,ox),Tw.copy(e.boundingSphere).applyMatrix4(ox),this.boundingSphere.union(Tw)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const r=t.morphTargetInfluences,i=this.morphTexture.source.data.data,s=r.length+1,o=e*s+1;for(let a=0;a<r.length;a++)r[a]=i[o+a]}raycast(e,t){const r=this.matrixWorld,i=this.count;if(Aw.geometry=this.geometry,Aw.material=this.material,Aw.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Tw.copy(this.boundingSphere),Tw.applyMatrix4(r),e.ray.intersectsSphere(Tw)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,ox),lV.multiplyMatrices(r,ox),Aw.matrixWorld=lV,Aw.raycast(e,cT);for(let o=0,a=cT.length;o<a;o++){const l=cT[o];l.instanceId=s,l.object=this,t.push(l)}cT.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new rv(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const r=t.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new Jd(new Float32Array(i*this.count),i,this.count,AC,is));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<r.length;c++)o+=r[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=i*e;s[l]=a,s.set(r,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const EO=new ve,_ue=new ve,Cue=new xr;class Cp{constructor(e=new ve(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=EO.subVectors(r,t).cross(_ue.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(EO),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||Cue.getNormalMatrix(e),i=this.coplanarPoint(EO).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Q0=new oa,Eue=new Nt(.5,.5),uT=new ve;class k1{constructor(e=new Cp,t=new Cp,r=new Cp,i=new Cp,s=new Cp,o=new Cp){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=tu,r=!1){const i=this.planes,s=e.elements,o=s[0],a=s[1],l=s[2],c=s[3],u=s[4],d=s[5],f=s[6],p=s[7],g=s[8],v=s[9],b=s[10],x=s[11],_=s[12],E=s[13],C=s[14],M=s[15];if(i[0].setComponents(c-o,p-u,x-g,M-_).normalize(),i[1].setComponents(c+o,p+u,x+g,M+_).normalize(),i[2].setComponents(c+a,p+d,x+v,M+E).normalize(),i[3].setComponents(c-a,p-d,x-v,M-E).normalize(),r)i[4].setComponents(l,f,b,C).normalize(),i[5].setComponents(c-l,p-f,x-b,M-C).normalize();else if(i[4].setComponents(c-l,p-f,x-b,M-C).normalize(),t===tu)i[5].setComponents(c+l,p+f,x+b,M+C).normalize();else if(t===c1)i[5].setComponents(l,f,b,C).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Q0.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Q0.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Q0)}intersectsSprite(e){Q0.center.set(0,0,0);const t=Eue.distanceTo(e.center);return Q0.radius=.7071067811865476+t,Q0.applyMatrix4(e.matrixWorld),this.intersectsSphere(Q0)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(uT.x=i.normal.x>0?e.max.x:e.min.x,uT.y=i.normal.y>0?e.max.y:e.min.y,uT.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(uT)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Kh=new zn,Yh=new k1;class hI{constructor(){this.coordinateSystem=tu}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Kh.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Yh.setFromProjectionMatrix(Kh,i.coordinateSystem,i.reversedDepth),Yh.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Kh.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Yh.setFromProjectionMatrix(Kh,i.coordinateSystem,i.reversedDepth),Yh.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Kh.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Yh.setFromProjectionMatrix(Kh,i.coordinateSystem,i.reversedDepth),Yh.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Kh.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Yh.setFromProjectionMatrix(Kh,i.coordinateSystem,i.reversedDepth),Yh.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Kh.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Yh.setFromProjectionMatrix(Kh,i.coordinateSystem,i.reversedDepth),Yh.containsPoint(e))return!0}return!1}clone(){return new hI}}function AO(n,e){return n-e}function Aue(n,e){return n.z-e.z}function Tue(n,e){return e.z-n.z}class Mue{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,r,i){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=t,a.z=r,a.index=i}reset(){this.list.length=0,this.index=0}}const lc=new zn,Rue=new rn(1,1,1),uV=new k1,Nue=new hI,dT=new Ra,ey=new oa,Mw=new ve,dV=new ve,Iue=new ve,TO=new Mue,Ya=new Li,hT=[];function Due(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*r);e.needsUpdate=!0}function ty(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++)e[r]=n[r]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class qq extends Li{constructor(e,t,r=t*2,i){super(new gr,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new Jd(t,e,e,uo,is);this._matricesTexture=r}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),r=new Jd(t,e,e,TC,Cf);this._indirectTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),r=new Jd(t,e,e,uo,is);r.colorSpace=Qr.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:c}=o,u=new a.constructor(r*l),d=new ai(u,l,c);t.setAttribute(s,d)}if(e.getIndex()!==null){const s=r>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new ai(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(!e.hasAttribute(r))throw new Error(`THREE.BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=t.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ra);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const s=t[r].geometryIndex;this.getMatrixAt(r,lc),this.getBoundingBoxAt(s,dT).applyMatrix4(lc),e.union(dT)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new oa);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const s=t[r].geometryIndex;this.getMatrixAt(r,lc),this.getBoundingSphereAt(s,ey).applyMatrix4(lc),e.union(ey)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(AO),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=r):(i=this._instanceInfo.length,this._instanceInfo.push(r));const s=this._matricesTexture;lc.identity().toArray(s.image.data,i*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(Rue.toArray(o.image.data,i*4),o.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,t=-1,r=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=r===-1?o.count:r),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(AO),l=this._availableGeometryIds.shift(),s[l]=i):(l=this._geometryCount,this._geometryCount++,s.push(i)),this.setGeometryAt(l,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=t.getIndex(),a=this._geometryInfo[e];if(i&&o.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const u in r.attributes){const d=t.getAttribute(u),f=r.getAttribute(u);Due(d,f,l);const p=d.itemSize;for(let g=d.count,v=c;g<v;g++){const b=l+g;for(let x=0;x<p;x++)f.setComponent(b,x,0)}f.needsUpdate=!0,f.addUpdateRange(l*p,c*p)}if(i){const u=a.indexStart,d=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let f=0;f<o.count;f++)s.setX(u+f,l+o.getX(f));for(let f=o.count,p=d;f<p;f++)s.setX(u+f,l);s.needsUpdate=!0,s.addUpdateRange(u,a.reservedIndexCount)}return a.start=i?a.indexStart:a.vertexStart,a.count=i?a.indexCount:a.vertexCount,a.boundingBox=null,t.boundingBox!==null&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,t.boundingSphere!==null&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const r=this._instanceInfo;for(let i=0,s=r.length;i<s;i++)r[i].active&&r[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const r=this._geometryInfo,i=r.map((o,a)=>a).sort((o,a)=>r[o].vertexStart-r[a].vertexStart),s=this.geometry;for(let o=0,a=r.length;o<a;o++){const l=i[o],c=r[l];if(c.active!==!1){if(s.index!==null){if(c.indexStart!==t){const{indexStart:u,vertexStart:d,reservedIndexCount:f}=c,p=s.index,g=p.array,v=e-d;for(let b=u;b<u+f;b++)g[b]=g[b]+v;p.array.copyWithin(t,u,u+f),p.addUpdateRange(t,f),c.indexStart=t}t+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:u,reservedVertexCount:d}=c,f=s.attributes;for(const p in f){const g=f[p],{array:v,itemSize:b}=g;v.copyWithin(e*b,u*b,(u+d)*b),g.addUpdateRange(e*b,d*b)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=s.index?c.indexStart:c.vertexStart,this._nextIndexStart=s.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const s=new Ra,o=r.index,a=r.attributes.position;for(let l=i.start,c=i.start+i.count;l<c;l++){let u=l;o&&(u=o.getX(u)),s.expandByPoint(Mw.fromBufferAttribute(a,u))}i.boundingBox=s}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const s=new oa;this.getBoundingBoxAt(e,dT),dT.getCenter(s.center);const o=r.index,a=r.attributes.position;let l=0;for(let c=i.start,u=i.start+i.count;c<u;c++){let d=c;o&&(d=o.getX(d)),Mw.fromBufferAttribute(a,d),l=Math.max(l,s.center.distanceToSquared(Mw))}s.radius=Math.sqrt(l),i.boundingSphere=s}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const r=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,e*16),r.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const r=this._geometryInfo[e];return t.vertexStart=r.vertexStart,t.vertexCount=r.vertexCount,t.reservedVertexCount=r.reservedVertexCount,t.indexStart=r.indexStart,t.indexCount=r.indexCount,t.reservedIndexCount=r.reservedIndexCount,t.start=r.start,t.count=r.count,t}setInstanceCount(e){const t=this._availableInstanceIds,r=this._instanceInfo;for(t.sort(AO);t[t.length-1]===r.length-1;)r.pop(),t.pop();if(e<r.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),s=new Int32Array(e);ty(this._multiDrawCounts,i),ty(this._multiDrawStarts,s),this._multiDrawCounts=i,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;o.dispose(),this._initIndirectTexture(),ty(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),ty(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),ty(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const r=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...r.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...r.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new gr,this._initializeGeometry(s));const o=this.geometry;s.index&&ty(s.index.array,o.index.array);for(const a in s.attributes)ty(s.attributes[a].array,o.attributes[a].array)}raycast(e,t){const r=this._instanceInfo,i=this._geometryInfo,s=this.matrixWorld,o=this.geometry;Ya.material=this.material,Ya.geometry.index=o.index,Ya.geometry.attributes=o.attributes,Ya.geometry.boundingBox===null&&(Ya.geometry.boundingBox=new Ra),Ya.geometry.boundingSphere===null&&(Ya.geometry.boundingSphere=new oa);for(let a=0,l=r.length;a<l;a++){if(!r[a].visible||!r[a].active)continue;const c=r[a].geometryIndex,u=i[c];Ya.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(a,Ya.matrixWorld).premultiply(s),this.getBoundingBoxAt(c,Ya.geometry.boundingBox),this.getBoundingSphereAt(c,Ya.geometry.boundingSphere),Ya.raycast(e,hT);for(let d=0,f=hT.length;d<f;d++){const p=hT[d];p.object=this,p.batchId=a,t.push(p)}hT.length=0}Ya.material=null,Ya.geometry.index=null,Ya.geometry.attributes={},Ya.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._instanceInfo,c=this._multiDrawStarts,u=this._multiDrawCounts,d=this._geometryInfo,f=this.perObjectFrustumCulled,p=this._indirectTexture,g=p.image.data,v=r.isArrayCamera?Nue:uV;f&&!r.isArrayCamera&&(lc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),uV.setFromProjectionMatrix(lc,r.coordinateSystem,r.reversedDepth));let b=0;if(this.sortObjects){lc.copy(this.matrixWorld).invert(),Mw.setFromMatrixPosition(r.matrixWorld).applyMatrix4(lc),dV.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(lc);for(let E=0,C=l.length;E<C;E++)if(l[E].visible&&l[E].active){const M=l[E].geometryIndex;this.getMatrixAt(E,lc),this.getBoundingSphereAt(M,ey).applyMatrix4(lc);let R=!1;if(f&&(R=!v.intersectsSphere(ey,r)),!R){const L=d[M],B=Iue.subVectors(ey.center,Mw).dot(dV);TO.push(L.start,L.count,B,E)}}const x=TO.list,_=this.customSort;_===null?x.sort(s.transparent?Tue:Aue):_.call(this,x,r);for(let E=0,C=x.length;E<C;E++){const M=x[E];c[b]=M.start*a,u[b]=M.count,g[b]=M.index,b++}TO.reset()}else for(let x=0,_=l.length;x<_;x++)if(l[x].visible&&l[x].active){const E=l[x].geometryIndex;let C=!1;if(f&&(this.getMatrixAt(x,lc),this.getBoundingSphereAt(E,ey).applyMatrix4(lc),C=!v.intersectsSphere(ey,r)),!C){const M=d[E];c[b]=M.start*a,u[b]=M.count,g[b]=x,b++}}p.needsUpdate=!0,this._multiDrawCount=b,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class ol extends Vo{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new rn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const DR=new ve,kR=new ve,hV=new zn,Rw=new Rv,fT=new oa,MO=new ve,fV=new ve;class Hp extends ei{constructor(e=new gr,t=new ol){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)DR.fromBufferAttribute(t,i-1),kR.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=DR.distanceTo(kR);e.setAttribute("lineDistance",new An(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),fT.copy(r.boundingSphere),fT.applyMatrix4(i),fT.radius+=s,e.ray.intersectsSphere(fT)===!1)return;hV.copy(i).invert(),Rw.copy(e.ray).applyMatrix4(hV);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=r.index,f=r.attributes.position;if(u!==null){const p=Math.max(0,o.start),g=Math.min(u.count,o.start+o.count);for(let v=p,b=g-1;v<b;v+=c){const x=u.getX(v),_=u.getX(v+1),E=pT(this,e,Rw,l,x,_,v);E&&t.push(E)}if(this.isLineLoop){const v=u.getX(g-1),b=u.getX(p),x=pT(this,e,Rw,l,v,b,g-1);x&&t.push(x)}}else{const p=Math.max(0,o.start),g=Math.min(f.count,o.start+o.count);for(let v=p,b=g-1;v<b;v+=c){const x=pT(this,e,Rw,l,v,v+1,v);x&&t.push(x)}if(this.isLineLoop){const v=pT(this,e,Rw,l,g-1,p,g-1);v&&t.push(v)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function pT(n,e,t,r,i,s,o){const a=n.geometry.attributes.position;if(DR.fromBufferAttribute(a,i),kR.fromBufferAttribute(a,s),t.distanceSqToSegment(DR,kR,MO,fV)>r)return;MO.applyMatrix4(n.matrixWorld);const c=e.ray.origin.distanceTo(MO);if(!(c<e.near||c>e.far))return{distance:c,point:fV.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}const pV=new ve,mV=new ve;class hh extends Hp{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)pV.fromBufferAttribute(t,i),mV.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+pV.distanceTo(mV);e.setAttribute("lineDistance",new An(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LP extends Hp{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class fI extends Vo{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new rn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const gV=new zn,J$=new Rv,mT=new oa,gT=new ve;class FP extends ei{constructor(e=new gr,t=new fI){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),mT.copy(r.boundingSphere),mT.applyMatrix4(i),mT.radius+=s,e.ray.intersectsSphere(mT)===!1)return;gV.copy(i).invert(),J$.copy(e.ray).applyMatrix4(gV);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,d=r.attributes.position;if(c!==null){const f=Math.max(0,o.start),p=Math.min(c.count,o.start+o.count);for(let g=f,v=p;g<v;g++){const b=c.getX(g);gT.fromBufferAttribute(d,b),yV(gT,b,l,i,e,t,this)}}else{const f=Math.max(0,o.start),p=Math.min(d.count,o.start+o.count);for(let g=f,v=p;g<v;g++)gT.fromBufferAttribute(d,g),yV(gT,g,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function yV(n,e,t,r,i,s,o){const a=J$.distanceSqToPoint(n);if(a<t){const l=new ve;J$.closestPointToPoint(n,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class Kq extends Ti{constructor(e,t,r,i,s=oi,o=oi,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const u=this;function d(){u.needsUpdate=!0,u._requestVideoFrameCallbackId=e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(d))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class kue extends Kq{constructor(e,t,r,i,s,o,a,l){super({},e,t,r,i,s,o,a,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class Oue extends Ti{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=sa,this.minFilter=sa,this.generateMipmaps=!1,this.needsUpdate=!0}}class pI extends Ti{constructor(e,t,r,i,s,o,a,l,c,u,d,f){super(null,o,a,l,c,u,i,s,d,f),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Bue extends pI{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=co,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class $ue extends pI{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,_f),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Lue extends Ti{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class PP extends Ti{constructor(e,t,r=Cf,i,s,o,a=sa,l=sa,c,u=s1,d=1){if(u!==s1&&u!==o1)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const f={width:e,height:t,depth:d};super(f,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new ug(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class mI extends gr{constructor(e=1,t=1,r=4,i=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:i,heightSegments:s},t=Math.max(0,t),r=Math.max(1,Math.floor(r)),i=Math.max(3,Math.floor(i)),s=Math.max(1,Math.floor(s));const o=[],a=[],l=[],c=[],u=t/2,d=Math.PI/2*e,f=t,p=2*d+f,g=r*2+s,v=i+1,b=new ve,x=new ve;for(let _=0;_<=g;_++){let E=0,C=0,M=0,R=0;if(_<=r){const N=_/r,I=N*Math.PI/2;C=-u-e*Math.cos(I),M=e*Math.sin(I),R=-e*Math.cos(I),E=N*d}else if(_<=r+s){const N=(_-r)/s;C=-u+N*t,M=e,R=0,E=d+N*f}else{const N=(_-r-s)/r,I=N*Math.PI/2;C=u+e*Math.sin(I),M=e*Math.cos(I),R=e*Math.sin(I),E=d+f+N*d}const L=Math.max(0,Math.min(1,E/p));let B=0;_===0?B=.5/i:_===g&&(B=-.5/i);for(let N=0;N<=i;N++){const I=N/i,D=I*Math.PI*2,P=Math.sin(D),G=Math.cos(D);x.x=-M*G,x.y=C,x.z=M*P,a.push(x.x,x.y,x.z),b.set(-M*G,R,M*P),b.normalize(),l.push(b.x,b.y,b.z),c.push(I+B,L)}if(_>0){const N=(_-1)*v;for(let I=0;I<i;I++){const D=N+I,P=N+I+1,G=_*v+I,W=_*v+I+1;o.push(D,P,G),o.push(P,W,G)}}}this.setIndex(o),this.setAttribute("position",new An(a,3)),this.setAttribute("normal",new An(l,3)),this.setAttribute("uv",new An(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mI(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class gI extends gr{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new ve,u=new Nt;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,f=3;d<=t;d++,f+=3){const p=r+d/t*i;c.x=e*Math.cos(p),c.y=e*Math.sin(p),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[f]/e+1)/2,u.y=(o[f+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new An(o,3)),this.setAttribute("normal",new An(a,3)),this.setAttribute("uv",new An(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gI(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class DC extends gr{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],d=[],f=[],p=[];let g=0;const v=[],b=r/2;let x=0;_(),o===!1&&(e>0&&E(!0),t>0&&E(!1)),this.setIndex(u),this.setAttribute("position",new An(d,3)),this.setAttribute("normal",new An(f,3)),this.setAttribute("uv",new An(p,2));function _(){const C=new ve,M=new ve;let R=0;const L=(t-e)/r;for(let B=0;B<=s;B++){const N=[],I=B/s,D=I*(t-e)+e;for(let P=0;P<=i;P++){const G=P/i,W=G*l+a,q=Math.sin(W),z=Math.cos(W);M.x=D*q,M.y=-I*r+b,M.z=D*z,d.push(M.x,M.y,M.z),C.set(q,L,z).normalize(),f.push(C.x,C.y,C.z),p.push(G,1-I),N.push(g++)}v.push(N)}for(let B=0;B<i;B++)for(let N=0;N<s;N++){const I=v[N][B],D=v[N+1][B],P=v[N+1][B+1],G=v[N][B+1];(e>0||N!==0)&&(u.push(I,D,G),R+=3),(t>0||N!==s-1)&&(u.push(D,P,G),R+=3)}c.addGroup(x,R,0),x+=R}function E(C){const M=g,R=new Nt,L=new ve;let B=0;const N=C===!0?e:t,I=C===!0?1:-1;for(let P=1;P<=i;P++)d.push(0,b*I,0),f.push(0,I,0),p.push(.5,.5),g++;const D=g;for(let P=0;P<=i;P++){const W=P/i*l+a,q=Math.cos(W),z=Math.sin(W);L.x=N*z,L.y=b*I,L.z=N*q,d.push(L.x,L.y,L.z),f.push(0,I,0),R.x=q*.5+.5,R.y=z*.5*I+.5,p.push(R.x,R.y),g++}for(let P=0;P<i;P++){const G=M+P,W=D+P;C===!0?u.push(W,W+1,G):u.push(W+1,W,G),B+=3}c.addGroup(x,B,C===!0?1:2),x+=B}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new DC(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class kC extends DC{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new kC(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Vg extends gr{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),c(r),u(),this.setAttribute("position",new An(s,3)),this.setAttribute("normal",new An(s.slice(),3)),this.setAttribute("uv",new An(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(_){const E=new ve,C=new ve,M=new ve;for(let R=0;R<t.length;R+=3)p(t[R+0],E),p(t[R+1],C),p(t[R+2],M),l(E,C,M,_)}function l(_,E,C,M){const R=M+1,L=[];for(let B=0;B<=R;B++){L[B]=[];const N=_.clone().lerp(C,B/R),I=E.clone().lerp(C,B/R),D=R-B;for(let P=0;P<=D;P++)P===0&&B===R?L[B][P]=N:L[B][P]=N.clone().lerp(I,P/D)}for(let B=0;B<R;B++)for(let N=0;N<2*(R-B)-1;N++){const I=Math.floor(N/2);N%2===0?(f(L[B][I+1]),f(L[B+1][I]),f(L[B][I])):(f(L[B][I+1]),f(L[B+1][I+1]),f(L[B+1][I]))}}function c(_){const E=new ve;for(let C=0;C<s.length;C+=3)E.x=s[C+0],E.y=s[C+1],E.z=s[C+2],E.normalize().multiplyScalar(_),s[C+0]=E.x,s[C+1]=E.y,s[C+2]=E.z}function u(){const _=new ve;for(let E=0;E<s.length;E+=3){_.x=s[E+0],_.y=s[E+1],_.z=s[E+2];const C=b(_)/2/Math.PI+.5,M=x(_)/Math.PI+.5;o.push(C,1-M)}g(),d()}function d(){for(let _=0;_<o.length;_+=6){const E=o[_+0],C=o[_+2],M=o[_+4],R=Math.max(E,C,M),L=Math.min(E,C,M);R>.9&&L<.1&&(E<.2&&(o[_+0]+=1),C<.2&&(o[_+2]+=1),M<.2&&(o[_+4]+=1))}}function f(_){s.push(_.x,_.y,_.z)}function p(_,E){const C=_*3;E.x=e[C+0],E.y=e[C+1],E.z=e[C+2]}function g(){const _=new ve,E=new ve,C=new ve,M=new ve,R=new Nt,L=new Nt,B=new Nt;for(let N=0,I=0;N<s.length;N+=9,I+=6){_.set(s[N+0],s[N+1],s[N+2]),E.set(s[N+3],s[N+4],s[N+5]),C.set(s[N+6],s[N+7],s[N+8]),R.set(o[I+0],o[I+1]),L.set(o[I+2],o[I+3]),B.set(o[I+4],o[I+5]),M.copy(_).add(E).add(C).divideScalar(3);const D=b(M);v(R,I+0,_,D),v(L,I+2,E,D),v(B,I+4,C,D)}}function v(_,E,C,M){M<0&&_.x===1&&(o[E]=_.x-1),C.x===0&&C.z===0&&(o[E]=M/2/Math.PI+.5)}function b(_){return Math.atan2(_.z,-_.x)}function x(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vg(e.vertices,e.indices,e.radius,e.details)}}class yI extends Vg{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new yI(e.radius,e.detail)}}const yT=new ve,vT=new ve,RO=new ve,bT=new yc;class Yq extends gr{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Xy*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],d=new Array(3),f={},p=[];for(let g=0;g<l;g+=3){o?(c[0]=o.getX(g),c[1]=o.getX(g+1),c[2]=o.getX(g+2)):(c[0]=g,c[1]=g+1,c[2]=g+2);const{a:v,b,c:x}=bT;if(v.fromBufferAttribute(a,c[0]),b.fromBufferAttribute(a,c[1]),x.fromBufferAttribute(a,c[2]),bT.getNormal(RO),d[0]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,d[1]=`${Math.round(b.x*i)},${Math.round(b.y*i)},${Math.round(b.z*i)}`,d[2]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let _=0;_<3;_++){const E=(_+1)%3,C=d[_],M=d[E],R=bT[u[_]],L=bT[u[E]],B=`${C}_${M}`,N=`${M}_${C}`;N in f&&f[N]?(RO.dot(f[N].normal)<=s&&(p.push(R.x,R.y,R.z),p.push(L.x,L.y,L.z)),f[N]=null):B in f||(f[B]={index0:c[_],index1:c[E],normal:RO.clone()})}}for(const g in f)if(f[g]){const{index0:v,index1:b}=f[g];yT.fromBufferAttribute(a,v),vT.fromBufferAttribute(a,b),p.push(yT.x,yT.y,yT.z),p.push(vT.x,vT.y,vT.z)}this.setAttribute("position",new An(p,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class fh{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const u=r[i],f=r[i+1]-u,p=(o-u)/f;return(i+p)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new Nt:new ve);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t=!1){const r=new ve,i=[],s=[],o=[],a=new ve,l=new zn;for(let p=0;p<=e;p++){const g=p/e;i[p]=this.getTangentAt(g,new ve)}s[0]=new ve,o[0]=new ve;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),d=Math.abs(i[0].y),f=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),d<=c&&(c=d,r.set(0,1,0)),f<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let p=1;p<=e;p++){if(s[p]=s[p-1].clone(),o[p]=o[p-1].clone(),a.crossVectors(i[p-1],i[p]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(nr(i[p-1].dot(i[p]),-1,1));s[p].applyMatrix4(l.makeRotationAxis(a,g))}o[p].crossVectors(i[p],s[p])}if(t===!0){let p=Math.acos(nr(s[0].dot(s[e]),-1,1));p/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(p=-p);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(i[g],p*g)),o[g].crossVectors(i[g],s[g])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class vI extends fh{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new Nt){const r=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),f=l-this.aX,p=c-this.aY;l=f*u-p*d+this.aX,c=f*d+p*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Jq extends vI{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function UP(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,d){let f=(o-s)/c-(a-s)/(c+u)+(a-o)/u,p=(a-o)/u-(l-o)/(u+d)+(l-a)/d;f*=u,p*=u,i(o,a,f,p)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const xT=new ve,NO=new UP,IO=new UP,DO=new UP;class Zq extends fh{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new ve){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=i[(a-1)%s]:(xT.subVectors(i[0],i[1]).add(i[0]),c=xT);const d=i[a%s],f=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:(xT.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=xT),this.curveType==="centripetal"||this.curveType==="chordal"){const p=this.curveType==="chordal"?.5:.25;let g=Math.pow(c.distanceToSquared(d),p),v=Math.pow(d.distanceToSquared(f),p),b=Math.pow(f.distanceToSquared(u),p);v<1e-4&&(v=1),g<1e-4&&(g=v),b<1e-4&&(b=v),NO.initNonuniformCatmullRom(c.x,d.x,f.x,u.x,g,v,b),IO.initNonuniformCatmullRom(c.y,d.y,f.y,u.y,g,v,b),DO.initNonuniformCatmullRom(c.z,d.z,f.z,u.z,g,v,b)}else this.curveType==="catmullrom"&&(NO.initCatmullRom(c.x,d.x,f.x,u.x,this.tension),IO.initCatmullRom(c.y,d.y,f.y,u.y,this.tension),DO.initCatmullRom(c.z,d.z,f.z,u.z,this.tension));return r.set(NO.calc(l),IO.calc(l),DO.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new ve().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function vV(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function Fue(n,e){const t=1-n;return t*t*e}function Pue(n,e){return 2*(1-n)*n*e}function Uue(n,e){return n*n*e}function __(n,e,t,r){return Fue(n,e)+Pue(n,t)+Uue(n,r)}function zue(n,e){const t=1-n;return t*t*t*e}function Hue(n,e){const t=1-n;return 3*t*t*n*e}function Vue(n,e){return 3*(1-n)*n*n*e}function Gue(n,e){return n*n*n*e}function C_(n,e,t,r,i){return zue(n,e)+Hue(n,t)+Vue(n,r)+Gue(n,i)}class zP extends fh{constructor(e=new Nt,t=new Nt,r=new Nt,i=new Nt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Nt){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(C_(e,i.x,s.x,o.x,a.x),C_(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Qq extends fh{constructor(e=new ve,t=new ve,r=new ve,i=new ve){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new ve){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(C_(e,i.x,s.x,o.x,a.x),C_(e,i.y,s.y,o.y,a.y),C_(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class HP extends fh{constructor(e=new Nt,t=new Nt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Nt){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Nt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class eK extends fh{constructor(e=new ve,t=new ve){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ve){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ve){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class VP extends fh{constructor(e=new Nt,t=new Nt,r=new Nt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Nt){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(__(e,i.x,s.x,o.x),__(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class GP extends fh{constructor(e=new ve,t=new ve,r=new ve){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new ve){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(__(e,i.x,s.x,o.x),__(e,i.y,s.y,o.y),__(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class WP extends fh{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Nt){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],u=i[o>i.length-2?i.length-1:o+1],d=i[o>i.length-3?i.length-1:o+2];return r.set(vV(a,l.x,c.x,u.x,d.x),vV(a,l.y,c.y,u.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Nt().fromArray(i))}return this}}var OR=Object.freeze({__proto__:null,ArcCurve:Jq,CatmullRomCurve3:Zq,CubicBezierCurve:zP,CubicBezierCurve3:Qq,EllipseCurve:vI,LineCurve:HP,LineCurve3:eK,QuadraticBezierCurve:VP,QuadraticBezierCurve3:GP,SplineCurve:WP});class tK extends fh{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new OR[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(t.push(u),r=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new OR[i.type]().fromJSON(i))}return this}}class BR extends tK{constructor(e){super(),this.type="Path",this.currentPoint=new Nt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new HP(this.currentPoint.clone(),new Nt(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new VP(this.currentPoint.clone(),new Nt(e,t),new Nt(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new zP(this.currentPoint.clone(),new Nt(e,t),new Nt(r,i),new Nt(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new WP(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const c=new vI(e,t,r,i,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class qy extends BR{constructor(e){super(e),this.uuid=iu(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new BR().fromJSON(i))}return this}}function Wue(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=nK(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c;if(r&&(s=Yue(n,e,s,t)),n.length>80*t){a=1/0,l=1/0;let u=-1/0,d=-1/0;for(let f=t;f<i;f+=t){const p=n[f],g=n[f+1];p<a&&(a=p),g<l&&(l=g),p>u&&(u=p),g>d&&(d=g)}c=Math.max(u-a,d-l),c=c!==0?32767/c:0}return V_(s,o,t,a,l,c,0),o}function nK(n,e,t,r,i){let s;if(i===ade(n,e,t,r)>0)for(let o=e;o<t;o+=r)s=bV(o/r|0,n[o],n[o+1],s);else for(let o=t-r;o>=e;o-=r)s=bV(o/r|0,n[o],n[o+1],s);return s&&f1(s,s.next)&&(W_(s),s=s.next),s}function iv(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(f1(t,t.next)||Ds(t.prev,t,t.next)===0)){if(W_(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function V_(n,e,t,r,i,s,o){if(!n)return;!o&&s&&tde(n,r,i,s);let a=n;for(;n.prev!==n.next;){const l=n.prev,c=n.next;if(s?Xue(n,r,i,s):jue(n)){e.push(l.i,n.i,c.i),W_(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=que(iv(n),e),V_(n,e,t,r,i,s,2)):o===2&&Kue(n,e,t,r,i,s):V_(iv(n),e,t,r,i,s,1);break}}}function jue(n){const e=n.prev,t=n,r=n.next;if(Ds(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,c=r.y,u=Math.min(i,s,o),d=Math.min(a,l,c),f=Math.max(i,s,o),p=Math.max(a,l,c);let g=r.next;for(;g!==e;){if(g.x>=u&&g.x<=f&&g.y>=d&&g.y<=p&&e_(i,a,s,l,o,c,g.x,g.y)&&Ds(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function Xue(n,e,t,r){const i=n.prev,s=n,o=n.next;if(Ds(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,u=i.y,d=s.y,f=o.y,p=Math.min(a,l,c),g=Math.min(u,d,f),v=Math.max(a,l,c),b=Math.max(u,d,f),x=Z$(p,g,e,t,r),_=Z$(v,b,e,t,r);let E=n.prevZ,C=n.nextZ;for(;E&&E.z>=x&&C&&C.z<=_;){if(E.x>=p&&E.x<=v&&E.y>=g&&E.y<=b&&E!==i&&E!==o&&e_(a,u,l,d,c,f,E.x,E.y)&&Ds(E.prev,E,E.next)>=0||(E=E.prevZ,C.x>=p&&C.x<=v&&C.y>=g&&C.y<=b&&C!==i&&C!==o&&e_(a,u,l,d,c,f,C.x,C.y)&&Ds(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;E&&E.z>=x;){if(E.x>=p&&E.x<=v&&E.y>=g&&E.y<=b&&E!==i&&E!==o&&e_(a,u,l,d,c,f,E.x,E.y)&&Ds(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;C&&C.z<=_;){if(C.x>=p&&C.x<=v&&C.y>=g&&C.y<=b&&C!==i&&C!==o&&e_(a,u,l,d,c,f,C.x,C.y)&&Ds(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function que(n,e){let t=n;do{const r=t.prev,i=t.next.next;!f1(r,i)&&iK(r,t,t.next,i)&&G_(r,i)&&G_(i,r)&&(e.push(r.i,t.i,i.i),W_(t),W_(t.next),t=n=i),t=t.next}while(t!==n);return iv(t)}function Kue(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&ide(o,a)){let l=sK(o,a);o=iv(o,o.next),l=iv(l,l.next),V_(o,e,t,r,i,s,0),V_(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function Yue(n,e,t,r){const i=[];for(let s=0,o=e.length;s<o;s++){const a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,c=nK(n,a,l,r,!1);c===c.next&&(c.steiner=!0),i.push(rde(c))}i.sort(Jue);for(let s=0;s<i.length;s++)t=Zue(i[s],t);return t}function Jue(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const r=(n.next.y-n.y)/(n.next.x-n.x),i=(e.next.y-e.y)/(e.next.x-e.x);t=r-i}return t}function Zue(n,e){const t=Que(n,e);if(!t)return e;const r=sK(t,n);return iv(r,r.next),iv(t,t.next)}function Que(n,e){let t=e;const r=n.x,i=n.y;let s=-1/0,o;if(f1(n,t))return t;do{if(f1(n,t.next))return t.next;if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const d=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=r&&d>s&&(s=d,o=t.x<t.next.x?t:t.next,d===r))return o}t=t.next}while(t!==e);if(!o)return null;const a=o,l=o.x,c=o.y;let u=1/0;t=o;do{if(r>=t.x&&t.x>=l&&r!==t.x&&rK(i<c?r:s,i,l,c,i<c?s:r,i,t.x,t.y)){const d=Math.abs(i-t.y)/(r-t.x);G_(t,n)&&(d<u||d===u&&(t.x>o.x||t.x===o.x&&ede(o,t)))&&(o=t,u=d)}t=t.next}while(t!==a);return o}function ede(n,e){return Ds(n.prev,n,e.prev)<0&&Ds(e.next,n,n.next)<0}function tde(n,e,t,r){let i=n;do i.z===0&&(i.z=Z$(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,nde(i)}function nde(n){let e,t=1;do{let r=n,i;n=null;let s=null;for(e=0;r;){e++;let o=r,a=0;for(let c=0;c<t&&(a++,o=o.nextZ,!!o);c++);let l=t;for(;a>0||l>0&&o;)a!==0&&(l===0||!o||r.z<=o.z)?(i=r,r=r.nextZ,a--):(i=o,o=o.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;r=o}s.nextZ=null,t*=2}while(e>1);return n}function Z$(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function rde(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function rK(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function e_(n,e,t,r,i,s,o,a){return!(n===o&&e===a)&&rK(n,e,t,r,i,s,o,a)}function ide(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!sde(n,e)&&(G_(n,e)&&G_(e,n)&&ode(n,e)&&(Ds(n.prev,n,e.prev)||Ds(n,e.prev,e))||f1(n,e)&&Ds(n.prev,n,n.next)>0&&Ds(e.prev,e,e.next)>0)}function Ds(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function f1(n,e){return n.x===e.x&&n.y===e.y}function iK(n,e,t,r){const i=wT(Ds(n,e,t)),s=wT(Ds(n,e,r)),o=wT(Ds(t,r,n)),a=wT(Ds(t,r,e));return!!(i!==s&&o!==a||i===0&&ST(n,t,e)||s===0&&ST(n,r,e)||o===0&&ST(t,n,r)||a===0&&ST(t,e,r))}function ST(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function wT(n){return n>0?1:n<0?-1:0}function sde(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&iK(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function G_(n,e){return Ds(n.prev,n,n.next)<0?Ds(n,e,n.next)>=0&&Ds(n,n.prev,e)>=0:Ds(n,e,n.prev)<0||Ds(n,n.next,e)<0}function ode(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function sK(n,e){const t=Q$(n.i,n.x,n.y),r=Q$(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function bV(n,e,t,r){const i=Q$(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function W_(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Q$(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function ade(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class lde{static triangulate(e,t,r=2){return Wue(e,t,r)}}class Yd{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return Yd.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];xV(e),SV(r,e);let o=e.length;t.forEach(xV);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,SV(r,t[l]);const a=lde.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function xV(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function SV(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class bI extends gr{constructor(e=new qy([new Nt(.5,.5),new Nt(-.5,.5),new Nt(-.5,-.5),new Nt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new An(i,3)),this.setAttribute("uv",new An(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let f=t.bevelEnabled!==void 0?t.bevelEnabled:!0,p=t.bevelThickness!==void 0?t.bevelThickness:.2,g=t.bevelSize!==void 0?t.bevelSize:p-.1,v=t.bevelOffset!==void 0?t.bevelOffset:0,b=t.bevelSegments!==void 0?t.bevelSegments:3;const x=t.extrudePath,_=t.UVGenerator!==void 0?t.UVGenerator:cde;let E,C=!1,M,R,L,B;x&&(E=x.getSpacedPoints(u),C=!0,f=!1,M=x.computeFrenetFrames(u,!1),R=new ve,L=new ve,B=new ve),f||(b=0,p=0,g=0,v=0);const N=a.extractPoints(c);let I=N.shape;const D=N.holes;if(!Yd.isClockWise(I)){I=I.reverse();for(let Le=0,Ue=D.length;Le<Ue;Le++){const Ze=D[Le];Yd.isClockWise(Ze)&&(D[Le]=Ze.reverse())}}function G(Le){const Ze=10000000000000001e-36;let je=Le[0];for(let lt=1;lt<=Le.length;lt++){const st=lt%Le.length,at=Le[st],Ut=at.x-je.x,mt=at.y-je.y,ce=Ut*Ut+mt*mt,re=Math.max(Math.abs(at.x),Math.abs(at.y),Math.abs(je.x),Math.abs(je.y)),$e=Ze*re*re;if(ce<=$e){Le.splice(st,1),lt--;continue}je=at}}G(I),D.forEach(G);const W=D.length,q=I;for(let Le=0;Le<W;Le++){const Ue=D[Le];I=I.concat(Ue)}function z(Le,Ue,Ze){return Ue||console.error("THREE.ExtrudeGeometry: vec does not exist"),Le.clone().addScaledVector(Ue,Ze)}const J=I.length;function Q(Le,Ue,Ze){let je,lt,st;const at=Le.x-Ue.x,Ut=Le.y-Ue.y,mt=Ze.x-Le.x,ce=Ze.y-Le.y,re=at*at+Ut*Ut,$e=at*ce-Ut*mt;if(Math.abs($e)>Number.EPSILON){const qe=Math.sqrt(re),ot=Math.sqrt(mt*mt+ce*ce),et=Ue.x-Ut/qe,Ft=Ue.y+at/qe,At=Ze.x-ce/ot,Ct=Ze.y+mt/ot,qt=((At-et)*ce-(Ct-Ft)*mt)/(at*ce-Ut*mt);je=et+at*qt-Le.x,lt=Ft+Ut*qt-Le.y;const yt=je*je+lt*lt;if(yt<=2)return new Nt(je,lt);st=Math.sqrt(yt/2)}else{let qe=!1;at>Number.EPSILON?mt>Number.EPSILON&&(qe=!0):at<-Number.EPSILON?mt<-Number.EPSILON&&(qe=!0):Math.sign(Ut)===Math.sign(ce)&&(qe=!0),qe?(je=-Ut,lt=at,st=Math.sqrt(re)):(je=at,lt=Ut,st=Math.sqrt(re/2))}return new Nt(je/st,lt/st)}const Y=[];for(let Le=0,Ue=q.length,Ze=Ue-1,je=Le+1;Le<Ue;Le++,Ze++,je++)Ze===Ue&&(Ze=0),je===Ue&&(je=0),Y[Le]=Q(q[Le],q[Ze],q[je]);const X=[];let te,ne=Y.concat();for(let Le=0,Ue=W;Le<Ue;Le++){const Ze=D[Le];te=[];for(let je=0,lt=Ze.length,st=lt-1,at=je+1;je<lt;je++,st++,at++)st===lt&&(st=0),at===lt&&(at=0),te[je]=Q(Ze[je],Ze[st],Ze[at]);X.push(te),ne=ne.concat(te)}let le;if(b===0)le=Yd.triangulateShape(q,D);else{const Le=[],Ue=[];for(let Ze=0;Ze<b;Ze++){const je=Ze/b,lt=p*Math.cos(je*Math.PI/2),st=g*Math.sin(je*Math.PI/2)+v;for(let at=0,Ut=q.length;at<Ut;at++){const mt=z(q[at],Y[at],st);ze(mt.x,mt.y,-lt),je===0&&Le.push(mt)}for(let at=0,Ut=W;at<Ut;at++){const mt=D[at];te=X[at];const ce=[];for(let re=0,$e=mt.length;re<$e;re++){const qe=z(mt[re],te[re],st);ze(qe.x,qe.y,-lt),je===0&&ce.push(qe)}je===0&&Ue.push(ce)}}le=Yd.triangulateShape(Le,Ue)}const ye=le.length,ue=g+v;for(let Le=0;Le<J;Le++){const Ue=f?z(I[Le],ne[Le],ue):I[Le];C?(L.copy(M.normals[0]).multiplyScalar(Ue.x),R.copy(M.binormals[0]).multiplyScalar(Ue.y),B.copy(E[0]).add(L).add(R),ze(B.x,B.y,B.z)):ze(Ue.x,Ue.y,0)}for(let Le=1;Le<=u;Le++)for(let Ue=0;Ue<J;Ue++){const Ze=f?z(I[Ue],ne[Ue],ue):I[Ue];C?(L.copy(M.normals[Le]).multiplyScalar(Ze.x),R.copy(M.binormals[Le]).multiplyScalar(Ze.y),B.copy(E[Le]).add(L).add(R),ze(B.x,B.y,B.z)):ze(Ze.x,Ze.y,d/u*Le)}for(let Le=b-1;Le>=0;Le--){const Ue=Le/b,Ze=p*Math.cos(Ue*Math.PI/2),je=g*Math.sin(Ue*Math.PI/2)+v;for(let lt=0,st=q.length;lt<st;lt++){const at=z(q[lt],Y[lt],je);ze(at.x,at.y,d+Ze)}for(let lt=0,st=D.length;lt<st;lt++){const at=D[lt];te=X[lt];for(let Ut=0,mt=at.length;Ut<mt;Ut++){const ce=z(at[Ut],te[Ut],je);C?ze(ce.x,ce.y+E[u-1].y,E[u-1].x+Ze):ze(ce.x,ce.y,d+Ze)}}}be(),xe();function be(){const Le=i.length/3;if(f){let Ue=0,Ze=J*Ue;for(let je=0;je<ye;je++){const lt=le[je];Ke(lt[2]+Ze,lt[1]+Ze,lt[0]+Ze)}Ue=u+b*2,Ze=J*Ue;for(let je=0;je<ye;je++){const lt=le[je];Ke(lt[0]+Ze,lt[1]+Ze,lt[2]+Ze)}}else{for(let Ue=0;Ue<ye;Ue++){const Ze=le[Ue];Ke(Ze[2],Ze[1],Ze[0])}for(let Ue=0;Ue<ye;Ue++){const Ze=le[Ue];Ke(Ze[0]+J*u,Ze[1]+J*u,Ze[2]+J*u)}}r.addGroup(Le,i.length/3-Le,0)}function xe(){const Le=i.length/3;let Ue=0;Pe(q,Ue),Ue+=q.length;for(let Ze=0,je=D.length;Ze<je;Ze++){const lt=D[Ze];Pe(lt,Ue),Ue+=lt.length}r.addGroup(Le,i.length/3-Le,1)}function Pe(Le,Ue){let Ze=Le.length;for(;--Ze>=0;){const je=Ze;let lt=Ze-1;lt<0&&(lt=Le.length-1);for(let st=0,at=u+b*2;st<at;st++){const Ut=J*st,mt=J*(st+1),ce=Ue+je+Ut,re=Ue+lt+Ut,$e=Ue+lt+mt,qe=Ue+je+mt;pt(ce,re,$e,qe)}}}function ze(Le,Ue,Ze){l.push(Le),l.push(Ue),l.push(Ze)}function Ke(Le,Ue,Ze){dt(Le),dt(Ue),dt(Ze);const je=i.length/3,lt=_.generateTopUV(r,i,je-3,je-2,je-1);pe(lt[0]),pe(lt[1]),pe(lt[2])}function pt(Le,Ue,Ze,je){dt(Le),dt(Ue),dt(je),dt(Ue),dt(Ze),dt(je);const lt=i.length/3,st=_.generateSideWallUV(r,i,lt-6,lt-3,lt-2,lt-1);pe(st[0]),pe(st[1]),pe(st[3]),pe(st[1]),pe(st[2]),pe(st[3])}function dt(Le){i.push(l[Le*3+0]),i.push(l[Le*3+1]),i.push(l[Le*3+2])}function pe(Le){s.push(Le.x),s.push(Le.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return ude(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new OR[i.type]().fromJSON(i)),new bI(r,e.options)}}const cde={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new Nt(s,o),new Nt(a,l),new Nt(c,u)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[r*3],u=e[r*3+1],d=e[r*3+2],f=e[i*3],p=e[i*3+1],g=e[i*3+2],v=e[s*3],b=e[s*3+1],x=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new Nt(o,1-l),new Nt(c,1-d),new Nt(f,1-g),new Nt(v,1-x)]:[new Nt(a,1-l),new Nt(u,1-d),new Nt(p,1-g),new Nt(b,1-x)]}};function ude(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class OC extends Vg{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new OC(e.radius,e.detail)}}class xI extends gr{constructor(e=[new Nt(0,-.5),new Nt(.5,0),new Nt(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=nr(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,d=new ve,f=new Nt,p=new ve,g=new ve,v=new ve;let b=0,x=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:b=e[_+1].x-e[_].x,x=e[_+1].y-e[_].y,p.x=x*1,p.y=-b,p.z=x*0,v.copy(p),p.normalize(),l.push(p.x,p.y,p.z);break;case e.length-1:l.push(v.x,v.y,v.z);break;default:b=e[_+1].x-e[_].x,x=e[_+1].y-e[_].y,p.x=x*1,p.y=-b,p.z=x*0,g.copy(p),p.x+=v.x,p.y+=v.y,p.z+=v.z,p.normalize(),l.push(p.x,p.y,p.z),v.copy(g)}for(let _=0;_<=t;_++){const E=r+_*u*i,C=Math.sin(E),M=Math.cos(E);for(let R=0;R<=e.length-1;R++){d.x=e[R].x*C,d.y=e[R].y,d.z=e[R].x*M,o.push(d.x,d.y,d.z),f.x=_/t,f.y=R/(e.length-1),a.push(f.x,f.y);const L=l[3*R+0]*C,B=l[3*R+1],N=l[3*R+0]*M;c.push(L,B,N)}}for(let _=0;_<t;_++)for(let E=0;E<e.length-1;E++){const C=E+_*e.length,M=C,R=C+e.length,L=C+e.length+1,B=C+1;s.push(M,R,B),s.push(L,B,R)}this.setIndex(s),this.setAttribute("position",new An(o,3)),this.setAttribute("uv",new An(a,2)),this.setAttribute("normal",new An(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xI(e.points,e.segments,e.phiStart,e.phiLength)}}class BC extends Vg{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new BC(e.radius,e.detail)}}class Of extends gr{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,d=e/a,f=t/l,p=[],g=[],v=[],b=[];for(let x=0;x<u;x++){const _=x*f-o;for(let E=0;E<c;E++){const C=E*d-s;g.push(C,-_,0),v.push(0,0,1),b.push(E/a),b.push(1-x/l)}}for(let x=0;x<l;x++)for(let _=0;_<a;_++){const E=_+c*x,C=_+c*(x+1),M=_+1+c*(x+1),R=_+1+c*x;p.push(E,C,R),p.push(C,M,R)}this.setIndex(p),this.setAttribute("position",new An(g,3)),this.setAttribute("normal",new An(v,3)),this.setAttribute("uv",new An(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Of(e.width,e.height,e.widthSegments,e.heightSegments)}}class SI extends gr{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],u=[];let d=e;const f=(t-e)/i,p=new ve,g=new Nt;for(let v=0;v<=i;v++){for(let b=0;b<=r;b++){const x=s+b/r*o;p.x=d*Math.cos(x),p.y=d*Math.sin(x),l.push(p.x,p.y,p.z),c.push(0,0,1),g.x=(p.x/t+1)/2,g.y=(p.y/t+1)/2,u.push(g.x,g.y)}d+=f}for(let v=0;v<i;v++){const b=v*(r+1);for(let x=0;x<r;x++){const _=x+b,E=_,C=_+r+1,M=_+r+2,R=_+1;a.push(E,C,R),a.push(C,M,R)}}this.setIndex(a),this.setAttribute("position",new An(l,3)),this.setAttribute("normal",new An(c,3)),this.setAttribute("uv",new An(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new SI(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class wI extends gr{constructor(e=new qy([new Nt(0,.5),new Nt(-.5,-.5),new Nt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new An(i,3)),this.setAttribute("normal",new An(s,3)),this.setAttribute("uv",new An(o,2));function c(u){const d=i.length/3,f=u.extractPoints(t);let p=f.shape;const g=f.holes;Yd.isClockWise(p)===!1&&(p=p.reverse());for(let b=0,x=g.length;b<x;b++){const _=g[b];Yd.isClockWise(_)===!0&&(g[b]=_.reverse())}const v=Yd.triangulateShape(p,g);for(let b=0,x=g.length;b<x;b++){const _=g[b];p=p.concat(_)}for(let b=0,x=p.length;b<x;b++){const _=p[b];i.push(_.x,_.y,0),s.push(0,0,1),o.push(_.x,_.y)}for(let b=0,x=v.length;b<x;b++){const _=v[b],E=_[0]+d,C=_[1]+d,M=_[2]+d;r.push(E,C,M),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return dde(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new wI(r,e.curveSegments)}}function dde(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class O1 extends gr{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new ve,f=new ve,p=[],g=[],v=[],b=[];for(let x=0;x<=r;x++){const _=[],E=x/r;let C=0;x===0&&o===0?C=.5/t:x===r&&l===Math.PI&&(C=-.5/t);for(let M=0;M<=t;M++){const R=M/t;d.x=-e*Math.cos(i+R*s)*Math.sin(o+E*a),d.y=e*Math.cos(o+E*a),d.z=e*Math.sin(i+R*s)*Math.sin(o+E*a),g.push(d.x,d.y,d.z),f.copy(d).normalize(),v.push(f.x,f.y,f.z),b.push(R+C,1-E),_.push(c++)}u.push(_)}for(let x=0;x<r;x++)for(let _=0;_<t;_++){const E=u[x][_+1],C=u[x][_],M=u[x+1][_],R=u[x+1][_+1];(x!==0||o>0)&&p.push(E,C,R),(x!==r-1||l<Math.PI)&&p.push(C,M,R)}this.setIndex(p),this.setAttribute("position",new An(g,3)),this.setAttribute("normal",new An(v,3)),this.setAttribute("uv",new An(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new O1(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class _I extends Vg{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new _I(e.radius,e.detail)}}class CI extends gr{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],u=new ve,d=new ve,f=new ve;for(let p=0;p<=r;p++)for(let g=0;g<=i;g++){const v=g/i*s,b=p/r*Math.PI*2;d.x=(e+t*Math.cos(b))*Math.cos(v),d.y=(e+t*Math.cos(b))*Math.sin(v),d.z=t*Math.sin(b),a.push(d.x,d.y,d.z),u.x=e*Math.cos(v),u.y=e*Math.sin(v),f.subVectors(d,u).normalize(),l.push(f.x,f.y,f.z),c.push(g/i),c.push(p/r)}for(let p=1;p<=r;p++)for(let g=1;g<=i;g++){const v=(i+1)*p+g-1,b=(i+1)*(p-1)+g-1,x=(i+1)*(p-1)+g,_=(i+1)*p+g;o.push(v,b,_),o.push(b,x,_)}this.setIndex(o),this.setAttribute("position",new An(a,3)),this.setAttribute("normal",new An(l,3)),this.setAttribute("uv",new An(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new CI(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class EI extends gr{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],u=[],d=new ve,f=new ve,p=new ve,g=new ve,v=new ve,b=new ve,x=new ve;for(let E=0;E<=r;++E){const C=E/r*s*Math.PI*2;_(C,s,o,e,p),_(C+.01,s,o,e,g),b.subVectors(g,p),x.addVectors(g,p),v.crossVectors(b,x),x.crossVectors(v,b),v.normalize(),x.normalize();for(let M=0;M<=i;++M){const R=M/i*Math.PI*2,L=-t*Math.cos(R),B=t*Math.sin(R);d.x=p.x+(L*x.x+B*v.x),d.y=p.y+(L*x.y+B*v.y),d.z=p.z+(L*x.z+B*v.z),l.push(d.x,d.y,d.z),f.subVectors(d,p).normalize(),c.push(f.x,f.y,f.z),u.push(E/r),u.push(M/i)}}for(let E=1;E<=r;E++)for(let C=1;C<=i;C++){const M=(i+1)*(E-1)+(C-1),R=(i+1)*E+(C-1),L=(i+1)*E+C,B=(i+1)*(E-1)+C;a.push(M,R,B),a.push(R,L,B)}this.setIndex(a),this.setAttribute("position",new An(l,3)),this.setAttribute("normal",new An(c,3)),this.setAttribute("uv",new An(u,2));function _(E,C,M,R,L){const B=Math.cos(E),N=Math.sin(E),I=M/C*E,D=Math.cos(I);L.x=R*(2+D)*.5*B,L.y=R*(2+D)*N*.5,L.z=R*Math.sin(I)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new EI(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class AI extends gr{constructor(e=new GP(new ve(-1,-1,0),new ve(-1,1,0),new ve(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new ve,l=new ve,c=new Nt;let u=new ve;const d=[],f=[],p=[],g=[];v(),this.setIndex(g),this.setAttribute("position",new An(d,3)),this.setAttribute("normal",new An(f,3)),this.setAttribute("uv",new An(p,2));function v(){for(let E=0;E<t;E++)b(E);b(s===!1?t:0),_(),x()}function b(E){u=e.getPointAt(E/t,u);const C=o.normals[E],M=o.binormals[E];for(let R=0;R<=i;R++){const L=R/i*Math.PI*2,B=Math.sin(L),N=-Math.cos(L);l.x=N*C.x+B*M.x,l.y=N*C.y+B*M.y,l.z=N*C.z+B*M.z,l.normalize(),f.push(l.x,l.y,l.z),a.x=u.x+r*l.x,a.y=u.y+r*l.y,a.z=u.z+r*l.z,d.push(a.x,a.y,a.z)}}function x(){for(let E=1;E<=t;E++)for(let C=1;C<=i;C++){const M=(i+1)*(E-1)+(C-1),R=(i+1)*E+(C-1),L=(i+1)*E+C,B=(i+1)*(E-1)+C;g.push(M,R,B),g.push(R,L,B)}}function _(){for(let E=0;E<=t;E++)for(let C=0;C<=i;C++)c.x=E/t,c.y=C/i,p.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new AI(new OR[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class oK extends gr{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new ve,s=new ve;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const d=l[c],f=d.start,p=d.count;for(let g=f,v=f+p;g<v;g+=3)for(let b=0;b<3;b++){const x=a.getX(g+b),_=a.getX(g+(b+1)%3);i.fromBufferAttribute(o,x),s.fromBufferAttribute(o,_),wV(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,d=3*a+(c+1)%3;i.fromBufferAttribute(o,u),s.fromBufferAttribute(o,d),wV(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new An(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function wV(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var _V=Object.freeze({__proto__:null,BoxGeometry:Qp,CapsuleGeometry:mI,CircleGeometry:gI,ConeGeometry:kC,CylinderGeometry:DC,DodecahedronGeometry:yI,EdgesGeometry:Yq,ExtrudeGeometry:bI,IcosahedronGeometry:OC,LatheGeometry:xI,OctahedronGeometry:BC,PlaneGeometry:Of,PolyhedronGeometry:Vg,RingGeometry:SI,ShapeGeometry:wI,SphereGeometry:O1,TetrahedronGeometry:_I,TorusGeometry:CI,TorusKnotGeometry:EI,TubeGeometry:AI,WireframeGeometry:oK});class aK extends Vo{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new rn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class lK extends Da{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class mg extends Vo{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new rn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hg,this.normalScale=new Nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ac,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ed extends mg{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Nt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return nr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new rn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new rn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new rn(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class cK extends Vo{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new rn(16777215),this.specular=new rn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hg,this.normalScale=new Nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ac,this.combine=CC,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class uK extends Vo{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new rn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hg,this.normalScale=new Nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class dK extends Vo{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hg,this.normalScale=new Nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class hK extends Vo{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new rn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hg,this.normalScale=new Nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ac,this.combine=CC,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class TI extends Vo{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Rq,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class jP extends Vo{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class fK extends Vo{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new rn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hg,this.normalScale=new Nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class pK extends ol{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function By(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function mK(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function gK(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function eL(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function XP(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push(...o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function hde(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),d=[],f=[];for(let p=0;p<c.times.length;++p){const g=c.times[p]*i;if(!(g<t||g>=r)){d.push(c.times[p]);for(let v=0;v<u;++v)f.push(c.values[p*u+v])}}d.length!==0&&(c.times=By(d,c.times.constructor),c.values=By(f,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function fde(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(x){return x.name===a.name&&x.ValueTypeName===l});if(c===void 0)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let f=0;const p=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=p/3);const g=a.times.length-1;let v;if(s<=a.times[0]){const x=u,_=d-u;v=a.values.slice(x,_)}else if(s>=a.times[g]){const x=g*d+u,_=x+d-u;v=a.values.slice(x,_)}else{const x=a.createInterpolant(),_=u,E=d-u;x.evaluate(s),v=x.resultBuffer.slice(_,E)}l==="quaternion"&&new _s().fromArray(v).normalize().conjugate().toArray(v);const b=c.times.length;for(let x=0;x<b;++x){const _=x*p+f;if(l==="quaternion")_s.multiplyQuaternionsFlat(c.values,_,v,0,c.values,_);else{const E=p-f*2;for(let C=0;C<E;++C)c.values[_+C]-=v[C]}}}return n.blendMode=EP,n}class pde{static convertArray(e,t){return By(e,t)}static isTypedArray(e){return mK(e)}static getKeyframeOrder(e){return gK(e)}static sortedArray(e,t,r){return eL(e,t,r)}static flattenJSON(e,t,r,i){XP(e,t,r,i)}static subclip(e,t,r,i,s=30){return hde(e,t,r,i,s)}static makeClipAdditive(e,t=0,r=e,i=30){return fde(e,t,r,i)}}class B1{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class yK extends B1{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ky,endingEnd:ky}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case Oy:s=e,a=2*t-r;break;case P_:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Oy:o=e,l=2*r-t;break;case P_:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const c=(r-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,f=this._weightPrev,p=this._weightNext,g=(r-t)/(i-t),v=g*g,b=v*g,x=-f*b+2*f*v-f*g,_=(1+f)*b+(-1.5-2*f)*v+(-.5+f)*g+1,E=(-1-p)*b+(1.5+p)*v+.5*g,C=p*b-p*v;for(let M=0;M!==a;++M)s[M]=x*o[u+M]+_*o[c+M]+E*o[l+M]+C*o[d+M];return s}}class qP extends B1{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-t)/(i-t),d=1-u;for(let f=0;f!==a;++f)s[f]=o[c+f]*d+o[l+f]*u;return s}}class vK extends B1{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class td{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=By(t,this.TimeBufferType),this.values=By(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:By(e.times,Array),values:By(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new vK(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new qP(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new yK(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case a1:t=this.InterpolantFactoryMethodDiscrete;break;case l1:t=this.InterpolantFactoryMethodLinear;break;case vM:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return a1;case this.InterpolantFactoryMethodLinear:return l1;case this.InterpolantFactoryMethodSmooth:return vM}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&mK(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===vM,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(i)l=!0;else{const d=a*r,f=d-r,p=d+r;for(let g=0;g!==r;++g){const v=t[d+g];if(v!==t[f+g]||v!==t[p+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*r,f=o*r;for(let p=0;p!==r;++p)t[f+p]=t[d+p]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}td.prototype.ValueTypeName="";td.prototype.TimeBufferType=Float32Array;td.prototype.ValueBufferType=Float32Array;td.prototype.DefaultInterpolation=l1;class Nv extends td{constructor(e,t,r){super(e,t,r)}}Nv.prototype.ValueTypeName="bool";Nv.prototype.ValueBufferType=Array;Nv.prototype.DefaultInterpolation=a1;Nv.prototype.InterpolantFactoryMethodLinear=void 0;Nv.prototype.InterpolantFactoryMethodSmooth=void 0;class KP extends td{constructor(e,t,r,i){super(e,t,r,i)}}KP.prototype.ValueTypeName="color";class sv extends td{constructor(e,t,r,i){super(e,t,r,i)}}sv.prototype.ValueTypeName="number";class bK extends B1{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let c=e*a;for(let u=c+a;c!==u;c+=4)_s.slerpFlat(s,0,o,c-a,o,c,l);return s}}class ov extends td{constructor(e,t,r,i){super(e,t,r,i)}InterpolantFactoryMethodLinear(e){return new bK(this.times,this.values,this.getValueSize(),e)}}ov.prototype.ValueTypeName="quaternion";ov.prototype.InterpolantFactoryMethodSmooth=void 0;class Iv extends td{constructor(e,t,r){super(e,t,r)}}Iv.prototype.ValueTypeName="string";Iv.prototype.ValueBufferType=Array;Iv.prototype.DefaultInterpolation=a1;Iv.prototype.InterpolantFactoryMethodLinear=void 0;Iv.prototype.InterpolantFactoryMethodSmooth=void 0;class av extends td{constructor(e,t,r,i){super(e,t,r,i)}}av.prototype.ValueTypeName="vector";class p1{constructor(e="",t=-1,r=[],i=sI){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=iu(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(gde(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(td.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=gK(l);l=eL(l,1,u),c=eL(c,1,u),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new sv(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let f=i[d];f||(i[d]=f=[]),f.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,f,p,g,v){if(p.length!==0){const b=[],x=[];XP(p,b,x,g),b.length!==0&&v.push(new d(f,b,x))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const f=c[d].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const p={};let g;for(g=0;g<f.length;g++)if(f[g].morphTargets)for(let v=0;v<f[g].morphTargets.length;v++)p[f[g].morphTargets[v]]=-1;for(const v in p){const b=[],x=[];for(let _=0;_!==f[g].morphTargets.length;++_){const E=f[g];b.push(E.time),x.push(E.morphTarget===v?1:0)}i.push(new sv(".morphTargetInfluence["+v+"]",b,x))}l=p.length*o}else{const p=".bones["+t[d].name+"]";r(av,p+".position",f,"pos",i),r(ov,p+".quaternion",f,"rot",i),r(av,p+".scale",f,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function mde(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return sv;case"vector":case"vector2":case"vector3":case"vector4":return av;case"color":return KP;case"quaternion":return ov;case"bool":case"boolean":return Nv;case"string":return Iv}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function gde(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=mde(n.type);if(n.times===void 0){const t=[],r=[];XP(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const hf={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class MI{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.abortController=new AbortController,this.itemStart=function(u){a++,s===!1&&i.onStart!==void 0&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,f=c.length;d<f;d+=2){const p=c[d],g=c[d+1];if(p.global&&(p.lastIndex=0),p.test(u))return g}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const xK=new MI;class Oa{constructor(e){this.manager=e!==void 0?e:xK,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Oa.DEFAULT_MATERIAL_NAME="__DEFAULT";const yp={};class yde extends Error{constructor(e,t){super(e),this.response=t}}class Na extends Oa{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=hf.get(`file:${e}`);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(yp[e]!==void 0){yp[e].push({onLoad:t,onProgress:r,onError:i});return}yp[e]=[],yp[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=yp[e],d=c.body.getReader(),f=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),p=f?parseInt(f):0,g=p!==0;let v=0;const b=new ReadableStream({start(x){_();function _(){d.read().then(({done:E,value:C})=>{if(E)x.close();else{v+=C.byteLength;const M=new ProgressEvent("progress",{lengthComputable:g,loaded:v,total:p});for(let R=0,L=u.length;R<L;R++){const B=u[R];B.onProgress&&B.onProgress(M)}x.enqueue(C),_()}},E=>{x.error(E)})}}});return new Response(b)}else throw new yde(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a==="")return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),f=d&&d[1]?d[1].toLowerCase():void 0,p=new TextDecoder(f);return c.arrayBuffer().then(g=>p.decode(g))}}}).then(c=>{hf.add(`file:${e}`,c);const u=yp[e];delete yp[e];for(let d=0,f=u.length;d<f;d++){const p=u[d];p.onLoad&&p.onLoad(c)}}).catch(c=>{const u=yp[e];if(u===void 0)throw this.manager.itemError(e),c;delete yp[e];for(let d=0,f=u.length;d<f;d++){const p=u[d];p.onError&&p.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class vde extends Oa{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Na(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=p1.parse(e[r]);t.push(i)}return t}}class bde extends Oa{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new pI,l=new Na(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(d){l.load(e[d],function(f){const p=s.parse(f,!0);o[d]={width:p.width,height:p.height,format:p.format,mipmaps:p.mipmaps},c+=1,c===6&&(p.mipmapCount===1&&(a.minFilter=oi),a.image=o,a.format=p.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let d=0,f=e.length;d<f;++d)u(d);else l.load(e,function(d){const f=s.parse(d,!0);if(f.isCubemap){const p=f.mipmaps.length/f.mipmapCount;for(let g=0;g<p;g++){o[g]={mipmaps:[]};for(let v=0;v<f.mipmapCount;v++)o[g].mipmaps.push(f.mipmaps[g*f.mipmapCount+v]),o[g].format=f.format,o[g].width=f.width,o[g].height=f.height}a.image=o}else a.image.width=f.width,a.image.height=f.height,a.mipmaps=f.mipmaps;f.mipmapCount===1&&(a.minFilter=oi),a.format=f.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}const ax=new WeakMap;class j_ extends Oa{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=hf.get(`image:${e}`);if(o!==void 0){if(o.complete===!0)s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0);else{let d=ax.get(o);d===void 0&&(d=[],ax.set(o,d)),d.push({onLoad:t,onError:i})}return o}const a=H_("img");function l(){u(),t&&t(this);const d=ax.get(this)||[];for(let f=0;f<d.length;f++){const p=d[f];p.onLoad&&p.onLoad(this)}ax.delete(this),s.manager.itemEnd(e)}function c(d){u(),i&&i(d),hf.remove(`image:${e}`);const f=ax.get(this)||[];for(let p=0;p<f.length;p++){const g=f[p];g.onError&&g.onError(d)}ax.delete(this),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),hf.add(`image:${e}`,a),s.manager.itemStart(e),a.src=e,a}}class SK extends Oa{constructor(e){super(e)}load(e,t,r,i){const s=new MC;s.colorSpace=Aa;const o=new j_(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class RI extends Oa{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Jd,a=new Na(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(i!==void 0)i(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:co,o.wrapT=c.wrapT!==void 0?c.wrapT:co,o.magFilter=c.magFilter!==void 0?c.magFilter:oi,o.minFilter=c.minFilter!==void 0?c.minFilter:oi,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Hu),c.mipmapCount===1&&(o.minFilter=oi),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},r,i),o}}class wK extends Oa{constructor(e){super(e)}load(e,t,r,i){const s=new Ti,o=new j_(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}let Gg=class extends ei{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new rn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}};class _K extends Gg{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ei.DEFAULT_UP),this.updateMatrix(),this.groundColor=new rn(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const kO=new zn,CV=new ve,EV=new ve;class YP{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Nt(512,512),this.mapType=zl,this.map=null,this.mapPass=null,this.matrix=new zn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new k1,this._frameExtents=new Nt(1,1),this._viewportCount=1,this._viewports=[new Hr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;CV.setFromMatrixPosition(e.matrixWorld),t.position.copy(CV),EV.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(EV),t.updateMatrixWorld(),kO.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(kO,t.coordinateSystem,t.reversedDepth),t.reversedDepth?r.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(kO)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class xde extends YP{constructor(){super(new So(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,r=u1*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class NI extends Gg{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ei.DEFAULT_UP),this.updateMatrix(),this.target=new ei,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new xde}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const AV=new zn,Nw=new ve,OO=new ve;class Sde extends YP{constructor(){super(new So(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Nt(4,2),this._viewportCount=6,this._viewports=[new Hr(2,1,1,1),new Hr(0,1,1,1),new Hr(3,1,1,1),new Hr(1,1,1,1),new Hr(3,0,1,1),new Hr(1,0,1,1)],this._cubeDirections=[new ve(1,0,0),new ve(-1,0,0),new ve(0,0,1),new ve(0,0,-1),new ve(0,1,0),new ve(0,-1,0)],this._cubeUps=[new ve(0,1,0),new ve(0,1,0),new ve(0,1,0),new ve(0,1,0),new ve(0,0,1),new ve(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Nw.setFromMatrixPosition(e.matrixWorld),r.position.copy(Nw),OO.copy(r.position),OO.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(OO),r.updateMatrixWorld(),i.makeTranslation(-Nw.x,-Nw.y,-Nw.z),AV.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(AV,r.coordinateSystem,r.reversedDepth)}}class JP extends Gg{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new Sde}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Dv extends cI{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class wde extends YP{constructor(){super(new Dv(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class II extends Gg{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ei.DEFAULT_UP),this.updateMatrix(),this.target=new ei,this.shadow=new wde}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class ZP extends Gg{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class CK extends Gg{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class EK{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ve)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class AK extends Gg{constructor(e=new EK,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class DI extends Oa{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new Na(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new rn().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new rn().setHex(o.value);break;case"v2":i.uniforms[s].value=new Nt().fromArray(o.value);break;case"v3":i.uniforms[s].value=new ve().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Hr().fromArray(o.value);break;case"m3":i.uniforms[s].value=new xr().fromArray(o.value);break;case"m4":i.uniforms[s].value=new zn().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Nt().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Nt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return DI.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:aK,SpriteMaterial:OP,RawShaderMaterial:lK,ShaderMaterial:Da,PointsMaterial:fI,MeshPhysicalMaterial:ed,MeshStandardMaterial:mg,MeshPhongMaterial:cK,MeshToonMaterial:uK,MeshNormalMaterial:dK,MeshLambertMaterial:hK,MeshDepthMaterial:TI,MeshDistanceMaterial:jP,MeshBasicMaterial:bc,MeshMatcapMaterial:fK,LineDashedMaterial:pK,LineBasicMaterial:ol,Material:Vo};return new t[e]}}class gg{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class TK extends gr{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class MK extends Oa{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Na(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(p,g){if(t[g]!==void 0)return t[g];const b=p.interleavedBuffers[g],x=s(p,b.buffer),_=kx(b.type,x),E=new NC(_,b.stride);return E.uuid=b.uuid,t[g]=E,E}function s(p,g){if(r[g]!==void 0)return r[g];const b=p.arrayBuffers[g],x=new Uint32Array(b).buffer;return r[g]=x,x}const o=e.isInstancedBufferGeometry?new TK:new gr,a=e.data.index;if(a!==void 0){const p=kx(a.type,a.array);o.setIndex(new ai(p,1))}const l=e.data.attributes;for(const p in l){const g=l[p];let v;if(g.isInterleavedBufferAttribute){const b=i(e.data,g.data);v=new Tg(b,g.itemSize,g.offset,g.normalized)}else{const b=kx(g.type,g.array),x=g.isInstancedBufferAttribute?rv:ai;v=new x(b,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),g.usage!==void 0&&v.setUsage(g.usage),o.setAttribute(p,v)}const c=e.data.morphAttributes;if(c)for(const p in c){const g=c[p],v=[];for(let b=0,x=g.length;b<x;b++){const _=g[b];let E;if(_.isInterleavedBufferAttribute){const C=i(e.data,_.data);E=new Tg(C,_.itemSize,_.offset,_.normalized)}else{const C=kx(_.type,_.array);E=new ai(C,_.itemSize,_.normalized)}_.name!==void 0&&(E.name=_.name),v.push(E)}o.morphAttributes[p]=v}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let p=0,g=d.length;p!==g;++p){const v=d[p];o.addGroup(v.start,v.count,v.materialIndex)}const f=e.data.boundingSphere;return f!==void 0&&(o.boundingSphere=new oa().fromJSON(f)),e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class _de extends Oa{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?gg.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Na(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){i!==void 0&&i(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?gg.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Na(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),this.bindLightTargets(c),t!==void 0){let d=!1;for(const f in o)if(o[f].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new qy().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new IC().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new MK;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in _V?a=_V[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new DI;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=p1.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(u)}else return l.data?{data:kx(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new MI(t);s=new j_(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const d=e[c],f=d.url;if(Array.isArray(f)){const p=[];for(let g=0,v=f.length;g<v;g++){const b=f[g],x=a(b);x!==null&&(x instanceof HTMLImageElement?p.push(x):p.push(new Jd(x.data,x.width,x.height)))}i[d.uuid]=new ug(p)}else{const p=a(d.url);i[d.uuid]=new ug(p)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:kx(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new j_(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let d=0,f=c.length;d<f;d++){const p=c[d],g=await s(p);g!==null&&(g instanceof HTMLImageElement?u.push(g):u.push(new Jd(g.data,g.width,g.height)))}r[l.uuid]=new ug(u)}else{const u=await s(l.url);r[l.uuid]=new ug(u)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new MC,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Jd:u=new Ti,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=r(a.mapping,Cde)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=r(a.wrap[0],TV),u.wrapT=r(a.wrap[1],TV)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.minFilter!==void 0&&(u.minFilter=r(a.minFilter,MV)),a.magFilter!==void 0&&(u.magFilter=r(a.magFilter,MV)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),i[a.uuid]=u}return i}parseObject(e,t,r,i,s){let o;function a(f){return t[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),t[f]}function l(f){if(f!==void 0){if(Array.isArray(f)){const p=[];for(let g=0,v=f.length;g<v;g++){const b=f[g];r[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",b),p.push(r[b])}return p}return r[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),r[f]}}function c(f){return i[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),i[f]}let u,d;switch(e.type){case"Scene":o=new D1,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new rn(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new RC(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new uI(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new So(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Dv(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new ZP(e.color,e.intensity);break;case"DirectionalLight":o=new II(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new JP(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new CK(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new NI(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new _K(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new AK().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),d=l(e.material),o=new BP(u,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),d=l(e.material),o=new Li(u,d);break;case"InstancedMesh":u=a(e.geometry),d=l(e.material);const f=e.count,p=e.instanceMatrix,g=e.instanceColor;o=new $P(u,d,f),o.instanceMatrix=new rv(new Float32Array(p.array),16),g!==void 0&&(o.instanceColor=new rv(new Float32Array(g.array),g.itemSize));break;case"BatchedMesh":u=a(e.geometry),d=l(e.material),o=new qq(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,d),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._geometryInfo=e.geometryInfo.map(v=>{let b=null,x=null;return v.boundingBox!==void 0&&(b=new Ra().fromJSON(v.boundingBox)),v.boundingSphere!==void 0&&(x=new oa().fromJSON(v.boundingSphere)),{...v,boundingBox:b,boundingSphere:x}}),o._instanceInfo=e.instanceInfo,o._availableInstanceIds=e._availableInstanceIds,o._availableGeometryIds=e._availableGeometryIds,o._nextIndexStart=e.nextIndexStart,o._nextVertexStart=e.nextVertexStart,o._geometryCount=e.geometryCount,o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._matricesTexture=c(e.matricesTexture.uuid),o._indirectTexture=c(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=c(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(o.boundingSphere=new oa().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(o.boundingBox=new Ra().fromJSON(e.boundingBox));break;case"LOD":o=new Xq;break;case"Line":o=new Hp(a(e.geometry),l(e.material));break;case"LineLoop":o=new LP(a(e.geometry),l(e.material));break;case"LineSegments":o=new hh(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new FP(a(e.geometry),l(e.material));break;case"Sprite":o=new jq(l(e.material));break;case"Group":o=new kp;break;case"Bone":o=new dI;break;default:o=new ei}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const f=e.children;for(let p=0;p<f.length;p++)o.add(this.parseObject(f[p],t,r,i,s))}if(e.animations!==void 0){const f=e.animations;for(let p=0;p<f.length;p++){const g=f[p];o.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const f=e.levels;for(let p=0;p<f.length;p++){const g=f[p],v=o.getObjectByProperty("uuid",g.object);v!==void 0&&o.addLevel(v,g.distance,g.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const r=t.target,i=e.getObjectByProperty("uuid",r);i!==void 0?t.target=i:t.target=new ei}})}}const Cde={UVMapping:Cg,CubeReflectionMapping:_f,CubeRefractionMapping:Eg,EquirectangularReflectionMapping:t1,EquirectangularRefractionMapping:F_,CubeUVReflectionMapping:I1},TV={RepeatWrapping:Ag,ClampToEdgeWrapping:co,MirroredRepeatWrapping:n1},MV={NearestFilter:sa,NearestMipmapNearestFilter:ZN,NearestMipmapLinearFilter:Dy,LinearFilter:oi,LinearMipmapNearestFilter:$x,LinearMipmapLinearFilter:Hu},BO=new WeakMap;class RK extends Oa{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=hf.get(`image-bitmap:${e}`);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{if(BO.has(o)===!0)i&&i(BO.get(o)),s.manager.itemError(e),s.manager.itemEnd(e);else return t&&t(c),s.manager.itemEnd(e),c});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,a.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return hf.add(`image-bitmap:${e}`,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){i&&i(c),BO.set(l,c),hf.remove(`image-bitmap:${e}`),s.manager.itemError(e),s.manager.itemEnd(e)});hf.add(`image-bitmap:${e}`,l),s.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let _T;class QP{static getContext(){return _T===void 0&&(_T=new(window.AudioContext||window.webkitAudioContext)),_T}static setContext(e){_T=e}}class Ede extends Oa{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Na(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);QP.getContext().decodeAudioData(c,function(d){t(d)}).catch(a)}catch(c){a(c)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const RV=new zn,NV=new zn,ny=new zn;class Ade{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new So,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new So,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,ny.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(Xy*t.fov*.5)/t.zoom;let a,l;NV.elements[12]=-i,RV.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,ny.elements[0]=2*t.near/(l-a),ny.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(ny),a=-o*t.aspect-s,l=o*t.aspect-s,ny.elements[0]=2*t.near/(l-a),ny.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(ny)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(NV),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(RV)}}class NK extends So{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class e4{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const ry=new ve,$O=new _s,Tde=new ve,iy=new ve,sy=new ve;class Mde extends ei{constructor(){super(),this.type="AudioListener",this.context=QP.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new e4}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ry,$O,Tde),iy.set(0,0,-1).applyQuaternion($O),sy.set(0,1,0).applyQuaternion($O),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ry.x,r),t.positionY.linearRampToValueAtTime(ry.y,r),t.positionZ.linearRampToValueAtTime(ry.z,r),t.forwardX.linearRampToValueAtTime(iy.x,r),t.forwardY.linearRampToValueAtTime(iy.y,r),t.forwardZ.linearRampToValueAtTime(iy.z,r),t.upX.linearRampToValueAtTime(sy.x,r),t.upY.linearRampToValueAtTime(sy.y,r),t.upZ.linearRampToValueAtTime(sy.z,r)}else t.setPosition(ry.x,ry.y,ry.z),t.setOrientation(iy.x,iy.y,iy.z,sy.x,sy.y,sy.z)}}let IK=class extends ei{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}};const oy=new ve,IV=new _s,Rde=new ve,ay=new ve;class Nde extends IK{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(oy,IV,Rde),ay.set(0,0,1).applyQuaternion(IV);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(oy.x,r),t.positionY.linearRampToValueAtTime(oy.y,r),t.positionZ.linearRampToValueAtTime(oy.z,r),t.orientationX.linearRampToValueAtTime(ay.x,r),t.orientationY.linearRampToValueAtTime(ay.y,r),t.orientationZ.linearRampToValueAtTime(ay.z,r)}else t.setPosition(oy.x,oy.y,oy.z),t.setOrientation(ay.x,ay.y,ay.z)}}class Ide{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class DK{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){_s.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;_s.multiplyQuaternionsFlat(e,o,e,t,e,r),_s.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const t4="\\[\\]\\.:\\/",Dde=new RegExp("["+t4+"]","g"),n4="[^"+t4+"]",kde="[^"+t4.replace("\\.","")+"]",Ode=/((?:WC+[\/:])*)/.source.replace("WC",n4),Bde=/(WCOD+)?/.source.replace("WCOD",kde),$de=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",n4),Lde=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",n4),Fde=new RegExp("^"+Ode+Bde+$de+Lde+"$"),Pde=["material","materials","bones","map"];class Ude{constructor(e,t,r){const i=r||ii.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class ii{constructor(e,t,r){this.path=t,this.parsedPath=r||ii.parseTrackName(t),this.node=ii.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new ii.Composite(e,t,r):new ii(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Dde,"")}static parseTrackName(e){const t=Fde.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);Pde.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=ii.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let c=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ii.Composite=Ude;ii.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ii.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ii.prototype.GetterByBindingType=[ii.prototype._getValue_direct,ii.prototype._getValue_array,ii.prototype._getValue_arrayElement,ii.prototype._getValue_toArray];ii.prototype.SetterByBindingTypeAndVersioning=[[ii.prototype._setValue_direct,ii.prototype._setValue_direct_setNeedsUpdate,ii.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ii.prototype._setValue_array,ii.prototype._setValue_array_setNeedsUpdate,ii.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ii.prototype._setValue_arrayElement,ii.prototype._setValue_arrayElement_setNeedsUpdate,ii.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ii.prototype._setValue_fromArray,ii.prototype._setValue_fromArray_setNeedsUpdate,ii.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class zde{constructor(){this.isAnimationObjectGroup=!0,this.uuid=iu(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,d=arguments.length;u!==d;++u){const f=arguments[u],p=f.uuid;let g=t[p];if(g===void 0){g=l++,t[p]=g,e.push(f);for(let v=0,b=o;v!==b;++v)s[v].push(new ii(f,r[v],i[v]))}else if(g<c){a=e[g];const v=--c,b=e[v];t[b.uuid]=g,e[g]=b,t[p]=v,e[v]=f;for(let x=0,_=o;x!==_;++x){const E=s[x],C=E[v];let M=E[g];E[g]=C,M===void 0&&(M=new ii(f,r[x],i[x])),E[v]=M}}else e[g]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const d=s++,f=e[d];t[f.uuid]=u,e[u]=f,t[c]=d,e[d]=l;for(let p=0,g=i;p!==g;++p){const v=r[p],b=v[d],x=v[u];v[u]=b,v[d]=x}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,d=t[u];if(d!==void 0)if(delete t[u],d<s){const f=--s,p=e[f],g=--o,v=e[g];t[p.uuid]=d,e[d]=p,t[v.uuid]=f,e[f]=v,e.pop();for(let b=0,x=i;b!==x;++b){const _=r[b],E=_[f],C=_[g];_[d]=E,_[f]=C,_.pop()}}else{const f=--o,p=e[f];f>0&&(t[p.uuid]=d),e[d]=p,e.pop();for(let g=0,v=i;g!==v;++g){const b=r[g];b[d]=b[f],b.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,d=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(d);for(let f=u,p=l.length;f!==p;++f){const g=l[f];d[f]=new ii(g,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class kK{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:ky,endingEnd:ky};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=CP,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r=!1){if(e.fadeOut(t),this.fadeIn(t),r===!0){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r=!1){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case EP:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case sI:default:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===Tq;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===_P){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=Oy,i.endingEnd=Oy):(e?i.endingStart=this.zeroSlopeAtStart?Oy:ky:i.endingStart=P_,t?i.endingEnd=this.zeroSlopeAtEnd?Oy:ky:i.endingEnd=P_)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const Hde=new Float32Array(1);class OK extends kf{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let d=0;d!==s;++d){const f=i[d],p=f.name;let g=u[p];if(g!==void 0)++g.referenceCount,o[d]=g;else{if(g=o[d],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,p));continue}const v=t&&t._propertyBindings[d].binding.parsedPath;g=new DK(ii.create(r,p,v),f.ValueTypeName,f.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,p),o[d]=g}a[d].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,f=(e._localRoot||this._root).uuid;delete d[f],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new qP(new Float32Array(2),new Float32Array(2),1,Hde),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?p1.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=sI),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===r)return d;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new kK(this,o,t,r);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?p1.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)t[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class Vde extends RP{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isRenderTarget3D=!0,this.depth=r,this.texture=new lI(null,e,t,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class r4{constructor(e){this.value=e}clone(){return new r4(this.value.clone===void 0?this.value:this.value.clone())}}let Gde=0;class Wde extends kf{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Gde++}),this.name="",this.usage=z_,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const s=Array.isArray(t[r])?t[r]:[t[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class jde extends NC{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Xde{constructor(e,t,r,i,s,o=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.normalized=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const DV=new zn;class kI{constructor(e,t,r=0,i=1/0){this.ray=new Rv(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new d1,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return DV.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(DV),this}intersectObject(e,t=!0,r=[]){return tL(e,this,r,t),r.sort(kV),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)tL(e[i],this,r,t);return r.sort(kV),r}}function kV(n,e){return n.distance-e.distance}function tL(n,e,t,r){let i=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(i=!1),i===!0&&r===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)tL(s[o],e,t,!0)}}class qde{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=Kde.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function Kde(){this._document.hidden===!1&&this.reset()}class $R{constructor(e=1,t=0,r=0){this.radius=e,this.phi=t,this.theta=r}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=nr(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(nr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Yde{constructor(e=1,t=0,r=0){this.radius=e,this.theta=t,this.y=r}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}class i4{constructor(e,t,r,i){i4.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,r,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let r=0;r<4;r++)this.elements[r]=e[r+t];return this}set(e,t,r,i){const s=this.elements;return s[0]=e,s[2]=t,s[1]=r,s[3]=i,this}}const OV=new Nt;class Jde{constructor(e=new Nt(1/0,1/0),t=new Nt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=OV.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,OV).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const BV=new ve,CT=new ve,lx=new ve,cx=new ve,LO=new ve,Zde=new ve,Qde=new ve;class ehe{constructor(e=new ve,t=new ve){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){BV.subVectors(e,this.start),CT.subVectors(this.end,this.start);const r=CT.dot(CT);let s=CT.dot(BV)/r;return t&&(s=nr(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}distanceSqToLine3(e,t=Zde,r=Qde){const i=10000000000000001e-32;let s,o;const a=this.start,l=e.start,c=this.end,u=e.end;lx.subVectors(c,a),cx.subVectors(u,l),LO.subVectors(a,l);const d=lx.dot(lx),f=cx.dot(cx),p=cx.dot(LO);if(d<=i&&f<=i)return t.copy(a),r.copy(l),t.sub(r),t.dot(t);if(d<=i)s=0,o=p/f,o=nr(o,0,1);else{const g=lx.dot(LO);if(f<=i)o=0,s=nr(-g/d,0,1);else{const v=lx.dot(cx),b=d*f-v*v;b!==0?s=nr((v*p-g*f)/b,0,1):s=0,o=(v*s+p)/f,o<0?(o=0,s=nr(-g/d,0,1)):o>1&&(o=1,s=nr((v-g)/d,0,1))}}return t.copy(a).add(lx.multiplyScalar(s)),r.copy(l).add(cx.multiplyScalar(o)),t.sub(r),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const $V=new ve;class BK extends ei{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new gr,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new An(i,3));const s=new ol({fog:!1,toneMapped:!1});this.cone=new hh(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),$V.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt($V),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const tg=new ve,ET=new zn,FO=new zn;class the extends hh{constructor(e){const t=$K(e),r=new gr,i=[],s=[];for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(0,0,0),s.push(0,0,0))}r.setAttribute("position",new An(i,3)),r.setAttribute("color",new An(s,3));const o=new ol({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,o),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const a=new rn(255),l=new rn(65280);this.setColors(a,l)}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");FO.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(ET.multiplyMatrices(FO,a.matrixWorld),tg.setFromMatrixPosition(ET),i.setXYZ(o,tg.x,tg.y,tg.z),ET.multiplyMatrices(FO,a.parent.matrixWorld),tg.setFromMatrixPosition(ET),i.setXYZ(o+1,tg.x,tg.y,tg.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const i=this.geometry.getAttribute("color");for(let s=0;s<i.count;s+=2)i.setXYZ(s,e.r,e.g,e.b),i.setXYZ(s+1,t.r,t.g,t.b);return i.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function $K(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...$K(n.children[t]));return e}class nhe extends Li{constructor(e,t,r){const i=new O1(t,4,2),s=new bc({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const rhe=new ve,LV=new rn,FV=new rn;class ihe extends ei{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new BC(t);i.rotateY(Math.PI*.5),this.material=new bc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new ai(o,3)),this.add(new Li(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");LV.copy(this.light.color),FV.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?LV:FV;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(rhe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class LK extends hh{constructor(e=10,t=10,r=4473924,i=8947848){r=new rn(r),i=new rn(i);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let f=0,p=0,g=-a;f<=t;f++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const v=f===s?r:i;v.toArray(c,p),p+=3,v.toArray(c,p),p+=3,v.toArray(c,p),p+=3,v.toArray(c,p),p+=3}const u=new gr;u.setAttribute("position",new An(l,3)),u.setAttribute("color",new An(c,3));const d=new ol({vertexColors:!0,toneMapped:!1});super(u,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class she extends hh{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new rn(s),o=new rn(o);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const f=d/t*(Math.PI*2),p=Math.sin(f)*e,g=Math.cos(f)*e;a.push(0,0,0),a.push(p,0,g);const v=d&1?s:o;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(let d=0;d<r;d++){const f=d&1?s:o,p=e-e/r*d;for(let g=0;g<i;g++){let v=g/i*(Math.PI*2),b=Math.sin(v)*p,x=Math.cos(v)*p;a.push(b,0,x),l.push(f.r,f.g,f.b),v=(g+1)/i*(Math.PI*2),b=Math.sin(v)*p,x=Math.cos(v)*p,a.push(b,0,x),l.push(f.r,f.g,f.b)}}const c=new gr;c.setAttribute("position",new An(a,3)),c.setAttribute("color",new An(l,3));const u=new ol({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const PV=new ve,AT=new ve,UV=new ve;class FK extends ei{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new gr;i.setAttribute("position",new An([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new ol({fog:!1,toneMapped:!1});this.lightPlane=new Hp(i,s),this.add(this.lightPlane),i=new gr,i.setAttribute("position",new An([0,0,0,0,0,1],3)),this.targetLine=new Hp(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),PV.setFromMatrixPosition(this.light.matrixWorld),AT.setFromMatrixPosition(this.light.target.matrixWorld),UV.subVectors(AT,PV),this.lightPlane.lookAt(AT),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(AT),this.targetLine.scale.z=UV.length()}}const TT=new ve,Vs=new cI;class PK extends hh{constructor(e){const t=new gr,r=new ol({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,v){l(g),l(v)}function l(g){i.push(0,0,0),s.push(0,0,0),o[g]===void 0&&(o[g]=[]),o[g].push(i.length/3-1)}t.setAttribute("position",new An(i,3)),t.setAttribute("color",new An(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new rn(16755200),u=new rn(16711680),d=new rn(43775),f=new rn(16777215),p=new rn(3355443);this.setColors(c,u,d,f,p)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");return a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;let s,o;if(Vs.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)s=1,o=0;else if(this.camera.coordinateSystem===tu)s=-1,o=1;else if(this.camera.coordinateSystem===c1)s=0,o=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);lo("c",t,e,Vs,0,0,s),lo("t",t,e,Vs,0,0,o),lo("n1",t,e,Vs,-r,-i,s),lo("n2",t,e,Vs,r,-i,s),lo("n3",t,e,Vs,-r,i,s),lo("n4",t,e,Vs,r,i,s),lo("f1",t,e,Vs,-r,-i,o),lo("f2",t,e,Vs,r,-i,o),lo("f3",t,e,Vs,-r,i,o),lo("f4",t,e,Vs,r,i,o),lo("u1",t,e,Vs,r*.7,i*1.1,s),lo("u2",t,e,Vs,-r*.7,i*1.1,s),lo("u3",t,e,Vs,0,i*2,s),lo("cf1",t,e,Vs,-r,0,o),lo("cf2",t,e,Vs,r,0,o),lo("cf3",t,e,Vs,0,-i,o),lo("cf4",t,e,Vs,0,i,o),lo("cn1",t,e,Vs,-r,0,s),lo("cn2",t,e,Vs,r,0,s),lo("cn3",t,e,Vs,0,-i,s),lo("cn4",t,e,Vs,0,i,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function lo(n,e,t,r,i,s,o){TT.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],TT.x,TT.y,TT.z)}}const MT=new Ra;class ohe extends hh{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),s=new gr;s.setIndex(new ai(r,1)),s.setAttribute("position",new ai(i,3)),super(s,new ol({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&MT.setFromObject(this.object),MT.isEmpty())return;const e=MT.min,t=MT.max,r=this.geometry.attributes.position,i=r.array;i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=e.x,i[4]=t.y,i[5]=t.z,i[6]=e.x,i[7]=e.y,i[8]=t.z,i[9]=t.x,i[10]=e.y,i[11]=t.z,i[12]=t.x,i[13]=t.y,i[14]=e.z,i[15]=e.x,i[16]=t.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=t.x,i[22]=e.y,i[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ahe extends hh{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new gr;s.setIndex(new ai(r,1)),s.setAttribute("position",new An(i,3)),super(s,new ol({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class lhe extends Hp{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new gr;o.setAttribute("position",new An(s,3)),o.computeBoundingSphere(),super(o,new ol({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new gr;l.setAttribute("position",new An(a,3)),l.computeBoundingSphere(),this.add(new Li(l,new bc({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const zV=new ve;let RT,PO;class che extends ei{constructor(e=new ve(0,0,1),t=new ve(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",RT===void 0&&(RT=new gr,RT.setAttribute("position",new An([0,0,0,0,1,0],3)),PO=new kC(.5,1,5,1),PO.translate(0,-.5,0)),this.position.copy(t),this.line=new Hp(RT,new ol({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Li(PO,new bc({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{zV.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(zV,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class UK extends hh{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new gr;i.setAttribute("position",new An(t,3)),i.setAttribute("color",new An(r,3));const s=new ol({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new rn,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class uhe{constructor(){this.type="ShapePath",this.color=new rn,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new BR,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(x){const _=[];for(let E=0,C=x.length;E<C;E++){const M=x[E],R=new qy;R.curves=M.curves,_.push(R)}return _}function r(x,_){const E=_.length;let C=!1;for(let M=E-1,R=0;R<E;M=R++){let L=_[M],B=_[R],N=B.x-L.x,I=B.y-L.y;if(Math.abs(I)>Number.EPSILON){if(I<0&&(L=_[R],N=-N,B=_[M],I=-I),x.y<L.y||x.y>B.y)continue;if(x.y===L.y){if(x.x===L.x)return!0}else{const D=I*(x.x-L.x)-N*(x.y-L.y);if(D===0)return!0;if(D<0)continue;C=!C}}else{if(x.y!==L.y)continue;if(B.x<=x.x&&x.x<=L.x||L.x<=x.x&&x.x<=B.x)return!0}}return C}const i=Yd.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new qy,l.curves=a.curves,c.push(l),c;let u=!i(s[0].getPoints());u=e?!u:u;const d=[],f=[];let p=[],g=0,v;f[g]=void 0,p[g]=[];for(let x=0,_=s.length;x<_;x++)a=s[x],v=a.getPoints(),o=i(v),o=e?!o:o,o?(!u&&f[g]&&g++,f[g]={s:new qy,p:v},f[g].s.curves=a.curves,u&&g++,p[g]=[]):p[g].push({h:a,p:v[0]});if(!f[0])return t(s);if(f.length>1){let x=!1,_=0;for(let E=0,C=f.length;E<C;E++)d[E]=[];for(let E=0,C=f.length;E<C;E++){const M=p[E];for(let R=0;R<M.length;R++){const L=M[R];let B=!0;for(let N=0;N<f.length;N++)r(L.p,f[N].p)&&(E!==N&&_++,B?(B=!1,d[N].push(L)):x=!0);B&&d[E].push(L)}}_>0&&x===!1&&(p=d)}let b;for(let x=0,_=f.length;x<_;x++){l=f[x].s,c.push(l),b=p[x];for(let E=0,C=b.length;E<C;E++)l.holes.push(b[E].h)}return c}}class zK extends kf{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function dhe(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function hhe(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function fhe(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function nL(n,e,t,r){const i=phe(r);switch(t){case bP:return n*e;case AC:return n*e/i.components*i.byteLength;case TC:return n*e/i.components*i.byteLength;case SP:return n*e*2/i.components*i.byteLength;case rI:return n*e*2/i.components*i.byteLength;case xP:return n*e*3/i.components*i.byteLength;case uo:return n*e*4/i.components*i.byteLength;case iI:return n*e*4/i.components*i.byteLength;case y_:case v_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case b_:case x_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case oR:case lR:return Math.max(n,16)*Math.max(e,8)/4;case sR:case aR:return Math.max(n,8)*Math.max(e,8)/2;case cR:case uR:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case dR:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case hR:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case fR:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case pR:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case mR:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case gR:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case yR:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case vR:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case bR:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case xR:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case SR:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case wR:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case _R:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case CR:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case ER:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case S_:case AR:case TR:return Math.ceil(n/4)*Math.ceil(e/4)*16;case wP:case MR:return Math.ceil(n/4)*Math.ceil(e/4)*8;case RR:case NR:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function phe(n){switch(n){case zl:case QN:return{byteLength:1,components:1};case r1:case eI:case Xs:return{byteLength:2,components:1};case tI:case nI:return{byteLength:2,components:4};case Cf:case EC:case is:return{byteLength:4,components:1};case vP:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class mhe{static contain(e,t){return dhe(e,t)}static cover(e,t){return hhe(e,t)}static fill(e){return fhe(e)}static getByteLength(e,t,r,i){return nL(e,t,r,i)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:_C}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=_C);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function HK(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function ghe(n){const e=new WeakMap;function t(a,l){const c=a.array,u=a.usage,d=c.byteLength,f=n.createBuffer();n.bindBuffer(l,f),n.bufferData(l,c,u),a.onUploadCallback();let p;if(c instanceof Float32Array)p=n.FLOAT;else if(typeof Float16Array<"u"&&c instanceof Float16Array)p=n.HALF_FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?p=n.HALF_FLOAT:p=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)p=n.SHORT;else if(c instanceof Uint32Array)p=n.UNSIGNED_INT;else if(c instanceof Int32Array)p=n.INT;else if(c instanceof Int8Array)p=n.BYTE;else if(c instanceof Uint8Array)p=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)p=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:f,type:p,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:d}}function r(a,l,c){const u=l.array,d=l.updateRanges;if(n.bindBuffer(c,a),d.length===0)n.bufferSubData(c,0,u);else{d.sort((p,g)=>p.start-g.start);let f=0;for(let p=1;p<d.length;p++){const g=d[f],v=d[p];v.start<=g.start+g.count+1?g.count=Math.max(g.count,v.start+v.count-g.start):(++f,d[f]=v)}d.length=f+1;for(let p=0,g=d.length;p<g;p++){const v=d[p];n.bufferSubData(c,v.start*u.BYTES_PER_ELEMENT,u,v.start,v.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(c.buffer,a,l),c.version=a.version}}return{get:i,remove:s,update:o}}var yhe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,vhe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,bhe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,xhe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,She=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,whe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,_he=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Che=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Ehe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Ahe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,The=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Mhe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Rhe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Nhe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Ihe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Dhe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,khe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Ohe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Bhe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,$he=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Lhe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Fhe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Phe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Uhe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,zhe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Hhe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Vhe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Ghe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Whe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,jhe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Xhe="gl_FragColor = linearToOutputTexel( gl_FragColor );",qhe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Khe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Yhe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Jhe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Zhe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Qhe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,efe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,tfe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,nfe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,rfe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,ife=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,sfe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,ofe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,afe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lfe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,cfe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,ufe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,dfe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,hfe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,ffe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,pfe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,mfe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,gfe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,yfe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,vfe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,bfe=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,xfe=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Sfe=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,wfe=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,_fe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Cfe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Efe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Afe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Tfe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Mfe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Rfe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Nfe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Ife=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Dfe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,kfe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Ofe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Bfe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,$fe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Lfe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Ffe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Pfe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Ufe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,zfe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Hfe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Vfe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Gfe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Wfe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,jfe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Xfe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,qfe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Kfe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Yfe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Jfe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Zfe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSEDEPTHBUF
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSEDEPTHBUF
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare , distribution.x );
		#endif
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Qfe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,epe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,tpe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,npe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,rpe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,ipe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,spe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,ope=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,ape=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,lpe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,cpe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,upe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,dpe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,hpe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,fpe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,ppe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,mpe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const gpe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,ype=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vpe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,bpe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,xpe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Spe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,wpe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,_pe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSEDEPTHBUF
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Cpe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Epe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Ape=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Tpe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Mpe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Rpe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Npe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Ipe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Dpe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kpe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ope=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Bpe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$pe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Lpe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Fpe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ppe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Upe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,zpe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Hpe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Vpe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Gpe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Wpe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,jpe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Xpe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,qpe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Kpe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,hr={alphahash_fragment:yhe,alphahash_pars_fragment:vhe,alphamap_fragment:bhe,alphamap_pars_fragment:xhe,alphatest_fragment:She,alphatest_pars_fragment:whe,aomap_fragment:_he,aomap_pars_fragment:Che,batching_pars_vertex:Ehe,batching_vertex:Ahe,begin_vertex:The,beginnormal_vertex:Mhe,bsdfs:Rhe,iridescence_fragment:Nhe,bumpmap_pars_fragment:Ihe,clipping_planes_fragment:Dhe,clipping_planes_pars_fragment:khe,clipping_planes_pars_vertex:Ohe,clipping_planes_vertex:Bhe,color_fragment:$he,color_pars_fragment:Lhe,color_pars_vertex:Fhe,color_vertex:Phe,common:Uhe,cube_uv_reflection_fragment:zhe,defaultnormal_vertex:Hhe,displacementmap_pars_vertex:Vhe,displacementmap_vertex:Ghe,emissivemap_fragment:Whe,emissivemap_pars_fragment:jhe,colorspace_fragment:Xhe,colorspace_pars_fragment:qhe,envmap_fragment:Khe,envmap_common_pars_fragment:Yhe,envmap_pars_fragment:Jhe,envmap_pars_vertex:Zhe,envmap_physical_pars_fragment:cfe,envmap_vertex:Qhe,fog_vertex:efe,fog_pars_vertex:tfe,fog_fragment:nfe,fog_pars_fragment:rfe,gradientmap_pars_fragment:ife,lightmap_pars_fragment:sfe,lights_lambert_fragment:ofe,lights_lambert_pars_fragment:afe,lights_pars_begin:lfe,lights_toon_fragment:ufe,lights_toon_pars_fragment:dfe,lights_phong_fragment:hfe,lights_phong_pars_fragment:ffe,lights_physical_fragment:pfe,lights_physical_pars_fragment:mfe,lights_fragment_begin:gfe,lights_fragment_maps:yfe,lights_fragment_end:vfe,logdepthbuf_fragment:bfe,logdepthbuf_pars_fragment:xfe,logdepthbuf_pars_vertex:Sfe,logdepthbuf_vertex:wfe,map_fragment:_fe,map_pars_fragment:Cfe,map_particle_fragment:Efe,map_particle_pars_fragment:Afe,metalnessmap_fragment:Tfe,metalnessmap_pars_fragment:Mfe,morphinstance_vertex:Rfe,morphcolor_vertex:Nfe,morphnormal_vertex:Ife,morphtarget_pars_vertex:Dfe,morphtarget_vertex:kfe,normal_fragment_begin:Ofe,normal_fragment_maps:Bfe,normal_pars_fragment:$fe,normal_pars_vertex:Lfe,normal_vertex:Ffe,normalmap_pars_fragment:Pfe,clearcoat_normal_fragment_begin:Ufe,clearcoat_normal_fragment_maps:zfe,clearcoat_pars_fragment:Hfe,iridescence_pars_fragment:Vfe,opaque_fragment:Gfe,packing:Wfe,premultiplied_alpha_fragment:jfe,project_vertex:Xfe,dithering_fragment:qfe,dithering_pars_fragment:Kfe,roughnessmap_fragment:Yfe,roughnessmap_pars_fragment:Jfe,shadowmap_pars_fragment:Zfe,shadowmap_pars_vertex:Qfe,shadowmap_vertex:epe,shadowmask_pars_fragment:tpe,skinbase_vertex:npe,skinning_pars_vertex:rpe,skinning_vertex:ipe,skinnormal_vertex:spe,specularmap_fragment:ope,specularmap_pars_fragment:ape,tonemapping_fragment:lpe,tonemapping_pars_fragment:cpe,transmission_fragment:upe,transmission_pars_fragment:dpe,uv_pars_fragment:hpe,uv_pars_vertex:fpe,uv_vertex:ppe,worldpos_vertex:mpe,background_vert:gpe,background_frag:ype,backgroundCube_vert:vpe,backgroundCube_frag:bpe,cube_vert:xpe,cube_frag:Spe,depth_vert:wpe,depth_frag:_pe,distanceRGBA_vert:Cpe,distanceRGBA_frag:Epe,equirect_vert:Ape,equirect_frag:Tpe,linedashed_vert:Mpe,linedashed_frag:Rpe,meshbasic_vert:Npe,meshbasic_frag:Ipe,meshlambert_vert:Dpe,meshlambert_frag:kpe,meshmatcap_vert:Ope,meshmatcap_frag:Bpe,meshnormal_vert:$pe,meshnormal_frag:Lpe,meshphong_vert:Fpe,meshphong_frag:Ppe,meshphysical_vert:Upe,meshphysical_frag:zpe,meshtoon_vert:Hpe,meshtoon_frag:Vpe,points_vert:Gpe,points_frag:Wpe,shadow_vert:jpe,shadow_frag:Xpe,sprite_vert:qpe,sprite_frag:Kpe},hn={common:{diffuse:{value:new rn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new xr},alphaMap:{value:null},alphaMapTransform:{value:new xr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new xr}},envmap:{envMap:{value:null},envMapRotation:{value:new xr},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new xr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new xr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new xr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new xr},normalScale:{value:new Nt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new xr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new xr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new xr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new xr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new rn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new rn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new xr},alphaTest:{value:0},uvTransform:{value:new xr}},sprite:{diffuse:{value:new rn(16777215)},opacity:{value:1},center:{value:new Nt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new xr},alphaMap:{value:null},alphaMapTransform:{value:new xr},alphaTest:{value:0}}},jd={basic:{uniforms:Il([hn.common,hn.specularmap,hn.envmap,hn.aomap,hn.lightmap,hn.fog]),vertexShader:hr.meshbasic_vert,fragmentShader:hr.meshbasic_frag},lambert:{uniforms:Il([hn.common,hn.specularmap,hn.envmap,hn.aomap,hn.lightmap,hn.emissivemap,hn.bumpmap,hn.normalmap,hn.displacementmap,hn.fog,hn.lights,{emissive:{value:new rn(0)}}]),vertexShader:hr.meshlambert_vert,fragmentShader:hr.meshlambert_frag},phong:{uniforms:Il([hn.common,hn.specularmap,hn.envmap,hn.aomap,hn.lightmap,hn.emissivemap,hn.bumpmap,hn.normalmap,hn.displacementmap,hn.fog,hn.lights,{emissive:{value:new rn(0)},specular:{value:new rn(1118481)},shininess:{value:30}}]),vertexShader:hr.meshphong_vert,fragmentShader:hr.meshphong_frag},standard:{uniforms:Il([hn.common,hn.envmap,hn.aomap,hn.lightmap,hn.emissivemap,hn.bumpmap,hn.normalmap,hn.displacementmap,hn.roughnessmap,hn.metalnessmap,hn.fog,hn.lights,{emissive:{value:new rn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:hr.meshphysical_vert,fragmentShader:hr.meshphysical_frag},toon:{uniforms:Il([hn.common,hn.aomap,hn.lightmap,hn.emissivemap,hn.bumpmap,hn.normalmap,hn.displacementmap,hn.gradientmap,hn.fog,hn.lights,{emissive:{value:new rn(0)}}]),vertexShader:hr.meshtoon_vert,fragmentShader:hr.meshtoon_frag},matcap:{uniforms:Il([hn.common,hn.bumpmap,hn.normalmap,hn.displacementmap,hn.fog,{matcap:{value:null}}]),vertexShader:hr.meshmatcap_vert,fragmentShader:hr.meshmatcap_frag},points:{uniforms:Il([hn.points,hn.fog]),vertexShader:hr.points_vert,fragmentShader:hr.points_frag},dashed:{uniforms:Il([hn.common,hn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:hr.linedashed_vert,fragmentShader:hr.linedashed_frag},depth:{uniforms:Il([hn.common,hn.displacementmap]),vertexShader:hr.depth_vert,fragmentShader:hr.depth_frag},normal:{uniforms:Il([hn.common,hn.bumpmap,hn.normalmap,hn.displacementmap,{opacity:{value:1}}]),vertexShader:hr.meshnormal_vert,fragmentShader:hr.meshnormal_frag},sprite:{uniforms:Il([hn.sprite,hn.fog]),vertexShader:hr.sprite_vert,fragmentShader:hr.sprite_frag},background:{uniforms:{uvTransform:{value:new xr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:hr.background_vert,fragmentShader:hr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new xr}},vertexShader:hr.backgroundCube_vert,fragmentShader:hr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:hr.cube_vert,fragmentShader:hr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:hr.equirect_vert,fragmentShader:hr.equirect_frag},distanceRGBA:{uniforms:Il([hn.common,hn.displacementmap,{referencePosition:{value:new ve},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:hr.distanceRGBA_vert,fragmentShader:hr.distanceRGBA_frag},shadow:{uniforms:Il([hn.lights,hn.fog,{color:{value:new rn(0)},opacity:{value:1}}]),vertexShader:hr.shadow_vert,fragmentShader:hr.shadow_frag}};jd.physical={uniforms:Il([jd.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new xr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new xr},clearcoatNormalScale:{value:new Nt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new xr},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new xr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new xr},sheen:{value:0},sheenColor:{value:new rn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new xr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new xr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new xr},transmissionSamplerSize:{value:new Nt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new xr},attenuationDistance:{value:0},attenuationColor:{value:new rn(0)},specularColor:{value:new rn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new xr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new xr},anisotropyVector:{value:new Nt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new xr}}]),vertexShader:hr.meshphysical_vert,fragmentShader:hr.meshphysical_frag};const NT={r:0,b:0,g:0},ly=new Ac,Ype=new zn;function Jpe(n,e,t,r,i,s,o){const a=new rn(0);let l=s===!0?0:1,c,u,d=null,f=0,p=null;function g(E){let C=E.isScene===!0?E.background:null;return C&&C.isTexture&&(C=(E.backgroundBlurriness>0?t:e).get(C)),C}function v(E){let C=!1;const M=g(E);M===null?x(a,l):M&&M.isColor&&(x(M,1),C=!0);const R=n.xr.getEnvironmentBlendMode();R==="additive"?r.buffers.color.setClear(0,0,0,1,o):R==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||C)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function b(E,C){const M=g(C);M&&(M.isCubeTexture||M.mapping===I1)?(u===void 0&&(u=new Li(new Qp(1,1,1),new Da({name:"BackgroundCubeMaterial",uniforms:h1(jd.backgroundCube.uniforms),vertexShader:jd.backgroundCube.vertexShader,fragmentShader:jd.backgroundCube.fragmentShader,side:Ma,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(R,L,B){this.matrixWorld.copyPosition(B.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),ly.copy(C.backgroundRotation),ly.x*=-1,ly.y*=-1,ly.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1&&(ly.y*=-1,ly.z*=-1),u.material.uniforms.envMap.value=M,u.material.uniforms.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=C.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(Ype.makeRotationFromEuler(ly)),u.material.toneMapped=Qr.getTransfer(M.colorSpace)!==$i,(d!==M||f!==M.version||p!==n.toneMapping)&&(u.material.needsUpdate=!0,d=M,f=M.version,p=n.toneMapping),u.layers.enableAll(),E.unshift(u,u.geometry,u.material,0,0,null)):M&&M.isTexture&&(c===void 0&&(c=new Li(new Of(2,2),new Da({name:"BackgroundMaterial",uniforms:h1(jd.background.uniforms),vertexShader:jd.background.vertexShader,fragmentShader:jd.background.fragmentShader,side:wf,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=M,c.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,c.material.toneMapped=Qr.getTransfer(M.colorSpace)!==$i,M.matrixAutoUpdate===!0&&M.updateMatrix(),c.material.uniforms.uvTransform.value.copy(M.matrix),(d!==M||f!==M.version||p!==n.toneMapping)&&(c.material.needsUpdate=!0,d=M,f=M.version,p=n.toneMapping),c.layers.enableAll(),E.unshift(c,c.geometry,c.material,0,0,null))}function x(E,C){E.getRGB(NT,Vq(n)),r.buffers.color.setClear(NT.r,NT.g,NT.b,C,o)}function _(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return a},setClearColor:function(E,C=1){a.set(E),l=C,x(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(E){l=E,x(a,l)},render:v,addToRenderList:b,dispose:_}}function Zpe(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=f(null);let s=i,o=!1;function a(I,D,P,G,W){let q=!1;const z=d(G,P,D);s!==z&&(s=z,c(s.object)),q=p(I,G,P,W),q&&g(I,G,P,W),W!==null&&e.update(W,n.ELEMENT_ARRAY_BUFFER),(q||o)&&(o=!1,C(I,D,P,G),W!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(W).buffer))}function l(){return n.createVertexArray()}function c(I){return n.bindVertexArray(I)}function u(I){return n.deleteVertexArray(I)}function d(I,D,P){const G=P.wireframe===!0;let W=r[I.id];W===void 0&&(W={},r[I.id]=W);let q=W[D.id];q===void 0&&(q={},W[D.id]=q);let z=q[G];return z===void 0&&(z=f(l()),q[G]=z),z}function f(I){const D=[],P=[],G=[];for(let W=0;W<t;W++)D[W]=0,P[W]=0,G[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:D,enabledAttributes:P,attributeDivisors:G,object:I,attributes:{},index:null}}function p(I,D,P,G){const W=s.attributes,q=D.attributes;let z=0;const J=P.getAttributes();for(const Q in J)if(J[Q].location>=0){const X=W[Q];let te=q[Q];if(te===void 0&&(Q==="instanceMatrix"&&I.instanceMatrix&&(te=I.instanceMatrix),Q==="instanceColor"&&I.instanceColor&&(te=I.instanceColor)),X===void 0||X.attribute!==te||te&&X.data!==te.data)return!0;z++}return s.attributesNum!==z||s.index!==G}function g(I,D,P,G){const W={},q=D.attributes;let z=0;const J=P.getAttributes();for(const Q in J)if(J[Q].location>=0){let X=q[Q];X===void 0&&(Q==="instanceMatrix"&&I.instanceMatrix&&(X=I.instanceMatrix),Q==="instanceColor"&&I.instanceColor&&(X=I.instanceColor));const te={};te.attribute=X,X&&X.data&&(te.data=X.data),W[Q]=te,z++}s.attributes=W,s.attributesNum=z,s.index=G}function v(){const I=s.newAttributes;for(let D=0,P=I.length;D<P;D++)I[D]=0}function b(I){x(I,0)}function x(I,D){const P=s.newAttributes,G=s.enabledAttributes,W=s.attributeDivisors;P[I]=1,G[I]===0&&(n.enableVertexAttribArray(I),G[I]=1),W[I]!==D&&(n.vertexAttribDivisor(I,D),W[I]=D)}function _(){const I=s.newAttributes,D=s.enabledAttributes;for(let P=0,G=D.length;P<G;P++)D[P]!==I[P]&&(n.disableVertexAttribArray(P),D[P]=0)}function E(I,D,P,G,W,q,z){z===!0?n.vertexAttribIPointer(I,D,P,W,q):n.vertexAttribPointer(I,D,P,G,W,q)}function C(I,D,P,G){v();const W=G.attributes,q=P.getAttributes(),z=D.defaultAttributeValues;for(const J in q){const Q=q[J];if(Q.location>=0){let Y=W[J];if(Y===void 0&&(J==="instanceMatrix"&&I.instanceMatrix&&(Y=I.instanceMatrix),J==="instanceColor"&&I.instanceColor&&(Y=I.instanceColor)),Y!==void 0){const X=Y.normalized,te=Y.itemSize,ne=e.get(Y);if(ne===void 0)continue;const le=ne.buffer,ye=ne.type,ue=ne.bytesPerElement,be=ye===n.INT||ye===n.UNSIGNED_INT||Y.gpuType===EC;if(Y.isInterleavedBufferAttribute){const xe=Y.data,Pe=xe.stride,ze=Y.offset;if(xe.isInstancedInterleavedBuffer){for(let Ke=0;Ke<Q.locationSize;Ke++)x(Q.location+Ke,xe.meshPerAttribute);I.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=xe.meshPerAttribute*xe.count)}else for(let Ke=0;Ke<Q.locationSize;Ke++)b(Q.location+Ke);n.bindBuffer(n.ARRAY_BUFFER,le);for(let Ke=0;Ke<Q.locationSize;Ke++)E(Q.location+Ke,te/Q.locationSize,ye,X,Pe*ue,(ze+te/Q.locationSize*Ke)*ue,be)}else{if(Y.isInstancedBufferAttribute){for(let xe=0;xe<Q.locationSize;xe++)x(Q.location+xe,Y.meshPerAttribute);I.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=Y.meshPerAttribute*Y.count)}else for(let xe=0;xe<Q.locationSize;xe++)b(Q.location+xe);n.bindBuffer(n.ARRAY_BUFFER,le);for(let xe=0;xe<Q.locationSize;xe++)E(Q.location+xe,te/Q.locationSize,ye,X,te*ue,te/Q.locationSize*xe*ue,be)}}else if(z!==void 0){const X=z[J];if(X!==void 0)switch(X.length){case 2:n.vertexAttrib2fv(Q.location,X);break;case 3:n.vertexAttrib3fv(Q.location,X);break;case 4:n.vertexAttrib4fv(Q.location,X);break;default:n.vertexAttrib1fv(Q.location,X)}}}}_()}function M(){B();for(const I in r){const D=r[I];for(const P in D){const G=D[P];for(const W in G)u(G[W].object),delete G[W];delete D[P]}delete r[I]}}function R(I){if(r[I.id]===void 0)return;const D=r[I.id];for(const P in D){const G=D[P];for(const W in G)u(G[W].object),delete G[W];delete D[P]}delete r[I.id]}function L(I){for(const D in r){const P=r[D];if(P[I.id]===void 0)continue;const G=P[I.id];for(const W in G)u(G[W].object),delete G[W];delete P[I.id]}}function B(){N(),o=!0,s!==i&&(s=i,c(s.object))}function N(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:B,resetDefaultState:N,dispose:M,releaseStatesOfGeometry:R,releaseStatesOfProgram:L,initAttributes:v,enableAttribute:b,disableUnusedAttributes:_}}function Qpe(n,e,t){let r;function i(c){r=c}function s(c,u){n.drawArrays(r,c,u),t.update(u,r,1)}function o(c,u,d){d!==0&&(n.drawArraysInstanced(r,c,u,d),t.update(u,r,d))}function a(c,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,c,0,u,0,d);let p=0;for(let g=0;g<d;g++)p+=u[g];t.update(p,r,1)}function l(c,u,d,f){if(d===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let g=0;g<c.length;g++)o(c[g],u[g],f[g]);else{p.multiDrawArraysInstancedWEBGL(r,c,0,u,0,f,0,d);let g=0;for(let v=0;v<d;v++)g+=u[v]*f[v];t.update(g,r,1)}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function eme(n,e,t,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const L=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(L){return!(L!==uo&&r.convert(L)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(L){const B=L===Xs&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(L!==zl&&r.convert(L)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&L!==is&&!B)}function l(L){if(L==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";L="mediump"}return L==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const d=t.logarithmicDepthBuffer===!0,f=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_TEXTURE_SIZE),b=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),x=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),E=n.getParameter(n.MAX_VARYING_VECTORS),C=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),M=g>0,R=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:d,reversedDepthBuffer:f,maxTextures:p,maxVertexTextures:g,maxTextureSize:v,maxCubemapSize:b,maxAttributes:x,maxVertexUniforms:_,maxVaryings:E,maxFragmentUniforms:C,vertexTextures:M,maxSamples:R}}function tme(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Cp,a=new xr,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){const p=d.length!==0||f||r!==0||i;return i=f,r=d.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,f){t=u(d,f,0)},this.setState=function(d,f,p){const g=d.clippingPlanes,v=d.clipIntersection,b=d.clipShadows,x=n.get(d);if(!i||g===null||g.length===0||s&&!b)s?u(null):c();else{const _=s?0:r,E=_*4;let C=x.clippingState||null;l.value=C,C=u(g,f,E,p);for(let M=0;M!==E;++M)C[M]=t[M];x.clippingState=C,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=_}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,f,p,g){const v=d!==null?d.length:0;let b=null;if(v!==0){if(b=l.value,g!==!0||b===null){const x=p+v*4,_=f.matrixWorldInverse;a.getNormalMatrix(_),(b===null||b.length<x)&&(b=new Float32Array(x));for(let E=0,C=p;E!==v;++E,C+=4)o.copy(d[E]).applyMatrix4(_,a),o.normal.toArray(b,C),b[C+3]=o.constant}l.value=b,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,b}}function nme(n){let e=new WeakMap;function t(o,a){return a===t1?o.mapping=_f:a===F_&&(o.mapping=Eg),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===t1||a===F_)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new kP(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",i),t(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}const Ox=4,HV=[.125,.215,.35,.446,.526,.582],Cy=20,UO=new Dv,VV=new rn;let zO=null,HO=0,VO=0,GO=!1;const by=(1+Math.sqrt(5))/2,ux=1/by,GV=[new ve(-by,ux,0),new ve(by,ux,0),new ve(-ux,0,by),new ve(ux,0,by),new ve(0,by,-ux),new ve(0,by,ux),new ve(-1,1,-1),new ve(1,1,-1),new ve(-1,1,1),new ve(1,1,1)],rme=new ve;class rL{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100,s={}){const{size:o=256,position:a=rme}=s;zO=this._renderer.getRenderTarget(),HO=this._renderer.getActiveCubeFace(),VO=this._renderer.getActiveMipmapLevel(),GO=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,r,i,l,a),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=XV(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=jV(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(zO,HO,VO),this._renderer.xr.enabled=GO,e.scissorTest=!1,IT(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===_f||e.mapping===Eg?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),zO=this._renderer.getRenderTarget(),HO=this._renderer.getActiveCubeFace(),VO=this._renderer.getActiveMipmapLevel(),GO=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:oi,minFilter:oi,generateMipmaps:!1,type:Xs,format:uo,colorSpace:Yu,depthBuffer:!1},i=WV(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=WV(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=ime(s)),this._blurMaterial=sme(s,e,t)}return i}_compileMaterial(e){const t=new Li(this._lodPlanes[0],e);this._renderer.compile(t,UO)}_sceneToCubeUV(e,t,r,i,s){const l=new So(90,1,t,r),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,f=d.autoClear,p=d.toneMapping;d.getClearColor(VV),d.toneMapping=mf,d.autoClear=!1,d.state.buffers.depth.getReversed()&&(d.setRenderTarget(i),d.clearDepth(),d.setRenderTarget(null));const v=new bc({name:"PMREM.Background",side:Ma,depthWrite:!1,depthTest:!1}),b=new Li(new Qp,v);let x=!1;const _=e.background;_?_.isColor&&(v.color.copy(_),e.background=null,x=!0):(v.color.copy(VV),x=!0);for(let E=0;E<6;E++){const C=E%3;C===0?(l.up.set(0,c[E],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+u[E],s.y,s.z)):C===1?(l.up.set(0,0,c[E]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+u[E],s.z)):(l.up.set(0,c[E],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+u[E]));const M=this._cubeSize;IT(i,C*M,E>2?M:0,M,M),d.setRenderTarget(i),x&&d.render(b,l),d.render(e,l)}b.geometry.dispose(),b.material.dispose(),d.toneMapping=p,d.autoClear=f,e.background=_}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===_f||e.mapping===Eg;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=XV()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=jV());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Li(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;IT(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,UO)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=GV[(i-s-1)%GV.length];this._blur(e,s-1,s,o,a)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new Li(this._lodPlanes[i],c),f=c.uniforms,p=this._sizeLods[r]-1,g=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*Cy-1),v=s/g,b=isFinite(s)?1+Math.floor(u*v):Cy;b>Cy&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${b} samples when the maximum is set to ${Cy}`);const x=[];let _=0;for(let L=0;L<Cy;++L){const B=L/v,N=Math.exp(-B*B/2);x.push(N),L===0?_+=N:L<b&&(_+=2*N)}for(let L=0;L<x.length;L++)x[L]=x[L]/_;f.envMap.value=e.texture,f.samples.value=b,f.weights.value=x,f.latitudinal.value=o==="latitudinal",a&&(f.poleAxis.value=a);const{_lodMax:E}=this;f.dTheta.value=g,f.mipInt.value=E-r;const C=this._sizeLods[i],M=3*C*(i>E-Ox?i-E+Ox:0),R=4*(this._cubeSize-C);IT(t,M,R,3*C,2*C),l.setRenderTarget(t),l.render(d,UO)}}function ime(n){const e=[],t=[],r=[];let i=n;const s=n-Ox+1+HV.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-Ox?l=HV[o-n+Ox-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,d=1+c,f=[u,u,d,u,d,d,u,u,d,d,u,d],p=6,g=6,v=3,b=2,x=1,_=new Float32Array(v*g*p),E=new Float32Array(b*g*p),C=new Float32Array(x*g*p);for(let R=0;R<p;R++){const L=R%3*2/3-1,B=R>2?0:-1,N=[L,B,0,L+2/3,B,0,L+2/3,B+1,0,L,B,0,L+2/3,B+1,0,L,B+1,0];_.set(N,v*g*R),E.set(f,b*g*R);const I=[R,R,R,R,R,R];C.set(I,x*g*R)}const M=new gr;M.setAttribute("position",new ai(_,v)),M.setAttribute("uv",new ai(E,b)),M.setAttribute("faceIndex",new ai(C,x)),e.push(M),i>Ox&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function WV(n,e,t){const r=new Ec(n,e,t);return r.texture.mapping=I1,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function IT(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function sme(n,e,t){const r=new Float32Array(Cy),i=new ve(0,1,0);return new Da({name:"SphericalGaussianBlur",defines:{n:Cy,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:s4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:pf,depthTest:!1,depthWrite:!1})}function jV(){return new Da({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:s4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:pf,depthTest:!1,depthWrite:!1})}function XV(){return new Da({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:s4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:pf,depthTest:!1,depthWrite:!1})}function s4(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function ome(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===t1||l===F_,u=l===_f||l===Eg;if(c||u){let d=e.get(a);const f=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==f)return t===null&&(t=new rL(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{const p=a.image;return c&&p&&p.height>0||u&&p&&i(p)?(t===null&&(t=new rL(n)),d=c?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function ame(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){const i=t(r);return i===null&&Lx("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function lme(n,e,t,r){const i={},s=new WeakMap;function o(d){const f=d.target;f.index!==null&&e.remove(f.index);for(const g in f.attributes)e.remove(f.attributes[g]);f.removeEventListener("dispose",o),delete i[f.id];const p=s.get(f);p&&(e.remove(p),s.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function a(d,f){return i[f.id]===!0||(f.addEventListener("dispose",o),i[f.id]=!0,t.memory.geometries++),f}function l(d){const f=d.attributes;for(const p in f)e.update(f[p],n.ARRAY_BUFFER)}function c(d){const f=[],p=d.index,g=d.attributes.position;let v=0;if(p!==null){const _=p.array;v=p.version;for(let E=0,C=_.length;E<C;E+=3){const M=_[E+0],R=_[E+1],L=_[E+2];f.push(M,R,R,L,L,M)}}else if(g!==void 0){const _=g.array;v=g.version;for(let E=0,C=_.length/3-1;E<C;E+=3){const M=E+0,R=E+1,L=E+2;f.push(M,R,R,L,L,M)}}else return;const b=new(Pq(f)?IP:NP)(f,1);b.version=v;const x=s.get(d);x&&e.remove(x),s.set(d,b)}function u(d){const f=s.get(d);if(f){const p=d.index;p!==null&&f.version<p.version&&c(d)}else c(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function cme(n,e,t){let r;function i(f){r=f}let s,o;function a(f){s=f.type,o=f.bytesPerElement}function l(f,p){n.drawElements(r,p,s,f*o),t.update(p,r,1)}function c(f,p,g){g!==0&&(n.drawElementsInstanced(r,p,s,f*o,g),t.update(p,r,g))}function u(f,p,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,p,0,s,f,0,g);let b=0;for(let x=0;x<g;x++)b+=p[x];t.update(b,r,1)}function d(f,p,g,v){if(g===0)return;const b=e.get("WEBGL_multi_draw");if(b===null)for(let x=0;x<f.length;x++)c(f[x]/o,p[x],v[x]);else{b.multiDrawElementsInstancedWEBGL(r,p,0,s,f,0,v,0,g);let x=0;for(let _=0;_<g;_++)x+=p[_]*v[_];t.update(x,r,1)}}this.setMode=i,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function ume(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function dme(n,e,t){const r=new WeakMap,i=new Hr;function s(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=u!==void 0?u.length:0;let f=r.get(a);if(f===void 0||f.count!==d){let I=function(){B.dispose(),r.delete(a),a.removeEventListener("dispose",I)};var p=I;f!==void 0&&f.texture.dispose();const g=a.morphAttributes.position!==void 0,v=a.morphAttributes.normal!==void 0,b=a.morphAttributes.color!==void 0,x=a.morphAttributes.position||[],_=a.morphAttributes.normal||[],E=a.morphAttributes.color||[];let C=0;g===!0&&(C=1),v===!0&&(C=2),b===!0&&(C=3);let M=a.attributes.position.count*C,R=1;M>e.maxTextureSize&&(R=Math.ceil(M/e.maxTextureSize),M=e.maxTextureSize);const L=new Float32Array(M*R*4*d),B=new aI(L,M,R,d);B.type=is,B.needsUpdate=!0;const N=C*4;for(let D=0;D<d;D++){const P=x[D],G=_[D],W=E[D],q=M*R*4*D;for(let z=0;z<P.count;z++){const J=z*N;g===!0&&(i.fromBufferAttribute(P,z),L[q+J+0]=i.x,L[q+J+1]=i.y,L[q+J+2]=i.z,L[q+J+3]=0),v===!0&&(i.fromBufferAttribute(G,z),L[q+J+4]=i.x,L[q+J+5]=i.y,L[q+J+6]=i.z,L[q+J+7]=0),b===!0&&(i.fromBufferAttribute(W,z),L[q+J+8]=i.x,L[q+J+9]=i.y,L[q+J+10]=i.z,L[q+J+11]=W.itemSize===4?i.w:1)}}f={count:d,texture:B,size:new Nt(M,R)},r.set(a,f),a.addEventListener("dispose",I)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let g=0;for(let b=0;b<c.length;b++)g+=c[b];const v=a.morphTargetsRelative?1:1-g;l.getUniforms().setValue(n,"morphTargetBaseInfluence",v),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",f.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",f.size)}return{update:s}}function hme(n,e,t,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,d=e.get(l,u);if(i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;i.get(f)!==c&&(f.update(),i.set(f,c))}return d}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const VK=new Ti,qV=new PP(1,1),GK=new aI,WK=new lI,jK=new MC,KV=[],YV=[],JV=new Float32Array(16),ZV=new Float32Array(9),QV=new Float32Array(4);function $1(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=KV[i];if(s===void 0&&(s=new Float32Array(i),KV[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Go(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Wo(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function OI(n,e){let t=YV[e];t===void 0&&(t=new Int32Array(e),YV[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function fme(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function pme(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Go(t,e))return;n.uniform2fv(this.addr,e),Wo(t,e)}}function mme(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Go(t,e))return;n.uniform3fv(this.addr,e),Wo(t,e)}}function gme(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Go(t,e))return;n.uniform4fv(this.addr,e),Wo(t,e)}}function yme(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Go(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Wo(t,e)}else{if(Go(t,r))return;QV.set(r),n.uniformMatrix2fv(this.addr,!1,QV),Wo(t,r)}}function vme(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Go(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Wo(t,e)}else{if(Go(t,r))return;ZV.set(r),n.uniformMatrix3fv(this.addr,!1,ZV),Wo(t,r)}}function bme(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Go(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Wo(t,e)}else{if(Go(t,r))return;JV.set(r),n.uniformMatrix4fv(this.addr,!1,JV),Wo(t,r)}}function xme(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Sme(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Go(t,e))return;n.uniform2iv(this.addr,e),Wo(t,e)}}function wme(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Go(t,e))return;n.uniform3iv(this.addr,e),Wo(t,e)}}function _me(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Go(t,e))return;n.uniform4iv(this.addr,e),Wo(t,e)}}function Cme(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Eme(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Go(t,e))return;n.uniform2uiv(this.addr,e),Wo(t,e)}}function Ame(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Go(t,e))return;n.uniform3uiv(this.addr,e),Wo(t,e)}}function Tme(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Go(t,e))return;n.uniform4uiv(this.addr,e),Wo(t,e)}}function Mme(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);let s;this.type===n.SAMPLER_2D_SHADOW?(qV.compareFunction=TP,s=qV):s=VK,t.setTexture2D(e||s,i)}function Rme(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||WK,i)}function Nme(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||jK,i)}function Ime(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||GK,i)}function Dme(n){switch(n){case 5126:return fme;case 35664:return pme;case 35665:return mme;case 35666:return gme;case 35674:return yme;case 35675:return vme;case 35676:return bme;case 5124:case 35670:return xme;case 35667:case 35671:return Sme;case 35668:case 35672:return wme;case 35669:case 35673:return _me;case 5125:return Cme;case 36294:return Eme;case 36295:return Ame;case 36296:return Tme;case 35678:case 36198:case 36298:case 36306:case 35682:return Mme;case 35679:case 36299:case 36307:return Rme;case 35680:case 36300:case 36308:case 36293:return Nme;case 36289:case 36303:case 36311:case 36292:return Ime}}function kme(n,e){n.uniform1fv(this.addr,e)}function Ome(n,e){const t=$1(e,this.size,2);n.uniform2fv(this.addr,t)}function Bme(n,e){const t=$1(e,this.size,3);n.uniform3fv(this.addr,t)}function $me(n,e){const t=$1(e,this.size,4);n.uniform4fv(this.addr,t)}function Lme(n,e){const t=$1(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Fme(n,e){const t=$1(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Pme(n,e){const t=$1(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Ume(n,e){n.uniform1iv(this.addr,e)}function zme(n,e){n.uniform2iv(this.addr,e)}function Hme(n,e){n.uniform3iv(this.addr,e)}function Vme(n,e){n.uniform4iv(this.addr,e)}function Gme(n,e){n.uniform1uiv(this.addr,e)}function Wme(n,e){n.uniform2uiv(this.addr,e)}function jme(n,e){n.uniform3uiv(this.addr,e)}function Xme(n,e){n.uniform4uiv(this.addr,e)}function qme(n,e,t){const r=this.cache,i=e.length,s=OI(t,i);Go(r,s)||(n.uniform1iv(this.addr,s),Wo(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||VK,s[o])}function Kme(n,e,t){const r=this.cache,i=e.length,s=OI(t,i);Go(r,s)||(n.uniform1iv(this.addr,s),Wo(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||WK,s[o])}function Yme(n,e,t){const r=this.cache,i=e.length,s=OI(t,i);Go(r,s)||(n.uniform1iv(this.addr,s),Wo(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||jK,s[o])}function Jme(n,e,t){const r=this.cache,i=e.length,s=OI(t,i);Go(r,s)||(n.uniform1iv(this.addr,s),Wo(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||GK,s[o])}function Zme(n){switch(n){case 5126:return kme;case 35664:return Ome;case 35665:return Bme;case 35666:return $me;case 35674:return Lme;case 35675:return Fme;case 35676:return Pme;case 5124:case 35670:return Ume;case 35667:case 35671:return zme;case 35668:case 35672:return Hme;case 35669:case 35673:return Vme;case 5125:return Gme;case 36294:return Wme;case 36295:return jme;case 36296:return Xme;case 35678:case 36198:case 36298:case 36306:case 35682:return qme;case 35679:case 36299:case 36307:return Kme;case 35680:case 36300:case 36308:case 36293:return Yme;case 36289:case 36303:case 36311:case 36292:return Jme}}class Qme{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=Dme(t.type)}}class ege{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Zme(t.type)}}class tge{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const WO=/(\w+)(\])?(\[|\.)?/g;function e8(n,e){n.seq.push(e),n.map[e.id]=e}function nge(n,e,t){const r=n.name,i=r.length;for(WO.lastIndex=0;;){const s=WO.exec(r),o=WO.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){e8(t,c===void 0?new Qme(a,n,e):new ege(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new tge(a),e8(t,d)),t=d}}}class xM{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);nge(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function t8(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const rge=37297;let ige=0;function sge(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}const n8=new xr;function oge(n){Qr._getMatrix(n8,Qr.workingColorSpace,n);const e=`mat3( ${n8.elements.map(t=>t.toFixed(4))} )`;switch(Qr.getTransfer(n)){case U_:return[e,"LinearTransferOETF"];case $i:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function r8(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),s=(n.getShaderInfoLog(e)||"").trim();if(r&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const a=parseInt(o[1]);return t.toUpperCase()+`

`+s+`

`+sge(n.getShaderSource(e),a)}else return s}function age(n,e){const t=oge(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function lge(n,e){let t;switch(e){case xq:t="Linear";break;case Sq:t="Reinhard";break;case wq:t="Cineon";break;case yP:t="ACESFilmic";break;case Cq:t="AgX";break;case Eq:t="Neutral";break;case _q:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const DT=new ve;function cge(){Qr.getLuminanceCoefficients(DT);const n=DT.x.toFixed(4),e=DT.y.toFixed(4),t=DT.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function uge(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(t_).join(`
`)}function dge(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function hge(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function t_(n){return n!==""}function i8(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function s8(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const fge=/^[ \t]*#include +<([\w\d./]+)>/gm;function iL(n){return n.replace(fge,mge)}const pge=new Map;function mge(n,e){let t=hr[e];if(t===void 0){const r=pge.get(e);if(r!==void 0)t=hr[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return iL(t)}const gge=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function o8(n){return n.replace(gge,yge)}function yge(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function a8(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function vge(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===JN?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===g_?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Wd&&(e="SHADOWMAP_TYPE_VSM"),e}function bge(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case _f:case Eg:e="ENVMAP_TYPE_CUBE";break;case I1:e="ENVMAP_TYPE_CUBE_UV";break}return e}function xge(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Eg:e="ENVMAP_MODE_REFRACTION";break}return e}function Sge(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case CC:e="ENVMAP_BLENDING_MULTIPLY";break;case vq:e="ENVMAP_BLENDING_MIX";break;case bq:e="ENVMAP_BLENDING_ADD";break}return e}function wge(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:r,maxMip:t}}function _ge(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=vge(t),c=bge(t),u=xge(t),d=Sge(t),f=wge(t),p=uge(t),g=dge(s),v=i.createProgram();let b,x,_=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(t_).join(`
`),b.length>0&&(b+=`
`),x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(t_).join(`
`),x.length>0&&(x+=`
`)):(b=[a8(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(t_).join(`
`),x=[a8(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==mf?"#define TONE_MAPPING":"",t.toneMapping!==mf?hr.tonemapping_pars_fragment:"",t.toneMapping!==mf?lge("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",hr.colorspace_pars_fragment,age("linearToOutputTexel",t.outputColorSpace),cge(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(t_).join(`
`)),o=iL(o),o=i8(o,t),o=s8(o,t),a=iL(a),a=i8(a,t),a=s8(a,t),o=o8(o),a=o8(a),t.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,b=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+b,x=["#define varying in",t.glslVersion===Y$?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Y$?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);const E=_+b+o,C=_+x+a,M=t8(i,i.VERTEX_SHADER,E),R=t8(i,i.FRAGMENT_SHADER,C);i.attachShader(v,M),i.attachShader(v,R),t.index0AttributeName!==void 0?i.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v);function L(D){if(n.debug.checkShaderErrors){const P=i.getProgramInfoLog(v)||"",G=i.getShaderInfoLog(M)||"",W=i.getShaderInfoLog(R)||"",q=P.trim(),z=G.trim(),J=W.trim();let Q=!0,Y=!0;if(i.getProgramParameter(v,i.LINK_STATUS)===!1)if(Q=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,v,M,R);else{const X=r8(i,M,"vertex"),te=r8(i,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(v,i.VALIDATE_STATUS)+`

Material Name: `+D.name+`
Material Type: `+D.type+`

Program Info Log: `+q+`
`+X+`
`+te)}else q!==""?console.warn("THREE.WebGLProgram: Program Info Log:",q):(z===""||J==="")&&(Y=!1);Y&&(D.diagnostics={runnable:Q,programLog:q,vertexShader:{log:z,prefix:b},fragmentShader:{log:J,prefix:x}})}i.deleteShader(M),i.deleteShader(R),B=new xM(i,v),N=hge(i,v)}let B;this.getUniforms=function(){return B===void 0&&L(this),B};let N;this.getAttributes=function(){return N===void 0&&L(this),N};let I=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return I===!1&&(I=i.getProgramParameter(v,rge)),I},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=ige++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=M,this.fragmentShader=R,this}let Cge=0;class Ege{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new Age(e),t.set(e,r)),r}}class Age{constructor(e){this.id=Cge++,this.code=e,this.usedTimes=0}}function Tge(n,e,t,r,i,s,o){const a=new d1,l=new Ege,c=new Set,u=[],d=i.logarithmicDepthBuffer,f=i.vertexTextures;let p=i.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(N){return c.add(N),N===0?"uv":`uv${N}`}function b(N,I,D,P,G){const W=P.fog,q=G.geometry,z=N.isMeshStandardMaterial?P.environment:null,J=(N.isMeshStandardMaterial?t:e).get(N.envMap||z),Q=J&&J.mapping===I1?J.image.height:null,Y=g[N.type];N.precision!==null&&(p=i.getMaxPrecision(N.precision),p!==N.precision&&console.warn("THREE.WebGLProgram.getParameters:",N.precision,"not supported, using",p,"instead."));const X=q.morphAttributes.position||q.morphAttributes.normal||q.morphAttributes.color,te=X!==void 0?X.length:0;let ne=0;q.morphAttributes.position!==void 0&&(ne=1),q.morphAttributes.normal!==void 0&&(ne=2),q.morphAttributes.color!==void 0&&(ne=3);let le,ye,ue,be;if(Y){const lr=jd[Y];le=lr.vertexShader,ye=lr.fragmentShader}else le=N.vertexShader,ye=N.fragmentShader,l.update(N),ue=l.getVertexShaderID(N),be=l.getFragmentShaderID(N);const xe=n.getRenderTarget(),Pe=n.state.buffers.depth.getReversed(),ze=G.isInstancedMesh===!0,Ke=G.isBatchedMesh===!0,pt=!!N.map,dt=!!N.matcap,pe=!!J,Le=!!N.aoMap,Ue=!!N.lightMap,Ze=!!N.bumpMap,je=!!N.normalMap,lt=!!N.displacementMap,st=!!N.emissiveMap,at=!!N.metalnessMap,Ut=!!N.roughnessMap,mt=N.anisotropy>0,ce=N.clearcoat>0,re=N.dispersion>0,$e=N.iridescence>0,qe=N.sheen>0,ot=N.transmission>0,et=mt&&!!N.anisotropyMap,Ft=ce&&!!N.clearcoatMap,At=ce&&!!N.clearcoatNormalMap,Ct=ce&&!!N.clearcoatRoughnessMap,qt=$e&&!!N.iridescenceMap,yt=$e&&!!N.iridescenceThicknessMap,Mt=qe&&!!N.sheenColorMap,on=qe&&!!N.sheenRoughnessMap,tn=!!N.specularMap,zt=!!N.specularColorMap,fn=!!N.specularIntensityMap,Te=ot&&!!N.transmissionMap,Xe=ot&&!!N.thicknessMap,Lt=!!N.gradientMap,en=!!N.alphaMap,Vt=N.alphaTest>0,Ot=!!N.alphaHash,un=!!N.extensions;let In=mf;N.toneMapped&&(xe===null||xe.isXRRenderTarget===!0)&&(In=n.toneMapping);const Tr={shaderID:Y,shaderType:N.type,shaderName:N.name,vertexShader:le,fragmentShader:ye,defines:N.defines,customVertexShaderID:ue,customFragmentShaderID:be,isRawShaderMaterial:N.isRawShaderMaterial===!0,glslVersion:N.glslVersion,precision:p,batching:Ke,batchingColor:Ke&&G._colorsTexture!==null,instancing:ze,instancingColor:ze&&G.instanceColor!==null,instancingMorph:ze&&G.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:xe===null?n.outputColorSpace:xe.isXRRenderTarget===!0?xe.texture.colorSpace:Yu,alphaToCoverage:!!N.alphaToCoverage,map:pt,matcap:dt,envMap:pe,envMapMode:pe&&J.mapping,envMapCubeUVHeight:Q,aoMap:Le,lightMap:Ue,bumpMap:Ze,normalMap:je,displacementMap:f&&lt,emissiveMap:st,normalMapObjectSpace:je&&N.normalMapType===Iq,normalMapTangentSpace:je&&N.normalMapType===Hg,metalnessMap:at,roughnessMap:Ut,anisotropy:mt,anisotropyMap:et,clearcoat:ce,clearcoatMap:Ft,clearcoatNormalMap:At,clearcoatRoughnessMap:Ct,dispersion:re,iridescence:$e,iridescenceMap:qt,iridescenceThicknessMap:yt,sheen:qe,sheenColorMap:Mt,sheenRoughnessMap:on,specularMap:tn,specularColorMap:zt,specularIntensityMap:fn,transmission:ot,transmissionMap:Te,thicknessMap:Xe,gradientMap:Lt,opaque:N.transparent===!1&&N.blending===jy&&N.alphaToCoverage===!1,alphaMap:en,alphaTest:Vt,alphaHash:Ot,combine:N.combine,mapUv:pt&&v(N.map.channel),aoMapUv:Le&&v(N.aoMap.channel),lightMapUv:Ue&&v(N.lightMap.channel),bumpMapUv:Ze&&v(N.bumpMap.channel),normalMapUv:je&&v(N.normalMap.channel),displacementMapUv:lt&&v(N.displacementMap.channel),emissiveMapUv:st&&v(N.emissiveMap.channel),metalnessMapUv:at&&v(N.metalnessMap.channel),roughnessMapUv:Ut&&v(N.roughnessMap.channel),anisotropyMapUv:et&&v(N.anisotropyMap.channel),clearcoatMapUv:Ft&&v(N.clearcoatMap.channel),clearcoatNormalMapUv:At&&v(N.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ct&&v(N.clearcoatRoughnessMap.channel),iridescenceMapUv:qt&&v(N.iridescenceMap.channel),iridescenceThicknessMapUv:yt&&v(N.iridescenceThicknessMap.channel),sheenColorMapUv:Mt&&v(N.sheenColorMap.channel),sheenRoughnessMapUv:on&&v(N.sheenRoughnessMap.channel),specularMapUv:tn&&v(N.specularMap.channel),specularColorMapUv:zt&&v(N.specularColorMap.channel),specularIntensityMapUv:fn&&v(N.specularIntensityMap.channel),transmissionMapUv:Te&&v(N.transmissionMap.channel),thicknessMapUv:Xe&&v(N.thicknessMap.channel),alphaMapUv:en&&v(N.alphaMap.channel),vertexTangents:!!q.attributes.tangent&&(je||mt),vertexColors:N.vertexColors,vertexAlphas:N.vertexColors===!0&&!!q.attributes.color&&q.attributes.color.itemSize===4,pointsUvs:G.isPoints===!0&&!!q.attributes.uv&&(pt||en),fog:!!W,useFog:N.fog===!0,fogExp2:!!W&&W.isFogExp2,flatShading:N.flatShading===!0&&N.wireframe===!1,sizeAttenuation:N.sizeAttenuation===!0,logarithmicDepthBuffer:d,reversedDepthBuffer:Pe,skinning:G.isSkinnedMesh===!0,morphTargets:q.morphAttributes.position!==void 0,morphNormals:q.morphAttributes.normal!==void 0,morphColors:q.morphAttributes.color!==void 0,morphTargetsCount:te,morphTextureStride:ne,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numSpotLightMaps:I.spotLightMap.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numSpotLightShadowsWithMaps:I.numSpotLightShadowsWithMaps,numLightProbes:I.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:N.dithering,shadowMapEnabled:n.shadowMap.enabled&&D.length>0,shadowMapType:n.shadowMap.type,toneMapping:In,decodeVideoTexture:pt&&N.map.isVideoTexture===!0&&Qr.getTransfer(N.map.colorSpace)===$i,decodeVideoTextureEmissive:st&&N.emissiveMap.isVideoTexture===!0&&Qr.getTransfer(N.emissiveMap.colorSpace)===$i,premultipliedAlpha:N.premultipliedAlpha,doubleSided:N.side===Zc,flipSided:N.side===Ma,useDepthPacking:N.depthPacking>=0,depthPacking:N.depthPacking||0,index0AttributeName:N.index0AttributeName,extensionClipCullDistance:un&&N.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(un&&N.extensions.multiDraw===!0||Ke)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:N.customProgramCacheKey()};return Tr.vertexUv1s=c.has(1),Tr.vertexUv2s=c.has(2),Tr.vertexUv3s=c.has(3),c.clear(),Tr}function x(N){const I=[];if(N.shaderID?I.push(N.shaderID):(I.push(N.customVertexShaderID),I.push(N.customFragmentShaderID)),N.defines!==void 0)for(const D in N.defines)I.push(D),I.push(N.defines[D]);return N.isRawShaderMaterial===!1&&(_(I,N),E(I,N),I.push(n.outputColorSpace)),I.push(N.customProgramCacheKey),I.join()}function _(N,I){N.push(I.precision),N.push(I.outputColorSpace),N.push(I.envMapMode),N.push(I.envMapCubeUVHeight),N.push(I.mapUv),N.push(I.alphaMapUv),N.push(I.lightMapUv),N.push(I.aoMapUv),N.push(I.bumpMapUv),N.push(I.normalMapUv),N.push(I.displacementMapUv),N.push(I.emissiveMapUv),N.push(I.metalnessMapUv),N.push(I.roughnessMapUv),N.push(I.anisotropyMapUv),N.push(I.clearcoatMapUv),N.push(I.clearcoatNormalMapUv),N.push(I.clearcoatRoughnessMapUv),N.push(I.iridescenceMapUv),N.push(I.iridescenceThicknessMapUv),N.push(I.sheenColorMapUv),N.push(I.sheenRoughnessMapUv),N.push(I.specularMapUv),N.push(I.specularColorMapUv),N.push(I.specularIntensityMapUv),N.push(I.transmissionMapUv),N.push(I.thicknessMapUv),N.push(I.combine),N.push(I.fogExp2),N.push(I.sizeAttenuation),N.push(I.morphTargetsCount),N.push(I.morphAttributeCount),N.push(I.numDirLights),N.push(I.numPointLights),N.push(I.numSpotLights),N.push(I.numSpotLightMaps),N.push(I.numHemiLights),N.push(I.numRectAreaLights),N.push(I.numDirLightShadows),N.push(I.numPointLightShadows),N.push(I.numSpotLightShadows),N.push(I.numSpotLightShadowsWithMaps),N.push(I.numLightProbes),N.push(I.shadowMapType),N.push(I.toneMapping),N.push(I.numClippingPlanes),N.push(I.numClipIntersection),N.push(I.depthPacking)}function E(N,I){a.disableAll(),I.supportsVertexTextures&&a.enable(0),I.instancing&&a.enable(1),I.instancingColor&&a.enable(2),I.instancingMorph&&a.enable(3),I.matcap&&a.enable(4),I.envMap&&a.enable(5),I.normalMapObjectSpace&&a.enable(6),I.normalMapTangentSpace&&a.enable(7),I.clearcoat&&a.enable(8),I.iridescence&&a.enable(9),I.alphaTest&&a.enable(10),I.vertexColors&&a.enable(11),I.vertexAlphas&&a.enable(12),I.vertexUv1s&&a.enable(13),I.vertexUv2s&&a.enable(14),I.vertexUv3s&&a.enable(15),I.vertexTangents&&a.enable(16),I.anisotropy&&a.enable(17),I.alphaHash&&a.enable(18),I.batching&&a.enable(19),I.dispersion&&a.enable(20),I.batchingColor&&a.enable(21),I.gradientMap&&a.enable(22),N.push(a.mask),a.disableAll(),I.fog&&a.enable(0),I.useFog&&a.enable(1),I.flatShading&&a.enable(2),I.logarithmicDepthBuffer&&a.enable(3),I.reversedDepthBuffer&&a.enable(4),I.skinning&&a.enable(5),I.morphTargets&&a.enable(6),I.morphNormals&&a.enable(7),I.morphColors&&a.enable(8),I.premultipliedAlpha&&a.enable(9),I.shadowMapEnabled&&a.enable(10),I.doubleSided&&a.enable(11),I.flipSided&&a.enable(12),I.useDepthPacking&&a.enable(13),I.dithering&&a.enable(14),I.transmission&&a.enable(15),I.sheen&&a.enable(16),I.opaque&&a.enable(17),I.pointsUvs&&a.enable(18),I.decodeVideoTexture&&a.enable(19),I.decodeVideoTextureEmissive&&a.enable(20),I.alphaToCoverage&&a.enable(21),N.push(a.mask)}function C(N){const I=g[N.type];let D;if(I){const P=jd[I];D=DP.clone(P.uniforms)}else D=N.uniforms;return D}function M(N,I){let D;for(let P=0,G=u.length;P<G;P++){const W=u[P];if(W.cacheKey===I){D=W,++D.usedTimes;break}}return D===void 0&&(D=new _ge(n,I,N,s),u.push(D)),D}function R(N){if(--N.usedTimes===0){const I=u.indexOf(N);u[I]=u[u.length-1],u.pop(),N.destroy()}}function L(N){l.remove(N)}function B(){l.dispose()}return{getParameters:b,getProgramCacheKey:x,getUniforms:C,acquireProgram:M,releaseProgram:R,releaseShaderCache:L,programs:u,dispose:B}}function Mge(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function r(o){n.delete(o)}function i(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:r,update:i,dispose:s}}function Rge(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function l8(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function c8(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(d,f,p,g,v,b){let x=n[e];return x===void 0?(x={id:d.id,object:d,geometry:f,material:p,groupOrder:g,renderOrder:d.renderOrder,z:v,group:b},n[e]=x):(x.id=d.id,x.object=d,x.geometry=f,x.material=p,x.groupOrder=g,x.renderOrder=d.renderOrder,x.z=v,x.group=b),e++,x}function a(d,f,p,g,v,b){const x=o(d,f,p,g,v,b);p.transmission>0?r.push(x):p.transparent===!0?i.push(x):t.push(x)}function l(d,f,p,g,v,b){const x=o(d,f,p,g,v,b);p.transmission>0?r.unshift(x):p.transparent===!0?i.unshift(x):t.unshift(x)}function c(d,f){t.length>1&&t.sort(d||Rge),r.length>1&&r.sort(f||l8),i.length>1&&i.sort(f||l8)}function u(){for(let d=e,f=n.length;d<f;d++){const p=n[d];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:u,sort:c}}function Nge(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new c8,n.set(r,[o])):i>=s.length?(o=new c8,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function Ige(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ve,color:new rn};break;case"SpotLight":t={position:new ve,direction:new ve,color:new rn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ve,color:new rn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ve,skyColor:new rn,groundColor:new rn};break;case"RectAreaLight":t={color:new rn,position:new ve,halfWidth:new ve,halfHeight:new ve};break}return n[e.id]=t,t}}}function Dge(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Nt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Nt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Nt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let kge=0;function Oge(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Bge(n){const e=new Ige,t=Dge(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new ve);const i=new ve,s=new zn,o=new zn;function a(c){let u=0,d=0,f=0;for(let N=0;N<9;N++)r.probe[N].set(0,0,0);let p=0,g=0,v=0,b=0,x=0,_=0,E=0,C=0,M=0,R=0,L=0;c.sort(Oge);for(let N=0,I=c.length;N<I;N++){const D=c[N],P=D.color,G=D.intensity,W=D.distance,q=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)u+=P.r*G,d+=P.g*G,f+=P.b*G;else if(D.isLightProbe){for(let z=0;z<9;z++)r.probe[z].addScaledVector(D.sh.coefficients[z],G);L++}else if(D.isDirectionalLight){const z=e.get(D);if(z.color.copy(D.color).multiplyScalar(D.intensity),D.castShadow){const J=D.shadow,Q=t.get(D);Q.shadowIntensity=J.intensity,Q.shadowBias=J.bias,Q.shadowNormalBias=J.normalBias,Q.shadowRadius=J.radius,Q.shadowMapSize=J.mapSize,r.directionalShadow[p]=Q,r.directionalShadowMap[p]=q,r.directionalShadowMatrix[p]=D.shadow.matrix,_++}r.directional[p]=z,p++}else if(D.isSpotLight){const z=e.get(D);z.position.setFromMatrixPosition(D.matrixWorld),z.color.copy(P).multiplyScalar(G),z.distance=W,z.coneCos=Math.cos(D.angle),z.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),z.decay=D.decay,r.spot[v]=z;const J=D.shadow;if(D.map&&(r.spotLightMap[M]=D.map,M++,J.updateMatrices(D),D.castShadow&&R++),r.spotLightMatrix[v]=J.matrix,D.castShadow){const Q=t.get(D);Q.shadowIntensity=J.intensity,Q.shadowBias=J.bias,Q.shadowNormalBias=J.normalBias,Q.shadowRadius=J.radius,Q.shadowMapSize=J.mapSize,r.spotShadow[v]=Q,r.spotShadowMap[v]=q,C++}v++}else if(D.isRectAreaLight){const z=e.get(D);z.color.copy(P).multiplyScalar(G),z.halfWidth.set(D.width*.5,0,0),z.halfHeight.set(0,D.height*.5,0),r.rectArea[b]=z,b++}else if(D.isPointLight){const z=e.get(D);if(z.color.copy(D.color).multiplyScalar(D.intensity),z.distance=D.distance,z.decay=D.decay,D.castShadow){const J=D.shadow,Q=t.get(D);Q.shadowIntensity=J.intensity,Q.shadowBias=J.bias,Q.shadowNormalBias=J.normalBias,Q.shadowRadius=J.radius,Q.shadowMapSize=J.mapSize,Q.shadowCameraNear=J.camera.near,Q.shadowCameraFar=J.camera.far,r.pointShadow[g]=Q,r.pointShadowMap[g]=q,r.pointShadowMatrix[g]=D.shadow.matrix,E++}r.point[g]=z,g++}else if(D.isHemisphereLight){const z=e.get(D);z.skyColor.copy(D.color).multiplyScalar(G),z.groundColor.copy(D.groundColor).multiplyScalar(G),r.hemi[x]=z,x++}}b>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=hn.LTC_FLOAT_1,r.rectAreaLTC2=hn.LTC_FLOAT_2):(r.rectAreaLTC1=hn.LTC_HALF_1,r.rectAreaLTC2=hn.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=d,r.ambient[2]=f;const B=r.hash;(B.directionalLength!==p||B.pointLength!==g||B.spotLength!==v||B.rectAreaLength!==b||B.hemiLength!==x||B.numDirectionalShadows!==_||B.numPointShadows!==E||B.numSpotShadows!==C||B.numSpotMaps!==M||B.numLightProbes!==L)&&(r.directional.length=p,r.spot.length=v,r.rectArea.length=b,r.point.length=g,r.hemi.length=x,r.directionalShadow.length=_,r.directionalShadowMap.length=_,r.pointShadow.length=E,r.pointShadowMap.length=E,r.spotShadow.length=C,r.spotShadowMap.length=C,r.directionalShadowMatrix.length=_,r.pointShadowMatrix.length=E,r.spotLightMatrix.length=C+M-R,r.spotLightMap.length=M,r.numSpotLightShadowsWithMaps=R,r.numLightProbes=L,B.directionalLength=p,B.pointLength=g,B.spotLength=v,B.rectAreaLength=b,B.hemiLength=x,B.numDirectionalShadows=_,B.numPointShadows=E,B.numSpotShadows=C,B.numSpotMaps=M,B.numLightProbes=L,r.version=kge++)}function l(c,u){let d=0,f=0,p=0,g=0,v=0;const b=u.matrixWorldInverse;for(let x=0,_=c.length;x<_;x++){const E=c[x];if(E.isDirectionalLight){const C=r.directional[d];C.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),C.direction.sub(i),C.direction.transformDirection(b),d++}else if(E.isSpotLight){const C=r.spot[p];C.position.setFromMatrixPosition(E.matrixWorld),C.position.applyMatrix4(b),C.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),C.direction.sub(i),C.direction.transformDirection(b),p++}else if(E.isRectAreaLight){const C=r.rectArea[g];C.position.setFromMatrixPosition(E.matrixWorld),C.position.applyMatrix4(b),o.identity(),s.copy(E.matrixWorld),s.premultiply(b),o.extractRotation(s),C.halfWidth.set(E.width*.5,0,0),C.halfHeight.set(0,E.height*.5,0),C.halfWidth.applyMatrix4(o),C.halfHeight.applyMatrix4(o),g++}else if(E.isPointLight){const C=r.point[f];C.position.setFromMatrixPosition(E.matrixWorld),C.position.applyMatrix4(b),f++}else if(E.isHemisphereLight){const C=r.hemi[v];C.direction.setFromMatrixPosition(E.matrixWorld),C.direction.transformDirection(b),v++}}}return{setup:a,setupView:l,state:r}}function u8(n){const e=new Bge(n),t=[],r=[];function i(u){c.camera=u,t.length=0,r.length=0}function s(u){t.push(u)}function o(u){r.push(u)}function a(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function $ge(n){let e=new WeakMap;function t(i,s=0){const o=e.get(i);let a;return o===void 0?(a=new u8(n),e.set(i,[a])):s>=o.length?(a=new u8(n),o.push(a)):a=o[s],a}function r(){e=new WeakMap}return{get:t,dispose:r}}const Lge=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Fge=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Pge(n,e,t){let r=new k1;const i=new Nt,s=new Nt,o=new Hr,a=new TI({depthPacking:Nq}),l=new jP,c={},u=t.maxTextureSize,d={[wf]:Ma,[Ma]:wf,[Zc]:Zc},f=new Da({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Nt},radius:{value:4}},vertexShader:Lge,fragmentShader:Fge}),p=f.clone();p.defines.HORIZONTAL_PASS=1;const g=new gr;g.setAttribute("position",new ai(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Li(g,f),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=JN;let x=this.type;this.render=function(R,L,B){if(b.enabled===!1||b.autoUpdate===!1&&b.needsUpdate===!1||R.length===0)return;const N=n.getRenderTarget(),I=n.getActiveCubeFace(),D=n.getActiveMipmapLevel(),P=n.state;P.setBlending(pf),P.buffers.depth.getReversed()?P.buffers.color.setClear(0,0,0,0):P.buffers.color.setClear(1,1,1,1),P.buffers.depth.setTest(!0),P.setScissorTest(!1);const G=x!==Wd&&this.type===Wd,W=x===Wd&&this.type!==Wd;for(let q=0,z=R.length;q<z;q++){const J=R[q],Q=J.shadow;if(Q===void 0){console.warn("THREE.WebGLShadowMap:",J,"has no shadow.");continue}if(Q.autoUpdate===!1&&Q.needsUpdate===!1)continue;i.copy(Q.mapSize);const Y=Q.getFrameExtents();if(i.multiply(Y),s.copy(Q.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/Y.x),i.x=s.x*Y.x,Q.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/Y.y),i.y=s.y*Y.y,Q.mapSize.y=s.y)),Q.map===null||G===!0||W===!0){const te=this.type!==Wd?{minFilter:sa,magFilter:sa}:{};Q.map!==null&&Q.map.dispose(),Q.map=new Ec(i.x,i.y,te),Q.map.texture.name=J.name+".shadowMap",Q.camera.updateProjectionMatrix()}n.setRenderTarget(Q.map),n.clear();const X=Q.getViewportCount();for(let te=0;te<X;te++){const ne=Q.getViewport(te);o.set(s.x*ne.x,s.y*ne.y,s.x*ne.z,s.y*ne.w),P.viewport(o),Q.updateMatrices(J,te),r=Q.getFrustum(),C(L,B,Q.camera,J,this.type)}Q.isPointLightShadow!==!0&&this.type===Wd&&_(Q,B),Q.needsUpdate=!1}x=this.type,b.needsUpdate=!1,n.setRenderTarget(N,I,D)};function _(R,L){const B=e.update(v);f.defines.VSM_SAMPLES!==R.blurSamples&&(f.defines.VSM_SAMPLES=R.blurSamples,p.defines.VSM_SAMPLES=R.blurSamples,f.needsUpdate=!0,p.needsUpdate=!0),R.mapPass===null&&(R.mapPass=new Ec(i.x,i.y)),f.uniforms.shadow_pass.value=R.map.texture,f.uniforms.resolution.value=R.mapSize,f.uniforms.radius.value=R.radius,n.setRenderTarget(R.mapPass),n.clear(),n.renderBufferDirect(L,null,B,f,v,null),p.uniforms.shadow_pass.value=R.mapPass.texture,p.uniforms.resolution.value=R.mapSize,p.uniforms.radius.value=R.radius,n.setRenderTarget(R.map),n.clear(),n.renderBufferDirect(L,null,B,p,v,null)}function E(R,L,B,N){let I=null;const D=B.isPointLight===!0?R.customDistanceMaterial:R.customDepthMaterial;if(D!==void 0)I=D;else if(I=B.isPointLight===!0?l:a,n.localClippingEnabled&&L.clipShadows===!0&&Array.isArray(L.clippingPlanes)&&L.clippingPlanes.length!==0||L.displacementMap&&L.displacementScale!==0||L.alphaMap&&L.alphaTest>0||L.map&&L.alphaTest>0||L.alphaToCoverage===!0){const P=I.uuid,G=L.uuid;let W=c[P];W===void 0&&(W={},c[P]=W);let q=W[G];q===void 0&&(q=I.clone(),W[G]=q,L.addEventListener("dispose",M)),I=q}if(I.visible=L.visible,I.wireframe=L.wireframe,N===Wd?I.side=L.shadowSide!==null?L.shadowSide:L.side:I.side=L.shadowSide!==null?L.shadowSide:d[L.side],I.alphaMap=L.alphaMap,I.alphaTest=L.alphaToCoverage===!0?.5:L.alphaTest,I.map=L.map,I.clipShadows=L.clipShadows,I.clippingPlanes=L.clippingPlanes,I.clipIntersection=L.clipIntersection,I.displacementMap=L.displacementMap,I.displacementScale=L.displacementScale,I.displacementBias=L.displacementBias,I.wireframeLinewidth=L.wireframeLinewidth,I.linewidth=L.linewidth,B.isPointLight===!0&&I.isMeshDistanceMaterial===!0){const P=n.properties.get(I);P.light=B}return I}function C(R,L,B,N,I){if(R.visible===!1)return;if(R.layers.test(L.layers)&&(R.isMesh||R.isLine||R.isPoints)&&(R.castShadow||R.receiveShadow&&I===Wd)&&(!R.frustumCulled||r.intersectsObject(R))){R.modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,R.matrixWorld);const G=e.update(R),W=R.material;if(Array.isArray(W)){const q=G.groups;for(let z=0,J=q.length;z<J;z++){const Q=q[z],Y=W[Q.materialIndex];if(Y&&Y.visible){const X=E(R,Y,N,I);R.onBeforeShadow(n,R,L,B,G,X,Q),n.renderBufferDirect(B,null,G,X,R,Q),R.onAfterShadow(n,R,L,B,G,X,Q)}}}else if(W.visible){const q=E(R,W,N,I);R.onBeforeShadow(n,R,L,B,G,q,null),n.renderBufferDirect(B,null,G,q,R,null),R.onAfterShadow(n,R,L,B,G,q,null)}}const P=R.children;for(let G=0,W=P.length;G<W;G++)C(P[G],L,B,N,I)}function M(R){R.target.removeEventListener("dispose",M);for(const B in c){const N=c[B],I=R.target.uuid;I in N&&(N[I].dispose(),delete N[I])}}}const Uge={[ZM]:QM,[eR]:rR,[tR]:iR,[nv]:nR,[QM]:ZM,[rR]:eR,[iR]:tR,[nR]:nv};function zge(n,e){function t(){let Te=!1;const Xe=new Hr;let Lt=null;const en=new Hr(0,0,0,0);return{setMask:function(Vt){Lt!==Vt&&!Te&&(n.colorMask(Vt,Vt,Vt,Vt),Lt=Vt)},setLocked:function(Vt){Te=Vt},setClear:function(Vt,Ot,un,In,Tr){Tr===!0&&(Vt*=In,Ot*=In,un*=In),Xe.set(Vt,Ot,un,In),en.equals(Xe)===!1&&(n.clearColor(Vt,Ot,un,In),en.copy(Xe))},reset:function(){Te=!1,Lt=null,en.set(-1,0,0,0)}}}function r(){let Te=!1,Xe=!1,Lt=null,en=null,Vt=null;return{setReversed:function(Ot){if(Xe!==Ot){const un=e.get("EXT_clip_control");Ot?un.clipControlEXT(un.LOWER_LEFT_EXT,un.ZERO_TO_ONE_EXT):un.clipControlEXT(un.LOWER_LEFT_EXT,un.NEGATIVE_ONE_TO_ONE_EXT),Xe=Ot;const In=Vt;Vt=null,this.setClear(In)}},getReversed:function(){return Xe},setTest:function(Ot){Ot?xe(n.DEPTH_TEST):Pe(n.DEPTH_TEST)},setMask:function(Ot){Lt!==Ot&&!Te&&(n.depthMask(Ot),Lt=Ot)},setFunc:function(Ot){if(Xe&&(Ot=Uge[Ot]),en!==Ot){switch(Ot){case ZM:n.depthFunc(n.NEVER);break;case QM:n.depthFunc(n.ALWAYS);break;case eR:n.depthFunc(n.LESS);break;case nv:n.depthFunc(n.LEQUAL);break;case tR:n.depthFunc(n.EQUAL);break;case nR:n.depthFunc(n.GEQUAL);break;case rR:n.depthFunc(n.GREATER);break;case iR:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}en=Ot}},setLocked:function(Ot){Te=Ot},setClear:function(Ot){Vt!==Ot&&(Xe&&(Ot=1-Ot),n.clearDepth(Ot),Vt=Ot)},reset:function(){Te=!1,Lt=null,en=null,Vt=null,Xe=!1}}}function i(){let Te=!1,Xe=null,Lt=null,en=null,Vt=null,Ot=null,un=null,In=null,Tr=null;return{setTest:function(lr){Te||(lr?xe(n.STENCIL_TEST):Pe(n.STENCIL_TEST))},setMask:function(lr){Xe!==lr&&!Te&&(n.stencilMask(lr),Xe=lr)},setFunc:function(lr,to,ns){(Lt!==lr||en!==to||Vt!==ns)&&(n.stencilFunc(lr,to,ns),Lt=lr,en=to,Vt=ns)},setOp:function(lr,to,ns){(Ot!==lr||un!==to||In!==ns)&&(n.stencilOp(lr,to,ns),Ot=lr,un=to,In=ns)},setLocked:function(lr){Te=lr},setClear:function(lr){Tr!==lr&&(n.clearStencil(lr),Tr=lr)},reset:function(){Te=!1,Xe=null,Lt=null,en=null,Vt=null,Ot=null,un=null,In=null,Tr=null}}}const s=new t,o=new r,a=new i,l=new WeakMap,c=new WeakMap;let u={},d={},f=new WeakMap,p=[],g=null,v=!1,b=null,x=null,_=null,E=null,C=null,M=null,R=null,L=new rn(0,0,0),B=0,N=!1,I=null,D=null,P=null,G=null,W=null;const q=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let z=!1,J=0;const Q=n.getParameter(n.VERSION);Q.indexOf("WebGL")!==-1?(J=parseFloat(/^WebGL (\d)/.exec(Q)[1]),z=J>=1):Q.indexOf("OpenGL ES")!==-1&&(J=parseFloat(/^OpenGL ES (\d)/.exec(Q)[1]),z=J>=2);let Y=null,X={};const te=n.getParameter(n.SCISSOR_BOX),ne=n.getParameter(n.VIEWPORT),le=new Hr().fromArray(te),ye=new Hr().fromArray(ne);function ue(Te,Xe,Lt,en){const Vt=new Uint8Array(4),Ot=n.createTexture();n.bindTexture(Te,Ot),n.texParameteri(Te,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Te,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let un=0;un<Lt;un++)Te===n.TEXTURE_3D||Te===n.TEXTURE_2D_ARRAY?n.texImage3D(Xe,0,n.RGBA,1,1,en,0,n.RGBA,n.UNSIGNED_BYTE,Vt):n.texImage2D(Xe+un,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Vt);return Ot}const be={};be[n.TEXTURE_2D]=ue(n.TEXTURE_2D,n.TEXTURE_2D,1),be[n.TEXTURE_CUBE_MAP]=ue(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),be[n.TEXTURE_2D_ARRAY]=ue(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),be[n.TEXTURE_3D]=ue(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),xe(n.DEPTH_TEST),o.setFunc(nv),Ze(!1),je(V$),xe(n.CULL_FACE),Le(pf);function xe(Te){u[Te]!==!0&&(n.enable(Te),u[Te]=!0)}function Pe(Te){u[Te]!==!1&&(n.disable(Te),u[Te]=!1)}function ze(Te,Xe){return d[Te]!==Xe?(n.bindFramebuffer(Te,Xe),d[Te]=Xe,Te===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=Xe),Te===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=Xe),!0):!1}function Ke(Te,Xe){let Lt=p,en=!1;if(Te){Lt=f.get(Xe),Lt===void 0&&(Lt=[],f.set(Xe,Lt));const Vt=Te.textures;if(Lt.length!==Vt.length||Lt[0]!==n.COLOR_ATTACHMENT0){for(let Ot=0,un=Vt.length;Ot<un;Ot++)Lt[Ot]=n.COLOR_ATTACHMENT0+Ot;Lt.length=Vt.length,en=!0}}else Lt[0]!==n.BACK&&(Lt[0]=n.BACK,en=!0);en&&n.drawBuffers(Lt)}function pt(Te){return g!==Te?(n.useProgram(Te),g=Te,!0):!1}const dt={[og]:n.FUNC_ADD,[tq]:n.FUNC_SUBTRACT,[nq]:n.FUNC_REVERSE_SUBTRACT};dt[rq]=n.MIN,dt[iq]=n.MAX;const pe={[sq]:n.ZERO,[oq]:n.ONE,[aq]:n.SRC_COLOR,[YM]:n.SRC_ALPHA,[fq]:n.SRC_ALPHA_SATURATE,[dq]:n.DST_COLOR,[cq]:n.DST_ALPHA,[lq]:n.ONE_MINUS_SRC_COLOR,[JM]:n.ONE_MINUS_SRC_ALPHA,[hq]:n.ONE_MINUS_DST_COLOR,[uq]:n.ONE_MINUS_DST_ALPHA,[pq]:n.CONSTANT_COLOR,[mq]:n.ONE_MINUS_CONSTANT_COLOR,[gq]:n.CONSTANT_ALPHA,[yq]:n.ONE_MINUS_CONSTANT_ALPHA};function Le(Te,Xe,Lt,en,Vt,Ot,un,In,Tr,lr){if(Te===pf){v===!0&&(Pe(n.BLEND),v=!1);return}if(v===!1&&(xe(n.BLEND),v=!0),Te!==eq){if(Te!==b||lr!==N){if((x!==og||C!==og)&&(n.blendEquation(n.FUNC_ADD),x=og,C=og),lr)switch(Te){case jy:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case G$:n.blendFunc(n.ONE,n.ONE);break;case W$:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case j$:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",Te);break}else switch(Te){case jy:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case G$:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case W$:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case j$:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",Te);break}_=null,E=null,M=null,R=null,L.set(0,0,0),B=0,b=Te,N=lr}return}Vt=Vt||Xe,Ot=Ot||Lt,un=un||en,(Xe!==x||Vt!==C)&&(n.blendEquationSeparate(dt[Xe],dt[Vt]),x=Xe,C=Vt),(Lt!==_||en!==E||Ot!==M||un!==R)&&(n.blendFuncSeparate(pe[Lt],pe[en],pe[Ot],pe[un]),_=Lt,E=en,M=Ot,R=un),(In.equals(L)===!1||Tr!==B)&&(n.blendColor(In.r,In.g,In.b,Tr),L.copy(In),B=Tr),b=Te,N=!1}function Ue(Te,Xe){Te.side===Zc?Pe(n.CULL_FACE):xe(n.CULL_FACE);let Lt=Te.side===Ma;Xe&&(Lt=!Lt),Ze(Lt),Te.blending===jy&&Te.transparent===!1?Le(pf):Le(Te.blending,Te.blendEquation,Te.blendSrc,Te.blendDst,Te.blendEquationAlpha,Te.blendSrcAlpha,Te.blendDstAlpha,Te.blendColor,Te.blendAlpha,Te.premultipliedAlpha),o.setFunc(Te.depthFunc),o.setTest(Te.depthTest),o.setMask(Te.depthWrite),s.setMask(Te.colorWrite);const en=Te.stencilWrite;a.setTest(en),en&&(a.setMask(Te.stencilWriteMask),a.setFunc(Te.stencilFunc,Te.stencilRef,Te.stencilFuncMask),a.setOp(Te.stencilFail,Te.stencilZFail,Te.stencilZPass)),st(Te.polygonOffset,Te.polygonOffsetFactor,Te.polygonOffsetUnits),Te.alphaToCoverage===!0?xe(n.SAMPLE_ALPHA_TO_COVERAGE):Pe(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ze(Te){I!==Te&&(Te?n.frontFace(n.CW):n.frontFace(n.CCW),I=Te)}function je(Te){Te!==JX?(xe(n.CULL_FACE),Te!==D&&(Te===V$?n.cullFace(n.BACK):Te===ZX?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Pe(n.CULL_FACE),D=Te}function lt(Te){Te!==P&&(z&&n.lineWidth(Te),P=Te)}function st(Te,Xe,Lt){Te?(xe(n.POLYGON_OFFSET_FILL),(G!==Xe||W!==Lt)&&(n.polygonOffset(Xe,Lt),G=Xe,W=Lt)):Pe(n.POLYGON_OFFSET_FILL)}function at(Te){Te?xe(n.SCISSOR_TEST):Pe(n.SCISSOR_TEST)}function Ut(Te){Te===void 0&&(Te=n.TEXTURE0+q-1),Y!==Te&&(n.activeTexture(Te),Y=Te)}function mt(Te,Xe,Lt){Lt===void 0&&(Y===null?Lt=n.TEXTURE0+q-1:Lt=Y);let en=X[Lt];en===void 0&&(en={type:void 0,texture:void 0},X[Lt]=en),(en.type!==Te||en.texture!==Xe)&&(Y!==Lt&&(n.activeTexture(Lt),Y=Lt),n.bindTexture(Te,Xe||be[Te]),en.type=Te,en.texture=Xe)}function ce(){const Te=X[Y];Te!==void 0&&Te.type!==void 0&&(n.bindTexture(Te.type,null),Te.type=void 0,Te.texture=void 0)}function re(){try{n.compressedTexImage2D(...arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function $e(){try{n.compressedTexImage3D(...arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function qe(){try{n.texSubImage2D(...arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function ot(){try{n.texSubImage3D(...arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function et(){try{n.compressedTexSubImage2D(...arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Ft(){try{n.compressedTexSubImage3D(...arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function At(){try{n.texStorage2D(...arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Ct(){try{n.texStorage3D(...arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function qt(){try{n.texImage2D(...arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function yt(){try{n.texImage3D(...arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Mt(Te){le.equals(Te)===!1&&(n.scissor(Te.x,Te.y,Te.z,Te.w),le.copy(Te))}function on(Te){ye.equals(Te)===!1&&(n.viewport(Te.x,Te.y,Te.z,Te.w),ye.copy(Te))}function tn(Te,Xe){let Lt=c.get(Xe);Lt===void 0&&(Lt=new WeakMap,c.set(Xe,Lt));let en=Lt.get(Te);en===void 0&&(en=n.getUniformBlockIndex(Xe,Te.name),Lt.set(Te,en))}function zt(Te,Xe){const en=c.get(Xe).get(Te);l.get(Xe)!==en&&(n.uniformBlockBinding(Xe,en,Te.__bindingPointIndex),l.set(Xe,en))}function fn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},Y=null,X={},d={},f=new WeakMap,p=[],g=null,v=!1,b=null,x=null,_=null,E=null,C=null,M=null,R=null,L=new rn(0,0,0),B=0,N=!1,I=null,D=null,P=null,G=null,W=null,le.set(0,0,n.canvas.width,n.canvas.height),ye.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:xe,disable:Pe,bindFramebuffer:ze,drawBuffers:Ke,useProgram:pt,setBlending:Le,setMaterial:Ue,setFlipSided:Ze,setCullFace:je,setLineWidth:lt,setPolygonOffset:st,setScissorTest:at,activeTexture:Ut,bindTexture:mt,unbindTexture:ce,compressedTexImage2D:re,compressedTexImage3D:$e,texImage2D:qt,texImage3D:yt,updateUBOMapping:tn,uniformBlockBinding:zt,texStorage2D:At,texStorage3D:Ct,texSubImage2D:qe,texSubImage3D:ot,compressedTexSubImage2D:et,compressedTexSubImage3D:Ft,scissor:Mt,viewport:on,reset:fn}}function Hge(n,e,t,r,i,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Nt,u=new WeakMap;let d;const f=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(ce,re){return p?new OffscreenCanvas(ce,re):H_("canvas")}function v(ce,re,$e){let qe=1;const ot=mt(ce);if((ot.width>$e||ot.height>$e)&&(qe=$e/Math.max(ot.width,ot.height)),qe<1)if(typeof HTMLImageElement<"u"&&ce instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ce instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ce instanceof ImageBitmap||typeof VideoFrame<"u"&&ce instanceof VideoFrame){const et=Math.floor(qe*ot.width),Ft=Math.floor(qe*ot.height);d===void 0&&(d=g(et,Ft));const At=re?g(et,Ft):d;return At.width=et,At.height=Ft,At.getContext("2d").drawImage(ce,0,0,et,Ft),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ot.width+"x"+ot.height+") to ("+et+"x"+Ft+")."),At}else return"data"in ce&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ot.width+"x"+ot.height+")."),ce;return ce}function b(ce){return ce.generateMipmaps}function x(ce){n.generateMipmap(ce)}function _(ce){return ce.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:ce.isWebGL3DRenderTarget?n.TEXTURE_3D:ce.isWebGLArrayRenderTarget||ce.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function E(ce,re,$e,qe,ot=!1){if(ce!==null){if(n[ce]!==void 0)return n[ce];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ce+"'")}let et=re;if(re===n.RED&&($e===n.FLOAT&&(et=n.R32F),$e===n.HALF_FLOAT&&(et=n.R16F),$e===n.UNSIGNED_BYTE&&(et=n.R8)),re===n.RED_INTEGER&&($e===n.UNSIGNED_BYTE&&(et=n.R8UI),$e===n.UNSIGNED_SHORT&&(et=n.R16UI),$e===n.UNSIGNED_INT&&(et=n.R32UI),$e===n.BYTE&&(et=n.R8I),$e===n.SHORT&&(et=n.R16I),$e===n.INT&&(et=n.R32I)),re===n.RG&&($e===n.FLOAT&&(et=n.RG32F),$e===n.HALF_FLOAT&&(et=n.RG16F),$e===n.UNSIGNED_BYTE&&(et=n.RG8)),re===n.RG_INTEGER&&($e===n.UNSIGNED_BYTE&&(et=n.RG8UI),$e===n.UNSIGNED_SHORT&&(et=n.RG16UI),$e===n.UNSIGNED_INT&&(et=n.RG32UI),$e===n.BYTE&&(et=n.RG8I),$e===n.SHORT&&(et=n.RG16I),$e===n.INT&&(et=n.RG32I)),re===n.RGB_INTEGER&&($e===n.UNSIGNED_BYTE&&(et=n.RGB8UI),$e===n.UNSIGNED_SHORT&&(et=n.RGB16UI),$e===n.UNSIGNED_INT&&(et=n.RGB32UI),$e===n.BYTE&&(et=n.RGB8I),$e===n.SHORT&&(et=n.RGB16I),$e===n.INT&&(et=n.RGB32I)),re===n.RGBA_INTEGER&&($e===n.UNSIGNED_BYTE&&(et=n.RGBA8UI),$e===n.UNSIGNED_SHORT&&(et=n.RGBA16UI),$e===n.UNSIGNED_INT&&(et=n.RGBA32UI),$e===n.BYTE&&(et=n.RGBA8I),$e===n.SHORT&&(et=n.RGBA16I),$e===n.INT&&(et=n.RGBA32I)),re===n.RGB&&$e===n.UNSIGNED_INT_5_9_9_9_REV&&(et=n.RGB9_E5),re===n.RGBA){const Ft=ot?U_:Qr.getTransfer(qe);$e===n.FLOAT&&(et=n.RGBA32F),$e===n.HALF_FLOAT&&(et=n.RGBA16F),$e===n.UNSIGNED_BYTE&&(et=Ft===$i?n.SRGB8_ALPHA8:n.RGBA8),$e===n.UNSIGNED_SHORT_4_4_4_4&&(et=n.RGBA4),$e===n.UNSIGNED_SHORT_5_5_5_1&&(et=n.RGB5_A1)}return(et===n.R16F||et===n.R32F||et===n.RG16F||et===n.RG32F||et===n.RGBA16F||et===n.RGBA32F)&&e.get("EXT_color_buffer_float"),et}function C(ce,re){let $e;return ce?re===null||re===Cf||re===i1?$e=n.DEPTH24_STENCIL8:re===is?$e=n.DEPTH32F_STENCIL8:re===r1&&($e=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):re===null||re===Cf||re===i1?$e=n.DEPTH_COMPONENT24:re===is?$e=n.DEPTH_COMPONENT32F:re===r1&&($e=n.DEPTH_COMPONENT16),$e}function M(ce,re){return b(ce)===!0||ce.isFramebufferTexture&&ce.minFilter!==sa&&ce.minFilter!==oi?Math.log2(Math.max(re.width,re.height))+1:ce.mipmaps!==void 0&&ce.mipmaps.length>0?ce.mipmaps.length:ce.isCompressedTexture&&Array.isArray(ce.image)?re.mipmaps.length:1}function R(ce){const re=ce.target;re.removeEventListener("dispose",R),B(re),re.isVideoTexture&&u.delete(re)}function L(ce){const re=ce.target;re.removeEventListener("dispose",L),I(re)}function B(ce){const re=r.get(ce);if(re.__webglInit===void 0)return;const $e=ce.source,qe=f.get($e);if(qe){const ot=qe[re.__cacheKey];ot.usedTimes--,ot.usedTimes===0&&N(ce),Object.keys(qe).length===0&&f.delete($e)}r.remove(ce)}function N(ce){const re=r.get(ce);n.deleteTexture(re.__webglTexture);const $e=ce.source,qe=f.get($e);delete qe[re.__cacheKey],o.memory.textures--}function I(ce){const re=r.get(ce);if(ce.depthTexture&&(ce.depthTexture.dispose(),r.remove(ce.depthTexture)),ce.isWebGLCubeRenderTarget)for(let qe=0;qe<6;qe++){if(Array.isArray(re.__webglFramebuffer[qe]))for(let ot=0;ot<re.__webglFramebuffer[qe].length;ot++)n.deleteFramebuffer(re.__webglFramebuffer[qe][ot]);else n.deleteFramebuffer(re.__webglFramebuffer[qe]);re.__webglDepthbuffer&&n.deleteRenderbuffer(re.__webglDepthbuffer[qe])}else{if(Array.isArray(re.__webglFramebuffer))for(let qe=0;qe<re.__webglFramebuffer.length;qe++)n.deleteFramebuffer(re.__webglFramebuffer[qe]);else n.deleteFramebuffer(re.__webglFramebuffer);if(re.__webglDepthbuffer&&n.deleteRenderbuffer(re.__webglDepthbuffer),re.__webglMultisampledFramebuffer&&n.deleteFramebuffer(re.__webglMultisampledFramebuffer),re.__webglColorRenderbuffer)for(let qe=0;qe<re.__webglColorRenderbuffer.length;qe++)re.__webglColorRenderbuffer[qe]&&n.deleteRenderbuffer(re.__webglColorRenderbuffer[qe]);re.__webglDepthRenderbuffer&&n.deleteRenderbuffer(re.__webglDepthRenderbuffer)}const $e=ce.textures;for(let qe=0,ot=$e.length;qe<ot;qe++){const et=r.get($e[qe]);et.__webglTexture&&(n.deleteTexture(et.__webglTexture),o.memory.textures--),r.remove($e[qe])}r.remove(ce)}let D=0;function P(){D=0}function G(){const ce=D;return ce>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ce+" texture units while this GPU supports only "+i.maxTextures),D+=1,ce}function W(ce){const re=[];return re.push(ce.wrapS),re.push(ce.wrapT),re.push(ce.wrapR||0),re.push(ce.magFilter),re.push(ce.minFilter),re.push(ce.anisotropy),re.push(ce.internalFormat),re.push(ce.format),re.push(ce.type),re.push(ce.generateMipmaps),re.push(ce.premultiplyAlpha),re.push(ce.flipY),re.push(ce.unpackAlignment),re.push(ce.colorSpace),re.join()}function q(ce,re){const $e=r.get(ce);if(ce.isVideoTexture&&at(ce),ce.isRenderTargetTexture===!1&&ce.isExternalTexture!==!0&&ce.version>0&&$e.__version!==ce.version){const qe=ce.image;if(qe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(qe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{be($e,ce,re);return}}else ce.isExternalTexture&&($e.__webglTexture=ce.sourceTexture?ce.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,$e.__webglTexture,n.TEXTURE0+re)}function z(ce,re){const $e=r.get(ce);if(ce.isRenderTargetTexture===!1&&ce.version>0&&$e.__version!==ce.version){be($e,ce,re);return}t.bindTexture(n.TEXTURE_2D_ARRAY,$e.__webglTexture,n.TEXTURE0+re)}function J(ce,re){const $e=r.get(ce);if(ce.isRenderTargetTexture===!1&&ce.version>0&&$e.__version!==ce.version){be($e,ce,re);return}t.bindTexture(n.TEXTURE_3D,$e.__webglTexture,n.TEXTURE0+re)}function Q(ce,re){const $e=r.get(ce);if(ce.version>0&&$e.__version!==ce.version){xe($e,ce,re);return}t.bindTexture(n.TEXTURE_CUBE_MAP,$e.__webglTexture,n.TEXTURE0+re)}const Y={[Ag]:n.REPEAT,[co]:n.CLAMP_TO_EDGE,[n1]:n.MIRRORED_REPEAT},X={[sa]:n.NEAREST,[ZN]:n.NEAREST_MIPMAP_NEAREST,[Dy]:n.NEAREST_MIPMAP_LINEAR,[oi]:n.LINEAR,[$x]:n.LINEAR_MIPMAP_NEAREST,[Hu]:n.LINEAR_MIPMAP_LINEAR},te={[Dq]:n.NEVER,[Fq]:n.ALWAYS,[kq]:n.LESS,[TP]:n.LEQUAL,[Oq]:n.EQUAL,[Lq]:n.GEQUAL,[Bq]:n.GREATER,[$q]:n.NOTEQUAL};function ne(ce,re){if(re.type===is&&e.has("OES_texture_float_linear")===!1&&(re.magFilter===oi||re.magFilter===$x||re.magFilter===Dy||re.magFilter===Hu||re.minFilter===oi||re.minFilter===$x||re.minFilter===Dy||re.minFilter===Hu)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(ce,n.TEXTURE_WRAP_S,Y[re.wrapS]),n.texParameteri(ce,n.TEXTURE_WRAP_T,Y[re.wrapT]),(ce===n.TEXTURE_3D||ce===n.TEXTURE_2D_ARRAY)&&n.texParameteri(ce,n.TEXTURE_WRAP_R,Y[re.wrapR]),n.texParameteri(ce,n.TEXTURE_MAG_FILTER,X[re.magFilter]),n.texParameteri(ce,n.TEXTURE_MIN_FILTER,X[re.minFilter]),re.compareFunction&&(n.texParameteri(ce,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(ce,n.TEXTURE_COMPARE_FUNC,te[re.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(re.magFilter===sa||re.minFilter!==Dy&&re.minFilter!==Hu||re.type===is&&e.has("OES_texture_float_linear")===!1)return;if(re.anisotropy>1||r.get(re).__currentAnisotropy){const $e=e.get("EXT_texture_filter_anisotropic");n.texParameterf(ce,$e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(re.anisotropy,i.getMaxAnisotropy())),r.get(re).__currentAnisotropy=re.anisotropy}}}function le(ce,re){let $e=!1;ce.__webglInit===void 0&&(ce.__webglInit=!0,re.addEventListener("dispose",R));const qe=re.source;let ot=f.get(qe);ot===void 0&&(ot={},f.set(qe,ot));const et=W(re);if(et!==ce.__cacheKey){ot[et]===void 0&&(ot[et]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,$e=!0),ot[et].usedTimes++;const Ft=ot[ce.__cacheKey];Ft!==void 0&&(ot[ce.__cacheKey].usedTimes--,Ft.usedTimes===0&&N(re)),ce.__cacheKey=et,ce.__webglTexture=ot[et].texture}return $e}function ye(ce,re,$e){return Math.floor(Math.floor(ce/$e)/re)}function ue(ce,re,$e,qe){const et=ce.updateRanges;if(et.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,re.width,re.height,$e,qe,re.data);else{et.sort((yt,Mt)=>yt.start-Mt.start);let Ft=0;for(let yt=1;yt<et.length;yt++){const Mt=et[Ft],on=et[yt],tn=Mt.start+Mt.count,zt=ye(on.start,re.width,4),fn=ye(Mt.start,re.width,4);on.start<=tn+1&&zt===fn&&ye(on.start+on.count-1,re.width,4)===zt?Mt.count=Math.max(Mt.count,on.start+on.count-Mt.start):(++Ft,et[Ft]=on)}et.length=Ft+1;const At=n.getParameter(n.UNPACK_ROW_LENGTH),Ct=n.getParameter(n.UNPACK_SKIP_PIXELS),qt=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,re.width);for(let yt=0,Mt=et.length;yt<Mt;yt++){const on=et[yt],tn=Math.floor(on.start/4),zt=Math.ceil(on.count/4),fn=tn%re.width,Te=Math.floor(tn/re.width),Xe=zt,Lt=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,fn),n.pixelStorei(n.UNPACK_SKIP_ROWS,Te),t.texSubImage2D(n.TEXTURE_2D,0,fn,Te,Xe,Lt,$e,qe,re.data)}ce.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,At),n.pixelStorei(n.UNPACK_SKIP_PIXELS,Ct),n.pixelStorei(n.UNPACK_SKIP_ROWS,qt)}}function be(ce,re,$e){let qe=n.TEXTURE_2D;(re.isDataArrayTexture||re.isCompressedArrayTexture)&&(qe=n.TEXTURE_2D_ARRAY),re.isData3DTexture&&(qe=n.TEXTURE_3D);const ot=le(ce,re),et=re.source;t.bindTexture(qe,ce.__webglTexture,n.TEXTURE0+$e);const Ft=r.get(et);if(et.version!==Ft.__version||ot===!0){t.activeTexture(n.TEXTURE0+$e);const At=Qr.getPrimaries(Qr.workingColorSpace),Ct=re.colorSpace===Rp?null:Qr.getPrimaries(re.colorSpace),qt=re.colorSpace===Rp||At===Ct?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,re.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,re.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,re.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,qt);let yt=v(re.image,!1,i.maxTextureSize);yt=Ut(re,yt);const Mt=s.convert(re.format,re.colorSpace),on=s.convert(re.type);let tn=E(re.internalFormat,Mt,on,re.colorSpace,re.isVideoTexture);ne(qe,re);let zt;const fn=re.mipmaps,Te=re.isVideoTexture!==!0,Xe=Ft.__version===void 0||ot===!0,Lt=et.dataReady,en=M(re,yt);if(re.isDepthTexture)tn=C(re.format===o1,re.type),Xe&&(Te?t.texStorage2D(n.TEXTURE_2D,1,tn,yt.width,yt.height):t.texImage2D(n.TEXTURE_2D,0,tn,yt.width,yt.height,0,Mt,on,null));else if(re.isDataTexture)if(fn.length>0){Te&&Xe&&t.texStorage2D(n.TEXTURE_2D,en,tn,fn[0].width,fn[0].height);for(let Vt=0,Ot=fn.length;Vt<Ot;Vt++)zt=fn[Vt],Te?Lt&&t.texSubImage2D(n.TEXTURE_2D,Vt,0,0,zt.width,zt.height,Mt,on,zt.data):t.texImage2D(n.TEXTURE_2D,Vt,tn,zt.width,zt.height,0,Mt,on,zt.data);re.generateMipmaps=!1}else Te?(Xe&&t.texStorage2D(n.TEXTURE_2D,en,tn,yt.width,yt.height),Lt&&ue(re,yt,Mt,on)):t.texImage2D(n.TEXTURE_2D,0,tn,yt.width,yt.height,0,Mt,on,yt.data);else if(re.isCompressedTexture)if(re.isCompressedArrayTexture){Te&&Xe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,en,tn,fn[0].width,fn[0].height,yt.depth);for(let Vt=0,Ot=fn.length;Vt<Ot;Vt++)if(zt=fn[Vt],re.format!==uo)if(Mt!==null)if(Te){if(Lt)if(re.layerUpdates.size>0){const un=nL(zt.width,zt.height,re.format,re.type);for(const In of re.layerUpdates){const Tr=zt.data.subarray(In*un/zt.data.BYTES_PER_ELEMENT,(In+1)*un/zt.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Vt,0,0,In,zt.width,zt.height,1,Mt,Tr)}re.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Vt,0,0,0,zt.width,zt.height,yt.depth,Mt,zt.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Vt,tn,zt.width,zt.height,yt.depth,0,zt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Te?Lt&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Vt,0,0,0,zt.width,zt.height,yt.depth,Mt,on,zt.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Vt,tn,zt.width,zt.height,yt.depth,0,Mt,on,zt.data)}else{Te&&Xe&&t.texStorage2D(n.TEXTURE_2D,en,tn,fn[0].width,fn[0].height);for(let Vt=0,Ot=fn.length;Vt<Ot;Vt++)zt=fn[Vt],re.format!==uo?Mt!==null?Te?Lt&&t.compressedTexSubImage2D(n.TEXTURE_2D,Vt,0,0,zt.width,zt.height,Mt,zt.data):t.compressedTexImage2D(n.TEXTURE_2D,Vt,tn,zt.width,zt.height,0,zt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Te?Lt&&t.texSubImage2D(n.TEXTURE_2D,Vt,0,0,zt.width,zt.height,Mt,on,zt.data):t.texImage2D(n.TEXTURE_2D,Vt,tn,zt.width,zt.height,0,Mt,on,zt.data)}else if(re.isDataArrayTexture)if(Te){if(Xe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,en,tn,yt.width,yt.height,yt.depth),Lt)if(re.layerUpdates.size>0){const Vt=nL(yt.width,yt.height,re.format,re.type);for(const Ot of re.layerUpdates){const un=yt.data.subarray(Ot*Vt/yt.data.BYTES_PER_ELEMENT,(Ot+1)*Vt/yt.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Ot,yt.width,yt.height,1,Mt,on,un)}re.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,yt.width,yt.height,yt.depth,Mt,on,yt.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,tn,yt.width,yt.height,yt.depth,0,Mt,on,yt.data);else if(re.isData3DTexture)Te?(Xe&&t.texStorage3D(n.TEXTURE_3D,en,tn,yt.width,yt.height,yt.depth),Lt&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,yt.width,yt.height,yt.depth,Mt,on,yt.data)):t.texImage3D(n.TEXTURE_3D,0,tn,yt.width,yt.height,yt.depth,0,Mt,on,yt.data);else if(re.isFramebufferTexture){if(Xe)if(Te)t.texStorage2D(n.TEXTURE_2D,en,tn,yt.width,yt.height);else{let Vt=yt.width,Ot=yt.height;for(let un=0;un<en;un++)t.texImage2D(n.TEXTURE_2D,un,tn,Vt,Ot,0,Mt,on,null),Vt>>=1,Ot>>=1}}else if(fn.length>0){if(Te&&Xe){const Vt=mt(fn[0]);t.texStorage2D(n.TEXTURE_2D,en,tn,Vt.width,Vt.height)}for(let Vt=0,Ot=fn.length;Vt<Ot;Vt++)zt=fn[Vt],Te?Lt&&t.texSubImage2D(n.TEXTURE_2D,Vt,0,0,Mt,on,zt):t.texImage2D(n.TEXTURE_2D,Vt,tn,Mt,on,zt);re.generateMipmaps=!1}else if(Te){if(Xe){const Vt=mt(yt);t.texStorage2D(n.TEXTURE_2D,en,tn,Vt.width,Vt.height)}Lt&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Mt,on,yt)}else t.texImage2D(n.TEXTURE_2D,0,tn,Mt,on,yt);b(re)&&x(qe),Ft.__version=et.version,re.onUpdate&&re.onUpdate(re)}ce.__version=re.version}function xe(ce,re,$e){if(re.image.length!==6)return;const qe=le(ce,re),ot=re.source;t.bindTexture(n.TEXTURE_CUBE_MAP,ce.__webglTexture,n.TEXTURE0+$e);const et=r.get(ot);if(ot.version!==et.__version||qe===!0){t.activeTexture(n.TEXTURE0+$e);const Ft=Qr.getPrimaries(Qr.workingColorSpace),At=re.colorSpace===Rp?null:Qr.getPrimaries(re.colorSpace),Ct=re.colorSpace===Rp||Ft===At?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,re.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,re.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,re.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ct);const qt=re.isCompressedTexture||re.image[0].isCompressedTexture,yt=re.image[0]&&re.image[0].isDataTexture,Mt=[];for(let Ot=0;Ot<6;Ot++)!qt&&!yt?Mt[Ot]=v(re.image[Ot],!0,i.maxCubemapSize):Mt[Ot]=yt?re.image[Ot].image:re.image[Ot],Mt[Ot]=Ut(re,Mt[Ot]);const on=Mt[0],tn=s.convert(re.format,re.colorSpace),zt=s.convert(re.type),fn=E(re.internalFormat,tn,zt,re.colorSpace),Te=re.isVideoTexture!==!0,Xe=et.__version===void 0||qe===!0,Lt=ot.dataReady;let en=M(re,on);ne(n.TEXTURE_CUBE_MAP,re);let Vt;if(qt){Te&&Xe&&t.texStorage2D(n.TEXTURE_CUBE_MAP,en,fn,on.width,on.height);for(let Ot=0;Ot<6;Ot++){Vt=Mt[Ot].mipmaps;for(let un=0;un<Vt.length;un++){const In=Vt[un];re.format!==uo?tn!==null?Te?Lt&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,un,0,0,In.width,In.height,tn,In.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,un,fn,In.width,In.height,0,In.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Te?Lt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,un,0,0,In.width,In.height,tn,zt,In.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,un,fn,In.width,In.height,0,tn,zt,In.data)}}}else{if(Vt=re.mipmaps,Te&&Xe){Vt.length>0&&en++;const Ot=mt(Mt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,en,fn,Ot.width,Ot.height)}for(let Ot=0;Ot<6;Ot++)if(yt){Te?Lt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,0,0,0,Mt[Ot].width,Mt[Ot].height,tn,zt,Mt[Ot].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,0,fn,Mt[Ot].width,Mt[Ot].height,0,tn,zt,Mt[Ot].data);for(let un=0;un<Vt.length;un++){const Tr=Vt[un].image[Ot].image;Te?Lt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,un+1,0,0,Tr.width,Tr.height,tn,zt,Tr.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,un+1,fn,Tr.width,Tr.height,0,tn,zt,Tr.data)}}else{Te?Lt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,0,0,0,tn,zt,Mt[Ot]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,0,fn,tn,zt,Mt[Ot]);for(let un=0;un<Vt.length;un++){const In=Vt[un];Te?Lt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,un+1,0,0,tn,zt,In.image[Ot]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,un+1,fn,tn,zt,In.image[Ot])}}}b(re)&&x(n.TEXTURE_CUBE_MAP),et.__version=ot.version,re.onUpdate&&re.onUpdate(re)}ce.__version=re.version}function Pe(ce,re,$e,qe,ot,et){const Ft=s.convert($e.format,$e.colorSpace),At=s.convert($e.type),Ct=E($e.internalFormat,Ft,At,$e.colorSpace),qt=r.get(re),yt=r.get($e);if(yt.__renderTarget=re,!qt.__hasExternalTextures){const Mt=Math.max(1,re.width>>et),on=Math.max(1,re.height>>et);ot===n.TEXTURE_3D||ot===n.TEXTURE_2D_ARRAY?t.texImage3D(ot,et,Ct,Mt,on,re.depth,0,Ft,At,null):t.texImage2D(ot,et,Ct,Mt,on,0,Ft,At,null)}t.bindFramebuffer(n.FRAMEBUFFER,ce),st(re)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,qe,ot,yt.__webglTexture,0,lt(re)):(ot===n.TEXTURE_2D||ot>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ot<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,qe,ot,yt.__webglTexture,et),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ze(ce,re,$e){if(n.bindRenderbuffer(n.RENDERBUFFER,ce),re.depthBuffer){const qe=re.depthTexture,ot=qe&&qe.isDepthTexture?qe.type:null,et=C(re.stencilBuffer,ot),Ft=re.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,At=lt(re);st(re)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,At,et,re.width,re.height):$e?n.renderbufferStorageMultisample(n.RENDERBUFFER,At,et,re.width,re.height):n.renderbufferStorage(n.RENDERBUFFER,et,re.width,re.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ft,n.RENDERBUFFER,ce)}else{const qe=re.textures;for(let ot=0;ot<qe.length;ot++){const et=qe[ot],Ft=s.convert(et.format,et.colorSpace),At=s.convert(et.type),Ct=E(et.internalFormat,Ft,At,et.colorSpace),qt=lt(re);$e&&st(re)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,qt,Ct,re.width,re.height):st(re)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,qt,Ct,re.width,re.height):n.renderbufferStorage(n.RENDERBUFFER,Ct,re.width,re.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ke(ce,re){if(re&&re.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,ce),!(re.depthTexture&&re.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const qe=r.get(re.depthTexture);qe.__renderTarget=re,(!qe.__webglTexture||re.depthTexture.image.width!==re.width||re.depthTexture.image.height!==re.height)&&(re.depthTexture.image.width=re.width,re.depthTexture.image.height=re.height,re.depthTexture.needsUpdate=!0),q(re.depthTexture,0);const ot=qe.__webglTexture,et=lt(re);if(re.depthTexture.format===s1)st(re)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ot,0,et):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ot,0);else if(re.depthTexture.format===o1)st(re)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ot,0,et):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ot,0);else throw new Error("Unknown depthTexture format")}function pt(ce){const re=r.get(ce),$e=ce.isWebGLCubeRenderTarget===!0;if(re.__boundDepthTexture!==ce.depthTexture){const qe=ce.depthTexture;if(re.__depthDisposeCallback&&re.__depthDisposeCallback(),qe){const ot=()=>{delete re.__boundDepthTexture,delete re.__depthDisposeCallback,qe.removeEventListener("dispose",ot)};qe.addEventListener("dispose",ot),re.__depthDisposeCallback=ot}re.__boundDepthTexture=qe}if(ce.depthTexture&&!re.__autoAllocateDepthBuffer){if($e)throw new Error("target.depthTexture not supported in Cube render targets");const qe=ce.texture.mipmaps;qe&&qe.length>0?Ke(re.__webglFramebuffer[0],ce):Ke(re.__webglFramebuffer,ce)}else if($e){re.__webglDepthbuffer=[];for(let qe=0;qe<6;qe++)if(t.bindFramebuffer(n.FRAMEBUFFER,re.__webglFramebuffer[qe]),re.__webglDepthbuffer[qe]===void 0)re.__webglDepthbuffer[qe]=n.createRenderbuffer(),ze(re.__webglDepthbuffer[qe],ce,!1);else{const ot=ce.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,et=re.__webglDepthbuffer[qe];n.bindRenderbuffer(n.RENDERBUFFER,et),n.framebufferRenderbuffer(n.FRAMEBUFFER,ot,n.RENDERBUFFER,et)}}else{const qe=ce.texture.mipmaps;if(qe&&qe.length>0?t.bindFramebuffer(n.FRAMEBUFFER,re.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,re.__webglFramebuffer),re.__webglDepthbuffer===void 0)re.__webglDepthbuffer=n.createRenderbuffer(),ze(re.__webglDepthbuffer,ce,!1);else{const ot=ce.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,et=re.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,et),n.framebufferRenderbuffer(n.FRAMEBUFFER,ot,n.RENDERBUFFER,et)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function dt(ce,re,$e){const qe=r.get(ce);re!==void 0&&Pe(qe.__webglFramebuffer,ce,ce.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),$e!==void 0&&pt(ce)}function pe(ce){const re=ce.texture,$e=r.get(ce),qe=r.get(re);ce.addEventListener("dispose",L);const ot=ce.textures,et=ce.isWebGLCubeRenderTarget===!0,Ft=ot.length>1;if(Ft||(qe.__webglTexture===void 0&&(qe.__webglTexture=n.createTexture()),qe.__version=re.version,o.memory.textures++),et){$e.__webglFramebuffer=[];for(let At=0;At<6;At++)if(re.mipmaps&&re.mipmaps.length>0){$e.__webglFramebuffer[At]=[];for(let Ct=0;Ct<re.mipmaps.length;Ct++)$e.__webglFramebuffer[At][Ct]=n.createFramebuffer()}else $e.__webglFramebuffer[At]=n.createFramebuffer()}else{if(re.mipmaps&&re.mipmaps.length>0){$e.__webglFramebuffer=[];for(let At=0;At<re.mipmaps.length;At++)$e.__webglFramebuffer[At]=n.createFramebuffer()}else $e.__webglFramebuffer=n.createFramebuffer();if(Ft)for(let At=0,Ct=ot.length;At<Ct;At++){const qt=r.get(ot[At]);qt.__webglTexture===void 0&&(qt.__webglTexture=n.createTexture(),o.memory.textures++)}if(ce.samples>0&&st(ce)===!1){$e.__webglMultisampledFramebuffer=n.createFramebuffer(),$e.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,$e.__webglMultisampledFramebuffer);for(let At=0;At<ot.length;At++){const Ct=ot[At];$e.__webglColorRenderbuffer[At]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,$e.__webglColorRenderbuffer[At]);const qt=s.convert(Ct.format,Ct.colorSpace),yt=s.convert(Ct.type),Mt=E(Ct.internalFormat,qt,yt,Ct.colorSpace,ce.isXRRenderTarget===!0),on=lt(ce);n.renderbufferStorageMultisample(n.RENDERBUFFER,on,Mt,ce.width,ce.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+At,n.RENDERBUFFER,$e.__webglColorRenderbuffer[At])}n.bindRenderbuffer(n.RENDERBUFFER,null),ce.depthBuffer&&($e.__webglDepthRenderbuffer=n.createRenderbuffer(),ze($e.__webglDepthRenderbuffer,ce,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(et){t.bindTexture(n.TEXTURE_CUBE_MAP,qe.__webglTexture),ne(n.TEXTURE_CUBE_MAP,re);for(let At=0;At<6;At++)if(re.mipmaps&&re.mipmaps.length>0)for(let Ct=0;Ct<re.mipmaps.length;Ct++)Pe($e.__webglFramebuffer[At][Ct],ce,re,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+At,Ct);else Pe($e.__webglFramebuffer[At],ce,re,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+At,0);b(re)&&x(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ft){for(let At=0,Ct=ot.length;At<Ct;At++){const qt=ot[At],yt=r.get(qt);let Mt=n.TEXTURE_2D;(ce.isWebGL3DRenderTarget||ce.isWebGLArrayRenderTarget)&&(Mt=ce.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Mt,yt.__webglTexture),ne(Mt,qt),Pe($e.__webglFramebuffer,ce,qt,n.COLOR_ATTACHMENT0+At,Mt,0),b(qt)&&x(Mt)}t.unbindTexture()}else{let At=n.TEXTURE_2D;if((ce.isWebGL3DRenderTarget||ce.isWebGLArrayRenderTarget)&&(At=ce.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(At,qe.__webglTexture),ne(At,re),re.mipmaps&&re.mipmaps.length>0)for(let Ct=0;Ct<re.mipmaps.length;Ct++)Pe($e.__webglFramebuffer[Ct],ce,re,n.COLOR_ATTACHMENT0,At,Ct);else Pe($e.__webglFramebuffer,ce,re,n.COLOR_ATTACHMENT0,At,0);b(re)&&x(At),t.unbindTexture()}ce.depthBuffer&&pt(ce)}function Le(ce){const re=ce.textures;for(let $e=0,qe=re.length;$e<qe;$e++){const ot=re[$e];if(b(ot)){const et=_(ce),Ft=r.get(ot).__webglTexture;t.bindTexture(et,Ft),x(et),t.unbindTexture()}}}const Ue=[],Ze=[];function je(ce){if(ce.samples>0){if(st(ce)===!1){const re=ce.textures,$e=ce.width,qe=ce.height;let ot=n.COLOR_BUFFER_BIT;const et=ce.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ft=r.get(ce),At=re.length>1;if(At)for(let qt=0;qt<re.length;qt++)t.bindFramebuffer(n.FRAMEBUFFER,Ft.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+qt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ft.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+qt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ft.__webglMultisampledFramebuffer);const Ct=ce.texture.mipmaps;Ct&&Ct.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ft.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ft.__webglFramebuffer);for(let qt=0;qt<re.length;qt++){if(ce.resolveDepthBuffer&&(ce.depthBuffer&&(ot|=n.DEPTH_BUFFER_BIT),ce.stencilBuffer&&ce.resolveStencilBuffer&&(ot|=n.STENCIL_BUFFER_BIT)),At){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ft.__webglColorRenderbuffer[qt]);const yt=r.get(re[qt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,yt,0)}n.blitFramebuffer(0,0,$e,qe,0,0,$e,qe,ot,n.NEAREST),l===!0&&(Ue.length=0,Ze.length=0,Ue.push(n.COLOR_ATTACHMENT0+qt),ce.depthBuffer&&ce.resolveDepthBuffer===!1&&(Ue.push(et),Ze.push(et),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Ze)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ue))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),At)for(let qt=0;qt<re.length;qt++){t.bindFramebuffer(n.FRAMEBUFFER,Ft.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+qt,n.RENDERBUFFER,Ft.__webglColorRenderbuffer[qt]);const yt=r.get(re[qt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ft.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+qt,n.TEXTURE_2D,yt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ft.__webglMultisampledFramebuffer)}else if(ce.depthBuffer&&ce.resolveDepthBuffer===!1&&l){const re=ce.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[re])}}}function lt(ce){return Math.min(i.maxSamples,ce.samples)}function st(ce){const re=r.get(ce);return ce.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&re.__useRenderToTexture!==!1}function at(ce){const re=o.render.frame;u.get(ce)!==re&&(u.set(ce,re),ce.update())}function Ut(ce,re){const $e=ce.colorSpace,qe=ce.format,ot=ce.type;return ce.isCompressedTexture===!0||ce.isVideoTexture===!0||$e!==Yu&&$e!==Rp&&(Qr.getTransfer($e)===$i?(qe!==uo||ot!==zl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",$e)),re}function mt(ce){return typeof HTMLImageElement<"u"&&ce instanceof HTMLImageElement?(c.width=ce.naturalWidth||ce.width,c.height=ce.naturalHeight||ce.height):typeof VideoFrame<"u"&&ce instanceof VideoFrame?(c.width=ce.displayWidth,c.height=ce.displayHeight):(c.width=ce.width,c.height=ce.height),c}this.allocateTextureUnit=G,this.resetTextureUnits=P,this.setTexture2D=q,this.setTexture2DArray=z,this.setTexture3D=J,this.setTextureCube=Q,this.rebindTextures=dt,this.setupRenderTarget=pe,this.updateRenderTargetMipmap=Le,this.updateMultisampleRenderTarget=je,this.setupDepthRenderbuffer=pt,this.setupFrameBufferTexture=Pe,this.useMultisampledRTT=st}function XK(n,e){function t(r,i=Rp){let s;const o=Qr.getTransfer(i);if(r===zl)return n.UNSIGNED_BYTE;if(r===tI)return n.UNSIGNED_SHORT_4_4_4_4;if(r===nI)return n.UNSIGNED_SHORT_5_5_5_1;if(r===vP)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===QN)return n.BYTE;if(r===eI)return n.SHORT;if(r===r1)return n.UNSIGNED_SHORT;if(r===EC)return n.INT;if(r===Cf)return n.UNSIGNED_INT;if(r===is)return n.FLOAT;if(r===Xs)return n.HALF_FLOAT;if(r===bP)return n.ALPHA;if(r===xP)return n.RGB;if(r===uo)return n.RGBA;if(r===s1)return n.DEPTH_COMPONENT;if(r===o1)return n.DEPTH_STENCIL;if(r===AC)return n.RED;if(r===TC)return n.RED_INTEGER;if(r===SP)return n.RG;if(r===rI)return n.RG_INTEGER;if(r===iI)return n.RGBA_INTEGER;if(r===y_||r===v_||r===b_||r===x_)if(o===$i)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===y_)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===v_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===b_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===x_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===y_)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===v_)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===b_)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===x_)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===sR||r===oR||r===aR||r===lR)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===sR)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===oR)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===aR)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===lR)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===cR||r===uR||r===dR)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===cR||r===uR)return o===$i?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===dR)return o===$i?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===hR||r===fR||r===pR||r===mR||r===gR||r===yR||r===vR||r===bR||r===xR||r===SR||r===wR||r===_R||r===CR||r===ER)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===hR)return o===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===fR)return o===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===pR)return o===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===mR)return o===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===gR)return o===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===yR)return o===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===vR)return o===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===bR)return o===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===xR)return o===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===SR)return o===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===wR)return o===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===_R)return o===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===CR)return o===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===ER)return o===$i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===S_||r===AR||r===TR)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===S_)return o===$i?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===AR)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===TR)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===wP||r===MR||r===RR||r===NR)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===S_)return s.COMPRESSED_RED_RGTC1_EXT;if(r===MR)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===RR)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===NR)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===i1?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}class qK extends Ti{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}}const Vge=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Gge=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Wge{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const r=new qK(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,r=new Da({vertexShader:Vge,fragmentShader:Gge,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Li(new Of(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class jge extends kf{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,d=null,f=null,p=null,g=null;const v=new Wge,b={},x=t.getContextAttributes();let _=null,E=null;const C=[],M=[],R=new Nt;let L=null;const B=new So;B.viewport=new Hr;const N=new So;N.viewport=new Hr;const I=[B,N],D=new NK;let P=null,G=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ue){let be=C[ue];return be===void 0&&(be=new bM,C[ue]=be),be.getTargetRaySpace()},this.getControllerGrip=function(ue){let be=C[ue];return be===void 0&&(be=new bM,C[ue]=be),be.getGripSpace()},this.getHand=function(ue){let be=C[ue];return be===void 0&&(be=new bM,C[ue]=be),be.getHandSpace()};function W(ue){const be=M.indexOf(ue.inputSource);if(be===-1)return;const xe=C[be];xe!==void 0&&(xe.update(ue.inputSource,ue.frame,c||o),xe.dispatchEvent({type:ue.type,data:ue.inputSource}))}function q(){i.removeEventListener("select",W),i.removeEventListener("selectstart",W),i.removeEventListener("selectend",W),i.removeEventListener("squeeze",W),i.removeEventListener("squeezestart",W),i.removeEventListener("squeezeend",W),i.removeEventListener("end",q),i.removeEventListener("inputsourceschange",z);for(let ue=0;ue<C.length;ue++){const be=M[ue];be!==null&&(M[ue]=null,C[ue].disconnect(be))}P=null,G=null,v.reset();for(const ue in b)delete b[ue];e.setRenderTarget(_),p=null,f=null,d=null,i=null,E=null,ye.stop(),r.isPresenting=!1,e.setPixelRatio(L),e.setSize(R.width,R.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ue){s=ue,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ue){a=ue,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(ue){c=ue},this.getBaseLayer=function(){return f!==null?f:p},this.getBinding=function(){return d},this.getFrame=function(){return g},this.getSession=function(){return i},this.setSession=async function(ue){if(i=ue,i!==null){if(_=e.getRenderTarget(),i.addEventListener("select",W),i.addEventListener("selectstart",W),i.addEventListener("selectend",W),i.addEventListener("squeeze",W),i.addEventListener("squeezestart",W),i.addEventListener("squeezeend",W),i.addEventListener("end",q),i.addEventListener("inputsourceschange",z),x.xrCompatible!==!0&&await t.makeXRCompatible(),L=e.getPixelRatio(),e.getSize(R),typeof XRWebGLBinding<"u"&&(d=new XRWebGLBinding(i,t)),d!==null&&"createProjectionLayer"in XRWebGLBinding.prototype){let xe=null,Pe=null,ze=null;x.depth&&(ze=x.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,xe=x.stencil?o1:s1,Pe=x.stencil?i1:Cf);const Ke={colorFormat:t.RGBA8,depthFormat:ze,scaleFactor:s};f=d.createProjectionLayer(Ke),i.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),E=new Ec(f.textureWidth,f.textureHeight,{format:uo,type:zl,depthTexture:new PP(f.textureWidth,f.textureHeight,Pe,void 0,void 0,void 0,void 0,void 0,void 0,xe),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1,resolveStencilBuffer:f.ignoreDepthValues===!1})}else{const xe={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(i,t,xe),i.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),E=new Ec(p.framebufferWidth,p.framebufferHeight,{format:uo,type:zl,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil,resolveDepthBuffer:p.ignoreDepthValues===!1,resolveStencilBuffer:p.ignoreDepthValues===!1})}E.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),ye.setContext(i),ye.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return v.getDepthTexture()};function z(ue){for(let be=0;be<ue.removed.length;be++){const xe=ue.removed[be],Pe=M.indexOf(xe);Pe>=0&&(M[Pe]=null,C[Pe].disconnect(xe))}for(let be=0;be<ue.added.length;be++){const xe=ue.added[be];let Pe=M.indexOf(xe);if(Pe===-1){for(let Ke=0;Ke<C.length;Ke++)if(Ke>=M.length){M.push(xe),Pe=Ke;break}else if(M[Ke]===null){M[Ke]=xe,Pe=Ke;break}if(Pe===-1)break}const ze=C[Pe];ze&&ze.connect(xe)}}const J=new ve,Q=new ve;function Y(ue,be,xe){J.setFromMatrixPosition(be.matrixWorld),Q.setFromMatrixPosition(xe.matrixWorld);const Pe=J.distanceTo(Q),ze=be.projectionMatrix.elements,Ke=xe.projectionMatrix.elements,pt=ze[14]/(ze[10]-1),dt=ze[14]/(ze[10]+1),pe=(ze[9]+1)/ze[5],Le=(ze[9]-1)/ze[5],Ue=(ze[8]-1)/ze[0],Ze=(Ke[8]+1)/Ke[0],je=pt*Ue,lt=pt*Ze,st=Pe/(-Ue+Ze),at=st*-Ue;if(be.matrixWorld.decompose(ue.position,ue.quaternion,ue.scale),ue.translateX(at),ue.translateZ(st),ue.matrixWorld.compose(ue.position,ue.quaternion,ue.scale),ue.matrixWorldInverse.copy(ue.matrixWorld).invert(),ze[10]===-1)ue.projectionMatrix.copy(be.projectionMatrix),ue.projectionMatrixInverse.copy(be.projectionMatrixInverse);else{const Ut=pt+st,mt=dt+st,ce=je-at,re=lt+(Pe-at),$e=pe*dt/mt*Ut,qe=Le*dt/mt*Ut;ue.projectionMatrix.makePerspective(ce,re,$e,qe,Ut,mt),ue.projectionMatrixInverse.copy(ue.projectionMatrix).invert()}}function X(ue,be){be===null?ue.matrixWorld.copy(ue.matrix):ue.matrixWorld.multiplyMatrices(be.matrixWorld,ue.matrix),ue.matrixWorldInverse.copy(ue.matrixWorld).invert()}this.updateCamera=function(ue){if(i===null)return;let be=ue.near,xe=ue.far;v.texture!==null&&(v.depthNear>0&&(be=v.depthNear),v.depthFar>0&&(xe=v.depthFar)),D.near=N.near=B.near=be,D.far=N.far=B.far=xe,(P!==D.near||G!==D.far)&&(i.updateRenderState({depthNear:D.near,depthFar:D.far}),P=D.near,G=D.far),D.layers.mask=ue.layers.mask|6,B.layers.mask=D.layers.mask&3,N.layers.mask=D.layers.mask&5;const Pe=ue.parent,ze=D.cameras;X(D,Pe);for(let Ke=0;Ke<ze.length;Ke++)X(ze[Ke],Pe);ze.length===2?Y(D,B,N):D.projectionMatrix.copy(B.projectionMatrix),te(ue,D,Pe)};function te(ue,be,xe){xe===null?ue.matrix.copy(be.matrixWorld):(ue.matrix.copy(xe.matrixWorld),ue.matrix.invert(),ue.matrix.multiply(be.matrixWorld)),ue.matrix.decompose(ue.position,ue.quaternion,ue.scale),ue.updateMatrixWorld(!0),ue.projectionMatrix.copy(be.projectionMatrix),ue.projectionMatrixInverse.copy(be.projectionMatrixInverse),ue.isPerspectiveCamera&&(ue.fov=u1*2*Math.atan(1/ue.projectionMatrix.elements[5]),ue.zoom=1)}this.getCamera=function(){return D},this.getFoveation=function(){if(!(f===null&&p===null))return l},this.setFoveation=function(ue){l=ue,f!==null&&(f.fixedFoveation=ue),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=ue)},this.hasDepthSensing=function(){return v.texture!==null},this.getDepthSensingMesh=function(){return v.getMesh(D)},this.getCameraTexture=function(ue){return b[ue]};let ne=null;function le(ue,be){if(u=be.getViewerPose(c||o),g=be,u!==null){const xe=u.views;p!==null&&(e.setRenderTargetFramebuffer(E,p.framebuffer),e.setRenderTarget(E));let Pe=!1;xe.length!==D.cameras.length&&(D.cameras.length=0,Pe=!0);for(let dt=0;dt<xe.length;dt++){const pe=xe[dt];let Le=null;if(p!==null)Le=p.getViewport(pe);else{const Ze=d.getViewSubImage(f,pe);Le=Ze.viewport,dt===0&&(e.setRenderTargetTextures(E,Ze.colorTexture,Ze.depthStencilTexture),e.setRenderTarget(E))}let Ue=I[dt];Ue===void 0&&(Ue=new So,Ue.layers.enable(dt),Ue.viewport=new Hr,I[dt]=Ue),Ue.matrix.fromArray(pe.transform.matrix),Ue.matrix.decompose(Ue.position,Ue.quaternion,Ue.scale),Ue.projectionMatrix.fromArray(pe.projectionMatrix),Ue.projectionMatrixInverse.copy(Ue.projectionMatrix).invert(),Ue.viewport.set(Le.x,Le.y,Le.width,Le.height),dt===0&&(D.matrix.copy(Ue.matrix),D.matrix.decompose(D.position,D.quaternion,D.scale)),Pe===!0&&D.cameras.push(Ue)}const ze=i.enabledFeatures;if(ze&&ze.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&d){const dt=d.getDepthInformation(xe[0]);dt&&dt.isValid&&dt.texture&&v.init(dt,i.renderState)}if(ze&&ze.includes("camera-access")&&(e.state.unbindTexture(),d))for(let dt=0;dt<xe.length;dt++){const pe=xe[dt].camera;if(pe){let Le=b[pe];Le||(Le=new qK,b[pe]=Le);const Ue=d.getCameraImage(pe);Le.sourceTexture=Ue}}}for(let xe=0;xe<C.length;xe++){const Pe=M[xe],ze=C[xe];Pe!==null&&ze!==void 0&&ze.update(Pe,be,c||o)}ne&&ne(ue,be),be.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:be}),g=null}const ye=new HK;ye.setAnimationLoop(le),this.setAnimationLoop=function(ue){ne=ue},this.dispose=function(){}}}const cy=new Ac,Xge=new zn;function qge(n,e){function t(b,x){b.matrixAutoUpdate===!0&&b.updateMatrix(),x.value.copy(b.matrix)}function r(b,x){x.color.getRGB(b.fogColor.value,Vq(n)),x.isFog?(b.fogNear.value=x.near,b.fogFar.value=x.far):x.isFogExp2&&(b.fogDensity.value=x.density)}function i(b,x,_,E,C){x.isMeshBasicMaterial||x.isMeshLambertMaterial?s(b,x):x.isMeshToonMaterial?(s(b,x),d(b,x)):x.isMeshPhongMaterial?(s(b,x),u(b,x)):x.isMeshStandardMaterial?(s(b,x),f(b,x),x.isMeshPhysicalMaterial&&p(b,x,C)):x.isMeshMatcapMaterial?(s(b,x),g(b,x)):x.isMeshDepthMaterial?s(b,x):x.isMeshDistanceMaterial?(s(b,x),v(b,x)):x.isMeshNormalMaterial?s(b,x):x.isLineBasicMaterial?(o(b,x),x.isLineDashedMaterial&&a(b,x)):x.isPointsMaterial?l(b,x,_,E):x.isSpriteMaterial?c(b,x):x.isShadowMaterial?(b.color.value.copy(x.color),b.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function s(b,x){b.opacity.value=x.opacity,x.color&&b.diffuse.value.copy(x.color),x.emissive&&b.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(b.map.value=x.map,t(x.map,b.mapTransform)),x.alphaMap&&(b.alphaMap.value=x.alphaMap,t(x.alphaMap,b.alphaMapTransform)),x.bumpMap&&(b.bumpMap.value=x.bumpMap,t(x.bumpMap,b.bumpMapTransform),b.bumpScale.value=x.bumpScale,x.side===Ma&&(b.bumpScale.value*=-1)),x.normalMap&&(b.normalMap.value=x.normalMap,t(x.normalMap,b.normalMapTransform),b.normalScale.value.copy(x.normalScale),x.side===Ma&&b.normalScale.value.negate()),x.displacementMap&&(b.displacementMap.value=x.displacementMap,t(x.displacementMap,b.displacementMapTransform),b.displacementScale.value=x.displacementScale,b.displacementBias.value=x.displacementBias),x.emissiveMap&&(b.emissiveMap.value=x.emissiveMap,t(x.emissiveMap,b.emissiveMapTransform)),x.specularMap&&(b.specularMap.value=x.specularMap,t(x.specularMap,b.specularMapTransform)),x.alphaTest>0&&(b.alphaTest.value=x.alphaTest);const _=e.get(x),E=_.envMap,C=_.envMapRotation;E&&(b.envMap.value=E,cy.copy(C),cy.x*=-1,cy.y*=-1,cy.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(cy.y*=-1,cy.z*=-1),b.envMapRotation.value.setFromMatrix4(Xge.makeRotationFromEuler(cy)),b.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,b.reflectivity.value=x.reflectivity,b.ior.value=x.ior,b.refractionRatio.value=x.refractionRatio),x.lightMap&&(b.lightMap.value=x.lightMap,b.lightMapIntensity.value=x.lightMapIntensity,t(x.lightMap,b.lightMapTransform)),x.aoMap&&(b.aoMap.value=x.aoMap,b.aoMapIntensity.value=x.aoMapIntensity,t(x.aoMap,b.aoMapTransform))}function o(b,x){b.diffuse.value.copy(x.color),b.opacity.value=x.opacity,x.map&&(b.map.value=x.map,t(x.map,b.mapTransform))}function a(b,x){b.dashSize.value=x.dashSize,b.totalSize.value=x.dashSize+x.gapSize,b.scale.value=x.scale}function l(b,x,_,E){b.diffuse.value.copy(x.color),b.opacity.value=x.opacity,b.size.value=x.size*_,b.scale.value=E*.5,x.map&&(b.map.value=x.map,t(x.map,b.uvTransform)),x.alphaMap&&(b.alphaMap.value=x.alphaMap,t(x.alphaMap,b.alphaMapTransform)),x.alphaTest>0&&(b.alphaTest.value=x.alphaTest)}function c(b,x){b.diffuse.value.copy(x.color),b.opacity.value=x.opacity,b.rotation.value=x.rotation,x.map&&(b.map.value=x.map,t(x.map,b.mapTransform)),x.alphaMap&&(b.alphaMap.value=x.alphaMap,t(x.alphaMap,b.alphaMapTransform)),x.alphaTest>0&&(b.alphaTest.value=x.alphaTest)}function u(b,x){b.specular.value.copy(x.specular),b.shininess.value=Math.max(x.shininess,1e-4)}function d(b,x){x.gradientMap&&(b.gradientMap.value=x.gradientMap)}function f(b,x){b.metalness.value=x.metalness,x.metalnessMap&&(b.metalnessMap.value=x.metalnessMap,t(x.metalnessMap,b.metalnessMapTransform)),b.roughness.value=x.roughness,x.roughnessMap&&(b.roughnessMap.value=x.roughnessMap,t(x.roughnessMap,b.roughnessMapTransform)),x.envMap&&(b.envMapIntensity.value=x.envMapIntensity)}function p(b,x,_){b.ior.value=x.ior,x.sheen>0&&(b.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),b.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(b.sheenColorMap.value=x.sheenColorMap,t(x.sheenColorMap,b.sheenColorMapTransform)),x.sheenRoughnessMap&&(b.sheenRoughnessMap.value=x.sheenRoughnessMap,t(x.sheenRoughnessMap,b.sheenRoughnessMapTransform))),x.clearcoat>0&&(b.clearcoat.value=x.clearcoat,b.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(b.clearcoatMap.value=x.clearcoatMap,t(x.clearcoatMap,b.clearcoatMapTransform)),x.clearcoatRoughnessMap&&(b.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap,t(x.clearcoatRoughnessMap,b.clearcoatRoughnessMapTransform)),x.clearcoatNormalMap&&(b.clearcoatNormalMap.value=x.clearcoatNormalMap,t(x.clearcoatNormalMap,b.clearcoatNormalMapTransform),b.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),x.side===Ma&&b.clearcoatNormalScale.value.negate())),x.dispersion>0&&(b.dispersion.value=x.dispersion),x.iridescence>0&&(b.iridescence.value=x.iridescence,b.iridescenceIOR.value=x.iridescenceIOR,b.iridescenceThicknessMinimum.value=x.iridescenceThicknessRange[0],b.iridescenceThicknessMaximum.value=x.iridescenceThicknessRange[1],x.iridescenceMap&&(b.iridescenceMap.value=x.iridescenceMap,t(x.iridescenceMap,b.iridescenceMapTransform)),x.iridescenceThicknessMap&&(b.iridescenceThicknessMap.value=x.iridescenceThicknessMap,t(x.iridescenceThicknessMap,b.iridescenceThicknessMapTransform))),x.transmission>0&&(b.transmission.value=x.transmission,b.transmissionSamplerMap.value=_.texture,b.transmissionSamplerSize.value.set(_.width,_.height),x.transmissionMap&&(b.transmissionMap.value=x.transmissionMap,t(x.transmissionMap,b.transmissionMapTransform)),b.thickness.value=x.thickness,x.thicknessMap&&(b.thicknessMap.value=x.thicknessMap,t(x.thicknessMap,b.thicknessMapTransform)),b.attenuationDistance.value=x.attenuationDistance,b.attenuationColor.value.copy(x.attenuationColor)),x.anisotropy>0&&(b.anisotropyVector.value.set(x.anisotropy*Math.cos(x.anisotropyRotation),x.anisotropy*Math.sin(x.anisotropyRotation)),x.anisotropyMap&&(b.anisotropyMap.value=x.anisotropyMap,t(x.anisotropyMap,b.anisotropyMapTransform))),b.specularIntensity.value=x.specularIntensity,b.specularColor.value.copy(x.specularColor),x.specularColorMap&&(b.specularColorMap.value=x.specularColorMap,t(x.specularColorMap,b.specularColorMapTransform)),x.specularIntensityMap&&(b.specularIntensityMap.value=x.specularIntensityMap,t(x.specularIntensityMap,b.specularIntensityMapTransform))}function g(b,x){x.matcap&&(b.matcap.value=x.matcap)}function v(b,x){const _=e.get(x).light;b.referencePosition.value.setFromMatrixPosition(_.matrixWorld),b.nearDistance.value=_.shadow.camera.near,b.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function Kge(n,e,t,r){let i={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(_,E){const C=E.program;r.uniformBlockBinding(_,C)}function c(_,E){let C=i[_.id];C===void 0&&(g(_),C=u(_),i[_.id]=C,_.addEventListener("dispose",b));const M=E.program;r.updateUBOMapping(_,M);const R=e.render.frame;s[_.id]!==R&&(f(_),s[_.id]=R)}function u(_){const E=d();_.__bindingPointIndex=E;const C=n.createBuffer(),M=_.__size,R=_.usage;return n.bindBuffer(n.UNIFORM_BUFFER,C),n.bufferData(n.UNIFORM_BUFFER,M,R),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,E,C),C}function d(){for(let _=0;_<a;_++)if(o.indexOf(_)===-1)return o.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(_){const E=i[_.id],C=_.uniforms,M=_.__cache;n.bindBuffer(n.UNIFORM_BUFFER,E);for(let R=0,L=C.length;R<L;R++){const B=Array.isArray(C[R])?C[R]:[C[R]];for(let N=0,I=B.length;N<I;N++){const D=B[N];if(p(D,R,N,M)===!0){const P=D.__offset,G=Array.isArray(D.value)?D.value:[D.value];let W=0;for(let q=0;q<G.length;q++){const z=G[q],J=v(z);typeof z=="number"||typeof z=="boolean"?(D.__data[0]=z,n.bufferSubData(n.UNIFORM_BUFFER,P+W,D.__data)):z.isMatrix3?(D.__data[0]=z.elements[0],D.__data[1]=z.elements[1],D.__data[2]=z.elements[2],D.__data[3]=0,D.__data[4]=z.elements[3],D.__data[5]=z.elements[4],D.__data[6]=z.elements[5],D.__data[7]=0,D.__data[8]=z.elements[6],D.__data[9]=z.elements[7],D.__data[10]=z.elements[8],D.__data[11]=0):(z.toArray(D.__data,W),W+=J.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,P,D.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function p(_,E,C,M){const R=_.value,L=E+"_"+C;if(M[L]===void 0)return typeof R=="number"||typeof R=="boolean"?M[L]=R:M[L]=R.clone(),!0;{const B=M[L];if(typeof R=="number"||typeof R=="boolean"){if(B!==R)return M[L]=R,!0}else if(B.equals(R)===!1)return B.copy(R),!0}return!1}function g(_){const E=_.uniforms;let C=0;const M=16;for(let L=0,B=E.length;L<B;L++){const N=Array.isArray(E[L])?E[L]:[E[L]];for(let I=0,D=N.length;I<D;I++){const P=N[I],G=Array.isArray(P.value)?P.value:[P.value];for(let W=0,q=G.length;W<q;W++){const z=G[W],J=v(z),Q=C%M,Y=Q%J.boundary,X=Q+Y;C+=Y,X!==0&&M-X<J.storage&&(C+=M-X),P.__data=new Float32Array(J.storage/Float32Array.BYTES_PER_ELEMENT),P.__offset=C,C+=J.storage}}}const R=C%M;return R>0&&(C+=M-R),_.__size=C,_.__cache={},this}function v(_){const E={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(E.boundary=4,E.storage=4):_.isVector2?(E.boundary=8,E.storage=8):_.isVector3||_.isColor?(E.boundary=16,E.storage=12):_.isVector4?(E.boundary=16,E.storage=16):_.isMatrix3?(E.boundary=48,E.storage=48):_.isMatrix4?(E.boundary=64,E.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),E}function b(_){const E=_.target;E.removeEventListener("dispose",b);const C=o.indexOf(E.__bindingPointIndex);o.splice(C,1),n.deleteBuffer(i[E.id]),delete i[E.id],delete s[E.id]}function x(){for(const _ in i)n.deleteBuffer(i[_]);o=[],i={},s={}}return{bind:l,update:c,dispose:x}}class BI{constructor(e={}){const{canvas:t=Uq(),context:r=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reversedDepthBuffer:f=!1}=e;this.isWebGLRenderer=!0;let p;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=r.getContextAttributes().alpha}else p=o;const g=new Uint32Array(4),v=new Int32Array(4);let b=null,x=null;const _=[],E=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=mf,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const C=this;let M=!1;this._outputColorSpace=Aa;let R=0,L=0,B=null,N=-1,I=null;const D=new Hr,P=new Hr;let G=null;const W=new rn(0);let q=0,z=t.width,J=t.height,Q=1,Y=null,X=null;const te=new Hr(0,0,z,J),ne=new Hr(0,0,z,J);let le=!1;const ye=new k1;let ue=!1,be=!1;const xe=new zn,Pe=new ve,ze=new Hr,Ke={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let pt=!1;function dt(){return B===null?Q:1}let pe=r;function Le(se,Se){return t.getContext(se,Se)}try{const se={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${_C}`),t.addEventListener("webglcontextlost",Lt,!1),t.addEventListener("webglcontextrestored",en,!1),t.addEventListener("webglcontextcreationerror",Vt,!1),pe===null){const Se="webgl2";if(pe=Le(Se,se),pe===null)throw Le(Se)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(se){throw console.error("THREE.WebGLRenderer: "+se.message),se}let Ue,Ze,je,lt,st,at,Ut,mt,ce,re,$e,qe,ot,et,Ft,At,Ct,qt,yt,Mt,on,tn,zt,fn;function Te(){Ue=new ame(pe),Ue.init(),tn=new XK(pe,Ue),Ze=new eme(pe,Ue,e,tn),je=new zge(pe,Ue),Ze.reversedDepthBuffer&&f&&je.buffers.depth.setReversed(!0),lt=new ume(pe),st=new Mge,at=new Hge(pe,Ue,je,st,Ze,tn,lt),Ut=new nme(C),mt=new ome(C),ce=new ghe(pe),zt=new Zpe(pe,ce),re=new lme(pe,ce,lt,zt),$e=new hme(pe,re,ce,lt),yt=new dme(pe,Ze,at),At=new tme(st),qe=new Tge(C,Ut,mt,Ue,Ze,zt,At),ot=new qge(C,st),et=new Nge,Ft=new $ge(Ue),qt=new Jpe(C,Ut,mt,je,$e,p,l),Ct=new Pge(C,$e,Ze),fn=new Kge(pe,lt,Ze,je),Mt=new Qpe(pe,Ue,lt),on=new cme(pe,Ue,lt),lt.programs=qe.programs,C.capabilities=Ze,C.extensions=Ue,C.properties=st,C.renderLists=et,C.shadowMap=Ct,C.state=je,C.info=lt}Te();const Xe=new jge(C,pe);this.xr=Xe,this.getContext=function(){return pe},this.getContextAttributes=function(){return pe.getContextAttributes()},this.forceContextLoss=function(){const se=Ue.get("WEBGL_lose_context");se&&se.loseContext()},this.forceContextRestore=function(){const se=Ue.get("WEBGL_lose_context");se&&se.restoreContext()},this.getPixelRatio=function(){return Q},this.setPixelRatio=function(se){se!==void 0&&(Q=se,this.setSize(z,J,!1))},this.getSize=function(se){return se.set(z,J)},this.setSize=function(se,Se,Ae=!0){if(Xe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}z=se,J=Se,t.width=Math.floor(se*Q),t.height=Math.floor(Se*Q),Ae===!0&&(t.style.width=se+"px",t.style.height=Se+"px"),this.setViewport(0,0,se,Se)},this.getDrawingBufferSize=function(se){return se.set(z*Q,J*Q).floor()},this.setDrawingBufferSize=function(se,Se,Ae){z=se,J=Se,Q=Ae,t.width=Math.floor(se*Ae),t.height=Math.floor(Se*Ae),this.setViewport(0,0,se,Se)},this.getCurrentViewport=function(se){return se.copy(D)},this.getViewport=function(se){return se.copy(te)},this.setViewport=function(se,Se,Ae,Me){se.isVector4?te.set(se.x,se.y,se.z,se.w):te.set(se,Se,Ae,Me),je.viewport(D.copy(te).multiplyScalar(Q).round())},this.getScissor=function(se){return se.copy(ne)},this.setScissor=function(se,Se,Ae,Me){se.isVector4?ne.set(se.x,se.y,se.z,se.w):ne.set(se,Se,Ae,Me),je.scissor(P.copy(ne).multiplyScalar(Q).round())},this.getScissorTest=function(){return le},this.setScissorTest=function(se){je.setScissorTest(le=se)},this.setOpaqueSort=function(se){Y=se},this.setTransparentSort=function(se){X=se},this.getClearColor=function(se){return se.copy(qt.getClearColor())},this.setClearColor=function(){qt.setClearColor(...arguments)},this.getClearAlpha=function(){return qt.getClearAlpha()},this.setClearAlpha=function(){qt.setClearAlpha(...arguments)},this.clear=function(se=!0,Se=!0,Ae=!0){let Me=0;if(se){let Ce=!1;if(B!==null){const It=B.texture.format;Ce=It===iI||It===rI||It===TC}if(Ce){const It=B.texture.type,vt=It===zl||It===Cf||It===r1||It===i1||It===tI||It===nI,Tt=qt.getClearColor(),Et=qt.getClearAlpha(),Xt=Tt.r,Qt=Tt.g,Wt=Tt.b;vt?(g[0]=Xt,g[1]=Qt,g[2]=Wt,g[3]=Et,pe.clearBufferuiv(pe.COLOR,0,g)):(v[0]=Xt,v[1]=Qt,v[2]=Wt,v[3]=Et,pe.clearBufferiv(pe.COLOR,0,v))}else Me|=pe.COLOR_BUFFER_BIT}Se&&(Me|=pe.DEPTH_BUFFER_BIT),Ae&&(Me|=pe.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),pe.clear(Me)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Lt,!1),t.removeEventListener("webglcontextrestored",en,!1),t.removeEventListener("webglcontextcreationerror",Vt,!1),qt.dispose(),et.dispose(),Ft.dispose(),st.dispose(),Ut.dispose(),mt.dispose(),$e.dispose(),zt.dispose(),fn.dispose(),qe.dispose(),Xe.dispose(),Xe.removeEventListener("sessionstart",ns),Xe.removeEventListener("sessionend",pi),Si.stop()};function Lt(se){se.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),M=!0}function en(){console.log("THREE.WebGLRenderer: Context Restored."),M=!1;const se=lt.autoReset,Se=Ct.enabled,Ae=Ct.autoUpdate,Me=Ct.needsUpdate,Ce=Ct.type;Te(),lt.autoReset=se,Ct.enabled=Se,Ct.autoUpdate=Ae,Ct.needsUpdate=Me,Ct.type=Ce}function Vt(se){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",se.statusMessage)}function Ot(se){const Se=se.target;Se.removeEventListener("dispose",Ot),un(Se)}function un(se){In(se),st.remove(se)}function In(se){const Se=st.get(se).programs;Se!==void 0&&(Se.forEach(function(Ae){qe.releaseProgram(Ae)}),se.isShaderMaterial&&qe.releaseShaderCache(se))}this.renderBufferDirect=function(se,Se,Ae,Me,Ce,It){Se===null&&(Se=Ke);const vt=Ce.isMesh&&Ce.matrixWorld.determinant()<0,Tt=me(se,Se,Ae,Me,Ce);je.setMaterial(Me,vt);let Et=Ae.index,Xt=1;if(Me.wireframe===!0){if(Et=re.getWireframeAttribute(Ae),Et===void 0)return;Xt=2}const Qt=Ae.drawRange,Wt=Ae.attributes.position;let bn=Qt.start*Xt,Hn=(Qt.start+Qt.count)*Xt;It!==null&&(bn=Math.max(bn,It.start*Xt),Hn=Math.min(Hn,(It.start+It.count)*Xt)),Et!==null?(bn=Math.max(bn,0),Hn=Math.min(Hn,Et.count)):Wt!=null&&(bn=Math.max(bn,0),Hn=Math.min(Hn,Wt.count));const On=Hn-bn;if(On<0||On===1/0)return;zt.setup(Ce,Me,Tt,Ae,Et);let ar,yn=Mt;if(Et!==null&&(ar=ce.get(Et),yn=on,yn.setIndex(ar)),Ce.isMesh)Me.wireframe===!0?(je.setLineWidth(Me.wireframeLinewidth*dt()),yn.setMode(pe.LINES)):yn.setMode(pe.TRIANGLES);else if(Ce.isLine){let ln=Me.linewidth;ln===void 0&&(ln=1),je.setLineWidth(ln*dt()),Ce.isLineSegments?yn.setMode(pe.LINES):Ce.isLineLoop?yn.setMode(pe.LINE_LOOP):yn.setMode(pe.LINE_STRIP)}else Ce.isPoints?yn.setMode(pe.POINTS):Ce.isSprite&&yn.setMode(pe.TRIANGLES);if(Ce.isBatchedMesh)if(Ce._multiDrawInstances!==null)Lx("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),yn.renderMultiDrawInstances(Ce._multiDrawStarts,Ce._multiDrawCounts,Ce._multiDrawCount,Ce._multiDrawInstances);else if(Ue.get("WEBGL_multi_draw"))yn.renderMultiDraw(Ce._multiDrawStarts,Ce._multiDrawCounts,Ce._multiDrawCount);else{const ln=Ce._multiDrawStarts,Rr=Ce._multiDrawCounts,Jn=Ce._multiDrawCount,Kr=Et?ce.get(Et).bytesPerElement:1,cr=st.get(Me).currentProgram.getUniforms();for(let jn=0;jn<Jn;jn++)cr.setValue(pe,"_gl_DrawID",jn),yn.render(ln[jn]/Kr,Rr[jn])}else if(Ce.isInstancedMesh)yn.renderInstances(bn,On,Ce.count);else if(Ae.isInstancedBufferGeometry){const ln=Ae._maxInstanceCount!==void 0?Ae._maxInstanceCount:1/0,Rr=Math.min(Ae.instanceCount,ln);yn.renderInstances(bn,On,Rr)}else yn.render(bn,On)};function Tr(se,Se,Ae){se.transparent===!0&&se.side===Zc&&se.forceSinglePass===!1?(se.side=Ma,se.needsUpdate=!0,Fs(se,Se,Ae),se.side=wf,se.needsUpdate=!0,Fs(se,Se,Ae),se.side=Zc):Fs(se,Se,Ae)}this.compile=function(se,Se,Ae=null){Ae===null&&(Ae=se),x=Ft.get(Ae),x.init(Se),E.push(x),Ae.traverseVisible(function(Ce){Ce.isLight&&Ce.layers.test(Se.layers)&&(x.pushLight(Ce),Ce.castShadow&&x.pushShadow(Ce))}),se!==Ae&&se.traverseVisible(function(Ce){Ce.isLight&&Ce.layers.test(Se.layers)&&(x.pushLight(Ce),Ce.castShadow&&x.pushShadow(Ce))}),x.setupLights();const Me=new Set;return se.traverse(function(Ce){if(!(Ce.isMesh||Ce.isPoints||Ce.isLine||Ce.isSprite))return;const It=Ce.material;if(It)if(Array.isArray(It))for(let vt=0;vt<It.length;vt++){const Tt=It[vt];Tr(Tt,Ae,Ce),Me.add(Tt)}else Tr(It,Ae,Ce),Me.add(It)}),x=E.pop(),Me},this.compileAsync=function(se,Se,Ae=null){const Me=this.compile(se,Se,Ae);return new Promise(Ce=>{function It(){if(Me.forEach(function(vt){st.get(vt).currentProgram.isReady()&&Me.delete(vt)}),Me.size===0){Ce(se);return}setTimeout(It,10)}Ue.get("KHR_parallel_shader_compile")!==null?It():setTimeout(It,10)})};let lr=null;function to(se){lr&&lr(se)}function ns(){Si.stop()}function pi(){Si.start()}const Si=new HK;Si.setAnimationLoop(to),typeof self<"u"&&Si.setContext(self),this.setAnimationLoop=function(se){lr=se,Xe.setAnimationLoop(se),se===null?Si.stop():Si.start()},Xe.addEventListener("sessionstart",ns),Xe.addEventListener("sessionend",pi),this.render=function(se,Se){if(Se!==void 0&&Se.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(M===!0)return;if(se.matrixWorldAutoUpdate===!0&&se.updateMatrixWorld(),Se.parent===null&&Se.matrixWorldAutoUpdate===!0&&Se.updateMatrixWorld(),Xe.enabled===!0&&Xe.isPresenting===!0&&(Xe.cameraAutoUpdate===!0&&Xe.updateCamera(Se),Se=Xe.getCamera()),se.isScene===!0&&se.onBeforeRender(C,se,Se,B),x=Ft.get(se,E.length),x.init(Se),E.push(x),xe.multiplyMatrices(Se.projectionMatrix,Se.matrixWorldInverse),ye.setFromProjectionMatrix(xe,tu,Se.reversedDepth),be=this.localClippingEnabled,ue=At.init(this.clippingPlanes,be),b=et.get(se,_.length),b.init(),_.push(b),Xe.enabled===!0&&Xe.isPresenting===!0){const It=C.xr.getDepthSensingMesh();It!==null&&Ri(It,Se,-1/0,C.sortObjects)}Ri(se,Se,0,C.sortObjects),b.finish(),C.sortObjects===!0&&b.sort(Y,X),pt=Xe.enabled===!1||Xe.isPresenting===!1||Xe.hasDepthSensing()===!1,pt&&qt.addToRenderList(b,se),this.info.render.frame++,ue===!0&&At.beginShadows();const Ae=x.state.shadowsArray;Ct.render(Ae,se,Se),ue===!0&&At.endShadows(),this.info.autoReset===!0&&this.info.reset();const Me=b.opaque,Ce=b.transmissive;if(x.setupLights(),Se.isArrayCamera){const It=Se.cameras;if(Ce.length>0)for(let vt=0,Tt=It.length;vt<Tt;vt++){const Et=It[vt];Fa(Me,Ce,se,Et)}pt&&qt.render(se);for(let vt=0,Tt=It.length;vt<Tt;vt++){const Et=It[vt];as(b,se,Et,Et.viewport)}}else Ce.length>0&&Fa(Me,Ce,se,Se),pt&&qt.render(se),as(b,se,Se);B!==null&&L===0&&(at.updateMultisampleRenderTarget(B),at.updateRenderTargetMipmap(B)),se.isScene===!0&&se.onAfterRender(C,se,Se),zt.resetDefaultState(),N=-1,I=null,E.pop(),E.length>0?(x=E[E.length-1],ue===!0&&At.setGlobalState(C.clippingPlanes,x.state.camera)):x=null,_.pop(),_.length>0?b=_[_.length-1]:b=null};function Ri(se,Se,Ae,Me){if(se.visible===!1)return;if(se.layers.test(Se.layers)){if(se.isGroup)Ae=se.renderOrder;else if(se.isLOD)se.autoUpdate===!0&&se.update(Se);else if(se.isLight)x.pushLight(se),se.castShadow&&x.pushShadow(se);else if(se.isSprite){if(!se.frustumCulled||ye.intersectsSprite(se)){Me&&ze.setFromMatrixPosition(se.matrixWorld).applyMatrix4(xe);const vt=$e.update(se),Tt=se.material;Tt.visible&&b.push(se,vt,Tt,Ae,ze.z,null)}}else if((se.isMesh||se.isLine||se.isPoints)&&(!se.frustumCulled||ye.intersectsObject(se))){const vt=$e.update(se),Tt=se.material;if(Me&&(se.boundingSphere!==void 0?(se.boundingSphere===null&&se.computeBoundingSphere(),ze.copy(se.boundingSphere.center)):(vt.boundingSphere===null&&vt.computeBoundingSphere(),ze.copy(vt.boundingSphere.center)),ze.applyMatrix4(se.matrixWorld).applyMatrix4(xe)),Array.isArray(Tt)){const Et=vt.groups;for(let Xt=0,Qt=Et.length;Xt<Qt;Xt++){const Wt=Et[Xt],bn=Tt[Wt.materialIndex];bn&&bn.visible&&b.push(se,vt,bn,Ae,ze.z,Wt)}}else Tt.visible&&b.push(se,vt,Tt,Ae,ze.z,null)}}const It=se.children;for(let vt=0,Tt=It.length;vt<Tt;vt++)Ri(It[vt],Se,Ae,Me)}function as(se,Se,Ae,Me){const Ce=se.opaque,It=se.transmissive,vt=se.transparent;x.setupLightsView(Ae),ue===!0&&At.setGlobalState(C.clippingPlanes,Ae),Me&&je.viewport(D.copy(Me)),Ce.length>0&&vr(Ce,Se,Ae),It.length>0&&vr(It,Se,Ae),vt.length>0&&vr(vt,Se,Ae),je.buffers.depth.setTest(!0),je.buffers.depth.setMask(!0),je.buffers.color.setMask(!0),je.setPolygonOffset(!1)}function Fa(se,Se,Ae,Me){if((Ae.isScene===!0?Ae.overrideMaterial:null)!==null)return;x.state.transmissionRenderTarget[Me.id]===void 0&&(x.state.transmissionRenderTarget[Me.id]=new Ec(1,1,{generateMipmaps:!0,type:Ue.has("EXT_color_buffer_half_float")||Ue.has("EXT_color_buffer_float")?Xs:zl,minFilter:Hu,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Qr.workingColorSpace}));const It=x.state.transmissionRenderTarget[Me.id],vt=Me.viewport||D;It.setSize(vt.z*C.transmissionResolutionScale,vt.w*C.transmissionResolutionScale);const Tt=C.getRenderTarget(),Et=C.getActiveCubeFace(),Xt=C.getActiveMipmapLevel();C.setRenderTarget(It),C.getClearColor(W),q=C.getClearAlpha(),q<1&&C.setClearColor(16777215,.5),C.clear(),pt&&qt.render(Ae);const Qt=C.toneMapping;C.toneMapping=mf;const Wt=Me.viewport;if(Me.viewport!==void 0&&(Me.viewport=void 0),x.setupLightsView(Me),ue===!0&&At.setGlobalState(C.clippingPlanes,Me),vr(se,Ae,Me),at.updateMultisampleRenderTarget(It),at.updateRenderTargetMipmap(It),Ue.has("WEBGL_multisampled_render_to_texture")===!1){let bn=!1;for(let Hn=0,On=Se.length;Hn<On;Hn++){const ar=Se[Hn],yn=ar.object,ln=ar.geometry,Rr=ar.material,Jn=ar.group;if(Rr.side===Zc&&yn.layers.test(Me.layers)){const Kr=Rr.side;Rr.side=Ma,Rr.needsUpdate=!0,Nn(yn,Ae,Me,ln,Rr,Jn),Rr.side=Kr,Rr.needsUpdate=!0,bn=!0}}bn===!0&&(at.updateMultisampleRenderTarget(It),at.updateRenderTargetMipmap(It))}C.setRenderTarget(Tt,Et,Xt),C.setClearColor(W,q),Wt!==void 0&&(Me.viewport=Wt),C.toneMapping=Qt}function vr(se,Se,Ae){const Me=Se.isScene===!0?Se.overrideMaterial:null;for(let Ce=0,It=se.length;Ce<It;Ce++){const vt=se[Ce],Tt=vt.object,Et=vt.geometry,Xt=vt.group;let Qt=vt.material;Qt.allowOverride===!0&&Me!==null&&(Qt=Me),Tt.layers.test(Ae.layers)&&Nn(Tt,Se,Ae,Et,Qt,Xt)}}function Nn(se,Se,Ae,Me,Ce,It){se.onBeforeRender(C,Se,Ae,Me,Ce,It),se.modelViewMatrix.multiplyMatrices(Ae.matrixWorldInverse,se.matrixWorld),se.normalMatrix.getNormalMatrix(se.modelViewMatrix),Ce.onBeforeRender(C,Se,Ae,Me,se,It),Ce.transparent===!0&&Ce.side===Zc&&Ce.forceSinglePass===!1?(Ce.side=Ma,Ce.needsUpdate=!0,C.renderBufferDirect(Ae,Se,Me,Ce,se,It),Ce.side=wf,Ce.needsUpdate=!0,C.renderBufferDirect(Ae,Se,Me,Ce,se,It),Ce.side=Zc):C.renderBufferDirect(Ae,Se,Me,Ce,se,It),se.onAfterRender(C,Se,Ae,Me,Ce,It)}function Fs(se,Se,Ae){Se.isScene!==!0&&(Se=Ke);const Me=st.get(se),Ce=x.state.lights,It=x.state.shadowsArray,vt=Ce.state.version,Tt=qe.getParameters(se,Ce.state,It,Se,Ae),Et=qe.getProgramCacheKey(Tt);let Xt=Me.programs;Me.environment=se.isMeshStandardMaterial?Se.environment:null,Me.fog=Se.fog,Me.envMap=(se.isMeshStandardMaterial?mt:Ut).get(se.envMap||Me.environment),Me.envMapRotation=Me.environment!==null&&se.envMap===null?Se.environmentRotation:se.envMapRotation,Xt===void 0&&(se.addEventListener("dispose",Ot),Xt=new Map,Me.programs=Xt);let Qt=Xt.get(Et);if(Qt!==void 0){if(Me.currentProgram===Qt&&Me.lightsStateVersion===vt)return oe(se,Tt),Qt}else Tt.uniforms=qe.getUniforms(se),se.onBeforeCompile(Tt,C),Qt=qe.acquireProgram(Tt,Et),Xt.set(Et,Qt),Me.uniforms=Tt.uniforms;const Wt=Me.uniforms;return(!se.isShaderMaterial&&!se.isRawShaderMaterial||se.clipping===!0)&&(Wt.clippingPlanes=At.uniform),oe(se,Tt),Me.needsLights=nt(se),Me.lightsStateVersion=vt,Me.needsLights&&(Wt.ambientLightColor.value=Ce.state.ambient,Wt.lightProbe.value=Ce.state.probe,Wt.directionalLights.value=Ce.state.directional,Wt.directionalLightShadows.value=Ce.state.directionalShadow,Wt.spotLights.value=Ce.state.spot,Wt.spotLightShadows.value=Ce.state.spotShadow,Wt.rectAreaLights.value=Ce.state.rectArea,Wt.ltc_1.value=Ce.state.rectAreaLTC1,Wt.ltc_2.value=Ce.state.rectAreaLTC2,Wt.pointLights.value=Ce.state.point,Wt.pointLightShadows.value=Ce.state.pointShadow,Wt.hemisphereLights.value=Ce.state.hemi,Wt.directionalShadowMap.value=Ce.state.directionalShadowMap,Wt.directionalShadowMatrix.value=Ce.state.directionalShadowMatrix,Wt.spotShadowMap.value=Ce.state.spotShadowMap,Wt.spotLightMatrix.value=Ce.state.spotLightMatrix,Wt.spotLightMap.value=Ce.state.spotLightMap,Wt.pointShadowMap.value=Ce.state.pointShadowMap,Wt.pointShadowMatrix.value=Ce.state.pointShadowMatrix),Me.currentProgram=Qt,Me.uniformsList=null,Qt}function ci(se){if(se.uniformsList===null){const Se=se.currentProgram.getUniforms();se.uniformsList=xM.seqWithValue(Se.seq,se.uniforms)}return se.uniformsList}function oe(se,Se){const Ae=st.get(se);Ae.outputColorSpace=Se.outputColorSpace,Ae.batching=Se.batching,Ae.batchingColor=Se.batchingColor,Ae.instancing=Se.instancing,Ae.instancingColor=Se.instancingColor,Ae.instancingMorph=Se.instancingMorph,Ae.skinning=Se.skinning,Ae.morphTargets=Se.morphTargets,Ae.morphNormals=Se.morphNormals,Ae.morphColors=Se.morphColors,Ae.morphTargetsCount=Se.morphTargetsCount,Ae.numClippingPlanes=Se.numClippingPlanes,Ae.numIntersection=Se.numClipIntersection,Ae.vertexAlphas=Se.vertexAlphas,Ae.vertexTangents=Se.vertexTangents,Ae.toneMapping=Se.toneMapping}function me(se,Se,Ae,Me,Ce){Se.isScene!==!0&&(Se=Ke),at.resetTextureUnits();const It=Se.fog,vt=Me.isMeshStandardMaterial?Se.environment:null,Tt=B===null?C.outputColorSpace:B.isXRRenderTarget===!0?B.texture.colorSpace:Yu,Et=(Me.isMeshStandardMaterial?mt:Ut).get(Me.envMap||vt),Xt=Me.vertexColors===!0&&!!Ae.attributes.color&&Ae.attributes.color.itemSize===4,Qt=!!Ae.attributes.tangent&&(!!Me.normalMap||Me.anisotropy>0),Wt=!!Ae.morphAttributes.position,bn=!!Ae.morphAttributes.normal,Hn=!!Ae.morphAttributes.color;let On=mf;Me.toneMapped&&(B===null||B.isXRRenderTarget===!0)&&(On=C.toneMapping);const ar=Ae.morphAttributes.position||Ae.morphAttributes.normal||Ae.morphAttributes.color,yn=ar!==void 0?ar.length:0,ln=st.get(Me),Rr=x.state.lights;if(ue===!0&&(be===!0||se!==I)){const Sr=se===I&&Me.id===N;At.setState(Me,se,Sr)}let Jn=!1;Me.version===ln.__version?(ln.needsLights&&ln.lightsStateVersion!==Rr.state.version||ln.outputColorSpace!==Tt||Ce.isBatchedMesh&&ln.batching===!1||!Ce.isBatchedMesh&&ln.batching===!0||Ce.isBatchedMesh&&ln.batchingColor===!0&&Ce.colorTexture===null||Ce.isBatchedMesh&&ln.batchingColor===!1&&Ce.colorTexture!==null||Ce.isInstancedMesh&&ln.instancing===!1||!Ce.isInstancedMesh&&ln.instancing===!0||Ce.isSkinnedMesh&&ln.skinning===!1||!Ce.isSkinnedMesh&&ln.skinning===!0||Ce.isInstancedMesh&&ln.instancingColor===!0&&Ce.instanceColor===null||Ce.isInstancedMesh&&ln.instancingColor===!1&&Ce.instanceColor!==null||Ce.isInstancedMesh&&ln.instancingMorph===!0&&Ce.morphTexture===null||Ce.isInstancedMesh&&ln.instancingMorph===!1&&Ce.morphTexture!==null||ln.envMap!==Et||Me.fog===!0&&ln.fog!==It||ln.numClippingPlanes!==void 0&&(ln.numClippingPlanes!==At.numPlanes||ln.numIntersection!==At.numIntersection)||ln.vertexAlphas!==Xt||ln.vertexTangents!==Qt||ln.morphTargets!==Wt||ln.morphNormals!==bn||ln.morphColors!==Hn||ln.toneMapping!==On||ln.morphTargetsCount!==yn)&&(Jn=!0):(Jn=!0,ln.__version=Me.version);let Kr=ln.currentProgram;Jn===!0&&(Kr=Fs(Me,Se,Ce));let cr=!1,jn=!1,Zn=!1;const Mn=Kr.getUniforms(),Wr=ln.uniforms;if(je.useProgram(Kr.program)&&(cr=!0,jn=!0,Zn=!0),Me.id!==N&&(N=Me.id,jn=!0),cr||I!==se){je.buffers.depth.getReversed()&&se.reversedDepth!==!0&&(se._reversedDepth=!0,se.updateProjectionMatrix()),Mn.setValue(pe,"projectionMatrix",se.projectionMatrix),Mn.setValue(pe,"viewMatrix",se.matrixWorldInverse);const _i=Mn.map.cameraPosition;_i!==void 0&&_i.setValue(pe,Pe.setFromMatrixPosition(se.matrixWorld)),Ze.logarithmicDepthBuffer&&Mn.setValue(pe,"logDepthBufFC",2/(Math.log(se.far+1)/Math.LN2)),(Me.isMeshPhongMaterial||Me.isMeshToonMaterial||Me.isMeshLambertMaterial||Me.isMeshBasicMaterial||Me.isMeshStandardMaterial||Me.isShaderMaterial)&&Mn.setValue(pe,"isOrthographic",se.isOrthographicCamera===!0),I!==se&&(I=se,jn=!0,Zn=!0)}if(Ce.isSkinnedMesh){Mn.setOptional(pe,Ce,"bindMatrix"),Mn.setOptional(pe,Ce,"bindMatrixInverse");const Sr=Ce.skeleton;Sr&&(Sr.boneTexture===null&&Sr.computeBoneTexture(),Mn.setValue(pe,"boneTexture",Sr.boneTexture,at))}Ce.isBatchedMesh&&(Mn.setOptional(pe,Ce,"batchingTexture"),Mn.setValue(pe,"batchingTexture",Ce._matricesTexture,at),Mn.setOptional(pe,Ce,"batchingIdTexture"),Mn.setValue(pe,"batchingIdTexture",Ce._indirectTexture,at),Mn.setOptional(pe,Ce,"batchingColorTexture"),Ce._colorsTexture!==null&&Mn.setValue(pe,"batchingColorTexture",Ce._colorsTexture,at));const wi=Ae.morphAttributes;if((wi.position!==void 0||wi.normal!==void 0||wi.color!==void 0)&&yt.update(Ce,Ae,Kr),(jn||ln.receiveShadow!==Ce.receiveShadow)&&(ln.receiveShadow=Ce.receiveShadow,Mn.setValue(pe,"receiveShadow",Ce.receiveShadow)),Me.isMeshGouraudMaterial&&Me.envMap!==null&&(Wr.envMap.value=Et,Wr.flipEnvMap.value=Et.isCubeTexture&&Et.isRenderTargetTexture===!1?-1:1),Me.isMeshStandardMaterial&&Me.envMap===null&&Se.environment!==null&&(Wr.envMapIntensity.value=Se.environmentIntensity),jn&&(Mn.setValue(pe,"toneMappingExposure",C.toneMappingExposure),ln.needsLights&&Oe(Wr,Zn),It&&Me.fog===!0&&ot.refreshFogUniforms(Wr,It),ot.refreshMaterialUniforms(Wr,Me,Q,J,x.state.transmissionRenderTarget[se.id]),xM.upload(pe,ci(ln),Wr,at)),Me.isShaderMaterial&&Me.uniformsNeedUpdate===!0&&(xM.upload(pe,ci(ln),Wr,at),Me.uniformsNeedUpdate=!1),Me.isSpriteMaterial&&Mn.setValue(pe,"center",Ce.center),Mn.setValue(pe,"modelViewMatrix",Ce.modelViewMatrix),Mn.setValue(pe,"normalMatrix",Ce.normalMatrix),Mn.setValue(pe,"modelMatrix",Ce.matrixWorld),Me.isShaderMaterial||Me.isRawShaderMaterial){const Sr=Me.uniformsGroups;for(let _i=0,ad=Sr.length;_i<ad;_i++){const ps=Sr[_i];fn.update(ps,Kr),fn.bind(ps,Kr)}}return Kr}function Oe(se,Se){se.ambientLightColor.needsUpdate=Se,se.lightProbe.needsUpdate=Se,se.directionalLights.needsUpdate=Se,se.directionalLightShadows.needsUpdate=Se,se.pointLights.needsUpdate=Se,se.pointLightShadows.needsUpdate=Se,se.spotLights.needsUpdate=Se,se.spotLightShadows.needsUpdate=Se,se.rectAreaLights.needsUpdate=Se,se.hemisphereLights.needsUpdate=Se}function nt(se){return se.isMeshLambertMaterial||se.isMeshToonMaterial||se.isMeshPhongMaterial||se.isMeshStandardMaterial||se.isShadowMaterial||se.isShaderMaterial&&se.lights===!0}this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return L},this.getRenderTarget=function(){return B},this.setRenderTargetTextures=function(se,Se,Ae){const Me=st.get(se);Me.__autoAllocateDepthBuffer=se.resolveDepthBuffer===!1,Me.__autoAllocateDepthBuffer===!1&&(Me.__useRenderToTexture=!1),st.get(se.texture).__webglTexture=Se,st.get(se.depthTexture).__webglTexture=Me.__autoAllocateDepthBuffer?void 0:Ae,Me.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(se,Se){const Ae=st.get(se);Ae.__webglFramebuffer=Se,Ae.__useDefaultFramebuffer=Se===void 0};const ct=pe.createFramebuffer();this.setRenderTarget=function(se,Se=0,Ae=0){B=se,R=Se,L=Ae;let Me=!0,Ce=null,It=!1,vt=!1;if(se){const Et=st.get(se);if(Et.__useDefaultFramebuffer!==void 0)je.bindFramebuffer(pe.FRAMEBUFFER,null),Me=!1;else if(Et.__webglFramebuffer===void 0)at.setupRenderTarget(se);else if(Et.__hasExternalTextures)at.rebindTextures(se,st.get(se.texture).__webglTexture,st.get(se.depthTexture).__webglTexture);else if(se.depthBuffer){const Wt=se.depthTexture;if(Et.__boundDepthTexture!==Wt){if(Wt!==null&&st.has(Wt)&&(se.width!==Wt.image.width||se.height!==Wt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");at.setupDepthRenderbuffer(se)}}const Xt=se.texture;(Xt.isData3DTexture||Xt.isDataArrayTexture||Xt.isCompressedArrayTexture)&&(vt=!0);const Qt=st.get(se).__webglFramebuffer;se.isWebGLCubeRenderTarget?(Array.isArray(Qt[Se])?Ce=Qt[Se][Ae]:Ce=Qt[Se],It=!0):se.samples>0&&at.useMultisampledRTT(se)===!1?Ce=st.get(se).__webglMultisampledFramebuffer:Array.isArray(Qt)?Ce=Qt[Ae]:Ce=Qt,D.copy(se.viewport),P.copy(se.scissor),G=se.scissorTest}else D.copy(te).multiplyScalar(Q).floor(),P.copy(ne).multiplyScalar(Q).floor(),G=le;if(Ae!==0&&(Ce=ct),je.bindFramebuffer(pe.FRAMEBUFFER,Ce)&&Me&&je.drawBuffers(se,Ce),je.viewport(D),je.scissor(P),je.setScissorTest(G),It){const Et=st.get(se.texture);pe.framebufferTexture2D(pe.FRAMEBUFFER,pe.COLOR_ATTACHMENT0,pe.TEXTURE_CUBE_MAP_POSITIVE_X+Se,Et.__webglTexture,Ae)}else if(vt){const Et=Se;for(let Xt=0;Xt<se.textures.length;Xt++){const Qt=st.get(se.textures[Xt]);pe.framebufferTextureLayer(pe.FRAMEBUFFER,pe.COLOR_ATTACHMENT0+Xt,Qt.__webglTexture,Ae,Et)}}else if(se!==null&&Ae!==0){const Et=st.get(se.texture);pe.framebufferTexture2D(pe.FRAMEBUFFER,pe.COLOR_ATTACHMENT0,pe.TEXTURE_2D,Et.__webglTexture,Ae)}N=-1},this.readRenderTargetPixels=function(se,Se,Ae,Me,Ce,It,vt,Tt=0){if(!(se&&se.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Et=st.get(se).__webglFramebuffer;if(se.isWebGLCubeRenderTarget&&vt!==void 0&&(Et=Et[vt]),Et){je.bindFramebuffer(pe.FRAMEBUFFER,Et);try{const Xt=se.textures[Tt],Qt=Xt.format,Wt=Xt.type;if(!Ze.textureFormatReadable(Qt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ze.textureTypeReadable(Wt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Se>=0&&Se<=se.width-Me&&Ae>=0&&Ae<=se.height-Ce&&(se.textures.length>1&&pe.readBuffer(pe.COLOR_ATTACHMENT0+Tt),pe.readPixels(Se,Ae,Me,Ce,tn.convert(Qt),tn.convert(Wt),It))}finally{const Xt=B!==null?st.get(B).__webglFramebuffer:null;je.bindFramebuffer(pe.FRAMEBUFFER,Xt)}}},this.readRenderTargetPixelsAsync=async function(se,Se,Ae,Me,Ce,It,vt,Tt=0){if(!(se&&se.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Et=st.get(se).__webglFramebuffer;if(se.isWebGLCubeRenderTarget&&vt!==void 0&&(Et=Et[vt]),Et)if(Se>=0&&Se<=se.width-Me&&Ae>=0&&Ae<=se.height-Ce){je.bindFramebuffer(pe.FRAMEBUFFER,Et);const Xt=se.textures[Tt],Qt=Xt.format,Wt=Xt.type;if(!Ze.textureFormatReadable(Qt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ze.textureTypeReadable(Wt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const bn=pe.createBuffer();pe.bindBuffer(pe.PIXEL_PACK_BUFFER,bn),pe.bufferData(pe.PIXEL_PACK_BUFFER,It.byteLength,pe.STREAM_READ),se.textures.length>1&&pe.readBuffer(pe.COLOR_ATTACHMENT0+Tt),pe.readPixels(Se,Ae,Me,Ce,tn.convert(Qt),tn.convert(Wt),0);const Hn=B!==null?st.get(B).__webglFramebuffer:null;je.bindFramebuffer(pe.FRAMEBUFFER,Hn);const On=pe.fenceSync(pe.SYNC_GPU_COMMANDS_COMPLETE,0);return pe.flush(),await jce(pe,On,4),pe.bindBuffer(pe.PIXEL_PACK_BUFFER,bn),pe.getBufferSubData(pe.PIXEL_PACK_BUFFER,0,It),pe.deleteBuffer(bn),pe.deleteSync(On),It}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(se,Se=null,Ae=0){const Me=Math.pow(2,-Ae),Ce=Math.floor(se.image.width*Me),It=Math.floor(se.image.height*Me),vt=Se!==null?Se.x:0,Tt=Se!==null?Se.y:0;at.setTexture2D(se,0),pe.copyTexSubImage2D(pe.TEXTURE_2D,Ae,0,0,vt,Tt,Ce,It),je.unbindTexture()};const St=pe.createFramebuffer(),jt=pe.createFramebuffer();this.copyTextureToTexture=function(se,Se,Ae=null,Me=null,Ce=0,It=null){It===null&&(Ce!==0?(Lx("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),It=Ce,Ce=0):It=0);let vt,Tt,Et,Xt,Qt,Wt,bn,Hn,On;const ar=se.isCompressedTexture?se.mipmaps[It]:se.image;if(Ae!==null)vt=Ae.max.x-Ae.min.x,Tt=Ae.max.y-Ae.min.y,Et=Ae.isBox3?Ae.max.z-Ae.min.z:1,Xt=Ae.min.x,Qt=Ae.min.y,Wt=Ae.isBox3?Ae.min.z:0;else{const wi=Math.pow(2,-Ce);vt=Math.floor(ar.width*wi),Tt=Math.floor(ar.height*wi),se.isDataArrayTexture?Et=ar.depth:se.isData3DTexture?Et=Math.floor(ar.depth*wi):Et=1,Xt=0,Qt=0,Wt=0}Me!==null?(bn=Me.x,Hn=Me.y,On=Me.z):(bn=0,Hn=0,On=0);const yn=tn.convert(Se.format),ln=tn.convert(Se.type);let Rr;Se.isData3DTexture?(at.setTexture3D(Se,0),Rr=pe.TEXTURE_3D):Se.isDataArrayTexture||Se.isCompressedArrayTexture?(at.setTexture2DArray(Se,0),Rr=pe.TEXTURE_2D_ARRAY):(at.setTexture2D(Se,0),Rr=pe.TEXTURE_2D),pe.pixelStorei(pe.UNPACK_FLIP_Y_WEBGL,Se.flipY),pe.pixelStorei(pe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Se.premultiplyAlpha),pe.pixelStorei(pe.UNPACK_ALIGNMENT,Se.unpackAlignment);const Jn=pe.getParameter(pe.UNPACK_ROW_LENGTH),Kr=pe.getParameter(pe.UNPACK_IMAGE_HEIGHT),cr=pe.getParameter(pe.UNPACK_SKIP_PIXELS),jn=pe.getParameter(pe.UNPACK_SKIP_ROWS),Zn=pe.getParameter(pe.UNPACK_SKIP_IMAGES);pe.pixelStorei(pe.UNPACK_ROW_LENGTH,ar.width),pe.pixelStorei(pe.UNPACK_IMAGE_HEIGHT,ar.height),pe.pixelStorei(pe.UNPACK_SKIP_PIXELS,Xt),pe.pixelStorei(pe.UNPACK_SKIP_ROWS,Qt),pe.pixelStorei(pe.UNPACK_SKIP_IMAGES,Wt);const Mn=se.isDataArrayTexture||se.isData3DTexture,Wr=Se.isDataArrayTexture||Se.isData3DTexture;if(se.isDepthTexture){const wi=st.get(se),Sr=st.get(Se),_i=st.get(wi.__renderTarget),ad=st.get(Sr.__renderTarget);je.bindFramebuffer(pe.READ_FRAMEBUFFER,_i.__webglFramebuffer),je.bindFramebuffer(pe.DRAW_FRAMEBUFFER,ad.__webglFramebuffer);for(let ps=0;ps<Et;ps++)Mn&&(pe.framebufferTextureLayer(pe.READ_FRAMEBUFFER,pe.COLOR_ATTACHMENT0,st.get(se).__webglTexture,Ce,Wt+ps),pe.framebufferTextureLayer(pe.DRAW_FRAMEBUFFER,pe.COLOR_ATTACHMENT0,st.get(Se).__webglTexture,It,On+ps)),pe.blitFramebuffer(Xt,Qt,vt,Tt,bn,Hn,vt,Tt,pe.DEPTH_BUFFER_BIT,pe.NEAREST);je.bindFramebuffer(pe.READ_FRAMEBUFFER,null),je.bindFramebuffer(pe.DRAW_FRAMEBUFFER,null)}else if(Ce!==0||se.isRenderTargetTexture||st.has(se)){const wi=st.get(se),Sr=st.get(Se);je.bindFramebuffer(pe.READ_FRAMEBUFFER,St),je.bindFramebuffer(pe.DRAW_FRAMEBUFFER,jt);for(let _i=0;_i<Et;_i++)Mn?pe.framebufferTextureLayer(pe.READ_FRAMEBUFFER,pe.COLOR_ATTACHMENT0,wi.__webglTexture,Ce,Wt+_i):pe.framebufferTexture2D(pe.READ_FRAMEBUFFER,pe.COLOR_ATTACHMENT0,pe.TEXTURE_2D,wi.__webglTexture,Ce),Wr?pe.framebufferTextureLayer(pe.DRAW_FRAMEBUFFER,pe.COLOR_ATTACHMENT0,Sr.__webglTexture,It,On+_i):pe.framebufferTexture2D(pe.DRAW_FRAMEBUFFER,pe.COLOR_ATTACHMENT0,pe.TEXTURE_2D,Sr.__webglTexture,It),Ce!==0?pe.blitFramebuffer(Xt,Qt,vt,Tt,bn,Hn,vt,Tt,pe.COLOR_BUFFER_BIT,pe.NEAREST):Wr?pe.copyTexSubImage3D(Rr,It,bn,Hn,On+_i,Xt,Qt,vt,Tt):pe.copyTexSubImage2D(Rr,It,bn,Hn,Xt,Qt,vt,Tt);je.bindFramebuffer(pe.READ_FRAMEBUFFER,null),je.bindFramebuffer(pe.DRAW_FRAMEBUFFER,null)}else Wr?se.isDataTexture||se.isData3DTexture?pe.texSubImage3D(Rr,It,bn,Hn,On,vt,Tt,Et,yn,ln,ar.data):Se.isCompressedArrayTexture?pe.compressedTexSubImage3D(Rr,It,bn,Hn,On,vt,Tt,Et,yn,ar.data):pe.texSubImage3D(Rr,It,bn,Hn,On,vt,Tt,Et,yn,ln,ar):se.isDataTexture?pe.texSubImage2D(pe.TEXTURE_2D,It,bn,Hn,vt,Tt,yn,ln,ar.data):se.isCompressedTexture?pe.compressedTexSubImage2D(pe.TEXTURE_2D,It,bn,Hn,ar.width,ar.height,yn,ar.data):pe.texSubImage2D(pe.TEXTURE_2D,It,bn,Hn,vt,Tt,yn,ln,ar);pe.pixelStorei(pe.UNPACK_ROW_LENGTH,Jn),pe.pixelStorei(pe.UNPACK_IMAGE_HEIGHT,Kr),pe.pixelStorei(pe.UNPACK_SKIP_PIXELS,cr),pe.pixelStorei(pe.UNPACK_SKIP_ROWS,jn),pe.pixelStorei(pe.UNPACK_SKIP_IMAGES,Zn),It===0&&Se.generateMipmaps&&pe.generateMipmap(Rr),je.unbindTexture()},this.copyTextureToTexture3D=function(se,Se,Ae=null,Me=null,Ce=0){return Lx('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(se,Se,Ae,Me,Ce)},this.initRenderTarget=function(se){st.get(se).__webglFramebuffer===void 0&&at.setupRenderTarget(se)},this.initTexture=function(se){se.isCubeTexture?at.setTextureCube(se,0):se.isData3DTexture?at.setTexture3D(se,0):se.isDataArrayTexture||se.isCompressedArrayTexture?at.setTexture2DArray(se,0):at.setTexture2D(se,0),je.unbindTexture()},this.resetState=function(){R=0,L=0,B=null,je.reset(),zt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return tu}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Qr._getDrawingBufferColorSpace(e),t.unpackColorSpace=Qr._getUnpackColorSpace()}}const Yge=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:yP,AddEquation:og,AddOperation:bq,AdditiveAnimationBlendMode:EP,AdditiveBlending:G$,AgXToneMapping:Cq,AlphaFormat:bP,AlwaysCompare:Fq,AlwaysDepth:QM,AlwaysStencilFunc:K$,AmbientLight:ZP,AnimationAction:kK,AnimationClip:p1,AnimationLoader:vde,AnimationMixer:OK,AnimationObjectGroup:zde,AnimationUtils:pde,ArcCurve:Jq,ArrayCamera:NK,ArrowHelper:che,AttachedBindMode:X$,Audio:IK,AudioAnalyser:Ide,AudioContext:QP,AudioListener:Mde,AudioLoader:Ede,AxesHelper:UK,BackSide:Ma,BasicDepthPacking:Rq,BasicShadowMap:QX,BatchedMesh:qq,Bone:dI,BooleanKeyframeTrack:Nv,Box2:Jde,Box3:Ra,Box3Helper:ahe,BoxGeometry:Qp,BoxHelper:ohe,BufferAttribute:ai,BufferGeometry:gr,BufferGeometryLoader:MK,ByteType:QN,Cache:hf,Camera:cI,CameraHelper:PK,CanvasTexture:Lue,CapsuleGeometry:mI,CatmullRomCurve3:Zq,CineonToneMapping:wq,CircleGeometry:gI,ClampToEdgeWrapping:co,Clock:e4,Color:rn,ColorKeyframeTrack:KP,ColorManagement:Qr,CompressedArrayTexture:Bue,CompressedCubeTexture:$ue,CompressedTexture:pI,CompressedTextureLoader:bde,ConeGeometry:kC,ConstantAlphaFactor:gq,ConstantColorFactor:pq,Controls:zK,CubeCamera:Gq,CubeReflectionMapping:_f,CubeRefractionMapping:Eg,CubeTexture:MC,CubeTextureLoader:SK,CubeUVReflectionMapping:I1,CubicBezierCurve:zP,CubicBezierCurve3:Qq,CubicInterpolant:yK,CullFaceBack:V$,CullFaceFront:ZX,CullFaceFrontBack:Yle,CullFaceNone:JX,Curve:fh,CurvePath:tK,CustomBlending:eq,CustomToneMapping:_q,CylinderGeometry:DC,Cylindrical:Yde,Data3DTexture:lI,DataArrayTexture:aI,DataTexture:Jd,DataTextureLoader:RI,DataUtils:Kd,DecrementStencilOp:oce,DecrementWrapStencilOp:lce,DefaultLoadingManager:xK,DepthFormat:s1,DepthStencilFormat:o1,DepthTexture:PP,DetachedBindMode:Aq,DirectionalLight:II,DirectionalLightHelper:FK,DiscreteInterpolant:vK,DodecahedronGeometry:yI,DoubleSide:Zc,DstAlphaFactor:cq,DstColorFactor:dq,DynamicCopyUsage:_ce,DynamicDrawUsage:yce,DynamicReadUsage:xce,EdgesGeometry:Yq,EllipseCurve:vI,EqualCompare:Oq,EqualDepth:tR,EqualStencilFunc:hce,EquirectangularReflectionMapping:t1,EquirectangularRefractionMapping:F_,Euler:Ac,EventDispatcher:kf,ExtrudeGeometry:bI,FileLoader:Na,Float16BufferAttribute:fue,Float32BufferAttribute:An,FloatType:is,Fog:RC,FogExp2:uI,FramebufferTexture:Oue,FrontSide:wf,Frustum:k1,FrustumArray:hI,GLBufferAttribute:Xde,GLSL1:Ece,GLSL3:Y$,GreaterCompare:Bq,GreaterDepth:rR,GreaterEqualCompare:Lq,GreaterEqualDepth:nR,GreaterEqualStencilFunc:gce,GreaterStencilFunc:pce,GridHelper:LK,Group:kp,HalfFloatType:Xs,HemisphereLight:_K,HemisphereLightHelper:ihe,IcosahedronGeometry:OC,ImageBitmapLoader:RK,ImageLoader:j_,ImageUtils:zq,IncrementStencilOp:sce,IncrementWrapStencilOp:ace,InstancedBufferAttribute:rv,InstancedBufferGeometry:TK,InstancedInterleavedBuffer:jde,InstancedMesh:$P,Int16BufferAttribute:due,Int32BufferAttribute:hue,Int8BufferAttribute:lue,IntType:EC,InterleavedBuffer:NC,InterleavedBufferAttribute:Tg,Interpolant:B1,InterpolateDiscrete:a1,InterpolateLinear:l1,InterpolateSmooth:vM,InterpolationSamplingMode:Mce,InterpolationSamplingType:Tce,InvertStencilOp:cce,KeepStencilOp:vy,KeyframeTrack:td,LOD:Xq,LatheGeometry:xI,Layers:d1,LessCompare:kq,LessDepth:eR,LessEqualCompare:TP,LessEqualDepth:nv,LessEqualStencilFunc:fce,LessStencilFunc:dce,Light:Gg,LightProbe:AK,Line:Hp,Line3:ehe,LineBasicMaterial:ol,LineCurve:HP,LineCurve3:eK,LineDashedMaterial:pK,LineLoop:LP,LineSegments:hh,LinearFilter:oi,LinearInterpolant:qP,LinearMipMapLinearFilter:q$,LinearMipMapNearestFilter:Qle,LinearMipmapLinearFilter:Hu,LinearMipmapNearestFilter:$x,LinearSRGBColorSpace:Yu,LinearToneMapping:xq,LinearTransfer:U_,Loader:Oa,LoaderUtils:gg,LoadingManager:MI,LoopOnce:_P,LoopPingPong:Tq,LoopRepeat:CP,MOUSE:Wy,Material:Vo,MaterialLoader:DI,MathUtils:oI,Matrix2:i4,Matrix3:xr,Matrix4:zn,MaxEquation:iq,Mesh:Li,MeshBasicMaterial:bc,MeshDepthMaterial:TI,MeshDistanceMaterial:jP,MeshLambertMaterial:hK,MeshMatcapMaterial:fK,MeshNormalMaterial:dK,MeshPhongMaterial:cK,MeshPhysicalMaterial:ed,MeshStandardMaterial:mg,MeshToonMaterial:uK,MinEquation:rq,MirroredRepeatWrapping:n1,MixOperation:vq,MultiplyBlending:j$,MultiplyOperation:CC,NearestFilter:sa,NearestMipMapLinearFilter:Zle,NearestMipMapNearestFilter:Jle,NearestMipmapLinearFilter:Dy,NearestMipmapNearestFilter:ZN,NeutralToneMapping:Eq,NeverCompare:Dq,NeverDepth:ZM,NeverStencilFunc:uce,NoBlending:pf,NoColorSpace:Rp,NoToneMapping:mf,NormalAnimationBlendMode:sI,NormalBlending:jy,NotEqualCompare:$q,NotEqualDepth:iR,NotEqualStencilFunc:mce,NumberKeyframeTrack:sv,Object3D:ei,ObjectLoader:_de,ObjectSpaceNormalMap:Iq,OctahedronGeometry:BC,OneFactor:oq,OneMinusConstantAlphaFactor:yq,OneMinusConstantColorFactor:mq,OneMinusDstAlphaFactor:uq,OneMinusDstColorFactor:hq,OneMinusSrcAlphaFactor:JM,OneMinusSrcColorFactor:lq,OrthographicCamera:Dv,PCFShadowMap:JN,PCFSoftShadowMap:g_,PMREMGenerator:rL,Path:BR,PerspectiveCamera:So,Plane:Cp,PlaneGeometry:Of,PlaneHelper:lhe,PointLight:JP,PointLightHelper:nhe,Points:FP,PointsMaterial:fI,PolarGridHelper:she,PolyhedronGeometry:Vg,PositionalAudio:Nde,PropertyBinding:ii,PropertyMixer:DK,QuadraticBezierCurve:VP,QuadraticBezierCurve3:GP,Quaternion:_s,QuaternionKeyframeTrack:ov,QuaternionLinearInterpolant:bK,RED_GREEN_RGTC2_Format:RR,RED_RGTC1_Format:wP,REVISION:_C,RGBADepthPacking:Nq,RGBAFormat:uo,RGBAIntegerFormat:iI,RGBA_ASTC_10x10_Format:_R,RGBA_ASTC_10x5_Format:xR,RGBA_ASTC_10x6_Format:SR,RGBA_ASTC_10x8_Format:wR,RGBA_ASTC_12x10_Format:CR,RGBA_ASTC_12x12_Format:ER,RGBA_ASTC_4x4_Format:hR,RGBA_ASTC_5x4_Format:fR,RGBA_ASTC_5x5_Format:pR,RGBA_ASTC_6x5_Format:mR,RGBA_ASTC_6x6_Format:gR,RGBA_ASTC_8x5_Format:yR,RGBA_ASTC_8x6_Format:vR,RGBA_ASTC_8x8_Format:bR,RGBA_BPTC_Format:S_,RGBA_ETC2_EAC_Format:dR,RGBA_PVRTC_2BPPV1_Format:lR,RGBA_PVRTC_4BPPV1_Format:aR,RGBA_S3TC_DXT1_Format:v_,RGBA_S3TC_DXT3_Format:b_,RGBA_S3TC_DXT5_Format:x_,RGBDepthPacking:tce,RGBFormat:xP,RGBIntegerFormat:ece,RGB_BPTC_SIGNED_Format:AR,RGB_BPTC_UNSIGNED_Format:TR,RGB_ETC1_Format:cR,RGB_ETC2_Format:uR,RGB_PVRTC_2BPPV1_Format:oR,RGB_PVRTC_4BPPV1_Format:sR,RGB_S3TC_DXT1_Format:y_,RGDepthPacking:nce,RGFormat:SP,RGIntegerFormat:rI,RawShaderMaterial:lK,Ray:Rv,Raycaster:kI,RectAreaLight:CK,RedFormat:AC,RedIntegerFormat:TC,ReinhardToneMapping:Sq,RenderTarget:RP,RenderTarget3D:Vde,RepeatWrapping:Ag,ReplaceStencilOp:ice,ReverseSubtractEquation:nq,RingGeometry:SI,SIGNED_RED_GREEN_RGTC2_Format:NR,SIGNED_RED_RGTC1_Format:MR,SRGBColorSpace:Aa,SRGBTransfer:$i,Scene:D1,ShaderChunk:hr,ShaderLib:jd,ShaderMaterial:Da,ShadowMaterial:aK,Shape:qy,ShapeGeometry:wI,ShapePath:uhe,ShapeUtils:Yd,ShortType:eI,Skeleton:IC,SkeletonHelper:the,SkinnedMesh:BP,Source:ug,Sphere:oa,SphereGeometry:O1,Spherical:$R,SphericalHarmonics3:EK,SplineCurve:WP,SpotLight:NI,SpotLightHelper:BK,Sprite:jq,SpriteMaterial:OP,SrcAlphaFactor:YM,SrcAlphaSaturateFactor:fq,SrcColorFactor:aq,StaticCopyUsage:wce,StaticDrawUsage:z_,StaticReadUsage:bce,StereoCamera:Ade,StreamCopyUsage:Cce,StreamDrawUsage:vce,StreamReadUsage:Sce,StringKeyframeTrack:Iv,SubtractEquation:tq,SubtractiveBlending:W$,TOUCH:Iy,TangentSpaceNormalMap:Hg,TetrahedronGeometry:_I,Texture:Ti,TextureLoader:wK,TextureUtils:mhe,Timer:qde,TimestampQuery:Ace,TorusGeometry:CI,TorusKnotGeometry:EI,Triangle:yc,TriangleFanDrawMode:IR,TriangleStripDrawMode:AP,TrianglesDrawMode:Mq,TubeGeometry:AI,UVMapping:Cg,Uint16BufferAttribute:NP,Uint32BufferAttribute:IP,Uint8BufferAttribute:cue,Uint8ClampedBufferAttribute:uue,Uniform:r4,UniformsGroup:Wde,UniformsLib:hn,UniformsUtils:DP,UnsignedByteType:zl,UnsignedInt248Type:i1,UnsignedInt5999Type:vP,UnsignedIntType:Cf,UnsignedShort4444Type:tI,UnsignedShort5551Type:nI,UnsignedShortType:r1,VSMShadowMap:Wd,Vector2:Nt,Vector3:ve,Vector4:Hr,VectorKeyframeTrack:av,VideoFrameTexture:kue,VideoTexture:Kq,WebGL3DRenderTarget:Jce,WebGLArrayRenderTarget:Yce,WebGLCoordinateSystem:tu,WebGLCubeRenderTarget:kP,WebGLRenderTarget:Ec,WebGLRenderer:BI,WebGLUtils:XK,WebGPUCoordinateSystem:c1,WebXRController:bM,WireframeGeometry:oK,WrapAroundEnding:P_,ZeroCurvatureEnding:ky,ZeroFactor:sq,ZeroSlopeEnding:Oy,ZeroStencilOp:rce,createCanvasElement:Uq},Symbol.toStringTag,{value:"Module"})),d8={type:"change"},o4={type:"start"},KK={type:"end"},kT=new Rv,h8=new Cp,Jge=Math.cos(70*oI.DEG2RAD),Fo=new ve,cc=2*Math.PI,Xi={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},jO=1e-6;class Zge extends zK{constructor(e,t=null){super(e,t),this.state=Xi.NONE,this.target=new ve,this.cursor=new ve,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Wy.ROTATE,MIDDLE:Wy.DOLLY,RIGHT:Wy.PAN},this.touches={ONE:Iy.ROTATE,TWO:Iy.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new ve,this._lastQuaternion=new _s,this._lastTargetPosition=new ve,this._quat=new _s().setFromUnitVectors(e.up,new ve(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new $R,this._sphericalDelta=new $R,this._scale=1,this._panOffset=new ve,this._rotateStart=new Nt,this._rotateEnd=new Nt,this._rotateDelta=new Nt,this._panStart=new Nt,this._panEnd=new Nt,this._panDelta=new Nt,this._dollyStart=new Nt,this._dollyEnd=new Nt,this._dollyDelta=new Nt,this._dollyDirection=new ve,this._mouse=new Nt,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=e0e.bind(this),this._onPointerDown=Qge.bind(this),this._onPointerUp=t0e.bind(this),this._onContextMenu=l0e.bind(this),this._onMouseWheel=i0e.bind(this),this._onKeyDown=s0e.bind(this),this._onTouchStart=o0e.bind(this),this._onTouchMove=a0e.bind(this),this._onMouseDown=n0e.bind(this),this._onMouseMove=r0e.bind(this),this._interceptControlDown=c0e.bind(this),this._interceptControlUp=u0e.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(d8),this.update(),this.state=Xi.NONE}update(e=null){const t=this.object.position;Fo.copy(t).sub(this.target),Fo.applyQuaternion(this._quat),this._spherical.setFromVector3(Fo),this.autoRotate&&this.state===Xi.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let r=this.minAzimuthAngle,i=this.maxAzimuthAngle;isFinite(r)&&isFinite(i)&&(r<-Math.PI?r+=cc:r>Math.PI&&(r-=cc),i<-Math.PI?i+=cc:i>Math.PI&&(i-=cc),r<=i?this._spherical.theta=Math.max(r,Math.min(i,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(r+i)/2?Math.max(r,this._spherical.theta):Math.min(i,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const o=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=o!=this._spherical.radius}if(Fo.setFromSpherical(this._spherical),Fo.applyQuaternion(this._quatInverse),t.copy(this.target).add(Fo),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let o=null;if(this.object.isPerspectiveCamera){const a=Fo.length();o=this._clampDistance(a*this._scale);const l=a-o;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),s=!!l}else if(this.object.isOrthographicCamera){const a=new ve(this._mouse.x,this._mouse.y,0);a.unproject(this.object);const l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=l!==this.object.zoom;const c=new ve(this._mouse.x,this._mouse.y,0);c.unproject(this.object),this.object.position.sub(c).add(a),this.object.updateMatrixWorld(),o=Fo.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;o!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(o).add(this.object.position):(kT.origin.copy(this.object.position),kT.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(kT.direction))<Jge?this.object.lookAt(this.target):(h8.setFromNormalAndCoplanarPoint(this.object.up,this.target),kT.intersectPlane(h8,this.target))))}else if(this.object.isOrthographicCamera){const o=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),o!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)>jO||8*(1-this._lastQuaternion.dot(this.object.quaternion))>jO||this._lastTargetPosition.distanceToSquared(this.target)>jO?(this.dispatchEvent(d8),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?cc/60*this.autoRotateSpeed*e:cc/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){Fo.setFromMatrixColumn(t,0),Fo.multiplyScalar(-e),this._panOffset.add(Fo)}_panUp(e,t){this.screenSpacePanning===!0?Fo.setFromMatrixColumn(t,1):(Fo.setFromMatrixColumn(t,0),Fo.crossVectors(this.object.up,Fo)),Fo.multiplyScalar(e),this._panOffset.add(Fo)}_pan(e,t){const r=this.domElement;if(this.object.isPerspectiveCamera){const i=this.object.position;Fo.copy(i).sub(this.target);let s=Fo.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*s/r.clientHeight,this.object.matrix),this._panUp(2*t*s/r.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const r=this.domElement.getBoundingClientRect(),i=e-r.left,s=t-r.top,o=r.width,a=r.height;this._mouse.x=i/o*2-1,this._mouse.y=-(s/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(cc*this._rotateDelta.x/t.clientHeight),this._rotateUp(cc*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(cc*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-cc*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(cc*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-cc*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._rotateStart.set(r,i)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._panStart.set(r,i)}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),r=e.pageX-t.x,i=e.pageY-t.y,s=Math.sqrt(r*r+i*i);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),i=.5*(e.pageX+r.x),s=.5*(e.pageY+r.y);this._rotateEnd.set(i,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(cc*this._rotateDelta.x/t.clientHeight),this._rotateUp(cc*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._panEnd.set(r,i)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),r=e.pageX-t.x,i=e.pageY-t.y,s=Math.sqrt(r*r+i*i);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const o=(e.pageX+t.x)*.5,a=(e.pageY+t.y)*.5;this._updateZoomParameters(o,a)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new Nt,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){const t=e.deltaMode,r={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:r.deltaY*=16;break;case 2:r.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(r.deltaY*=10),r}}function Qge(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function e0e(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function t0e(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(KK),this.state=Xi.NONE;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function n0e(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Wy.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=Xi.DOLLY;break;case Wy.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Xi.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Xi.ROTATE}break;case Wy.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Xi.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Xi.PAN}break;default:this.state=Xi.NONE}this.state!==Xi.NONE&&this.dispatchEvent(o4)}function r0e(n){switch(this.state){case Xi.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case Xi.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case Xi.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function i0e(n){this.enabled===!1||this.enableZoom===!1||this.state!==Xi.NONE||(n.preventDefault(),this.dispatchEvent(o4),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(KK))}function s0e(n){this.enabled!==!1&&this._handleKeyDown(n)}function o0e(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case Iy.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=Xi.TOUCH_ROTATE;break;case Iy.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=Xi.TOUCH_PAN;break;default:this.state=Xi.NONE}break;case 2:switch(this.touches.TWO){case Iy.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=Xi.TOUCH_DOLLY_PAN;break;case Iy.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=Xi.TOUCH_DOLLY_ROTATE;break;default:this.state=Xi.NONE}break;default:this.state=Xi.NONE}this.state!==Xi.NONE&&this.dispatchEvent(o4)}function a0e(n){switch(this._trackPointer(n),this.state){case Xi.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case Xi.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case Xi.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case Xi.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=Xi.NONE}}function l0e(n){this.enabled!==!1&&n.preventDefault()}function c0e(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function u0e(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.21.0
 * @author George Michael Brower
 * @license MIT
 */let L1=class SM{constructor(e,t,r,i,s="div"){this.parent=e,this.object=t,this.property=r,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement(s),this.domElement.classList.add("lil-controller"),this.domElement.classList.add(i),this.$name=document.createElement("div"),this.$name.classList.add("lil-name"),SM.nextNameID=SM.nextNameID||0,this.$name.id=`lil-gui-name-${++SM.nextNameID}`,this.$widget=document.createElement("div"),this.$widget.classList.add("lil-widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.domElement.addEventListener("keydown",o=>o.stopPropagation()),this.domElement.addEventListener("keyup",o=>o.stopPropagation()),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(r)}name(e){return this._name=e,this.$name.textContent=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled?this:(this._disabled=e,this.domElement.classList.toggle("lil-disabled",e),this.$disable.toggleAttribute("disabled",e),this)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(e){const t=this.parent.add(this.object,this.property,e);return t.name(this._name),this.destroy(),t}min(e){return this}max(e){return this}step(e){return this}decimals(e){return this}listen(e=!0){return this._listening=e,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const e=this.save();e!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=e}getValue(){return this.object[this.property]}setValue(e){return this.getValue()!==e&&(this.object[this.property]=e,this._callOnChange(),this.updateDisplay()),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}};class d0e extends L1{constructor(e,t,r){super(e,t,r,"lil-boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function sL(n){let e,t;return(e=n.match(/(#|0x)?([a-f0-9]{6})/i))?t=e[2]:(e=n.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?t=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=n.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(t=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),t?"#"+t:!1}const h0e={isPrimitive:!0,match:n=>typeof n=="string",fromHexString:sL,toHexString:sL},X_={isPrimitive:!0,match:n=>typeof n=="number",fromHexString:n=>parseInt(n.substring(1),16),toHexString:n=>"#"+n.toString(16).padStart(6,0)},f0e={isPrimitive:!1,match:n=>Array.isArray(n)||ArrayBuffer.isView(n),fromHexString(n,e,t=1){const r=X_.fromHexString(n);e[0]=(r>>16&255)/255*t,e[1]=(r>>8&255)/255*t,e[2]=(r&255)/255*t},toHexString([n,e,t],r=1){r=255/r;const i=n*r<<16^e*r<<8^t*r<<0;return X_.toHexString(i)}},p0e={isPrimitive:!1,match:n=>Object(n)===n,fromHexString(n,e,t=1){const r=X_.fromHexString(n);e.r=(r>>16&255)/255*t,e.g=(r>>8&255)/255*t,e.b=(r&255)/255*t},toHexString({r:n,g:e,b:t},r=1){r=255/r;const i=n*r<<16^e*r<<8^t*r<<0;return X_.toHexString(i)}},m0e=[h0e,X_,f0e,p0e];function g0e(n){return m0e.find(e=>e.match(n))}class y0e extends L1{constructor(e,t,r,i){super(e,t,r,"lil-color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("lil-display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=g0e(this.initialValue),this._rgbScale=i,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const s=sL(this.$text.value);s&&this._setValueFromHexString(s)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const t=this._format.fromHexString(e);this.setValue(t)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class XO extends L1{constructor(e,t,r){super(e,t,r,"lil-function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",i=>{i.preventDefault(),this.getValue().call(this.object),this._callOnChange()}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class v0e extends L1{constructor(e,t,r,i,s,o){super(e,t,r,"lil-number"),this._initInput(),this.min(i),this.max(s);const a=o!==void 0;this.step(a?o:this._getImplicitStep(),a),this.updateDisplay()}decimals(e){return this._decimals=e,this.updateDisplay(),this}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,t=!0){return this._step=e,this._stepExplicit=t,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let t=(e-this._min)/(this._max-this._min);t=Math.max(0,Math.min(t,1)),this.$fill.style.width=t*100+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?e:e.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),window.matchMedia("(pointer: coarse)").matches&&(this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any")),this.$widget.appendChild(this.$input),this.$disable=this.$input;const t=()=>{let _=parseFloat(this.$input.value);isNaN(_)||(this._stepExplicit&&(_=this._snap(_)),this.setValue(this._clamp(_)))},r=_=>{const E=parseFloat(this.$input.value);isNaN(E)||(this._snapClampSetValue(E+_),this.$input.value=this.getValue())},i=_=>{_.key==="Enter"&&this.$input.blur(),_.code==="ArrowUp"&&(_.preventDefault(),r(this._step*this._arrowKeyMultiplier(_))),_.code==="ArrowDown"&&(_.preventDefault(),r(this._step*this._arrowKeyMultiplier(_)*-1))},s=_=>{this._inputFocused&&(_.preventDefault(),r(this._step*this._normalizeMouseWheel(_)))};let o=!1,a,l,c,u,d;const f=5,p=_=>{a=_.clientX,l=c=_.clientY,o=!0,u=this.getValue(),d=0,window.addEventListener("mousemove",g),window.addEventListener("mouseup",v)},g=_=>{if(o){const E=_.clientX-a,C=_.clientY-l;Math.abs(C)>f?(_.preventDefault(),this.$input.blur(),o=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(E)>f&&v()}if(!o){const E=_.clientY-c;d-=E*this._step*this._arrowKeyMultiplier(_),u+d>this._max?d=this._max-u:u+d<this._min&&(d=this._min-u),this._snapClampSetValue(u+d)}c=_.clientY},v=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",v)},b=()=>{this._inputFocused=!0},x=()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()};this.$input.addEventListener("input",t),this.$input.addEventListener("keydown",i),this.$input.addEventListener("wheel",s,{passive:!1}),this.$input.addEventListener("mousedown",p),this.$input.addEventListener("focus",b),this.$input.addEventListener("blur",x)}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("lil-slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("lil-fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("lil-has-slider");const e=(x,_,E,C,M)=>(x-_)/(E-_)*(M-C)+C,t=x=>{const _=this.$slider.getBoundingClientRect();let E=e(x,_.left,_.right,this._min,this._max);this._snapClampSetValue(E)},r=x=>{this._setDraggingStyle(!0),t(x.clientX),window.addEventListener("mousemove",i),window.addEventListener("mouseup",s)},i=x=>{t(x.clientX)},s=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",s)};let o=!1,a,l;const c=x=>{x.preventDefault(),this._setDraggingStyle(!0),t(x.touches[0].clientX),o=!1},u=x=>{x.touches.length>1||(this._hasScrollBar?(a=x.touches[0].clientX,l=x.touches[0].clientY,o=!0):c(x),window.addEventListener("touchmove",d,{passive:!1}),window.addEventListener("touchend",f))},d=x=>{if(o){const _=x.touches[0].clientX-a,E=x.touches[0].clientY-l;Math.abs(_)>Math.abs(E)?c(x):(window.removeEventListener("touchmove",d),window.removeEventListener("touchend",f))}else x.preventDefault(),t(x.touches[0].clientX)},f=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",d),window.removeEventListener("touchend",f)},p=this._callOnFinishChange.bind(this),g=400;let v;const b=x=>{if(Math.abs(x.deltaX)<Math.abs(x.deltaY)&&this._hasScrollBar)return;x.preventDefault();const E=this._normalizeMouseWheel(x)*this._step;this._snapClampSetValue(this.getValue()+E),this.$input.value=this.getValue(),clearTimeout(v),v=setTimeout(p,g)};this.$slider.addEventListener("mousedown",r),this.$slider.addEventListener("touchstart",u,{passive:!1}),this.$slider.addEventListener("wheel",b,{passive:!1})}_setDraggingStyle(e,t="horizontal"){this.$slider&&this.$slider.classList.toggle("lil-active",e),document.body.classList.toggle("lil-dragging",e),document.body.classList.toggle(`lil-${t}`,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:t,deltaY:r}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(t=0,r=-e.wheelDelta/120,r*=this._stepExplicit?1:10),t+-r}_arrowKeyMultiplier(e){let t=this._stepExplicit?1:10;return e.shiftKey?t*=10:e.altKey&&(t/=10),t}_snap(e){let t=0;return this._hasMin?t=this._min:this._hasMax&&(t=this._max),e-=t,e=Math.round(e/this._step)*this._step,e+=t,e=parseFloat(e.toPrecision(15)),e}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}}class b0e extends L1{constructor(e,t,r,i){super(e,t,r,"lil-option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("lil-display"),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("lil-focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("lil-focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.options(i)}options(e){return this._values=Array.isArray(e)?e:Object.values(e),this._names=Array.isArray(e)?e:Object.keys(e),this.$select.replaceChildren(),this._names.forEach(t=>{const r=document.createElement("option");r.textContent=t,this.$select.appendChild(r)}),this.updateDisplay(),this}updateDisplay(){const e=this.getValue(),t=this._values.indexOf(e);return this.$select.selectedIndex=t,this.$display.textContent=t===-1?e:this._names[t],this}}class x0e extends L1{constructor(e,t,r){super(e,t,r,"lil-string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("spellcheck","false"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",i=>{i.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}var S0e=`.lil-gui {
  font-family: var(--font-family);
  font-size: var(--font-size);
  line-height: 1;
  font-weight: normal;
  font-style: normal;
  text-align: left;
  color: var(--text-color);
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  --background-color: #1f1f1f;
  --text-color: #ebebeb;
  --title-background-color: #111111;
  --title-text-color: #ebebeb;
  --widget-color: #424242;
  --hover-color: #4f4f4f;
  --focus-color: #595959;
  --number-color: #2cc9ff;
  --string-color: #a2db3c;
  --font-size: 11px;
  --input-font-size: 11px;
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;
  --padding: 4px;
  --spacing: 4px;
  --widget-height: 20px;
  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);
  --name-width: 45%;
  --slider-knob-width: 2px;
  --slider-input-width: 27%;
  --color-input-width: 27%;
  --slider-input-min-width: 45px;
  --color-input-min-width: 45px;
  --folder-indent: 7px;
  --widget-padding: 0 0 0 3px;
  --widget-border-radius: 2px;
  --checkbox-size: calc(0.75 * var(--widget-height));
  --scrollbar-width: 5px;
}
.lil-gui, .lil-gui * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
.lil-gui.lil-root {
  width: var(--width, 245px);
  display: flex;
  flex-direction: column;
  background: var(--background-color);
}
.lil-gui.lil-root > .lil-title {
  background: var(--title-background-color);
  color: var(--title-text-color);
}
.lil-gui.lil-root > .lil-children {
  overflow-x: hidden;
  overflow-y: auto;
}
.lil-gui.lil-root > .lil-children::-webkit-scrollbar {
  width: var(--scrollbar-width);
  height: var(--scrollbar-width);
  background: var(--background-color);
}
.lil-gui.lil-root > .lil-children::-webkit-scrollbar-thumb {
  border-radius: var(--scrollbar-width);
  background: var(--focus-color);
}
@media (pointer: coarse) {
  .lil-gui.lil-allow-touch-styles, .lil-gui.lil-allow-touch-styles .lil-gui {
    --widget-height: 28px;
    --padding: 6px;
    --spacing: 6px;
    --font-size: 13px;
    --input-font-size: 16px;
    --folder-indent: 10px;
    --scrollbar-width: 7px;
    --slider-input-min-width: 50px;
    --color-input-min-width: 65px;
  }
}
.lil-gui.lil-force-touch-styles, .lil-gui.lil-force-touch-styles .lil-gui {
  --widget-height: 28px;
  --padding: 6px;
  --spacing: 6px;
  --font-size: 13px;
  --input-font-size: 16px;
  --folder-indent: 10px;
  --scrollbar-width: 7px;
  --slider-input-min-width: 50px;
  --color-input-min-width: 65px;
}
.lil-gui.lil-auto-place, .lil-gui.autoPlace {
  max-height: 100%;
  position: fixed;
  top: 0;
  right: 15px;
  z-index: 1001;
}

.lil-controller {
  display: flex;
  align-items: center;
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
}
.lil-controller.lil-disabled {
  opacity: 0.5;
}
.lil-controller.lil-disabled, .lil-controller.lil-disabled * {
  pointer-events: none !important;
}
.lil-controller > .lil-name {
  min-width: var(--name-width);
  flex-shrink: 0;
  white-space: pre;
  padding-right: var(--spacing);
  line-height: var(--widget-height);
}
.lil-controller .lil-widget {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  min-height: var(--widget-height);
}
.lil-controller.lil-string input {
  color: var(--string-color);
}
.lil-controller.lil-boolean {
  cursor: pointer;
}
.lil-controller.lil-color .lil-display {
  width: 100%;
  height: var(--widget-height);
  border-radius: var(--widget-border-radius);
  position: relative;
}
@media (hover: hover) {
  .lil-controller.lil-color .lil-display:hover:before {
    content: " ";
    display: block;
    position: absolute;
    border-radius: var(--widget-border-radius);
    border: 1px solid #fff9;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
.lil-controller.lil-color input[type=color] {
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}
.lil-controller.lil-color input[type=text] {
  margin-left: var(--spacing);
  font-family: var(--font-family-mono);
  min-width: var(--color-input-min-width);
  width: var(--color-input-width);
  flex-shrink: 0;
}
.lil-controller.lil-option select {
  opacity: 0;
  position: absolute;
  width: 100%;
  max-width: 100%;
}
.lil-controller.lil-option .lil-display {
  position: relative;
  pointer-events: none;
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  line-height: var(--widget-height);
  max-width: 100%;
  overflow: hidden;
  word-break: break-all;
  padding-left: 0.55em;
  padding-right: 1.75em;
  background: var(--widget-color);
}
@media (hover: hover) {
  .lil-controller.lil-option .lil-display.lil-focus {
    background: var(--focus-color);
  }
}
.lil-controller.lil-option .lil-display.lil-active {
  background: var(--focus-color);
}
.lil-controller.lil-option .lil-display:after {
  font-family: "lil-gui";
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  padding-right: 0.375em;
}
.lil-controller.lil-option .lil-widget,
.lil-controller.lil-option select {
  cursor: pointer;
}
@media (hover: hover) {
  .lil-controller.lil-option .lil-widget:hover .lil-display {
    background: var(--hover-color);
  }
}
.lil-controller.lil-number input {
  color: var(--number-color);
}
.lil-controller.lil-number.lil-has-slider input {
  margin-left: var(--spacing);
  width: var(--slider-input-width);
  min-width: var(--slider-input-min-width);
  flex-shrink: 0;
}
.lil-controller.lil-number .lil-slider {
  width: 100%;
  height: var(--widget-height);
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  padding-right: var(--slider-knob-width);
  overflow: hidden;
  cursor: ew-resize;
  touch-action: pan-y;
}
@media (hover: hover) {
  .lil-controller.lil-number .lil-slider:hover {
    background: var(--hover-color);
  }
}
.lil-controller.lil-number .lil-slider.lil-active {
  background: var(--focus-color);
}
.lil-controller.lil-number .lil-slider.lil-active .lil-fill {
  opacity: 0.95;
}
.lil-controller.lil-number .lil-fill {
  height: 100%;
  border-right: var(--slider-knob-width) solid var(--number-color);
  box-sizing: content-box;
}

.lil-dragging .lil-gui {
  --hover-color: var(--widget-color);
}
.lil-dragging * {
  cursor: ew-resize !important;
}
.lil-dragging.lil-vertical * {
  cursor: ns-resize !important;
}

.lil-gui .lil-title {
  height: var(--title-height);
  font-weight: 600;
  padding: 0 var(--padding);
  width: 100%;
  text-align: left;
  background: none;
  text-decoration-skip: objects;
}
.lil-gui .lil-title:before {
  font-family: "lil-gui";
  content: "";
  padding-right: 2px;
  display: inline-block;
}
.lil-gui .lil-title:active {
  background: var(--title-background-color);
  opacity: 0.75;
}
@media (hover: hover) {
  body:not(.lil-dragging) .lil-gui .lil-title:hover {
    background: var(--title-background-color);
    opacity: 0.85;
  }
  .lil-gui .lil-title:focus {
    text-decoration: underline var(--focus-color);
  }
}
.lil-gui.lil-root > .lil-title:focus {
  text-decoration: none !important;
}
.lil-gui.lil-closed > .lil-title:before {
  content: "";
}
.lil-gui.lil-closed > .lil-children {
  transform: translateY(-7px);
  opacity: 0;
}
.lil-gui.lil-closed:not(.lil-transition) > .lil-children {
  display: none;
}
.lil-gui.lil-transition > .lil-children {
  transition-duration: 300ms;
  transition-property: height, opacity, transform;
  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);
  overflow: hidden;
  pointer-events: none;
}
.lil-gui .lil-children:empty:before {
  content: "Empty";
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
  display: block;
  height: var(--widget-height);
  font-style: italic;
  line-height: var(--widget-height);
  opacity: 0.5;
}
.lil-gui.lil-root > .lil-children > .lil-gui > .lil-title {
  border: 0 solid var(--widget-color);
  border-width: 1px 0;
  transition: border-color 300ms;
}
.lil-gui.lil-root > .lil-children > .lil-gui.lil-closed > .lil-title {
  border-bottom-color: transparent;
}
.lil-gui + .lil-controller {
  border-top: 1px solid var(--widget-color);
  margin-top: 0;
  padding-top: var(--spacing);
}
.lil-gui .lil-gui .lil-gui > .lil-title {
  border: none;
}
.lil-gui .lil-gui .lil-gui > .lil-children {
  border: none;
  margin-left: var(--folder-indent);
  border-left: 2px solid var(--widget-color);
}
.lil-gui .lil-gui .lil-controller {
  border: none;
}

.lil-gui label, .lil-gui input, .lil-gui button {
  -webkit-tap-highlight-color: transparent;
}
.lil-gui input {
  border: 0;
  outline: none;
  font-family: var(--font-family);
  font-size: var(--input-font-size);
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  background: var(--widget-color);
  color: var(--text-color);
  width: 100%;
}
@media (hover: hover) {
  .lil-gui input:hover {
    background: var(--hover-color);
  }
  .lil-gui input:active {
    background: var(--focus-color);
  }
}
.lil-gui input:disabled {
  opacity: 1;
}
.lil-gui input[type=text],
.lil-gui input[type=number] {
  padding: var(--widget-padding);
  -moz-appearance: textfield;
}
.lil-gui input[type=text]:focus,
.lil-gui input[type=number]:focus {
  background: var(--focus-color);
}
.lil-gui input[type=checkbox] {
  appearance: none;
  width: var(--checkbox-size);
  height: var(--checkbox-size);
  border-radius: var(--widget-border-radius);
  text-align: center;
  cursor: pointer;
}
.lil-gui input[type=checkbox]:checked:before {
  font-family: "lil-gui";
  content: "";
  font-size: var(--checkbox-size);
  line-height: var(--checkbox-size);
}
@media (hover: hover) {
  .lil-gui input[type=checkbox]:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button {
  outline: none;
  cursor: pointer;
  font-family: var(--font-family);
  font-size: var(--font-size);
  color: var(--text-color);
  width: 100%;
  border: none;
}
.lil-gui .lil-controller button {
  height: var(--widget-height);
  text-transform: none;
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
}
@media (hover: hover) {
  .lil-gui .lil-controller button:hover {
    background: var(--hover-color);
  }
  .lil-gui .lil-controller button:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui .lil-controller button:active {
  background: var(--focus-color);
}

@font-face {
  font-family: "lil-gui";
  src: url("data:application/font-woff2;charset=utf-8;base64,d09GMgABAAAAAALkAAsAAAAABtQAAAKVAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHFQGYACDMgqBBIEbATYCJAMUCwwABCAFhAoHgQQbHAbIDiUFEYVARAAAYQTVWNmz9MxhEgodq49wYRUFKE8GWNiUBxI2LBRaVnc51U83Gmhs0Q7JXWMiz5eteLwrKwuxHO8VFxUX9UpZBs6pa5ABRwHA+t3UxUnH20EvVknRerzQgX6xC/GH6ZUvTcAjAv122dF28OTqCXrPuyaDER30YBA1xnkVutDDo4oCi71Ca7rrV9xS8dZHbPHefsuwIyCpmT7j+MnjAH5X3984UZoFFuJ0yiZ4XEJFxjagEBeqs+e1iyK8Xf/nOuwF+vVK0ur765+vf7txotUi0m3N0m/84RGSrBCNrh8Ee5GjODjF4gnWP+dJrH/Lk9k4oT6d+gr6g/wssA2j64JJGP6cmx554vUZnpZfn6ZfX2bMwPPrlANsB86/DiHjhl0OP+c87+gaJo/gY084s3HoYL/ZkWHTRfBXvvoHnnkHvngKun4KBE/ede7tvq3/vQOxDXB1/fdNz6XbPdcr0Vhpojj9dG+owuSKFsslCi1tgEjirjXdwMiov2EioadxmqTHUCIwo8NgQaeIasAi0fTYSPTbSmwbMOFduyh9wvBrESGY0MtgRjtgQR8Q1bRPohn2UoCRZf9wyYANMXFeJTysqAe0I4mrherOekFdKMrYvJjLvOIUM9SuwYB5DVZUwwVjJJOaUnZCmcEkIZZrKqNvRGRMvmFZsmhP4VMKCSXBhSqUBxgMS7h0cZvEd71AWkEhGWaeMFcNnpqyJkyXgYL7PQ1MoSq0wDAkRtJIijkZSmqYTiSImfLiSWXIZwhRh3Rug2X0kk1Dgj+Iu43u5p98ghopcpSo0Uyc8SnjlYX59WUeaMoDqmVD2TOWD9a4pCRAzf2ECgwGcrHjPOWY9bNxq/OL3I/QjwEAAAA=") format("woff2");
}`;function w0e(n){const e=document.createElement("style");e.innerHTML=n;const t=document.querySelector("head link[rel=stylesheet], head style");t?document.head.insertBefore(e,t):document.head.appendChild(e)}let f8=!1;class a4{constructor({parent:e,autoPlace:t=e===void 0,container:r,width:i,title:s="Controls",closeFolders:o=!1,injectStyles:a=!0,touchStyles:l=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("button"),this.$title.classList.add("lil-title"),this.$title.setAttribute("aria-expanded",!0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("lil-children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(s),this.parent){this.parent.children.push(this),this.parent.folders.push(this),this.parent.$children.appendChild(this.domElement);return}this.domElement.classList.add("lil-root"),l&&this.domElement.classList.add("lil-allow-touch-styles"),!f8&&a&&(w0e(S0e),f8=!0),r?r.appendChild(this.domElement):t&&(this.domElement.classList.add("lil-auto-place","autoPlace"),document.body.appendChild(this.domElement)),i&&this.domElement.style.setProperty("--width",i+"px"),this._closeFolders=o}add(e,t,r,i,s){if(Object(r)===r)return new b0e(this,e,t,r);const o=e[t];switch(typeof o){case"number":return new v0e(this,e,t,r,i,s);case"boolean":return new d0e(this,e,t);case"string":return new x0e(this,e,t);case"function":return new XO(this,e,t)}console.error(`gui.add failed
	property:`,t,`
	object:`,e,`
	value:`,o)}addColor(e,t,r=1){return new y0e(this,e,t,r)}addFolder(e){const t=new a4({parent:this,title:e});return this.root._closeFolders&&t.close(),t}load(e,t=!0){return e.controllers&&this.controllers.forEach(r=>{r instanceof XO||r._name in e.controllers&&r.load(e.controllers[r._name])}),t&&e.folders&&this.folders.forEach(r=>{r._title in e.folders&&r.load(e.folders[r._title])}),this}save(e=!0){const t={controllers:{},folders:{}};return this.controllers.forEach(r=>{if(!(r instanceof XO)){if(r._name in t.controllers)throw new Error(`Cannot save GUI with duplicate property "${r._name}"`);t.controllers[r._name]=r.save()}}),e&&this.folders.forEach(r=>{if(r._title in t.folders)throw new Error(`Cannot save GUI with duplicate folder "${r._title}"`);t.folders[r._title]=r.save()}),t}open(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("lil-closed",this._closed),this}close(){return this.open(!1)}_setClosed(e){this._closed!==e&&(this._closed=e,this._callOnOpenClose(this))}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const t=this.$children.clientHeight;this.$children.style.height=t+"px",this.domElement.classList.add("lil-transition");const r=s=>{s.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("lil-transition"),this.$children.removeEventListener("transitionend",r))};this.$children.addEventListener("transitionend",r);const i=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("lil-closed",!e),requestAnimationFrame(()=>{this.$children.style.height=i+"px"})}),this}title(e){return this._title=e,this.$title.textContent=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(r=>r.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),this._onChange!==void 0&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onOpenClose(e){return this._onOpenClose=e,this}_callOnOpenClose(e){this.parent&&this.parent._callOnOpenClose(e),this._onOpenClose!==void 0&&this._onOpenClose.call(this,e)}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(t=>{e=e.concat(t.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(t=>{e=e.concat(t.foldersRecursive())}),e}}const _0e=()=>{const n=F.useRef(null);return F.useEffect(()=>{if(!n.current)return;const e=new BI({antialias:!0});e.shadowMap.enabled=!0,e.setSize(window.innerWidth,window.innerHeight),n.current.appendChild(e.domElement);const t=new D1;t.background=new rn(1710618);const r=new So(75,window.innerWidth/window.innerHeight,.1,1e3),i=new Zge(r,e.domElement);r.position.set(3,3,5),r.lookAt(0,0,0),i.update();const s=new UK(3);t.add(s);const o=new Qp,a=new mg({color:16771584}),l=new Li(o,a);l.castShadow=!0,t.add(l);const c=new O1(4,50,50),u=new mg({color:65280,wireframe:!1}),d=new Li(c,u);d.castShadow=!0,t.add(d),d.position.set(10,10,0);const f=new Of(30,30),p=new mg({color:"white",side:Zc}),g=new Li(f,p);t.add(g),g.position.y=-3,g.rotation.x=-.5*Math.PI,g.receiveShadow=!0;const v=new LK(30);t.add(v),v.position.y=-3;const b=new ZP(16777215,.5);t.add(b);const x=new II(16777215,.8);x.position.set(5,5,5),x.castShadow=!0,x.shadow.camera.top=12,t.add(x);const _=new PK(x.shadow.camera);t.add(_);const E=new FK(x);t.add(E);const C=new NI(16777215,10);t.add(C),C.castShadow=!0;const M=new BK(C);t.add(M);const R=new _s;R.setFromAxisAngle(new ve(0,1,0),Math.PI/2),new ve(0,0,0).applyQuaternion(R),t.fog=new RC(16777215,0,200);const B=new a4,N={boxColor:16771584,sphereColor:65280,wireframeBox:!1,wireframeSphere:!1,speed:.01,angle:.2,penumbra:0,intensity:1};B.addColor(N,"boxColor").onChange(function(z){l.material.color.set(z)}),B.addColor(N,"sphereColor").onChange(function(z){d.material.color.set(z)}),B.add(N,"wireframeBox").onChange(function(z){l.material.wireframe=z}),B.add(N,"wireframeSphere").onChange(function(z){d.material.wireframe=z}),B.add(N,"speed",0,.1),B.add(N,"angle",0,1),B.add(N,"penumbra",0,1),B.add(N,"intensity",0,10);let I=0;const D=new Nt;window.addEventListener("mousemove",function(z){D.x=z.clientX/window.innerWidth*2-1,D.y=-(z.clientY/window.innerHeight)*2+1});const P=new kI,G=d.id,W=()=>{requestAnimationFrame(W),l.rotation.x+=.01,l.rotation.y+=.01,I+=N.speed,d.position.y=10*Math.abs(Math.sin(I)),C.angle=N.angle,C.penumbra=N.penumbra,C.intensity=N.intensity,M.update(),P.setFromCamera(D,r);const z=P.intersectObjects(t.children);console.log(z);for(let J=0;J<z.length;J++)z[J].object.id===G&&z[J].object.material.color.set(16711680);e.render(t,r)};W();const q=()=>{r.aspect=window.innerWidth/window.innerHeight,r.updateProjectionMatrix(),e.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",q),()=>{window.removeEventListener("resize",q),n.current&&e.domElement.parentNode===n.current&&n.current.removeChild(e.domElement),B.destroy(),o.dispose(),a.dispose(),c.dispose(),u.dispose(),f.dispose(),p.dispose(),e.dispose()}},[]),V.jsx("div",{ref:n,style:{position:"fixed",top:0,left:0,width:"100%",height:"100vh",margin:0,padding:0,overflow:"hidden",backgroundColor:"#FFFFFF"}})};/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var p8="popstate";function C0e(n={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return oL("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:q_(i)}return A0e(e,t,null,n)}function Bs(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ef(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function E0e(){return Math.random().toString(36).substring(2,10)}function m8(n,e){return{usr:n.state,key:n.key,idx:e}}function oL(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?F1(e):e,state:t,key:e&&e.key||r||E0e()}}function q_({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function F1(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function A0e(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function d(){a="POP";let b=u(),x=b==null?null:b-c;c=b,l&&l({action:a,location:v.location,delta:x})}function f(b,x){a="PUSH";let _=oL(v.location,b,x);c=u()+1;let E=m8(_,c),C=v.createHref(_);try{o.pushState(E,"",C)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(C)}s&&l&&l({action:a,location:v.location,delta:1})}function p(b,x){a="REPLACE";let _=oL(v.location,b,x);c=u();let E=m8(_,c),C=v.createHref(_);o.replaceState(E,"",C),s&&l&&l({action:a,location:v.location,delta:0})}function g(b){return T0e(b)}let v={get action(){return a},get location(){return n(i,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(p8,d),l=b,()=>{i.removeEventListener(p8,d),l=null}},createHref(b){return e(i,b)},createURL:g,encodeLocation(b){let x=g(b);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:p,go(b){return o.go(b)}};return v}function T0e(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Bs(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:q_(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function YK(n,e,t="/"){return M0e(n,e,t,!1)}function M0e(n,e,t,r){let i=typeof e=="string"?F1(e):e,s=Vp(i.pathname||"/",t);if(s==null)return null;let o=JK(n);R0e(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=U0e(s);a=F0e(o[l],c,r)}return a}function JK(n,e=[],t=[],r=""){let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Bs(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=Bp([r,l.relativePath]),u=t.concat(l);s.children&&s.children.length>0&&(Bs(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),JK(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:$0e(c,s.index),routesMeta:u})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of ZK(s.path))i(s,o,l)}),e}function ZK(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=ZK(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function R0e(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:L0e(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var N0e=/^:[\w-]+$/,I0e=3,D0e=2,k0e=1,O0e=10,B0e=-2,g8=n=>n==="*";function $0e(n,e){let t=n.split("/"),r=t.length;return t.some(g8)&&(r+=B0e),e&&(r+=D0e),t.filter(i=>!g8(i)).reduce((i,s)=>i+(N0e.test(s)?I0e:s===""?k0e:O0e),r)}function L0e(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function F0e(n,e,t=!1){let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=LR({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d&&c&&t&&!r[r.length-1].route.index&&(d=LR({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Bp([s,d.pathname]),pathnameBase:G0e(Bp([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Bp([s,d.pathnameBase]))}return o}function LR(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=P0e(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:d},f)=>{if(u==="*"){let g=a[f]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[f];return d&&!p?c[u]=void 0:c[u]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function P0e(n,e=!1,t=!0){Ef(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function U0e(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ef(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Vp(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function z0e(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?F1(n):n;return{pathname:t?t.startsWith("/")?t:H0e(t,e):e,search:W0e(r),hash:j0e(i)}}function H0e(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function qO(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function V0e(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function QK(n){let e=V0e(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function eY(n,e,t,r=!1){let i;typeof n=="string"?i=F1(n):(i={...n},Bs(!i.pathname||!i.pathname.includes("?"),qO("?","pathname","search",i)),Bs(!i.pathname||!i.pathname.includes("#"),qO("#","pathname","hash",i)),Bs(!i.search||!i.search.includes("#"),qO("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=z0e(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var Bp=n=>n.join("/").replace(/\/\/+/g,"/"),G0e=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),W0e=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,j0e=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function X0e(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var tY=["POST","PUT","PATCH","DELETE"];new Set(tY);var q0e=["GET",...tY];new Set(q0e);var P1=F.createContext(null);P1.displayName="DataRouter";var $I=F.createContext(null);$I.displayName="DataRouterState";F.createContext(!1);var nY=F.createContext({isTransitioning:!1});nY.displayName="ViewTransition";var K0e=F.createContext(new Map);K0e.displayName="Fetchers";var Y0e=F.createContext(null);Y0e.displayName="Await";var Bf=F.createContext(null);Bf.displayName="Navigation";var $C=F.createContext(null);$C.displayName="Location";var em=F.createContext({outlet:null,matches:[],isDataRoute:!1});em.displayName="Route";var l4=F.createContext(null);l4.displayName="RouteError";function J0e(n,{relative:e}={}){Bs(LC(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=F.useContext(Bf),{hash:i,pathname:s,search:o}=FC(n,{relative:e}),a=s;return t!=="/"&&(a=s==="/"?t:Bp([t,s])),r.createHref({pathname:a,search:o,hash:i})}function LC(){return F.useContext($C)!=null}function tm(){return Bs(LC(),"useLocation() may be used only in the context of a <Router> component."),F.useContext($C).location}var rY="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function iY(n){F.useContext(Bf).static||F.useLayoutEffect(n)}function LI(){let{isDataRoute:n}=F.useContext(em);return n?uye():Z0e()}function Z0e(){Bs(LC(),"useNavigate() may be used only in the context of a <Router> component.");let n=F.useContext(P1),{basename:e,navigator:t}=F.useContext(Bf),{matches:r}=F.useContext(em),{pathname:i}=tm(),s=JSON.stringify(QK(r)),o=F.useRef(!1);return iY(()=>{o.current=!0}),F.useCallback((l,c={})=>{if(Ef(o.current,rY),!o.current)return;if(typeof l=="number"){t.go(l);return}let u=eY(l,JSON.parse(s),i,c.relative==="path");n==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Bp([e,u.pathname])),(c.replace?t.replace:t.push)(u,c.state,c)},[e,t,s,i,n])}F.createContext(null);function FC(n,{relative:e}={}){let{matches:t}=F.useContext(em),{pathname:r}=tm(),i=JSON.stringify(QK(t));return F.useMemo(()=>eY(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function Q0e(n,e){return sY(n,e)}function sY(n,e,t,r){var x;Bs(LC(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=F.useContext(Bf),{matches:s}=F.useContext(em),o=s[s.length-1],a=o?o.params:{},l=o?o.pathname:"/",c=o?o.pathnameBase:"/",u=o&&o.route;{let _=u&&u.path||"";oY(l,!u||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let d=tm(),f;if(e){let _=typeof e=="string"?F1(e):e;Bs(c==="/"||((x=_.pathname)==null?void 0:x.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${_.pathname}" was given in the \`location\` prop.`),f=_}else f=d;let p=f.pathname||"/",g=p;if(c!=="/"){let _=c.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(_.length).join("/")}let v=YK(n,{pathname:g});Ef(u||v!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Ef(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=iye(v&&v.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:Bp([c,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:Bp([c,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,t,r);return e&&b?F.createElement($C.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},b):b}function eye(){let n=cye(),e=X0e(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=F.createElement(F.Fragment,null,F.createElement("p",null," Hey developer "),F.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",F.createElement("code",{style:s},"ErrorBoundary")," or"," ",F.createElement("code",{style:s},"errorElement")," prop on your route.")),F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),t?F.createElement("pre",{style:i},t):null,o)}var tye=F.createElement(eye,null),nye=class extends F.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?F.createElement(em.Provider,{value:this.props.routeContext},F.createElement(l4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function rye({routeContext:n,match:e,children:t}){let r=F.useContext(P1);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),F.createElement(em.Provider,{value:n},t)}function iye(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,s=t==null?void 0:t.errors;if(s!=null){let l=i.findIndex(c=>c.route.id&&(s==null?void 0:s[c.route.id])!==void 0);Bs(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let o=!1,a=-1;if(t)for(let l=0;l<i.length;l++){let c=i[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:u,errors:d}=t,f=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!d||d[c.route.id]===void 0);if(c.route.lazy||f){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,c,u)=>{let d,f=!1,p=null,g=null;t&&(d=s&&c.route.id?s[c.route.id]:void 0,p=c.route.errorElement||tye,o&&(a<0&&u===0?(oY("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,g=null):a===u&&(f=!0,g=c.route.hydrateFallbackElement||null)));let v=e.concat(i.slice(0,u+1)),b=()=>{let x;return d?x=p:f?x=g:c.route.Component?x=F.createElement(c.route.Component,null):c.route.element?x=c.route.element:x=l,F.createElement(rye,{match:c,routeContext:{outlet:l,matches:v,isDataRoute:t!=null},children:x})};return t&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?F.createElement(nye,{location:t.location,revalidation:t.revalidation,component:p,error:d,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}function c4(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sye(n){let e=F.useContext(P1);return Bs(e,c4(n)),e}function oye(n){let e=F.useContext($I);return Bs(e,c4(n)),e}function aye(n){let e=F.useContext(em);return Bs(e,c4(n)),e}function u4(n){let e=aye(n),t=e.matches[e.matches.length-1];return Bs(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function lye(){return u4("useRouteId")}function cye(){var r;let n=F.useContext(l4),e=oye("useRouteError"),t=u4("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function uye(){let{router:n}=sye("useNavigate"),e=u4("useNavigate"),t=F.useRef(!1);return iY(()=>{t.current=!0}),F.useCallback(async(i,s={})=>{Ef(t.current,rY),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...s}))},[n,e])}var y8={};function oY(n,e,t){!e&&!y8[n]&&(y8[n]=!0,Ef(!1,t))}F.memo(dye);function dye({routes:n,future:e,state:t}){return sY(n,void 0,t,e)}function ef(n){Bs(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function hye({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:s=!1}){Bs(!LC(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),a=F.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof t=="string"&&(t=F1(t));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:f="default"}=t,p=F.useMemo(()=>{let g=Vp(l,o);return g==null?null:{location:{pathname:g,search:c,hash:u,state:d,key:f},navigationType:r}},[o,l,c,u,d,f,r]);return Ef(p!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:F.createElement(Bf.Provider,{value:a},F.createElement($C.Provider,{children:e,value:p}))}function fye({children:n,location:e}){return Q0e(aL(n),e)}function aL(n,e=[]){let t=[];return F.Children.forEach(n,(r,i)=>{if(!F.isValidElement(r))return;let s=[...e,i];if(r.type===F.Fragment){t.push.apply(t,aL(r.props.children,s));return}Bs(r.type===ef,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Bs(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=aL(r.props.children,s)),t.push(o)}),t}var wM="get",_M="application/x-www-form-urlencoded";function FI(n){return n!=null&&typeof n.tagName=="string"}function pye(n){return FI(n)&&n.tagName.toLowerCase()==="button"}function mye(n){return FI(n)&&n.tagName.toLowerCase()==="form"}function gye(n){return FI(n)&&n.tagName.toLowerCase()==="input"}function yye(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function vye(n,e){return n.button===0&&(!e||e==="_self")&&!yye(n)}var OT=null;function bye(){if(OT===null)try{new FormData(document.createElement("form"),0),OT=!1}catch{OT=!0}return OT}var xye=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function KO(n){return n!=null&&!xye.has(n)?(Ef(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_M}"`),null):n}function Sye(n,e){let t,r,i,s,o;if(mye(n)){let a=n.getAttribute("action");r=a?Vp(a,e):null,t=n.getAttribute("method")||wM,i=KO(n.getAttribute("enctype"))||_M,s=new FormData(n)}else if(pye(n)||gye(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||a.getAttribute("action");if(r=l?Vp(l,e):null,t=n.getAttribute("formmethod")||a.getAttribute("method")||wM,i=KO(n.getAttribute("formenctype"))||KO(a.getAttribute("enctype"))||_M,s=new FormData(a,n),!bye()){let{name:c,type:u,value:d}=n;if(u==="image"){let f=c?`${c}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else c&&s.append(c,d)}}else{if(FI(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=wM,r=null,i=_M,o=n}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function d4(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function wye(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Vp(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function _ye(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Cye(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Eye(n,e,t){let r=await Promise.all(n.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await _ye(s,t);return o.links?o.links():[]}return[]}));return Rye(r.flat(1).filter(Cye).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function v8(n,e,t,r,i,s){let o=(l,c)=>t[c]?l.route.id!==t[c].route.id:!0,a=(l,c)=>{var u;return t[c].pathname!==l.pathname||((u=t[c].route.path)==null?void 0:u.endsWith("*"))&&t[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):s==="data"?e.filter((l,c)=>{var d;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=t[0])==null?void 0:d.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function Aye(n,e,{includeHydrateFallback:t}={}){return Tye(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function Tye(n){return[...new Set(n)]}function Mye(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function Rye(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let s=JSON.stringify(Mye(i));return t.has(s)||(t.add(s),r.push({key:s,link:i})),r},[])}function aY(){let n=F.useContext(P1);return d4(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Nye(){let n=F.useContext($I);return d4(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var h4=F.createContext(void 0);h4.displayName="FrameworkContext";function lY(){let n=F.useContext(h4);return d4(n,"You must render this element inside a <HydratedRouter> element"),n}function Iye(n,e){let t=F.useContext(h4),[r,i]=F.useState(!1),[s,o]=F.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=e,f=F.useRef(null);F.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let v=x=>{x.forEach(_=>{o(_.isIntersecting)})},b=new IntersectionObserver(v,{threshold:.5});return f.current&&b.observe(f.current),()=>{b.disconnect()}}},[n]),F.useEffect(()=>{if(r){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[r]);let p=()=>{i(!0)},g=()=>{i(!1),o(!1)};return t?n!=="intent"?[s,f,{}]:[s,f,{onFocus:Iw(a,p),onBlur:Iw(l,g),onMouseEnter:Iw(c,p),onMouseLeave:Iw(u,g),onTouchStart:Iw(d,p)}]:[!1,f,{}]}function Iw(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Dye({page:n,...e}){let{router:t}=aY(),r=F.useMemo(()=>YK(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?F.createElement(Oye,{page:n,matches:r,...e}):null}function kye(n){let{manifest:e,routeModules:t}=lY(),[r,i]=F.useState([]);return F.useEffect(()=>{let s=!1;return Eye(n,e,t).then(o=>{s||i(o)}),()=>{s=!0}},[n,e,t]),r}function Oye({page:n,matches:e,...t}){let r=tm(),{manifest:i,routeModules:s}=lY(),{basename:o}=aY(),{loaderData:a,matches:l}=Nye(),c=F.useMemo(()=>v8(n,e,l,i,r,"data"),[n,e,l,i,r]),u=F.useMemo(()=>v8(n,e,l,i,r,"assets"),[n,e,l,i,r]),d=F.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let g=new Set,v=!1;if(e.forEach(x=>{var E;let _=i.routes[x.route.id];!_||!_.hasLoader||(!c.some(C=>C.route.id===x.route.id)&&x.route.id in a&&((E=s[x.route.id])!=null&&E.shouldRevalidate)||_.hasClientLoader?v=!0:g.add(x.route.id))}),g.size===0)return[];let b=wye(n,o,"data");return v&&g.size>0&&b.searchParams.set("_routes",e.filter(x=>g.has(x.route.id)).map(x=>x.route.id).join(",")),[b.pathname+b.search]},[o,a,r,i,c,e,n,s]),f=F.useMemo(()=>Aye(u,i),[u,i]),p=kye(u);return F.createElement(F.Fragment,null,d.map(g=>F.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...t})),f.map(g=>F.createElement("link",{key:g,rel:"modulepreload",href:g,...t})),p.map(({key:g,link:v})=>F.createElement("link",{key:g,...v})))}function Bye(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var cY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{cY&&(window.__reactRouterVersion="7.7.1")}catch{}function $ye({basename:n,children:e,window:t}){let r=F.useRef();r.current==null&&(r.current=C0e({window:t,v5Compat:!0}));let i=r.current,[s,o]=F.useState({action:i.action,location:i.location}),a=F.useCallback(l=>{F.startTransition(()=>o(l))},[o]);return F.useLayoutEffect(()=>i.listen(a),[i,a]),F.createElement(hye,{basename:n,children:e,location:s.location,navigationType:s.action,navigator:i})}var uY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dY=F.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d,...f},p){let{basename:g}=F.useContext(Bf),v=typeof c=="string"&&uY.test(c),b,x=!1;if(typeof c=="string"&&v&&(b=c,cY))try{let N=new URL(window.location.href),I=c.startsWith("//")?new URL(N.protocol+c):new URL(c),D=Vp(I.pathname,g);I.origin===N.origin&&D!=null?c=D+I.search+I.hash:x=!0}catch{Ef(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=J0e(c,{relative:i}),[E,C,M]=Iye(r,f),R=Uye(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:d});function L(N){e&&e(N),N.defaultPrevented||R(N)}let B=F.createElement("a",{...f,...M,href:b||_,onClick:x||s?e:L,ref:Bye(p,C),target:l,"data-discover":!v&&t==="render"?"true":void 0});return E&&!v?F.createElement(F.Fragment,null,B,F.createElement(Dye,{page:_})):B});dY.displayName="Link";var Lye=F.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...c},u){let d=FC(o,{relative:c.relative}),f=tm(),p=F.useContext($I),{navigator:g,basename:v}=F.useContext(Bf),b=p!=null&&Wye(d)&&a===!0,x=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,_=f.pathname,E=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;t||(_=_.toLowerCase(),E=E?E.toLowerCase():null,x=x.toLowerCase()),E&&v&&(E=Vp(E,v)||E);const C=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let M=_===x||!i&&_.startsWith(x)&&_.charAt(C)==="/",R=E!=null&&(E===x||!i&&E.startsWith(x)&&E.charAt(x.length)==="/"),L={isActive:M,isPending:R,isTransitioning:b},B=M?e:void 0,N;typeof r=="function"?N=r(L):N=[r,M?"active":null,R?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let I=typeof s=="function"?s(L):s;return F.createElement(dY,{...c,"aria-current":B,className:N,ref:u,style:I,to:o,viewTransition:a},typeof l=="function"?l(L):l)});Lye.displayName="NavLink";var Fye=F.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:s,method:o=wM,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...f},p)=>{let g=Vye(),v=Gye(a,{relative:c}),b=o.toLowerCase()==="get"?"get":"post",x=typeof a=="string"&&uY.test(a),_=E=>{if(l&&l(E),E.defaultPrevented)return;E.preventDefault();let C=E.nativeEvent.submitter,M=(C==null?void 0:C.getAttribute("formmethod"))||o;g(C||E.currentTarget,{fetcherKey:e,method:M,navigate:t,replace:i,state:s,relative:c,preventScrollReset:u,viewTransition:d})};return F.createElement("form",{ref:p,method:b,action:v,onSubmit:r?l:_,...f,"data-discover":!x&&n==="render"?"true":void 0})});Fye.displayName="Form";function Pye(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hY(n){let e=F.useContext(P1);return Bs(e,Pye(n)),e}function Uye(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=LI(),l=tm(),c=FC(n,{relative:s});return F.useCallback(u=>{if(vye(u,e)){u.preventDefault();let d=t!==void 0?t:q_(l)===q_(c);a(n,{replace:d,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,c,t,r,e,n,i,s,o])}var zye=0,Hye=()=>`__${String(++zye)}__`;function Vye(){let{router:n}=hY("useSubmit"),{basename:e}=F.useContext(Bf),t=lye();return F.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:c}=Sye(r,e);if(i.navigate===!1){let u=i.fetcherKey||Hye();await n.fetch(u,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await n.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function Gye(n,{relative:e}={}){let{basename:t}=F.useContext(Bf),r=F.useContext(em);Bs(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...FC(n||".",{relative:e})},o=tm();if(n==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let u=a.toString();s.search=u?`?${u}`:""}}return(!n||n===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:Bp([t,s.pathname])),q_(s)}function Wye(n,{relative:e}={}){let t=F.useContext(nY);Bs(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=hY("useViewTransitionState"),i=FC(n,{relative:e});if(!t.isTransitioning)return!1;let s=Vp(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Vp(t.nextLocation.pathname,r)||t.nextLocation.pathname;return LR(i.pathname,o)!=null||LR(i.pathname,s)!=null}var PC=XX();const n_=Zp(PC),fY=({user:n,clearChat:e,isGuest:t=!1})=>{const r=LI(),i=()=>{localStorage.removeItem("user"),r("/login")};return V.jsxs("div",{className:"fixed top-6 left-0 w-full z-20 px-6 py-4 flex items-center justify-between doto-font",children:[V.jsx("h1",{className:"text-3xl font-semibold text-gray-800",children:t?"Interactive Virtual Assistant (Guest)":"Interactive Virtual Assistant"}),V.jsxs("div",{className:"flex items-center gap-3",children:[V.jsx("span",{className:"text-lg text-gray-800",children:t?"Welcome, Guest":`Welcome, ${n.username}`}),t?null:V.jsx("button",{onClick:i,className:"text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"Logout"}),V.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Clear Chat"})]})]})},jye=({message:n})=>{const e=n.role==="user";return V.jsxs("div",{className:`flex gap-4 ${e?"justify-end":""}`,children:[!e&&V.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-cyan-400 to-teal-600 flex items-center justify-center text-white font-semibold text-sm flex-shrink-0",children:"AI"}),V.jsx("div",{className:`px-4 py-3 rounded-2xl max-w-2xl ${e?"bg-gray-200 text-gray-900":"bg-white border border-gray-200 text-gray-800"}`,children:V.jsx("p",{className:"text-sm leading-relaxed",children:n.content})}),e&&V.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-300 flex items-center justify-center text-gray-600 font-semibold text-sm flex-shrink-0",children:"U"})]})};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xye=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qye=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),b8=n=>{const e=qye(n);return e.charAt(0).toUpperCase()+e.slice(1)},pY=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),Kye=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yye={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jye=F.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>F.createElement("svg",{ref:l,...Yye,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:pY("lucide",i),...!s&&!Kye(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,u])=>F.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=(n,e)=>{const t=F.forwardRef(({className:r,...i},s)=>F.createElement(Jye,{ref:s,iconNode:e,className:pY(`lucide-${Xye(b8(n))}`,`lucide-${n}`,r),...i}));return t.displayName=b8(n),t};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zye=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Qye=PI("chevron-down",Zye);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eve=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],YO=PI("message-square",eve);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tve=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],nve=PI("mic",tve);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rve=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ive=PI("send",rve),mY=({messages:n,loading:e})=>{const t=F.useRef(null),[r,i]=F.useState(!1);return F.useEffect(()=>{var s;r||(s=t.current)==null||s.scrollIntoView({behavior:"smooth"})},[n,e,r]),V.jsxs("div",{className:`
            fixed bottom-24 right-6 
            transition-all duration-300 ease-in-out
            ${r?"w-16 h-16":"w-96 h-96"}
            bg-white rounded-2xl shadow-2xl
            flex flex-col
            z-50
        `,children:[V.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 cursor-pointer hover:bg-gray-50 rounded-t-2xl",onClick:()=>i(!r),children:[!r&&V.jsxs(V.Fragment,{children:[V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx(YO,{size:20,className:"text-blue-500"}),V.jsx("h3",{className:"font-semibold text-gray-800",children:"Chat History"})]}),V.jsx("button",{className:"p-1 hover:bg-gray-200 rounded-lg transition-colors",children:V.jsx(Qye,{size:20,className:"text-gray-600"})})]}),r&&V.jsx("button",{className:"w-full h-full flex items-center justify-center",children:V.jsx(YO,{size:24,className:"text-blue-500"})})]}),!r&&V.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:n.length===0?V.jsxs("div",{className:"text-center text-gray-400 mt-8",children:[V.jsx(YO,{size:48,className:"mx-auto mb-2 opacity-50"}),V.jsx("p",{className:"text-sm",children:"No messages yet"})]}):V.jsxs("div",{className:"space-y-4",children:[n.map(s=>V.jsx(jye,{message:s},s.id)),e&&V.jsxs("div",{className:"flex gap-3 items-start",children:[V.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-cyan-400 to-teal-600 flex items-center justify-center text-white font-semibold text-xs flex-shrink-0",children:"AI"}),V.jsx("div",{className:"px-3 py-2 rounded-xl bg-white border border-gray-200",children:V.jsxs("div",{className:"flex gap-1",children:[V.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),V.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),V.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),V.jsx("div",{ref:t})]})})]})},gY=({input:n,setInput:e,onSend:t,loading:r,disabled:i,isGuest:s=!1})=>{const o=a=>{a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),t())};return V.jsx("div",{className:"fixed bottom-0 left-0 w-full z-20 pointer-events-none",children:V.jsxs("div",{className:"max-w-3xl mx-auto p-4 pointer-events-auto",children:[V.jsxs("div",{className:"flex gap-3 items-end",children:[V.jsx("div",{className:"flex-1 rounded-2xl border border-white/20 backdrop-blur-md bg-white/5 focus-within:border-orange-400 transition-all",children:V.jsx("textarea",{value:n,onChange:a=>e(a.target.value),onKeyDown:o,placeholder:"Message the assistant...",className:"w-full px-4 py-3 bg-transparent resize-none focus:outline-none text-sm text-white placeholder-white/60",rows:1,disabled:r||i})}),V.jsx("button",{onClick:t,disabled:!n.trim()||r||i,className:`p-3 rounded-xl backdrop-blur-md bg-orange-500/90 text-white\r
                       hover:bg-orange-600/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all`,children:r?V.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):V.jsx(ive,{size:20})}),V.jsx("button",{disabled:r||i,className:`p-3 rounded-xl backdrop-blur-md bg-green-500/90 text-white\r
                       hover:bg-green-600/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all`,children:V.jsx(nve,{size:20})})]}),V.jsx("p",{className:"text-xs text-white/60 text-center mt-3 select-none",children:s?"Guest mode  conversation history is temporary":"AI remembers your conversation history"})]})})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sve=1e-7,ove=1e-4;class yY{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class f4{refCount(e){return uc("refCount")}incRef(e){return uc("incRef")}timerAvailable(){return!0}time(e){return uc("time")}read(e){return uc("read")}readSync(e){return uc("readSync")}readToGPU(e,t){return uc("readToGPU")}numDataIds(){return uc("numDataIds")}disposeData(e,t){return uc("disposeData")}write(e,t,r){return uc("write")}move(e,t,r,i,s){return uc("move")}createTensorFromGPUData(e,t,r){return uc("createTensorFromGPUData")}memory(){return uc("memory")}floatPrecision(){return uc("floatPrecision")}epsilon(){return this.floatPrecision()===32?sve:ove}dispose(){return uc("dispose")}}function uc(n){throw new Error(`'${n}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ave(n){let e=n.length,t=0;for(;e>0;)t=Math.random()*e|0,e--,Mx(n,e,t)}function lv(n,e,t){return Math.max(n,Math.min(e,t))}function p4(n){return n%2===0?n:n+1}function Mx(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function lve(n){let e=0;for(let t=0;t<n.length;t++)e+=n[t];return e}function de(n,e){if(!n)throw new Error(typeof e=="string"?e:e())}function Dc(n,e,t=""){de(Vr(n,e),()=>t+` Shapes ${n} and ${e} must match`)}function U1(n){de(n!=null,()=>"The input to the tensor constructor must be a non-null value.")}function xt(n){if(n.length===0)return 1;let e=n[0];for(let t=1;t<n.length;t++)e*=n[t];return e}function cve(n,e){if(n===e)return!0;if(n==null||e==null||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==null&&e[t]!==null&&n[t]!==e[t])return!1;return!0}function Vr(n,e){if(n===e)return!0;if(n==null||e==null||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function m1(n){return n%1===0}function lL(n){const e=Math.ceil(Math.sqrt(n));return[e,Math.ceil(n/e)]}function Px(n,e){return e<=n.length?n:n+" ".repeat(e-n.length)}function x8(n,e=i=>0,t,r){return new Promise((i,s)=>{let o=0;const a=()=>{if(n()){i();return}o++;const l=e(o);if(t!=null&&o>=t){s();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function vY(n,e){let t=1,r=-1;for(let s=0;s<n.length;++s)if(n[s]>=0)t*=n[s];else if(n[s]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(n[s]<0)throw Error(`Shapes can not be < 0. Found ${n[s]} at dim ${s}`);if(r===-1){if(e>0&&e!==t)throw Error(`Size(${e}) must match the product of shape ${n}`);return n}if(t===0)throw Error(`Cannot infer the missing size in [${n}] when there are 0 elements`);if(e%t!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${t}`);const i=n.slice();return i[r]=e/t,i}function Ir(n,e){const t=e.length;return n=n==null?e.map((r,i)=>i):[].concat(n),de(n.every(r=>r>=-t&&r<t),()=>`All values in axis param must be in range [-${t}, ${t}) but got axis ${n}`),de(n.every(r=>m1(r)),()=>`All values in axis param must be integers but got axis ${n}`),n.map(r=>r<0?t+r:r)}function Wg(n,e){const t=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,s=e==null||i?null:Ir(e,n).sort();let o=0;for(let a=0;a<n.length;++a){if(s!=null){if(s[o]===a&&n[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${n[a]}' is not 1`);(s[o]==null||s[o]>a)&&n[a]===1&&(t.push(n[a]),r.push(a)),s[o]<=a&&o++}n[a]!==1&&(t.push(n[a]),r.push(a))}return{newShape:t,keptDims:r}}function la(n,e){return qs(n,e)}function qs(n,e){let t=null;if(n==null||n==="float32")t=new Float32Array(e);else if(n==="int32")t=new Int32Array(e);else if(n==="bool")t=new Uint8Array(e);else if(n==="string")t=new Array(e);else throw new Error(`Unknown data type ${n}`);return t}function uve(n,e){for(let t=0;t<n.length;t++){const r=n[t];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function dve(n){return n==="bool"||n==="complex64"||n==="float32"||n==="int32"||n==="string"}function bY(n,e){return!(e==="complex64"||e==="float32"&&n!=="complex64"||e==="int32"&&n!=="float32"&&n!=="complex64"||e==="bool"&&n==="bool")}function FR(n){if(n==="float32"||n==="int32")return 4;if(n==="complex64")return 8;if(n==="bool")return 1;throw new Error(`Unknown dtype ${n}`)}function hve(n){if(n==null)return 0;let e=0;return n.forEach(t=>e+=t.length),e}function UC(n){return typeof n=="string"||n instanceof String}function fve(n){return typeof n=="boolean"}function cL(n){return typeof n=="number"}function z1(n){return Array.isArray(n)?z1(n[0]):n instanceof Float32Array?"float32":n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray?"int32":cL(n)?"float32":UC(n)?"string":fve(n)?"bool":"float32"}function uL(n){return!!(n&&n.constructor&&n.call&&n.apply)}function dL(n,e){for(let t=e;t<n;++t)if(n%t===0)return t;return n}function kn(n){const e=n.length;if(e<2)return[];const t=new Array(e-1);t[e-2]=n[e-1];for(let r=e-3;r>=0;--r)t[r]=t[r+1]*n[r+1];return t}function xY(n,e,t,r=!1){const i=new Array;if(e.length===1){const s=e[0]*(r?2:1);for(let o=0;o<s;o++)i[o]=t[n+o]}else{const s=e[0],o=e.slice(1),a=o.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<s;l++)i[l]=xY(n+l*a,o,t,r)}return i}function Xu(n,e,t=!1){if(n.length===0)return e[0];const r=n.reduce((i,s)=>i*s)*(t?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${n}] does not match the input size ${e.length}${t?" for a complex tensor":""}.`);return xY(0,n,e,t)}function pve(n,e){if(Array.isArray(n))return n;if(e==="float32")return n instanceof Float32Array?n:new Float32Array(n);if(e==="int32")return n instanceof Int32Array?n:new Int32Array(n);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(n));throw new Error(`Unknown dtype ${e}`)}function m4(n,e){const t=ka(n,e);for(let r=0;r<t.length;r++)t[r]=1;return t}function ka(n,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool")return new Uint8Array(n);throw new Error(`Unknown data type ${e}`)}function SY(n,e){const t=n.reduce((r,i)=>r*i,1);if(e==null||e==="float32")return Xu(n,new Float32Array(t));if(e==="int32")return Xu(n,new Int32Array(t));if(e==="bool")return Xu(n,new Uint8Array(t));throw new Error(`Unknown data type ${e}`)}function lu(n){n.forEach(e=>{de(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${n}].`)})}function gf(n,e,t){if(e===0)return 0;if(e===1)return n[0];let r=n[n.length-1];for(let i=0;i<n.length-1;++i)r+=t[i]*n[i];return r}function H1(n,e,t){if(e===0)return[];if(e===1)return[n];const r=new Array(e);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(n/t[i]),n-=r[i]*t[i];return r[r.length-1]=n,r}function cv(n){return n&&n.then&&typeof n.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S8="tfjsflags";let mve=class{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=gve,this.populateURLFlags()}setPlatform(e,t){this.platform!=null&&(it().getBool("IS_TEST")||it().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,r){if(this.flagRegistry[e]={evaluationFn:t,setHook:r},this.urlFlags[e]!=null){const i=this.urlFlags[e];it().getBool("IS_TEST")||it().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${i}.`),this.set(e,i)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(cv(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);S8 in e&&e[S8].split(",").forEach(r=>{const[i,s]=r.split(":");this.urlFlags[i]=vve(i,s)})}};function gve(n){const e={};return n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(t,...r)=>(yve(e,r[0],r[1]),r.join("="))),e}function yve(n,e,t){n[decodeURIComponent(e)]=decodeURIComponent(t||"")}function vve(n,e){const t=e.toLowerCase();return t==="true"||t==="false"?t==="true":`${+t}`===t?+t:e}function it(){return wY}let wY=null;function bve(n){wY=n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let JO;function _Y(){if(JO==null){let n;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else if(typeof self<"u")n=self;else throw new Error("Could not find a global object");JO=n}return JO}function xve(){const n=_Y();return n._tfGlobals==null&&(n._tfGlobals=new Map),n._tfGlobals}function g4(n,e){const t=xve();if(t.has(n))return t.get(n);{const r=e();return t.set(n,r),t.get(n)}}const UI="Abs",zC="Acos",HC="Acosh",V1="Add",zI="AddN",y4="All",v4="Any",HI="ArgMax",VI="ArgMin",VC="Asin",GC="Asinh",WC="Atan",jC="Atanh",XC="Atan2",GI="AvgPool",b4="AvgPoolGrad",WI="AvgPool3D",x4="AvgPool3DGrad",jI="BatchMatMul",XI="BatchToSpaceND",S4="Bincount",qI="BitwiseAnd",Sve="BroadcastTo",w4="BroadcastArgs",qC="Cast",KC="Ceil",YC="ClipByValue",_4="Complex",KI="ComplexAbs",YI="Concat",JI="Conv2D",C4="Conv2DBackpropFilter",ZI="Conv2DBackpropInput",QI="Conv3D",E4="Conv3DBackpropFilterV2",A4="Conv3DBackpropInputV2",JC="Cos",ZC="Cosh",T4="Cumprod",eD="Cumsum",M4="CropAndResize",R4="DenseBincount",N4="DepthToSpace",tD="DepthwiseConv2dNative",I4="DepthwiseConv2dNativeBackpropFilter",D4="DepthwiseConv2dNativeBackpropInput",k4="Diag",nD="Dilation2D",hL="Dilation2DBackpropInput",fL="Dilation2DBackpropFilter",wve="Draw",QC="RealDiv",O4="Einsum",eE="Elu",B4="EluGrad",tE="Erf",rD="Equal",nE="Exp",iD="ExpandDims",rE="Expm1",$4="FFT",L4="Fill",F4="FlipLeftRight",iE="Floor",sE="FloorDiv",sD="FusedBatchNorm",oD="GatherV2",P4="GatherNd",aD="Greater",oE="GreaterEqual",aE="Identity",U4="IFFT",z4="Imag",lE="IsFinite",cE="IsInf",uE="IsNan",lD="LeakyRelu",cD="Less",uD="LessEqual",H4="LinSpace",dE="Log",hE="Log1p",dD="LogicalAnd",hD="LogicalNot",fD="LogicalOr",_ve="LogSoftmax",pD="LRN",V4="LRNGrad",mD="Max",fE="Maximum",gD="MaxPool",G4="MaxPoolGrad",yD="MaxPool3D",W4="MaxPool3DGrad",j4="MaxPoolWithArgmax",vD="Mean",bD="Min",pE="Minimum",xD="MirrorPad",mE="Mod",X4="Multinomial",gE="Multiply",SD="Neg",wD="NotEqual",q4="NonMaxSuppressionV3",K4="NonMaxSuppressionV4",Y4="NonMaxSuppressionV5",_D="OnesLike",CD="OneHot",ED="Pack",AD="PadV2",yE="Pow",TD="Prelu",MD="Prod",J4="RaggedGather",Z4="RaggedRange",Q4="RaggedTensorToTensor",eU="Range",tU="Real",vE="Reciprocal",bE="Relu",RD="Reshape",ND="ResizeNearestNeighbor",nU="ResizeNearestNeighborGrad",ID="ResizeBilinear",rU="ResizeBilinearGrad",xE="Relu6",DD="Reverse",SE="Round",wE="Rsqrt",iU="ScatterNd",sU="TensorScatterUpdate",oU="SearchSorted",kD="Select",_E="Selu",OD="Slice",CE="Sin",EE="Sinh",AE="Sign",TE="Sigmoid",ME="Softplus",RE="Sqrt",BD="Sum",$D="SpaceToBatchND",LD="SplitV",FD="Softmax",aU="SparseFillEmptyRows",lU="SparseReshape",cU="SparseSegmentMean",uU="SparseSegmentSum",dU="SparseToDense",NE="SquaredDifference",hU="Square",PD="StaticRegexReplace",fU="StridedSlice",pU="StringNGrams",mU="StringSplit",gU="StringToHashBucketFast",IE="Sub",DE="Tan",kE="Tanh",OE="Tile",yU="TopK",vU="Transform",Ux="Transpose",bU="Unique",UD="Unpack",zD="UnsortedSegmentSum",HD="ZerosLike",BE="Step",pL="FromPixels",xU="RotateWithOffset",PR="_FusedMatMul",UR="FusedConv2D",zR="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qc(...n){it().getBool("IS_TEST")||it().getBool("PROD")||console.warn(...n)}function Cve(...n){it().getBool("IS_TEST")||it().getBool("PROD")||console.log(...n)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HR=g4("kernelRegistry",()=>new Map),mL=g4("gradRegistry",()=>new Map);function gL(n,e){const t=EY(n,e);return HR.get(t)}function w8(n){return mL.get(n)}function _8(n){const e=HR.entries(),t=[];for(;;){const{done:r,value:i}=e.next();if(r)break;const[s,o]=i,[a]=s.split("_");a===n&&t.push(o)}return t}function CY(n){const{kernelName:e,backendName:t}=n,r=EY(e,t);HR.has(r)&&Qc(`The kernel '${e}' for backend '${t}' is already registered`),HR.set(r,n)}function Eve(n){const{kernelName:e}=n;mL.has(e)&&it().getBool("DEBUG")&&Qc(`Overriding the gradient for '${e}'`),mL.set(e,n)}function EY(n,e){return`${e}_${n}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AY(n){return n instanceof Float32Array||n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray}var ZO,C8;function Ave(){if(C8)return ZO;C8=1,ZO=e;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function e(I,D,P){this.low=I|0,this.high=D|0,this.unsigned=!!P}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0});function t(I){return(I&&I.__isLong__)===!0}e.isLong=t;var r={},i={};function s(I,D){var P,G,W;return D?(I>>>=0,(W=0<=I&&I<256)&&(G=i[I],G)?G:(P=a(I,(I|0)<0?-1:0,!0),W&&(i[I]=P),P)):(I|=0,(W=-128<=I&&I<128)&&(G=r[I],G)?G:(P=a(I,I<0?-1:0,!1),W&&(r[I]=P),P))}e.fromInt=s;function o(I,D){if(isNaN(I))return D?_:x;if(D){if(I<0)return _;if(I>=g)return L}else{if(I<=-v)return B;if(I+1>=v)return R}return I<0?o(-I,D).neg():a(I%p|0,I/p|0,D)}e.fromNumber=o;function a(I,D,P){return new e(I,D,P)}e.fromBits=a;var l=Math.pow;function c(I,D,P){if(I.length===0)throw Error("empty string");if(I==="NaN"||I==="Infinity"||I==="+Infinity"||I==="-Infinity")return x;if(typeof D=="number"?(P=D,D=!1):D=!!D,P=P||10,P<2||36<P)throw RangeError("radix");var G;if((G=I.indexOf("-"))>0)throw Error("interior hyphen");if(G===0)return c(I.substring(1),D,P).neg();for(var W=o(l(P,8)),q=x,z=0;z<I.length;z+=8){var J=Math.min(8,I.length-z),Q=parseInt(I.substring(z,z+J),P);if(J<8){var Y=o(l(P,J));q=q.mul(Y).add(o(Q))}else q=q.mul(W),q=q.add(o(Q))}return q.unsigned=D,q}e.fromString=c;function u(I,D){return typeof I=="number"?o(I,D):typeof I=="string"?c(I,D):a(I.low,I.high,typeof D=="boolean"?D:I.unsigned)}e.fromValue=u;var d=65536,f=1<<24,p=d*d,g=p*p,v=g/2,b=s(f),x=s(0);e.ZERO=x;var _=s(0,!0);e.UZERO=_;var E=s(1);e.ONE=E;var C=s(1,!0);e.UONE=C;var M=s(-1);e.NEG_ONE=M;var R=a(-1,2147483647,!1);e.MAX_VALUE=R;var L=a(-1,-1,!0);e.MAX_UNSIGNED_VALUE=L;var B=a(0,-2147483648,!1);e.MIN_VALUE=B;var N=e.prototype;return N.toInt=function(){return this.unsigned?this.low>>>0:this.low},N.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},N.toString=function(D){if(D=D||10,D<2||36<D)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(B)){var P=o(D),G=this.div(P),W=G.mul(P).sub(this);return G.toString(D)+W.toInt().toString(D)}else return"-"+this.neg().toString(D);for(var q=o(l(D,6),this.unsigned),z=this,J="";;){var Q=z.div(q),Y=z.sub(Q.mul(q)).toInt()>>>0,X=Y.toString(D);if(z=Q,z.isZero())return X+J;for(;X.length<6;)X="0"+X;J=""+X+J}},N.getHighBits=function(){return this.high},N.getHighBitsUnsigned=function(){return this.high>>>0},N.getLowBits=function(){return this.low},N.getLowBitsUnsigned=function(){return this.low>>>0},N.getNumBitsAbs=function(){if(this.isNegative())return this.eq(B)?64:this.neg().getNumBitsAbs();for(var D=this.high!=0?this.high:this.low,P=31;P>0&&(D&1<<P)==0;P--);return this.high!=0?P+33:P+1},N.isZero=function(){return this.high===0&&this.low===0},N.eqz=N.isZero,N.isNegative=function(){return!this.unsigned&&this.high<0},N.isPositive=function(){return this.unsigned||this.high>=0},N.isOdd=function(){return(this.low&1)===1},N.isEven=function(){return(this.low&1)===0},N.equals=function(D){return t(D)||(D=u(D)),this.unsigned!==D.unsigned&&this.high>>>31===1&&D.high>>>31===1?!1:this.high===D.high&&this.low===D.low},N.eq=N.equals,N.notEquals=function(D){return!this.eq(D)},N.neq=N.notEquals,N.ne=N.notEquals,N.lessThan=function(D){return this.comp(D)<0},N.lt=N.lessThan,N.lessThanOrEqual=function(D){return this.comp(D)<=0},N.lte=N.lessThanOrEqual,N.le=N.lessThanOrEqual,N.greaterThan=function(D){return this.comp(D)>0},N.gt=N.greaterThan,N.greaterThanOrEqual=function(D){return this.comp(D)>=0},N.gte=N.greaterThanOrEqual,N.ge=N.greaterThanOrEqual,N.compare=function(D){if(t(D)||(D=u(D)),this.eq(D))return 0;var P=this.isNegative(),G=D.isNegative();return P&&!G?-1:!P&&G?1:this.unsigned?D.high>>>0>this.high>>>0||D.high===this.high&&D.low>>>0>this.low>>>0?-1:1:this.sub(D).isNegative()?-1:1},N.comp=N.compare,N.negate=function(){return!this.unsigned&&this.eq(B)?B:this.not().add(E)},N.neg=N.negate,N.add=function(D){t(D)||(D=u(D));var P=this.high>>>16,G=this.high&65535,W=this.low>>>16,q=this.low&65535,z=D.high>>>16,J=D.high&65535,Q=D.low>>>16,Y=D.low&65535,X=0,te=0,ne=0,le=0;return le+=q+Y,ne+=le>>>16,le&=65535,ne+=W+Q,te+=ne>>>16,ne&=65535,te+=G+J,X+=te>>>16,te&=65535,X+=P+z,X&=65535,a(ne<<16|le,X<<16|te,this.unsigned)},N.subtract=function(D){return t(D)||(D=u(D)),this.add(D.neg())},N.sub=N.subtract,N.multiply=function(D){if(this.isZero())return x;if(t(D)||(D=u(D)),n){var P=n.mul(this.low,this.high,D.low,D.high);return a(P,n.get_high(),this.unsigned)}if(D.isZero())return x;if(this.eq(B))return D.isOdd()?B:x;if(D.eq(B))return this.isOdd()?B:x;if(this.isNegative())return D.isNegative()?this.neg().mul(D.neg()):this.neg().mul(D).neg();if(D.isNegative())return this.mul(D.neg()).neg();if(this.lt(b)&&D.lt(b))return o(this.toNumber()*D.toNumber(),this.unsigned);var G=this.high>>>16,W=this.high&65535,q=this.low>>>16,z=this.low&65535,J=D.high>>>16,Q=D.high&65535,Y=D.low>>>16,X=D.low&65535,te=0,ne=0,le=0,ye=0;return ye+=z*X,le+=ye>>>16,ye&=65535,le+=q*X,ne+=le>>>16,le&=65535,le+=z*Y,ne+=le>>>16,le&=65535,ne+=W*X,te+=ne>>>16,ne&=65535,ne+=q*Y,te+=ne>>>16,ne&=65535,ne+=z*Q,te+=ne>>>16,ne&=65535,te+=G*X+W*Y+q*Q+z*J,te&=65535,a(le<<16|ye,te<<16|ne,this.unsigned)},N.mul=N.multiply,N.divide=function(D){if(t(D)||(D=u(D)),D.isZero())throw Error("division by zero");if(n){if(!this.unsigned&&this.high===-2147483648&&D.low===-1&&D.high===-1)return this;var P=(this.unsigned?n.div_u:n.div_s)(this.low,this.high,D.low,D.high);return a(P,n.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?_:x;var G,W,q;if(this.unsigned){if(D.unsigned||(D=D.toUnsigned()),D.gt(this))return _;if(D.gt(this.shru(1)))return C;q=_}else{if(this.eq(B)){if(D.eq(E)||D.eq(M))return B;if(D.eq(B))return E;var z=this.shr(1);return G=z.div(D).shl(1),G.eq(x)?D.isNegative()?E:M:(W=this.sub(D.mul(G)),q=G.add(W.div(D)),q)}else if(D.eq(B))return this.unsigned?_:x;if(this.isNegative())return D.isNegative()?this.neg().div(D.neg()):this.neg().div(D).neg();if(D.isNegative())return this.div(D.neg()).neg();q=x}for(W=this;W.gte(D);){G=Math.max(1,Math.floor(W.toNumber()/D.toNumber()));for(var J=Math.ceil(Math.log(G)/Math.LN2),Q=J<=48?1:l(2,J-48),Y=o(G),X=Y.mul(D);X.isNegative()||X.gt(W);)G-=Q,Y=o(G,this.unsigned),X=Y.mul(D);Y.isZero()&&(Y=E),q=q.add(Y),W=W.sub(X)}return q},N.div=N.divide,N.modulo=function(D){if(t(D)||(D=u(D)),n){var P=(this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,D.low,D.high);return a(P,n.get_high(),this.unsigned)}return this.sub(this.div(D).mul(D))},N.mod=N.modulo,N.rem=N.modulo,N.not=function(){return a(~this.low,~this.high,this.unsigned)},N.and=function(D){return t(D)||(D=u(D)),a(this.low&D.low,this.high&D.high,this.unsigned)},N.or=function(D){return t(D)||(D=u(D)),a(this.low|D.low,this.high|D.high,this.unsigned)},N.xor=function(D){return t(D)||(D=u(D)),a(this.low^D.low,this.high^D.high,this.unsigned)},N.shiftLeft=function(D){return t(D)&&(D=D.toInt()),(D&=63)===0?this:D<32?a(this.low<<D,this.high<<D|this.low>>>32-D,this.unsigned):a(0,this.low<<D-32,this.unsigned)},N.shl=N.shiftLeft,N.shiftRight=function(D){return t(D)&&(D=D.toInt()),(D&=63)===0?this:D<32?a(this.low>>>D|this.high<<32-D,this.high>>D,this.unsigned):a(this.high>>D-32,this.high>=0?0:-1,this.unsigned)},N.shr=N.shiftRight,N.shiftRightUnsigned=function(D){if(t(D)&&(D=D.toInt()),D&=63,D===0)return this;var P=this.high;if(D<32){var G=this.low;return a(G>>>D|P<<32-D,P>>>D,this.unsigned)}else return D===32?a(P,0,this.unsigned):a(P>>>D-32,0,this.unsigned)},N.shru=N.shiftRightUnsigned,N.shr_u=N.shiftRightUnsigned,N.toSigned=function(){return this.unsigned?a(this.low,this.high,!1):this},N.toUnsigned=function(){return this.unsigned?this:a(this.low,this.high,!0)},N.toBytes=function(D){return D?this.toBytesLE():this.toBytesBE()},N.toBytesLE=function(){var D=this.high,P=this.low;return[P&255,P>>>8&255,P>>>16&255,P>>>24,D&255,D>>>8&255,D>>>16&255,D>>>24]},N.toBytesBE=function(){var D=this.high,P=this.low;return[D>>>24,D>>>16&255,D>>>8&255,D&255,P>>>24,P>>>16&255,P>>>8&255,P&255]},e.fromBytes=function(D,P,G){return G?e.fromBytesLE(D,P):e.fromBytesBE(D,P)},e.fromBytesLE=function(D,P){return new e(D[0]|D[1]<<8|D[2]<<16|D[3]<<24,D[4]|D[5]<<8|D[6]<<16|D[7]<<24,P)},e.fromBytesBE=function(D,P){return new e(D[4]<<24|D[5]<<16|D[6]<<8|D[7],D[0]<<24|D[1]<<16|D[2]<<8|D[3],P)},ZO}var TY=Ave();const MY=Zp(TY),Tve=jX({__proto__:null,default:MY},[TY]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ey=MY||Tve;function VD(n){return Ey.fromString(n,!0,16)}const RY=VD("c3a5c85c97cb3127"),xy=VD("b492b66fbe98f273"),Qa=VD("9ae16a3b2f90404f");function yL(n){return n.xor(n.shru(47))}function NY(n,e,t){const r=n.slice(e,e+t);return Ey.fromBytes(Array.from(r),!0,!0)}function es(n,e){return NY(n,e,8)}function E8(n,e){return NY(n,e,4)}function Po(n,e){return e===0?n:n.shru(e).or(n.shl(64-e))}function yg(n,e,t=VD("9ddfea08eb382d69")){let r=n.xor(e).mul(t);r=r.xor(r.shru(47));let i=e.xor(r).mul(t);return i=i.xor(i.shru(47)),i=i.mul(t),i}function Mve(n,e,t,r,i,s){i=i.add(n),s=Po(s.add(i).add(r),21);const o=i;return i=i.add(e),i=i.add(t),s=s.add(Po(i,44)),[i.add(r),s.add(o)]}function BT(n,e,t,r){return Mve(es(n,e),es(n,e+8),es(n,e+16),es(n,e+24),t,r)}function Rve(n,e=n.length){if(e>=8){const t=Qa.add(e*2),r=es(n,0).add(Qa),i=es(n,e-8),s=Po(i,37).mul(t).add(r),o=Po(r,25).add(i).mul(t);return yg(s,o,t)}if(e>=4){const t=Qa.add(e*2),r=E8(n,0);return yg(r.shl(3).add(e),E8(n,e-4),t)}if(e>0){const t=n[0],r=n[e>>1],i=n[e-1],s=t+(r<<8),o=e+(i<<2);return yL(Qa.mul(s).xor(RY.mul(o))).mul(Qa)}return Qa}function Nve(n,e=n.length){const t=Qa.add(e*2),r=es(n,0).mul(xy),i=es(n,8),s=es(n,e-8).mul(t),o=es(n,e-16).mul(Qa);return yg(Po(r.add(i),43).add(Po(s,30)).add(o),r.add(Po(i.add(Qa),18)).add(s),t)}function Ive(n,e=n.length){const t=Qa.add(e*2),r=es(n,0).mul(Qa),i=es(n,8),s=es(n,e-8).mul(t),o=es(n,e-16).mul(Qa),a=Po(r.add(i),43).add(Po(s,30)).add(o),l=yg(a,r.add(Po(i.add(Qa),18)).add(s),t),c=es(n,16).mul(t),u=es(n,24),d=a.add(es(n,e-32)).mul(t),f=l.add(es(n,e-24)).mul(t);return yg(Po(c.add(u),43).add(Po(d,30)).add(f),c.add(Po(u.add(r),18)).add(d),t)}function Dve(n,e=n.length){const t=Ey.fromNumber(81,!0);if(e<=32)return e<=16?Rve(n,e):Nve(n,e);if(e<=64)return Ive(n,e);let r=t,i=t.mul(xy).add(113),s=yL(i.mul(Qa).add(113)).mul(Qa),o=[Ey.UZERO,Ey.UZERO],a=[Ey.UZERO,Ey.UZERO];r=r.mul(Qa).add(es(n,0));let l=0;const c=(e-1>>6)*64,u=c+(e-1&63)-63;do r=Po(r.add(i).add(o[0]).add(es(n,l+8)),37).mul(xy),i=Po(i.add(o[1]).add(es(n,l+48)),42).mul(xy),r=r.xor(a[1]),i=i.add(o[0]).add(es(n,l+40)),s=Po(s.add(a[0]),33).mul(xy),o=BT(n,l,o[1].mul(xy),r.add(a[0])),a=BT(n,l+32,s.add(a[1]),i.add(es(n,l+16))),[s,r]=[r,s],l+=64;while(l!==c);const d=xy.add(s.and(255).shl(1));return l=u,a[0]=a[0].add(e-1&63),o[0]=o[0].add(a[0]),a[0]=a[0].add(o[0]),r=Po(r.add(i).add(o[0]).add(es(n,l+8)),37).mul(d),i=Po(i.add(o[1]).add(es(n,l+48)),42).mul(d),r=r.xor(a[1].mul(9)),i=i.add(o[0].mul(9).add(es(n,l+40))),s=Po(s.add(a[0]),33).mul(d),o=BT(n,l,o[1].mul(d),r.add(a[0])),a=BT(n,l+32,s.add(a[1]),i.add(es(n,l+16))),[s,r]=[r,s],yg(yg(o[0],a[0],d).add(yL(i).mul(RY)).add(s),yg(o[1],a[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jg(n,e){return e==="string"?vg(n):kv([n],e)}function kve(n,e){return n instanceof Float32Array&&e==="float32"||n instanceof Int32Array&&e==="int32"||n instanceof Uint8Array&&e==="bool"}function kv(n,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(n)&&(n=uv(n)),it().getBool("DEBUG")&&uve(n,e),kve(n,e))return n;if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool"){const t=new Uint8Array(n.length);for(let r=0;r<t.length;++r)Math.round(n[r])!==0&&(t[r]=1);return t}else throw new Error(`Unknown data type ${e}`)}function Ol(){return it().platform.now()}function vg(n,e="utf-8"){return e=e||"utf-8",it().platform.encode(n,e)}function Mg(n,e="utf-8"){return e=e||"utf-8",it().platform.decode(n,e)}function Ju(n){return it().platform.isTypedArray!=null?it().platform.isTypedArray(n):AY(n)}function uv(n,e=[],t=!1){if(e==null&&(e=[]),typeof n=="boolean"||typeof n=="number"||typeof n=="string"||cv(n)||n==null||Ju(n)&&t)e.push(n);else if(Array.isArray(n)||Ju(n))for(let r=0;r<n.length;++r)uv(n[r],e,t);else{let r=-1;for(const i of Object.keys(n))/^([1-9]+[0-9]*|0)$/.test(i)&&(r=Math.max(r,Number(i)));for(let i=0;i<=r;i++)uv(n[i],e,t)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ove{constructor(e,t){this.backendTimer=e,this.logger=t,t==null&&(this.logger=new $ve)}profileKernel(e,t,r){let i;const s=()=>{i=r()};let o;const a=Ol();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(s);else{s();for(const c of i)c.dataSync();o=Promise.resolve({kernelMs:Ol()-a})}if(it().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<i.length;c++){const u=i[c];u.data().then(d=>{Bve(d,u.dtype,e)})}return{kernelName:e,outputs:i,inputs:t,timeMs:o.then(c=>c.kernelMs),extraInfo:o.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:t,outputs:r,timeMs:i,inputs:s,extraInfo:o}=e;r.forEach(a=>{Promise.all([a.data(),i,o]).then(l=>{this.logger.logKernelProfile(t,a,l[0],l[1],s,l[2])})})}}function Bve(n,e,t){if(e!=="float32")return!1;for(let r=0;r<n.length;r++){const i=n[r];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${t}'`),!0}return!1}class $ve{logKernelProfile(e,t,r,i,s,o){const a=typeof i=="number"?Px(`${i}ms`,9):i.error,l=Px(e,25),c=t.rank,u=t.size,d=Px(t.shape.toString(),14);let f="";for(const p in s){const g=s[p];if(g!=null){const v=g.shape||t.shape,b=v.length;f+=`${p}: ${b}D ${b>0?v:""} `}}console.log(`%c${l}	%c${a}	%c${c}D ${d}	%c${u}	%c${f}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lve(n,e,t){const r={},i={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<n.length;l++){const c=n[l],u=c.inputs;for(const d in u){const f=u[d];let p=!1;for(let g=0;g<e.length;g++)if(r[f.id]){c.outputs.forEach(v=>r[v.id]=!0),p=!0,i[c.id]=!0;break}if(p)break}}const s={};s[t.id]=!0;const o={};for(let l=n.length-1;l>=0;l--){const c=n[l],u=c.inputs;for(let d=0;d<c.outputs.length;d++)if(s[c.outputs[d].id]){for(const f in u)s[u[f].id]=!0,o[c.id]=!0;break}}const a=[];for(let l=0;l<n.length;l++){const c=n[l];if(i[c.id]&&o[c.id]){const u={};for(const f in c.inputs){const p=c.inputs[f];r[p.id]&&(u[f]=p)}const d=Object.assign({},c);d.inputs=u,d.outputs=c.outputs,a.push(d)}}return a}function Fve(n,e,t,r){for(let i=e.length-1;i>=0;i--){const s=e[i],o=[];if(s.outputs.forEach(l=>{const c=n[l.id];c!=null?o.push(c):o.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);const a=s.gradient(o);for(const l in s.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const c=t(()=>a[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const u=s.inputs[l];if(!Vr(c.shape,u.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(n[u.id]==null)n[u.id]=c;else{const d=n[u.id];n[u.id]=r(d,c),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A8=20,Dw=3,QO=7;function Pve(n,e,t,r){const i=kn(e),s=Uve(n,e,t,i),o=e.length,a=CM(n,e,t,i,s),l=["Tensor"];return r&&(l.push(`  dtype: ${t}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join(`
`)),l.join(`
`)}function Uve(n,e,t,r){const i=xt(e),s=r[r.length-1],o=new Array(s).fill(0),a=e.length,l=t==="complex64"?i_(n):n;if(a>1)for(let c=0;c<i/s;c++){const u=c*s;for(let d=0;d<s;d++)o[d]=Math.max(o[d],r_(l[u+d],0,t).length)}return o}function r_(n,e,t){let r;return Array.isArray(n)?r=`${parseFloat(n[0].toFixed(QO))} + ${parseFloat(n[1].toFixed(QO))}j`:UC(n)?r=`'${n}'`:t==="bool"?r=IY(n):r=parseFloat(n.toFixed(QO)).toString(),Px(r,e)}function IY(n){return n===0?"false":"true"}function CM(n,e,t,r,i,s=!0){const o=t==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(t==="complex64"){const v=i_(n);return[r_(v[0],0,t)]}return t==="bool"?[IY(n[0])]:[n[0].toString()]}if(l===1){if(a>A8){const b=Dw*o;let x=Array.from(n.slice(0,b)),_=Array.from(n.slice((a-Dw)*o,a*o));return t==="complex64"&&(x=i_(x),_=i_(_)),["["+x.map((E,C)=>r_(E,i[C],t)).join(", ")+", ..., "+_.map((E,C)=>r_(E,i[a-Dw+C],t)).join(", ")+"]"]}return["["+(t==="complex64"?i_(n):Array.from(n)).map((b,x)=>r_(b,i[x],t)).join(", ")+"]"]}const c=e.slice(1),u=r.slice(1),d=r[0]*o,f=[];if(a>A8){for(let v=0;v<Dw;v++){const b=v*d,x=b+d;f.push(...CM(n.slice(b,x),c,t,u,i,!1))}f.push("...");for(let v=a-Dw;v<a;v++){const b=v*d,x=b+d;f.push(...CM(n.slice(b,x),c,t,u,i,v===a-1))}}else for(let v=0;v<a;v++){const b=v*d,x=b+d;f.push(...CM(n.slice(b,x),c,t,u,i,v===a-1))}const p=l===2?",":"";f[0]="["+(a>0?f[0]+p:"");for(let v=1;v<f.length-1;v++)f[v]=" "+f[v]+p;let g=`,
`;for(let v=2;v<l;v++)g+=`
`;return f[f.length-1]=" "+f[f.length-1]+"]"+(s?"":g),f}function i_(n){const e=[];for(let t=0;t<n.length;t+=2)e.push([n[t],n[t+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ao{constructor(e,t,r){if(this.dtype=t,this.shape=e.slice(),this.size=xt(e),r!=null){const i=r.length;de(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||qs(t,this.size),this.strides=kn(e)}set(e,...t){t.length===0&&(t=[0]),de(t.length===this.rank,()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`);const r=this.locToIndex(t);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let t=0;for(const i of e){if(i<0||i>=this.shape[t]){const s=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(s)}t++}let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=this.strides[i]*e[i];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let t=e[e.length-1];for(let r=0;r<e.length-1;++r)t+=this.strides[r]*e[r];return t}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const t=new Array(this.shape.length);for(let r=0;r<t.length-1;++r)t[r]=Math.floor(e/this.strides[r]),e-=t[r]*this.strides[r];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return Xd().makeTensor(this.values,this.shape,this.dtype)}}let Xd=null,Rx=null;function zve(n){Xd=n}function Hve(n){Rx=n}class qi{constructor(e,t,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=xt(e),this.strides=kn(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Rx.buffer(this.shape,this.dtype,e)}bufferSync(){return Rx.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Xu(this.shape,e,this.dtype==="complex64")}arraySync(){return Xu(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Xd().read(this.dataId);if(this.dtype==="string"){const t=await e;try{return t.map(r=>Mg(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Xd().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Xd().readSync(this.dataId);if(this.dtype==="string")try{return e.map(t=>Mg(t))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Xd().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Xd().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Rx.print(this,e)}clone(){return this.throwIfDisposed(),Rx.clone(this)}toString(e=!1){const t=this.dataSync();return Pve(t,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Rx.cast(this,e)}variable(e=!0,t,r){return this.throwIfDisposed(),Xd().makeVariable(this,e,t,r)}}Object.defineProperty(qi,Symbol.hasInstance,{value:n=>!!n&&n.data!=null&&n.dataSync!=null&&n.throwIfDisposed!=null});function _t(){return g4("Tensor",()=>qi)}_t();class VR extends qi{constructor(e,t,r,i){super(e.shape,e.dtype,e.dataId,i),this.trainable=t,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Vr(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Xd().disposeTensor(this),this.dataId=e.dataId,Xd().incRef(this,null)}dispose(){Xd().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(VR,Symbol.hasInstance,{value:n=>n instanceof qi&&n.assign!=null&&n.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var T8;(function(n){n.R0="R0",n.R1="R1",n.R2="R2",n.R3="R3",n.R4="R4",n.R5="R5",n.R6="R6"})(T8||(T8={}));var vL;(function(n){n.float32="float32",n.int32="int32",n.bool="int32",n.complex64="complex64"})(vL||(vL={}));var bL;(function(n){n.float32="float32",n.int32="int32",n.bool="bool",n.complex64="complex64"})(bL||(bL={}));var xL;(function(n){n.float32="float32",n.int32="float32",n.bool="float32",n.complex64="complex64"})(xL||(xL={}));var SL;(function(n){n.float32="complex64",n.int32="complex64",n.bool="complex64",n.complex64="complex64"})(SL||(SL={}));const Vve={float32:xL,int32:vL,bool:bL,complex64:SL};function Tc(n,e){if(n==="string"||e==="string"){if(n==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${n} with ${e}`)}return Vve[n][e]}function SU(n){return Tc(n,"int32")}function DY(n){return n!=null&&typeof n=="object"&&"texture"in n&&n.texture instanceof WebGLTexture}function kY(n){return typeof GPUBuffer<"u"&&n!=null&&typeof n=="object"&&"buffer"in n&&n.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ls(n,e){if(n.dtype===e.dtype)return[n,e];const t=Tc(n.dtype,e.dtype);return[n.cast(t),e.cast(t)]}function Gve(n,e){de(n.dtype===e.dtype,()=>`The dtypes of the first(${n.dtype}) and second(${e.dtype}) input must match`)}function OY(n){const e=[];return BY(n,e,new Set),e}function BY(n,e,t){if(n==null)return;if(n instanceof qi){e.push(n);return}if(!Wve(n))return;const r=n;for(const i in r){const s=r[i];t.has(s)||(t.add(s),BY(s,e,t))}}function Wve(n){return Array.isArray(n)||typeof n=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eB(n){return n.kernelName!=null}class M8{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}let wU=class wL{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new M8}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const r=e[t];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:t}=this.initializeBackend(e);if(t)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,r=1){return e in this.registryFactory?(Qc(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:t,asyncInit:r}=this.initializeBackend(e);if(!(r?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Ove(this.backendInstance),!0}setupRegisteredKernels(){_8(this.backendName).forEach(t=>{t.setupFunc!=null&&t.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){_8(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const t=this.registryFactory[e];if(t==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=t.factory();if(r&&!(r instanceof f4)&&typeof r.then=="function"){const i=++this.pendingBackendInitId,s=r.then(o=>i<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,Qc(`Initialization of backend ${e} failed`),Qc(o.stack||o.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Qc(`Initialization of backend ${e} failed`),Qc(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const r=e[t],{success:i,asyncInit:s}=this.initializeBackend(r);if(s||i)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const r=this.state.tensorInfo.get(t),i=r.backend,s=this.readSync(t),o=i.refCount(t);i.disposeData(t,!0),r.backend=e,e.move(t,s,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let r=null;if(t==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");t=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof t!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let i;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(i),()=>(i=t(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(e,t,r){e();try{const i=r();return t(),i}catch(i){throw t(),i}}nextTensorId(){return wL.nextTensorId++}nextVariableId(){return wL.nextVariableId++}clone(e){const t=Be.runKernel(aE,{x:e}),r={x:e},i=o=>({x:()=>{const a="float32",l={x:o},c={dtype:a};return Be.runKernel(qC,l,c)}}),s=[];return this.addTapeNode(this.state.activeScope.name,r,[t],i,s,{}),t}runKernel(e,t,r){if(this.backendName==null&&this.backend,!(gL(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,r){const i=this.backend.numDataIds();let s=0;r.forEach(l=>{s+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=i-t-s-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let t,r=[];const i=this.isTapeOn(),s=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const c=eB(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(eB(e)){const{kernelName:g,inputs:v,attrs:b}=e;this.backendName==null&&this.backend;const x=gL(g,this.backendName);de(x!=null,()=>`Cannot find registered kernel '${g}' for backend '${this.backendName}'`),a=()=>{const _=this.backend.numDataIds();l=x.kernelFunc({inputs:v,attrs:b,backend:this.backend});const E=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(g,_,E);const C=E.map(M=>M.rank!=null?M:this.makeTensorFromTensorInfo(M));if(i){const M=this.getTensorsForGradient(g,v,C);r=this.saveTensorsForBackwardMode(M)}return C}}else{const{forwardFunc:g}=e,v=b=>{i&&(r=b.map(x=>this.keep(this.clone(x))))};a=()=>{const b=this.backend.numDataIds();l=this.tidy(()=>g(this.backend,v));const x=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,b,x),x}}const{inputs:u,attrs:d}=e,f=eB(e)?null:e.backwardsFunc;let p;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?t=a():(p=this.profiler.profileKernel(c,u,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(p),t=p.outputs)}),i&&this.addTapeNode(c,u,t,f,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(g=>u[g]!=null?u[g].shape:null),outputShapes:t.map(g=>g.shape),kernelTimeMs:p.timeMs,extraInfo:p.extraInfo}),Array.isArray(l)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,t,r){const i=w8(e);if(i!=null){const s=i.inputsToSave||[],o=i.outputsToSave||[];let a;i.saveAllInputs?(de(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(t).map(c=>t[c])):a=s.map(c=>t[c]);const l=r.filter((c,u)=>o[u]);return a.concat(l)}return[]}makeTensor(e,t,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;let s=e;r==="string"&&UC(e[0])&&(s=e.map(l=>vg(l)));const o=i.write(s,t,r),a=new qi(t,r,o,this.nextTensorId());if(this.trackTensor(a,i),r==="string"){const l=this.state.tensorInfo.get(o),c=hve(s);this.state.numBytes+=c-l.bytes,l.bytes=c}return a}makeTensorFromDataId(e,t,r,i){r=r||"float32";const s={dataId:e,shape:t,dtype:r};return this.makeTensorFromTensorInfo(s,i)}makeTensorFromTensorInfo(e,t){const{dataId:r,shape:i,dtype:s}=e,o=new qi(i,s,r,this.nextTensorId());return this.trackTensor(o,t),o}makeVariable(e,t=!0,r,i){r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.cast(i));const s=new VR(e,t,r,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,t){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*FR(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof VR||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*FR(e.dtype);this.state.numBytes-=r}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,t,r,i,s,o){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:r,saved:s},l=w8(e);l!=null&&(i=l.gradFunc),i!=null&&(a.gradient=c=>(c=c.map((u,d)=>{if(u==null){const f=r[d],p=ka(f.size,f.dtype);return this.makeTensor(p,f.shape,f.dtype)}return u}),i(c.length>1?c:c[0],s,o))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=OY(e),r=new Set(t.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){const o=this.state.activeScope.track[s];!o.kept&&!r.has(o.id)&&o.dispose()}const i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(s=>{!s.kept&&s.scopeId===i.id&&this.track(s)})}gradients(e,t,r,i=!1){if(de(t.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));de(s instanceof qi,()=>"The result y returned by f() must be a tensor.");const o=Lve(this.state.activeTape,t,s);if(!i&&o.length===0&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[s.id]=r??jve(s.shape),Fve(a,o,c=>this.tidy(c),Xve);const l=t.map(c=>a[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const u of c.saved)u.dispose()}),this.state.activeTape=null),{value:s,grads:l}})}customGrad(e){return de(uL(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{de(t.every(a=>a instanceof qi),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const i={};t.forEach((a,l)=>{i[l]=a});const s=(a,l)=>(r=e(...t,l),de(r.value instanceof qi,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),de(uL(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(a,l)=>{const c=r.gradFunc(a,l),u=Array.isArray(c)?c:[c];de(u.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),de(u.every(f=>f instanceof qi),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return u.forEach((f,p)=>{d[p]=()=>f}),d};return this.runKernelFunc({forwardFunc:s,backwardsFunc:o,inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=Ol(),r=await this.backend.time(e);return r.wallMs=Ol()-t,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new M8;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}};wU.nextTensorId=0;wU.nextVariableId=0;function jve(n){const e=m4(xt(n),"float32");return Be.makeTensor(e,n,"float32")}function $Y(){const n=_Y();if(n._tfengine==null){const e=new mve(n);n._tfengine=new wU(e)}return bve(n._tfengine.ENV),zve(()=>n._tfengine),n._tfengine}const Be=$Y();function Xve(n,e){const t={a:n,b:e};return Be.runKernel(V1,t)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qve(){return typeof navigator<"u"&&navigator!=null}function LY(n){if(n||qve()){if(n||(n=navigator),n.product==="ReactNative")return!0;const e=n.userAgent||n.vendor||(typeof window<"u"?window.opera:"");if(!e){const t=n;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function FY(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hl=it();Hl.registerFlag("DEBUG",()=>!1,n=>{n&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Hl.registerFlag("IS_BROWSER",()=>FY());Hl.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Hl.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Hl.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Hl.registerFlag("PROD",()=>!1);Hl.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Hl.getBool("DEBUG"));Hl.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Hl.registerFlag("IS_TEST",()=>!1);Hl.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Hl.getBool("DEBUG"));Hl.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Hl.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Hl.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xg(n,e){let t=n;if(Ju(n))return e==="string"?[]:[n.length];if(DY(n)){const i=n.channels||"RGBA";return[n.height,n.width*i.length]}else if(kY(n))return[n.buffer.size/(e==null?4:FR(e))];if(!Array.isArray(n))return[];const r=[];for(;Array.isArray(t)||Ju(t)&&e!=="string";)r.push(t.length),t=t[0];return Array.isArray(n)&&it().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&PY(n,r,[]),r}function PY(n,e,t){if(t=t||[],!Array.isArray(n)&&!Ju(n)){de(e.length===0,()=>`Element arr[${t.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}de(e.length>0,()=>`Element arr[${t.join("][")}] should be a primitive, but is an array of ${n.length} elements`),de(n.length===e[0],()=>`Element arr[${t.join("][")}] should have ${e[0]} elements, but has ${n.length} elements`);const r=e.slice(1);for(let i=0;i<n.length;++i)PY(n[i],r,t.concat(i))}function R8(n,e,t,r){if(n!=="string_or_numeric"){if(n==null)throw new Error("Expected dtype cannot be null.");if(n!=="numeric"&&n!==e||n==="numeric"&&e==="string")throw new Error(`Argument '${t}' passed to '${r}' must be ${n} tensor, but got ${e} tensor`)}}function fe(n,e,t,r="numeric"){if(n instanceof _t())return R8(r,n.dtype,e,t),n;let i=z1(n);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),R8(r,i,e,t),n==null||!Ju(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string"){const l=n==null?"null":n.constructor.name;throw new Error(`Argument '${e}' passed to '${t}' must be a Tensor or TensorLike, but got '${l}'`)}const s=Xg(n,i);!Ju(n)&&!Array.isArray(n)&&(n=[n]);const a=i!=="string"?kv(n,i):uv(n,[],!0);return Be.makeTensor(a,s,i)}function GR(n,e,t,r="numeric"){if(!Array.isArray(n))throw new Error(`Argument ${e} passed to ${t} must be a \`Tensor[]\` or \`TensorLike[]\``);return n.map((s,o)=>fe(s,`${e}[${o}]`,t,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UY="__op";function Ie(n){const e=Object.keys(n);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let t=e[0];const r=n[t];t.endsWith("_")&&(t=t.substring(0,t.length-1)),t=t+UY;const i=(...s)=>{Be.startScope(t);try{const o=r(...s);return cv(o)&&console.error("Cannot return a Promise inside of tidy."),Be.endScope(o),o}catch(o){throw Be.endScope(null),o}};return Object.defineProperty(i,"name",{value:t,configurable:!0}),i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kve(n,e){const t=fe(n,"real","complex"),r=fe(e,"imag","complex");Dc(t.shape,r.shape,`real and imag shapes, ${t.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:t,imag:r};return Be.runKernel(_4,i)}const Rg=Ie({complex_:Kve});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qg(n,e,t,r){if(r==null)r=z1(n);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(kY(n)||DY(n)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return Be.backend.createTensorFromGPUData(n,e||t,r)}if(!Ju(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){lu(e);const i=xt(e),s=xt(t);de(i===s,()=>`Based on the provided shape, [${e}], the tensor should have ${i} values but has ${s}`);for(let o=0;o<t.length;++o){const a=t[o],l=o===t.length-1?a!==xt(e.slice(o)):!0;de(t[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${t}) does not match the provided shape (${e}). `)}}return!Ju(n)&&!Array.isArray(n)&&(n=[n]),e=e||t,n=r!=="string"?kv(n,r):uv(n,[],!0),Be.makeTensor(n,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zd(n,e,t){const r=Xg(n,t);return qg(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dv={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class ph{static join(e){return new ph(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Ju(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let r=0;r<e.length;r++){const i=e[r];r!==e.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const s=t+i.byteLength;this.shards.push({buffer:i,start:t,end:s}),t=s}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,t=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const i=t-e,s=new ArrayBuffer(i),o=new Uint8Array(s);let a=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],d=e+a-c.start,f=a,g=Math.min(t,c.end)-c.start,v=new Uint8Array(c.buffer,d,g-d);if(o.set(v,f),a+=v.length,t<c.end)break}return s}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(i){return e<i.start?-1:e>=i.end?1:0}if(t(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=Yve(this.shards,t);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function Yve(n,e){let t=0,r=n.length;for(;t<=r;){const i=Math.floor((r-t)/2)+t,s=e(n[i]);if(s===0)return i;s<0?r=i:t=i+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nf(){return Be}function N8(){return Be.memory()}function Ye(n,e){return Be.tidy(n,e)}function rr(n){OY(n).forEach(t=>t.dispose())}function Uo(n){return Be.keep(n)}function Jve(){return Be.ready()}function zY(){return Be.backendName}function HY(n,e,t=1){return Be.registerBackend(n,e,t)}function VY(){return Be.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ng=4;async function _L(n,e){const t=[],r=[],i=Array.isArray(n)?n.map(o=>o.name):Object.keys(n);for(let o=0;o<i.length;++o){const a=i[o],l=Array.isArray(n)?n[o].tensor:n[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const u=new Promise(async d=>{const f=await l.bytes(),p=f.reduce((b,x)=>b+x.length,0)+Ng*f.length,g=new Uint8Array(p);let v=0;for(let b=0;b<f.length;b++){const x=f[b],_=new Uint8Array(new Uint32Array([x.length]).buffer);g.set(_,v),v+=Ng,g.set(x,v),v+=x.length}d(g)});r.push(u)}else r.push(l.data());e!=null&&(c.group=e),t.push(c)}const s=await Promise.all(r);return{data:ebe(s),specs:t}}function GY(n,e){const t=new ph(n),r={};let i=0;for(const s of e){const o=Zve(s,(a,l)=>t.slice(i+a,i+l));r[s.name]=WY(s,t.slice(i,i+o)),i+=o}return r}function Zve(n,e){const t=xt(n.shape);let r;if("quantization"in n){const i=n.quantization;r=dv[i.dtype]}else if(n.dtype==="string"){let i=0;for(let s=0;s<t;s++)i+=Ng+new Uint32Array(e(i,i+Ng))[0];return i}else r=dv[n.dtype];return t*r}async function Qve(n,e){const t=xt(n.shape);let r;if("quantization"in n){const i=n.quantization;r=dv[i.dtype]}else if(n.dtype==="string"){let i=0;for(let s=0;s<t;s++)i+=Ng+new Uint32Array(await e(i,i+Ng))[0];return i}else r=dv[n.dtype];return t*r}function WY(n,e){const t=n.name,r=n.dtype,i=n.shape,s=xt(i);let o,a=0;if("quantization"in n){const l=n.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${n.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${n.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${n.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const c=dv[l.dtype],u=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){o=new Float32Array(u.length);for(let d=0;d<u.length;d++){const f=u[d];o[d]=f*l.scale+l.min}}else if(l.dtype==="float16")o=obe()(u);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);o=new Int32Array(u.length);for(let d=0;d<u.length;d++){const f=u[d];o[d]=Math.round(f*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${t}': ${r}`);a+=s*c}else if(r==="string"){const l=xt(n.shape);o=[];for(let c=0;c<l;c++){const u=new Uint32Array(e.slice(a,a+Ng))[0];a+=Ng;const d=new Uint8Array(e.slice(a,a+u));o.push(d),a+=u}}else{const l=dv[r];if(r==="float32")o=new Float32Array(e);else if(r==="int32")o=new Int32Array(e);else if(r==="bool")o=new Uint8Array(e);else if(r==="complex64"){o=new Float32Array(e);const c=new Float32Array(o.length/2),u=new Float32Array(o.length/2);for(let g=0;g<c.length;g++)c[g]=o[g*2],u[g]=o[g*2+1];const d=Zd(c,i,"float32"),f=Zd(u,i,"float32"),p=Rg(d,f);return d.dispose(),f.dispose(),p}else throw new Error(`Unsupported dtype in weight '${t}': ${r}`);a+=s*l}return Zd(o,i,r)}async function I8(n,e,t){let r=new Uint8Array(e);for(;r.byteLength<t;){const{done:i,value:s}=await n.read();if(i&&s==null){const a=t-r.byteLength;throw new Error(`Reader is done but ${a} bytes are still expected`)}const o=new Uint8Array(r.length+s.byteLength);o.set(r,0),o.set(new Uint8Array(s),r.length),r=o}return r.buffer}async function jY(n,e){const t={},r=n.getReader();let i=new ArrayBuffer(0);for(const s of e){const o=await Qve(s,async(c,u)=>(i=await I8(r,i,u),i.slice(c,u)));i=await I8(r,i,o);const a=i.slice(0,o);i=i.slice(o);const l=WY(s,a);if(t[s.name]=l,zY()==="webgpu"){const c=VY();"uploadToGPU"in c&&xt(l.shape)>=it().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(l.dataId)}}return t}function ebe(n){if(n===null)throw new Error(`Invalid input value: ${JSON.stringify(n)}`);let e=0;const t=[];n.forEach(s=>{if(e+=s.byteLength,t.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});const r=new Uint8Array(e);let i=0;return t.forEach(s=>{r.set(new Uint8Array(s.buffer),i),i+=s.byteLength}),r.buffer}const _U=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function D8(n){return _U?Buffer.byteLength(n,"utf8"):new Blob([n]).size}function tbe(n){if(_U)return Buffer.from(n).toString("base64");const e=new Uint8Array(n);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function nbe(n){if(_U){const r=Buffer.from(n,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(n),t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t.set([e.charCodeAt(r)],r);return t.buffer}function XY(n){return ph.join(n)}function k8(n){for(n=n.trim();n.endsWith("/");)n=n.slice(0,n.length-1);const t=n.split("/");return t[t.length-1]}function qY(n,e){const t={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,weightsManifest:e};return n.signature!=null&&(t.signature=n.signature),n.userDefinedMetadata!=null&&(t.userDefinedMetadata=n.userDefinedMetadata),n.modelInitializer!=null&&(t.modelInitializer=n.modelInitializer),n.initializerSignature!=null&&(t.initializerSignature=n.initializerSignature),n.trainingConfig!=null&&(t.trainingConfig=n.trainingConfig),t}function KY(n,e,t){const r={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy};if(n.trainingConfig!=null&&(r.trainingConfig=n.trainingConfig),n.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!t)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=t}return n.signature!=null&&(r.signature=n.signature),n.userDefinedMetadata!=null&&(r.userDefinedMetadata=n.userDefinedMetadata),n.modelInitializer!=null&&(r.modelInitializer=n.modelInitializer),n.initializerSignature!=null&&(r.initializerSignature=n.initializerSignature),r}async function CU(n,e){let t,r;return n.weightsManifest!=null&&([t,r]=await e(n.weightsManifest)),KY(n,t,r)}function $E(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:n.modelTopology==null?0:D8(JSON.stringify(n.modelTopology)),weightSpecsBytes:n.weightSpecs==null?0:D8(JSON.stringify(n.weightSpecs)),weightDataBytes:n.weightData==null?0:new ph(n.weightData).byteLength}}function CL(n){const e=[];for(const t of n)e.push(...t.weights);return e}function rbe(){const n=t=>{let r=t<<13,i=0;for(;(r&8388608)===0;)i-=8388608,r<<=1;return r&=-8388609,i+=947912704,r|i},e=new Uint32Array(2048);e[0]=0;for(let t=1;t<1024;t++)e[t]=n(t);for(let t=1024;t<2048;t++)e[t]=939524096+(t-1024<<13);return e}function ibe(){const n=new Uint32Array(64);n[0]=0,n[31]=1199570944,n[32]=2147483648,n[63]=3347054592;for(let e=1;e<31;e++)n[e]=e<<23;for(let e=33;e<63;e++)n[e]=2147483648+(e-32<<23);return n}function sbe(){const n=new Uint32Array(64);for(let e=0;e<64;e++)n[e]=1024;return n[0]=n[32]=0,n}function obe(){const n=rbe(),e=ibe(),t=sbe();return r=>{const i=new ArrayBuffer(4*r.length),s=new Uint32Array(i);for(let o=0;o<r.length;o++){const a=r[o],l=n[t[a>>10]+(a&1023)]+e[a>>10];s[o]=l}return new Float32Array(i)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xs{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return xs.instance==null&&(xs.instance=new xs),xs.instance}static registerSaveRouter(e){xs.getInstance().saveRouters.push(e)}static registerLoadRouter(e){xs.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return xs.getHandlers(e,"save")}static getLoadHandlers(e,t){return xs.getHandlers(e,"load",t)}static getHandlers(e,t,r){const i=[];return(t==="load"?xs.getInstance().loadRouters:xs.getInstance().saveRouters).forEach(o=>{const a=o(e,r);a!==null&&i.push(a)}),i}}const abe=n=>xs.registerSaveRouter(n),lbe=n=>xs.registerLoadRouter(n),YY=n=>xs.getSaveHandlers(n),cbe=(n,e)=>xs.getLoadHandlers(n,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EL="tensorflowjs",AL=1,$y="models_store",dg="model_info_store";function JY(){if(!it().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const n=typeof window>"u"?self:window,e=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB||n.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function TL(n){const e=n.result;e.createObjectStore($y,{keyPath:"modelPath"}),e.createObjectStore(dg,{keyPath:"modelPath"})}class hv{constructor(e){if(this.indexedDB=JY(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((r,i)=>{const s=this.indexedDB.open(EL,AL);s.onupgradeneeded=()=>TL(s),s.onsuccess=()=>{const o=s.result;if(t==null){const a=o.transaction($y,"readonly"),c=a.objectStore($y).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return o.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=u=>(o.close(),i(c.error)),a.oncomplete=()=>o.close()}else{t.weightData=ph.join(t.weightData);const a=$E(t),l=o.transaction(dg,"readwrite");let c=l.objectStore(dg),u;try{u=c.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(f){return i(f)}let d;u.onsuccess=()=>{d=o.transaction($y,"readwrite");const f=d.objectStore($y);let p;try{p=f.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:a})}catch(g){return i(g)}p.onsuccess=()=>r({modelArtifactsInfo:a}),p.onerror=g=>{c=l.objectStore(dg);const v=c.delete(this.modelPath);v.onsuccess=()=>(o.close(),i(p.error)),v.onerror=b=>(o.close(),i(p.error))}},u.onerror=f=>(o.close(),i(u.error)),l.oncomplete=()=>{d==null?o.close():d.oncomplete=()=>o.close()}}},s.onerror=o=>i(s.error)})}}hv.URL_SCHEME="indexeddb://";const ZY=n=>it().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(hv.URL_SCHEME)?ube(n.slice(hv.URL_SCHEME.length)):null;xs.registerSaveRouter(ZY);xs.registerLoadRouter(ZY);function ube(n){return new hv(n)}function dbe(n){return n.startsWith(hv.URL_SCHEME)?n.slice(hv.URL_SCHEME.length):n}class hbe{constructor(){this.indexedDB=JY()}async listModels(){return new Promise((e,t)=>{const r=this.indexedDB.open(EL,AL);r.onupgradeneeded=()=>TL(r),r.onsuccess=()=>{const i=r.result,s=i.transaction(dg,"readonly"),a=s.objectStore(dg).getAll();a.onsuccess=()=>{const l={};for(const c of a.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},a.onerror=l=>(i.close(),t(a.error)),s.oncomplete=()=>i.close()},r.onerror=i=>t(r.error)})}async removeModel(e){return e=dbe(e),new Promise((t,r)=>{const i=this.indexedDB.open(EL,AL);i.onupgradeneeded=()=>TL(i),i.onsuccess=()=>{const s=i.result,o=s.transaction(dg,"readwrite"),a=o.objectStore(dg),l=a.get(e);let c;l.onsuccess=()=>{if(l.result==null)return s.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const u=a.delete(e),d=()=>{c=s.transaction($y,"readwrite");const p=c.objectStore($y).delete(e);p.onsuccess=()=>t(l.result.modelArtifactsInfo),p.onerror=g=>r(l.error)};u.onsuccess=d,u.onerror=f=>(d(),s.close(),r(l.error))}},l.onerror=u=>(s.close(),r(l.error)),o.oncomplete=()=>{c==null?s.close():c.oncomplete=()=>s.close()}},i.onerror=s=>r(i.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ip="/",Nx="tensorflowjs_models",QY="info",fbe="model_topology",pbe="weight_specs",mbe="weight_data",gbe="model_metadata";function eJ(n){return{info:[Nx,n,QY].join(Ip),topology:[Nx,n,fbe].join(Ip),weightSpecs:[Nx,n,pbe].join(Ip),weightData:[Nx,n,mbe].join(Ip),modelMetadata:[Nx,n,gbe].join(Ip)}}function tJ(n){for(const e of Object.values(n))window.localStorage.removeItem(e)}function ybe(n){const e=n.split(Ip);if(e.length<3)throw new Error(`Invalid key format: ${n}`);return e.slice(1,e.length-1).join(Ip)}function vbe(n){return n.startsWith(fv.URL_SCHEME)?n.slice(fv.URL_SCHEME.length):n}class fv{constructor(e){if(!it().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=eJ(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const t=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=$E(e),s=ph.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,tbe(s));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:i}}catch{throw tJ(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=r;const i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=i;const s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){const a=JSON.parse(s);t.format=a.format,t.generatedBy=a.generatedBy,t.convertedBy=a.convertedBy,a.signature!=null&&(t.signature=a.signature),a.userDefinedMetadata!=null&&(t.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(t.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(t.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(t.trainingConfig=a.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=nbe(o),t}}fv.URL_SCHEME="localstorage://";const nJ=n=>it().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(fv.URL_SCHEME)?bbe(n.slice(fv.URL_SCHEME.length)):null;xs.registerSaveRouter(nJ);xs.registerLoadRouter(nJ);function bbe(n){return new fv(n)}class xbe{constructor(){de(it().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),de(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},t=Nx+Ip,r=Ip+QY;for(let i=0;i<this.LS.length;++i){const s=this.LS.key(i);if(s.startsWith(t)&&s.endsWith(r)){const o=ybe(s);e[o]=JSON.parse(this.LS.getItem(s))}}return e}async removeModel(e){e=vbe(e);const t=eJ(e);if(this.LS.getItem(t.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(t.info));return tJ(t),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zx="://";class Za{constructor(){this.managers={}}static getInstance(){return Za.instance==null&&(Za.instance=new Za),Za.instance}static registerManager(e,t){de(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(zx)&&(e=e.slice(0,e.indexOf(zx))),de(e.length>0,()=>"scheme must not be an empty string.");const r=Za.getInstance();de(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=t}static getManager(e){const t=Za.getInstance().managers[e];if(t==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(Za.getInstance().managers)}}function EM(n){if(n.indexOf(zx)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Za.getSchemes().join(",")}`);return{scheme:n.split(zx)[0],path:n.split(zx)[1]}}async function rJ(n,e,t=!1){de(n!==e,()=>`Old path and new path are the same: '${n}'`);const r=xs.getLoadHandlers(n);de(r.length>0,()=>`Copying failed because no load handler is found for source URL ${n}.`),de(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${n}.`);const i=r[0],s=xs.getSaveHandlers(e);de(s.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),de(s.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const o=s[0],a=EM(n).scheme,l=EM(n).path,c=a===EM(n).scheme,u=await i.load();t&&c&&await Za.getManager(a).removeModel(l);const d=await o.save(u);return t&&!c&&await Za.getManager(a).removeModel(l),d.modelArtifactsInfo}async function Sbe(){const n=Za.getSchemes(),e={};for(const t of n){const r=await Za.getManager(t).listModels();for(const i in r){const s=t+zx+i;e[s]=r[i]}}return e}async function wbe(n){const e=EM(n);return Za.getManager(e.scheme).removeModel(e.path)}async function _be(n,e){return rJ(n,e,!1)}async function Cbe(n,e){return rJ(n,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ebe{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){if(typeof window>"u"||!it().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,t);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const i=this.functionRefs[r.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return AY(e)}}if(it().get("IS_BROWSER")){it().setPlatform("browser",new Ebe);try{Za.registerManager(fv.URL_SCHEME,new xbe)}catch{}try{Za.registerManager(hv.URL_SCHEME,new hbe)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Abe={importFetch:()=>require("node-fetch")};let tB;class Tbe{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return it().global.fetch!=null?it().global.fetch(e,t):(tB==null&&(tB=Abe.importFetch()),tB(e,t))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return e.length===0?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}it().get("IS_NODE")&&!it().get("IS_BROWSER")&&it().setPlatform("node",new Tbe);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ar(n,e="float32",t){return e=e||"float32",lu(n),new Ao(n,e,t)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mbe(n,e){const t=fe(n,"x","cast");if(!dve(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&t.dtype!=="string"||e!=="string"&&t.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:t},i={dtype:e};return Be.runKernel(qC,r,i)}const nn=Ie({cast_:Mbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rbe(n){const t={x:fe(n,"x","clone","string_or_numeric")};return Be.runKernel(aE,t)}const $p=Ie({clone_:Rbe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iJ(n,e=!1){console.log(n.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$Y();const Nbe={buffer:Ar,cast:nn,clone:$p,print:iJ};Hve(Nbe);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ibe(n,e){let t=fe(n,"a","add"),r=fe(e,"b","add");[t,r]=Ls(t,r);const i={a:t,b:r};return Be.runKernel(V1,i)}const $t=Ie({add_:Ibe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dbe(n,e){let t=fe(n,"a","floorDiv"),r=fe(e,"b","floorDiv");[t,r]=Ls(t,r);const i={a:t,b:r};return Be.runKernel(sE,i)}const EU=Ie({floorDiv_:Dbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kbe(n,e){let t=fe(n,"a","div"),r=fe(e,"b","div");if([t,r]=Ls(t,r),t.dtype==="int32"&&r.dtype==="int32")return EU(t,r);const i={a:t,b:r},s={};return Be.runKernel(QC,i,s)}const mn=Ie({div_:kbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Obe(n,e){let t=fe(n,"a","mul"),r=fe(e,"b","mul");[t,r]=Ls(t,r);const i={a:t,b:r};return Be.runKernel(gE,i)}const ke=Ie({mul_:Obe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bbe(n){const e=fe(n,"x","abs");if(e.dtype==="complex64"){const t={x:e};return Be.runKernel(KI,t)}else{const t={x:e};return Be.runKernel(UI,t)}}const xo=Ie({abs_:Bbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $be(n){const t={x:fe(n,"x","acos")};return Be.runKernel(zC,t)}const sJ=Ie({acos_:$be});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lbe(n){const t={x:fe(n,"x","acosh")};return Be.runKernel(HC,t)}const oJ=Ie({acosh_:Lbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fbe(n){de(Array.isArray(n),()=>"The argument passed to tf.addN() must be a list of tensors"),de(n.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${n.length}`);const e=n.map((i,s)=>fe(i,`tensors${s}`,"addN")),t=e[0];e.forEach(i=>{if(i.dtype!==t.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(i=>{if(!Vr(i.shape,t.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return Be.runKernel(zI,r)}const Pbe=Ie({addN_:Fbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ube(n,e=null,t=!1){const i={x:fe(n,"x","all","bool")},s={axis:e,keepDims:t};return Be.runKernel(y4,i,s)}const AU=Ie({all_:Ube});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zbe(n,e=null,t=!1){const i={x:fe(n,"x","any","bool")},s={axis:e,keepDims:t};return Be.runKernel(v4,i,s)}const WR=Ie({any_:zbe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hbe(n,e=0){const r={x:fe(n,"x","argMax")},i={axis:e};return Be.runKernel(HI,r,i)}const g1=Ie({argMax_:Hbe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vbe(n,e=0){const r={x:fe(n,"x","argMin")},i={axis:e};return Be.runKernel(VI,r,i)}const aJ=Ie({argMin_:Vbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gbe(n){const t={x:fe(n,"x","asin")};return Be.runKernel(VC,t)}const lJ=Ie({asin_:Gbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wbe(n){const t={x:fe(n,"x","asinh")};return Be.runKernel(GC,t)}const cJ=Ie({asinh_:Wbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jbe(n){const t={x:fe(n,"x","atan")};return Be.runKernel(WC,t)}const uJ=Ie({atan_:jbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xbe(n,e){let t=fe(n,"a","atan2"),r=fe(e,"b","atan2");[t,r]=Ls(t,r);const i={a:t,b:r};return Be.runKernel(XC,i)}const dJ=Ie({atan2_:Xbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qbe(n){const t={x:fe(n,"x","atanh")};return Be.runKernel(jC,t)}const hJ=Ie({atanh_:qbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LE(n,e,t,r,i="NHWC",s){const o=n[3],a=[...e,o],l=rm(i);return jo(n,a,t,s,r,null,null,l)}function nd(n,e,t,r,i,s,o="channelsLast"){const[a,l]=K_(e);let c;if(o==="channelsLast")c=[a,l,n[3],n[3]];else if(o==="channelsFirst")c=[a,l,n[1],n[1]];else throw new Error(`Unknown dataFormat ${o}`);return jo(n,c,t,r,i,s,!1,o)}function nm(n,e,t,r,i,s,o="NDHWC"){const[a,l,c]=ML(e);let u,d;if(o==="NDHWC")d="channelsLast",u=[a,l,c,n[4],n[4]];else if(o==="NCDHW")d="channelsFirst",u=[a,l,c,n[1],n[1]];else throw new Error(`Unknown dataFormat ${o}`);return Kg(n,u,t,r,i,!1,d,s)}function jo(n,e,t,r,i,s,o=!1,a="channelsLast"){let[l,c,u,d]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,d]=n;else if(a==="channelsFirst")[l,d,c,u]=n;else throw new Error(`Unknown dataFormat ${a}`);const[f,p,,g]=e,[v,b]=K_(t),[x,_]=K_(r),E=Hx(f,x),C=Hx(p,_),{padInfo:M,outHeight:R,outWidth:L}=Jbe(i,c,u,v,b,E,C,s,a),B=o?g*d:g;let N;return a==="channelsFirst"?N=[l,B,R,L]:a==="channelsLast"&&(N=[l,R,L,B]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:d,outHeight:R,outWidth:L,outChannels:B,padInfo:M,strideHeight:v,strideWidth:b,filterHeight:f,filterWidth:p,effectiveFilterHeight:E,effectiveFilterWidth:C,dilationHeight:x,dilationWidth:_,inShape:n,outShape:N,filterShape:e}}function Kg(n,e,t,r,i,s=!1,o="channelsLast",a){let[l,c,u,d,f]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,c,u,d,f]=n;else if(o==="channelsFirst")[l,f,c,u,d]=n;else throw new Error(`Unknown dataFormat ${o}`);const[p,g,v,,b]=e,[x,_,E]=ML(t),[C,M,R]=ML(r),L=Hx(p,C),B=Hx(g,M),N=Hx(v,R),{padInfo:I,outDepth:D,outHeight:P,outWidth:G}=Zbe(i,c,u,d,x,_,E,L,B,N,a),W=s?b*f:b;let q;return o==="channelsFirst"?q=[l,W,D,P,G]:o==="channelsLast"&&(q=[l,D,P,G,W]),{batchSize:l,dataFormat:o,inDepth:c,inHeight:u,inWidth:d,inChannels:f,outDepth:D,outHeight:P,outWidth:G,outChannels:W,padInfo:I,strideDepth:x,strideHeight:_,strideWidth:E,filterDepth:p,filterHeight:g,filterWidth:v,effectiveFilterDepth:L,effectiveFilterHeight:B,effectiveFilterWidth:N,dilationDepth:C,dilationHeight:M,dilationWidth:R,inShape:n,outShape:q,filterShape:e}}function Kbe(n,e,t,r,i){r==null&&(r=TU(n,e,t));const s=n[0],o=n[1],a=Y_((s-e+2*r)/t+1,i),l=Y_((o-e+2*r)/t+1,i);return[a,l]}function Ybe(n,e,t,r,i,s){i==null&&(i=TU(n,e[0],r[0]));const o=[0,0,0,t];for(let a=0;a<3;a++)n[a]+2*i>=e[a]&&(o[a]=Y_((n[a]-e[a]+2*i)/r[a]+1,s));return o}function TU(n,e,t,r=1){const i=Hx(e,r);return Math.floor((n[0]*(t-1)-t+i)/2)}function K_(n){return typeof n=="number"?[n,n,n]:n.length===2?[n[0],n[1],1]:n}function ML(n){return typeof n=="number"?[n,n,n]:n}function Hx(n,e){return e<=1?n:n+(n-1)*(e-1)}function Jbe(n,e,t,r,i,s,o,a,l){let c,u,d;if(typeof n=="number"){c={top:n,bottom:n,left:n,right:n,type:n===0?"VALID":"NUMBER"};const p=Kbe([e,t],s,r,n,a);u=p[0],d=p[1]}else if(n==="same"){u=Math.ceil(e/r),d=Math.ceil(t/i);const f=Math.max(0,(u-1)*r+s-e),p=Math.max(0,(d-1)*i+o-t),g=Math.floor(f/2),v=f-g,b=Math.floor(p/2),x=p-b;c={top:g,bottom:v,left:b,right:x,type:"SAME"}}else if(n==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-s+1)/r),d=Math.ceil((t-o+1)/i);else if(typeof n=="object"){const f=l==="channelsLast"?n[1][0]:n[2][0],p=l==="channelsLast"?n[1][1]:n[2][1],g=l==="channelsLast"?n[2][0]:n[3][0],v=l==="channelsLast"?n[2][1]:n[3][1];c={top:f,bottom:p,left:g,right:v,type:f===0&&p===0&&g===0&&v===0?"VALID":"EXPLICIT"},u=Y_((e-s+f+p)/r+1,a),d=Y_((t-o+g+v)/i+1,a)}else throw Error(`Unknown padding parameter: ${n}`);return{padInfo:c,outHeight:u,outWidth:d}}function Zbe(n,e,t,r,i,s,o,a,l,c,u){let d,f,p,g;if(n==="valid"&&(n=0),typeof n=="number"){d={top:n,bottom:n,left:n,right:n,front:n,back:n,type:n===0?"VALID":"NUMBER"};const b=Ybe([e,t,r,1],[a,l,c],1,[i,s,o],n,u);f=b[0],p=b[1],g=b[2]}else if(n==="same"){f=Math.ceil(e/i),p=Math.ceil(t/s),g=Math.ceil(r/o);const v=(f-1)*i+a-e,b=(p-1)*s+l-t,x=(g-1)*o+c-r,_=Math.floor(v/2),E=v-_,C=Math.floor(b/2),M=b-C,R=Math.floor(x/2),L=x-R;d={top:C,bottom:M,left:R,right:L,front:_,back:E,type:"SAME"}}else throw Error(`Unknown padding parameter: ${n}`);return{padInfo:d,outDepth:f,outHeight:p,outWidth:g}}function Y_(n,e){if(!e)return Math.trunc(n);switch(e){case"round":return Math.round(n);case"ceil":return Math.ceil(n);case"floor":return Math.floor(n);default:throw new Error(`Unknown roundingMode ${e}`)}}function Ig(n){const[e,t,r]=K_(n);return e===1&&t===1&&r===1}function ua(n,e){return Ig(n)||Ig(e)}function pv(n){return K_(n).every(e=>e>0)}function rm(n){if(n==="NHWC")return"channelsLast";if(n==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${n}`)}function al(n,e,t){if(t!=null){if(typeof e=="string")throw Error(`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${e}.`);if(typeof e=="number")de(m1(e),()=>`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(i=>{de(m1(i),()=>`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${i}.`)})});else throw Error(`Error in ${n}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qbe(n,e){const r={x:fe(n,"x","reshape","string_or_numeric")},i={shape:e};return Be.runKernel(RD,r,i)}const Fe=Ie({reshape_:Qbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function exe(n,e,t,r,i){const s=fe(n,"x","avgPool","float32"),o=1;de(ua(t,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${t} and dilations '${o}'`);let a=s,l=!1;s.rank===3&&(l=!0,a=Fe(s,[1,s.shape[0],s.shape[1],s.shape[2]])),de(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),al("avgPool",r,i);const c={x:a},u={filterSize:e,strides:t,pad:r,dimRoundingMode:i};let d=Be.runKernel(GI,c,u);return d=nn(d,s.dtype),l?Fe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const GD=Ie({avgPool_:exe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function txe(n,e,t,r,i,s="NDHWC"){const o=fe(n,"x","avgPool3d","float32");let a=o,l=!1;o.rank===4&&(l=!0,a=Fe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),de(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),de(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),de(typeof t=="number"&&t>0||Array.isArray(t)&&t[0]>0&&t[1]>0&&t[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${t}'`),al("avgPool3d",r,i);const c={x:a},u={filterSize:e,strides:t,pad:r,dimRoundingMode:i,dataFormat:s};let d=Be.runKernel(WI,c,u);return d=nn(d,a.dtype),l?Fe(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const fJ=Ie({avgPool3d_:txe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nxe(n,e=0){de(n.length>=1,()=>"Pass at least one tensor to concat");const t=GR(n,"tensors","concat","string_or_numeric");if(t[0].dtype==="complex64"&&t.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),t.length===1)return $p(t[0]);const r=t,i={axis:e};return Be.runKernel(YI,r,i)}const $s=Ie({concat_:nxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rxe(n,e,t=!1,r=!1){let i=fe(n,"a","matMul"),s=fe(e,"b","matMul");[i,s]=Ls(i,s);const o={a:i,b:s},a={transposeA:t,transposeB:r};return Be.runKernel(jI,o,a)}const Br=Ie({matMul_:rxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ixe(n){const t={x:fe(n,"x","sigmoid","float32")};return Be.runKernel(TE,t)}const Qd=Ie({sigmoid_:ixe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sxe(n,e,t){const r=fe(n,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const i={x:r},s={begin:e,size:t};return Be.runKernel(OD,i,s)}const Kn=Ie({slice_:sxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oxe(n){const t={x:fe(n,"x","tanh","float32")};return Be.runKernel(kE,t)}const mv=Ie({tanh_:oxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function axe(n,e,t,r,i,s){const o=fe(n,"forgetBias","basicLSTMCell"),a=fe(e,"lstmKernel","basicLSTMCell"),l=fe(t,"lstmBias","basicLSTMCell"),c=fe(r,"data","basicLSTMCell"),u=fe(i,"c","basicLSTMCell"),d=fe(s,"h","basicLSTMCell"),f=$s([c,d],1),p=Br(f,a),g=$t(p,l),v=g.shape[0],b=g.shape[1]/4,x=[v,b],_=Kn(g,[0,0],x),E=Kn(g,[0,b],x),C=Kn(g,[0,b*2],x),M=Kn(g,[0,b*3],x),R=$t(ke(Qd(_),mv(E)),ke(u,Qd($t(o,C)))),L=ke(mv(R),Qd(M));return[R,L]}const lxe=Ie({basicLSTMCell_:axe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cxe(n,e,t){const r=fe(n,"x","batchToSpaceND"),i=e.reduce((a,l)=>a*l);de(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),de(t.length===e.length,()=>`crops.length is ${t.length} but should be equal to blockShape.length  ${e.length}`),de(r.shape[0]%i===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${i}`);const s={x:r},o={blockShape:e,crops:t};return Be.runKernel(XI,s,o)}const WD=Ie({batchToSpaceND_:cxe});function uxe(n){let e;return n.rank===0||n.rank===1?e=Fe(n,[1,1,1,n.size]):n.rank===2?e=Fe(n,[1,1,n.shape[0],n.shape[1]]):n.rank===3?e=Fe(n,[1,n.shape[0],n.shape[1],n.shape[2]]):e=n,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dxe(n,e,t,r,i,s){s==null&&(s=.001);const o=fe(n,"x","batchNorm"),a=fe(e,"mean","batchNorm"),l=fe(t,"variance","batchNorm");let c;i!=null&&(c=fe(i,"scale","batchNorm"));let u;r!=null&&(u=fe(r,"offset","batchNorm")),de(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),de(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),de(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const f={x:uxe(o),scale:c,offset:u,mean:a,variance:l},p={varianceEpsilon:s},g=Be.runKernel(sD,f,p);return Fe(g,o.shape)}const FE=Ie({batchNorm_:dxe});function hxe(n,e,t,r,i,s){const o=fe(n,"x","batchNorm"),a=fe(e,"mean","batchNorm"),l=fe(t,"variance","batchNorm");let c;i!=null&&(c=fe(i,"scale","batchNorm"));let u;return r!=null&&(u=fe(r,"offset","batchNorm")),de(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),de(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),de(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&de(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&de(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),FE(o,a,l,u,c,s)}const pJ=Ie({batchNorm2d_:hxe});function fxe(n,e,t,r,i,s){const o=fe(n,"x","batchNorm"),a=fe(e,"mean","batchNorm"),l=fe(t,"variance","batchNorm");let c;i!=null&&(c=fe(i,"scale","batchNorm"));let u;return r!=null&&(u=fe(r,"offset","batchNorm")),de(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),de(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),de(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&de(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&de(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),FE(o,a,l,u,c,s)}const mJ=Ie({batchNorm3d_:fxe});function pxe(n,e,t,r,i,s){const o=fe(n,"x","batchNorm"),a=fe(e,"mean","batchNorm"),l=fe(t,"variance","batchNorm");let c;i!=null&&(c=fe(i,"scale","batchNorm"));let u;return r!=null&&(u=fe(r,"offset","batchNorm")),de(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),de(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),de(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&de(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&de(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),FE(o,a,l,u,c,s)}const gJ=Ie({batchNorm4d_:pxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mxe(n,e,t){const r=fe(n,"x","bincount"),i=fe(e,"weights","bincount");de(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),de(t>=0,()=>`size must be non-negative, but got ${t}.`),de(i.size===r.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`);const s={x:r,weights:i},o={size:t};return Be.runKernel(S4,s,o)}const yJ=Ie({bincount_:mxe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gxe(n,e){const t=fe(n,"x","bitwiseAnd"),r=fe(e,"y","bitwiseAnd");if(!Vr(t.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${t.shape}, y: ${r.shape}`);if(t.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${t.dtype} and type of y: ${r.dtype}`);const i={a:t,b:r};return Be.runKernel(qI,i)}const yxe=Ie({bitwiseAnd_:gxe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vxe(n,e){const t=fe(n,"s0","broadcastArgs","int32"),r=fe(e,"s1","broadcastArgs","int32");if(t.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${t.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const i={s0:t,s1:r};return Be.runKernel(w4,i)}const bxe=Ie({broadcastArgs_:vxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xxe(n,e){let t=fe(n,"broadcastTo","x");const r=t.shape;if(lu(e),e.length<t.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${t.rank}.`);if(e.length>t.rank){const c=t.shape.slice();for(;c.length<e.length;)c.unshift(1);t=Fe(t,c)}const i=t.shape,s=Array.from(e);for(let c=e.length-1;c>=0;c--)if(i[c]===e[c])s[c]=1;else if(t.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(s.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return $p(t);const a={x:t},l={reps:s};return Be.runKernel(OE,a,l)}const Vx=Ie({broadcastTo_:xxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sxe(n){const t={x:fe(n,"x","ceil","float32")};return Be.runKernel(KC,t)}const vJ=Ie({ceil_:Sxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G1(n,e,t){lu(n),t=t||z1(e);const r={shape:n,value:e,dtype:t};return Be.runKernel(L4,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wxe(n,e,t){const r=fe(n,"x","clipByValue");if(de(e<=t,()=>`Error in clip: min (${e}) must be less than or equal to max (${t}).`),e===t)return G1(r.shape,e,r.dtype);const i={x:r},s={clipValueMin:e,clipValueMax:t};return Be.runKernel(YC,i,s)}const Vl=Ie({clipByValue_:wxe});function _xe(n){return $s(n,0)}const bJ=Ie({concat1d_:_xe});function Cxe(n,e){return $s(n,e)}const xJ=Ie({concat2d_:Cxe});function Exe(n,e){return $s(n,e)}const SJ=Ie({concat3d_:Exe});function Axe(n,e){return $s(n,e)}const wJ=Ie({concat4d_:Axe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Txe(n,e,t,r,i="NHWC",s=[1,1],o){const a=fe(n,"x","conv2d","float32"),l=fe(e,"filter","conv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=Fe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),de(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),de(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),al("conv2d",r,o);const d=i==="NHWC"?c.shape[3]:c.shape[1];de(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),de(ua(t,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${t} and dilations '${s}'`),de(pv(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),de(pv(t),()=>"Error in conv2D: Strides should be larger than 0.");const f={x:c,filter:l},p={strides:t,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o},g=Be.runKernel(JI,f,p);return u?Fe(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const Dg=Ie({conv2d_:Txe});function Mxe(n,e,t,r,i="NWC",s=1,o){const a=fe(n,"x","conv1d"),l=fe(e,"filter","conv1d");let c=a,u=!1;a.rank===2&&(u=!0,c=Fe(a,[1,a.shape[0],a.shape[1]])),de(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),de(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),al("conv1d",r,o),de(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),de(ua(t,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${t} and dilation '${s}'`),de(pv(s),()=>"Error in conv1D: Dilated rates should be larger than 0."),de(pv(t),()=>"Error in conv1D: Stride should be larger than 0."),de(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const d=Fe(l,[1,l.shape[0],l.shape[1],l.shape[2]]),f=Fe(c,[c.shape[0],1,c.shape[1],c.shape[2]]),b=Dg(f,d,[1,t],r,"NHWC",[1,s],o);return u?Fe(b,[b.shape[2],b.shape[3]]):Fe(b,[b.shape[0],b.shape[2],b.shape[3]])}const MU=Ie({conv1d_:Mxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rxe(n,e,t,r,i,s="NHWC",o){de(n.length===e.rank,()=>`Length of inShape (${n.length}) and rank of dy (${e.rank}) must match`);let a=n,l=e,c=!1;e.rank===3&&(c=!0,l=Fe(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,n[0],n[1],n[2]]),de(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),de(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),de(t.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${t.rank}`);const u=s==="NHWC"?a[3]:a[1],d=s==="NHWC"?l.shape[3]:l.shape[1];de(u===t.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${t.shape[2]}.`),de(d===t.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${t.shape[3]}.`),al("conv2dDerInput",i,o);const f={dy:l,filter:t},p={strides:r,pad:i,dataFormat:s,dimRoundingMode:o,inputShape:a},g=Be.runKernel(ZI,f,p);return c?Fe(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const RU=Ie({conv2DBackpropInput_:Rxe});function Nxe(n,e,t,r,i,s){const o=fe(n,"x","conv2dTranspose"),a=fe(e,"filter","conv2dTranspose");return RU(t,o,a,r,i,"NHWC",s)}const NU=Ie({conv2dTranspose_:Nxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ixe(n,e,t,r,i="NDHWC",s=[1,1,1]){const o=fe(n,"x","conv3d"),a=fe(e,"filter","conv3d");let l=o,c=!1;o.rank===4&&(c=!0,l=Fe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),de(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),de(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),de(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),de(ua(t,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${t} and dilations '${s}'`),de(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),de(pv(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),de(pv(t),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:l,filter:a},d={strides:t,pad:r,dataFormat:i,dilations:s},f=Be.runKernel(QI,u,d);return c?Fe(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const _J=Ie({conv3d_:Ixe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dxe(n,e,t,r,i){de(n.length===e.rank,()=>`Length of inShape (${n.length}) and rank of dy (${e.rank}) must match`);let s=n,o=e,a=!1;e.rank===4&&(a=!0,o=Fe(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),s=[1,n[0],n[1],n[2],n[3]]);const l=s[4],c=o.shape[4];de(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),de(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),de(t.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${t.rank}`),de(l===t.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${t.shape[3]}.`),de(c===t.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${t.shape[4]}.`);const u={dy:o,filter:t},d={pad:i,strides:r,inputShape:s},f=Be.runKernel(A4,u,d);return a?Fe(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const CJ=Ie({conv3DBackpropInput_:Dxe});function kxe(n,e,t,r,i){const s=fe(n,"x","conv3dTranspose"),o=fe(e,"filter","conv3dTranspose");return CJ(t,s,o,r,i)}const EJ=Ie({conv3dTranspose_:kxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oxe(n){const t={x:fe(n,"x","cos","float32")};return Be.runKernel(JC,t)}const jD=Ie({cos_:Oxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bxe(n){const t={x:fe(n,"x","cosh","float32")};return Be.runKernel(ZC,t)}const IU=Ie({cosh_:Bxe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $xe(n,e=0,t=!1,r=!1){const s={x:fe(n,"x","cumprod")},o={axis:e,exclusive:t,reverse:r};return Be.runKernel(T4,s,o)}const jR=Ie({cumprod_:$xe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lxe(n,e=0,t=!1,r=!1){const s={x:fe(n,"x","cumsum")},o={axis:e,exclusive:t,reverse:r};return Be.runKernel(eD,s,o)}const DU=Ie({cumsum_:Lxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fxe(n,e,t,r=!1){const i=fe(n,"x","denseBincount"),s=fe(e,"weights","denseBincount");de(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),de(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),de(t>=0,()=>`size must be non-negative, but got ${t}.`),de(s.size===i.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${s.shape}.`);const o={x:i,weights:s},a={size:t,binaryOutput:r};return Be.runKernel(R4,o,a)}const RL=Ie({denseBincount_:Fxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pxe(n,e,t="NHWC"){const r=fe(n,"x","depthToSpace","float32"),i=t==="NHWC"?r.shape[1]:r.shape[2],s=t==="NHWC"?r.shape[2]:r.shape[3],o=t==="NHWC"?r.shape[3]:r.shape[1];de(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),de(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e}  for depthToSpace with input shape
    ${r.shape}`),de(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e} for depthToSpace with input shape
        ${r.shape}`),de(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const a={x:r},l={blockSize:e,dataFormat:t};return Be.runKernel(N4,a,l)}const AJ=Ie({depthToSpace_:Pxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uxe(n,e,t,r,i="NHWC",s=[1,1],o){const a=fe(n,"x","depthwiseConv2d","float32"),l=fe(e,"filter","depthwiseConv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=Fe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),de(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),de(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=i==="NHWC"?c.shape[3]:c.shape[1];de(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),al("depthwiseConv2d",r,o);const f={x:c,filter:l},p={strides:t,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o},g=Be.runKernel(tD,f,p);return u?Fe(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const PE=Ie({depthwiseConv2d_:Uxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zxe(n){const t={x:fe(n,"x","diag")};return Be.runKernel(k4,t)}const Hxe=Ie({diag_:zxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vxe(n,e,t,r,i=[1,1],s="NHWC"){const o=fe(n,"x","dilation2d"),a=fe(e,"filter","dilation2d");de(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),de(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),de(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let l=o,c=!1;o.rank===3&&(l=Fe(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0),de(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const u={x:l,filter:a},d={strides:t,pad:r,dilations:i},f=Be.runKernel(nD,u,d);return c?Fe(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const TJ=Ie({dilation2d_:Vxe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y1(n,e){const t=n.length,r=[];for(let i=0;i<t;i++){const s=t-1-i,o=n[s]||1;(e[e.length-1-i]||1)>1&&o===1&&r.unshift(s)}return r}function Ro(n,e){const t=[];for(let r=0;r<e.length;r++){const i=n[n.length-r-1],s=e.length-r-1,o=e[s];(i==null||i===1&&o>1)&&t.unshift(s)}return t}function fr(n,e){const t=Math.max(n.length,e.length),r=new Array(t);for(let i=0;i<t;i++){let s=n[n.length-i-1];s==null&&(s=1);let o=e[e.length-i-1];if(o==null&&(o=1),s===1)r[t-i-1]=o;else if(o===1)r[t-i-1]=s;else if(s!==o){const a=`Operands could not be broadcast together with shapes ${n} and ${e}.`;throw Error(a)}else r[t-i-1]=s}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gxe(n,e){let t=fe(n,"a","equal","string_or_numeric"),r=fe(e,"b","equal","string_or_numeric");[t,r]=Ls(t,r),fr(t.shape,r.shape);const i={a:t,b:r};return Be.runKernel(rD,i)}const sh=Ie({equal_:Gxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wxe(n,e,t){const r=fe(e,"a","where"),i=fe(t,"b","where"),s=fe(n,"condition","where","bool"),o=fr(fr(s.shape,r.shape),i.shape),a=Vx(s,o),l=Vx(r,o),c=Vx(i,o),u={condition:a,t:l,e:c};return Be.runKernel(kD,u)}const Ia=Ie({where_:Wxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jxe(n){const t={x:fe(n,"x","zerosLike")};return Be.runKernel(HD,t)}const qr=Ie({zerosLike_:jxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xxe(n,e){let t=fe(n,"a","div"),r=fe(e,"b","div");[t,r]=Ls(t,r);const i=mn(t,r),s=qr(i),o=sh(r,s);return Ia(o,s,i)}const MJ=Ie({divNoNan_:Xxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qxe(n,e){const t=fe(n,"t1","dot"),r=fe(e,"t2","dot");de((t.rank===1||t.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${t.rank} and ${r.rank}.`);const i=t.rank===1?t.size:t.shape[1],s=r.rank===1?r.size:r.shape[0];if(de(i===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${s}.`),t.rank===1&&r.rank===1){const o=Fe(t,[1,-1]),a=Fe(r,[-1,1]),l=Br(o,a);return Fe(l,[])}else if(t.rank===1&&r.rank===2){const o=Fe(t,[1,-1]),a=Fe(r,[r.shape[0],r.shape[1]]),l=Br(o,a);return Fe(l,[l.size])}else if(t.rank===2&&r.rank===1){const o=Fe(r,[-1,1]),a=Br(t,o);return Fe(a,[a.size])}else{const o=Fe(r,[r.shape[0],r.shape[1]]);return Br(t,o)}}const RJ=Ie({dot_:qxe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kxe(n,...e){const t=e.map((i,s)=>fe(i,`tensors${s}`,"einsum")),r={equation:n};return Be.runKernel(O4,t,r)}const Ix=Ie({einsum_:Kxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yxe(n){const t={x:fe(n,"x","elu","float32")};return Be.runKernel(eE,t)}const UE=Ie({elu_:Yxe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jxe(n,e){const t=fe(n,"x","ensureShape","string_or_numeric");if(!cve(t.shape,e))throw new Error(`EnsureShape: Shape of tensor ${t.shape} is not compatible with expected shape ${e}`);return n}const Zxe=Ie({ensureShape_:Jxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qxe(n){let e=fe(n,"x","erf");de(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=nn(e,"float32"));const t={x:e};return Be.runKernel(tE,t)}const kU=Ie({erf_:Qxe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OU(n,e){for(let t=0;t<n.length;++t)if(n[n.length-t-1]!==e-1-t)return!1;return!0}function NJ(n,e,t){const r=n.length+e.length,i=[];let s=0,o=0;for(let a=0;a<r;a++)t.indexOf(a)===-1?i.push(n[s++]):i.push(e[o++]);return i}function Xo(n,e){const t=[],r=n.length;for(let s=0;s<r;s++)e.indexOf(s)===-1&&t.push(n[s]);const i=e.map(s=>n[s]);return[t,i]}function Ks(n,e){const t=e.map(r=>1);return NJ(n,t,e)}function da(n,e,t){de(OU(e,t),()=>`${n} supports only inner-most axes for now. Got axes ${e} and rank-${t} input.`)}function Cs(n,e){if(OU(n,e))return null;const t=[];for(let r=0;r<e;++r)n.indexOf(r)===-1&&t.push(r);return n.forEach(r=>t.push(r)),t}function Yg(n){return n.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function Zs(n,e){const t=[];for(let r=e-n;r<e;++r)t.push(r);return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e1e(n,e=null,t=!1){const i={x:fe(n,"x","max")},s={reductionIndices:e,keepDims:t};return Be.runKernel(mD,i,s)}const qu=Ie({max_:e1e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t1e(n,e=null,t=!1){const i={x:fe(n,"x","min")},s={axis:e,keepDims:t};return Be.runKernel(bD,i,s)}const J_=Ie({min_:t1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n1e(n,e){let t=fe(n,"base","pow"),r=fe(e,"exp","pow");[t,r]=Ls(t,r);const i={a:t,b:r};return Be.runKernel(yE,i)}const Gp=Ie({pow_:n1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $n(n,e){if((Ju(n)&&e!=="string"||Array.isArray(n))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Ju(n)&&!(n instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return qg(n,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r1e(n){const t={x:fe(n,"x","sqrt","float32")};return Be.runKernel(RE,t)}const ca=Ie({sqrt_:r1e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i1e(n){const e=fe(n,"x","square"),t={};return Be.runKernel("Square",{x:e},t)}const Ki=Ie({square_:i1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s1e(n,e=null,t=!1){let r=fe(n,"x","sum");r.dtype==="bool"&&(r=nn(r,"int32"));const i={x:r},s={axis:e,keepDims:t};return Be.runKernel(BD,i,s)}const wn=Ie({sum_:s1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o1e(n,e="euclidean",t=null,r=!1){n=fe(n,"x","norm");const i=IJ(n,e,t);let s=i.shape;if(r){const o=Ir(t,n.shape);s=Ks(i.shape,o)}return Fe(i,s)}function IJ(n,e,t=null){if(n.rank===0)return xo(n);if(n.rank!==1&&t===null)return IJ(Fe(n,[-1]),e,t);if(n.rank===1||typeof t=="number"||Array.isArray(t)&&t.length===1){if(e===1)return wn(xo(n),t);if(e===1/0)return qu(xo(n),t);if(e===-1/0)return J_(xo(n),t);if(e==="euclidean"||e===2)return ca(wn(Gp(xo(n),$n(2,"int32")),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(t)&&t.length===2){if(e===1)return qu(wn(xo(n),t[0]),t[1]-1);if(e===1/0)return qu(wn(xo(n),t[1]),t[0]);if(e===-1/0)return J_(wn(xo(n),t[1]),t[0]);if(e==="fro"||e==="euclidean")return ca(wn(Ki(n),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${t}`)}const zE=Ie({norm_:o1e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a1e(n,e=null,t=!1){return zE(n,"euclidean",e,t)}const DJ=Ie({euclideanNorm_:a1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l1e(n){const t={x:fe(n,"x","exp")};return Be.runKernel(nE,t)}const il=Ie({exp_:l1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c1e(n,e=0){const t=fe(n,"x","expandDims","string_or_numeric");de(e<=t.rank,()=>"Axis must be <= rank of the tensor");const r={input:t},i={dim:e};return Be.runKernel(iD,r,i)}const na=Ie({expandDims_:c1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u1e(n){const t={x:fe(n,"x","expm1")};return Be.runKernel(rE,t)}const kJ=Ie({expm1_:u1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d1e(n,e){const t=fe(n,"x","tile","string_or_numeric");de(t.rank===e.length,()=>`Error in transpose: rank of input ${t.rank} must match length of reps ${e}.`);const r={x:t},i={reps:e};return Be.runKernel(OE,r,i)}const Vu=Ie({tile_:d1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h1e(n,e,t,r="float32"){e==null&&(e=n);const i=Ar([n,e],r),s=n<=e?n:e;for(let a=0;a<s;++a)i.set(1,a,a);const o=Fe(i.toTensor(),[n,e]);if(t==null)return o;if(t.length===1)return Vu(na(o,0),[t[0],1,1]);if(t.length===2)return Vu(na(na(o,0),0),[t[0],t[1],1,1]);if(t.length===3)return Vu(na(na(na(o,0),0),0),[t[0],t[1],t[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${t.length}D.`)}const BU=Ie({eye_:h1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f1e(n){const t={x:fe(n,"x","floor","float32")};return Be.runKernel(iE,t)}const HE=Ie({floor_:f1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p1e(n,e,t=0,r=0){const i=fe(n,"x","gather"),s=fe(e,"indices","gather","int32"),o={x:i,indices:s},a={axis:t,batchDims:r};return Be.runKernel(oD,o,a)}const VE=Ie({gather_:p1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m1e(n,e){let t=fe(n,"a","greater","string_or_numeric"),r=fe(e,"b","greater","string_or_numeric");[t,r]=Ls(t,r),fr(t.shape,r.shape);const i={a:t,b:r};return Be.runKernel(aD,i)}const kc=Ie({greater_:m1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g1e(n,e){let t=fe(n,"a","greaterEqual","string_or_numeric"),r=fe(e,"b","greaterEqual","string_or_numeric");[t,r]=Ls(t,r),fr(t.shape,r.shape);const i={a:t,b:r};return Be.runKernel(oE,i)}const Jg=Ie({greaterEqual_:g1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y1e(n){const t={input:fe(n,"input","imag")};return Be.runKernel(z4,t)}const XD=Ie({imag_:y1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v1e(n){const t={x:fe(n,"x","isFinite")};return Be.runKernel(lE,t)}const OJ=Ie({isFinite_:v1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b1e(n){const t={x:fe(n,"x","isInf")};return Be.runKernel(cE,t)}const BJ=Ie({isInf_:b1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x1e(n){const t={x:fe(n,"x","isNaN")};return Be.runKernel(uE,t)}const $J=Ie({isNaN_:x1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S1e(n,e=.2){const r={x:fe(n,"x","leakyRelu")},i={alpha:e};return Be.runKernel(lD,r,i)}const qD=Ie({leakyRelu_:S1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w1e(n,e){let t=fe(n,"a","less","string_or_numeric"),r=fe(e,"b","less","string_or_numeric");[t,r]=Ls(t,r),fr(t.shape,r.shape);const i={a:t,b:r};return Be.runKernel(cD,i)}const Z_=Ie({less_:w1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _1e(n,e){let t=fe(n,"a","lessEqual","string_or_numeric"),r=fe(e,"b","lessEqual","string_or_numeric");[t,r]=Ls(t,r),fr(t.shape,r.shape);const i={a:t,b:r};return Be.runKernel(uD,i)}const Ov=Ie({lessEqual_:_1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C1e(n,e,t){if(t<=0)throw new Error("The number of values should be positive.");const r={start:n,stop:e,num:t};return Be.runKernel(H4,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E1e(n,e=5,t=1,r=1,i=.5){const s=fe(n,"x","localResponseNormalization");de(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),de(m1(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=s,a=!1;s.rank===3&&(a=!0,o=Fe(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const l={x:o},c={depthRadius:e,bias:t,alpha:r,beta:i},u=Be.runKernel(pD,l,c);return a?Fe(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const LJ=Ie({localResponseNormalization_:E1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A1e(n){const t={x:fe(n,"x","log","float32")};return Be.runKernel(dE,t)}const ou=Ie({log_:A1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T1e(n){const t={x:fe(n,"x","log1p")};return Be.runKernel(hE,t)}const KD=Ie({log1p_:T1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M1e(n,e){de(uL(n),()=>"The f passed in variableGrads(f) must be a function"),de(e==null||Array.isArray(e)&&e.every(c=>c instanceof VR),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const t=e!=null;if(!t){e=[];for(const c in Be.registeredVariables)e.push(Be.registeredVariables[c])}const r=t?e.filter(c=>!c.trainable):null,i=e.length;e=e.filter(c=>c.trainable),de(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);const s=!0,{value:o,grads:a}=Be.gradients(n,e,null,s);de(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),de(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((c,u)=>{a[u]!=null&&(l[c.name]=a[u])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:o,grads:l}}function Wp(n){return Be.customGrad(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R1e(n){const t={x:fe(n,"x","neg")};return Be.runKernel(SD,t)}const ss=Ie({neg_:R1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N1e(n){const t={x:fe(n,"x","softplus")};return Be.runKernel(ME,t)}const W1=Ie({softplus_:N1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I1e(n){const e=fe(n,"x","logSigmoid");return Wp(r=>({value:ss(W1(ss(r))),gradFunc:o=>ke(o,Qd(ss(r)))}))(e)}const FJ=Ie({logSigmoid_:I1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D1e(n,e){let t=fe(n,"a","sub"),r=fe(e,"b","sub");[t,r]=Ls(t,r);const i={a:t,b:r};return Be.runKernel(IE,i)}const vn=Ie({sub_:D1e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k1e(n,e=-1){const t=fe(n,"logits","logSoftmax");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${t.rank} and axis was ${e}`);return Wp((i,s)=>{const a=qu(i,e,!0),l=vn(i,a),c=vn(nn(l,"float32"),ou(wn(il(l),e,!0)));return s([c]),{value:c,gradFunc:(d,f)=>{const[p]=f,g=!0,v=il(p);return vn(d,ke(wn(d,e,g),v))}}})(t)}const $U=Ie({logSoftmax_:k1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O1e(n,e=null,t=!1){const r=fe(n,"x","logSumExp"),i=Ir(e,r.shape),s=qu(r,i,!0),o=vn(r,s),a=il(o),l=wn(a,i),c=ou(l),u=$t(Fe(s,c.shape),c);if(t){const d=Ks(u.shape,i);return Fe(u,d)}return u}const YD=Ie({logSumExp_:O1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B1e(n,e){const t=fe(n,"a","logicalAnd","bool"),r=fe(e,"b","logicalAnd","bool");fr(t.shape,r.shape);const i={a:t,b:r};return Be.runKernel(dD,i)}const Af=Ie({logicalAnd_:B1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $1e(n){const t={x:fe(n,"x","logicalNot","bool")};return Be.runKernel(hD,t)}const JD=Ie({logicalNot_:$1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L1e(n,e){const t=fe(n,"a","logicalOr","bool"),r=fe(e,"b","logicalOr","bool");fr(t.shape,r.shape);const i={a:t,b:r};return Be.runKernel(fD,i)}const LU=Ie({logicalOr_:L1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F1e(n,e){const t=fe(n,"a","logicalXor","bool"),r=fe(e,"b","logicalXor","bool");return fr(t.shape,r.shape),Af(LU(n,e),JD(Af(n,e)))}const PJ=Ie({logicalXor_:F1e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $T=2147483648;function P1e(n,e,t="left"){const r=fe(n,"sortedSequence","searchSorted"),i=fe(e,"values","searchSorted"),s=r.shape[r.shape.length-1],o=i.shape[i.shape.length-1],a=Fe(r,[-1,s]),l=Fe(i,[-1,o]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(xt(l.shape)>=$T)throw new Error(`values tensor size must less than ${$T}`);if(a.shape[1]>=$T)throw new Error(`trailing dim_size must less than ${$T} for int32 output type, was ${a.shape[1]}`);const c={sortedSequence:a,values:l},u={side:t};return Be.runKernel(oU,c,u)}const FU=Ie({searchSorted_:P1e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U1e(n,e){return FU(n,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z1e(n,e,t,r,i){const s=fe(n,"x","maxPool"),o=1;let a=s,l=!1;s.rank===3&&(l=!0,a=Fe(s,[1,s.shape[0],s.shape[1],s.shape[2]])),de(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),de(ua(t,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${t} and dilations '${o}'`),al("maxPool",r,i);const c={x:a},u={filterSize:e,strides:t,pad:r,dimRoundingMode:i},d=Be.runKernel(gD,c,u);return l?Fe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const ZD=Ie({maxPool_:z1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H1e(n,e=[1,1,1],t,r,i,s="NDHWC"){const o=fe(n,"x","maxPool3d");let a=o,l=!1;o.rank===4&&(l=!0,a=Fe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),de(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),de(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),al("maxPool3d",r,i);const c={x:a},u={filterSize:e,strides:t,pad:r,dimRoundingMode:i,dataFormat:s},d=Be.runKernel(yD,c,u);return l?Fe(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const UJ=Ie({maxPool3d_:H1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V1e(n,e,t,r,i=!1){const o={x:fe(n,"x","maxPoolWithArgmax")},a={filterSize:e,strides:t,pad:r,includeBatchInIndex:i},l=Be.runKernel(j4,o,a);return{result:l[0],indexes:l[1]}}const G1e=Ie({maxPoolWithArgmax_:V1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W1e(n,e){let t=fe(n,"a","maximum"),r=fe(e,"b","maximum");[t,r]=Ls(t,r),t.dtype==="bool"&&(t=nn(t,"int32"),r=nn(r,"int32")),fr(t.shape,r.shape);const i={a:t,b:r};return Be.runKernel(fE,i)}const im=Ie({maximum_:W1e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j1e(n,e=null,t=!1){const i={x:fe(n,"x","mean")},s={axis:e,keepDims:t};return Be.runKernel(vD,i,s)}const ks=Ie({mean_:j1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _o(n,e="float32"){if(lu(n),e==="complex64"){const r=_o(n,"float32"),i=_o(n,"float32");return Rg(r,i)}const t=ka(xt(n),e);return Be.makeTensor(t,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xc(n,e="float32"){if(lu(n),e==="complex64"){const r=xc(n,"float32"),i=_o(n,"float32");return Rg(r,i)}const t=m4(xt(n),e);return Be.makeTensor(t,n,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X1e(n,e,{indexing:t="xy"}={}){if(t!=="xy"&&t!=="ij")throw new TypeError(`${t} is not a valid third argument to meshgrid`);if(n===void 0)return[];let r=fe(n,"x","meshgrid",n instanceof qi?n.dtype:"float32");if(e===void 0)return[r];let i=fe(e,"y","meshgrid",e instanceof qi?e.dtype:"float32");const s=xt(r.shape),o=xt(i.shape);return t==="xy"?(r=Fe(r,[1,-1]),i=Fe(i,[-1,1]),[Br(xc([o,1],r.dtype),r),Br(i,xc([1,s],i.dtype))]):(r=Fe(r,[-1,1]),i=Fe(i,[1,-1]),[Br(r,xc([1,o],r.dtype)),Br(xc([s,1],i.dtype),i)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q1e(n,e){let t=fe(n,"a","minimum"),r=fe(e,"b","minimum");[t,r]=Ls(t,r),t.dtype==="bool"&&(t=nn(t,"int32"),r=nn(r,"int32")),fr(t.shape,r.shape);const i={a:t,b:r};return Be.runKernel(pE,i)}const gv=Ie({minimum_:q1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K1e(n,e,t){de(t==="reflect"||t==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${t}.`);const r=fe(n,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");de(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const i=t==="reflect"?1:0;for(let a=0;a<r.rank;a++)de(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),de(e[a][0]>=0&&e[a][0]<=r.shape[a]-i&&e[a][1]>=0&&e[a][1]<=r.shape[a]-i,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-i} or less than 0 for input of shape ${r.shape}`);const s={paddings:e,mode:t},o={x:r};return Be.runKernel(xD,o,s)}const zJ=Ie({mirrorPad_:K1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y1e(n,e){let t=fe(n,"a","mod"),r=fe(e,"b","mod");[t,r]=Ls(t,r);const i={a:t,b:r};return Be.runKernel(mE,i)}const HJ=Ie({mod_:Y1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J1e(n,e=null,t=!1){n=fe(n,"x","moments");const r=Ir(e,n.shape),i=ks(n,r,t);let s=i.shape;t||(s=Ks(i.shape,r));const o=Ki(vn(nn(n,"float32"),Fe(i,s))),a=ks(o,r,t);return{mean:i,variance:a}}const QD=Ie({moments_:J1e});function Z1e(n,e,t,r){const i=fe(e,"data","multiRNNCell"),s=GR(t,"c","multiRNNCell"),o=GR(r,"h","multiRNNCell");let a=i;const l=[];for(let d=0;d<n.length;d++){const f=n[d](a,s[d],o[d]);l.push(f[0]),l.push(f[1]),a=f[1]}const c=[],u=[];for(let d=0;d<l.length;d+=2)c.push(l[d]),u.push(l[d+1]);return[c,u]}const Q1e=Ie({multiRNNCell_:Z1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eSe(n,e,t,r=!1){const i=fe(n,"logits","multinomial"),s=i.size,o=i.rank;if(s<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${s}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);t=t||Math.random();const l={logits:o===1?Fe(i,[1,-1]):i},c={numSamples:e,seed:t,normalized:r},u=Be.runKernel(X4,l,c);return o===1?Fe(u,[u.size]):u}const tSe=Ie({multinomial_:eSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nSe(n,e){let t=fe(n,"a","notEqual","string_or_numeric"),r=fe(e,"b","notEqual","string_or_numeric");[t,r]=Ls(t,r),fr(t.shape,r.shape);const i={a:t,b:r};return Be.runKernel(wD,i)}const v1=Ie({notEqual_:nSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rSe(n,e,t=1,r=0,i="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:fe(n,"indices","oneHot","int32")},a={dtype:i,depth:e,onValue:t,offValue:r};return Be.runKernel(CD,o,a)}const PU=Ie({oneHot_:rSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iSe(n){const t={x:fe(n,"x","onesLike")};return Be.runKernel(_D,t)}const au=Ie({onesLike_:iSe});function sSe(n,e){const t=fe(n,"v1","outerProduct"),r=fe(e,"v2","outerProduct");de(t.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${t.rank} and ${r.rank}.`);const i=Fe(t,[-1,1]),s=Fe(r,[1,-1]);return Br(i,s)}const oSe=Ie({outerProduct_:sSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aSe(n,e,t=0){const r=fe(n,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:e,constantValue:t},s={x:r};return Be.runKernel(AD,s,i)}const Zg=Ie({pad_:aSe});function lSe(n,e,t=0){return de(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),Zg(n,[e],t)}const cSe=Ie({pad1d_:lSe});function uSe(n,e,t=0){return de(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Zg(n,e,t)}const dSe=Ie({pad2d_:uSe});function hSe(n,e,t=0){return de(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Zg(n,e,t)}const fSe=Ie({pad3d_:hSe});function pSe(n,e,t=0){return de(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Zg(n,e,t)}const mSe=Ie({pad4d_:pSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gSe(n,e,t){const r=fe(n,"x","spaceToBatchND");de(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),de(t.length===e.length,()=>`paddings.shape[0] ${t.length} must be equal to [blockShape] ${e.length}`),de(r.shape.reduce((o,a,l)=>l>0&&l<=e.length?o&&(a+t[l-1][0]+t[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${t.toString()} must be divisible by blockShapes ${e.toString()}`);const i={x:r},s={blockShape:e,paddings:t};return Be.runKernel($D,i,s)}const e3=Ie({spaceToBatchND_:gSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ySe(n,e,t,r,i,s,o){i==null&&(i=[1,1]),s==null&&(s=1),r===0&&(r="valid");const a=fe(n,"x","maxPool");let l=a,c=!1;a.rank===3&&(c=!0,l=Fe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),de(ua(s,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${i}'`);const u=nd(l.shape,e,s,i,r),d=[u.dilationHeight,u.dilationWidth];let f;r==="same"?f=bSe([u.filterHeight,u.filterWidth],d):f=[[0,0],[0,0]];const p=d[0]===1&&d[1]===1,[g,v]=vSe([u.inHeight,u.inWidth],d,f),b=p?r:"valid",x=p?l:e3(l,d,g),E=(t==="avg"?()=>GD(x,e,s,b,o):()=>ZD(x,e,s,b,o))(),C=p?E:WD(E,d,v);return c?Fe(C,[C.shape[1],C.shape[2],C.shape[3]]):C}function vSe(n,e,t){const r=t.map(u=>u[0]),i=t.map(u=>u[1]),s=n.concat(r,i),o=e.map((u,d)=>(u-s[d]%u)%u),a=i.map((u,d)=>u+o[d]),l=e.map((u,d)=>[r[d],a[d]]),c=e.map((u,d)=>[0,o[d]]);return[l,c]}function bSe(n,e){const r=n.map((o,a)=>o+(o-1)*(e[a]-1)).map(o=>o-1),i=r.map(o=>Math.floor(o/2)),s=r.map((o,a)=>o-i[a]);return r.map((o,a)=>[i[a],s[a]])}const VJ=Ie({pool_:ySe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xSe(n,e){const t=fe(n,"x","prelu"),r=fe(e,"alpha","prelu"),i={x:t,alpha:r};return Be.runKernel(TD,i)}const t3=Ie({prelu_:xSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SSe(n,e=null,t=!1){let r=fe(n,"x","prod");r.dtype==="bool"&&(r=nn(r,"int32"));const i={x:r},s={axis:e,keepDims:t};return Be.runKernel(MD,i,s)}const GJ=Ie({prod_:SSe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wSe(n,e,t,r){const i=n.map((u,d)=>fe(u,`tensors${d}`,"raggedGather","int32")),s=fe(e,"paramsDenseValues","raggedGather"),o=fe(t,"indices","raggedGather","int32"),a={paramsNestedSplits:i,paramsDenseValues:s,indices:o},l={outputRaggedRank:r},c=Be.runKernel(J4,a,l);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}const _Se=Ie({raggedGather_:wSe});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CSe(n,e,t){const r=fe(n,"starts","raggedRange"),i=fe(e,"limits","raggedRange",r.dtype),s=fe(t,"deltas","raggedRange",r.dtype),o={starts:r,limits:i,deltas:s},a=Be.runKernel(Z4,o);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}const ESe=Ie({raggedRange_:CSe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ASe(n,e,t,r,i){const s=fe(n,"shape","raggedTensorToTensor","int32"),o=fe(e,"values","raggedTensorToTensor"),a=fe(t,"defaultValue","raggedTensorToTensor",o.dtype),l=r.map((d,f)=>fe(d,`tensors${f}`,"raggedTensorToTensor","int32")),c={shape:s,values:o,defaultValue:a,rowPartitionTensors:l},u={rowPartitionTypes:i};return Be.runKernel(Q4,c,u)}const TSe=Ie({raggedTensorToTensor_:ASe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MSe(n,e,t){lu(n);const r=xt(n);let i=null;if(t==null||t==="float32")i=new Float32Array(r);else if(t==="int32")i=new Int32Array(r);else if(t==="bool")i=new Uint8Array(r);else throw new Error(`Unknown data type ${t}`);for(let s=0;s<r;s++)i[s]=e();return Be.makeTensor(i,n,t)}const RSe=Ie({rand_:MSe});var AM={exports:{}},NSe=AM.exports,O8;function ISe(){return O8||(O8=1,function(n){(function(e,t,r){function i(l){var c=this,u=a();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function s(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function o(l,c){var u=new i(l),d=c&&c.state,f=u.next;return f.int32=function(){return u.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&s(d,u),f.state=function(){return s(u,{})}),f}function a(){var l=4022871197,c=function(u){u=String(u);for(var d=0;d<u.length;d++){l+=u.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return c}t&&t.exports?t.exports=o:this.alea=o})(NSe,n)}(AM)),AM.exports}var TM={exports:{}},DSe=TM.exports,B8;function kSe(){return B8||(B8=1,function(n){(function(e,t,r){function i(a){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,p=(c.next()>>>0)/4294967296,g=(f+p)/(1<<21);while(g===0);return g},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}t&&t.exports?t.exports=o:this.xor128=o})(DSe,n)}(TM)),TM.exports}var MM={exports:{}},OSe=MM.exports,$8;function BSe(){return $8||($8=1,function(n){(function(e,t,r){function i(a){var l=this,c="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,p=(c.next()>>>0)/4294967296,g=(f+p)/(1<<21);while(g===0);return g},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}t&&t.exports?t.exports=o:this.xorwow=o})(OSe,n)}(MM)),MM.exports}var RM={exports:{}},$Se=RM.exports,L8;function LSe(){return L8||(L8=1,function(n){(function(e,t,r){function i(a){var l=this;l.next=function(){var u=l.x,d=l.i,f,p;return f=u[d],f^=f>>>7,p=f^f<<24,f=u[d+1&7],p^=f^f>>>10,f=u[d+3&7],p^=f^f>>>3,f=u[d+4&7],p^=f^f<<7,f=u[d+7&7],f=f^f<<13,p^=f^f<<9,u[d]=p,l.i=d+1&7,p};function c(u,d){var f,p=[];if(d===(d|0))p[0]=d;else for(d=""+d,f=0;f<d.length;++f)p[f&7]=p[f&7]<<15^d.charCodeAt(f)+p[f+1&7]<<13;for(;p.length<8;)p.push(0);for(f=0;f<8&&p[f]===0;++f);for(f==8?p[7]=-1:p[f],u.x=p,u.i=0,f=256;f>0;--f)u.next()}c(l,a)}function s(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,p=(c.next()>>>0)/4294967296,g=(f+p)/(1<<21);while(g===0);return g},d.int32=c.next,d.quick=d,u&&(u.x&&s(u,c),d.state=function(){return s(c,{})}),d}t&&t.exports?t.exports=o:this.xorshift7=o})($Se,n)}(RM)),RM.exports}var NM={exports:{}},FSe=NM.exports,F8;function PSe(){return F8||(F8=1,function(n){(function(e,t,r){function i(a){var l=this;l.next=function(){var u=l.w,d=l.X,f=l.i,p,g;return l.w=u=u+1640531527|0,g=d[f+34&127],p=d[f=f+1&127],g^=g<<13,p^=p<<17,g^=g>>>15,p^=p>>>12,g=d[f]=g^p,l.i=f,g+(u^u>>>16)|0};function c(u,d){var f,p,g,v,b,x=[],_=128;for(d===(d|0)?(p=d,d=null):(d=d+"\0",p=0,_=Math.max(_,d.length)),g=0,v=-32;v<_;++v)d&&(p^=d.charCodeAt((v+32)%d.length)),v===0&&(b=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,v>=0&&(b=b+1640531527|0,f=x[v&127]^=p+b,g=f==0?g+1:0);for(g>=128&&(x[(d&&d.length||0)&127]=-1),g=127,v=512;v>0;--v)p=x[g+34&127],f=x[g=g+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,x[g]=p^f;u.w=b,u.X=x,u.i=g}c(l,a)}function s(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,p=(c.next()>>>0)/4294967296,g=(f+p)/(1<<21);while(g===0);return g},d.int32=c.next,d.quick=d,u&&(u.X&&s(u,c),d.state=function(){return s(c,{})}),d}t&&t.exports?t.exports=o:this.xor4096=o})(FSe,n)}(NM)),NM.exports}var IM={exports:{}},USe=IM.exports,P8;function zSe(){return P8||(P8=1,function(n){(function(e,t,r){function i(a){var l=this,c="";l.next=function(){var d=l.b,f=l.c,p=l.d,g=l.a;return d=d<<25^d>>>7^f,f=f-p|0,p=p<<24^p>>>8^g,g=g-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-p|0,l.d=p<<16^f>>>16^g,l.a=g-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):c+=a;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function s(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,p=(c.next()>>>0)/4294967296,g=(f+p)/(1<<21);while(g===0);return g},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}t&&t.exports?t.exports=o:this.tychei=o})(USe,n)}(IM)),IM.exports}var DM={exports:{}};const HSe={},VSe=Object.freeze(Object.defineProperty({__proto__:null,default:HSe},Symbol.toStringTag,{value:"Module"})),GSe=Mle(VSe);var WSe=DM.exports,U8;function jSe(){return U8||(U8=1,function(n){(function(e,t,r){var i=256,s=6,o=52,a="random",l=r.pow(i,s),c=r.pow(2,o),u=c*2,d=i-1,f;function p(C,M,R){var L=[];M=M==!0?{entropy:!0}:M||{};var B=x(b(M.entropy?[C,E(t)]:C??_(),3),L),N=new g(L),I=function(){for(var D=N.g(s),P=l,G=0;D<c;)D=(D+G)*i,P*=i,G=N.g(1);for(;D>=u;)D/=2,P/=2,G>>>=1;return(D+G)/P};return I.int32=function(){return N.g(4)|0},I.quick=function(){return N.g(4)/4294967296},I.double=I,x(E(N.S),t),(M.pass||R||function(D,P,G,W){return W&&(W.S&&v(W,N),D.state=function(){return v(N,{})}),G?(r[a]=D,P):D})(I,B,"global"in M?M.global:this==r,M.state)}function g(C){var M,R=C.length,L=this,B=0,N=L.i=L.j=0,I=L.S=[];for(R||(C=[R++]);B<i;)I[B]=B++;for(B=0;B<i;B++)I[B]=I[N=d&N+C[B%R]+(M=I[B])],I[N]=M;(L.g=function(D){for(var P,G=0,W=L.i,q=L.j,z=L.S;D--;)P=z[W=d&W+1],G=G*i+z[d&(z[W]=z[q=d&q+P])+(z[q]=P)];return L.i=W,L.j=q,G})(i)}function v(C,M){return M.i=C.i,M.j=C.j,M.S=C.S.slice(),M}function b(C,M){var R=[],L=typeof C,B;if(M&&L=="object")for(B in C)try{R.push(b(C[B],M-1))}catch{}return R.length?R:L=="string"?C:C+"\0"}function x(C,M){for(var R=C+"",L,B=0;B<R.length;)M[d&B]=d&(L^=M[d&B]*19)+R.charCodeAt(B++);return E(M)}function _(){try{var C;return f&&(C=f.randomBytes)?C=C(i):(C=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(C)),E(C)}catch{var M=e.navigator,R=M&&M.plugins;return[+new Date,e,R,e.screen,E(t)]}}function E(C){return String.fromCharCode.apply(0,C)}if(x(r.random(),t),n.exports){n.exports=p;try{f=GSe}catch{}}else r["seed"+a]=p})(typeof self<"u"?self:WSe,[],Math)}(DM)),DM.exports}var nB,z8;function XSe(){if(z8)return nB;z8=1;var n=ISe(),e=kSe(),t=BSe(),r=LSe(),i=PSe(),s=zSe(),o=jSe();return o.alea=n,o.xor128=e,o.xorwow=t,o.xorshift7=r,o.xor4096=i,o.tychei=s,nB=o,nB}var n3=XSe();/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UU{constructor(e,t,r,i,s){this.mean=e,this.stdDev=t,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=s||Math.random();this.random=n3.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const i=this.nextVal;return this.nextVal=NaN,i}let e,t,r=!1;for(;!r;){let i,s,o;do i=2*this.random()-1,s=2*this.random()-1,o=i*i+s*s;while(o>=1||o===0);const a=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*i*a,t=this.mean+this.stdDev*s*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(t))&&(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class qSe{constructor(e,t,r,i){this.alpha=e,this.beta=1/t,this.dtype=r;const s=i||Math.random();this.randu=n3.alea(s.toString()),this.randn=new UU(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,r,i,s,o;for(;;){do i=this.randn.nextValue(),o=1+this.c*i;while(o<=0);if(o*=o*o,e=i*i,t=1-.331*e*e,r=.5*e+this.d*(1-o+Math.log(o)),s=this.randu(),s<t||Math.log(s)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class KSe{constructor(e=0,t=1,r,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=t-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=n3.alea(i)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YSe(n,e,t=1,r="float32",i){if(lu(n),t==null&&(t=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const s=new qSe(e,t,r,i),o=Ar(n,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}const JSe=Ie({randomGamma_:YSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZSe(n,e=0,t=1,r,i){if(lu(n),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const s=new UU(e,t,r,!1,i),o=Ar(n,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}const zU=Ie({randomNormal_:ZSe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QSe(n,e,t){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return zU(n,0,1,e,t)}const ewe=Ie({randomStandardNormal_:QSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function twe(n,e=0,t=1,r="float32",i){lu(n);const s=Ar(n,r),o=new KSe(e,t,null,i);for(let a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}const Bv=Ie({randomUniform_:twe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nwe(n,e,t,r){return Bv(n,e,t,"int32",r)}const rwe=Ie({randomUniformInt_:nwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b1(n,e,t=1,r="float32"){if(t===0)throw new Error("Cannot have a step of zero");const i={start:n,stop:e,step:t,dtype:r};return Be.runKernel(eU,{},i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iwe(n){const t={input:fe(n,"input","real")};return Be.runKernel(tU,t)}const Q_=Ie({real_:iwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function swe(n){const t={x:fe(n,"x","reciprocal")};return Be.runKernel(vE,t)}const WJ=Ie({reciprocal_:swe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function owe(n){const t={x:fe(n,"x","relu")};return Be.runKernel(bE,t)}const $f=Ie({relu_:owe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function awe(n){const t={x:fe(n,"x","relu6")};return Be.runKernel(xE,t)}const HU=Ie({relu6_:awe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lwe(n,e){const r={x:fe(n,"x","reverse")},i={dims:e};return Be.runKernel(DD,r,i)}const Zu=Ie({reverse_:lwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cwe(n){const e=fe(n,"x","reverse");return de(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),Zu(e,0)}const uwe=Ie({reverse1d_:cwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dwe(n,e){const t=fe(n,"x","reverse");return de(t.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${t.rank}.`),Zu(t,e)}const hwe=Ie({reverse2d_:dwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fwe(n,e){const t=fe(n,"x","reverse");return de(t.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${t.rank}.`),Zu(t,e)}const pwe=Ie({reverse3d_:fwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mwe(n,e){const t=fe(n,"x","reverse");return de(t.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${t.rank}.`),Zu(t,e)}const gwe=Ie({reverse4d_:mwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ywe(n){const t={x:fe(n,"x","round")};return Be.runKernel(SE,t)}const VU=Ie({round_:ywe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vwe(n){const t={x:fe(n,"x","rsqrt","float32")};return Be.runKernel(wE,t)}const GU=Ie({rsqrt_:vwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bwe(n){const t={x:fe(n,"x","selu")};return Be.runKernel(_E,t)}const WU=Ie({selu_:bwe});function xwe(n,e,t,r,i,s=[1,1],o="NHWC"){const a=fe(n,"x","separableConv2d"),l=fe(e,"depthwiseFilter","separableConv2d"),c=fe(t,"pointwiseFilter","separableConv2d");let u=a,d=!1;if(a.rank===3&&(d=!0,u=Fe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");de(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),de(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),de(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),de(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),de(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const f=l.shape[2],p=l.shape[3];de(c.shape[2]===f*p,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*p}, but got ${c.shape[2]}.`);const g=PE(u,l,r,i,o,s),b=Dg(g,c,1,"valid",o);return d?Fe(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const jU=Ie({separableConv2d_:xwe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Swe(n,e){const t=fe(n,"x","setdiff1d"),r=fe(e,"y","setdiff1d");de(t.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${t.dtype}) and y (${r.dtype}).`),de(t.rank===1,()=>`x should be 1D tensor, but got x (${t.shape}).`),de(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const i=await t.data(),s=await r.data(),o=new Set(s);let a=0;for(let u=0;u<i.length;u++)o.has(i[u])||a++;const l=new Ao([a],t.dtype),c=new Ao([a],"int32");for(let u=0,d=0;u<i.length;u++)o.has(i[u])||(l.values[d]=i[u],c.values[d]=u,d++);return[l.toTensor(),c.toTensor()]}const wwe=Swe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _we(n){const t={x:fe(n,"x","sign")};return Be.runKernel(AE,t)}const jJ=Ie({sign_:_we});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cwe(n){const t={x:fe(n,"x","sin","float32")};return Be.runKernel(CE,t)}const XU=Ie({sin_:Cwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ewe(n){const t={x:fe(n,"x","sinh")};return Be.runKernel(EE,t)}const qU=Ie({sinh_:Ewe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Awe(n,e,t){const r=fe(n,"x","slice1d");return de(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Kn(r,[e],[t])}const r3=Ie({slice1d_:Awe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Twe(n,e,t){const r=fe(n,"x","slice2d");return de(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Kn(r,e,t)}const KU=Ie({slice2d_:Twe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mwe(n,e,t){const r=fe(n,"x","slice3d");return de(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Kn(r,e,t)}const i3=Ie({slice3d_:Mwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rwe(n,e,t){const r=fe(n,"x","slice4d");return de(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Kn(r,e,t)}const eC=Ie({slice4d_:Rwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nwe(n,e=-1){const t=fe(n,"logits","softmax","float32");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${t.rank} and dim was ${e}`);const r={logits:t},i={dim:e};return Be.runKernel(FD,r,i)}const s3=Ie({softmax_:Nwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iwe(n){de(n.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${n.dtype}.`);const e={input:n};return Be.runKernel($4,e)}const o3=Ie({fft_:Iwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dwe(n){de(n.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${n.dtype}.`);const e={input:n};return Be.runKernel(U4,e)}const tC=Ie({ifft_:Dwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kwe(n){const e=n.shape[n.shape.length-1],t=n.size/e;let r;if(e<=2){const i=Fe(n,[t,e]);r=tC(i)}else{const i=[t,2*(e-1)],s=Fe(Q_(n),[t,e]),o=Fe(XD(n),[t,e]),a=Zu(Kn(s,[0,1],[t,e-2]),1),l=ke(Zu(Kn(o,[0,1],[t,e-2]),1),$n(-1)),c=$s([s,a],1),u=$s([o,l],1),d=Fe(Rg(c,u),[i[0],i[1]]);r=tC(d)}if(r=Q_(r),n.rank===3&&n.shape[0]!==0){const i=r,s=n.shape[0];r=Fe(r,[s,r.shape[0]/s,r.shape[1]]),i.dispose()}return r}const YU=Ie({irfft_:kwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Owe(n,e,t=0){const i={x:fe(n,"x","split")},s={numOrSizeSplits:e,axis:t};return Be.runKernel(LD,i,s)}const wc=Ie({split_:Owe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bwe(n,e){de(n.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${n.dtype}`);let t=n.shape[n.shape.length-1];const r=n.size/t;let i;if(e!=null&&e<t){const g=n.shape.map(b=>0),v=n.shape.map(b=>b);v[n.shape.length-1]=e,i=Kn(n,g,v),t=e}else if(e!=null&&e>t){const g=n.shape.map(v=>v);g[n.shape.length-1]=e-t,i=$s([n,_o(g)],n.shape.length-1),t=e}else i=n;const s=qr(i),o=Fe(Rg(i,s),[r,t]),a=o3(o),l=Math.floor(t/2)+1,c=Q_(a),u=XD(a),d=wc(c,[l,t-l],c.shape.length-1),f=wc(u,[l,t-l],u.shape.length-1),p=i.shape.slice();return p[i.shape.length-1]=l,Fe(Rg(d[0],f[0]),p)}const a3=Ie({rfft_:Bwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $we(n,e){let t=fe(n,"a","squaredDifference"),r=fe(e,"b","squaredDifference");[t,r]=Ls(t,r),fr(t.shape,r.shape);const i={a:t,b:r},s={};return Be.runKernel(NE,i,s)}const JU=Ie({squaredDifference_:$we});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lwe(n,e){const t=fe(n,"x","squeeze","string_or_numeric");return Fe(t,Wg(t.shape,e).newShape)}const js=Ie({squeeze_:Lwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fwe(n,e=0){const t=GR(n,"tensors","stack","string_or_numeric");de(t.length>=1,()=>"Pass at least one tensor to tf.stack"),t.length>0&&de(e<=t[0].rank,()=>"Axis must be <= rank of the tensor");const r=t,i={axis:e};return Be.runKernel(ED,r,i)}const Mc=Ie({stack_:Fwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pwe(n,e=0){const r={x:fe(n,"x","step")},i={alpha:e};return Be.runKernel(BE,r,i)}const j1=Ie({step_:Pwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uwe(n,e,t,r,i=0,s=0,o=0,a=0,l=0){const u={x:fe(n,"x","stridedSlice","string_or_numeric")},d={begin:e,end:t,strides:r,beginMask:i,endMask:s,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};return Be.runKernel(fU,u,d)}const XJ=Ie({stridedSlice_:Uwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zwe(n){const t={x:fe(n,"x","tan","float32")};return Be.runKernel(DE,t)}const qJ=Ie({tan_:zwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ho(n,e){U1(n);const t=Xg(n,e);if(t.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return qg(n,null,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ky(n,e,t){if(U1(n),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Xg(n,t);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return qg(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KJ(n,e,t){if(U1(n),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=Xg(n,t);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return qg(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hwe(n,e,t){if(U1(n),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=Xg(n,t);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return qg(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vwe(n,e,t){if(U1(n),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=Xg(n,t);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return qg(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gwe(n,e,t){if(U1(n),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=Xg(n,t);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,qg(n,e,r,t)}function YJ(n,e,t){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${t.shape}, indices.shape: ${e.shape}, shape: ${n}, sliceDim: ${r}, and batchDim: ${i}.`;if(t.rank<i)throw new Error(s+` update.rank < ${i}. `);if(n.length<r+(t.rank-i))throw new Error(s+` Output shape length < ${r+(t.rank-i)}`);if(t.rank!==i+n.length-r)throw new Error(s+` update.rank != ${i+n.length-r}`);for(let o=0;o<i;++o)if(t.shape[o]!==e.shape[o])throw new Error(s+` updates.shape[${o}] (${t.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<t.rank-i;++o)if(t.shape[o+i]!==n[o+r])throw new Error(s+` updates.shape[${o+i}] (${t.shape[o+i]}) != shape[${o+i}] (${n[o+i]})`)}function ZU(n,e,t){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(n.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${n.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(t.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${t}`);if(t.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(n.size===0)throw new Error(`Updates specified for empty output. updates shape: ${n.shape}`)}YJ(t,e,n)}function $v(n,e,t){const r=e.shape.length,i=r>1?e.shape[r-1]:1,s=t.length;let o=1;for(let d=i;d<s;++d)o*=t[d];const a=i<1?1:i,l=xt(e.shape)/a,c=[...kn(t.slice(0,i)),1],u=xt(t);return{sliceRank:i,numUpdates:l,sliceSize:o,strides:c,outputSize:u}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wwe(n,e,t){const r=fe(n,"tensor","tensorScatterupdate"),i=fe(e,"indices","tensorScatterupdate","int32"),s=fe(t,"updates","tensorScatterupdate");if(ZU(s,i,r.shape),r.dtype!==s.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${s.dtype}.`);const o={tensor:r,indices:i,updates:s},a={};return Be.runKernel(sU,o,a)}const jwe=Ie({tensorScatterUpdate_:Wwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xwe(n,e=1,t=!0){const r=fe(n,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${e}`);const s={x:r},o={k:e,sorted:t},[a,l]=Be.runKernel(yU,s,o);return{values:a,indices:l}}const JJ=Ie({topk_:Xwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qwe(n,e=0,t=1,r,i){if(lu(n),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const s=new UU(e,t,r,!0,i),o=Ar(n,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}const QU=Ie({truncatedNormal_:qwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kwe(n,e=0){const t=fe(n,"x","unique","string_or_numeric");de(t.rank>0,()=>"The input tensor must be at least 1D");const r={x:t},i={axis:e},[s,o]=Be.runKernel(bU,r,i);return{values:s,indices:o}}const ZJ=Ie({unique_:Kwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ywe(n,e,t){const r=fe(n,"x","unsortedSegmentSum"),i=fe(e,"segmentIds","unsortedSegmentSum","int32");de(m1(t),()=>"numSegments must be of dtype int");const s={x:r,segmentIds:i},o={numSegments:t};return Be.runKernel(zD,s,o)}const ez=Ie({unsortedSegmentSum_:Ywe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jwe(n,e=0){const t=fe(n,"x","unstack","string_or_numeric");de(e>=-t.shape.length&&e<t.shape.length,()=>`Axis = ${e} is not in [-${t.shape.length}, ${t.shape.length})`);const r={value:t},i={axis:e};return Be.runKernel(UD,r,i)}const Qu=Ie({unstack_:Jwe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zwe(n,e){return FU(n,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QJ(n,e=!0,t,r){return Be.makeVariable(n,e,t,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tz(n,e){const t=[];for(let s=0;s<e.length;s++)e[s]&&t.push(s);const r=Ar(n,"int32"),i=Ar([t.length,n.length],"int32");for(let s=0;s<t.length;s++){const o=r.indexToLoc(t[s]),a=s*n.length;i.values.set(o,a)}return i.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Qwe(n){const e=fe(n,"condition","whereAsync","bool"),t=await e.data(),r=tz(e.shape,t);return n!==e&&e.dispose(),r}const eZ=Qwe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function e_e(n,e,t){const r=fe(n,"tensor","boolMask"),i=fe(e,"mask","boolMask","bool"),s=t??0,o=i.rank,a=r.shape;de(o>0,()=>"mask cannot be scalar"),Dc(a.slice(s,s+o),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let v=s;v<s+o;v++)l*=a[v];const c=a.slice(0,s).concat([l],a.slice(s+o)),u=Fe(r,c),d=Fe(i,[-1]),f=await eZ(d),p=js(f,[1]),g=VE(u,p,s);return n!==r&&r.dispose(),e!==i&&i.dispose(),p.dispose(),u.dispose(),d.dispose(),f.dispose(),g}const t_e=e_e;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n_e(n,e,t){const r=fe(n,"x","transpose");if(e==null&&(e=r.shape.map((o,a)=>a).reverse()),de(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{de(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const i={x:r},s={perm:e};return r.dtype==="complex64"?Ye(()=>{let o=Q_(r),a=XD(r);return o=Be.runKernel(Ux,{x:o},s),a=Be.runKernel(Ux,{x:a},s),t&&(a=ss(a)),Rg(o,a)}):Be.runKernel(Ux,i,s)}const Xr=Ie({transpose_:n_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r_e(n,e,t,r,i=!0){const s=fe(n,"v","movingAverage"),o=fe(e,"x","movingAverage"),a=fe(t,"decay","movingAverage");Gve(s,o),de(Vr(s.shape,o.shape),()=>"Shape mismatch in v and x");const l=$n(1),c=vn(l,a);let u=ke(vn(o,s),c);if(i){de(r!=null,()=>"When using zeroDebias: true, step is required.");const d=fe(r,"step","movingAverage");u=mn(u,vn(l,Gp(a,d)))}return $t(s,u)}const i_e=Ie({movingAverage_:r_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s_e(n,e,t){lu(t);const r=fe(n,"indices","scatterND","int32"),i=fe(e,"updates","scatterND");ZU(i,r,t);const s={indices:r,updates:i},o={shape:t};return Be.runKernel(iU,s,o)}const o_e=Ie({scatterND_:s_e});function a_e(n,e,t,r){if(n.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${n.dtype}.`);if(n.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${n.shape}.`);const i=n.rank>0?n.shape[0]:1,s=n.rank>1?n.shape[1]:1;if(t.length!==s)throw new Error(`outputShape has incorrect number of elements:, ${t.length}, should be: ${s}.`);const o=e.size;if(!(e.rank===0||e.rank===1&&o===i))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${i}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l_e(n,e,t,r=0){lu(t);const i=fe(n,"sparseIndices","sparseToDense","int32"),s=fe(e,"sparseValues","sparseToDense","string_or_numeric"),o=fe(r,"defaultValue","sparseToDense",s.dtype);a_e(i,s,t,o);const a={sparseIndices:i,sparseValues:s,defaultValue:o},l={outputShape:t};return Be.runKernel(dU,a,l)}const c_e=Ie({sparseToDense_:l_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u_e(n,e){const t=fe(e,"indices","gatherND","int32"),i={params:fe(n,"x","gatherND","string_or_numeric"),indices:t};return Be.runKernel(P4,i)}const d_e=Ie({gatherND_:u_e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h_e(n,e){if(e==null)return n.shape.slice();if(Vr(n.shape,e))return e;if(n.shape.length===e.length){const t=[];for(let r=0;r<n.shape.length;r++)e[r]==null&&n.shape[r]!=null?t.push(n.shape[r]):t.push(e[r]);return t}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f_e(n,e,t,r){const i=fe(n,"x","dropout");if(de(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),de(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return n instanceof qi?i.clone():i;const s=h_e(i,t),o=1-e,a=mn(HE($t(Bv(s,0,1,"float32",r),o)),o);return ke(i,a)}const tZ=Ie({dropout_:f_e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nZ(n){return Math.floor(Math.pow(2,Math.ceil(Math.log(n)/Math.log(2))))}function nz(n,e,t){const r=1-n%2,i=new Float32Array(n);for(let s=0;s<n;++s){const o=2*Math.PI*s/(n+r-1);i[s]=e-t*Math.cos(o)}return ho(i,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function p_e(n,e,t=1){const r=fe(n,"predictions","inTopK"),i=fe(e,"targets","inTopK");de(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),de(r.rank-1===i.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${i.rank}`),Dc(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const s=r.shape[r.shape.length-1];de(t>0&&t<=s,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${s}), but got ${t}`);const o=await r.data(),a=await i.data(),[l,c]=[o.length/s,s],u=la("bool",l);for(let d=0;d<l;d++){const f=d*c,p=o.subarray(f,f+c),g=[];for(let v=0;v<p.length;v++)g.push({value:p[v],index:v});g.sort((v,b)=>b.value-v.value),u[d]=0;for(let v=0;v<t;v++)if(g[v].index===a[d]){u[d]=1;break}}return n!==r&&r.dispose(),e!==i&&i.dispose(),Zd(u,i.shape,"bool")}const m_e=p_e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g_e(n,e,t,r,i,s="NHWC",o){let a=n;n.rank===3&&(a=Fe(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let l=e;l.rank===3&&(l=Fe(e,[1,e.shape[0],e.shape[1],e.shape[2]])),de(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),de(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),de(t.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${t}.`);const c=s==="NHWC"?a.shape[3]:a.shape[1],u=s==="NHWC"?l.shape[3]:l.shape[1];de(c===t[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${t[2]}.`),de(u===t[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${t[3]}).`),al("conv2dDerFilter",i,o);const d={x:a,dy:l},f={strides:r,pad:i,dataFormat:s,dimRoundingMode:o,filterShape:t};return Be.runKernel(C4,d,f)}const rz=Ie({conv2DBackpropFilter_:g_e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l3(n,e,t){if(t==null||t==="linear")return n;if(t==="relu")return ke(n,j1(e));throw new Error(`Cannot compute gradient for fused activation ${t}.`)}function c3(n,e){let t=e;const r=Ro(n.shape,e.shape);return r.length>0&&(t=wn(t,r)),Fe(t,n.shape)}function u3(n,e,t,r){if(e==="linear")return n;if(e==="relu")return $f(n);if(e==="elu")return UE(n);if(e==="relu6")return HU(n);if(e==="prelu")return t3(n,t);if(e==="leakyrelu")return qD(n,r);if(e==="sigmoid")return Qd(n);throw new Error(`Unknown fused activation ${e}.`)}const d3=(n,e)=>!(n>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y_e({x:n,filter:e,strides:t,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",d3(Be.state.gradientDepth,l)===!1){de(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let R=Dg(n,e,t,r,i,s,o);return a!=null&&(R=$t(R,a)),u3(R,l,c,u)}const d=fe(n,"x","conv2d","float32"),f=fe(e,"filter","conv2d","float32");let p=d,g=!1;d.rank===3&&(g=!0,p=Fe(d,[1,d.shape[0],d.shape[1],d.shape[2]])),de(p.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${p.rank}.`),de(f.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),al("fused conv2d",r,o);const v=i==="NHWC"?p.shape[3]:p.shape[1];de(f.shape[2]===v,()=>`Error in conv2d: depth of input (${v}) must match input depth for filter ${f.shape[2]}.`),de(ua(t,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${t} and dilations '${s}'`);const b=jo(p.shape,f.shape,t,s,r,o);let x;a!=null&&(x=fe(a,"bias","fused conv2d"),[x]=Ls(x,d),i==="NHWC"?fr(b.outShape,x.shape):(de(x.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${x.shape.length}.`),de(x.shape.length===0||x.shape[0]===b.outChannels||x.shape[0]===1,()=>`Error in fused conv2d: bias shape (${x.shape}) is not compatible with the number of output channels (${b.outChannels})`)));let _;if(c!=null){const R=c.shape;if(de(R.length<=1||R.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${R.length}.`),R.length===1)de(R[0]===1||R[0]===b.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${R}) is not compatible with the number of output channels (${b.outChannels}).`);else if(R.length===3)try{fr(R,b.outShape)}catch{const B=`Error in fused conv2d: PReLU activation weights (${R}) is not compatible with the output shape of the conv2d (${b.outShape}).`;throw Error(B)}_=fe(c,"prelu weights","fused conv2d")}const E=(R,L)=>{de(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);const[B,N,I,D]=L,P=l3(R,I,l);de(Ig(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const G=RU(N.shape,P,B,t,r),W=rz(N,P,B.shape,t,r),q=[G,W];if(D!=null){const z=c3(D,P);q.push(z)}return q},C={x:p,filter:f,bias:x,preluActivationWeights:_},M={strides:t,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o,activation:l,leakyreluAlpha:u};return a==null?Wp((L,B,N)=>{let I=Be.runKernel(UR,C,M);return N([B,L,I]),g&&(I=Fe(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:E}})(p,f):Wp((L,B,N,I)=>{let D=Be.runKernel(UR,C,M);return I([B,L,D,N]),g&&(D=Fe(D,[D.shape[1],D.shape[2],D.shape[3]])),{value:D,gradFunc:E}})(p,f,x)}const rZ=Ie({fusedConv2d_:y_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v_e(n,e,t,r,i,s=[1,1],o){let a=n;n.rank===3&&(a=Fe(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let l=e;l.rank===3&&(l=Fe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:a,dy:l},u={strides:r,pad:i,dimRoundingMode:o,dilations:s,filterShape:t};return Be.runKernel(I4,c,u)}const iZ=Ie({depthwiseConv2dNativeBackpropFilter_:v_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b_e(n,e,t,r,i,s=[1,1],o){let a=e,l=!1;e.rank===3&&(l=!0,a=Fe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:a,filter:t},u={strides:r,pad:i,dimRoundingMode:o,dilations:s,inputShape:n},d=Be.runKernel(D4,c,u);return l?Fe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const sZ=Ie({depthwiseConv2dNativeBackpropInput_:b_e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x_e({x:n,filter:e,strides:t,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(d3(Be.state.gradientDepth,l)===!1){let M=PE(n,e,t,r,i,s,o);return a!=null&&(M=$t(M,a)),u3(M,l,c,u)}const d=fe(n,"x","depthwiseConv2d","float32"),f=fe(e,"filter","depthwiseConv2d","float32");let p=d,g=!1;d.rank===3&&(g=!0,p=Fe(d,[1,d.shape[0],d.shape[1],d.shape[2]])),de(p.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${p.rank}.`),de(f.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${f.rank}.`),de(p.shape[3]===f.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${p.shape[3]}) must match the inChannels dimension in filter ${f.shape[2]}.`),s==null&&(s=[1,1]),de(ua(t,s),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${t} and dilations '${s}'`),al("fused depthwiseConv2d",r,o);const v=jo(p.shape,f.shape,t,s,r,o,!0);let b;a!=null&&(b=fe(a,"bias","fused conv2d"),[b]=Ls(b,d),fr(v.outShape,b.shape));let x;c!=null&&(x=fe(c,"prelu weights","fused depthwiseConv2d"));const _=(M,R)=>{de(Ig(s),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);const[L,B,N,I]=R,D=l3(M,N,l),P=sZ(B.shape,D,L,t,r,s,o),G=iZ(B,D,L.shape,t,r,s,o);if(I!=null){const W=c3(b,D);return[P,G,W]}return[P,G]},E={x:p,filter:f,bias:b,preluActivationWeights:x},C={strides:t,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o,activation:l,leakyreluAlpha:u};return a==null?Wp((R,L,B)=>{let N=Be.runKernel(zR,E,C);return B([L,R,N]),g&&(N=Fe(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:_}})(p,f):Wp((R,L,B,N)=>{let I=Be.runKernel(zR,E,C);return N([L,R,I,B]),g&&(I=Fe(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:_}})(p,f,b)}const S_e=Ie({fusedDepthwiseConv2d_:x_e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w_e({a:n,b:e,transposeA:t=!1,transposeB:r=!1,bias:i,activation:s="linear",preluActivationWeights:o,leakyreluAlpha:a=.2}){if(d3(Be.state.gradientDepth,s)===!1){let D=Br(n,e,t,r);return i!=null&&(D=$t(D,i)),u3(D,s,o,a)}let l=fe(n,"a","fused matMul"),c=fe(e,"b","fused matMul");[l,c]=Ls(l,c);const u=t?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?c.shape[c.rank-1]:c.shape[c.rank-2],f=t?l.shape[l.rank-1]:l.shape[l.rank-2],p=r?c.shape[c.rank-2]:c.shape[c.rank-1],g=l.shape.slice(0,-2),v=c.shape.slice(0,-2),b=xt(g),x=xt(v);de(u===d,()=>`Error in fused matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${t} and transposeB=${r} must match.`);const E=fr(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([f,p]),C=t?Fe(l,[b,u,f]):Fe(l,[b,f,u]),M=r?Fe(c,[x,p,d]):Fe(c,[x,d,p]);let R;i!=null&&(R=fe(i,"bias","fused matMul"),[R]=Ls(R,l),fr(E,R.shape));let L;o!=null&&(L=fe(o,"prelu weights","fused matMul"));const B=(D,P)=>{const[G,W,q,z]=P,J=l3(Fe(D,q.shape),q,s);let Q,Y;if(!t&&!r?(Q=Br(J,W,!1,!0),Y=Br(G,J,!0,!1)):!t&&r?(Q=Br(J,W,!1,!1),Y=Br(J,G,!0,!1)):t&&!r?(Q=Br(W,J,!1,!0),Y=Br(G,J,!1,!1)):(Q=Br(W,J,!0,!0),Y=Br(J,G,!0,!0)),i!=null){const X=c3(z,J);return[Q,Y,X]}else return[Q,Y]},N={a:C,b:M,bias:R,preluActivationWeights:L},I={transposeA:t,transposeB:r,activation:s,leakyreluAlpha:a};return i==null?Wp((P,G,W)=>{const q=Be.runKernel(PR,N,I);return W([P,G,q]),{value:Fe(q,E),gradFunc:B}})(C,M):Wp((P,G,W,q)=>{const z=Be.runKernel(PR,N,I);return q([P,G,z,W]),{value:Fe(z,E),gradFunc:B}})(C,M,R)}const NL=Ie({fusedMatMul_:w_e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const __e=Object.freeze(Object.defineProperty({__proto__:null,conv2d:rZ,depthwiseConv2d:S_e,matMul:NL},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C_e(n){return nz(n,.54,.46)}const E_e=Ie({hammingWindow_:C_e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A_e(n){return nz(n,.5,.5)}const oZ=Ie({hannWindow_:A_e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T_e(n,e,t,r=!1,i=0){let s=0;const o=[];for(;s+e<=n.size;)o.push(Kn(n,s,e)),s+=t;if(r)for(;s<n.size;){const a=s+e-n.size,l=$s([Kn(n,s,e-a),G1([a],i)]);o.push(l),s+=t}return o.length===0?Ky([],[0,e]):Fe($s(o),[o.length,e])}const aZ=Ie({frame_:T_e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M_e(n,e,t,r,i=oZ){r==null&&(r=nZ(e));const s=aZ(n,e,t),o=ke(s,i(e));return a3(o,r)}const R_e=Ie({stft_:M_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N_e(n,e,t,r,i="bilinear",s=0){const o=fe(n,"image","cropAndResize"),a=fe(e,"boxes","cropAndResize","float32"),l=fe(t,"boxInd","cropAndResize","int32"),c=a.shape[0];de(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),de(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),de(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),de(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),de(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),de(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);const u={image:o,boxes:a,boxInd:l},d={method:i,extrapolationValue:s,cropSize:r};return Be.runKernel(M4,u,d)}const I_e=Ie({cropAndResize_:N_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D_e(n){const e=fe(n,"image","flipLeftRight","float32");de(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const t={image:e};return Be.runKernel(F4,t,{})}const k_e=Ie({flipLeftRight_:D_e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O_e(n){const e=fe(n,"image","grayscaleToRGB"),t=e.rank-1,r=e.shape[t];de(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),de(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const i=new Array(e.rank);return i.fill(1,0,t),i[t]=3,Vu(e,i)}const B_e=Ie({grayscaleToRGB_:O_e});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $_e(n){const e=fe(n,"image","RGBToGrayscale"),t=e.rank-1,r=e.shape[t];de(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),de(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const i=e.dtype,s=nn(e,"float32"),o=ho([.2989,.587,.114]);let a;switch(e.rank){case 2:a=Ix("ij,j->i",s,o);break;case 3:a=Ix("ijk,k->ij",s,o);break;case 4:a=Ix("ijkl,l->ijk",s,o);break;case 5:a=Ix("ijklm,m->ijkl",s,o);break;case 6:a=Ix("ijklmn,n->ijklm",s,o);break;default:throw new Error("Not a valid tensor rank.")}return a=na(a,-1),nn(a,i)}const L_e=Ie({rgbToGrayscale_:$_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F_e(n,e,t=0,r=.5){const i=fe(n,"image","rotateWithOffset","float32");de(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const s={image:i},o={radians:e,fillValue:t,center:r};return Be.runKernel(xU,s,o)}const P_e=Ie({rotateWithOffset_:F_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X1(n,e,t,r,i,s){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),s==null&&(s=0);const o=n.shape[0];return t=Math.min(t,o),de(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),de(n.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${n.rank}'`),de(n.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${n.shape[1]}`),de(e.rank===1,()=>"scores must be a 1D tensor"),de(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),de(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:t,iouThreshold:r,scoreThreshold:i,softNmsSigma:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U_e(n,e,t,r=.5,i=Number.NEGATIVE_INFINITY){const s=fe(n,"boxes","nonMaxSuppression","float32"),o=fe(e,"scores","nonMaxSuppression","float32"),a=X1(s,o,t,r,i);t=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold;const l={maxOutputSize:t,iouThreshold:r,scoreThreshold:i};return Be.runKernel(q4,{boxes:s,scores:o},l)}const z_e=Ie({nonMaxSuppression_:U_e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H_e(n,e,t){const r=V_e(n,e,t),i=r<0?-(r+1):r;n.splice(i,0,e)}function V_e(n,e,t){return W_e(n,e,t||G_e)}function G_e(n,e){return n>e?1:n<e?-1:0}function W_e(n,e,t){let r=0,i=n.length,s=0,o=!1;for(;r<i;){s=r+(i-r>>>1);const a=t(e,n[s]);a>0?r=s+1:(i=s,o=!a)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iz(n,e,t,r,i){return az(n,e,t,r,i,0)}function sz(n,e,t,r,i,s){return az(n,e,t,r,i,0,!1,s,!0)}function oz(n,e,t,r,i,s){return az(n,e,t,r,i,s,!0)}function az(n,e,t,r,i,s,o=!1,a=!1,l=!1){const c=[];for(let b=0;b<e.length;b++)e[b]>i&&c.push({score:e[b],boxIndex:b,suppressBeginIndex:0});c.sort(H8);const u=s>0?-.5/s:0,d=[],f=[];for(;d.length<t&&c.length>0;){const b=c.pop(),{score:x,boxIndex:_,suppressBeginIndex:E}=b;if(x<i)break;let C=!1;for(let M=d.length-1;M>=E;--M){const R=j_e(n,_,d[M]);if(R>=r){C=!0;break}if(b.score=b.score*X_e(r,u,R),b.score<=i)break}b.suppressBeginIndex=d.length,C||(b.score===x?(d.push(_),f.push(b.score)):b.score>i&&H_e(c,b,H8))}const p=d.length,g=t-p;a&&g>0&&(d.push(...new Array(g).fill(0)),f.push(...new Array(g).fill(0)));const v={selectedIndices:d};return o&&(v.selectedScores=f),l&&(v.validOutputs=p),v}function j_e(n,e,t){const r=n.subarray(e*4,e*4+4),i=n.subarray(t*4,t*4+4),s=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),u=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),f=Math.max(i[1],i[3]),p=(a-s)*(l-o),g=(d-c)*(f-u);if(p<=0||g<=0)return 0;const v=Math.max(s,c),b=Math.max(o,u),x=Math.min(a,d),_=Math.min(l,f),E=Math.max(x-v,0)*Math.max(_-b,0);return E/(p+g-E)}function X_e(n,e,t){const r=Math.exp(e*t*t);return t<=n?r:0}function H8(n,e){return n.score-e.score||n.score===e.score&&e.boxIndex-n.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function q_e(n,e,t,r=.5,i=Number.NEGATIVE_INFINITY){const s=fe(n,"boxes","nonMaxSuppressionAsync"),o=fe(e,"scores","nonMaxSuppressionAsync"),a=X1(s,o,t,r,i);t=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold;const l=await Promise.all([s.data(),o.data()]),c=l[0],u=l[1],{selectedIndices:d}=iz(c,u,t,r,i);return s!==n&&s.dispose(),o!==e&&o.dispose(),ho(d,"int32")}const K_e=q_e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y_e(n,e,t,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const o=fe(n,"boxes","nonMaxSuppression"),a=fe(e,"scores","nonMaxSuppression"),l=X1(o,a,t,r,i,s);t=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const c={boxes:o,scores:a},u={maxOutputSize:t,iouThreshold:r,scoreThreshold:i,softNmsSigma:s},d=Be.runKernel(Y4,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}const J_e=Ie({nonMaxSuppressionWithScore_:Y_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Z_e(n,e,t,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const o=fe(n,"boxes","nonMaxSuppressionAsync"),a=fe(e,"scores","nonMaxSuppressionAsync"),l=X1(o,a,t,r,i,s);t=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const c=await Promise.all([o.data(),a.data()]),u=c[0],d=c[1],{selectedIndices:f,selectedScores:p}=oz(u,d,t,r,i,s);return o!==n&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:ho(f,"int32"),selectedScores:ho(p)}}const Q_e=Z_e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eCe(n,e,t,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const o=fe(n,"boxes","nonMaxSuppression"),a=fe(e,"scores","nonMaxSuppression"),l=X1(o,a,t,r,i,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,f={boxes:o,scores:a},p={maxOutputSize:c,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:s},g=Be.runKernel(K4,f,p);return{selectedIndices:g[0],validOutputs:g[1]}}const tCe=Ie({nonMaxSuppressionPadded_:eCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function nCe(n,e,t,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const o=fe(n,"boxes","nonMaxSuppressionAsync"),a=fe(e,"scores","nonMaxSuppressionAsync"),l=X1(o,a,t,r,i,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,[f,p]=await Promise.all([o.data(),a.data()]),{selectedIndices:g,validOutputs:v}=sz(f,p,c,u,d,s);return o!==n&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:ho(g,"int32"),validOutputs:$n(v,"int32")}}const rCe=nCe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iCe(n,e,t=!1,r=!1){const i=fe(n,"images","resizeBilinear");de(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),de(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),de(r===!1||t===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=i,o=!1;i.rank===3&&(o=!0,s=Fe(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const a={images:s},l={alignCorners:t,halfPixelCenters:r,size:e},c=Be.runKernel(ID,a,l);return o?Fe(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const lZ=Ie({resizeBilinear_:iCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sCe(n,e,t=!1,r=!1){const i=fe(n,"images","resizeNearestNeighbor");de(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),de(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),de(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),de(r===!1||t===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=i,o=!1;i.rank===3&&(o=!0,s=Fe(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const a={images:s},l={alignCorners:t,halfPixelCenters:r,size:e},c=Be.runKernel(ND,a,l);return o?Fe(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const cZ=Ie({resizeNearestNeighbor_:sCe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oCe(n,e="binary",t=!1,r=.5){const i=fe(n,"image","threshold"),s=.2989,o=.587,a=.114,l=i.shape[0]*i.shape[1];let c=ke(ho([r]),255),u,d,f,p;if(de(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),de(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),de(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),de(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),i.shape[2]===3){[u,d,f]=wc(i,[1,1,1],-1);const b=ke(u,s),x=ke(d,o),_=ke(f,a);p=$t($t(b,x),_)}else p=n;if(e==="otsu"){const b=yJ(nn(VU(p),"int32"),Zd([]),256);c=aCe(b,l)}const g=t?Ov(p,c):kc(p,c);return nn(ke(g,255),"int32")}function aCe(n,e){let t=ho([-1]),r=ho([0]),i=ho([0]),s,o,a,l,c,u;for(let d=0;d<n.size-1;d++){s=Kn(n,0,d+1),o=Kn(n,d+1),c=mn(wn(s),e),u=mn(wn(o),e);const f=wn(ke(s,b1(0,s.size)));a=mn(f,wn(s));const p=G1(o.shape,s.size),g=$t(b1(0,o.size),p),v=ke(o,g);l=mn(wn(v),wn(o));const b=vn(a,l),x=vn(a,l),_=ke(c,u);i=ke(ke(_,b),x);const E=kc(i,r);r=Ia(E,i,r),t=Ia(E,ho([d]),t)}return t}const lCe=Ie({threshold_:oCe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cCe(n,e,t="nearest",r="constant",i=0,s){const o=fe(n,"image","transform","float32"),a=fe(e,"transforms","transform","float32");de(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),de(a.rank===2&&(a.shape[0]===o.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),de(s==null||s.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`);const l={image:o,transforms:a},c={interpolation:t,fillMode:r,fillValue:i,outputShape:s};return Be.runKernel(vU,l,c)}const uCe=Ie({transform_:cCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dCe(n,e,t){const r=fe(n,"a","bandPart");de(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[s,o]=r.shape.slice(-2);let a,l;typeof e=="number"?(de(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),de(e<=s,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${s}).`),a=fe(e<0?s:e,"numLower","bandPart")):(de(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=Ia(Z_(e,0),s,gv(e,s))),typeof t=="number"?(de(t%1===0,()=>`bandPart(): numUpper must be an integer, got ${t}.`),de(t<=o,()=>`bandPart(): numUpper (${t}) must not be greater than the number of columns (${o}).`),l=fe(t<0?o:t,"numUpper","bandPart")):(de(t.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=Ia(Z_(t,0),o,gv(t,o)));const c=Fe(b1(0,s,1,"int32"),[-1,1]),u=b1(0,o,1,"int32"),d=vn(c,u),f=Af(Ov(d,a),Jg(d,ss(l))),p=_o([s,o],r.dtype);return Fe(Mc(Qu(Fe(r,[-1,s,o])).map(g=>Ia(f,g,p))),i)}const hCe=Ie({bandPart_:dCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fCe(n){let e;if(Array.isArray(n)){e=!1,de(n!=null&&n.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const i=n[0].shape[0];for(let s=1;s<n.length;++s)de(n[s].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${n[s].shape[0]} vs. ${i})`)}else e=!0,n=wc(n,n.shape[0],0).map(i=>js(i,[0]));de(n.length<=n[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${n.length}) exceeds number of dimensions (${n[0].shape[0]}).`);const t=[],r=n;for(let i=0;i<n.length;++i)t.push(Be.tidy(()=>{let s=r[i];if(i>0)for(let o=0;o<i;++o){const a=ke(wn(ke(t[o],s)),t[o]);s=vn(s,a)}return mn(s,zE(s,"euclidean"))}));return e?Mc(t,0):t}const pCe=Ie({gramSchmidt_:fCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mCe(n,e=!1){if(de(n.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${n.rank}`),n.rank===2)return V8(n,e);{const t=n.shape.slice(0,n.shape.length-2).reduce((l,c)=>l*c),r=Qu(Fe(n,[t,n.shape[n.shape.length-2],n.shape[n.shape.length-1]]),0),i=[],s=[];r.forEach(l=>{const[c,u]=V8(l,e);i.push(c),s.push(u)});const o=Fe(Mc(i,0),n.shape),a=Fe(Mc(s,0),n.shape);return[o,a]}}function V8(n,e=!1){return Be.tidy(()=>{de(n.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${n.shape.length}D Tensor.`);const t=n.shape[0],r=n.shape[1];let i=BU(t),s=$p(n);const o=Ky([[1]],[1,1]);let a=$p(o);const l=t>=r?r:t;for(let c=0;c<l;++c){const u=s,d=a,f=i;[a,s,i]=Be.tidy(()=>{const p=Kn(s,[c,c],[t-c,1]),g=zE(p),v=Kn(s,[c,c],[1,1]),b=Ia(kc(v,0),Ky([[-1]]),Ky([[1]])),x=vn(v,ke(b,g)),_=mn(p,x);_.shape[0]===1?a=$p(o):a=$s([o,Kn(_,[1,0],[_.shape[0]-1,_.shape[1]])],0);const E=ss(mn(Br(b,x),g)),C=Kn(s,[c,0],[t-c,r]),M=ke(E,a),R=Xr(a);if(c===0)s=vn(C,Br(M,Br(R,C)));else{const N=vn(C,Br(M,Br(R,C)));s=$s([Kn(s,[0,0],[c,r]),N],0)}const L=Xr(M),B=Kn(i,[0,c],[t,i.shape[1]-c]);if(c===0)i=vn(B,Br(Br(B,a),L));else{const N=vn(B,Br(Br(B,a),L));i=$s([Kn(i,[0,0],[t,c]),N],1)}return[a,s,i]}),rr([u,d,f])}return!e&&t>r&&(i=Kn(i,[0,0],[t,r]),s=Kn(s,[0,0],[r,r])),[i,s]})}const gCe=Ie({qr_:mCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Fl;(function(n){n[n.NONE=0]="NONE",n[n.MEAN=1]="MEAN",n[n.SUM=2]="SUM",n[n.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Fl||(Fl={}));function yCe(n,e,t=Fl.SUM_BY_NONZERO_WEIGHTS){const r=fe(n,"losses","computeWeightedLoss");let i=null;e!=null&&(i=fe(e,"weights","computeWeightedLoss"));const s=i==null?r:ke(r,i);if(t===Fl.NONE)return s;if(t===Fl.SUM)return wn(s);if(t===Fl.MEAN){if(i==null)return ks(s);{const o=r.size/i.size,a=mn(wn(s),wn(i));return o>1?mn(a,$n(o)):a}}if(t===Fl.SUM_BY_NONZERO_WEIGHTS){if(i==null)return mn(wn(s),$n(r.size));{const o=ke(i,xc(r.shape)),a=nn(wn(v1(o,$n(0))),"float32");return mn(wn(s),a)}}throw Error(`Unknown reduction: ${t}`)}const sm=Ie({computeWeightedLoss_:yCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vCe(n,e,t,r=Fl.SUM_BY_NONZERO_WEIGHTS){const i=fe(n,"labels","absoluteDifference"),s=fe(e,"predictions","absoluteDifference");let o=null;t!=null&&(o=fe(t,"weights","absoluteDifference")),Dc(i.shape,s.shape,"Error in absoluteDifference: ");const a=xo(vn(i,s));return sm(a,o,r)}const bCe=Ie({absoluteDifference_:vCe});function xCe(n,e,t,r,i=Fl.SUM_BY_NONZERO_WEIGHTS){const s=fe(n,"labels","cosineDistance"),o=fe(e,"predictions","cosineDistance");let a=null;r!=null&&(a=fe(r,"weights","cosineDistance")),Dc(s.shape,o.shape,"Error in cosineDistance: ");const l=$n(1),c=vn(l,wn(ke(s,o),t,!0));return sm(c,a,i)}const SCe=Ie({cosineDistance_:xCe});function wCe(n,e,t,r=Fl.SUM_BY_NONZERO_WEIGHTS){let i=fe(n,"labels","hingeLoss");const s=fe(e,"predictions","hingeLoss");let o=null;t!=null&&(o=fe(t,"weights","hingeLoss")),Dc(i.shape,s.shape,"Error in hingeLoss: ");const a=$n(1);i=vn(ke($n(2),i),a);const l=$f(vn(a,ke(i,s)));return sm(l,o,r)}const _Ce=Ie({hingeLoss_:wCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CCe(n,e,t,r=1,i=Fl.SUM_BY_NONZERO_WEIGHTS){const s=fe(n,"labels","huberLoss"),o=fe(e,"predictions","huberLoss");let a=null;t!=null&&(a=fe(t,"weights","huberLoss")),Dc(s.shape,o.shape,"Error in huberLoss: ");const l=$n(r),c=xo(vn(o,s)),u=gv(c,l),d=vn(c,u),f=$t(ke($n(.5),Ki(u)),ke(l,d));return sm(f,a,i)}const ECe=Ie({huberLoss_:CCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ACe(n,e,t,r=1e-7,i=Fl.SUM_BY_NONZERO_WEIGHTS){const s=fe(n,"labels","logLoss"),o=fe(e,"predictions","logLoss");let a=null;t!=null&&(a=fe(t,"weights","logLoss")),Dc(s.shape,o.shape,"Error in logLoss: ");const l=$n(1),c=$n(r),u=ss(ke(s,ou($t(o,c)))),d=ke(vn(l,s),ou($t(vn(l,o),c))),f=vn(u,d);return sm(f,a,i)}const TCe=Ie({logLoss_:ACe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MCe(n,e,t,r=Fl.SUM_BY_NONZERO_WEIGHTS){const i=fe(n,"labels","meanSquaredError"),s=fe(e,"predictions","meanSquaredError");let o=null;t!=null&&(o=fe(t,"weights","meanSquaredError")),Dc(i.shape,s.shape,"Error in meanSquaredError: ");const a=JU(i,s);return sm(a,o,r)}const RCe=Ie({meanSquaredError_:MCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NCe(n,e){const t=fe(n,"labels","sigmoidCrossEntropyWithLogits"),r=fe(e,"logits","sigmoidCrossEntropyWithLogits");Dc(t.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const i=$f(r),s=ke(r,t),o=KD(il(ss(xo(r))));return $t(vn(i,s),o)}function ICe(n,e,t,r=0,i=Fl.SUM_BY_NONZERO_WEIGHTS){let s=fe(n,"multiClassLabels","sigmoidCrossEntropy");const o=fe(e,"logits","sigmoidCrossEntropy");let a=null;if(t!=null&&(a=fe(t,"weights","sigmoidCrossEntropy")),Dc(s.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const c=$n(r),u=$n(1),d=$n(.5);s=$t(ke(s,vn(u,c)),ke(d,c))}const l=NCe(s,o);return sm(l,a,i)}const DCe=Ie({sigmoidCrossEntropy_:ICe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kCe(n,e,t=-1){if(t===-1&&(t=e.rank-1),t!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${t}`);return Wp((i,s,o)=>{const l=YD(s,[t],!0),c=vn(nn(s,"float32"),l);o([i,c]);const u=ss(ke(c,i));return{value:wn(u,[t]),gradFunc:(p,g)=>{const[v,b]=g,x=Ks(p.shape,[t]);return[ke(Fe(p,x),vn(nn(v,"float32"),il(b))),ke(Fe(p,x),vn(il(b),nn(v,"float32")))]}}})(n,e)}function OCe(n,e,t,r=0,i=Fl.SUM_BY_NONZERO_WEIGHTS){let s=fe(n,"onehotLabels","softmaxCrossEntropy");const o=fe(e,"logits","softmaxCrossEntropy");let a=null;if(t!=null&&(a=fe(t,"weights","softmaxCrossEntropy")),Dc(s.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const c=$n(r),u=$n(1),d=$n(s.shape[1]);s=$t(ke(s,vn(u,c)),mn(c,d))}const l=kCe(s,o);return sm(l,a,i)}const BCe=Ie({softmaxCrossEntropy_:OCe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ce(n,e,t,r){const i=fe(n,"indices","sparseFillEmptyRows","int32"),s=fe(e,"values","sparseFillEmptyRows"),o=fe(t,"denseShape","sparseFillEmptyRows","int32"),a=fe(r,"defaultValue","sparseFillEmptyRows",s.dtype);if(i.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${i.shape}`);if(s.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${s.shape}`);if(o.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);const l={indices:i,values:s,denseShape:o,defaultValue:a},c=Be.runKernel(aU,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}const LCe=Ie({sparseFillEmptyRows_:$Ce});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FCe(n,e,t){const r=fe(n,"inputIndices","sparseReshape","int32"),i=fe(e,"inputShape","sparseReshape","int32"),s=fe(t,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(i.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${i.shape}`);if(s.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${s.shape}`);const o={inputIndices:r,inputShape:i,newShape:s},a=Be.runKernel(lU,o);return{outputIndices:a[0],outputShape:a[1]}}const PCe=Ie({sparseReshape_:FCe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UCe(n,e,t){const r=fe(n,"data","sparseSegmentMean"),i=fe(e,"indices","sparseSegmentMean","int32"),s=fe(t,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${i.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${s.shape}`);const o={data:r,indices:i,segmentIds:s};return Be.runKernel(cU,o)}const zCe=Ie({sparseSegmentMean_:UCe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HCe(n,e,t){const r=fe(n,"data","sparseSegmentSum"),i=fe(e,"indices","sparseSegmentSum","int32"),s=fe(t,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${i.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${s.shape}`);const o={data:r,indices:i,segmentIds:s};return Be.runKernel(uU,o)}const VCe=Ie({sparseSegmentSum_:HCe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GCe(n,e,t,r,i,s,o,a){const l=fe(n,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const c=fe(e,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const u={separator:t,nGramWidths:r,leftPad:i,rightPad:s,padWidth:o,preserveShortSequences:a},d={data:l,dataSplits:c},f=Be.runKernel(pU,d,u);return{nGrams:f[0],nGramsSplits:f[1]}}const WCe=Ie({stringNGrams_:GCe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jCe(n,e,t=!0){const r=fe(n,"input","stringSplit","string"),i=fe(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(i.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${i.shape}`);const s={skipEmpty:t},o={input:r,delimiter:i},a=Be.runKernel(mU,o,s);return{indices:a[0],values:a[1],shape:a[2]}}const XCe=Ie({stringSplit_:jCe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qCe(n,e){const t=fe(n,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const i={input:t};return Be.runKernel(gU,i,r)}const KCe=Ie({stringToHashBucketFast_:qCe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YCe(n,e,t,r=!0){const i=fe(n,"input","staticRegexReplace","string"),s={pattern:e,rewrite:t,replaceGlobal:r};return Be.runKernel(PD,{x:i},s)}const JCe=Ie({staticRegexReplace_:YCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZCe={fft:o3,ifft:tC,rfft:a3,irfft:YU},QCe={hammingWindow:E_e,hannWindow:oZ,frame:aZ,stft:R_e},nu={flipLeftRight:k_e,grayscaleToRGB:B_e,resizeNearestNeighbor:cZ,resizeBilinear:lZ,rgbToGrayscale:L_e,rotateWithOffset:P_e,cropAndResize:I_e,nonMaxSuppression:z_e,nonMaxSuppressionAsync:K_e,nonMaxSuppressionWithScore:J_e,nonMaxSuppressionWithScoreAsync:Q_e,nonMaxSuppressionPadded:tCe,nonMaxSuppressionPaddedAsync:rCe,threshold:lCe,transform:uCe},uZ={bandPart:hCe,gramSchmidt:pCe,qr:gCe},eEe={absoluteDifference:bCe,computeWeightedLoss:sm,cosineDistance:SCe,hingeLoss:_Ce,huberLoss:ECe,logLoss:TCe,meanSquaredError:RCe,sigmoidCrossEntropy:DCe,softmaxCrossEntropy:BCe},tEe={sparseFillEmptyRows:LCe,sparseReshape:PCe,sparseSegmentMean:zCe,sparseSegmentSum:VCe},nEe={stringNGrams:WCe,stringSplit:XCe,stringToHashBucketFast:KCe,staticRegexReplace:JCe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rEe=new Map,iEe=new Map;class q1{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class Uu{constructor(){this.classNameMap={}}static getMap(){return Uu.instance==null&&(Uu.instance=new Uu),Uu.instance}static register(e){Uu.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Gt(n,e,t){de(n.className!=null,()=>"Class being registered does not have the static className property defined."),de(typeof n.className=="string",()=>"className is required to be a string, but got type "+typeof n.className),de(n.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof t>"u"&&(t=n.className);const r=t,i=e+">"+r;return Uu.register(n),rEe.set(i,n),iEe.set(n,i),n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qg extends q1{minimize(e,t=!1,r){const{value:i,grads:s}=this.computeGradients(e,r);if(r!=null){const o=r.map(a=>({name:a.name,tensor:s[a.name]}));this.applyGradients(o)}else this.applyGradients(s);return rr(s),t?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return M1e(e,t)}dispose(){this.iterations_!=null&&rr(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:$n(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Qg,Symbol.hasInstance,{value:n=>n.minimize!=null&&n.computeGradients!=null&&n.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dZ extends Qg{static get className(){return"Adadelta"}constructor(e,t,r=null){super(),this.learningRate=e,this.rho=t,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=Be.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Be.registeredVariables[r],o=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accum_grad`,variable:Ye(()=>qr(s).variable(o))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${r}/accum_var`,variable:Ye(()=>qr(s).variable(o))});const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const l=this.accumulatedGrads[i].variable,c=this.accumulatedUpdates[i].variable;Ye(()=>{const u=$t(ke(l,this.rho),ke(Ki(a),1-this.rho)),d=ke(mn(ca($t(c,this.epsilon)),ca($t(l,this.epsilon))),a),f=$t(ke(c,this.rho),ke(Ki(d),1-this.rho));l.assign(u),c.assign(f);const p=$t(ke(d,-this.learningRate),s);s.assign(p)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(rr(this.accumulatedGrads.map(e=>e.variable)),rr(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,t).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedUpdates=e.slice(t,t*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hZ extends Qg{static get className(){return"Adagrad"}constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Be.registeredVariables[r];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accumulator`,variable:Ye(()=>G1(s.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[i].tensor:e[r];if(o==null)return;const a=this.accumulatedGrads[i].variable;Ye(()=>{const l=$t(a,Ki(o));a.assign(l);const c=$t(ke(mn(o,ca($t(l,Be.backend.epsilon()))),-this.learningRate),s);s.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&rr(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fZ extends Qg{static get className(){return"Adam"}constructor(e,t,r,i=null){super(),this.learningRate=e,this.beta1=t,this.beta2=r,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Ye(()=>{this.accBeta1=$n(t).variable(),this.accBeta2=$n(r).variable()}),i==null&&(this.epsilon=Be.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Ye(()=>{const r=vn(1,this.accBeta1),i=vn(1,this.accBeta2);t.forEach((s,o)=>{const a=Be.registeredVariables[s],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${s}/m`,variable:Ye(()=>qr(a).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${s}/v`,variable:Ye(()=>qr(a).variable(l))});const c=Array.isArray(e)?e[o].tensor:e[s];if(c==null)return;const u=this.accumulatedFirstMoment[o].variable,d=this.accumulatedSecondMoment[o].variable,f=$t(ke(u,this.beta1),ke(c,1-this.beta1)),p=$t(ke(d,this.beta2),ke(Ki(c),1-this.beta2)),g=mn(f,r),v=mn(p,i);u.assign(f),d.assign(p);const b=$t(ke(mn(g,$t(ca(v),this.epsilon)),-this.learningRate),a);a.assign(b)}),this.accBeta1.assign(ke(this.accBeta1,this.beta1)),this.accBeta2.assign(ke(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&rr(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&rr(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e),Ye(()=>{this.accBeta1.assign(Gp(this.beta1,this.iterations_+1)),this.accBeta2.assign(Gp(this.beta2,this.iterations_+1))});const t=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,t).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(t,t*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pZ extends Qg{static get className(){return"Adamax"}constructor(e,t,r,i=null,s=0){super(),this.learningRate=e,this.beta1=t,this.beta2=r,this.epsilon=i,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Ye(()=>{this.iteration=$n(0).variable(),this.accBeta1=$n(t).variable()}),i==null&&(this.epsilon=Be.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Ye(()=>{const r=vn(1,this.accBeta1),i=mn(-this.learningRate,$t(ke(this.iteration,this.decay),1));t.forEach((s,o)=>{const a=Be.registeredVariables[s],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${s}/m`,variable:qr(a).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${s}/v`,variable:qr(a).variable(l)});const c=Array.isArray(e)?e[o].tensor:e[s];if(c==null)return;const u=this.accumulatedFirstMoment[o].variable,d=this.accumulatedWeightedInfNorm[o].variable,f=$t(ke(u,this.beta1),ke(c,1-this.beta1)),p=ke(d,this.beta2),g=xo(c),v=im(p,g);u.assign(f),d.assign(v);const b=$t(ke(mn(i,r),mn(f,$t(v,this.epsilon))),a);a.assign(b)}),this.iteration.assign($t(this.iteration,1)),this.accBeta1.assign(ke(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&rr(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&rr(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lz extends Qg{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Array.isArray(e)?e[i].tensor:e[r];if(s==null)return;const o=Be.registeredVariables[r];Ye(()=>{const a=$t(ke(this.c,s),o);o.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Uo($n(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mZ extends lz{static get className(){return"Momentum"}constructor(e,t,r=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=r,this.accumulations=[],this.m=$n(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Be.registeredVariables[r];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${r}/momentum`,variable:Ye(()=>qr(s).variable(!1))});const o=this.accumulations[i].variable,a=Array.isArray(e)?e[i].tensor:e[r];a!=null&&Ye(()=>{let l;const c=$t(ke(this.m,o),a);this.useNesterov?l=$t(ke(this.c,$t(a,ke(c,this.m))),s):l=$t(ke(this.c,c),s),o.assign(c),s.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&rr(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gZ extends Qg{static get className(){return"RMSProp"}constructor(e,t=.9,r=0,i=null,s=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=r,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,i==null&&(this.epsilon=Be.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Be.registeredVariables[r],o=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${r}/rms`,variable:Ye(()=>qr(s).variable(o))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${r}/momentum`,variable:Ye(()=>qr(s).variable(o))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${r}/mg`,variable:Ye(()=>qr(s).variable(o))});const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const l=this.accumulatedMeanSquares[i].variable,c=this.accumulatedMoments[i].variable;Ye(()=>{const u=$t(ke(l,this.decay),ke(Ki(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[i].variable,f=$t(ke(d,this.decay),ke(a,1-this.decay)),p=mn(ke(a,this.learningRate),ca(vn(u,$t(Ki(f),this.epsilon)))),g=$t(ke(c,this.momentum),p);l.assign(u),d.assign(f),c.assign(g);const v=vn(s,g);s.assign(v)}else{const d=$t(ke(l,this.decay),ke(Ki(a),1-this.decay)),f=$t(ke(c,this.momentum),mn(ke(a,this.learningRate),ca($t(d,this.epsilon))));l.assign(d),c.assign(f);const p=vn(s,f);s.assign(p)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&rr(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&rr(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&rr(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,t).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedMoments=e.slice(t,t*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(t*2,t*3).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sEe=[dZ,hZ,fZ,pZ,mZ,gZ,lz];function oEe(){for(const n of sEe)Gt(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aEe="model",lEe=".json",cEe=".weights.bin";function G8(n){return new Promise(e=>setTimeout(e)).then(n)}class yv{constructor(e){if(!it().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(yv.URL_SCHEME)&&(e=e.slice(yv.URL_SCHEME.length)),(e==null||e.length===0)&&(e=aEe),this.modelJsonFileName=e+lEe,this.weightDataFileName=e+cEe}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=ph.join(e.weightData),r=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const i=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],s=qY(e,i),o=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),a=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=o,await G8(()=>a.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;l.download=this.weightDataFileName,l.href=r,await G8(()=>l.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:$E(e)}}}}yv.URL_SCHEME="downloads://";class uEe{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,t)=>{const r=new FileReader;r.onload=i=>{const s=JSON.parse(i.target.result),o=s.modelTopology;if(o==null){t(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(s.weightsManifest==null){t(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:o});return}const l=CU(s,c=>this.loadWeights(c));e(l)},r.onerror=i=>t(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const t=[],r=[];for(const o of e)t.push(...o.weights),r.push(...o.paths);const i=this.checkManifestAndWeightFiles(e),s=r.map(o=>this.loadWeightsFile(o,i[o]));return Promise.all(s).then(o=>[t,o])}loadWeightsFile(e,t){return new Promise((r,i)=>{const s=new FileReader;s.onload=o=>{const a=o.target.result;r(a)},s.onerror=o=>i(`Failed to weights data from file of path '${e}'.`),s.readAsArrayBuffer(t)})}checkManifestAndWeightFiles(e){const t=[],r=this.weightsFiles.map(s=>k8(s.name)),i={};for(const s of e)s.paths.forEach(o=>{const a=k8(o);if(t.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(t.push(a),r.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);i[o]=this.weightsFiles[r.indexOf(a)]});if(t.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return i}}const dEe=n=>it().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(yv.URL_SCHEME)?hEe(n.slice(yv.URL_SCHEME.length)):null;xs.registerSaveRouter(dEe);function hEe(n="model"){return new yv(n)}function fEe(n){return new uEe(n)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W8(n,e,t,r){o(n),t=t??0,r=r??1,a(t,r);let i=0;const s=l=>(l.then(c=>{const u=t+ ++i/n.length*(r-t);return e(u),c}),l);function o(l){de(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,c){de(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),de(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),de(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(n.map(s))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function yZ(n,e){e==null&&(e={});const t=e.fetchFunc==null?it().platform.fetch:e.fetchFunc,r=n.map(d=>t(d,e.requestInit,{isBinary:!0})),a=(e.onProgress==null?await Promise.all(r):await W8(r,e.onProgress,0,.5)).map(d=>d.arrayBuffer());return e.onProgress==null?await Promise.all(a):await W8(a,e.onProgress,.5,1)}function pEe(n,e){var t;const r=e.fetchFunc==null?it().platform.fetch:e.fetchFunc;let i=0,s;return(t=e.onProgress)===null||t===void 0||t.call(e,0),new ReadableStream({pull:async o=>{for(var a;i<n.length;){s||(s=(await r(n[i],e.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:c}=await s.read();if(l){i++,s=void 0,(a=e.onProgress)===null||a===void 0||a.call(e,i/n.length);continue}o.enqueue(c);return}o.close()}})}async function mEe(n,e="",t,r){return vZ(o=>yZ(o,{requestInit:r}))(n,e,t)}function vZ(n){return async(e,t="",r)=>{const i=e.map(()=>!1),s={},o=r!=null?r.map(()=>!1):[],a=[];if(e.forEach((p,g)=>{let v=0;p.weights.forEach(b=>{const x="quantization"in b?b.quantization.dtype:b.dtype,_=dv[x]*xt(b.shape),E=()=>{i[g]=!0,s[g]==null&&(s[g]=[]),s[g].push({manifestEntry:b,groupOffset:v,sizeBytes:_})};r!=null?r.forEach((C,M)=>{C===b.name&&(E(),o[M]=!0)}):E(),a.push(b.name),v+=_})}),!o.every(p=>p)){const p=r.filter((g,v)=>!o[v]);throw new Error(`Could not find weights in manifest with names: ${p.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}const l=i.reduce((p,g,v)=>(g&&p.push(v),p),[]),c=[];l.forEach(p=>{e[p].paths.forEach(g=>{const v=t+(t.endsWith("/")?"":"/")+g;c.push(v)})});const u=await n(c),d={};let f=0;return l.forEach(p=>{const g=e[p].paths.length,v=new ph(u.slice(f,f+g));s[p].forEach(x=>{const _=v.slice(x.groupOffset,x.groupOffset+x.sizeBytes),E=GY(_,[x.manifestEntry]);for(const C in E)d[C]=E[C]}),f+=g}),d}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gEe="application/octet-stream",yEe="application/json";class cz{constructor(e,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,t.fetchFunc!=null?(de(typeof t.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=it().platform.fetch,de(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&de(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],i=qY(e,r);if(t.body.append("model.json",new Blob([JSON.stringify(i)],{type:yEe}),"model.json"),e.weightData!=null){const o=ph.join(e.weightData);t.body.append("model.weights.bin",new Blob([o],{type:gEe}),"model.weights.bin")}const s=await this.fetch(this.path,t);if(s.ok)return{modelArtifactsInfo:$E(e),responses:[s]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${s.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch{let o=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?o+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":o+=" Please make sure the server is serving valid JSON for this request.",new Error(o)}const r=t.modelTopology,i=t.weightsManifest;if(r==null&&i==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return CU(e,t=>this.loadWeights(t))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),r=CL(e.weightsManifest),i=()=>pEe(t,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:i})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[r,i]=vEe(t),s=this.weightPathPrefix||r,o=[],a=[];for(const l of e)for(const c of l.paths)this.weightUrlConverter!=null?a.push(this.weightUrlConverter(c)):o.push(s+c+i);return this.weightUrlConverter&&o.push(...await Promise.all(a)),o}async loadWeights(e){const t=await this.getWeightUrls(e),r=CL(e),i=await yZ(t,this.loadOptions);return[r,i]}}cz.URL_SCHEME_REGEX=/^https?:\/\//;function vEe(n){const e=n.lastIndexOf("/"),t=n.lastIndexOf("?"),r=n.substring(0,e),i=t>e?n.substring(t):"";return[r+"/",i]}function IL(n){return n.match(cz.URL_SCHEME_REGEX)!=null}const bZ=(n,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let t=!0;if(Array.isArray(n)?t=n.every(r=>IL(r)):t=IL(n),t)return uz(n,e)}return null};xs.registerSaveRouter(bZ);xs.registerLoadRouter(bZ);function uz(n,e){return new cz(n,e)}function bEe(n,e){return uz(n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rB{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class xZ{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class xEe{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}}function SEe(n,e,t,r){const i=arguments;return new xEe(SZ(...i))}function SZ(n,e,t,r){return arguments.length===1?n.modelTopology!=null||n.weightSpecs!=null?new rB(n):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new rB({modelTopology:n})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new rB({modelTopology:n,weightSpecs:e,weightData:t,trainingConfig:r}))}function wEe(n){return new xZ(n)}function _Ee(n){return new xZ(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wZ=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:ph,browserFiles:fEe,browserHTTPRequest:bEe,concatenateArrayBuffers:XY,copyModel:_be,decodeWeights:GY,decodeWeightsStream:jY,encodeWeights:_L,fromMemory:SEe,fromMemorySync:SZ,getLoadHandlers:cbe,getModelArtifactsForJSON:CU,getModelArtifactsForJSONSync:KY,getModelArtifactsInfoForJSON:$E,getSaveHandlers:YY,getWeightSpecs:CL,http:uz,isHTTPScheme:IL,listModels:Sbe,loadWeights:mEe,moveModel:Cbe,registerLoadRouter:lbe,registerSaveRouter:abe,removeModel:wbe,weightsLoaderFactory:vZ,withSaveHandler:wEe,withSaveHandlerSync:_Ee},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let uy;function CEe(n,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(n==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let t=!1,r=!1,i=!1,s=!1,o=!1,a=!1;if(n.data instanceof Uint8Array)t=!0;else if(typeof ImageData<"u"&&n instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)s=!0;else if(n.getContext!=null)o=!0;else if(typeof ImageBitmap<"u"&&n instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${n.constructor.name}`);if(gL(pL,Be.backendName)!=null){const g={pixels:n},v={numChannels:e};return Be.runKernel(pL,g,v)}const[c,u]=i?[n.videoWidth,n.videoHeight]:[n.width,n.height];let d;if(o)d=n.getContext("2d").getImageData(0,0,c,u).data;else if(r||t)d=n.data;else if(s||i||a){if(uy==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")uy=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else uy=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});uy.canvas.width=c,uy.canvas.height=u,uy.drawImage(n,0,0,c,u),d=uy.getImageData(0,0,c,u).data}let f;if(e===4)f=new Int32Array(d);else{const g=c*u;f=new Int32Array(g*e);for(let v=0;v<g;v++)for(let b=0;b<e;++b)f[v*e+b]=d[v*4+b]}return KJ(f,[u,c,e],"int32")}function EEe(n){if(n.rank!==2&&n.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const e=n.rank===2?1:n.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(n.dtype!=="float32"&&n.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`)}async function AEe(n,e){let t=fe(n,"img","toPixels");if(!(n instanceof qi)){const c=t;t=nn(c,"int32"),c.dispose()}EEe(t);const[r,i]=t.shape.slice(0,2),s=t.rank===2?1:t.shape[2],o=await t.data(),a=t.dtype==="float32"?255:1,l=new Uint8ClampedArray(i*r*4);for(let c=0;c<r*i;++c){const u=[0,0,0,255];for(let f=0;f<s;f++){const p=o[c*s+f];if(t.dtype==="float32"){if(p<0||p>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${p}.`)}else if(t.dtype==="int32"&&(p<0||p>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${p}.`);s===1?(u[0]=p*a,u[1]=p*a,u[2]=p*a):u[f]=p*a}const d=c*4;l[d+0]=Math.round(u[0]),l[d+1]=Math.round(u[1]),l[d+2]=Math.round(u[2]),l[d+3]=Math.round(u[3])}return t!==n&&t.dispose(),l}const TEe=Ie({fromPixels_:CEe});function dz(n,e){const t=n.shape.length,r=e.shape.length;if(t<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${t}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>t)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${t}`);if(xt(n.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${n.shape}.`);const i=e.shape,s=i[i.length-1];let o=1;for(let d=0;d<i.length-1;++d)o*=i[d];const a=n.shape,l=i.slice();l.pop();let c=1;for(let d=s;d<t;++d)c*=a[d],l.push(a[d]);const u=[...kn(n.shape).map(d=>d/c),1].slice(0,s);return[l,o,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DL=-2,MEe=-1;function hz(n,e,t){const r=n.shape.length;de(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),de(r===t.length,()=>`Error in slice${r}D: Length of size ${t} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)de(e[i]+t[i]<=n.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${e[i]+t[i]}) would overflow input.shape[${i}] (${n.shape[i]})`)}function REe(n){const e=[];let t=0;for(;n>0;)n&1&&e.push(t),n/=2,t++;return e}function fz(n,e,t){const r=[];for(let i=0;i<n.length;i++)r[i]=Math.ceil((e[i]-n[i])/t[i]);return r}function _Z(n,e,t,r){const i=[...n];for(let s=i.length;s<r.length;s++)i.push(1);for(let s=0;s<t;s++)s===0?i[e]=1:(i.splice(e,0,1),i.pop());return i}function CZ(n,e,t){return t<=n?t:t-(e-1)}function EZ(n,e){const t=[];for(let r=0;r<n;r++)t.push(e+r);return t}function NEe(n,e,t,r,i,s,o,a,l){const c=n.length;let u=new Array(c),d=new Array(c),f=new Array(c);if(e.length&&t>0){const p=e[0],g=t+1;u=AZ(o,p,g,r,n),d=TZ(a,p,g,i,n),f=_Z(s,p,g,n)}else for(let p=0;p<c;p++)u[p]=RZ(o,r,s,n,p,l),d[p]=NZ(a,i,s,n,p,l),f[p]=MZ(s,p,l);return{begin:u,end:d,strides:f}}function AZ(n,e,t,r,i){const s=[...i],o=EZ(t,e);for(let a=0;a<s.length;a++)if(o.indexOf(a)>-1)s[a]=0;else{const l=CZ(e,t,a);let c=r[l];n&1<<l&&(c=0),s[a]=c}return s}function TZ(n,e,t,r,i){const s=[...i],o=EZ(t,e);for(let a=0;a<s.length;a++)if(o.indexOf(a)>-1)s[a]=Number.MAX_SAFE_INTEGER;else{const l=CZ(e,t,a);let c=r[l];n&1<<l&&(c=Number.MAX_SAFE_INTEGER),s[a]=c}for(let a=0;a<s.length;a++){const l=i[a];s[a]<0&&(s[a]+=l),s[a]=lv(0,s[a],i[a])}return s}function MZ(n,e,t){let r=n[e];return(t&1<<e||r==null)&&(r=1),r}function RZ(n,e,t,r,i,s){let o=e[i];const a=t[i]||1;(n&1<<i||s&1<<i||o==null)&&(a>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[i];return o<0&&(o+=l),o=lv(0,o,l-1),o}function NZ(n,e,t,r,i,s){let o=e[i];const a=t[i]||1;(n&1<<i||s&1<<i||o==null)&&(a>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[i];return o<0&&(o+=l),a>0?o=lv(0,o,l):o=lv(-1,o,l-1),o}function pz(n,e,t){let r=t.length;for(let i=0;i<t.length;i++)if(t[i]>1){r=i;break}for(let i=r+1;i<t.length;i++)if(e[i]>0||t[i]!==n[i])return!1;return!0}function mz(n,e){let t=n.length>0?n[n.length-1]:1;for(let r=0;r<n.length-1;r++)t+=n[r]*e[r];return t}function h3(n,e,t){let r;const i=n.shape.length;typeof e=="number"?r=[e,...new Array(i-1).fill(0)]:e.length<i?r=e.concat(new Array(i-e.length).fill(0)):r=e.slice(),r.forEach(o=>{de(o!==-1,()=>"slice() does not support negative begin indexing.")});let s;return t==null?s=new Array(i).fill(-1):typeof t=="number"?s=[t,...new Array(i-1).fill(-1)]:t.length<i?s=t.concat(new Array(i-t.length).fill(-1)):s=t,s=s.map((o,a)=>o>=0?o:(de(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${a}.`),n.shape[a]-r[a])),[r,s]}function gz(n,e,t,r,i,s,o,a,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,o!=null&&(o&o-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:t.slice(),strides:c.slice(),beginMask:i,endMask:s,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};for(let E=0;E<d.dims;E++)u&&(1<<E&a)!==0&&d.numAddAxisAfterEllipsis++,1<<E&o&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);const f={dims:n.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};IEe(d,f);let p=!0,g=!0,v=!0;const b=[],x=[];for(let E=0;E<n.length;++E){if(f.strides[E]===0)throw Error(`strides[${E}] must be non-zero`);const C=!!(f.shrinkAxisMask&1<<E),M=n[E];if(M===-1){b.push(C?1:-1);continue}const R=[f.beginMask&1<<E,f.endMask&1<<E],L=[f.strides[E]>0?0:-1,f.strides[E]>0?M:M-1];if(C&&f.strides[E]<=0)throw Error("only stride 1 allowed on non-range indexing.");v=v&&f.strides[E]===1;const B=!!(f.beginMask&1<<E&&f.endMask&1<<E);if(f.beginValid&&f.endValid){if(C){const P=f.begin[E]<0?M+f.begin[E]:f.begin[E];if(f.begin[E]=P,f.end[E]=f.begin[E]+1,P<0||P>=M)throw Error(`slice index ${f.begin[E]} of dimension ${E} out of bounds.`)}else f.begin[E]=j8(f.begin[E],0,f.strides[E],M,R,L),f.end[E]=j8(f.end[E],1,f.strides[E],M,R,L);const D=f.strides[E]===1&&f.begin[E]===0&&f.end[E]===M;p=p&&D,g=g&&(E===0&&f.strides[E]===1||D)}else p=p&&f.strides[E]===1&&B,g=g&&(E===0&&f.strides[E]===1||B);let N,I=!1;if(f.beginValid&&f.endValid?(N=f.end[E]-f.begin[E],I=!0):C?(N=1,I=!0):B&&M>=0&&(f.strides[E]<0?N=-M:N=M,I=!0),I){let D;N===0||N<0!=f.strides[E]<0?D=0:D=Math.trunc(N/f.strides[E])+(N%f.strides[E]!==0?1:0),b.push(D)}else b.push(-1)}for(let E=0;E<f.finalShapeGatherIndices.length;++E){const C=f.finalShapeGatherIndices[E];C>=0?x.push(b[C]):C===DL&&x.push(1)}return{finalShapeSparse:x.filter((E,C)=>f.finalShapeGatherIndices[C]!==DL),finalShape:x,isIdentity:p,sliceDim0:g,isSimpleSlice:v,begin:f.begin,end:f.end,strides:f.strides}}function IEe(n,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let t=0;e.beginValid=n.begin!=null,e.endValid=n.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<n.dims;r++)if(1<<r&n.ellipsisMask){const i=Math.min(e.dims-(n.dims-r)+1+n.numAddAxisAfterEllipsis,e.dims);for(;t<i;t++)e.begin[t]=0,e.end[t]=0,e.strides[t]=1,e.beginMask|=1<<t,e.endMask|=1<<t,e.finalShapeGatherIndices.push(t),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[t]=r}else if(1<<r&n.newAxisMask)e.finalShapeGatherIndices.push(DL),e.finalShapeGatherIndicesSparse.push(-1);else{if(t===e.begin.length)throw Error(`Index out of range using input dim ${t}; input has only ${e.dims} dims, ${e.begin.length}.`);n.begin!=null&&(e.begin[t]=n.begin[r]),n.end!=null&&(e.end[t]=n.end[r]),e.strides[t]=n.strides[r],n.beginMask&1<<r&&(e.beginMask|=1<<t),n.endMask&1<<r&&(e.endMask|=1<<t),n.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(MEe),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<t):(e.finalShapeGatherIndices.push(t),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[t]=r,t++}}function j8(n,e,t,r,i,s){if(i[e])return t>0?s[e]:s[e+1&1];{const o=n<0?r+n:n;return o<s[0]?s[0]:o>s[1]?s[1]:o}}const DEe=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:hz,computeFlatOffset:mz,computeOutShape:fz,getNormalizedAxes:NEe,isSliceContinous:pz,maskToAxes:REe,parseSliceParams:h3,sliceInfo:gz,startForAxis:RZ,startIndicesWithElidedDims:AZ,stopForAxis:NZ,stopIndicesWithElidedDims:TZ,stridesForAxis:MZ,stridesWithElidedDims:_Z},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kEe{static sgd(e){return new lz(e)}static momentum(e,t,r=!1){return new mZ(e,t,r)}static rmsprop(e,t=.9,r=0,i=null,s=!1){return new gZ(e,t,r,i,s)}static adam(e=.001,t=.9,r=.999,i=null){return new fZ(e,t,r,i)}static adadelta(e=.001,t=.95,r=null){return new dZ(e,t,r)}static adamax(e=.002,t=.9,r=.999,i=null,s=0){return new pZ(e,t,r,i,s)}static adagrad(e,t=.1){return new hZ(e,t)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dx=kEe;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OEe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:n=>n();function IZ(){return new Promise(n=>OEe(()=>n()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yz(n,e){const t=n[0].length;n.forEach((i,s)=>{de(i.length===t,()=>`Error in concat${t}D: rank of tensors[${s}] must be the same as the rank of the rest (${t})`)}),de(e>=0&&e<t,()=>`Error in concat${t}D: axis must be between 0 and ${t-1}.`);const r=n[0];n.forEach((i,s)=>{for(let o=0;o<t;o++)de(o===e||i[o]===r[o],()=>`Error in concat${t}D: Shape of tensors[${s}] (${i}) does not match the shape of the rest (${r}) along the non-concatenated axis ${s}.`)})}function yf(n,e){const t=n[0].slice();for(let r=1;r<n.length;r++)t[e]+=n[r][e];return t}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var qd;(function(n){n[n.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",n[n.VALUE_ROWIDS=1]="VALUE_ROWIDS",n[n.ROW_LENGTHS=2]="ROW_LENGTHS",n[n.ROW_SPLITS=3]="ROW_SPLITS",n[n.ROW_LIMITS=4]="ROW_LIMITS",n[n.ROW_STARTS=5]="ROW_STARTS"})(qd||(qd={}));function DZ(n,e,t){let r=new Array;if(t==null&&e==null)return r;if(e==null)for(;r.length<n+t.length;)r.push(-1);else r=e.slice();if(t==null)return r;if(n+t.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${n+t.length}, but shape.rank = ${r.length}`);for(let i=1;i<t.length;++i){const s=t[i],o=r[r.length-t.length+i],a=r[o];if(s>=0)if(a>=0){if(a!==s)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${i+n}] = ${s} but shape[${i+n}] = ${a}`)}else r[o]=s}return r}function kZ(n){const e={FIRST_DIM_SIZE:qd.FIRST_DIM_SIZE,VALUE_ROWIDS:qd.VALUE_ROWIDS,ROW_LENGTHS:qd.ROW_LENGTHS,ROW_SPLITS:qd.ROW_SPLITS,ROW_LIMITS:qd.ROW_LIMITS,ROW_STARTS:qd.ROW_STARTS},t=[];for(const r of n)if(r in e)t.push(e[r]);else break;return t}function OZ(n){return n.length===0?0:n[0]===qd.FIRST_DIM_SIZE?n.length-1:n.length}function BZ(n,e){if(n==null||e==null)return;const t=n.length,r=e.length;if(t>=r)throw new Error(`defaultValue.shape=${n} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${t} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(t,r-1);++i){const s=n[i],o=e[i+1];if(s>=0&&o>=0&&s!==1&&s!==o)throw new Error(`defaultValue.shape=${n}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${i-n.length}] = ${s} but ragged tensor input.flatValues.shape[${i-n.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vz=30;function f3(n){return n<=vz?n:dL(n,Math.floor(Math.sqrt(n)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bz(n,e,t){const r=t*(typeof n=="number"?n:n[0]),i=e*(typeof n=="number"?n:n[1]);return[r,i]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GE(n,e,t,r=!0){let i=[];if(r)i=i.concat(e.slice(0)),i.push(n[0]/t),i=i.concat(n.slice(1));else{i=i.concat(n[0]);const s=e.length;for(let o=0;o<s;++o)i=i.concat([n[o+1]/e[o],e[o]]);i=i.concat(n.slice(s+1))}return i}function WE(n,e,t=!0){const r=[];if(t){r.push(e);for(let i=e+1;i<n;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{const i=[],s=[];for(let o=1;o<n;++o)o>=e*2+1||o%2===1?s.push(o):i.push(o);r.push(...i),r.push(0),r.push(...s)}return r}function jE(n,e,t,r=!0){const i=[];r?i.push(n[0]/t):i.push(n[0]*t);for(let s=1;s<n.length;++s)s<=e.length?r?i.push(e[s-1]*n[s]):i.push(n[s]/e[s-1]):i.push(n[s]);return i}function xz(n,e){const t=[0];for(let r=0;r<e;++r)t.push(n[r][0]);return t}function Sz(n,e,t){const r=n.slice(0,1);for(let i=0;i<t;++i)r.push(n[i+1]-e[i][0]-e[i][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p3=1.7580993408473768,m3=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wz=.3275911,_z=.254829592,Cz=-.284496736,Ez=1.421413741,Az=-1.453152027,Tz=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jp(n,e){if(n.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${n.length}, imag: ${e.length}.`);const t=new Float32Array(n.length*2);for(let r=0;r<t.length;r+=2)t[r]=n[r/2],t[r+1]=e[r/2];return t}function $Z(n){const e=new Float32Array(n.length/2),t=new Float32Array(n.length/2);for(let r=0;r<n.length;r+=2)e[r/2]=n[r],t[r/2]=n[r+1];return{real:e,imag:t}}function LZ(n){const e=Math.ceil(n.length/4),t=new Float32Array(e),r=new Float32Array(e);for(let i=0;i<n.length;i+=4)t[Math.floor(i/4)]=n[i],r[Math.floor(i/4)]=n[i+1];return{real:t,imag:r}}function FZ(n){const e=Math.floor(n.length/4),t=new Float32Array(e),r=new Float32Array(e);for(let i=2;i<n.length;i+=4)t[Math.floor(i/4)]=n[i],r[Math.floor(i/4)]=n[i+1];return{real:t,imag:r}}function Mz(n,e){const t=n[e*2],r=n[e*2+1];return{real:t,imag:r}}function PZ(n,e,t,r){n[r*2]=e,n[r*2+1]=t}function UZ(n,e){const t=new Float32Array(n/2),r=new Float32Array(n/2);for(let i=0;i<Math.ceil(n/2);i++){const s=(e?2:-2)*Math.PI*(i/n);t[i]=Math.cos(s),r[i]=Math.sin(s)}return{real:t,imag:r}}function zZ(n,e,t){const r=(t?2:-2)*Math.PI*(n/e),i=Math.cos(r),s=Math.sin(r);return{real:i,imag:s}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iB="->",BEe=/->/g,X8=",",q8="...";function Rz(n,e){n=n.replace(/\s/g,"");const t=(n.length-n.replace(BEe,"").length)/iB.length;if(t<1)throw new Error("Equations without an arrow are not supported.");if(t>1)throw new Error(`Equation must contain exactly one arrow ("${iB}").`);const[r,i]=n.split(iB);de(r.indexOf(q8)===-1,()=>`The ellipsis notation ("${q8}") is not supported yet.`);const s=r.split(X8),o=s.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let f=0;f<i.length;++f){const p=i[f];if(!s.some(g=>g.indexOf(p)!==-1))throw new Error(`Output subscripts contain the label ${p} not present in the input subscripts.`);a.indexOf(p)===-1&&a.push(p)}for(let f=0;f<r.length;++f){const p=r[f];a.indexOf(p)===-1&&p!==X8&&a.push(p)}const l=new Array(s.length);for(let f=0;f<o;++f){if(new Set(s[f].split("")).size!==s[f].length)throw new Error(`Found duplicate axes in input component ${s[f]}. Support for duplicate axes in input is not implemented yet.`);l[f]=[];for(let p=0;p<s[f].length;++p)l[f].push(a.indexOf(s[f][p]))}const c=a.length,u=i.length,d=[];for(let f=u;f<c;++f)d.push(f);return{allDims:a,summedDims:d,idDims:l}}function Nz(n,e){let t=new Array(n);t.fill(-1);for(let i=0;i<e.length;++i)t[e[i]]=i;const r=[];for(let i=0;i<n;++i)t[i]===-1&&r.push(i);return t=t.filter(i=>i!==-1),{permutationIndices:t,expandDims:r}}function Iz(n,e,t){const r=new Array(n);for(let i=0;i<t.length;++i){const s=t[i].shape;for(let o=0;o<e[i].length;++o)r[e[i][o]]===void 0?r[e[i][o]]=s[o]:de(r[e[i][o]]===s[o],()=>`Expected dimension ${r[e[i][o]]} at axis ${o} of input shaped ${JSON.stringify(s)}, but got dimension ${s[o]}`)}}function Dz(n,e){const t=n,r=[];let i=0;n.length===0&&t.push(-1),i=n.length+1;for(let o=0;o<i;++o)r.push([]);const s=[];for(let o=0;o<t.length;++o){const a=t[o],l=$Ee(e,a);for(const c of l)s.indexOf(c)===-1&&(r[o].push(c),s.push(c))}return{path:t,steps:r}}function kz(n){return n.every((e,t)=>e===t)}function $Ee(n,e){const t=[];for(let r=0;r<n.length;++r)(n[r].length===0||n[r].indexOf(e)!==-1||e===-1)&&t.push(r);return t}function Oz(n,e,t=0){let r=[];if(typeof e=="number")de(n.shape[t]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(n.shape[t]/e);else{const i=e.reduce((o,a)=>(a===-1&&(o+=1),o),0);de(i<=1,()=>"There should be only one negative value in split array.");const s=e.indexOf(-1);if(s!==-1){const o=e.reduce((a,l)=>l>0?a+l:a);e[s]=n.shape[t]-o}de(n.shape[t]===e.reduce((o,a)=>o+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HZ(n){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${n}`}function VZ(n,e){return`indices(${n}, 0) is invalid: ${e} < 0`}function GZ(n,e,t){return`indices(${n}, 0) is invalid: ${e} >= ${t}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WZ(n,e){return`only one output dimension may be -1, not both ${n} and ${e}`}function jZ(n,e){return`size ${n} must be non-negative, not ${e}`}function XZ(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function qZ(n,e){const t=xt(n),r=xt(e);return`Input to reshape is a SparseTensor with ${t}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${n} outputShape= ${e}`}function KZ(n,e){const t=xt(n),r=xt(e);return`Input to reshape is a tensor with ${t} dense values, but the requested shape has ${r}. inputShape=${n} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kL(){return"segment ids must be >= 0"}function YZ(){return"segment ids are not increasing"}function JZ(n,e){return`Segment id ${n} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function ZZ(n,e,t){return`Bad: indices[${n}] == ${e} out of range [0, ${t})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QZ(n,e){let t=!1,r;for(n<=vz?(r=n,t=!0):r=dL(n,Math.floor(Math.sqrt(n)));!t;)r>e||r===n?t=!0:r=dL(n,r+1);return r}function eQ(n,e,t){const r=[],i=n.length;for(let s=0;s<i;s++)s!==e?r.push(n[s]):r.push(t);return r}function Bz(n,e,t,r){const i=e.shape.length,s=n.shape.length;if(r!==0&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${s}).`);if(t<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${t}).`);for(let d=0;d<r;++d)if(n.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${n.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const o=n.shape[t],a=[];let l=1,c=1,u=1;for(let d=0;d<r;++d)a.push(n.shape[d]),l*=n.shape[d];for(let d=r;d<t;d++)a.push(n.shape[d]),c*=n.shape[d];for(let d=r;d<i;d++)a.push(e.shape[d]);for(let d=t+1;d<s;d++)a.push(n.shape[d]),u*=n.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:o,outputShape:a}}const LEe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:Bz,computeOutShape:eQ,segOpComputeOptimalWindowSize:QZ},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xp(n){try{return n.map(e=>Mg(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function tQ(n){return n.map(e=>vg(e))}const FEe=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:_z,ERF_A2:Cz,ERF_A3:Ez,ERF_A4:Az,ERF_A5:Tz,ERF_P:wz,PARALLELIZE_THRESHOLD:vz,get RowPartitionType(){return qd},SELU_SCALE:m3,SELU_SCALEALPHA:p3,applyActivation:u3,assertAndGetBroadcastShape:fr,assertAxesAreInnerMostDims:da,assertParamsConsistent:yz,assignToTypedArray:PZ,axesAreInnerMostDims:OU,calculateShapes:$v,checkEinsumDimSizes:Iz,checkPadOnDimRoundingMode:al,combineLocations:NJ,combineRaggedTensorToTensorShapes:DZ,complexWithEvenIndex:LZ,complexWithOddIndex:FZ,computeConv2DInfo:jo,computeConv3DInfo:Kg,computeDefaultPad:TU,computeDilation2DInfo:LE,computeOptimalWindowSize:f3,computeOutAndReduceShapes:Xo,computeOutShape:yf,computePool2DInfo:nd,computePool3DInfo:nm,convertConv2DDataFormat:rm,decodeEinsumEquation:Rz,eitherStridesOrDilationsAreOne:ua,expandShapeToKeepDim:Ks,exponent:zZ,exponents:UZ,fromStringArrayToUint8:tQ,fromUint8ToStringArray:Xp,getAxesPermutation:Cs,getBroadcastDims:y1,getComplexWithIndex:Mz,getEinsumComputePath:Dz,getEinsumPermutation:Nz,getFusedBiasGradient:c3,getFusedDyActivation:l3,getImageCenter:bz,getInnerMostAxes:Zs,getPermuted:WE,getRaggedRank:OZ,getReductionAxes:Ro,getReshaped:GE,getReshapedPermuted:jE,getRowPartitionTypesHelper:kZ,getSliceBeginCoords:xz,getSliceSize:Sz,getSparseFillEmptyRowsIndicesDenseShapeMismatch:HZ,getSparseFillEmptyRowsNegativeIndexErrorMessage:VZ,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:GZ,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:XZ,getSparseReshapeInputOutputMismatchErrorMessage:KZ,getSparseReshapeInputOutputMultipleErrorMessage:qZ,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:WZ,getSparseReshapeNegativeOutputDimErrorMessage:jZ,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:ZZ,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:kL,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:YZ,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:JZ,getUndoAxesPermutation:Yg,isIdentityPermutation:kz,log:Cve,mergeRealAndImagArrays:jp,prepareAndValidate:dz,prepareSplitSize:Oz,segment_util:LEe,shouldFuse:d3,slice_util:DEe,splitRealAndImagArrays:$Z,stridesOrDilationsArePositive:pv,tupleValuesAreOne:Ig,upcastType:Tc,validateDefaultValueShape:BZ,validateInput:ZU,validateUpdateShape:YJ,warn:Qc},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */oEe();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nQ={kernelName:UI,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ke(n,j1(nn(t,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PEe={kernelName:zC,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>{const r=Ki(nn(t,"float32")),i=ca(vn($n(1),r));return ss(mn(n,i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UEe={kernelName:HC,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>{const r=ca(vn(Ki(nn(t,"float32")),1));return mn(n,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zEe={kernelName:V1,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,i=fr(t.shape,r.shape);return{a:()=>{let a=n;const l=Ro(t.shape,i);return l.length>0&&(a=wn(a,l)),Fe(a,t.shape)},b:()=>{let a=n;const l=Ro(r.shape,i);return l.length>0&&(a=wn(a,l)),Fe(a,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HEe={kernelName:zI,saveAllInputs:!0,gradFunc:(n,e)=>{const t={};return e.forEach((r,i)=>{t[i]=()=>n.clone()}),t}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VEe={kernelName:HI,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>qr(t)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GEe={kernelName:VI,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>qr(t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WEe={kernelName:VC,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>mn(n,ca(vn($n(1),Ki(nn(t,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jEe={kernelName:GC,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>{const r=ca($t($n(1),Ki(nn(t,"float32"))));return mn(n,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XEe={kernelName:XC,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,i=fr(t.shape,r.shape);return{a:()=>{const a=$t(Ki(t),Ki(r));let l=ke(n,mn(r,a));const c=Ro(t.shape,i);return c.length>0&&(l=wn(l,c)),Fe(l,t.shape)},b:()=>{const a=$t(Ki(t),Ki(r));let l=ss(ke(n,mn(t,a)));const c=Ro(r.shape,i);return c.length>0&&(l=wn(l,c)),Fe(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qEe={kernelName:WC,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>mn(n,$t(Ki(nn(t,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KEe={kernelName:jC,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>mn(n,vn($n(1),Ki(nn(t,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YEe(n,e,t,r,i,s){const o=fe(n,"dy","avgPool3dGrad"),a=fe(e,"input","avgPool3dGrad");let l=o,c=a,u=!1;a.rank===4&&(u=!0,l=Fe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=Fe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),de(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),de(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),al("avgPool3dGrad",i,s);const d={dy:l,input:c},f={filterSize:t,strides:r,pad:i,dimRoundingMode:s},p=Be.runKernel(x4,d,f);return u?Fe(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const JEe=Ie({avgPool3dGrad_:YEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZEe={kernelName:WI,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{filterSize:i,strides:s,pad:o,dimRoundingMode:a}=t;return{x:()=>JEe(n,r,i,s,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QEe(n,e,t,r,i){const s=fe(n,"dy","avgPoolGrad"),o=fe(e,"input","avgPoolGrad");de(o.rank===s.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${s.rank})`);let a=o,l=s,c=!1;o.rank===3&&(c=!0,a=Fe(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=Fe(s,[1,s.shape[0],s.shape[1],s.shape[2]])),de(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),de(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const u={dy:l,input:a},d={filterSize:t,strides:r,pad:i},f=Be.runKernel(b4,u,d);return c?Fe(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const e2e=Ie({avgPoolGrad_:QEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t2e={kernelName:GI,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{filterSize:i,strides:s,pad:o}=t;return{x:()=>e2e(n,r,i,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n2e={kernelName:jI,inputsToSave:["a","b"],gradFunc:(n,e,t)=>{const[r,i]=e,{transposeA:s,transposeB:o}=t;return!s&&!o?{a:()=>Br(n,i,!1,!0),b:()=>Br(r,n,!0,!1)}:!s&&o?{a:()=>Br(n,i,!1,!1),b:()=>Br(n,r,!0,!1)}:s&&!o?{a:()=>Br(i,n,!1,!0),b:()=>Br(r,n,!1,!1)}:{a:()=>Br(i,n,!0,!0),b:()=>Br(n,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r2e={kernelName:XI,gradFunc:(n,e,t)=>{const{blockShape:r,crops:i}=t;return{x:()=>e3(n,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i2e={kernelName:Sve,gradFunc:(n,e,t)=>{const r=t,i=r.inputShape,s=r.shape,o=Array.from(s);for(let l=i.length-1;l>=0;l--)if(i[l]===s[l])o[l]=1;else if(i[l]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${s}].`);const a=[];for(let l=0;l<o.length;l++)o[l]>1&&a.push(l);return{x:()=>wn(n,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s2e={kernelName:qC,gradFunc:n=>({x:()=>n.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o2e={kernelName:KC,gradFunc:n=>({x:()=>qr(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a2e={kernelName:YC,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{clipValueMin:i,clipValueMax:s}=t;return{x:()=>Ia(Af(Jg(r,i),Ov(r,s)),n,qr(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l2e={kernelName:KI,inputsToSave:["x"],gradFunc:nQ.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c2e={kernelName:YI,saveAllInputs:!0,gradFunc:(n,e,t)=>{const r=e.map(l=>l.shape),{axis:i}=t,s=Ir(i,e[0].shape)[0],o=r.map(l=>l[s]);return wc(n,o,s).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u2e={kernelName:JI,inputsToSave:["x","filter"],gradFunc:(n,e,t)=>{const[r,i]=e,{dilations:s,strides:o,pad:a,dataFormat:l}=t;return de(Ig(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>RU(r.shape,n,i,o,a,l),filter:()=>rz(r,n,i.shape,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d2e={kernelName:ZI,inputsToSave:["dy","filter"],gradFunc:(n,e,t)=>{const[r,i]=e,{strides:s,pad:o,dataFormat:a,dimRoundingMode:l}=t;return{dy:()=>Dg(n,i,s,o,a,1,l),filter:()=>rz(n,r,i.shape,s,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h2e(n,e,t,r,i){let s=n;n.rank===4&&(s=Fe(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]]));let o=e;o.rank===4&&(o=Fe(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),de(s.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),de(o.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),de(t.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${t}.`),de(s.shape[4]===t[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${t[3]}.`),de(o.shape[4]===t[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${t[4]}).`);const a={x:s,dy:o},l={strides:r,pad:i,filterShape:t};return Be.runKernel(E4,a,l)}const f2e=Ie({conv3DBackpropFilter_:h2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p2e={kernelName:QI,inputsToSave:["x","filter"],gradFunc:(n,e,t)=>{const{dilations:r,strides:i,pad:s}=t;de(Ig(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[o,a]=e;return{x:()=>CJ(o.shape,n,a,i,s),filter:()=>f2e(o,n,a.shape,i,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m2e={kernelName:JC,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ke(ss(XU(nn(t,"float32"))),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g2e={kernelName:ZC,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ke(qU(nn(t,"float32")),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y2e={kernelName:eD,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{axis:i,exclusive:s,reverse:o}=t;return{x:()=>{const a=Cs([i],r.rank);let l=DU(n,i,s,!o);return a!=null&&(l=Xr(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v2e={kernelName:tD,inputsToSave:["x","filter"],gradFunc:(n,e,t)=>{const{dilations:r,strides:i,pad:s,dimRoundingMode:o}=t,a=r??[1,1];de(Ig(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,c]=e;return de(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),de(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),de(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),de(ua(i,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${a}'.`),al("depthwiseConv2d",s,o),{x:()=>sZ(l.shape,n,c,i,s,a,o),filter:()=>iZ(l,n,c.shape,i,s,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b2e={kernelName:nD,inputsToSave:["x","filter"],gradFunc:(n,e,t)=>{const[r,i]=e,s={x:r,filter:i,dy:n},o={x:r,filter:i,dy:n};return{x:()=>Be.runKernel(hL,s,t),filter:()=>Be.runKernel(fL,o,t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x2e={kernelName:eE,outputsToSave:[!0],gradFunc:(n,e)=>{const[t]=e,r={dy:n,y:t};return{x:()=>Be.runKernel(B4,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S2e={kernelName:tE,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e,r=ke(il(ss(Ki(t))),2/Math.sqrt(Math.PI));return{x:()=>ke(n,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w2e={kernelName:nE,outputsToSave:[!0],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ke(n,t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _2e={kernelName:iD,inputsToSave:["input"],gradFunc:(n,e)=>{const[t]=e;return{input:()=>Fe(n,t.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C2e={kernelName:rE,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ke(n,il(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E2e={kernelName:iE,gradFunc:n=>({x:()=>qr(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A2e={kernelName:sE,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,i=fr(t.shape,r.shape);return{a:()=>{const a=mn(n,nn(r,"float32")),l=Ro(t.shape,i);return l.length>0?Fe(wn(a,l),t.shape):a},b:()=>{let a=ke(n,nn(t,"float32"));const l=Ro(r.shape,i);l.length>0&&(a=Fe(wn(a,l),r.shape));const c=Ki(r);return ss(mn(a,nn(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T2e={kernelName:sD,inputsToSave:["x","mean","variance","scale"],gradFunc:(n,e,t)=>{const{varianceEpsilon:r}=t,[i,s,o,a]=e,l=a??$n(1),c=Ro(s.shape,i.shape),u=[];if(s.rank===1){for(let C=0;C<i.shape.length-1;++C)u.push(i.shape[C]);u.push(1)}const d=vn(i,s),f=ke(n,l),p=GU($t(o,$n(r))),g=ke(ke(ke(p,p),p),$n(-.5));return{x:()=>s.rank===1?Fe(ke(ke(n,Vu(Fe(p,[1,1,1,s.shape[0]]),u)),l),i.shape):Fe(ke(ke(n,p),l),i.shape),mean:()=>{let C=ke(ke(p,$n(-1)),f);return s.rank===1&&(C=wn(C,c)),Fe(C,s.shape)},variance:()=>{let C=ke(ke(g,d),f);return s.rank===1&&(C=wn(C,c)),Fe(C,s.shape)},scale:()=>{const C=ke(d,p);let M=ke(n,C);return s.rank===1&&(M=wn(M,c)),Fe(M,s.shape)},offset:()=>{let C=n;return s.rank===1&&(C=wn(C,c)),Fe(C,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M2e={kernelName:oD,inputsToSave:["x","indices"],gradFunc:(n,e,t)=>{const[r,i]=e,{axis:s,batchDims:o}=t,a=Ir(s,r.shape)[0],l=(c,u,d)=>()=>{const f=c.shape,p=u.size,g=f.slice(0,a),v=g.length,b=f.slice(s,f.length).slice(1),x=b.length,_=K8(0,v),E=K8(v+1,v+1+x),C=Y8([g,[p],b]),M=Fe(d,C),R=Fe(u,[p]),L=Y8([[v],_,E]),B=Xr(M,L);let N=ez(B,R,c.shape[a]);const I=Yg(L);return N=Xr(N,I),N};if(o===1){const c=r.shape[0],u=r.split(c,0);return{x:()=>Mc(u.map((p,g)=>l(p,i.slice(g,1),n.slice(g,1))())).reshape(r.shape),indices:()=>i}}else return{x:l(r,i,n),indices:()=>i}}};function K8(n,e){const t=[];for(let r=n;r<e;++r)t.push(r);return t}function Y8(n){const e=[];for(let t=0;t<n.length;++t)for(let r=0;r<n[t].length;++r)e.push(n[t][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R2e={kernelName:oE,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e;return{a:()=>qr(t),b:()=>qr(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N2e={kernelName:aE,gradFunc:n=>({x:()=>nn(n,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I2e={kernelName:lE,gradFunc:n=>({x:()=>qr(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D2e={kernelName:cE,gradFunc:n=>({x:()=>qr(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k2e={kernelName:uE,gradFunc:n=>({x:()=>qr(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O2e={kernelName:lD,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{alpha:i}=t,s=kc(r,0);return{x:()=>Ia(s,n,ke(n,i))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B2e={kernelName:hE,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>mn(n,$t(t,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $2e={kernelName:dE,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>mn(n,nn(t,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L2e={kernelName:_ve,inputsToSave:[],outputsToSave:[!0],gradFunc:(n,e,t)=>{const[r]=e,{axis:i}=t;return{logits:()=>{const o=il(r);return vn(n,ke(wn(n,i,!0),o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F2e(n,e,t,r=5,i=1,s=1,o=.5){const a={x:n,y:e,dy:t},l={depthRadius:r,bias:i,alpha:s,beta:o};return Be.runKernel(V4,a,l)}const P2e=Ie({localResponseNormalizationBackprop_:F2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U2e={kernelName:pD,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const[r,i]=e,{depthRadius:s,bias:o,alpha:a,beta:l}=t;return{x:()=>P2e(r,i,n,s,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rQ(n,e,t,r){return e.rank<t.rank&&(e=Fe(e,Ks(e.shape,r))),n.rank<t.rank&&(n=Fe(n,Ks(n.shape,r))),{x:()=>ke(n,nn(sh(t,e),n.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J8={kernelName:mD,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const r=t,{reductionIndices:i}=r,s=e[0],o=e[1],a=Ir(i,s.shape),l=rQ(n,o,s,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z2e={kernelName:fE,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e;return{a:()=>ke(n,nn(Jg(t,r),"float32")),b:()=>ke(n,nn(Z_(t,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H2e(n,e,t,r,i,s,o){const a=fe(n,"dy","maxPool3dGrad"),l=fe(e,"input","maxPool3dGrad"),c=fe(t,"output","maxPool3dGrad");let u=a,d=l,f=c,p=!1;l.rank===4&&(p=!0,u=Fe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=Fe(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),f=Fe(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),de(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),de(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),de(f.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${f.rank}.`),al("maxPool3dGrad",s,o);const g={dy:u,input:d,output:f},v={filterSize:r,strides:i,pad:s,dimRoundingMode:o},b=Be.runKernel(W4,g,v);return p?Fe(b,[b.shape[1],b.shape[2],b.shape[3],b.shape[4]]):b}const V2e=Ie({maxPool3dGrad_:H2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G2e={kernelName:yD,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const[r,i]=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=t;return{x:()=>V2e(n,r,i,s,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W2e(n,e,t,r,i,s,o){const a=fe(n,"dy","maxPoolGrad"),l=fe(e,"input","maxPoolGrad"),c=fe(t,"output","maxPoolGrad");de(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),de(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),de(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),al("maxPoolGrad",s,o);const u={dy:a,input:l,output:c},d={filterSize:r,strides:i,pad:s,dimRoundingMode:o};return Be.runKernel(G4,u,d)}const j2e=Ie({maxPoolGrad_:W2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X2e={kernelName:gD,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const[r,i]=e,{filterSize:s,strides:o,pad:a}=t;return{x:()=>j2e(n,r,i,s,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q2e={kernelName:vD,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{axis:i}=t,s=Ir(i,r.shape),a=Xo(r.shape,s)[1],l=xt(a);return{x:()=>{const u=r.shape.slice();s.forEach(p=>{u[p]=1});const d=Fe(n,u);return mn(ke(d,xc(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K2e={kernelName:bD,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const r=t,{axis:i}=r,[s,o]=e,a=Ir(i,s.shape),l=rQ(n,o,s,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y2e={kernelName:pE,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e;return{a:()=>ke(n,nn(Ov(t,r),"float32")),b:()=>ke(n,nn(kc(t,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J2e={kernelName:xD,inputsToSave:["x"],gradFunc:(n,e,t)=>{const r=e[0],{paddings:i}=t,s=i.map(o=>o[0]);return{x:()=>Kn(n,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z2e={kernelName:mE,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,i=fr(t.shape,r.shape);return{a:()=>{const a=Ro(t.shape,i);return a.length>0?Fe(wn(n,a),t.shape):n},b:()=>{const a=ke(n,ss(HE(mn(t,r)))),l=Ro(r.shape,i);return l.length>0?Fe(wn(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q2e={kernelName:gE,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,i=fr(t.shape,r.shape);return{a:()=>{const a=ke(n,nn(r,"float32")),l=Ro(t.shape,i);return l.length>0?Fe(wn(a,l),t.shape):a},b:()=>{const a=ke(n,nn(t,"float32")),l=Ro(r.shape,i);return l.length>0?Fe(wn(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eAe={kernelName:SD,gradFunc:n=>({x:()=>ss(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tAe={kernelName:CD,inputsToSave:["indices"],gradFunc:(n,e)=>{const t=e[0];return{indices:()=>_o(t.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nAe={kernelName:_D,gradFunc:n=>({x:()=>qr(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rAe={kernelName:ED,saveAllInputs:!0,gradFunc:(n,e,t)=>{const{axis:r}=t;return Qu(n,r).map(s=>()=>s)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z8={kernelName:AD,inputsToSave:["x"],gradFunc:(n,e,t)=>{const r=e[0],{paddings:i}=t,s=i.map(o=>o[0]);return{x:()=>Kn(n,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iAe={kernelName:yE,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(n,e)=>{const[t,r,i]=e,s=t,o=r,a=fr(s.shape,o.shape);return{a:()=>{const u=nn(o,"float32");let d=ke(n,ke(u,Gp(s,vn(u,$n(1)))));const f=Ro(s.shape,a);return f.length>0&&(d=wn(d,f)),Fe(d,s.shape)},b:()=>{const u=kc(s,0),d=Ia(u,ou(s),qr(s));let f=ke(n,ke(i,d));const p=Ro(o.shape,a);return p.length>0&&(f=wn(f,p)),Fe(f,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sAe={kernelName:TD,inputsToSave:["x","alpha"],gradFunc:(n,e)=>{const[t,r]=e,i=kc(t,0);return{x:()=>Ia(i,n,ke(n,r)),alpha:()=>{let s=Ia(i,qr(n),ke(n,t));const o=Ro(r.shape,n.shape);return o.length>0&&(s=wn(s,o)),Fe(s,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oAe(n,e,t){const r=n.shape.slice();r[t]=1;const i=Fe(e,r),s=jR(n,t,!0,!1),o=jR(n,t,!0,!0),a=ke(s,o);return ke(i,a)}function aAe(n,e,t){const r=n.shape.length,i=r-t.length,s=Cs(t,r);let o=n;s!=null&&(o=Xr(n,s));const a=o.shape.slice(),c=a.splice(r-t.length,t.length).reduce((f,p)=>f*p,1);a.push(c);const u=o.reshape(a);let d=oAe(u,e,i);if(d=d.reshape(o.shape),s!=null){const f=Yg(s);d=Xr(d,f)}return d}const lAe={kernelName:MD,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{axis:i}=t;let s=[];return i==null?s=r.shape.map((o,a)=>a):typeof i=="number"?s=[i]:s=i,{x:()=>aAe(r,n,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cAe={kernelName:QC,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,i=fr(t.shape,r.shape);return{a:()=>{const a=mn(n,nn(r,"float32")),l=Ro(t.shape,i);return l.length>0?Fe(wn(a,l),t.shape):a},b:()=>{let a=ke(n,nn(t,"float32"));const l=Ro(r.shape,i);l.length>0&&(a=Fe(wn(a,l),r.shape));const c=Ki(r);return ss(mn(a,nn(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uAe={kernelName:vE,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>mn(n,ss(Ki(t)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dAe={kernelName:xE,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e,r=ke(Ov(t,6),j1(t));return{x:()=>ke(n,nn(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hAe={kernelName:bE,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ke(n,nn(j1(t),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fAe={kernelName:RD,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>Fe(n,t.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pAe={kernelName:ID,inputsToSave:["images"],gradFunc:(n,e,t)=>{const[r]=e,i={dy:n,images:r};return{images:()=>Be.runKernel(rU,i,t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mAe={kernelName:ND,inputsToSave:["images"],gradFunc:(n,e,t)=>{const[r]=e,i={dy:n,images:r};return{images:()=>Be.runKernel(nU,i,t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gAe={kernelName:DD,gradFunc:(n,e,t)=>{const{dims:r}=t,i=Ir(r,n.shape);return{x:()=>Zu(n,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yAe={kernelName:SE,gradFunc:n=>({x:()=>qr(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vAe={kernelName:wE,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ss(mn(n,ke(Gp(t,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bAe={kernelName:kD,inputsToSave:["condition"],gradFunc:(n,e)=>{const[t]=e;return{condition:()=>nn(qr(t),"float32"),t:()=>ke(n,nn(t,n.dtype)),e:()=>ke(n,nn(JD(t),n.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xAe={kernelName:_E,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>{const r=kc(t,$n(0)),i=$n(p3),s=$n(m3),o=ke(n,s),a=ke(ke(n,i),il(nn(t,"float32")));return Ia(r,o,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SAe={kernelName:TE,outputsToSave:[!0],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ke(n,ke(t,vn($n(1),t)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wAe={kernelName:AE,gradFunc:n=>({x:()=>qr(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ae={kernelName:CE,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ke(jD(nn(t,"float32")),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CAe={kernelName:EE,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ke(IU(nn(t,"float32")),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EAe={kernelName:OD,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{begin:i,size:s}=t,o=r.shape,[a,l]=h3(r,i,s),c=[];for(let u=0;u<n.rank;u++)c.push([a[u],o[u]-a[u]-l[u]]);return{x:()=>Zg(n,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AAe={kernelName:FD,outputsToSave:[!0],gradFunc:(n,e,t)=>{const[r]=e,{dim:i}=t,s=!0,o=ke(n,r);return{logits:()=>vn(o,ke(wn(o,[i],s),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TAe={kernelName:ME,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ke(n,Qd(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q8={kernelName:$D,gradFunc:(n,e,t)=>{const{blockShape:r,paddings:i}=t;return{x:()=>WD(n,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eG={kernelName:LD,gradFunc:(n,e,t)=>{const{axis:r}=t;return{x:()=>$s(n,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MAe={kernelName:RE,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>mn(n,ke(ca(nn(t,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RAe={kernelName:hU,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ke(n,ke(nn(t,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NAe={kernelName:NE,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,i=$n(2);return{a:()=>ke(n,ke(i,vn(t,r))),b:()=>ke(n,ke(i,vn(r,t)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IAe={kernelName:BE,gradFunc:n=>({x:()=>qr(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DAe={kernelName:IE,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,i=fr(t.shape,r.shape);return{a:()=>{let a=n;const l=Ro(t.shape,i);return l.length>0&&(a=wn(a,l)),Fe(a,t.shape)},b:()=>{let a=n;const l=Ro(r.shape,i);return l.length>0&&(a=wn(a,l)),Fe(ss(a),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kAe={kernelName:BD,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,i=r.shape.slice(),{axis:s}=t;Ir(s,r.shape).forEach(c=>{i[c]=1});const a=Fe(n,i),l=ke(a,xc(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OAe={kernelName:DE,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>mn(n,Ki(jD(t)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BAe={kernelName:kE,outputsToSave:[!0],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ke(vn($n(1),Ki(t)),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ae={kernelName:OE,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{reps:i}=t;return{x:()=>{let o=qr(r);if(r.rank===1)for(let a=0;a<i[0];++a)o=$t(o,Kn(n,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)o=$t(o,Kn(n,[a*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)for(let c=0;c<i[2];++c)o=$t(o,Kn(n,[a*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)for(let c=0;c<i[2];++c)for(let u=0;u<i[3];++u)o=$t(o,Kn(n,[a*r.shape[0],l*r.shape[1],c*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LAe={kernelName:Ux,gradFunc:(n,e,t)=>{const r=t,{perm:i}=r,s=Yg(i);return{x:()=>Xr(n,s)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FAe={kernelName:UD,gradFunc:(n,e,t)=>{const r=t,{axis:i}=r;return{value:()=>Mc(n,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PAe={kernelName:zD,inputsToSave:["segmentIds"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>UAe(n,t)}}};function UAe(n,e){const t=im(e,qr(e)),r=VE(n,t);let i=Jg(e,$n(0,"int32"));const s=r.rank-i.rank;for(let a=0;a<s;++a)i=na(i,a+1);i=Af(i,xc(r.shape,"bool"));const o=qr(r);return Ia(i,r,o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zAe={kernelName:HD,gradFunc:n=>({x:()=>qr(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HAe=[nQ,PEe,UEe,zEe,HEe,VEe,GEe,WEe,jEe,XEe,qEe,KEe,ZEe,t2e,n2e,r2e,i2e,s2e,o2e,a2e,l2e,c2e,d2e,u2e,p2e,m2e,g2e,y2e,v2e,b2e,cAe,x2e,S2e,w2e,_2e,C2e,A2e,E2e,T2e,M2e,R2e,N2e,I2e,D2e,k2e,O2e,B2e,$2e,L2e,U2e,J8,J8,z2e,G2e,X2e,q2e,K2e,Y2e,J2e,Z2e,Q2e,eAe,tAe,nAe,rAe,Z8,Z8,iAe,sAe,lAe,uAe,dAe,hAe,fAe,pAe,mAe,gAe,yAe,vAe,bAe,xAe,SAe,wAe,_Ae,CAe,EAe,AAe,TAe,Q8,Q8,eG,eG,MAe,NAe,RAe,IAe,DAe,kAe,OAe,BAe,$Ae,LAe,FAe,PAe,zAe];for(const n of HAe)Eve(n);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.abs=function(){return this.throwIfDisposed(),xo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.acos=function(){return this.throwIfDisposed(),sJ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.acosh=function(){return this.throwIfDisposed(),oJ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.add=function(n){return this.throwIfDisposed(),$t(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.all=function(n,e){return this.throwIfDisposed(),AU(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.any=function(n,e){return this.throwIfDisposed(),WR(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.argMax=function(n){return this.throwIfDisposed(),g1(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.argMin=function(n){return this.throwIfDisposed(),aJ(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.asScalar=function(){return this.throwIfDisposed(),de(this.size===1,()=>"The array must have only 1 element."),Fe(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.asType=function(n){return this.throwIfDisposed(),nn(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.as1D=function(){return this.throwIfDisposed(),Fe(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.as2D=function(n,e){return this.throwIfDisposed(),Fe(this,[n,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.as3D=function(n,e,t){return this.throwIfDisposed(),Fe(this,[n,e,t])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.as4D=function(n,e,t,r){return this.throwIfDisposed(),Fe(this,[n,e,t,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.as5D=function(n,e,t,r,i){return this.throwIfDisposed(),Fe(this,[n,e,t,r,i])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.asin=function(){return this.throwIfDisposed(),lJ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.asinh=function(){return this.throwIfDisposed(),cJ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.atan=function(){return this.throwIfDisposed(),uJ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.atan2=function(n){return this.throwIfDisposed(),dJ(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.atanh=function(){return this.throwIfDisposed(),hJ(this)};_t().prototype.avgPool=function(n,e,t,r){return this.throwIfDisposed(),GD(this,n,e,t,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.batchToSpaceND=function(n,e){return this.throwIfDisposed(),WD(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.batchNorm=function(n,e,t,r,i){return this.throwIfDisposed(),FE(this,n,e,t,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.broadcastTo=function(n){return this.throwIfDisposed(),Vx(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.cast=function(n){return this.throwIfDisposed(),nn(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.ceil=function(){return this.throwIfDisposed(),vJ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.clipByValue=function(n,e){return this.throwIfDisposed(),Vl(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.concat=function(n,e){return this.throwIfDisposed(),n instanceof qi&&(n=[n]),$s([this,...n],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.conv1d=function(n,e,t,r,i,s){return this.throwIfDisposed(),MU(this,n,e,t,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.conv2dTranspose=function(n,e,t,r,i){return this.throwIfDisposed(),NU(this,n,e,t,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.conv2d=function(n,e,t,r,i,s){return this.throwIfDisposed(),Dg(this,n,e,t,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.cos=function(){return this.throwIfDisposed(),jD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.cosh=function(){return this.throwIfDisposed(),IU(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.cumprod=function(n,e,t){return this.throwIfDisposed(),jR(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.cumsum=function(n,e,t){return this.throwIfDisposed(),DU(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.depthToSpace=function(n,e){return this.throwIfDisposed(),AJ(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.depthwiseConv2d=function(n,e,t,r,i,s){return this.throwIfDisposed(),PE(this,n,e,t,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.dilation2d=function(n,e,t,r,i){return this.throwIfDisposed(),TJ(this,n,e,t,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.divNoNan=function(n){return this.throwIfDisposed(),MJ(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.div=function(n){return this.throwIfDisposed(),mn(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.dot=function(n){return this.throwIfDisposed(),RJ(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.elu=function(){return this.throwIfDisposed(),UE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.equal=function(n){return this.throwIfDisposed(),sh(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.erf=function(){return this.throwIfDisposed(),kU(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.euclideanNorm=function(n,e){return this.throwIfDisposed(),DJ(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.exp=function(){return this.throwIfDisposed(),il(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.expandDims=function(n){return this.throwIfDisposed(),na(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.expm1=function(){return this.throwIfDisposed(),kJ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.fft=function(){return this.throwIfDisposed(),o3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.flatten=function(){return this.throwIfDisposed(),Fe(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.floor=function(){return this.throwIfDisposed(),HE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.floorDiv=function(n){return this.throwIfDisposed(),EU(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.gather=function(n,e,t){return this.throwIfDisposed(),VE(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.greaterEqual=function(n){return this.throwIfDisposed(),Jg(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.greater=function(n){return this.throwIfDisposed(),kc(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.ifft=function(){return this.throwIfDisposed(),tC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.irfft=function(){return this.throwIfDisposed(),YU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.isFinite=function(){return this.throwIfDisposed(),OJ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.isInf=function(){return this.throwIfDisposed(),BJ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.isNaN=function(){return this.throwIfDisposed(),$J(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.leakyRelu=function(n){return this.throwIfDisposed(),qD(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.lessEqual=function(n){return this.throwIfDisposed(),Ov(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.less=function(n){return this.throwIfDisposed(),Z_(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.localResponseNormalization=function(n,e,t,r){return this.throwIfDisposed(),LJ(this,n,e,t,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.logSigmoid=function(){return this.throwIfDisposed(),FJ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.logSoftmax=function(n){return this.throwIfDisposed(),$U(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.logSumExp=function(n,e){return this.throwIfDisposed(),YD(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.log=function(){return this.throwIfDisposed(),ou(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.log1p=function(){return this.throwIfDisposed(),KD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.logicalAnd=function(n){return this.throwIfDisposed(),Af(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.logicalNot=function(){return this.throwIfDisposed(),JD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.logicalOr=function(n){return this.throwIfDisposed(),LU(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.logicalXor=function(n){return this.throwIfDisposed(),PJ(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.matMul=function(n,e,t){return this.throwIfDisposed(),Br(this,n,e,t)};_t().prototype.maxPool=function(n,e,t,r){return this.throwIfDisposed(),ZD(this,n,e,t,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.max=function(n,e){return this.throwIfDisposed(),qu(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.maximum=function(n){return this.throwIfDisposed(),im(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.mean=function(n,e){return this.throwIfDisposed(),ks(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.min=function(n,e){return this.throwIfDisposed(),J_(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.minimum=function(n){return this.throwIfDisposed(),gv(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.mirrorPad=function(n,e){return this.throwIfDisposed(),zJ(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.mod=function(n){return this.throwIfDisposed(),HJ(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.mul=function(n){return this.throwIfDisposed(),ke(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.neg=function(){return this.throwIfDisposed(),ss(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.norm=function(n,e,t){return this.throwIfDisposed(),zE(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.notEqual=function(n){return this.throwIfDisposed(),v1(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.oneHot=function(n,e=1,t=0){return this.throwIfDisposed(),PU(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.onesLike=function(){return this.throwIfDisposed(),au(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.pad=function(n,e){return this.throwIfDisposed(),Zg(this,n,e)};_t().prototype.pool=function(n,e,t,r,i,s){return this.throwIfDisposed(),VJ(this,n,e,t,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.pow=function(n){return this.throwIfDisposed(),Gp(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.prelu=function(n){return this.throwIfDisposed(),t3(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.prod=function(n,e){return this.throwIfDisposed(),GJ(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.reciprocal=function(){return this.throwIfDisposed(),WJ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.relu=function(){return this.throwIfDisposed(),$f(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.relu6=function(){return this.throwIfDisposed(),HU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.reshapeAs=function(n){return this.throwIfDisposed(),Fe(this,n.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.reshape=function(n){return this.throwIfDisposed(),Fe(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.resizeBilinear=function(n,e,t){return this.throwIfDisposed(),lZ(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.resizeNearestNeighbor=function(n,e,t){return this.throwIfDisposed(),cZ(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.reverse=function(n){return this.throwIfDisposed(),Zu(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.rfft=function(){return this.throwIfDisposed(),a3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.round=function(){return this.throwIfDisposed(),VU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.rsqrt=function(){return this.throwIfDisposed(),GU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.selu=function(){return this.throwIfDisposed(),WU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.separableConv2d=function(n,e,t,r,i,s){return this.throwIfDisposed(),jU(this,n,e,t,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.sigmoid=function(){return this.throwIfDisposed(),Qd(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.sign=function(){return this.throwIfDisposed(),jJ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.sin=function(){return this.throwIfDisposed(),XU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.sinh=function(){return this.throwIfDisposed(),qU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.slice=function(n,e){return this.throwIfDisposed(),Kn(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.softmax=function(n){return this.throwIfDisposed(),s3(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.softplus=function(){return this.throwIfDisposed(),W1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.spaceToBatchND=function(n,e){return this.throwIfDisposed(),e3(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.split=function(n,e){return this.throwIfDisposed(),wc(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.sqrt=function(){return this.throwIfDisposed(),ca(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.square=function(){return this.throwIfDisposed(),Ki(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.squaredDifference=function(n){return this.throwIfDisposed(),JU(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.squeeze=function(n){return this.throwIfDisposed(),js(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.stack=function(n,e){this.throwIfDisposed();const t=n instanceof qi?[this,n]:[this,...n];return Mc(t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.step=function(n){return this.throwIfDisposed(),j1(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.stridedSlice=function(n,e,t,r,i,s,o,a){return this.throwIfDisposed(),XJ(this,n,e,t,r,i,s,o,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.sub=function(n){return this.throwIfDisposed(),vn(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.sum=function(n,e){return this.throwIfDisposed(),wn(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.tan=function(){return this.throwIfDisposed(),qJ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.tanh=function(){return this.throwIfDisposed(),mv(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.tile=function(n){return this.throwIfDisposed(),Vu(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.toBool=function(){return this.throwIfDisposed(),nn(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.toFloat=function(){return this.throwIfDisposed(),nn(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.toInt=function(){return this.throwIfDisposed(),nn(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.topk=function(n,e){return this.throwIfDisposed(),JJ(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.transpose=function(n){return this.throwIfDisposed(),Xr(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.unique=function(n){return this.throwIfDisposed(),ZJ(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.unsortedSegmentSum=function(n,e){return this.throwIfDisposed(),ez(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.unstack=function(n){return this.throwIfDisposed(),Qu(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.where=function(n,e){return this.throwIfDisposed(),Ia(n,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_t().prototype.zerosLike=function(){return this.throwIfDisposed(),qr(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class rf extends Error{constructor(e){super(e),Object.setPrototypeOf(this,rf.prototype)}}class Gu extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Gu.prototype)}}let Ge=class iQ extends Error{constructor(e){super(e),Object.setPrototypeOf(this,iQ.prototype)}};class Er extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Er.prototype)}}class $z extends Error{constructor(e){super(e),Object.setPrototypeOf(this,$z.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class sQ{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function vv(n,e){if(Array.isArray(n)){let t=[];for(let r=0;r<e;r++)t=t.concat(n);return t}else{const t=new Array(e);return t.fill(n),t}}function sf(n,e){if(!n)throw new $z(e)}function tG(n,e){let t=0;for(const r of n)r===e&&t++;return t}function Bl(n){return n.length===1?n[0]:n}function Ai(n){return Array.isArray(n)?n:[n]}function Ep(n){const t=n.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return t[0]!=="_"?t:"private"+t}function Ay(n){return n.length<=1||n.indexOf("_")===-1?n:n.replace(/[_]+(\w|$)/g,(e,t)=>t.toUpperCase())}let Nu={};function Lz(n){if(n==null)return null;const e={};return e.className=n.getClassName(),e.config=n.getConfig(),e}function OL(n){if(!(n==null||typeof n!="object"))if(Array.isArray(n))n.forEach(e=>OL(e));else{const e=Object.keys(n);for(const t of e){const r=n[t];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?n[t]=r.value:OL(r))}}}function XE(n,e={},t={},r="object",i=!1){if(typeof n=="string"){const s=n;let o;if(s in t)o=t[s];else if(s in Nu)o=Nu[s];else if(o=e[s],o==null)throw new Ge(`Unknown ${r}: ${n}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}else{const s=n;if(s.className==null||s.config==null)throw new Ge(`${r}: Improper config format: ${JSON.stringify(s)}.
'className' and 'config' must set.`);const o=s.className;let a,l;if(o in t?[a,l]=t[o]:o in Nu?[a,l]=Nu.className:o in e&&([a,l]=e[o]),a==null)throw new Ge(`Unknown ${r}: ${o}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const p of Object.keys(Nu))c[p]=Nu[p];for(const p of Object.keys(t))c[p]=t[p];const u=s.config;u.customObjects=c;const d=Object.assign({},Nu);for(const p of Object.keys(t))Nu[p]=t[p];OL(s.config);const f=l(a,s.config,t,i);return Nu=Object.assign({},d),f}else{const c=Object.assign({},Nu);for(const d of Object.keys(t))Nu[d]=t[d];const u=new a(s.config);return Nu=Object.assign({},c),u}}}function VAe(n,e){return n<e?-1:n>e?1:0}function LT(n,e){return-1*VAe(n,e)}function bg(n){if(n==null)return n;const e=[];for(const t of n)e.indexOf(t)===-1&&e.push(t);return e}function GAe(n){if(n==null)throw new Ge(`Invalid value in obj: ${JSON.stringify(n)}`);for(const e in n)if(n.hasOwnProperty(e))return!1;return!0}function Lv(n,e,t){if(t!=null&&n.indexOf(t)<0)throw new Ge(`${t} is not a valid ${e}.  Valid values are ${n} or null/undefined.`)}function Fz(n,e,t=0,r=1/0){return sf(t>=0),sf(r>=t),Array.isArray(n)&&n.length>=t&&n.length<=r&&n.every(i=>typeof i===e)}function zo(n,e){Array.isArray(n)?(de(n.length>0,()=>`${e} is unexpectedly an empty array.`),n.forEach((t,r)=>zo(t,`element ${r+1} of ${e}`))):de(Number.isInteger(n)&&n>0,()=>`Expected ${e} to be a positive integer, but got ${oQ(n)}.`)}function oQ(n){return n===null?"null":Array.isArray(n)?"["+n.map(e=>oQ(e)).join(",")+"]":typeof n=="string"?`"${n}"`:`${n}`}function WAe(n,e,t){let r=t!=null?t():Ol(),i;return(...o)=>{const a=t!=null?t():Ol();return a-r<e||(r=a,i=n(...o)),i}}function aQ(n){return n==="relu"?"relu":n==="linear"?"linear":n==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let jAe=0;function lQ(){return jAe++}const FT={};function g3(n=""){return n in FT||(FT[n]=0),FT[n]+=1,n+FT[n].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const XAe=["channelsFirst","channelsLast"],qAe=["nearest","bilinear"],KAe=["valid","same","causal"],YAe=["max","avg"],JAe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const hx=new Map;function Qs(n){Lv(XAe,"DataFormat",n)}function ZAe(n){Lv(qAe,"InterpolationFormat",n)}function cu(n){Lv(KAe,"PaddingMode",n)}function cQ(n){Lv(YAe,"PoolMode",n)}const E_=[],nG="/";function Yy(n,e){E_.push(n);try{const t=e();return E_.pop(),t}catch(t){throw E_.pop(),t}}function QAe(){return E_.length===0?"":E_.join(nG)+nG}function uQ(n){if(!hQ(n))throw new Error("Not a valid tensor name: '"+n+"'");return QAe()+n}function dQ(n){if(!hQ(n))throw new Error("Not a valid tensor name: '"+n+"'");hx.has(n)||hx.set(n,0);const e=hx.get(n);if(hx.set(n,hx.get(n)+1),e>0){const t=`${n}_${e}`;return hx.set(t,1),t}else return n}const eTe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function hQ(n){return!!n.match(eTe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function tTe(n){return n===parseInt(n.toString(),10)}function xg(n,e,t){e==null&&(e=0),t==null&&(t=n.length);let r=1;for(let i=e;i<t;++i)r*=n[i];return r}function x1(n){if(n.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let t=0;t<n.length;t++){const r=n[t];r<e&&(e=r)}return e}function kg(n){if(n.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let t=0;t<n.length;t++){const r=n[t];r>e&&(e=r)}return e}function oh(n,e){if(e<n)throw new Ge(`end (${e}) < begin (${n}) is forbidden.`);const t=[];for(let r=n;r<e;++r)t.push(r);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let sB;function Co(){return sB==null&&(sB=VY().epsilon()),sB}function ah(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function vf(n,e){return nn(n,e)}function qE(n,e=-1){const t=n.shape.slice();return e<0&&(e=t.length+e+1),t.splice(e,0,1),Fe(n,t)}function nTe(n,e){return Ye(()=>{if(n.shape.length!==2)throw new Ge(`repeat() expects a rank-2 tensor, but received a rank-${n.shape.length} tensor.`);const t=qE(n,1);return BL(t,[1,e,1])})}function rTe(n){const e=[xg(n.shape)];return Fe(n,e)}function iTe(n){if(n.rank<=1)throw new Ge(`batchFlatten requires a minimum rank of 2. Got rank: ${n.rank}.`);const e=[n.shape[0],xg(n.shape,1)];return Fe(n,e)}function Jy(n,e,t){return Ye(()=>{switch(n.rank){case 1:return r3(n,e,t);case 2:return KU(n,[e,0],[t,n.shape[1]]);case 3:return i3(n,[e,0,0],[t,n.shape[1],n.shape[2]]);case 4:return eC(n,[e,0,0,0],[t,n.shape[1],n.shape[2],n.shape[3]]);case 5:return Kn(n,[e,0,0,0,0],[t,n.shape[1],n.shape[2],n.shape[3],n.shape[4]]);case 6:return Kn(n,[e,0,0,0,0,0],[t,n.shape[1],n.shape[2],n.shape[3],n.shape[4],n.shape[5]]);default:throw new Ge(`sliceAlongFirstAxis() received an unsupported tensor rank: ${n.rank}`)}})}function oB(n,e,t){return Ye(()=>{switch(n.rank){case 1:return r3(n,e,t);case 2:return KU(n,[0,e],[n.shape[0],t]);case 3:return i3(n,[0,0,e],[n.shape[0],n.shape[1],t]);case 4:return eC(n,[0,0,0,e],[n.shape[0],n.shape[1],n.shape[2],t]);default:throw new Ge(`sliceAlongLastAxis() received an unsupported tensor rank: ${n.rank}`)}})}function PT(n,e,t,r){return Ye(()=>{switch(n.rank){case 1:return r3(n,e,t);case 2:switch(r){case 1:return Jy(n,e,t);case 2:return oB(n,e,t);default:throw new Ge(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Jy(n,e,t);case 2:return i3(n,[0,e,0],[n.shape[0],t,n.shape[2]]);case 3:return oB(n,e,t);default:throw new Ge(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Jy(n,e,t);case 2:return eC(n,[0,e,0,0],[n.shape[0],t,n.shape[2],n.shape[3]]);case 3:return eC(n,[0,0,e,0],[n.shape[0],n.shape[1],t,n.shape[3]]);case 4:return oB(n,e,t);default:throw new Ge(`The axis is not within the rank of the tensor ${r}`)}default:throw new Ge(`sliceAlongLastAxis() received an unsupported tensor rank: ${n.rank}`)}})}function Pz(n,e=-1){let t;return e<0&&(t=n[0].rank,t!==0?e=t:e=0),e===n[0].rank&&(e=-1),$s(n,e)}function rG(n,e){switch(n.rank){case 1:return bJ([n,e]);case 2:return xJ([n,e],0);case 3:return SJ([n,e],0);case 4:return wJ([n,e],0);default:throw new Ge(`concatAlongFirstAxis() received an unsupported tensor rank: ${n.rank}`)}}function BL(n,e){if(Array.isArray(e)||(e=[e]),n.rank!==e.length)throw new Ge(`The length of input n (${e.length}) does not match the number of dimensions in input x (${n.rank})`);return Vu(n,e)}function y3(n,e=0,t=1,r,i){return zU(n,e,t,r,i)}function bf(n,e,t,r){if(n.rank<2||e.rank<2)throw new Er(`dot requires both inputs to be rank >= 2 but got x shape = ${n.shape} and y shape = ${e.shape}`);if(e.rank>=3){const i=n.shape.slice(-1)[0],s=e.shape.slice(-2)[0];if(i!==s)throw new Er(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${n.shape} and  y shape = ${e.shape}`)}if(n.rank===2&&e.rank===2)return NL({a:n,b:e,transposeA:!1,transposeB:!1,bias:r?$L(n.rank,r,ah()):null,activation:t});{const i=n.shape.slice(),s=i.pop();n=Fe(n,[-1,s]);const o=e.shape.slice(),a=o.pop(),l=o.pop(),c=[...o,a],u=Array.from({length:e.rank},(g,v)=>v===0?e.rank-2:v<=e.rank-2?v-1:v);e=Fe(Xr(e,u),[l,-1]);const d=[...i,...c];return Fe(NL({a:n,b:e,transposeA:!1,transposeB:!1,bias:r?$L(n.rank,r,ah()):null,activation:t}),d)}}function fQ(n,e,t){return Ye(()=>(Array.isArray(e)?e=ho(e,"int32"):e=nn(e,"int32"),VE(n,e,t)))}function KE(n){return ke(n,n)}function $L(n,e,t){const r=e.shape;if(e.rank!==1&&e.rank!==n)throw new Ge(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${n}`);if(n===5){if(t==="channelsFirst")return r.length===1?Fe(e,[1,r[0],1,1,1]):Fe(e,[1,r[3],r[0],r[1],r[2]]);if(t==="channelsLast")return r.length===1?Fe(e,[1,1,1,1,r[0]]):Fe(e,[1].concat(r))}else if(n===4){if(t==="channelsFirst")return r.length===1?Fe(e,[1,r[0],1,1]):Fe(e,[1,r[2],r[0],r[1]]);if(t==="channelsLast")return r.length===1?Fe(e,[1,1,1,r[0]]):Fe(e,[1].concat(r))}else if(n===3){if(t==="channelsFirst")return r.length===1?Fe(e,[1,r[0],1]):Fe(e,[1,r[1],r[0]]);if(t==="channelsLast")return r.length===1?Fe(e,[1,1,r[0]]):Fe(e,[1].concat(r))}else if(n<3)return e;throw new Ge(`Unsupported input rank by biasAdd: ${e.rank}`)}function mh(n,e,t){return Ye(()=>(t==null&&(t=ah()),Qs(t),$t(n,$L(n.rank,e,t))))}function sTe(n,e=1){if(e!==1)throw new Er(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return UE(n)}function oTe(n){return Ye(()=>mn(n,$t(xo(n),1)))}function pQ(n,e,t,r){return Ye(()=>tZ(n,e,t,r))}function aTe(n){return Ye(()=>{const e=$t(.5,ke(.2,n));return Vl(e,0,1)})}function YE(n,e,t=!1){return t?n():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const lTe=["fanIn","fanOut","fanAvg"],cTe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function uTe(n){Lv(lTe,"FanMode",n)}function dTe(n){Lv(cTe,"Distribution",n)}class rd extends q1{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class mQ extends rd{apply(e,t){return _o(e,t)}}mQ.className="Zeros";Gt(mQ);class Uz extends rd{apply(e,t){return xc(e,t)}}Uz.className="Ones";Gt(Uz);class gQ extends rd{constructor(e){if(super(),typeof e!="object")throw new Ge(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new Ge(`config must have value set but got ${e}`);this.value=e.value}apply(e,t){return Ye(()=>ke($n(this.value),xc(e,t)))}getConfig(){return{value:this.value}}}gQ.className="Constant";Gt(gQ);class yQ extends rd{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return Bv(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}yQ.className="RandomUniform";Gt(yQ);class vQ extends rd{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32",t!=="float32"&&t!=="int32")throw new Er(`randomNormal does not support dType ${t}.`);return y3(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}vQ.className="RandomNormal";Gt(vQ);class bQ extends rd{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32",t!=="float32"&&t!=="int32")throw new Er(`truncatedNormal does not support dType ${t}.`);return QU(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}bQ.className="TruncatedNormal";Gt(bQ);class xQ extends rd{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,t){return Ye(()=>{if(e.length!==2||e[0]!==e[1])throw new Ge("Identity matrix initializer can only be used for 2D square matrices.");return ke(this.gain,BU(e[0]))})}getConfig(){return{gain:this.gain}}}xQ.className="Identity";Gt(xQ);function hTe(n,e="channelsLast"){let t,r;if(Qs(e),n.length===2)t=n[0],r=n[1];else if([3,4,5].indexOf(n.length)!==-1){if(e==="channelsFirst"){const i=xg(n,2);t=n[1]*i,r=n[0]*i}else if(e==="channelsLast"){const i=xg(n,0,n.length-2);t=n[n.length-2]*i,r=n[n.length-1]*i}}else{const i=xg(n);t=Math.sqrt(i),r=Math.sqrt(i)}return[t,r]}class Rc extends rd{constructor(e){if(super(),e.scale<0)throw new Ge(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,uTe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,dTe(this.distribution),this.seed=e.seed}apply(e,t){const r=hTe(e),i=r[0],s=r[1];let o=this.scale;if(this.mode==="fanIn"?o/=Math.max(1,i):this.mode==="fanOut"?o/=Math.max(1,s):o/=Math.max(1,(i+s)/2),this.distribution==="normal"){const a=Math.sqrt(o);if(t=t||"float32",t!=="float32"&&t!=="int32")throw new Er(`${this.getClassName()} does not support dType ${t}.`);return QU(e,0,a,t,this.seed)}else{const a=Math.sqrt(3*o);return Bv(e,-a,a,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Rc.className="VarianceScaling";Gt(Rc);class zz extends Rc{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Rc.className}}zz.className="GlorotUniform";Gt(zz);class Hz extends Rc{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Rc.className}}Hz.className="GlorotNormal";Gt(Hz);class Vz extends Rc{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Rc.className}}Vz.className="HeNormal";Gt(Vz);class Gz extends Rc{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Rc.className}}Gz.className="HeUniform";Gt(Gz);class Wz extends Rc{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Rc.className}}Wz.className="LeCunNormal";Gt(Wz);class jz extends Rc{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Rc.className}}jz.className="LeCunUniform";Gt(jz);class SQ extends rd{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return Ye(()=>{if(e.length<2)throw new Er("Shape must be at least 2D.");if(t!=="int32"&&t!=="float32"&&t!==void 0)throw new TypeError(`Unsupported data type ${t}.`);t=t;const r=xt(e.slice(0,-1)),i=e[e.length-1],s=r*i;s>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${s}) elements: Slowness may result.`);const o=[Math.max(i,r),Math.min(i,r)],a=y3(o,0,1,t,this.seed),l=uZ.qr(a,!1);let c=l[0];const d=l[1].flatten().stridedSlice([0],[Math.min(i,r)*Math.min(i,r)],[Math.min(i,r)+1]);return c=ke(c,d.sign()),r<i&&(c=c.transpose()),ke($n(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}SQ.className="Orthogonal";Gt(SQ);const iG={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function sG(n,e={}){return XE(n,Uu.getMap().classNameMap,e,"initializer")}function ws(n){return Lz(n)}function hs(n){if(typeof n=="string"){const e=n in iG?iG[n]:n;if(e==="GlorotNormal")return new Hz;if(e==="GlorotUniform")return new zz;if(e==="HeNormal")return new Vz;if(e==="HeUniform")return new Gz;if(e==="LeCunNormal")return new Wz;if(e==="LeCunUniform")return new jz;{const t={};return t.className=e,t.config={},sG(t)}}else return n instanceof rd?n:sG(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function LL(n){return Array.isArray(n)&&Array.isArray(n[0])}function XR(n){return n.length===0?[]:Array.isArray(n[0])?n:[n]}function Yn(n){let e;if(Array.isArray(n)){if(n.length!==1)throw new Ge(`Expected Tensor length to be 1; got ${n.length}`);e=n[0]}else e=n;return e}function si(n){if(Array.isArray(n)&&Array.isArray(n[0])){if(n.length===1)return n=n,n[0];throw new Ge(`Expected exactly 1 Shape; got ${n.length}`)}else return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function qR(n){let e=0;for(const t of n)t.shape.length===0?e+=1:e+=t.shape.reduce((r,i)=>r*i);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const oG="Variable";class fTe{constructor(e,t="float32",r=oG,i=!0,s=null){this.dtype=t??"float32",this.shape=e.shape,this.id=lQ(),r=r??oG,this.originalName=uQ(r),this.name=dQ(this.originalName),this.trainable_=i,this.constraint=s,this.val=QJ(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),pTe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function pTe(n,e){if(n.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(n.shape)+" vs. "+JSON.stringify(e.shape))}function FL(n){return n.map(e=>e.read())}function Xz(n){n.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Eo{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class Tf{constructor(e,t,r,i,s,o,a){this.dtype=e,this.shape=t,this.sourceLayer=r,this.inputs=i,this.callArgs=s,this.outputTensorIndex=a,this.id=lQ(),o!=null&&(this.originalName=uQ(o),this.name=dQ(this.originalName)),this.rank=t.length}}let mTe=0;class v3{constructor(e,t){this.callArgs=t,this.id=mTe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)t!=null?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let gTe=0;class Dr extends q1{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=gTe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const r=this.getClassName();t=Ep(r)+"_"+g3(r)}if(this.name=t,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let s=null;e.batchSize!=null&&(s=e.batchSize),r=[s].concat(e.inputShape)}this.batchInputShape=r;let i=e.dtype;i==null&&(i=e.inputDType),i==null&&(i="float32"),this.dtype=i}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(this.inboundNodes.length===0)throw new Gu(`The layer has never been called and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new Ge(`Asked to get ${t} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Bl(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Bl(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new rf(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new rf(`Layer ${this.name} is not connected, no input to return.`);return Bl(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new rf(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new rf(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Bl(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(t=>t.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const t=Ai(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=Ai(this.inputSpec);if(t.length!==r.length)throw new Ge(`Layer ${this.name} expects ${r.length} inputs, but it received ${t.length} input tensors. Input received: ${e}`);for(let i=0;i<t.length;i++){const s=t[i],o=r[i];if(o==null)continue;const a=s.rank;if(o.ndim!=null&&a!==o.ndim)throw new Ge(`Input ${i} is incompatible with layer ${this.name}: expected ndim=${o.ndim}, found ndim=${a}`);if(o.maxNDim!=null&&a>o.maxNDim)throw new Ge(`Input ${i} is incompatible with layer ${this.name}: expected max_ndim=${o.maxNDim}, found ndim=${a}`);if(o.minNDim!=null&&a<o.minNDim)throw new Ge(`Input ${i} is incompatible with layer ${this.name}: expected min_ndim=${o.minNDim}, found ndim=${a}.`);if(o.dtype!=null&&s.dtype!==o.dtype)throw new Ge(`Input ${i} is incompatible with layer ${this.name} : expected dtype=${o.dtype}, found dtype=${s.dtype}.`);if(o.axes){const l=s.shape;for(const c in o.axes){const u=Number(c),d=o.axes[c],f=u>=0?l[u]:l[l.length+u];if(d!=null&&[d,null].indexOf(f)===-1)throw new Ge(`Input ${i} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${d} but got shape ${l}.`)}}if(o.shape!=null)for(let l=0;l<o.shape.length;++l){const c=o.shape[l],u=s.shape[l];if(c!=null&&u!=null&&c!==u)throw new Ge(`Input ${i} is incompatible with layer ${this.name}: expected shape=${o.shape}, found shape=${s.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){this._callHook!=null&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const r=Ai(e),i=bTe(e),s=xTe(e);if(i===s)throw new Ge("Arguments to apply() must be all SymbolicTensors or all Tensors");return Yy(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const o=[];for(const a of Ai(e))o.push(a.shape);this.build(Bl(o)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&s&&(this._refCount=1)}if(this.assertInputCompatibility(e),s){let o=this.call(e,t);this.supportsMasking&&this.setMaskMetadata(e,o);const a=Ai(o),l=[];for(let c of a)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(o=Bl(l),this.activityRegularizer!=null)throw new Er("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}else{const o=yTe(e),a=this.computeOutputShape(o);let l;const c=vTe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?o[0]:o),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((u,d)=>new Tf(c,u,this,Ai(e),t,this.name,d)):l=new Tf(c,a,this,Ai(e),t,this.name),this.addInboundNode(e,l,null,null,o,a,t),this._refCount++,this.activityRegularizer!=null)throw new Er("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach((r,i)=>{r!=null&&e[i]!=null&&e[i]!==r&&(t=!0)}),t&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new rf(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const t of this.inboundNodes){const r=JSON.stringify(t.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const t=this.inboundNodes[0].outputShapes;return Array.isArray(t)&&Array.isArray(t[0])&&t.length===1?t[0]:t}else throw new rf(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Gu(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return qR(this.weights)}build(e){this.built=!0}getWeights(e=!1){return FL(e?this.trainableWeights:this.weights)}setWeights(e){Ye(()=>{const t=this.weights;if(t.length!==e.length)throw new Ge(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${t.length} weights. Provided weights: ${e}...`);if(t.length===0)return;const r=[],i=FL(t);for(let s=0;s<i.length;++s){const o=i[s],a=t[s],l=e[s];if(!Vr(o.shape,l.shape))throw new Ge(`Layer weight shape ${o.shape} not compatible with provided weight shape ${l.shape}`);r.push([a,l])}Xz(r)})}addWeight(e,t,r,i,s,o,a,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new Ge(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(i=l!=null?l():hs("zeros"));const c=i.apply(t,r),u=new fTe(c,r,e,o,a);return c.dispose(),s!=null&&this.addLoss(()=>s.apply(u.read())),o==null&&(o=!0),o?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Ai(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(t!=null)if(Array.isArray(t))t.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return t}setMaskMetadata(e,t,r){if(!this.supportsMasking)return;const i=this.computeMask(e,r),s=Ai(t),o=Ai(i);if(s.length!==o.length)throw new Error(`${this.name} outputs ${s.length} tensors but ${s.length} masks for those tensors`);for(let a=0;a<s.length;a++)s[a].kerasMask=o[a]}addInboundNode(e,t,r,i,s,o,a=null){const l=Ai(e);t=Ai(t),r=Ai(r),i=Ai(i),s=XR(s),o=XR(o);const c=[],u=[],d=[];for(const f of l)c.push(f.sourceLayer),u.push(f.nodeIndex),d.push(f.tensorIndex);new v3({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:d,inputTensors:l,outputTensors:t,inputMasks:r,outputMasks:i,inputShapes:s,outputShapes:o},a);for(let f=0;f<t.length;f++)t[f].sourceLayer=this,t[f].nodeIndex=this.inboundNodes.length-1,t[f].tensorIndex=f}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function yTe(n){n=Ai(n);const e=[];for(const t of n)e.push(t.shape);return Bl(e)}function vTe(n){return"float32"}function wQ(n,e,t){if((e==null||t!=null&&t>0)&&(e=n.sourceLayer,t=n.nodeIndex),e.inboundNodes.length===0)return[n];{const r=e.inboundNodes[t];if(r.inboundLayers.length===0)return r.inputTensors;{const i=[];for(let s=0;s<r.inboundLayers.length;s++){const o=r.inputTensors[s],a=r.inboundLayers[s],l=r.nodeIndices[s],c=wQ(o,a,l);for(const u of c)i.indexOf(u)===-1&&i.push(u)}return i}}}function bTe(n){let e=!0;for(const t of Ai(n))if(!(t instanceof Tf)){e=!1;break}return e}function xTe(n){let e=!0;for(const t of Ai(n))if(t instanceof Tf){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class JE extends Dr{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:g3("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new Ge("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(t==null){if(e.inputShape==null)throw new Ge("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new Ge("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=t,this.dtype=r,this.inputSpec=[{shape:t}];const i=new Tf(this.dtype,this.batchInputShape,this,[],{},this.name);i.nodeIndex=0,i.tensorIndex=0,new v3({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new Ge(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}JE.className="InputLayer";Gt(JE);function STe(n){if(n.batchShape==null&&n.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(n.batchShape!=null&&n.shape!=null)throw new Ge("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=n.batchShape;n.shape!=null&&e==null&&(e=[null].concat(n.shape));let t=n.dtype;return t==null&&(t="float32"),new JE({batchInputShape:e,name:n.name,dtype:t,sparse:n.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function wTe(n,e){if(n.dtype==null||n.dtype===e.dtype)return e;try{return nn(e,n.dtype)}catch{throw new Ge(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${n.name}' (${n.dtype}).`)}}class hg{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof hg)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(e==null)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=wTe(e,t),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new Ge(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Tf){if(this.id2Value[e.id]==null)throw new Ge(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const t=this.name2Id[e];if(t==null)throw new Ge(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[t]}}getMask(e){if(e instanceof Tf){if(this.id2Value[e.id]==null)throw new Ge(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const t=this.name2Id[e];if(t==null)throw new Ge(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[t]}}disposeMasks(){this.id2Mask!=null&&rr(this.id2Mask)}}const KR=new sQ,YR=new sQ;function _Te(n){KR!=null&&KR.setMaxEntries(n),YR!=null&&YR.setMaxEntries(n)}function s_(n,e,t,r){const i=t==null?!1:t.training,s=Array.isArray(n),o=s?n:[n],a=o.map(g=>g.name),l=[],c=e.names();for(const g of a)c.indexOf(g)!==-1?l.push(e.getValue(g)):l.push(null);const u=a.join(",")+"|"+e.names().sort().join(",");let d=KR.get(u),f;if(d==null){const g=CTe(o,e);d=g.sorted,f=g.recipientCounts,KR.put(u,d),YR.put(u,f)}f={},i||Object.assign(f,YR.get(u));const p=new hg(e);for(let g=0;g<d.length;++g){const v=d[g],b=v.sourceLayer;if(b instanceof JE)continue;const x=[],_=[],E=[];let C=!1;for(const N of v.inputs){const I=p.getValue(N),D=p.getMask(N);x.push(I),_.push(D),D!=null&&(C=!0),i||(f[N.name]--,f[N.name]===0&&!e.hasKey(N)&&a.indexOf(N.name)===-1&&!I.isDisposed&&N.sourceLayer.stateful!==!0&&E.push(I))}C&&(t=t||{},t.mask=_[0]);const M=Ai(b.apply(x,t));let R=null;b.supportsMasking&&(R=b.computeMask(x,_));const L=ATe(v),B=Array.isArray(L)?L:[L];for(let N=0;N<B.length;++N){p.hasKey(B[N])||p.add(B[N],M[N],Array.isArray(R)?R[0]:R);const I=a.indexOf(B[N].name);I!==-1&&(l[I]=M[N])}i||rr(E)}return p.disposeMasks(),s?l:l[0]}function CTe(n,e){de(n!=null&&n.length>0,()=>"Expected at least one fetch, got none");let t=[],r={};if(n.length===1){const i=aG(n[0],e);t=i.sorted,r=i.recipientMap}else{const i=new Set;for(const s of n){const{sorted:o,recipientMap:a}=aG(s,e);for(const l of o)i.has(l.name)||(t.push(l),i.add(l.name));for(const l in a)r[l]==null&&(r[l]=new Set),a[l].forEach(c=>r[l].add(c))}}return{sorted:t,recipientCounts:ETe(r)}}function ETe(n){const e={};for(const t in n)e[t]=n[t].size;return e}function aG(n,e){const t=new Set,r=[],i={};for(const a of e.names())t.add(a);const s=[],o=[];for(s.push(n);s.length>0;){const a=s[s.length-1];if(t.has(a.name)){s.pop();continue}const l=o[o.length-1]===s.length-1;if(a.inputs.length===0||l)s.pop(),r.push(a),t.add(a.name),l&&o.pop();else{o.push(s.length-1);for(const c of a.inputs)i[c.name]==null&&(i[c.name]=new Set),i[c.name].add(a.name),!t.has(c.name)&&s.push(c)}}return{sorted:r,recipientMap:i}}function ATe(n){let e;if(n.sourceLayer.inboundNodes.length===1)e=n.sourceLayer.output;else{let t=null;for(let r=0;r<n.sourceLayer.inboundNodes.length;++r)for(const i of n.sourceLayer.inboundNodes[r].outputTensors)if(i.id===n.id){t=r;break}e=n.sourceLayer.getOutputAt(t)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TTe=it();TTe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,_Te);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function qz(n,e){return Ye(()=>ca(wn(ke(n,n),e,!0)))}class ZE extends q1{getConfig(){return{}}}class _Q extends ZE{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Ye(()=>{const t=qz(e,this.axis),r=Vl(t,0,this.maxValue);return ke(e,mn(r,$t(Co(),t)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}_Q.className="MaxNorm";Gt(_Q);class CQ extends ZE{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Ye(()=>mn(e,$t(Co(),qz(e,this.axis))))}getConfig(){return{axis:this.axis}}}CQ.className="UnitNorm";Gt(CQ);class EQ extends ZE{apply(e){return $f(e)}}EQ.className="NonNeg";Gt(EQ);class AQ extends ZE{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Ye(()=>{const t=qz(e,this.axis),r=$t(ke(this.rate,Vl(t,this.minValue,this.maxValue)),ke(1-this.rate,t));return ke(e,mn(r,$t(Co(),t)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}AQ.className="MinMaxNorm";Gt(AQ);const lG={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function To(n){return Lz(n)}function cG(n,e={}){return XE(n,Uu.getMap().classNameMap,e,"constraint")}function Mo(n){if(n==null)return null;if(typeof n=="string"){const t={className:n in lG?lG[n]:n,config:{}};return cG(t)}else return n instanceof ZE?n:cG(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function dy(n){if(n==null)return;const e=[],t=[],r=[];for(const i in n){const s=n[i];if(typeof s!="number"){const o=s;e.push(o.data()),t.push(i),r.push(o)}}if(e.length>0){const i=await Promise.all(e);for(let s=0;s<i.length;++s)n[t[s]]=i[s][0];rr(r)}}function TQ(n){if(n!=null)for(const e in n){const t=n[e];typeof t!="number"&&t.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var uG;(function(n){n[n.SILENT=0]="SILENT",n[n.VERBOSE=1]="VERBOSE"})(uG||(uG={}));const MTe=125;class nC{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class RTe{constructor(e,t=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){t==null&&(t={});for(const r of this.callbacks)await r.onEpochBegin(e,t)}async onEpochEnd(e,t){t==null&&(t={});for(const r of this.callbacks)await r.onEpochEnd(e,t)}async onBatchBegin(e,t){t==null&&(t={});for(const r of this.callbacks)await r.onBatchBegin(e,t)}async onBatchEnd(e,t){t==null&&(t={});for(const r of this.callbacks)await r.onBatchEnd(e,t)}async onTrainBegin(e){e==null&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}}class NTe extends nC{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){t==null&&(t={});const r=t.size==null?0:t.size;this.seen+=r;for(const i in t){const s=t[i];if(typeof s=="number")this.totals.hasOwnProperty(i)||(this.totals[i]=0),this.totals[i]=this.totals[i]+s*r;else{let o;i in this.totals?o=this.totals[i]:this.totals[i]=0;const a=Ye(()=>$t(this.totals[i],ke(s,r)));this.totals[i]=a,o!=null&&o.dispose()}}}async onEpochEnd(e,t){if(t!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?t[r]=this.totals[r]/this.seen:Ye(()=>{const i=ke(mn(1,this.seen),this.totals[r]);t[r]=i,this.totals[r].dispose(),Uo(t[r])}))}}class ITe extends nC{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){t==null&&(t={}),this.epoch.push(e);for(const r in t)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(t[r])}async syncData(){const e=[],t=[],r=[];for(const s in this.history){const o=this.history[s];for(let a=0;a<o.length;++a)if(typeof o[a]!="number"){const l=o[a];e.push(l.data()),t.push(s),r.push(a)}}const i=await Promise.all(e);for(let s=0;s<i.length;++s)this.history[t[s]][r[s]].dispose(),this.history[t[s]][r[s]]=i[s][0]}}class DTe extends nC{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||IZ,this.yieldEvery=t||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=MTe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");cL(this.yieldEvery)&&(this.maybeWait=WAe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,r){const i=[];this.yield!=null&&(await dy(r),i.push(this.yield(e,t,r))),i.push(this.nextFrameFunc()),await Promise.all(i)}async onEpochBegin(e,t){this.currentEpoch=e,this.epochBegin!=null&&(await dy(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const r=[];this.epochEnd!=null&&(await dy(t),r.push(this.epochEnd(e,t))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,t){this.batchBegin!=null&&(await dy(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const r=[];this.batchEnd!=null&&(await dy(t),r.push(this.batchEnd(e,t))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):cL(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await dy(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await dy(e),await this.trainEnd(e))}}function MQ(n,e){return n==null&&(n={}),n instanceof nC?[n]:Array.isArray(n)&&n[0]instanceof nC?n:Ai(n).map(r=>new DTe(r,e))}class ku{constructor(){}static registerCallbackConstructor(e,t){de(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),ku.checkForDuplicate(t),ku.constructors[e]==null&&(ku.constructors[e]=[]),ku.constructors[e].push(t)}static checkForDuplicate(e){for(const t in ku.constructors)ku.constructors[+t].forEach(i=>{if(i===e)throw new Ge("Duplicate callback constructor.")})}static clear(){ku.constructors={}}static createCallbacks(e){const t=[];for(const r in ku.constructors){const i=+r;e>=i&&t.push(...ku.constructors[i])}return t.map(r=>new r)}}ku.constructors={};function RQ(n,e,t,r,i,s,o,a,l){const c=new ITe,u=[new NTe,...ku.createCallbacks(e)];n!=null&&u.push(...n),u.push(c);const d=new RTe(u);return d.setParams({epochs:t,initialEpoch:r,samples:i,steps:s,batchSize:o,verbose:e,doValidation:a,metrics:l}),{callbackList:d,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Lp(n,e={},t=!1){return XE(n,Uu.getMap().classNameMap,e,"layer",t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function JR(n,e){return Ye(()=>{n.dtype!=="float32"&&(n=nn(n,"float32"));const t=wn(KE(n),e,!0),r=G1(t.shape,Co()),i=ca(im(t,r));return mn(n,i)})}function b3(n,e){return Ye(()=>ks(KE(vn(e,n)),-1))}function Kz(n,e){return Ye(()=>ks(xo(vn(e,n)),-1))}function Yz(n,e){return Ye(()=>{const t=vn(n,e),r=Vl(xo(n),Co(),Number.MAX_VALUE),i=xo(mn(t,r));return ke(100,ks(i,-1))})}function kTe(n,e){return Ye(()=>{const t=Vl(e,Co(),Number.MAX_VALUE),r=ou($t(1,t)),i=Vl(n,Co(),Number.MAX_VALUE),s=ou($t(1,i));return ks(KE(vn(r,s)),-1)})}function OTe(n,e){return Ye(()=>{const t=im(0,vn(1,ke(n,e)));return ks(KE(t),-1)})}function BTe(n,e){return Ye(()=>{const t=im(0,vn(1,ke(n,e)));return ks(t,-1)})}function $Te(n,e){return Ye(()=>{const t=wn(ke(n,e),-1),r=qu(ke(vn(1,n),e),-1);return im(0,$t(1,vn(r,t)))})}function LTe(n,e){return Ye(()=>{const t=Math.log(2),r=vn(e,n),i=vn($t(r,W1(ke(-2,r))),t);return ks(i,-1)})}function rC(n,e,t=!1){return Ye(()=>{if(t)e=s3(e);else{const r=wn(e,e.shape.length-1,!0);e=mn(e,r)}return e=Vl(e,Co(),1-Co()),ss(wn(ke(nn(n,"float32"),ou(e)),e.shape.length-1))})}function ZR(n,e,t=!1){return Ye(()=>{const r=nn(HE(rTe(n)),"int32");e=Vl(e,Co(),1-Co());const i=e.shape,s=Fe(PU(r,i[i.length-1]),i);return rC(s,e,t)})}function FTe(n,e){if(!Vr(n.shape,e.shape))throw new Ge(`logits and labels must have the same shape, but got shapes ${JSON.stringify(n.shape)} and ${JSON.stringify(e.shape)}`);return Ye(()=>{const t=$f(e),r=ss(xo(e));return $t(vn(t,ke(e,n)),KD(il(r)))})}function x3(n,e){return Ye(()=>{let t;return t=Vl(e,Co(),1-Co()),t=ou(mn(t,vn(1,t))),ks(FTe(n,t),-1)})}function PTe(n,e){return Ye(()=>{const t=Vl(n,Co(),1),r=Vl(e,Co(),1);return wn(ke(n,ou(mn(t,r))),-1)})}function UTe(n,e){return Ye(()=>{const t=ou($t(Co(),e));return ks(vn(e,ke(n,t)),-1)})}function NQ(n,e){return Ye(()=>{const t=JR(n,-1),r=JR(e,-1),i=ke(t,r);return ss(wn(i,-1))})}const QR={meanSquaredError:b3,meanAbsoluteError:Kz,meanAbsolutePercentageError:Yz,meanSquaredLogarithmicError:kTe,squaredHinge:OTe,hinge:BTe,categoricalHinge:$Te,logcosh:LTe,categoricalCrossentropy:rC,sparseCategoricalCrossentropy:ZR,binaryCrossentropy:x3,kullbackLeiblerDivergence:PTe,poisson:UTe,cosineProximity:NQ};function aB(n){if(typeof n=="string"){if(n in QR)return QR[n];let e=`Unknown loss ${n}`;throw n.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${n}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new Ge(e)}else return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function IQ(n,e){return Ye(()=>{const t=ke(.5,au(e)),r=vf(kc(e,t),n.dtype);return ks(sh(n,r),-1)})}function DQ(n,e){return Ye(()=>vf(sh(g1(n,-1),g1(e,-1)),"float32"))}function zTe(n,e){return Ye(()=>nn(wn(Af(sh(n,1),sh(e,1))),"float32"))}function HTe(n,e){return Ye(()=>nn(wn(Af(sh(n,0),sh(e,1))),"float32"))}function VTe(n,e){return Ye(()=>{const t=zTe(n,e),r=HTe(n,e),i=$t(t,r);return nn(Ia(kc(i,0),mn(t,i),0),"float32")})}function GTe(n,e){return x3(n,e)}function WTe(n,e){return n.rank===e.rank&&(n=js(n,[n.rank-1])),e=g1(e,-1),e.dtype!==n.dtype&&(e=nn(e,n.dtype)),nn(sh(n,e),"float32")}const jTe=b3,XTe=b3,qTe=Kz,KTe=Kz,YTe=Yz,JTe=Yz,kQ=rC,ZTe=NQ,OQ=ZR,eN={binaryAccuracy:IQ,categoricalAccuracy:DQ,precision:VTe,categoricalCrossentropy:kQ,sparseCategoricalCrossentropy:OQ,mse:jTe,MSE:XTe,mae:qTe,MAE:KTe,mape:YTe,MAPE:JTe,cosine:ZTe};function QTe(n){if(typeof n=="string"&&n in eN)return eN[n];if(typeof n!="string"&&n!=null)return n;throw new Ge(`Unknown metric ${n}`)}function UT(n){if(sf(n!==null,`Unknown LossOrMetricFn ${n}`),typeof n=="string")return n;{let e;for(const t of Object.keys(QR))if(QR[t]===n){e=t;break}if(e!==void 0)return e;for(const t of Object.keys(eN))if(eN[t]===n){e=t;break}return e!==void 0?e:n.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function eMe(n){const e={Adagrad:()=>dx.adagrad(.01),Adadelta:()=>dx.adadelta(1,.95,Co()),Adam:()=>dx.adam(.001,.9,.999,Co()),Adamax:()=>dx.adamax(.002,.9,.999,Co(),0),RMSProp:()=>dx.rmsprop(.001,.9,0,Co()),SGD:()=>dx.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,n in e)return e[n]();throw new Ge(`Unknown Optimizer ${n}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const dG=1*1024*1024;function hG(n,e,t=!1){if(n==null||typeof n!="object"||Object.getPrototypeOf(n)!==Object.prototype||!PL(n))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(t){const r=JSON.stringify(n);r.length>dG&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${dG}.`)}}function PL(n){if(n===null)return!0;if(typeof n=="object")if(Object.getPrototypeOf(n)===Object.prototype){const e=Object.keys(n);for(const t of e)if(typeof t!="string"||!PL(n[t]))return!1;return!0}else if(Array.isArray(n)){for(const e of n)if(!PL(e))return!1;return!0}else return!1;else{const e=typeof n;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function tMe(n,e,t,r=console.log){const i=rMe(n),s=["Layer (type)","Input Shape","Output shape","Param #"];i?(e=e||90,t=t||[.32,.61,.89,1]):(e=e||115,t=t||[.24,.48,.7,.8,1]),t[t.length-1]<=1&&(t=t.map(u=>Math.floor(e*u)));let o;if(!i){s.push("Receives inputs"),o=[];for(const u in n.nodesByDepth)o.push(...n.nodesByDepth[u])}r("_".repeat(e)),tN(s,t,r),r("=".repeat(e));const a=n.layers;for(let u=0;u<a.length;++u)i?iMe(a[u],t,r):sMe(a[u],t,o,r),r((u===a.length-1?"=":"_").repeat(e));n.checkTrainableWeightsConsistency();const l=nMe(n),c=qR(n.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(e))}function nMe(n){let e;return n.collectedTrainableWeights!=null?e=qR(n.collectedTrainableWeights):e=qR(n.trainableWeights),e}function rMe(n){let e=!0;const t=[],r=[];for(const i in n.nodesByDepth)t.push(n.nodesByDepth[i]);for(const i of t){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){e=!1;break}r.push(...i)}if(e)for(const i of n.layers){let s=!1;for(const o of i.inboundNodes)if(r.indexOf(o)!==-1)if(s){e=!1;break}else s=!0;if(!e)break}return e}function tN(n,e,t=console.log){let r="";for(let i=0;i<n.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=n[i],r=r.slice(0,e[i]),r+=" ".repeat(e[i]-r.length);t(r)}function iMe(n,e,t){let r,i;try{i=n.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{i="multiple"}try{r=JSON.stringify(n.outputShape)}catch{r="multiple"}const s=n.name,o=n.getClassName(),a=[`${s} (${o})`,i,r,n.countParams().toString()];tN(a,e,t)}function sMe(n,e,t,r){let i,s;try{s=n.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{s="multiple"}try{i=JSON.stringify(n.outputShape)}catch{i="multiple"}const o=[];for(const d of n.inboundNodes)if(!(t!=null&&t.length>0&&t.indexOf(d)===-1))for(let f=0;f<d.inboundLayers.length;++f){const p=d.inboundLayers[f].name,g=d.nodeIndices[f],v=d.tensorIndices[f];o.push(`${p}[${g}][${v}]`)}const a=n.name,l=n.getClassName(),c=o.length===0?"":o[0],u=[`${a} (${l})`,s,i,n.countParams().toString(),c];tN(u,e,r);for(let d=1;d<o.length;++d)tN(["","","","",o[d]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function BQ(n,e,t){return(n==="inboundNodes"||n==="outputLayers"||n==="inputLayers")&&e===0&&typeof t=="string"}function UL(n,e){if(n===null)return null;if(typeof n=="string")return Ay(n);if(typeof n=="number"||typeof n=="boolean")return n;if(n instanceof Array){const t=[],r=n.length;for(let i=0;i<r;++i){const s=n[i];BQ(e,i,s)?t.push(s):t.push(UL(s,e))}return t}else{const t={};for(const r of Object.keys(n)){const i=n[r];if(r==="name"&&typeof i=="string")t[r]=i;else{const s=Ay(r);t[s]=UL(i,s)}}return t}}function zL(n,e){if(n==null)return null;if(typeof n=="string")return Ep(n);if(typeof n=="number"||typeof n=="boolean")return n;if(n instanceof Array){const t=[],r=n.length;for(let i=0;i<r;++i){const s=n[i];BQ(e,i,s)?t.push(s):t.push(zL(s,e))}return t}else{const t={};for(const r of Object.keys(n)){const i=n[r],s=Ep(r);(r==="name"||r==="className")&&typeof i=="string"?t[s]=i:t[s]=zL(i,r)}return t}}/** @license See the LICENSE file. */const $Q="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const oMe=n=>{const e=Object.keys(n);if(e.length===0)return!1;const t=e[0].split("/");return!isNaN(parseInt(t[t.length-1],10))};let aMe=class tf extends Dr{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const _=this.getClassName().toLowerCase();this.name=g3(_)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],bg(this.inputs).length!==this.inputs.length)throw new Ge(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(_=>_.name)}`);bg(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(_=>_.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const _ of this.outputs){const E=_.sourceLayer,C=_.nodeIndex,M=_.tensorIndex;this.outputLayers.push(E),this.outputLayersNodeIndices.push(C),this.outputLayersTensorIndices.push(M)}for(const _ of this.inputs){const E=_.sourceLayer,C=_.nodeIndex,M=_.tensorIndex;sf(C===0,"input layer has >1 nodes"),sf(M===0,"input layer has >1 tensors"),this.inputLayers.push(E),this.inputLayersNodeIndices.push(C),this.inputLayersTensorIndices.push(M)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let _=0;_<this.inputLayers.length;_++){const E=this.inputLayers[_];if(!(E instanceof JE))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${_} (0-based) originates from layer type ${E.getClassName()}.`);this.inputNames.push(E.name),this.feedInputShapes.push(E.batchInputShape),this.feedInputNames.push(E.name)}for(const _ of this.outputLayers)this.outputNames.push(_.name);this.internalInputShapes=this.inputs.map(_=>_.shape),this.internalOutputShapes=this.outputs.map(_=>_.shape);const t={},r={},i={},s={},o={},a=[],l=(_,E,C,M,R,L)=>{(M==null||R==null||L==null)&&(M=_.sourceLayer,R=_.nodeIndex,L=_.tensorIndex);const B=M.inboundNodes[R];if(C.indexOf(B)!==-1)throw new Gu(`The tensor ${_.name} at layer "${M.name}" is part of a cycle.`);if(E.indexOf(B)!==-1)return;this.containerNodes.add(tf.nodeKey(M,R)),M.id in o||(o[M.id]=Object.keys(o).length),C.indexOf(B)===-1&&C.push(B);const N=B.inboundLayers.length;for(let I=0;I<N;I++){const D=B.inputTensors[I],P=B.inboundLayers[I],G=B.nodeIndices[I],W=B.tensorIndices[I];l(D,E,C,P,G,W)}for(E.push(B);C.indexOf(B)>=0;)C.splice(C.indexOf(B),1);a.push(B)},c=[],u=[];for(const _ of this.outputs)l(_,c,u);const d=a.slice().reverse();for(const _ of d){r[_.id]=_,_.id in t||(t[_.id]=0);let E=t[_.id];const C=i[_.outboundLayer.id]==null?0:i[_.outboundLayer.id];E=Math.max(E,C),i[_.outboundLayer.id]=E,s[_.outboundLayer.id]=_.outboundLayer,t[_.id]=E;for(let M=0;M<_.inboundLayers.length;M++){const R=_.inboundLayers[M],L=_.nodeIndices[M],B=R.inboundNodes[L],N=t[B.id]==null?0:t[B.id];t[B.id]=Math.max(E+1,N),r[B.id]=B}}const f={};for(const _ in t){const E=t[_];E in f||(f[E]=[]),f[E].push(r[_])}const p={};for(const _ in i){const E=i[_];E in p||(p[E]=[]),p[E].push(s[_])}let g=Object.keys(p).map(_=>parseInt(_,10)).sort(LT);this.layers=[];for(const _ of g){const E=p[_];E.sort((C,M)=>{const R=o[C.id],L=o[M.id];return R<L?-1:R>L?1:0});for(const C of E)C instanceof tf&&this.internalContainerRefs.push(C),this.layers.push(C)}this.layersByDepth=p,g=Object.keys(f).map(_=>parseInt(_,10)).sort(LT);const v=this.inputs.slice(),b=[];for(const _ of g)for(const E of f[_]){const C=E.outboundLayer;if(C!=null){for(const M of E.inputTensors)if(v.indexOf(M)===-1)throw new Gu(`Graph disconnected: cannot obtain value for tensor ${M} at layer "${C.name}". The following previous layers were accessed without issue: ${b}`);for(const M of E.outputTensors)v.push(M);b.push(C.name)}}this.nodesByDepth=f;const x=this.layers.map(_=>_.name);for(const _ of x){const E=x.filter(C=>C===_).length;if(E!==1)throw new Gu(`The name "${_}" is used ${E} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(x))}this.outboundNodes=[],this.inboundNodes=[],new v3({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(_=>null),outputMasks:this.outputs.map(_=>null),inputShapes:this.inputs.map(_=>_.shape),outputShapes:this.outputs.map(_=>_.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(t=>{t._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new Ge("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const r of this.layers)t.push(...r.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,t=!0){const r={};let i=0;const s=oMe(e);s&&this.parseWeights(e);for(const a of this.layers)for(const[l,c]of a.weights.entries()){const u=s?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[u]!=null)throw new Ge(`Duplicate weight name: ${u}`);r[u]=c,i++}const o=[];for(const a in e){let l=a;if(r[a]==null){const c=a.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)o.push([r[l],e[a]]);else if(t)throw new Ge(`Provided weight data has no target variable: ${a}`);delete r[l]}if(t){const a=[];for(const l in r)a.push(l);if(a.length>0)throw new Ge(`${a.length} of ${i} weights are not set: ${a}`)}Xz(o)}parseWeights(e){for(const t in Object.keys(e)){const r=t.split("/"),i=["vars","layer_checkpoint_dependencies"],s=r.map(o=>o.startsWith("_")?o.slice(1):o).filter(o=>!i.includes(o)).join("/");s!==t&&(e[s]=e[t],delete e[t])}}updatedConfig(){const e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion=`tfjs-layers ${$Q}`,t.backend="TensorFlow.js",t}toJSON(e,t=!0){const r=zL(this.updatedConfig());return t?JSON.stringify(r):r}call(e,t){return Ye(()=>{e=Ai(e);const r=new hg;for(let i=0;i<this.inputs.length;++i)r.add(this.inputs[i],e[i]);return s_(this.outputs,r,t)})}computeMask(e,t){return Ye(()=>{e=Ai(e);let r;return t==null?r=vv(null,e.length):r=Ai(t),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const t=XR(e);if(t.length!==this.inputLayers.length)throw new Ge(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let a=0;a<t.length;a++){const l=this.inputLayers[a],c=t[a],u=l.name+"_0_0";r[u]=c}const i=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(LT);if(i.length>1)for(const a of i){const l=this.nodesByDepth[a];for(const c of l){const u=c.outboundLayer;if(this.inputLayers.map(v=>v.id).indexOf(u.id)!==-1)continue;const d=[];for(let v=0;v<c.inboundLayers.length;v++){const b=c.inboundLayers[v],x=c.nodeIndices[v],_=c.tensorIndices[v],E=`${b.name}_${x}_${_}`,C=r[E];d.push(C)}const f=u.computeOutputShape(Bl(d)),p=XR(f),g=u.inboundNodes.indexOf(c);for(let v=0;v<p.length;v++){const b=`${u.name}_${g}_${v}`;r[b]=p[v]}}}const s=[],o=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],c=this.outputLayersNodeIndices[a],u=this.outputLayersTensorIndices[a],d=`${l.name}_${c}_${u}`;o.push(d)}for(let a=0;a<o.length;a++){const l=o[a];sf(l in r),s.push(r[l])}return Bl(s)}runInternalGraph(e,t){t==null&&(t=vv(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],u=e[l],d=t[l];r[c.id]=[u,d]}const i=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(LT);for(const l of i){const c=this.nodesByDepth[l];for(const u of c){const d=u.outboundLayer,f=u.inputTensors,p=u.outputTensors,g=new Array;for(const v of f)v.id in r&&g.push(r[v.id]);if(g.length===f.length){let v={},b,x,_,E;if(u.callArgs!=null&&(v=u.callArgs),g.length===1){const[C,M]=g[0];v.mask==null&&(v.mask=M),_=Ai(d.call(C,v)),E=Ai(d.computeMask(C,M)),b=[C],x=[M]}else b=g.map(C=>C[0]),x=g.map(C=>C[1]),v.mask==null&&(v.mask=x),_=Ai(d.call(b,v)),E=Ai(d.computeMask(b,x));if(d.activityRegularizer)throw new Er("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let C=0;C<p.length;++C){const M=p[C],R=_[C],L=E[C];r[M.id]=[R,L]}}}}const s=[],o=[],a=[];for(const l of this.outputs){sf(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[c,u]=r[l.id];a.push(c.shape),s.push(c),o.push(u)}return[s,o,a]}buildNodeConversionMap(e){const t={};let r;for(const i of this.layers){r=i instanceof tf?1:0;for(let s=0;s<i.inboundNodes.length;s++){const o=tf.nodeKey(i,s);this.containerNodes.has(o)&&(t[o]=r,r+=1)}}return t}getLayer(e,t){if(t!=null)return this.findLayer(t);if(e==null)throw new Ge("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new Ge(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new Ge(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return Ye(()=>{const e=[];for(const t of this.layers)for(let r=0;r<t.inboundNodes.length;++r){const i=tf.nodeKey(t,r);this.containerNodes.has(i)&&e.push(...t.calculateLosses())}return e})}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),r=[];for(const o of this.layers){const a=o.getClassName(),l=o.getConfig(),c=[];for(let d=0;d<o.inboundNodes.length;d++){const f=o.inboundNodes[d],p=tf.nodeKey(o,d);let g={};if(this.containerNodes.has(p)){if(f.callArgs)try{JSON.stringify(f.callArgs),g=f.callArgs}catch{console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${f.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),g={}}if(f.inboundLayers.length>0){const v=[];for(let b=0;b<f.inboundLayers.length;b++){const x=f.inboundLayers[b],_=f.nodeIndices[b],E=f.tensorIndices[b],C=tf.nodeKey(x,_);let M=t[C];M==null&&(M=0),v.push([x.name,M,E,g])}c.push(v)}}}const u={};u.name=o.name,u.className=a,u.config=l,u.inboundNodes=c,r.push(u)}e.layers=r;const i=[];for(let o=0;o<this.inputLayers.length;o++){const a=this.inputLayers[o],l=this.inputLayersNodeIndices[o],c=tf.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=t[c];u==null&&(u=0);const d=this.inputLayersTensorIndices[o];i.push([a.name,u,d])}e.inputLayers=i;const s=[];for(let o=0;o<this.outputLayers.length;o++){const a=this.outputLayers[o],l=this.outputLayersNodeIndices[o],c=tf.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=t[c];u==null&&(u=0);const d=this.outputLayersTensorIndices[o];s.push([a.name,u,d])}return e.outputLayers=s,e}static fromConfig(e,t,r={},i=!1){const s={},o={};function a(b,x){b.name in o?o[b.name].push(x):o[b.name]=[x]}function l(b,x){const _=[];let E;for(const C of x){const M=C[0],R=C[1],L=C[2];if(E=C[3]==null?{}:C[3],!(M in s)){a(b,x);return}const B=s[M];if(B.inboundNodes.length<=R){a(b,x);return}const N=B.inboundNodes[R];_.push(N.outputTensors[L])}_.length>0&&b.apply(Bl(_),E)}function c(b){const x=b.name,_=Lp(b,t.customObjects!=null?t.customObjects:{});_.setFastWeightInitDuringBuild(i),s[x]=_,b.inboundNodes.forEach(C=>{if(!(C instanceof Array))throw new Ge(`Corrupted configuration, expected array for nodeData: ${C}`);a(_,C)})}const u=t.name,d=t.layers;for(const b of d)c(b);for(;!GAe(o);)for(const b of d){const x=s[b.name];if(x.name in o){const _=o[x.name];delete o[x.name];for(const E of _)l(x,E)}}const f=[],p=[],g=t.inputLayers;for(const b of g){const x=b[0],_=b[1],E=b[2];sf(x in s);const M=s[x].inboundNodes[_].outputTensors;f.push(M[E])}const v=t.outputLayers;for(const b of v){const x=b[0],_=b[1],E=b[2];sf(x in s);const M=s[x].inboundNodes[_].outputTensors;p.push(M[E])}return new e({inputs:f,outputs:p,name:u})}get stateful(){if(this._stateful)throw new Ge("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){Ye(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function lMe(n,e,t){const r=e.length;if(n==null||Array.isArray(n)&&n.length===0)return e.map(i=>null);if(r===1)return Array.isArray(n)&&n.length===1?n:typeof n=="object"&&e[0]in n?[n[e[0]]]:[n];if(Array.isArray(n)){if(n.length!==r)throw new Error(`Provided ${t} is an array of ${n.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return n}else if(typeof n=="object"&&Object.keys(n).length>0&&typeof n[Object.keys(n)[0]]=="object"){const i=[];return e.forEach(s=>{s in n?i.push(n[s]):i.push(null)}),i}else throw new Error(`The model has multiple (${r}) outputs, so ${t} must be either an array with ${r} elements or an object with ${e} keys. Provided ${t} not understood: ${JSON.stringify(n)}`)}function LQ(n,e){return lMe(n,e,"classWeight")}async function FQ(n,e,t,r){if(t!=null){const i=Ye(()=>{if(n.shape.length===1)return $p(n);if(n.shape.length===2){if(n.shape[1]>1)return g1(n,1);if(n.shape[1]===1)return Fe(n,[n.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${n.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${n.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),s=Array.from(await i.data());rr(i);const o=[];return s.forEach(a=>{if(t[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);o.push(t[a])}),ho(o,"float32")}else return null}function cMe(n,e){return ke(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const uMe=32;function PQ(n,e){let t,r;const i=e;t=i.xs,r=i.ys,de(t!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const s=fG("input",n.inputNames,t),o=fG("output",n.outputNames,r),a=s[0].shape[0];de(s.length===n.inputs.length,()=>`LayersModel has ${n.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(n.inputNames)})`),de(o.length===n.outputs.length,()=>`LayersModel has ${n.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(n.outputNames)})`);for(let l=0;l<s.length;l++)de(s[l].shape[0]===a,()=>`Batch size mismatch: input ${n.inputNames[l]} has ${s[l].shape[0]}; expected  ${a} based on input ${n.inputNames[0]}.`);for(let l=0;l<o.length;l++)de(o[l].shape[0]===a,()=>`Batch size mismatch: output ${n.outputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${n.inputNames[0]}.`);return{xs:s,ys:o}}function fG(n,e,t){if(t instanceof qi)return[t];if(Array.isArray(t))return de(t.length===e.length,()=>`Received an array of ${t.length} Tensors, but expected ${e.length} to match the ${n} keys ${e}.`),t;{const r=[];for(const i of e){if(t[i]==null)throw new Ge(`The feature data generated by the dataset lacks the required ${n} key '${i}'.`);r.push(t[i])}return r}}function dMe(n){if(n.length===3)throw new Er("Validation with sample weights is not implemented yet.");return{xs:n[0],ys:n[1]}}async function hMe(n,e,t){const r=t.batchesPerEpoch!=null;if(de(n.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),de(t!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),de(t.epochs!=null&&t.epochs>0&&Number.isInteger(t.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${t.epochs}`),de(!r||t.batchesPerEpoch>0&&Number.isInteger(t.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${t.batchesPerEpoch}`),de(t.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),n.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");n.isTraining=!0;try{const i=t.validationData!=null;let s,o;if(i)if(pG(t.validationData))de(t.validationBatches==null||t.validationBatches>0&&Number.isInteger(t.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${t.validationBatches}`);else{const b=dMe(t.validationData);s=b.xs,o=b.ys}const a=n.makeTrainFunction(),l=n.getDedupedMetricsNames();let c;i?c=l.slice().concat(l.map(b=>"val_"+b)):c=l.slice();const u=MQ(t.callbacks,t.yieldEvery),d=t.verbose==null?1:t.verbose,{callbackList:f,history:p}=RQ(u,d,t.epochs,null,null,fMe(e,t),null,i,c);f.setModel(n),n.history=p,await f.onTrainBegin(),n.stopTraining_=!1;let g=t.initialEpoch==null?0:t.initialEpoch,v=await e.iterator();for(;g<t.epochs;){const b={};await f.onEpochBegin(g);let x=0,_=0;for(r||(v=await e.iterator());!r||x<t.batchesPerEpoch;){const E=await v.next();if(r&&E.done){console.warn(`You provided \`batchesPerEpoch\` as ${t.batchesPerEpoch}, but your dataset iterator ran out of data after ${x} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${t.batchesPerEpoch*t.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(E.value!=null){const{xs:C,ys:M}=PQ(n,E.value),R={};R.batch=_,R.size=C[0].shape[0],await f.onBatchBegin(_,R);const L=[];if(t.classWeight!=null){const I=LQ(t.classWeight,n.outputNames);for(let D=0;D<I.length;++D)L.push(await FQ(M[D],null,I[D]))}const B=C.concat(M).concat(L),N=a(B);rr(B);for(let I=0;I<l.length;++I){const D=l[I],P=N[I];R[D]=P,Uo(P)}await f.onBatchEnd(_,R),TQ(R),_++,x++}if(r?x>=t.batchesPerEpoch:E.done){if(i){let C;pG(t.validationData)?C=Ai(await n.evaluateDataset(t.validationData,{batches:t.validationBatches})):C=Ai(n.evaluate(s,o,{batchSize:t.validationBatchSize==null?uMe:t.validationBatchSize,verbose:0}));for(let M=0;M<n.metricsNames.length;++M)b[`val_${n.metricsNames[M]}`]=C[M]}break}if(n.stopTraining_)break}if(await f.onEpochEnd(g,b),g++,n.stopTraining_)break}return await f.onTrainEnd(),await n.history.syncData(),n.history}finally{n.isTraining=!1}}function fMe(n,e){let t=null;return e.batchesPerEpoch!=null?t=e.batchesPerEpoch:Number.isFinite(n.size)&&(t=n.size),t}function pG(n){return typeof n.iterator=="function"}function pMe(n){return typeof n.next=="function"}async function mMe(n,e,t){t=t||{};const r=t.batches!=null,i=n.testFunction;let s=[];if(t.verbose>0)throw new Er("Verbose mode is not implemented yet.");de(!r||t.batches>0&&Number.isInteger(t.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(t.batches)}`);const o=pMe(e)?e:await e.iterator();let a=0,l=0;for(;!r||l<t.batches;){const c=await o.next();if(s=Ye(()=>{if(c.value){const{xs:u,ys:d}=PQ(n,c.value),f=u.concat(d),p=Ye(()=>i(f));if(rr(f),l===0)for(let v=0;v<p.length;++v)s.push($n(0));const g=f[0].shape[0];for(let v=0;v<p.length;++v){const b=p[v],x=s[v];s[v]=Ye(()=>$t(s[v],ke(g,b))),l>0&&rr(x)}rr(p),a+=g,++l}return s}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${t.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<s.length;++c){const u=s[c];s[c]=mn(s[c],a),rr(u)}return Bl(s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function lB(n){de(n>0&&Number.isInteger(n),()=>`batchSize is required to be a positive integer, but got ${n}`)}function kw(n,e,t){return n==null?[null]:Array.isArray(n)?n.map(r=>Jy(r,e,t-e)):Jy(n,e,t-e)}function HL(n,e){return Ye(()=>n==null?null:Array.isArray(n)?n.map(t=>HL(t,e)):fQ(n,e.dtype==="int32"?e:nn(e,"int32")))}function cB(n,e){const t=[];let r=0,i=null;for(;r<n;)i=r+e,i>=n&&(i=n),t.push([r,i]),r=i;return t}function UQ(n){const e=[];n instanceof qi&&(n=[n]);for(let t=0;t<n.length;++t){const r=n[t];if(r.rank===1)e.push(qE(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Pd(n,e){if(n==null)return;const t=[];if(e instanceof qi)t.push(e.id);else if(Array.isArray(e))e.forEach(i=>t.push(i.id));else if(e!=null)for(const i in e){const s=e[i];t.push(s.id)}const r=[];if(n instanceof qi)t.indexOf(n.id)===-1&&r.push(n);else if(Array.isArray(n))n.forEach(i=>{t.indexOf(i.id)===-1&&r.push(i)});else if(n!=null)for(const i in n){const s=n[i];t.indexOf(s.id)===-1&&r.push(s)}r.forEach(i=>{i.isDisposed||i.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gMe(n){return n instanceof qi}function VL(n){return Array.isArray(n)}function mG(n){return!gMe(n)&&!VL(n)}function gG(n,e,t,r=!0,i=""){if(e==null||e.length===0){if(n!=null){let o=!1;if(VL(n)&&n.length>0)o=!0;else if(mG(n)){for(const a in n)if(n.hasOwnProperty(a)){o=!0;break}}else o=!0;if(o)throw new Ge(`Error when checking model ${i} expected no data, but got ${n}`)}return[]}if(n==null)return e.map(o=>null);let s;if(mG(n)){n=n,s=[];for(const o of e){if(n[o]==null)throw new Ge(`No data provided for "${o}". Need data for each key in: ${e}`);s.push(n[o])}}else if(VL(n)){if(n=n,n.length!==e.length)throw new Ge(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${n}`);s=n}else{if(n=n,e.length>1)throw new Ge(`The model ${i} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${n.shape}`);s=[n]}if(s=UQ(s),t!=null)for(let o=0;o<e.length;++o){if(t[o]==null)continue;const a=s[o];if(a.shape.length!==t[o].length)throw new Ge(`Error when checking ${i}: expected ${e[o]} to have ${t[o].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<t[o].length;++l){if(l===0&&!r)continue;const c=a.shape[l],u=t[o][l];if(u!=null&&u>=0&&c!==u)throw new Ge(`${i} expected a batch of elements where each example has shape [${t[o].slice(1,t[o].length)}] (i.e.,tensor shape [*,${t[o].slice(1,t[o].length)}]) but the ${i} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return s}function yMe(n,e,t){const r=bg(n.map(s=>s.shape[0]));r.sort();const i=bg(e.map(s=>s.shape[0]));if(i.sort(),r.length>1)throw new Ge(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(n.map(s=>s.shape))}`);if(i.length>1)throw new Ge(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(s=>s.shape))}`);if(r.length>0&&i.length>0&&!Vr(r,i))throw new Ge(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}function vMe(n,e,t){const r=[b3,x3,rC];for(let i=0;i<n.length;++i){const s=n[i],o=e[i],a=t[i];if(o!=null){if(o===rC&&s.shape[s.shape.length-1]===1)throw new Ge(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(o)!==-1){const l=s.shape.slice(1),c=a.slice(1);for(let u=0;u<l.length;++u){const d=l[u],f=c[u];if(f!=null&&d!==f)throw new Ge(`A target Tensor with shape ${s.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function yG(n,e,t,r=!0,i=""){let s;if(Array.isArray(n)){if(n.length!==e.length)throw new Ge(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${n.length} Tensors(s).`);s=n}else{if(e.length>1)throw new Ge(`The model expects ${e.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(n.shape)}.`);s=[n]}if(t!=null)for(let o=0;o<e.length;++o){if(t[o]==null)continue;const a=s[o];if(a.shape.length!==t[o].length)throw new Ge(`Error when checking ${i}: expected ${e[o]} to have ${t[o].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<t[o].length;++l){if(l===0&&!r)continue;const c=a.shape[l],u=t[o][l];if(u!=null&&u!==c)throw new Ge(`Error when checking ${i}: expected ${e[o]} to have shape ${JSON.stringify(t[o])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function bMe(n,e){if(n==null||Array.isArray(n)&&n.length===0)return e.map(r=>[]);let t;if(typeof n=="string"||typeof n=="function")t=[n];else if(Array.isArray(n)||typeof n=="object")t=n;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${n}`);if(Array.isArray(t))return e.map(r=>t);{const r=[];for(const i of e){let s=t.hasOwnProperty(i)?t[i]:[];Array.isArray(s)||(s=[s]),r.push(s)}return r}}const xMe="layers-model";class Gx extends aMe{constructor(e){super(e),this.isTraining=!1}summary(e,t,r=console.log){if(!this.built)throw new Ge("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");tMe(this,e,t,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=eMe(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Qg))throw new Ge("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const o in e.loss)if(this.outputNames.indexOf(o)===-1)throw new Ge(`Unknown entry in loss dictionary: "${o}". Only expected the following keys: ${this.outputNames}`);for(const o of this.outputNames)e.loss[o]==null&&console.warn(`Output "${o}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${o} during training`),t.push(aB(e.loss[o]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new Ge(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);t=e.loss.map(a=>aB(a))}else{const o=aB(e.loss);this.outputs.forEach(a=>{t.push(o)})}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const a=this.internalOutputShapes[o],l=this.outputNames[o];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[o])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Yy("loss",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=this.lossFunctions[o];this.outputs.length>1&&(this.metricsTensors.push([a,o]),this.metricsNames.push(this.outputNames[o]+"_loss"))}});const i=bMe(e.metrics,this.outputNames),s=(o,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[o]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,o])};Yy("metric",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=i[o];(c=>{let d,f,p;for(const g of c){if(typeof g=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(g)!==-1){const b=this.internalOutputShapes[o];b[b.length-1]===1||this.lossFunctions[o]===x3?["accuracy","acc"].indexOf(g)!==-1?f=IQ:["crossentropy","ce"].indexOf(g)!==-1&&(f=GTe):this.lossFunctions[o]===ZR?["accuracy","acc"].indexOf(g)!==-1?f=WTe:["crossentropy","ce"].indexOf(g)!==-1&&(f=OQ):["accuracy","acc"].indexOf(g)!==-1?f=DQ:["crossentropy","ce"].indexOf(g)!==-1&&(f=kQ);let x;["accuracy","acc"].indexOf(g)!==-1?x="acc":["crossentropy","ce"].indexOf(g)!==-1&&(x="ce"),p=f,d=""+x}else p=QTe(g),d=""+UT(g);let v;Yy(d,()=>{v=p}),s(o,d,v)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t,r={}){const i=r.batchSize==null?32:r.batchSize;lB(i);const o=this.standardizeUserDataXY(e,t,!0,i);try{const a=o[0].concat(o[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,a,i,r.verbose,r.steps);return Bl(c)}finally{Pd(o[0],e),Pd(o[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),mMe(this,e,t)}checkNumSamples(e,t,r,i="steps"){let s;if(r!=null){if(s=null,t!=null)throw new Ge(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${t}`)}else if(e!=null)Array.isArray(e)?s=e[0].shape[0]:s=e.shape[0];else throw new Ge(`Either the input data should have a defined shape, or ${i} shoud be specified.`);return s}execute(e,t){if(Array.isArray(t)&&t.length===0)throw new Ge("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(t),i=r?t:[t],s=this.retrieveSymbolicTensors(i),o=new hg;if(e instanceof qi&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new Ge(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)o.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new Ge(`No value is provided for the model's input ${l.name}`);o.add(l,c)}const a=s_(s,o);return r?a:a[0]}retrieveSymbolicTensors(e){const t=vv(null,e.length);let r=e.length;for(const i of this.layers){const s=Array.isArray(i.output)?i.output:[i.output],o=s.map(a=>a.name);for(let a=0;a<e.length;++a){const l=o.indexOf(e[a]);if(l!==-1&&(t[a]=s[l],r--),r===0)break}if(r===0)break}if(r>0){const i=[];throw t.forEach((s,o)=>{s==null&&i.push(e[o])}),new Ge(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(i)}`)}return t}predictLoop(e,t=32,r=!1){return Ye(()=>{const i=this.checkNumSamples(e);if(r)throw new Er("Verbose predictLoop() is not implemented yet.");const s=cB(i,t),o=this.outputs.map(a=>[]);for(let a=0;a<s.length;++a)Ye(()=>{const c=s[a][0],u=s[a][1],d=kw(e,c,u),f=[];if(Array.isArray(d))for(let g=0;g<d.length;++g)f.push({key:this.inputs[g],value:d[g]});else f.push({key:this.inputs[0],value:d});const p=new hg(f);return s_(this.outputs,p)}).forEach((c,u)=>o[u].push(c));return Bl(o.map(a=>$s(a,0)))})}predict(e,t={}){const r=UQ(e);yG(r,this.inputNames,this.feedInputShapes,!1);try{const i=t.batchSize==null?32:t.batchSize;return lB(i),this.predictLoop(r,i)}finally{Pd(r,e)}}predictOnBatch(e){yG(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t,r=!0,i){if(this.optimizer_==null)throw new Gu("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const s=[];for(let o=0;o<this.feedOutputShapes.length;++o){const a=this.feedOutputShapes[o];this.feedLossFns[o]===ZR?s.push(a.slice(0,a.length-1).concat([1])):s.push(a)}if(e=gG(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=gG(t,this.feedOutputNames,s,!1,"target"),yMe(e,t),vMe(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&i!=null&&i>0&&e[0].shape[0]%i!==0)throw new Ge(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${i}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,r,i,s=!0,o){const[a,l]=this.standardizeUserDataXY(e,t,s,o);if(r!=null)throw new Error("sample weight is not supported yet.");let c=null;if(i!=null){const u=LQ(i,this.outputNames);c=[];for(let d=0;d<u.length;++d)c.push(await FQ(l[d],null,u[d]))}return[a,l,c]}testLoop(e,t,r,i=0,s){return Ye(()=>{const o=this.checkNumSamples(t,r,s,"steps"),a=[];if(i>0)throw new Er("Verbose mode is not implemented yet.");if(s!=null)throw new Er("steps mode in testLoop() is not implemented yet");{const l=cB(o,r),c=ho(oh(0,o));for(let u=0;u<l.length;++u){const d=l[u][0],f=l[u][1],p=Jy(c,d,f-d),g=HL(t,p),v=e(g);if(u===0)for(let b=0;b<v.length;++b)a.push($n(0));for(let b=0;b<v.length;++b){const x=v[b];a[b]=$t(a[b],ke(f-d,x))}}for(let u=0;u<a.length;++u)a[u]=mn(a[u],o)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let r=0;r<e.length;++r){const i=e[r];let s=i;if(tG(e,i)>1){const o=tG(e.slice(0,r),i);s+=`_${o}`}t.push(s)}return t}makeTrainFunction(){return e=>{const t=[],r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),o=[],a=()=>{const d=[];for(let v=0;v<this.inputs.length;++v)d.push({key:this.inputs[v],value:r[v]});const f=new hg(d),p=s_(this.outputs,f,{training:!0});let g;for(let v=0;v<this.lossFunctions.length;++v){const b=this.lossFunctions[v];let x=b(i[v],p[v]);s[v]!=null&&(x=cMe(x,s[v]));const _=ks(x);t.push(_),v===0?g=x:g=$t(g,x)}for(let v=0;v<this.metricsTensors.length;++v){let b;if(this.outputs.length>1&&v<this.outputs.length)b=t[v];else{const x=this.metricsTensors[v][0],_=this.metricsTensors[v][1];b=ks(x(i[_],p[_]))}Uo(b),o.push(b)}return g=ks(g),this.calculateLosses().forEach(v=>{g=$t(g,v)}),g},l=this.collectedTrainableWeights.map(d=>d.read());return[this.optimizer_.minimize(a,!0,l)].concat(o)}}makeTestFunction(){this.testFunction=e=>Ye(()=>{const t=[];let r;const i=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let c=0;c<this.inputs.length;++c)o.push({key:this.inputs[c],value:i[c]});const a=new hg(o),l=s_(this.outputs,a);for(let c=0;c<this.lossFunctions.length;++c){const u=this.lossFunctions[c],d=ks(u(s[c],l[c]));c===0?r=d:r=$t(r,d),t.push(r)}for(let c=0;c<this.metricsTensors.length;++c){const u=this.metricsTensors[c][0],d=this.metricsTensors[c][1],f=ks(u(s[d],l[d]));t.push(f)}return t})}async fit(e,t,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let i,s,o,a,l,c,u,d,f;try{const p=r.batchSize==null?32:r.batchSize;lB(p);const v=await this.standardizeUserData(e,t,r.sampleWeight,r.classWeight,!1,p);i=v[0],s=v[1],f=v[2];let b=!1,x;if(r.validationData!=null&&r.validationData.length>0){if(b=!0,r.validationData.length===2)l=r.validationData[0],c=r.validationData[1];else throw r.validationData.length===3?new Er("validationData including sample weights is not supported yet."):new Ge(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const I=await this.standardizeUserData(l,c,null,null,!0,p);u=I[0],d=I[1],x=u.concat(d)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){b=!0;const N=Math.floor(i[0].shape[0]*(1-r.validationSplit)),I=i[0].shape[0];u=kw(i,N,I),o=i,i=kw(i,0,N),d=kw(s,N,I),a=s,s=kw(s,0,N),x=u.concat(d)}else r.validationSteps!=null&&(b=!0);const _=i.concat(s).concat(f);this.checkTrainableWeightsConsistency();const E=this.makeTrainFunction(),C=this.getDedupedMetricsNames();let M,R;b?(this.makeTestFunction(),M=this.testFunction,R=C.slice().concat(C.map(N=>"val_"+N))):(M=null,x=[],R=C.slice());const L=MQ(r.callbacks,r.yieldEvery);return await this.fitLoop(E,_,C,p,r.epochs,r.verbose,L,M,x,r.shuffle,R,r.initialEpoch,null,null)}finally{this.isTraining=!1,Pd(i,e),Pd(s,t),Pd(o,e),Pd(a,t),Pd(u,l),Pd(d,c),f!=null&&rr(f)}}async fitLoop(e,t,r,i,s,o,a,l,c,u,d,f,p,g){i==null&&(i=32),s==null&&(s=1),u==null&&(u=!0),f==null&&(f=0);let v=!1;if(l!=null&&c!=null&&(v=!0),g!=null&&(v=!0,p==null))throw new Ge("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const b=this.checkNumSamples(t,i,p,"steps_per_epoch");let x;b!=null&&(x=oh(0,b)),o==null&&(o=1);const{callbackList:_,history:E}=RQ(a,o,s,f,b,p,i,v,d);_.setModel(this),this.history=E,await _.onTrainBegin(),this.stopTraining_=!1;for(let C=f;C<s;++C){await _.onEpochBegin(C);const M={};if(p!=null)throw new Er("stepsPerEpoch mode is not implemented yet.");{if(u==="batch")throw new Er("batch shuffling is not implemneted yet");u&&ave(x);const R=ho(x),L=cB(b,i);for(let B=0;B<L.length;++B){const N={};if(await _.onBatchBegin(B,N),Ye(()=>{const I=L[B][0],D=L[B][1],P=Jy(R,I,D-I);N.batch=B,N.size=D-I;const G=HL(t,P),W=e(G);for(let q=0;q<r.length;++q){const z=r[q],J=W[q];N[z]=J,Uo(J)}if(B===L.length-1&&v){const q=this.testLoop(l,c,i);for(let z=0;z<r.length;++z){const J=r[z],Q=q[z];Uo(Q),M["val_"+J]=Q}}}),await _.onBatchEnd(B,N),TQ(N),this.stopTraining_)break}R.dispose()}if(await _.onEpochEnd(C,M),this.stopTraining_)break}return await _.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return hMe(this,e,t)}async trainOnBatch(e,t){const r=await this.standardizeUserData(e,t),i=r[0],s=r[1],a=this.makeTrainFunction()(i.concat(s)),l=[];for(const c of a){const u=await c.data();l.push(u[0])}return rr(a),Pd(r[0],e),Pd(r[1],t),Bl(l)}getNamedWeights(e){const t=[],r=e!=null&&e.trainableOnly,i=r?this.trainableWeights:this.weights,s=this.getWeights(r);for(let o=0;o<i.length;++o)r&&!i[o].trainable||t.push({name:i[o].originalName,tensor:s[o]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const t=N8().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-N8().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Ep(this.loss);else if(Array.isArray(this.loss)){for(const t of this.loss)if(typeof t!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(t=>Ep(t))}else{const t=Object.keys(this.loss);e={};const r=this.loss;for(const i of t)if(typeof r[i]=="string")e[i]=Ep(r[i]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Ep(UT(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Ep(UT(e)));{const e={};for(const t in this.metrics)e[t]=Ep(UT(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const t=UL(e.optimizer_config),r=Lp(t);let i;if(typeof e.loss=="string")i=Ay(e.loss);else if(Array.isArray(e.loss))i=e.loss.map(o=>Ay(o));else if(e.loss!=null){i={};for(const o in e.loss)i[o]=Ay(e.loss[o])}let s;if(Array.isArray(e.metrics))s=e.metrics.map(o=>Ay(o));else if(e.metrics!=null){s={};for(const o in e.metrics)s[o]=Ay(e.metrics[o])}this.compile({loss:i,metrics:s,optimizer:r})}async save(e,t){if(typeof e=="string"){const c=YY(e);if(c.length===0)throw new Ge(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new Ge(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new Ge("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await _L(this.getNamedWeights(t)),a={modelTopology:this.toJSON(null,!1),format:xMe,generatedBy:`TensorFlow.js tfjs-layers v${$Q}`,convertedBy:null};if((t==null?!1:t.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:u,specs:d}=await _L(await this.optimizer.getWeights(),c);r.specs.push(...d),r.data=XY([r.data,u])}return this.userDefinedMetadata!=null&&(hG(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=r.data,a.weightSpecs=r.specs,e.save(a)}setUserDefinedMetadata(e){hG(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}Gx.className="Model";Gt(Gx);class zQ extends Gx{}zQ.className="Functional";Gt(zQ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class iC extends Gx{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:g3("sequential_"),e.layers!=null)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new Ge(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const t=e instanceof iC||e instanceof Gx;let r;if(t){if(r=e,r.outputs.length!==1)throw new Ge("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new Ge("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new Ge("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const i=STe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(i)}if(t)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new Ge(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new Ge("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=wQ(this.outputs[0])}this.inboundNodes=[],new v3({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:vv(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{const i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return this.model==null&&this.build(),this.model.call(e,t)}build(e){if(si(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Gx({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,r=console.log){this.built||this.build(),super.summary(e,t,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,t,r={}){if(!this.built)throw new Gu("The model needs to be compiled before being used.");return this.model.evaluate(e,t,r)}async evaluateDataset(e,t){if(!this.built)throw new Gu("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return this.model==null&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,r={}){if(!this.built)throw new Gu("The model needs to be compiled before being used.");return this.model.fit(e,t,r)}async fitDataset(e,t){if(!this.built)throw new Gu("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t,r={},i=!1){let s,o={};if(t instanceof Array){if(t[0].className==null||t[0].className==="Merge")throw new Ge("Legacy serialization format not supported yet.");s=t}else de(t.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=t.layers,delete t.layers,o=t;const a=new e(o);if(!(a instanceof iC))throw new Er(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of s){const u=Lp(l,void 0,i);i&&u.setFastWeightInitDuringBuild(!0),a.add(u)}return a}set stopTraining(e){if(this.model==null)throw new Ge("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new Ge("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const r={};r.className=t.getClassName(),r.config=t.getConfig(),e.push(r)}return{name:this.name,layers:e}}}iC.className="Sequential";Gt(iC);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Ba=class extends q1{getConfig(){return{}}};class HQ extends Ba{apply(e,t=1){return sTe(e,t)}}HQ.className="elu";Gt(HQ);class VQ extends Ba{apply(e){return WU(e)}}VQ.className="selu";Gt(VQ);class GQ extends Ba{apply(e){return $f(e)}}GQ.className="relu";Gt(GQ);class WQ extends Ba{apply(e){return Ye(()=>gv(6,$f(e)))}}WQ.className="relu6";Gt(WQ);class jQ extends Ba{apply(e){return e}}jQ.className="linear";Gt(jQ);class XQ extends Ba{apply(e){return Qd(e)}}XQ.className="sigmoid";Gt(XQ);class qQ extends Ba{apply(e){return aTe(e)}}qQ.className="hardSigmoid";Gt(qQ);class KQ extends Ba{apply(e){return W1(e)}}KQ.className="softplus";Gt(KQ);class YQ extends Ba{apply(e){return oTe(e)}}YQ.className="softsign";Gt(YQ);class JQ extends Ba{apply(e){return mv(e)}}JQ.className="tanh";Gt(JQ);let Jz=class extends Ba{apply(e,t=-1){return s3(e,t)}};Jz.className="softmax";Gt(Jz);class ZQ extends Ba{apply(e,t=-1){return $U(e,t)}}ZQ.className="logSoftmax";Gt(ZQ);class QQ extends Ba{apply(e){return Ye(()=>Ye(()=>{const t=Math.sqrt(2),r=ke(.5,$t(1,kU(mn(e,t))));return ke(e,r)}))}}QQ.className="gelu";Gt(QQ);class eee extends Ba{apply(e){return Ye(()=>ke(.5,ke(e,$t(1,mv(ke(ca(mn(2,Math.PI)),$t(e,ke(.044715,Gp(e,3)))))))))}}eee.className="gelu_new";Gt(eee);class tee extends Ba{apply(e){return Ye(()=>ke(e,mv(W1(e))))}}tee.className="mish";Gt(tee);class nee extends Ba{apply(e,t=1){return Ye(()=>ke(Qd(ke(e,t)),e))}}nee.className="swish";Gt(nee);function Og(n){return n.getClassName()}function uB(n,e={}){return XE(n,Uu.getMap().classNameMap,e,"activation")}function Bg(n){if(n==null){const e={};return e.className="linear",e.config={},uB(e)}if(typeof n=="string"){const e={};return e.className=n,e.config={},uB(e)}else return n instanceof Ba?n:uB(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function SMe(n){if(n!=null&&typeof n!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${n}`)}class ree extends q1{}class iee extends ree{constructor(e){super(),SMe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return Ye(()=>{let t=_o([1]);return this.hasL1&&(t=$t(t,wn(ke(this.l1,xo(e))))),this.hasL2&&(t=$t(t,wn(ke(this.l2,KE(e))))),Fe(t,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}iee.className="L1L2";Gt(iee);const vG={l1l2:"L1L2"};function Yi(n){return Lz(n)}function bG(n,e={}){return XE(n,Uu.getMap().classNameMap,e,"regularizer")}function fs(n){if(n==null)return null;if(typeof n=="string"){const t={className:n in vG?vG[n]:n,config:{}};return bG(t)}else return n instanceof ree?n:bG(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class see extends Dr{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,t){e=Yn(e);let r=$f(e);return this.maxValue!=null&&(r=Vl(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}see.className="ReLU";Gt(see);class oee extends Dr{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,t){const r=Yn(e);return qD(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}oee.className="LeakyReLU";Gt(oee);class aee extends Dr{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=hs(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=fs(e.alphaRegularizer),this.alphaConstraint=Mo(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new Ge(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=si(e);const t=e.slice(1);if(this.sharedAxes!=null)for(const i of this.sharedAxes)t[i-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let i=1;i<e.length;++i)r[i]=e[i];this.inputSpec=[new Eo({ndim:e.length,axes:r})],this.built=!0}call(e,t){return e=Yn(e),t3(e,this.alpha.read())}getConfig(){const e={alphaInitializer:ws(this.alphaInitializer),alphaRegularizer:Yi(this.alphaRegularizer),alphaConstraint:To(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}aee.className="PReLU";Gt(aee);let lee=class extends Dr{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new Er(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,t){const r=Yn(e);return UE(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};lee.className="ELU";Gt(lee);class cee extends Dr{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,t){const r=Yn(e);return ke(r,nn(kc(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}cee.className="ThresholdedReLU";Gt(cee);class uee extends Dr{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new Jz().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,t){return Ye(()=>{let r=Yn(e);const i=t.mask;if(i!=null){const s=ke(vn(xc(r.shape),nn(i,r.dtype)),$n(-1e9));r=$t(r,s)}return this.axis instanceof Array?this.axis.length>1?il(vn(r,YD(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}uee.className="Softmax";Gt(uee);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Wx(n,e,t){if(typeof n=="number")return vv(n,e);if(n.length!==e)throw new Ge(`The ${t} argument must be an integer or tuple of ${e} integers. Received: ${n.length} elements.`);for(let r=0;r<e;++r){const i=n[r];if(!tTe(i))throw new Ge(`The ${t} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(n)} including a non-integer number ${i}`)}return n}function eh(n,e,t,r,i=1){if(n==null)return n;const s=e+(e-1)*(i-1);let o;return t==="same"?o=n:o=n-s+1,Math.floor((o+r-1)/r)}function of(n,e,t,r){if(n==null)return null;if(r==="valid")n=n*e+kg([t-e,0]);else if(r==="same")n=n*e;else throw new Ge(`Unsupport padding mode: ${r}.`);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Zz(n,e){return Ye(()=>(Qs(e),e==="channelsFirst"?Xr(n,[0,2,3,1]):n))}function dee(n,e){return Ye(()=>(Qs(e),e==="channelsFirst"?Xr(n,[0,2,3,4,1]):n))}function wMe(n,e,t,r=1,i="valid",s,o=1){return Ye(()=>{if(s==null&&(s=ah()),Qs(s),n.shape.length!==3)throw new Ge(`The input of a conv1dWithBias operation should be 3, but is ${n.shape.length} instead.`);if(e.shape.length!==3)throw new Ge(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(t!=null&&t.shape.length!==1)throw new Ge(`The bias for a conv1dWithBias operation should be 1, but is ${t.shape.length} instead`);if(s==="channelsFirst"&&(n=Xr(n,[0,2,1])),i==="causal")throw new Er("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=MU(n,e,r,i==="same"?"same":"valid","NWC",o);return t!=null&&(a=mh(a,t)),a})}function xG(n,e,t,r=[1,1],i="valid",s,o,a=null){return Ye(()=>{if(s==null&&(s=ah()),Qs(s),n.rank!==3&&n.rank!==4)throw new Ge(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${n.rank}.`);if(e.rank!==3&&e.rank!==4)throw new Ge(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${n.rank}.`);let l=Zz(n,s);if(i==="causal")throw new Er("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=rZ({x:l,filter:e,strides:r,pad:i==="same"?"same":"valid",dilations:o,dataFormat:"NHWC",bias:t,activation:a}),s==="channelsFirst"&&(l=Xr(l,[0,3,1,2])),l})}function _Me(n,e,t,r=[1,1,1],i="valid",s,o){return Ye(()=>{if(s==null&&(s=ah()),Qs(s),n.rank!==4&&n.rank!==5)throw new Ge(`conv3dWithBias expects input to be of rank 4 or 5, but received ${n.rank}.`);if(e.rank!==4&&e.rank!==5)throw new Ge(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${n.rank}.`);let a=dee(n,s);if(i==="causal")throw new Er("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=_J(a,e,r,i==="same"?"same":"valid","NDHWC",o),t!=null&&(a=mh(a,t)),s==="channelsFirst"&&(a=Xr(a,[0,4,1,2,3])),a})}class S3 extends Dr{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",S3.verifyArgs(t),this.rank=e,zo(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Er(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Wx(t.kernelSize,e,"kernelSize"),this.strides=Wx(t.strides==null?1:t.strides,e,"strides"),this.padding=t.padding==null?"valid":t.padding,cu(this.padding),this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Qs(this.dataFormat),this.activation=Bg(t.activation),this.useBias=t.useBias==null?!0:t.useBias,this.biasInitializer=hs(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Mo(t.biasConstraint),this.biasRegularizer=fs(t.biasRegularizer),this.activityRegularizer=fs(t.activityRegularizer),this.dilationRate=Wx(t.dilationRate==null?1:t.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new Ge(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new Ge(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new Ge(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(sf("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!Fz(e.kernelSize,"number",1,3))throw new Ge(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Og(this.activation),useBias:this.useBias,biasInitializer:ws(this.biasInitializer),biasRegularizer:Yi(this.biasRegularizer),activityRegularizer:Yi(this.activityRegularizer),biasConstraint:To(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}class K1 extends S3{constructor(e,t){super(e,t),this.kernel=null,K1.verifyArgs(t),this.filters=t.filters,zo(this.filters,"filters"),this.kernelInitializer=hs(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Mo(t.kernelConstraint),this.kernelRegularizer=fs(t.kernelRegularizer)}build(e){e=si(e);const t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new Ge(`The channel dimension of the input should be defined. Found ${e[t]}`);const r=e[t],i=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:r}}],this.built=!0}call(e,t){return Ye(()=>{e=Yn(e);let r;const i=this.bias==null?null:this.bias.read(),s=aQ(this.activation.getClassName());if(s!=null&&this.rank===2)r=xG(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,s);else{if(this.rank===1)r=wMe(e,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=xG(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=_Me(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Er("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=si(e);const t=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let s=0;s<r.length;++s){const o=eh(r[s],this.kernelSize[s],this.padding,this.strides[s],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[s]);t.push(o)}let i=[e[0]];return this.dataFormat==="channelsLast"?(i=i.concat(t),i.push(this.filters)):(i.push(this.filters),i=i.concat(t)),i}getConfig(){const e={filters:this.filters,kernelInitializer:ws(this.kernelInitializer),kernelRegularizer:Yi(this.kernelRegularizer),kernelConstraint:To(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new Ge(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class QE extends K1{constructor(e){super(2,e),QE.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!Fz(e.kernelSize,"number",1,2))throw new Ge(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}QE.className="Conv2D";Gt(QE);class e2 extends K1{constructor(e){super(3,e),e2.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new Ge(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}e2.className="Conv3D";Gt(e2);class hee extends QE{constructor(e){if(super(e),this.inputSpec=[new Eo({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new Ge(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=si(e),e.length!==4)throw new Ge("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new Ge("The channel dimension of the inputs should be defined. Found `None`.");const r=e[t],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Eo({ndim:4,axes:{[t]:r}})],this.built=!0}call(e,t){return Ye(()=>{let r=Yn(e);if(r.shape.length!==4)throw new Ge(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,s=i[0];let o,a;this.dataFormat==="channelsFirst"?(o=2,a=3):(o=1,a=2);const l=i[o],c=i[a],u=this.kernelSize[0],d=this.kernelSize[1],f=this.strides[0],p=this.strides[1],g=of(l,f,u,this.padding),v=of(c,p,d,this.padding),b=[s,g,v,this.filters];this.dataFormat!=="channelsLast"&&(r=Xr(r,[0,2,3,1]));let x=NU(r,this.kernel.read(),b,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(x=Xr(x,[0,3,1,2])),this.bias!=null&&(x=mh(x,this.bias.read(),this.dataFormat)),this.activation!=null&&(x=this.activation.apply(x)),x})}computeOutputShape(e){e=si(e);const t=e.slice();let r,i,s;this.dataFormat==="channelsFirst"?(r=1,i=2,s=3):(r=3,i=1,s=2);const o=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return t[r]=this.filters,t[i]=of(t[i],l,o,this.padding),t[s]=of(t[s],c,a,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}hee.className="Conv2DTranspose";Gt(hee);class fee extends e2{constructor(e){if(super(e),this.inputSpec=[new Eo({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new Ge(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=si(e),e.length!==5)throw new Ge("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new Ge("The channel dimension of the inputs should be defined. Found `None`.");const r=e[t],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Eo({ndim:5,axes:{[t]:r}})],this.built=!0}call(e,t){return Ye(()=>{let r=Yn(e);if(r.shape.length!==5)throw new Ge(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,s=i[0];let o,a,l;this.dataFormat==="channelsFirst"?(l=2,o=3,a=4):(l=1,o=2,a=3);const c=i[l],u=i[o],d=i[a],f=this.kernelSize[0],p=this.kernelSize[1],g=this.kernelSize[2],v=this.strides[0],b=this.strides[1],x=this.strides[2],_=of(c,v,f,this.padding),E=of(u,b,p,this.padding),C=of(d,x,g,this.padding),M=[s,_,E,C,this.filters];this.dataFormat!=="channelsLast"&&(r=Xr(r,[0,2,3,4,1]));let R=EJ(r,this.kernel.read(),M,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(R=Xr(R,[0,4,1,2,3])),this.bias!==null&&(R=mh(R,this.bias.read(),this.dataFormat)),this.activation!==null&&(R=this.activation.apply(R)),R})}computeOutputShape(e){e=si(e);const t=e.slice();let r,i,s,o;this.dataFormat==="channelsFirst"?(r=1,i=2,s=3,o=4):(r=4,i=1,s=2,o=3);const a=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],u=this.strides[0],d=this.strides[1],f=this.strides[2];return t[r]=this.filters,t[i]=of(t[i],u,a,this.padding),t[s]=of(t[s],d,l,this.padding),t[o]=of(t[o],f,c,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}fee.className="Conv3DTranspose";Gt(fee);class pee extends K1{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,t.filters==null)throw new Ge("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(t.kernelInitializer!=null||t.kernelRegularizer!=null||t.kernelConstraint!=null)throw new Ge("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(t.padding!=null&&t.padding!=="same"&&t.padding!=="valid")throw new Ge(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=t.depthMultiplier==null?1:t.depthMultiplier,this.depthwiseInitializer=hs(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=fs(t.depthwiseRegularizer),this.depthwiseConstraint=Mo(t.depthwiseConstraint),this.pointwiseInitializer=hs(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=fs(t.pointwiseRegularizer),this.pointwiseConstraint=Mo(t.pointwiseConstraint)}build(e){if(e=si(e),e.length<this.rank+2)throw new Ge(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null||e[t]<0)throw new Ge(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[t])}`);const r=e[t],i=this.kernelSize.concat([r,this.depthMultiplier]),s=[];for(let a=0;a<this.rank;++a)s.push(1);s.push(r*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new Eo({ndim:this.rank+2,axes:{[t]:r}})],this.built=!0}call(e,t){return Ye(()=>{e=Yn(e);let r;if(this.rank===1)throw new Er("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=Xr(e,[0,2,3,1])),r=jU(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=mh(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=Xr(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=ws(this.depthwiseInitializer),e.pointwiseInitializer=ws(this.pointwiseInitializer),e.depthwiseRegularizer=Yi(this.depthwiseRegularizer),e.pointwiseRegularizer=Yi(this.pointwiseRegularizer),e.depthwiseConstraint=To(this.depthwiseConstraint),e.pointwiseConstraint=To(this.pointwiseConstraint),e}}pee.className="SeparableConv";class mee extends pee{constructor(e){super(2,e)}}mee.className="SeparableConv2D";Gt(mee);class w3 extends K1{constructor(e){super(1,e),w3.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!Fz(e.kernelSize,"number",1,1))throw new Ge(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}w3.className="Conv1D";Gt(w3);class gee extends Dr{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return Ye(()=>{if(e=Yn(e),this.dataFormat==="channelsLast"){const r=PT(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return PT(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=PT(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return PT(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}gee.className="Cropping2D";Gt(gee);class yee extends Dr{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Qs(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,ZAe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const t=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],t,r]}else{const t=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],t,r,e[3]]}}call(e,t){return Ye(()=>{let r=Yn(e);const i=r.shape;if(this.dataFormat==="channelsFirst"){r=Xr(r,[0,2,3,1]);const s=this.size[0]*i[2],o=this.size[1]*i[3],a=this.interpolation==="nearest"?nu.resizeNearestNeighbor(r,[s,o]):nu.resizeBilinear(r,[s,o]);return Xr(a,[0,3,1,2])}else{const s=this.size[0]*i[1],o=this.size[1]*i[2];return this.interpolation==="nearest"?nu.resizeNearestNeighbor(r,[s,o]):nu.resizeBilinear(r,[s,o])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}}yee.className="UpSampling2D";Gt(yee);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function CMe(n,e,t=[1,1],r="valid",i,s){return Ye(()=>{i==null&&(i=ah()),Qs(i);let o=Zz(n,i);if(n.rank!==4)throw new Ge(`Input for depthwiseConv2d is required to be 4-D, but is instead ${n.rank}-D`);if(e.rank!==4)throw new Ge(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return o=PE(o,e,t,r==="same"?"same":"valid","NHWC",s),i==="channelsFirst"&&(o=Xr(o,[0,3,1,2])),o})}class vee extends S3{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=hs(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Mo(e.depthwiseConstraint),this.depthwiseRegularizer=fs(e.depthwiseRegularizer)}build(e){if(e=si(e),e.length<4)throw new Ge(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const t=this.dataFormat==="channelsFirst"?1:3;if(e[t]==null||e[t]<0)throw new Ge(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[t]}).`);const r=e[t],i=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",i,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return Ye(()=>{e=Yn(e);let r=CMe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=mh(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=si(e);const t=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=eh(t,this.kernelSize[0],this.padding,this.strides[0]),o=eh(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],i,s,o]:[e[0],s,o,i]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=ws(this.depthwiseInitializer),e.depthwiseRegularizer=Yi(this.depthwiseRegularizer),e.depthwiseConstraint=To(this.depthwiseRegularizer),e}}vee.className="DepthwiseConv2D";Gt(vee);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function bee(n,e,t,r){if(Array.isArray(n)){if(e!=null||t!=null)throw new Ge("When inputs is an array, neither initialState or constants should be provided");r!=null&&(t=n.slice(n.length-r,n.length),n=n.slice(0,n.length-r)),n.length>1&&(e=n.slice(1,n.length)),n=n[0]}function i(s){return s==null||Array.isArray(s)?s:[s]}return e=i(e),t=i(t),{inputs:n,initialState:e,constants:t}}function xee(n,e,t,r=!1,i,s,o=!1,a=!1){return Ye(()=>{const l=e.shape.length;if(l<3)throw new Ge(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(oh(2,l));e=Xr(e,c),o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=nn(nn(i,"bool"),"float32"),i.rank===l-1&&(i=na(i,-1)),i=Xr(i,c)),r&&(e=Zu(e,0),i!=null&&(i=Zu(i,0)));const u=[];let d,f=t;const p=e.shape[0],g=Qu(e);let v;i!=null&&(v=Qu(i));for(let x=0;x<p;++x){const _=g[x],E=Ye(()=>n(_,f));if(i==null)d=E[0],f=E[1];else{const C=Ye(()=>{const M=v[x],R=vn(au(M),M),L=$t(ke(E[0],M),ke(f[0],R)),B=f.map((N,I)=>$t(ke(E[1][I],M),ke(N,R)));return{output:L,newStates:B}});d=C.output,f=C.newStates}a&&u.push(d)}let b;return a&&(b=Mc(u,1)),[d,b,f]})}class e0 extends Dr{constructor(e){super(e);let t;if(e.cell==null)throw new Ge("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?t=new t5({cells:e.cell}):t=e.cell,t.stateSize==null)throw new Ge("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Eo({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return oh(0,e).map(t=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){LL(e)&&(e=e[0]),e=e;let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const r=t[0];let i;if(this.returnSequences?i=[e[0],e[1],r]:i=[e[0],r],this.returnState){const s=[];for(const o of t)s.push([e[0],o]);return[i].concat(s)}else return i}computeMask(e,t){return Ye(()=>{Array.isArray(t)&&(t=t[0]);const r=this.returnSequences?t:null;if(this.returnState){const i=this.states.map(s=>null);return[r].concat(i)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let r=0;r<e;++r)t.push(null);return t}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new Er("Constants support is not implemented in RNN yet.");LL(e)&&(e=e[0]),e=e;const t=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new Eo({shape:[t,null,...r]});const i=[e[0]].concat(e.slice(2));this.cell.build(i);let s;if(Array.isArray(this.cell.stateSize)?s=this.cell.stateSize:s=[this.cell.stateSize],this.stateSpec!=null){if(!Vr(this.stateSpec.map(o=>o.shape[o.shape.length-1]),s))throw new Ge(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=s.map(o=>new Eo({shape:[null,o]}));this.stateful&&this.resetStates()}resetStates(e,t=!1){Ye(()=>{if(!this.stateful)throw new rf("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new Ge("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>_o([r,i])):this.states_=[_o([r,this.cell.stateSize])];else if(e==null)rr(this.states_),this.keptStates!=null&&(rr(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>_o([r,i])):this.states_[0]=_o([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Ge(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t===!0?this.keptStates.push(this.states_.slice()):rr(this.states_);for(let i=0;i<this.states_.length;++i){const s=e[i],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,a=[r,o];if(!Vr(s.shape,a))throw new Ge(`State ${i} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${s.shape}`);this.states_[i]=s}}this.states_=this.states_.map(i=>Uo(i.clone()))})}apply(e,t){let r=t==null?null:t.initialState,i=t==null?null:t.constants;t==null&&(t={});const s=bee(e,r,i,this.numConstants);e=s.inputs,r=s.initialState,i=s.constants;let o=[],a=[];if(r!=null){t.initialState=r,o=o.concat(r),this.stateSpec=[];for(const c of r)this.stateSpec.push(new Eo({shape:c.shape}));a=a.concat(this.stateSpec)}if(i!=null&&(t.constants=i,o=o.concat(i),this.numConstants=i.length),o[0]instanceof Tf){const c=[e].concat(o),u=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=u;const f=super.apply(c,t);return this.inputSpec=d,f}else return super.apply(e,t)}call(e,t){return Ye(()=>{const r=t==null?null:t.mask,i=t==null?null:t.training;let s=t==null?null:t.initialState;e=Yn(e),s==null&&(this.stateful?s=this.states_:s=this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==o)throw new Ge(`RNN Layer has ${o} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:i},c=xee((g,v)=>{const b=this.cell.call([g].concat(v),a);return[b[0],b.slice(1)]},e,s,this.goBackwards,r,null,this.unroll,this.returnSequences),u=c[0],d=c[1],f=c[2];this.stateful&&this.resetStates(f,i);const p=this.returnSequences?d:u;return this.returnState?[p].concat(f):p})}getInitialState(e){return Ye(()=>{let t=_o(e.shape);return t=wn(t,[1,2]),t=qE(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?BL(t,[1,r]):t):this.cell.stateSize>1?[BL(t,[1,this.cell.stateSize])]:[t]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(t.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===e0.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),t)}static fromConfig(e,t,r={}){const i=t.cell,s=Lp(i,r);return new e(Object.assign(t,{cell:s}))}}e0.className="RNN";Gt(e0);class _3 extends Dr{}class Qz extends _3{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,zo(this.units,"units"),this.activation=Bg(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=hs(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=hs(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=hs(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=fs(e.kernelRegularizer),this.recurrentRegularizer=fs(e.recurrentRegularizer),this.biasRegularizer=fs(e.biasRegularizer),this.kernelConstraint=Mo(e.kernelConstraint),this.recurrentConstraint=Mo(e.recurrentConstraint),this.biasConstraint=Mo(e.biasConstraint),this.dropout=x1([1,kg([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=x1([1,kg([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=si(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return Ye(()=>{if(e=e,e.length!==2)throw new Ge(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const i=t.training==null?!1:t.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=$g({ones:()=>au(e),rate:this.dropout,training:i,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=$g({ones:()=>au(r),rate:this.recurrentDropout,training:i,dropoutFunc:this.dropoutFunc}));let s;const o=this.dropoutMask,a=this.recurrentDropoutMask;o!=null?s=bf(ke(e,o),this.kernel.read()):s=bf(e,this.kernel.read()),this.bias!=null&&(s=mh(s,this.bias.read())),a!=null&&(r=ke(r,a));let l=$t(s,bf(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:Og(this.activation),useBias:this.useBias,kernelInitializer:ws(this.kernelInitializer),recurrentInitializer:ws(this.recurrentInitializer),biasInitializer:ws(this.biasInitializer),kernelRegularizer:Yi(this.kernelRegularizer),recurrentRegularizer:Yi(this.recurrentRegularizer),biasRegularizer:Yi(this.biasRegularizer),activityRegularizer:Yi(this.activityRegularizer),kernelConstraint:To(this.kernelConstraint),recurrentConstraint:To(this.recurrentConstraint),biasConstraint:To(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}Qz.className="SimpleRNNCell";Gt(Qz);class See extends e0{constructor(e){e.cell=new Qz(e),super(e)}call(e,t){return Ye(()=>{this.cell.dropoutMask!=null&&(rr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(rr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=t==null?null:t.mask,i=t==null?null:t.training,s=t==null?null:t.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,t){return new e(t)}}See.className="SimpleRNN";Gt(See);class e5 extends _3{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new Ge("GRUCell does not support reset_after parameter set to true.");this.units=e.units,zo(this.units,"units"),this.activation=Bg(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Bg(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=hs(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=hs(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=hs(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=fs(e.kernelRegularizer),this.recurrentRegularizer=fs(e.recurrentRegularizer),this.biasRegularizer=fs(e.biasRegularizer),this.kernelConstraint=Mo(e.kernelConstraint),this.recurrentConstraint=Mo(e.recurrentConstraint),this.biasConstraint=Mo(e.biasConstraint),this.dropout=x1([1,kg([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=x1([1,kg([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=si(e);const t=e[e.length-1];this.kernel=this.addWeight("kernel",[t,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return Ye(()=>{if(e=e,e.length!==2)throw new Ge(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=t.training==null?!1:t.training;let i=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=$g({ones:()=>au(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=$g({ones:()=>au(i),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,o=this.recurrentDropoutMask;let a,l,c;0<this.dropout&&this.dropout<1&&(e=ke(e,s[0]));let u=bf(e,this.kernel.read());this.useBias&&(u=mh(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(i=ke(i,o[0]));const d=this.recurrentKernel.read(),[f,p]=wc(d,[2*this.units,this.units],d.rank-1),g=bf(i,f),[v,b,x]=wc(u,3,u.rank-1),[_,E]=wc(g,2,g.rank-1);a=this.recurrentActivation.apply($t(v,_)),l=this.recurrentActivation.apply($t(b,E));const C=bf(ke(l,i),p);c=this.activation.apply($t(x,C));const M=$t(ke(a,i),ke($t(1,ss(a)),c));return[M,M]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:Og(this.activation),recurrentActivation:Og(this.recurrentActivation),useBias:this.useBias,kernelInitializer:ws(this.kernelInitializer),recurrentInitializer:ws(this.recurrentInitializer),biasInitializer:ws(this.biasInitializer),kernelRegularizer:Yi(this.kernelRegularizer),recurrentRegularizer:Yi(this.recurrentRegularizer),biasRegularizer:Yi(this.biasRegularizer),activityRegularizer:Yi(this.activityRegularizer),kernelConstraint:To(this.kernelConstraint),recurrentConstraint:To(this.recurrentConstraint),biasConstraint:To(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}e5.className="GRUCell";Gt(e5);class wee extends e0{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new e5(e),super(e)}call(e,t){return Ye(()=>{this.cell.dropoutMask!=null&&(rr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(rr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=t==null?null:t.mask,i=t==null?null:t.training,s=t==null?null:t.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,t){return t.implmentation===0&&(t.implementation=1),new e(t)}}wee.className="GRU";Gt(wee);class C3 extends _3{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,zo(this.units,"units"),this.activation=Bg(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Bg(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=hs(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=hs(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=hs(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=fs(e.kernelRegularizer),this.recurrentRegularizer=fs(e.recurrentRegularizer),this.biasRegularizer=fs(e.biasRegularizer),this.kernelConstraint=Mo(e.kernelConstraint),this.recurrentConstraint=Mo(e.recurrentConstraint),this.biasConstraint=Mo(e.biasConstraint),this.dropout=x1([1,kg([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=x1([1,kg([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;e=si(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let i;if(this.useBias){if(this.unitForgetBias){const s=this.biasInitializer,o=this.units;i=new(t=class extends rd{apply(l,c){const u=s.apply([o]),d=new Uz().apply([o]),f=s.apply([o*2]);return rG(rG(u,d),f)}},t.className="CustomInit",t)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return Ye(()=>{const r=t.training==null?!1:t.training;if(e=e,e.length!==3)throw new Ge(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let i=e[1];const s=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=$g({ones:()=>au(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=$g({ones:()=>au(i),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;let l,c,u,d;0<this.dropout&&this.dropout<1&&(e=ke(e,o[0]));let f=bf(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(i=ke(i,a[0])),f=$t(f,bf(i,this.recurrentKernel.read())),this.useBias&&(f=mh(f,this.bias.read()));const[p,g,v,b]=wc(f,4,f.rank-1);l=this.recurrentActivation.apply(p),c=this.recurrentActivation.apply(g),u=$t(ke(c,s),ke(l,this.activation.apply(v))),d=this.recurrentActivation.apply(b);const x=ke(d,this.activation.apply(u));return[x,x,u]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:Og(this.activation),recurrentActivation:Og(this.recurrentActivation),useBias:this.useBias,kernelInitializer:ws(this.kernelInitializer),recurrentInitializer:ws(this.recurrentInitializer),biasInitializer:ws(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Yi(this.kernelRegularizer),recurrentRegularizer:Yi(this.recurrentRegularizer),biasRegularizer:Yi(this.biasRegularizer),activityRegularizer:Yi(this.activityRegularizer),kernelConstraint:To(this.kernelConstraint),recurrentConstraint:To(this.recurrentConstraint),biasConstraint:To(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}C3.className="LSTMCell";Gt(C3);class _ee extends e0{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new C3(e),super(e)}call(e,t){return Ye(()=>{this.cell.dropoutMask!=null&&(rr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(rr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=t==null?null:t.mask,i=t==null?null:t.training,s=t==null?null:t.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,t){return t.implmentation===0&&(t.implementation=1),new e(t)}}_ee.className="LSTM";Gt(_ee);class t5 extends _3{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return Ye(()=>{e=e;let r=e.slice(1);const i=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?i.push(r.splice(0,a.stateSize.length)):i.push(r.splice(0,1));i.reverse();const s=[];let o;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];r=i[a],a===0?o=[e[0]].concat(r):o=[o[0]].concat(r),o=l.call(o,t),s.push(o.slice(1))}r=[];for(const a of s.slice().reverse())r.push(...a);return[o[0]].concat(r)})}build(e){LL(e)&&(e=e[0]),e=e;let t;this.cells.forEach((r,i)=>{Yy(`RNNCell_${i}`,()=>{r.build(e),Array.isArray(r.stateSize)?t=r.stateSize[0]:t=r.stateSize,e=[e[0],t]})}),this.built=!0}getConfig(){const e=super.getConfig(),t=s=>({className:s.getClassName(),config:s.getConfig()}),i={cells:this.cells.map(t)};return Object.assign(Object.assign({},e),i)}static fromConfig(e,t,r={}){const i=[];for(const s of t.cells)i.push(Lp(s,r));return new e({cells:i})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const r of this.cells)t.push(...r.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return FL(e)}setWeights(e){const t=[];for(const r of this.cells){const i=r.weights.length,s=e.splice(i);for(let o=0;o<r.weights.length;++o)t.push([r.weights[o],s[o]])}Xz(t)}}t5.className="StackedRNNCells";Gt(t5);function $g(n){const{ones:e,rate:t,training:r=!1,count:i=1,dropoutFunc:s}=n,o=()=>s!=null?s(e(),t):pQ(e(),t),a=()=>YE(o,e,r);return!i||i<=1?Uo(a().clone()):Array(i).fill(void 0).map(a).map(c=>Uo(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var EMe=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class Cee extends e0{constructor(e){if(e.unroll)throw new Er("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Er("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Eo({ndim:5})]}call(e,t){return Ye(()=>{if(this.cell.dropoutMask!=null&&(rr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(rr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new Ge("ConvRNN2D cell does not support constants");const r=t==null?null:t.mask,i=t==null?null:t.training,s=t==null?null:t.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return Ye(()=>{const{stateSize:t}=this.cell,r=e.shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)],o=_o(s);return Array.isArray(t)?Array(t.length).fill(o):[o]})}resetStates(e,t=!1){Ye(()=>{if(!this.stateful)throw new rf("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)];if(r[0]==null)throw new Ge("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>_o(s)):this.states_=[_o(s)];else if(e==null)rr(this.states_),this.keptStates!=null&&(rr(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>_o(s)):this.states_[0]=_o(s);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Ge(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t?this.keptStates.push(this.states_.slice()):rr(this.states_);for(let a=0;a<this.states_.length;++a){const l=e[a],c=s;if(!Vr(l.shape,c))throw new Ge(`State ${a} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>Uo(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:t,filters:r,kernelSize:i,padding:s,strides:o,dilationRate:a}=this.cell,l=t==="channelsFirst",c=e[l?3:2],u=e[l?4:3],d=eh(c,i[0],s,o[0],a[0]),f=eh(u,i[1],s,o[1],a[1]);return[...e.slice(0,2),...l?[r,d,f]:[d,f,r]]}}Cee.className="ConvRNN2D";class n5 extends C3{constructor(e){const{filters:t,kernelSize:r,strides:i,padding:s,dataFormat:o,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,zo(this.filters,"filters"),this.kernelSize=Wx(r,2,"kernelSize"),this.kernelSize.forEach(l=>zo(l,"kernelSize")),this.strides=Wx(i||1,2,"strides"),this.strides.forEach(l=>zo(l,"strides")),this.padding=s||"valid",cu(this.padding),this.dataFormat=o||"channelsLast",Qs(this.dataFormat),this.dilationRate=Wx(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>zo(l,"dilationRate"))}build(e){var t;e=si(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new Ge(`The channel dimension of the input should be defined. Found ${e[r]}`);const i=e[r],s=4,o=this.kernelSize.concat([i,this.filters*s]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*s]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,u=this.filters;l=new(t=class extends rd{apply(f,p){const g=c.apply([u]),v=xc([u]),b=c.apply([u*2]);return Pz([g,v,b])}},t.className="CustomInit",t)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*s],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return Ye(()=>{if(e.length!==3)throw new Ge(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=t.training||!1,i=e[0],s=e[1],o=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=$g({ones:()=>au(i),rate:this.dropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(X,te,ne)=>!te||!te[ne]?X:ke(te[ne],X);let u=c(i,l,0),d=c(i,l,1),f=c(i,l,2),p=c(i,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=$g({ones:()=>au(s),rate:this.recurrentDropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const g=this.recurrentDropoutMask;let v=c(s,g,0),b=c(s,g,1),x=c(s,g,2),_=c(s,g,3);const E=3,[C,M,R,L]=wc(this.kernel.read(),a,E),[B,N,I,D]=this.useBias?wc(this.bias.read(),a):[null,null,null,null];u=this.inputConv(u,C,B,this.padding),d=this.inputConv(d,M,N,this.padding),f=this.inputConv(f,R,I,this.padding),p=this.inputConv(p,L,D,this.padding);const[P,G,W,q]=wc(this.recurrentKernel.read(),a,E);v=this.recurrentConv(v,P),b=this.recurrentConv(b,G),x=this.recurrentConv(x,W),_=this.recurrentConv(_,q);const z=this.recurrentActivation.apply($t(u,v)),J=this.recurrentActivation.apply($t(d,b)),Q=$t(ke(J,o),ke(z,this.activation.apply($t(f,x)))),Y=ke(this.recurrentActivation.apply($t(p,_)),this.activation.apply(Q));return[Y,Y,Q]})}getConfig(){const e=super.getConfig(),{units:t}=e,r=EMe(e,["units"]),i={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),i)}inputConv(e,t,r,i){const s=Dg(e,t,this.strides,i||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?mh(s,r,this.dataFormat):s}recurrentConv(e,t){return Dg(e,t,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}n5.className="ConvLSTM2DCell";Gt(n5);class Eee extends Cee{constructor(e){const t=new n5(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}}Eee.className="ConvLSTM2D";Gt(Eee);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class r5 extends Dr{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const t=e.shape,r=[];for(let i=0;i<this.noiseShape.length;++i)r.push(this.noiseShape[i]==null?t[i]:this.noiseShape[i]);return r}call(e,t){return Ye(()=>{this.invokeCallHook(e,t);const r=Yn(e);if(0<this.rate&&this.rate<1){const i=t.training==null?!1:t.training,s=this.getNoiseShape(r);return YE(()=>pQ(r,this.rate,s,this.seed),()=>r,i)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}r5.className="Dropout";Gt(r5);class Aee extends r5{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}}Aee.className="SpatialDropout1D";Gt(Aee);class Tee extends Dr{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let t=null;e.batchSize!=null&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,zo(this.units,"units"),this.activation=Bg(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=hs(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=hs(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Mo(e.kernelConstraint),this.biasConstraint=Mo(e.biasConstraint),this.kernelRegularizer=fs(e.kernelRegularizer),this.biasRegularizer=fs(e.biasRegularizer),this.activityRegularizer=fs(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=si(e);const t=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){e=si(e);const t=e.slice();return t[t.length-1]=this.units,t}call(e,t){return Ye(()=>{this.invokeCallHook(e,t);const r=Yn(e),i=aQ(this.activation.getClassName());let s;return i!=null?s=bf(r,this.kernel.read(),i,this.bias?this.bias.read():null):(s=bf(r,this.kernel.read()),this.bias!=null&&(s=mh(s,this.bias.read())),this.activation!=null&&(s=this.activation.apply(s))),s})}getConfig(){const e={units:this.units,activation:Og(this.activation),useBias:this.useBias,kernelInitializer:ws(this.kernelInitializer),biasInitializer:ws(this.biasInitializer),kernelRegularizer:Yi(this.kernelRegularizer),biasRegularizer:Yi(this.biasRegularizer),activityRegularizer:Yi(this.activityRegularizer),kernelConstraint:To(this.kernelConstraint),biasConstraint:To(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}Tee.className="Dense";Gt(Tee);class Mee extends Dr{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=si(e);for(const t of e.slice(1))if(t==null)throw new Ge(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],xg(e,1)]}call(e,t){return Ye(()=>{this.invokeCallHook(e,t);let r=Yn(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const i=[0];for(let s=2;s<r.rank;++s)i.push(s);i.push(1),r=Xr(r,i)}return iTe(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}}Mee.className="Flatten";Gt(Mee);class Ree extends Dr{constructor(e){super(e),this.supportsMasking=!0,this.activation=Bg(e.activation)}call(e,t){return Ye(()=>{this.invokeCallHook(e,t);const r=Yn(e);return this.activation.apply(r)})}getConfig(){const e={activation:Og(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}Ree.className="Activation";Gt(Ree);class Nee extends Dr{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return Ye(()=>(e=Yn(e),nTe(e,this.n)))}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}Nee.className="RepeatVector";Gt(Nee);class Iee extends Dr{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,t){const r="Total size of new array must be unchanged.",i=t.slice();let s=1,o=null;for(let l=0;l<i.length;++l){const c=i[l];if(this.isUnknown(c))if(o===null)o=l;else throw new Ge("Can only specifiy one unknown dimension.");else s*=c}const a=xg(e);if(o!==null){if(s===0||a%s!==0)throw new Ge(r);i[o]=a/s}else if(a!==s)throw new Ge(r);return i}computeOutputShape(e){let t=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return Ye(()=>{this.invokeCallHook(e,t);const r=Yn(e),i=r.shape,s=i.slice(0,1).concat(this.fixUnknownDimension(i.slice(1),this.targetShape));return Fe(r,s)})}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}Iee.className="Reshape";Gt(Iee);class Dee extends Dr{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const t=oh(1,e.dims.length+1);if(!Vr(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Eo({ndim:this.dims.length+1})]}computeOutputShape(e){e=si(e);const t=e.slice();return this.dims.forEach((r,i)=>{t[i+1]=e[r]}),t}call(e,t){return Xr(Yn(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}Dee.className="Permute";Gt(Dee);class kee extends Dr{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const r=Yn(e);return WR(v1(r,this.maskValue),-1)}call(e,t){return Ye(()=>{this.invokeCallHook(e,t);const r=Yn(e),o=WR(v1(r,this.maskValue),-1,!0);return ke(r,nn(o,r.dtype))})}}kee.className="Masking";Gt(kee);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Oee extends Dr{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let t=null;e.batchSize!=null&&(t=e.batchSize),e.inputLength==null?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(Ai(e.inputLength))}this.inputDim=e.inputDim,zo(this.inputDim,"inputDim"),this.outputDim=e.outputDim,zo(this.outputDim,"outputDim"),this.embeddingsInitializer=hs(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=fs(e.embeddingsRegularizer),this.activityRegularizer=fs(e.activityRegularizer),this.embeddingsConstraint=Mo(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return Ye(()=>this.maskZero?(e=Yn(e),v1(e,qr(e))):null)}computeOutputShape(e){if(e=si(e),this.inputLength==null)return[...e,this.outputDim];const t=Ai(this.inputLength);if(t.length!==e.length-1)throw new Ge(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let i=0;i<t.length;++i){const s=t[i],o=e[i+1];if(s!=null&&o!=null&&s!==o)throw new Ge(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);s==null&&(t[r]=o),r++}}return[e[0],...t,this.outputDim]}call(e,t){return Ye(()=>{this.invokeCallHook(e,t);let r=Yn(e);r.dtype!=="int32"&&(r=vf(r,"int32"));const i=fQ(this.embeddings.read(),Fe(r,[r.size]));return Fe(i,si(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:ws(this.embeddingsInitializer),embeddingsRegularizer:Yi(this.embeddingsRegularizer),activityRegularizer:Yi(this.activityRegularizer),embeddingsConstraint:To(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}Oee.className="Embedding";Gt(Oee);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Fv extends Dr{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Er}computeElementwiseOpOutputShape(e,t){if(e==null||t==null)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(t.length===0)return e;const r=e.slice(0,e.length-t.length);for(let i=0;i<t.length;++i){const s=e[e.length-t.length+i],o=t[i];if(s==null||o==null||s<0||o<0)r.push(null);else if(s===1)r.push(o);else if(o===1)r.push(s);else{if(s!==o)throw new Ge("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));r.push(s)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[si(e)]),e=e,e.length<2)throw new Ge(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let t=[];for(const s of e)s!=null&&s[0]!==null&&t.push(s[0]);if(t=bg(t),t.length>1)throw new Ge(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let s=1;s<e.length;++s){const o=e[s]==null?null:e[s].slice(1);r=this.computeElementwiseOpOutputShape(r,o)}const i=e.map(s=>s.length);e.indexOf(null)===-1&&bg(i).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return Ye(()=>{if(e=e,this.reshapeRequired){const r=[],i=e.map(s=>s.rank);if(i.indexOf(null)===-1){const s=kg(i);for(let o of e){const a=o.rank;for(let l=0;l<s-a;++l)o=qE(o,1);r.push(o)}return this.mergeFunction(r)}else{let s=!1;for(const l of e){const c=l.rank;if(c==null){const u=l.shape,d=u[0],f=u.slice(1).concat([d]);let p=Fe(l,[d].concat(xg(u.slice(1))));p=Xr(p,[1,0]),p=Fe(p,f),r.push(p),s=!0}else if(c>1){const u=oh(1,c).concat([0]);r.push(Xr(l,u)),s=!0}else r.push(l)}let o=this.mergeFunction(r);const a=o.rank;if(s){if(a==null){const l=o.shape,c=l.length,u=l[c-1],d=[u].concat(l.slice(0,l.length-1));o=Fe(Xr(Fe(o,[-1,u]),[1,0]),d)}else if(a>1){const l=[a-1].concat(oh(0,a-1));o=Xr(o,l)}}return o}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let t;e[0]==null?t=null:t=e[0].slice(1);for(let i=1;i<e.length;++i){const s=e[i]==null?null:e[i].slice(1);t=this.computeElementwiseOpOutputShape(t,s)}let r=[];for(const i of e)i!=null&&i[0]!==null&&r.push(i[0]);return r=bg(r),r.length===1?t=r.concat(t):t=[null].concat(t),t}computeMask(e,t){return Ye(()=>{if(t==null)return null;if(!Array.isArray(t))throw new Ge("`mask` should be an Array");if(!Array.isArray(e))throw new Ge("`inputs` should be an Array");if(t.length!==e.length)throw new Ge(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${t.length})`);if(t.every(i=>i==null))return null;t=t.map(i=>i==null?i:na(i,0));let r=t[0];for(let i=1;i<t.length-1;++i)r=Af(r,t[i]);return r})}}class Bee extends Fv{constructor(e){super(e)}mergeFunction(e){return Ye(()=>{let t=e[0].clone();for(let r=1;r<e.length;++r)t=$t(t,e[r]);return t})}}Bee.className="Add";Gt(Bee);class $ee extends Fv{constructor(e){super(e)}mergeFunction(e){return Ye(()=>{let t=e[0].clone();for(let r=1;r<e.length;++r)t=ke(t,e[r]);return t})}}$ee.className="Multiply";Gt($ee);class Lee extends Fv{constructor(e){super(e)}mergeFunction(e){return Ye(()=>{let t=e[0].clone();for(let r=1;r<e.length;++r)t=$t(t,e[r]);return ke(1/e.length,t)})}}Lee.className="Average";Gt(Lee);class Fee extends Fv{constructor(e){super(e)}mergeFunction(e){return Ye(()=>{let t=e[0];for(let r=1;r<e.length;++r)t=im(t,e[r]);return t})}}Fee.className="Maximum";Gt(Fee);class Pee extends Fv{constructor(e){super(e)}mergeFunction(e){return Ye(()=>{let t=e[0];for(let r=1;r<e.length;++r)t=gv(t,e[r]);return t})}}Pee.className="Minimum";Gt(Pee);class Uee extends Fv{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new Ge("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let t=!0;for(const i of e)if(i!=null){t=!1;break}if(t)return;const r=[];for(let i=0;i<e.length;++i){const s=e[i].slice();s.splice(this.axis,1);let o=!1;for(const a of r)if(Vr(a,s)){o=!0;break}o||r.push(s)}if(r.length>1)throw new Ge("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return Ye(()=>Pz(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new Ge("A `Concatenate` layer should be called on a list of inputs.");const t=e,r=t[0].slice(),i=this.axis<0?r.length+this.axis:this.axis;for(const s of t.slice(1)){if(r[i]==null||s[i]==null){r[i]=null;break}r[i]+=s[i]}return r}computeMask(e,t){if(t==null)return null;if(!Array.isArray(t))throw new Ge("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new Ge("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new Ge(`Mismatch in the length of mask (${t.length}) and the legnth of inputs (${e.length})`);return Ye(()=>{let r=!0;if(t.forEach(o=>{if(o!=null){r=!1;return}}),r)return null;const i=[];for(let o=0;o<e.length;++o)t[o]==null?i.push(nn(au(e[o]),"bool")):t[o].rank<e[o].rank?i.push(na(t[o],-1)):i.push(t[o]);const s=$s(i,this.axis);return AU(s,-1,!1)})}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}Uee.className="Concatenate";Gt(Uee);function Ow(n,e){for(;n<0;)n+=e;return n}function AMe(n,e,t){if(n.shape.length>3||e.shape.length>3)throw new Er("batchDot is not implemented for tensors of 4D or higher rank yet");if(de(n.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${n.shape.length}`),de(n.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof t=="number"&&(t=[t,t]),n.dtype==="complex64"||e.dtype==="complex64")throw new Er("batchDot is not implemented for complex64-type Tensors yet.");const r=n.shape.length,i=e.shape.length;t==null&&(t=[r-1,i-2]);const s=t;return Ye(()=>{let o;if(r>i){o=r-i;const l=[];for(let c=0;c<o;++c)l.push(1);e=Fe(e,e.shape.concat(l))}else if(i>r){o=i-r;const l=[];for(let c=0;c<o;++c)l.push(1);n=Fe(n,n.shape.concat(l))}else o=0;let a;if(n.shape.length===2&&e.shape.length===2)s[0]===s[1]?a=wn(ke(n,e),s[0]):a=wn(ke(Xr(n,[1,0]),e),s[1]);else{const l=s[0]!==n.shape.length-1,c=s[1]===e.shape.length-1;a=Br(n,e,l,c)}if(o>0){let l;r>i?l=r+i-3:l=r-1;const c=[];for(let u=l;u<l+o;++u)c.push(u);a=js(a,c)}return a.shape.length===1&&(a=na(a,1)),a})}class zee extends Fv{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){de(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0],r=e[1];if(t.length>3||r.length>3)throw new Er("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(t,r);if(t[i[0]]!==r[i[1]])throw new Ge(`Dimension incompatibility: ${t[i[0]]} !== ${r[i[1]]}`)}mergeFunction(e){if(e.length!==2)throw new Ge(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let t=e[0],r=e[1],i;return Array.isArray(this.axes)?i=this.axes.map((s,o)=>Ow(s,e[o].shape.length)):i=[Ow(this.axes,t.shape.length),Ow(this.axes,r.shape.length)],this.normalize&&(t=JR(t,i[0]),r=JR(r,i[1])),AMe(t,r,i)}interpretAxes(e,t){let r;return Array.isArray(this.axes)?r=this.axes:r=[Ow(this.axes,e.length),Ow(this.axes,t.length)],r}computeOutputShape(e){de(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0].slice(),r=e[1].slice();if(t.length>3||r.length>3)throw new Er("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(t,r);t.splice(i[0],1),r.splice(i[1],1),r.splice(0,1);const s=t.concat(r);return s.length===1&&s.push(1),s}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}zee.className="Dot";Gt(zee);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Hee extends Dr{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return Ye(()=>{this.invokeCallHook(e,t);const r=Yn(e);return YE(()=>$t(y3(r.shape,0,this.stddev),r),()=>r,t.training||!1)})}}Hee.className="GaussianNoise";Gt(Hee);class Vee extends Dr{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return Ye(()=>{this.invokeCallHook(e,t);const r=Yn(e);return this.rate>0&&this.rate<1?YE(()=>{const s=Math.sqrt(this.rate/(1-this.rate));return ke(r,y3(r.shape,1,s))},()=>r,t.training||!1):r})}}Vee.className="GaussianDropout";Gt(Vee);class Gee extends Dr{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Yn(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return Ye(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return YE(()=>{const s=Yn(e),a=-1.6732632423543772*1.0507009873554805;let l=Jg(Bv(r),this.rate);l=vf(l,"float32");const c=((1-this.rate)*(1+this.rate*a**2))**-.5,u=-c*a*this.rate,d=$t(ke(s,l),ke($t(l,-1),a));return $t(ke(d,c),u)},()=>Yn(e),t.training||!1)}return e})}}Gee.className="AlphaDropout";Gt(Gee);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function sC(n,e,t,r,i,s=.001){let o;if(n.rank===2)o=pJ(n,e,t,r,i,s);else if(n.rank===3)o=mJ(n,e,t,r,i,s);else if(n.rank===4)o=gJ(n,e,t,r,i,s);else throw new Er(`batchNormalization is not implemented for array of rank ${n.rank} yet`);return o}function TMe(n,e,t,r,i=.001){return Ye(()=>{const s=QD(n,r),o=s.mean,a=s.variance;return[sC(n,o,a,t,e,i),o,a]})}function MMe(n,e,t,r,i=.001){return Ye(()=>{const s=QD(n,r),o=s.mean,a=s.variance,l=[];for(const g of oh(0,n.rank))r.indexOf(g)!==-1?l.push(1):l.push(n.shape[g]);const c=Fe(o,l),u=Fe(a,l),d=e==null?null:Fe(e,l),f=t==null?null:Fe(t,l);return[sC(n,c,u,f,d,i),o,a]})}function RMe(n,e,t,r,i=.001){return Vr(r.slice().sort(),oh(0,n.rank-1))?TMe(n,e,t,r,i):MMe(n,e,t,r,i)}class Wee extends Dr{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=hs(e.betaInitializer||"zeros"),this.gammaInitializer=hs(e.gammaInitializer||"ones"),this.movingMeanInitializer=hs(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=hs(e.movingVarianceInitializer||"ones"),this.betaConstraint=Mo(e.betaConstraint),this.gammaConstraint=Mo(e.gammaConstraint),this.betaRegularizer=fs(e.betaRegularizer),this.gammaRegularizer=fs(e.gammaRegularizer)}build(e){e=si(e);const t=this.axis>=0?this.axis:this.axis+e.length,r=e[t];if(r==null)throw new Ge(`Axis ${t} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Eo({ndim:e.length,axes:{[t]:r}})];const i=[r];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return Ye(()=>{const r=t.training==null?!1:t.training,i=Yn(e),s=i.shape,o=s.length,a=oh(0,o),l=this.axis>=0?this.axis:this.axis+o;a.splice(l,1);const c=vv(1,o);c[l]=s[l];const u=a.slice();u.sort();const d=!Vr(u,oh(0,o).slice(0,o-1)),f=()=>{if(d){const _=Fe(this.movingMean.read(),c),E=Fe(this.movingVariance.read(),c),C=this.center?Fe(this.beta.read(),c):null,M=this.scale?Fe(this.gamma.read(),c):null;return sC(i,_,E,C,M,this.epsilon)}else return sC(i,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return f();const[p,g,v]=RMe(i,this.gamma.read(),this.beta.read(),a,this.epsilon),b=(_,E,C)=>{Ye(()=>{const M=1-C,R=_.read(),L=ke(vn(R,E),M);_.write(vn(R,L))})};return(()=>{b(this.movingMean,g,this.momentum),b(this.movingVariance,v,this.momentum)})(),p})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:ws(this.betaInitializer),gammaInitializer:ws(this.gammaInitializer),movingMeanInitializer:ws(this.movingMeanInitializer),movingVarianceInitializer:ws(this.movingVarianceInitializer),betaRegularizer:Yi(this.betaRegularizer),gammaRegularizer:Yi(this.gammaRegularizer),betaConstraint:To(this.betaConstraint),gammaConstraint:To(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}Wee.className="BatchNormalization";Gt(Wee);class jee extends Dr{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const t of this.axis)if(!Number.isInteger(t))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=hs(e.betaInitializer||"zeros"),this.gammaInitializer=hs(e.gammaInitializer||"ones"),this.betaRegularizer=fs(e.betaRegularizer),this.gammaRegularizer=fs(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=si(e);const t=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let s=0;s<this.axis.length;++s)this.axis[s]<0&&(this.axis[s]+=t);for(const s of this.axis)if(s<0||s>=t)throw new Error(`Invalid axis: ${s}`);if(this.axis.length!==bg(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(s=>e[s]),i=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,i):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,i):this.beta=null,this.built=!0}call(e,t){const r=Yn(e),i=r.shape,s=i.length;return Ye(()=>{let{mean:a,variance:l}=QD(r,this.axis,!0);const c=vv(1,s);for(const v of this.axis)c[v]=i[v];const u=v=>v!=null&&v.shape.length!==s?Fe(v,c):v;let d=this.scale?u(this.gamma.read()):null,f=this.center?u(this.beta.read()):null;const p=[],g=[];for(let v=0;v<s;++v)this.axis.indexOf(v)!==-1?(p.push(i[v]),g.push(1)):(p.push(1),g.push(i[v]));return a=Vu(a,p),l=Vu(l,p),d!=null&&(d=Vu(d,g)),f!=null&&(f=Vu(f,g)),sC(r,a,l,f,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:ws(this.betaInitializer),gammaInitializer:ws(this.gammaInitializer),betaRegularizer:Yi(this.betaRegularizer),gammaRegularizer:Yi(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}jee.className="LayerNormalization";Gt(jee);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function NMe(n,e,t){return Ye(()=>{if(n.rank!==4)throw new Ge(`temporalPadding expects input tensor to be 4-D, but received a ${n.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new Ge("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(t==null&&(t=ah()),t!=="channelsLast"&&t!=="channelsFirst")throw new Ge(`Unknown data format: ${t}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return t==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],Zg(n,r)})}class Xee extends Dr{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?ah():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new Ge(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let t,r;if(typeof e.padding[0]=="number")t=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new Ge(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],e.padding[1].length!==2)throw new Ge(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[t,r]}this.inputSpec=[new Eo({ndim:4})]}computeOutputShape(e){e=si(e);let t,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?t=e[2]+this.padding[0][0]+this.padding[0][1]:t=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],t,r]):(e[1]!=null&&e[1]>=0?t=e[1]+this.padding[0][0]+this.padding[0][1]:t=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],t,r,e[3]])}call(e,t){return Ye(()=>NMe(Yn(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}Xee.className="ZeroPadding2D";Gt(Xee);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function E3(n,e,t,r,i,s){return Ye(()=>{Qs(i),cQ(s),cu(r),t==null&&(t=[1,1]),r==null&&(r="valid"),i==null&&(i=ah()),s==null&&(s="max"),n=Zz(n,i);let o;const a=r==="same"?"same":"valid";return s==="max"?o=ZD(n,e,t,a):o=GD(n,e,t,a),i==="channelsFirst"&&(o=Xr(o,[0,3,1,2])),o})}function qee(n,e,t,r,i,s){return Ye(()=>{Qs(i),cQ(s),cu(r),t==null&&(t=[1,1,1]),r==null&&(r="valid"),i==null&&(i=ah()),s==null&&(s="max"),n=dee(n,i);let o;const a=r==="same"?"same":"valid";return s==="max"?o=UJ(n,e,t,a):o=fJ(n,e,t,a),i==="channelsFirst"&&(o=Xr(o,[0,4,1,2,3])),o})}class Kee extends Dr{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new Ge(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(zo(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new Ge(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);zo(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,cu(this.padding),this.inputSpec=[new Eo({ndim:3})]}computeOutputShape(e){e=si(e);const t=eh(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return Ye(()=>{this.invokeCallHook(e,t),e=qE(Yn(e),2);const r=this.poolingFunction(Yn(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return js(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class Yee extends Kee{constructor(e){super(e)}poolingFunction(e,t,r,i,s){return Qs(s),cu(i),E3(e,t,r,i,s,"max")}}Yee.className="MaxPooling1D";Gt(Yee);class Jee extends Kee{constructor(e){super(e)}poolingFunction(e,t,r,i,s){return Qs(s),cu(i),E3(e,t,r,i,s,"avg")}}Jee.className="AveragePooling1D";Gt(Jee);class Zee extends Dr{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new Ge(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];zo(this.poolSize,"poolSize"),zo(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Qs(this.dataFormat),cu(this.padding),this.inputSpec=[new Eo({ndim:4})]}computeOutputShape(e){e=si(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return t=eh(t,this.poolSize[0],this.padding,this.strides[0]),r=eh(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],t,r]:[e[0],t,r,e[3]]}call(e,t){return Ye(()=>(this.invokeCallHook(e,t),this.poolingFunction(Yn(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class Qee extends Zee{constructor(e){super(e)}poolingFunction(e,t,r,i,s){return Qs(s),cu(i),E3(e,t,r,i,s,"max")}}Qee.className="MaxPooling2D";Gt(Qee);class ete extends Zee{constructor(e){super(e)}poolingFunction(e,t,r,i,s){return Qs(s),cu(i),E3(e,t,r,i,s,"avg")}}ete.className="AveragePooling2D";Gt(ete);class tte extends Dr{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new Ge(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];zo(this.poolSize,"poolSize"),zo(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Qs(this.dataFormat),cu(this.padding),this.inputSpec=[new Eo({ndim:5})]}computeOutputShape(e){e=si(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[4]:e[3];return t=eh(t,this.poolSize[0],this.padding,this.strides[0]),r=eh(r,this.poolSize[1],this.padding,this.strides[1]),i=eh(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],t,r,i]:[e[0],t,r,i,e[4]]}call(e,t){return Ye(()=>(this.invokeCallHook(e,t),this.poolingFunction(Yn(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class nte extends tte{constructor(e){super(e)}poolingFunction(e,t,r,i,s){return Qs(s),cu(i),qee(e,t,r,i,s,"max")}}nte.className="MaxPooling3D";Gt(nte);class rte extends tte{constructor(e){super(e)}poolingFunction(e,t,r,i,s){return Qs(s),cu(i),qee(e,t,r,i,s,"avg")}}rte.className="AveragePooling3D";Gt(rte);class ite extends Dr{constructor(e){super(e),this.inputSpec=[new Eo({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new Er}}class ste extends ite{constructor(e){super(e||{})}call(e,t){return Ye(()=>{const r=Yn(e);return ks(r,1)})}}ste.className="GlobalAveragePooling1D";Gt(ste);class ote extends ite{constructor(e){super(e||{})}call(e,t){return Ye(()=>{const r=Yn(e);return qu(r,1)})}}ote.className="GlobalMaxPooling1D";Gt(ote);class ate extends Dr{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Qs(this.dataFormat),this.inputSpec=[new Eo({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new Er}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class lte extends ate{call(e,t){return Ye(()=>{const r=Yn(e);return this.dataFormat==="channelsLast"?ks(r,[1,2]):ks(r,[2,3])})}}lte.className="GlobalAveragePooling2D";Gt(lte);class cte extends ate{call(e,t){return Ye(()=>{const r=Yn(e);return this.dataFormat==="channelsLast"?qu(r,[1,2]):qu(r,[2,3])})}}cte.className="GlobalMaxPooling2D";Gt(cte);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ute extends Dr{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,r={}){const i=t.layer,s=Lp(i,r);delete t.layer;const o={layer:s};return Object.assign(o,t),new e(o)}}class dte extends ute{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=si(e),e.length<3)throw new Ge(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=si(e);const t=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(t),i=e[1];return[r[0],i].concat(r.slice(1))}call(e,t){return Ye(()=>(e=Yn(e),xee((o,a)=>[Yn(this.layer.call(o,t)),[]],e,[],!1,null,null,!1,!0)[1]))}}dte.className="TimeDistributed";Gt(dte);function IMe(n){Lv(JAe,"BidirectionalMergeMode",n)}const DMe="concat";class hte extends ute{constructor(e){super(e);const t=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=t,this.forwardLayer=Lp(r),t.goBackwards=t.goBackwards!==!0;const i={};if(i.className=e.layer.getClassName(),i.config=t,this.backwardLayer=Lp(i),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?DMe:e.mergeMode,IMe(this.mergeMode),e.weights)throw new Er("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,r=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let t=this.forwardLayer.computeOutputShape(e);Array.isArray(t)&&Array.isArray(t[0])||(t=[t]),t=t;let r,i,s;return this.returnState&&(s=t.slice(1)),r=t[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,i=[r]):this.mergeMode==null?i=[r,r.slice()]:i=[r],this.returnState?this.mergeMode==null?i.concat(s).concat(s.slice()):[r].concat(s).concat(s.slice()):Bl(i)}apply(e,t){let r=t==null?null:t.initialState,i=t==null?null:t.constants;t==null&&(t={});const s=bee(e,r,i,this.numConstants);if(e=s.inputs,r=s.initialState,i=s.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&i==null)return super.apply(e,t);const o=[],a=[];if(r!=null){const c=r.length;if(c%2>0)throw new Ge("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,o.push(...r);const u=r.map(d=>new Eo({shape:d.shape}));this.forwardLayer.stateSpec=u.slice(0,c/2),this.backwardLayer.stateSpec=u.slice(c/2),a.push(...u)}if(i!=null)throw new Er("Support for constants in Bidirectional layers is not implemented yet.");const l=o[0]instanceof Tf;for(const c of o)if(c instanceof Tf!==l)throw new Ge("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(o),u=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=u;const f=super.apply(c,t);return this.inputSpec=d,f}else return super.apply(e,t)}call(e,t){return Ye(()=>{const r=t.initialState;let i,s;if(r==null)i=this.forwardLayer.call(e,t),s=this.backwardLayer.call(e,t);else{const l=r.slice(0,r.length/2),c=r.slice(r.length/2);i=this.forwardLayer.call(e,Object.assign(t,{initialState:l})),s=this.backwardLayer.call(e,Object.assign(t,{initialState:c}))}let o;this.returnState&&(Array.isArray(i)&&(o=i.slice(1).concat(s.slice(1))),i=i[0],s=s[0]),this.returnSequences&&(s=Zu(s,1));let a;return this.mergeMode==="concat"?a=Pz([i,s]):this.mergeMode==="sum"?a=$t(i,s):this.mergeMode==="ave"?a=ke(.5,$t(i,s)):this.mergeMode==="mul"?a=ke(i,s):this.mergeMode==null&&(a=[i,s]),this.returnState?this.mergeMode==null?a.concat(o):[a].concat(o):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Yy(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Yy(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){Array.isArray(t)&&(t=t[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[t,t]:r=t:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const s=this.forwardLayer.states.map(o=>null);return Array.isArray(r)?r.concat(s).concat(s):[r].concat(s).concat(s)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const r=Lp(t.layer);if(delete t.layer,t.numConstants!=null)throw new Er("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const i=t;return i.layer=r,new e(i)}}hte.className="Bidirectional";Gt(hte);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class fte extends Dr{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return Ye(()=>(e=Yn(e),e.dtype!=="float32"&&(e=vf(e,"float32")),$t(ke(e,this.scale),this.offset)))}}fte.className="Rescaling";Gt(fte);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:kMe,cropAndResize:OMe}=nu;class pte extends Dr{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,r,i,s,o,a,l){return Ye(()=>{let c,u=!1;const d=t/o,f=r/a,p=(i+t)/o,g=(s+r)/a,v=[d,f,p,g],b=[];e.rank===3?(u=!0,c=Mc([e])):c=e;for(let M=0;M<c.shape[0];M++)b.push(v);const x=Zd(b,[b.length,4]),_=b1(0,b.length,1,"int32"),C=OMe(c,x,_,[i,s],"nearest");return vf(u?Yn(Qu(C)):C,l)})}upsize(e,t,r,i){return Ye(()=>{const s=kMe(e,[t,r]);return vf(s,i)})}call(e,t){return Ye(()=>{const r=Yn(e),i=r.dtype,s=r.shape,o=s[s.length-3],a=s[s.length-2];let l=0;o!==this.height&&(l=Math.floor((o-this.height)/2));let c=0;return a!==this.width&&(c=Math.floor((a-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(r,l,c,this.height,this.width,o,a,i):this.upsize(e,this.height,this.width,i)})}getConfig(){const e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){e=si(e);const t=e.length-3,r=e.length-2;return e[t]=this.height,e[r]=this.width,e}}pte.className="CenterCrop";Gt(pte);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function BMe(n,e,t,r){let i=Yn(n);if(i.dtype!=="int32"&&(i=vf(i,"int32")),e==="int")return i;const s=i.shape;if(i.rank===0&&(i=na(i,-1)),e==="oneHot"&&i.shape[i.shape.length-1]!==1&&(i=na(i,-1)),i.rank>2)throw new Ge(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${s} which would result in output rank ${i.rank}.`);const o=["multiHot","oneHot"].includes(e),a=i;let l;if(typeof r<"u"&&e==="count"?l=RL(a,r,t,o):l=RL(a,[],t,o),e!=="tfIdf")return l;if(r)return ke(l,r);throw new Ge("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class mte extends Dr{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return e=si(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return Ye(()=>{e=Yn(e),e.dtype!=="int32"&&(e=vf(e,"int32"));let r;if(typeof t.countWeights<"u"){if(this.outputMode!=="count")throw new Ge(`countWeights is not used when outputMode !== count.
              Received countWeights=${t.countWeights}`);r=Yn(t.countWeights)}const i=qu(e),s=J_(e),o=kc(this.numTokens,i).bufferSync().get(0),a=Jg(s,0).bufferSync().get(0);if(!(o&&a))throw new Ge(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return BMe(e,this.outputMode,this.numTokens,r)})}}mte.className="CategoryEncoding";Gt(mte);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const $Me=["bilinear","nearest"],SG=new Set($Me);class gte extends Dr{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(SG.has(e.interpolation))this.interpolation=e.interpolation;else throw new Ge(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=si(e);const t=e[2];return[this.height,this.width,t]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return Ye(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return nu.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return nu.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...SG]} are supported`)})}}gte.className="Resizing";Gt(gte);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class yte{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}yte.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class vte extends Dr{constructor(e){super(e),this.randomGenerator=new yte(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}}vte.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const LMe=["bilinear","nearest"],wG=new Set(LMe);class bte extends vte{constructor(e){super(e);const{factor:t,interpolation:r="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new Ge(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new Ge(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new Ge(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(wG.has(r))this.interpolation=r;else throw new Ge(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){e=si(e);const t=e[2];return[this.imgHeight,-1,t]}call(e,t){return Ye(()=>{const r=Yn(e);this.imgHeight=r.shape[r.shape.length-3];const i=r.shape[r.shape.length-2];this.widthFactor=Bv([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let s=this.widthFactor.dataSync()[0]*i;s=Math.round(s);const o=[this.imgHeight,s];switch(this.interpolation){case"bilinear":return nu.resizeBilinear(e,o);case"nearest":return nu.resizeNearestNeighbor(e,o);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...wG]} are supported`)}})}}bte.className="RandomWidth";Gt(bte);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FMe=it();FMe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,n=>{n&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var hc;(function(n){n[n.DT_INVALID=0]="DT_INVALID",n[n.DT_FLOAT=1]="DT_FLOAT",n[n.DT_DOUBLE=2]="DT_DOUBLE",n[n.DT_INT32=3]="DT_INT32",n[n.DT_UINT8=4]="DT_UINT8",n[n.DT_INT16=5]="DT_INT16",n[n.DT_INT8=6]="DT_INT8",n[n.DT_STRING=7]="DT_STRING",n[n.DT_COMPLEX64=8]="DT_COMPLEX64",n[n.DT_INT64=9]="DT_INT64",n[n.DT_BOOL=10]="DT_BOOL",n[n.DT_QINT8=11]="DT_QINT8",n[n.DT_QUINT8=12]="DT_QUINT8",n[n.DT_QINT32=13]="DT_QINT32",n[n.DT_BFLOAT16=14]="DT_BFLOAT16",n[n.DT_QINT16=15]="DT_QINT16",n[n.DT_QUINT16=16]="DT_QUINT16",n[n.DT_UINT16=17]="DT_UINT16",n[n.DT_COMPLEX128=18]="DT_COMPLEX128",n[n.DT_HALF=19]="DT_HALF",n[n.DT_RESOURCE=20]="DT_RESOURCE",n[n.DT_VARIANT=21]="DT_VARIANT",n[n.DT_UINT32=22]="DT_UINT32",n[n.DT_UINT64=23]="DT_UINT64",n[n.DT_FLOAT_REF=101]="DT_FLOAT_REF",n[n.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",n[n.DT_INT32_REF=103]="DT_INT32_REF",n[n.DT_UINT8_REF=104]="DT_UINT8_REF",n[n.DT_INT16_REF=105]="DT_INT16_REF",n[n.DT_INT8_REF=106]="DT_INT8_REF",n[n.DT_STRING_REF=107]="DT_STRING_REF",n[n.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",n[n.DT_INT64_REF=109]="DT_INT64_REF",n[n.DT_BOOL_REF=110]="DT_BOOL_REF",n[n.DT_QINT8_REF=111]="DT_QINT8_REF",n[n.DT_QUINT8_REF=112]="DT_QUINT8_REF",n[n.DT_QINT32_REF=113]="DT_QINT32_REF",n[n.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",n[n.DT_QINT16_REF=115]="DT_QINT16_REF",n[n.DT_QUINT16_REF=116]="DT_QUINT16_REF",n[n.DT_UINT16_REF=117]="DT_UINT16_REF",n[n.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",n[n.DT_HALF_REF=119]="DT_HALF_REF",n[n.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",n[n.DT_VARIANT_REF=121]="DT_VARIANT_REF",n[n.DT_UINT32_REF=122]="DT_UINT32_REF",n[n.DT_UINT64_REF=123]="DT_UINT64_REF"})(hc||(hc={}));var _G;(function(n){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(n.CheckpointFormatVersion||(n.CheckpointFormatVersion={}))})(_G||(_G={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PMe={};function xte(n){return PMe[n]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z(n,e,t,r,i){const s=e.inputParams[n];if(s&&s.inputIndexStart!==void 0){const a=s.inputIndexStart,l=s.inputIndexEnd===0?void 0:s.inputIndexEnd===void 0?a+1:s.inputIndexEnd,c=a<0?e.inputNames.length+a:a;if(s.type==="tensor")return ra(e.inputNames[c],t,r,i);if(s.type==="tensors"){const f=e.inputs.slice(a,l);return e.inputNames.slice(a,l).filter((g,v)=>{var b;return((b=f[v])===null||b===void 0?void 0:b.op)!=="NoOp"}).map(g=>ra(g,t,r,i))}const u=ra(e.inputNames[c],t,r,i),d=u.dataSync();return s.type==="number"?d[0]:Xu(u.shape,d)}const o=e.attrParams[n];return o&&o.value}function ra(n,e,t,r){const[i,s]=fc(n,t);if(r!=null){const a=r.getHashTableHandleByName(i);if(a!=null)return a}const o=t.currentContextIds.find(a=>!!e[nN(i,a)]);return o!==void 0?e[nN(i,o)][s]:void 0}function CG(n,e,t){return e[nN(n,t.currentContextId)]}function Ap(n,e){const[t,r,i]=fc(n,e);return[nN(t,e&&e.currentContextId),r,i]}function nN(n,e){return e?`${n}-${e}`:n}function fc(n,e){if(n==="")return["",0,void 0];const t=e!=null&&e.parseNodeNameCache!=null;if(t){const s=e.parseNodeNameCache.get(n);if(s!=null)return s}const r=n.split(":");let i;if(r.length===1)i=[n,0,void 0];else{const s=r[0],o=r.length===3?r[1]:void 0,a=Number(r[r.length-1]);i=[s,a,o]}return t&&e.parseNodeNameCache.set(n,i),i}function kM(n,e,t){let r=Z("pad",n,e,t);if(r==="explicit"){r=Z("explicitPaddings",n,e,t);const i=[[0,0],[0,0],[0,0],[0,0]];for(let s=0;s<4;s++)i[s][0]=r[s*2],i[s][1]=r[s*2+1];return i}return r}function Tp(n){return n.kept?n:$p(n)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UMe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],zMe=Object.freeze(Object.defineProperty({__proto__:null,json:UMe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HMe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],VMe=Object.freeze(Object.defineProperty({__proto__:null,json:HMe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GMe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],WMe=Object.freeze(Object.defineProperty({__proto__:null,json:GMe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jMe=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],XMe=Object.freeze(Object.defineProperty({__proto__:null,json:jMe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qMe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],KMe=Object.freeze(Object.defineProperty({__proto__:null,json:qMe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YMe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],JMe=Object.freeze(Object.defineProperty({__proto__:null,json:YMe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZMe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],QMe=Object.freeze(Object.defineProperty({__proto__:null,json:ZMe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eRe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],tRe=Object.freeze(Object.defineProperty({__proto__:null,json:eRe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nRe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],rRe=Object.freeze(Object.defineProperty({__proto__:null,json:nRe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iRe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],sRe=Object.freeze(Object.defineProperty({__proto__:null,json:iRe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oRe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],aRe=Object.freeze(Object.defineProperty({__proto__:null,json:oRe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lRe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],cRe=Object.freeze(Object.defineProperty({__proto__:null,json:lRe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uRe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],dRe=Object.freeze(Object.defineProperty({__proto__:null,json:uRe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hRe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],fRe=Object.freeze(Object.defineProperty({__proto__:null,json:hRe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pRe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],mRe=Object.freeze(Object.defineProperty({__proto__:null,json:pRe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gRe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],yRe=Object.freeze(Object.defineProperty({__proto__:null,json:gRe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vRe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],bRe=Object.freeze(Object.defineProperty({__proto__:null,json:vRe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xRe=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],SRe=Object.freeze(Object.defineProperty({__proto__:null,json:xRe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wRe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],_Re=Object.freeze(Object.defineProperty({__proto__:null,json:wRe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EG{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[zMe,VMe,WMe,XMe,KMe,JMe,QMe,tRe,rRe,sRe,aRe,cRe,dRe,fRe,mRe,yRe,bRe,SRe,_Re],t=[].concat(...e.map(r=>r.json));this.opMappers=t.reduce((r,i)=>(r[i.tfOpName]=i,r),{})}transformGraph(e,t={}){const r=e.node,i=[],s=[],o=[],a=r.reduce((v,b)=>(v[b.name]=this.mapNode(b),b.op.startsWith("Placeholder")?i.push(v[b.name]):b.op==="Const"?s.push(v[b.name]):(b.input==null||b.input.length===0)&&o.push(v[b.name]),v),{});let l=[];const c=[];let u={},d={};t!=null&&(u=this.mapSignatureEntries(t.inputs),d=this.mapSignatureEntries(t.outputs));const f=Object.keys(a);f.forEach(v=>{const b=a[v];b.inputNames.forEach((x,_)=>{const[E,,C]=Ap(x),M=a[E];if(M.outputs!=null){const R=M.outputs.indexOf(C);if(R!==-1){const L=`${E}:${R}`;b.inputNames[_]=L}}b.inputs.push(M),M.children.push(b)})}),Object.keys(d).length===0?f.forEach(v=>{const b=a[v];b.children.length===0&&c.push(b)}):Object.keys(d).forEach(v=>{const[b]=Ap(v),x=a[b];x!=null&&(x.signatureKey=d[v],c.push(x))}),Object.keys(u).length>0?Object.keys(u).forEach(v=>{const[b]=Ap(v),x=a[b];x&&(x.signatureKey=u[v],l.push(x))}):l=i;let p={};e.library!=null&&e.library.function!=null&&(p=e.library.function.reduce((v,b)=>(v[b.signature.name]=this.mapFunction(b),v),{}));const g={nodes:a,inputs:l,outputs:c,weights:s,placeholders:i,signature:t,functions:p};return o.length>0&&(g.initNodes=o),g}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,r)=>(t[e[r].name]=r,t),{})}mapNode(e){const t=xte(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(i=>i.startsWith("^")?i.slice(1):i),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return t.inputs!=null&&(r.inputParams=t.inputs.reduce((i,s)=>(i[s.name]={type:s.type,inputIndexStart:s.start,inputIndexEnd:s.end},i),{})),t.attrs!=null&&(r.attrParams=t.attrs.reduce((i,s)=>{const o=s.type;let a;switch(s.type){case"string":a=GL(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=GL(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"string[]":a=JL(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=JL(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"number":a=jL(e.attr,s.tfName,s.defaultValue||0),a===void 0&&s.tfDeprecatedName&&(a=jL(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"number[]":a=YL(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=YL(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool":a=WL(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=WL(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool[]":a=QL(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=QL(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape":a=KL(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=KL(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape[]":a=ZL(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=ZL(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype":a=XL(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=XL(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype[]":a=qL(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=qL(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"func":a=AG(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=AG(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${s.type} for op: ${e.op}`)}return i[s.name]={value:a,type:o},i},{})),r}mapFunction(e){const t=e.nodeDef,r=[],i=[];let s={};t!=null&&(s=t.reduce((d,f)=>(d[f.name]=this.mapNode(f),f.op==="Const"&&i.push(d[f.name]),d),{}));const o=[],a=[];e.signature.inputArg.forEach(d=>{const[f]=Ap(d.name),p={name:f,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:i5(d.type),type:"dtype"}},children:[]};p.signatureKey=d.name,o.push(p),s[f]=p}),Object.keys(s).forEach(d=>{const f=s[d];f.inputNames.forEach((p,g)=>{const[v,,b]=Ap(p),x=s[v];if(x.outputs!=null){const _=x.outputs.indexOf(b);if(_!==-1){const E=`${v}:${_}`;f.inputNames[g]=E}}f.inputs.push(x),x.children.push(f)})});const c=e.ret;e.signature.outputArg.forEach(d=>{const[f,p]=Ap(c[d.name]),g=s[f];g!=null&&(g.defaultOutput=p,a.push(g))});const u=this.mapArgsToSignature(e);return{nodes:s,inputs:o,outputs:a,weights:i,placeholders:r,signature:u}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((t,r)=>(t[r.name]=this.mapArgToTensorInfo(r),t),{}),outputs:e.signature.outputArg.reduce((t,r)=>(t[r.name]=this.mapArgToTensorInfo(r,e.ret),t),{})}}mapArgToTensorInfo(e,t){let r=e.name;return t!=null&&(r=t[r]),{name:r,dtype:e.type}}}function CRe(n){const e=it().global;if(typeof e.atob<"u")return e.atob(n);if(typeof Buffer<"u")return new Buffer(n,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function Ste(n,e){const t=Array.isArray(n)?String.fromCharCode.apply(null,n):CRe(n);return e?t:t.toLowerCase()}function GL(n,e,t,r=!1){const i=n[e];return i!=null?Ste(i.s,r):t}function WL(n,e,t){const r=n[e];return r?r.b:t}function jL(n,e,t){const r=n[e]||{},i=r.i!=null?r.i:r.f!=null?r.f:t;return typeof i=="number"?i:parseInt(i,10)}function i5(n){switch(typeof n=="string"&&(n=hc[n]),n){case hc.DT_FLOAT:case hc.DT_HALF:return"float32";case hc.DT_INT32:case hc.DT_INT64:case hc.DT_INT8:case hc.DT_UINT8:return"int32";case hc.DT_BOOL:return"bool";case hc.DT_DOUBLE:return"float32";case hc.DT_STRING:return"string";case hc.DT_COMPLEX64:case hc.DT_COMPLEX128:return"complex64";default:return null}}function AG(n,e,t){const r=n[e];return r&&r.func?r.func.name:t}function XL(n,e,t){const r=n[e];return r&&r.type?i5(r.type):t}function qL(n,e,t){const r=n[e];return r&&r.list&&r.list.type?r.list.type.map(i=>i5(i)):t}function wte(n){if(!n.unknownRank)return n.dim!=null?n.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function KL(n,e,t){const r=n[e];return r&&r.shape?wte(r.shape):t}function YL(n,e,t){const r=n[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(i=>typeof i=="number"?i:parseInt(i,10)):t}function JL(n,e,t,r=!1){const i=n[e];return i&&i.list&&i.list.s?i.list.s.map(s=>Ste(s,r)):t}function ZL(n,e,t){const r=n[e];return r&&r.list&&r.list.shape?r.list.shape.map(i=>wte(i)):t}function QL(n,e,t){const r=n[e];return r&&r.list&&r.list.b?r.list.b:t}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ERe{constructor(e,t,r){this.node=e,this.tensorMap=t,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(i=>this.getInput(i)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((i,s)=>(i[s]=this.getAttr(s),i),{}))}getInput(e){return ra(e,this.tensorMap,this.context)}getAttr(e,t){const r=this.node.rawAttrs[e];if(r.tensor!=null)return ra(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return jL(this.node.rawAttrs,e,t);if(r.s!=null)return GL(this.node.rawAttrs,e,t);if(r.b!=null)return WL(this.node.rawAttrs,e,t);if(r.shape!=null)return KL(this.node.rawAttrs,e,t);if(r.type!=null)return XL(this.node.rawAttrs,e,t);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return YL(this.node.rawAttrs,e,t);if(r.list.s!=null)return JL(this.node.rawAttrs,e,t);if(r.list.shape!=null)return ZL(this.node.rawAttrs,e,t);if(r.list.b!=null)return QL(this.node.rawAttrs,e,t);if(r.list.type!=null)return qL(this.node.rawAttrs,e,t)}return t}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ha=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:UY,abs:xo,acos:sJ,acosh:oJ,add:$t,addN:Pbe,all:AU,any:WR,argMax:g1,argMin:aJ,asin:lJ,asinh:cJ,atan:uJ,atan2:dJ,atanh:hJ,avgPool:GD,avgPool3d:fJ,basicLSTMCell:lxe,batchNorm:FE,batchNorm2d:pJ,batchNorm3d:mJ,batchNorm4d:gJ,batchToSpaceND:WD,bincount:yJ,bitwiseAnd:yxe,booleanMaskAsync:t_e,broadcastArgs:bxe,broadcastTo:Vx,buffer:Ar,cast:nn,ceil:vJ,clipByValue:Vl,clone:$p,complex:Rg,concat:$s,concat1d:bJ,concat2d:xJ,concat3d:SJ,concat4d:wJ,conv1d:MU,conv2d:Dg,conv2dTranspose:NU,conv3d:_J,conv3dTranspose:EJ,cos:jD,cosh:IU,cosineWindow:nz,cumprod:jR,cumsum:DU,denseBincount:RL,depthToSpace:AJ,depthwiseConv2d:PE,diag:Hxe,dilation2d:TJ,div:mn,divNoNan:MJ,dot:RJ,dropout:tZ,einsum:Ix,elu:UE,enclosingPowerOfTwo:nZ,ensureShape:Zxe,equal:sh,erf:kU,euclideanNorm:DJ,exp:il,expandDims:na,expm1:kJ,eye:BU,fft:o3,fill:G1,floor:HE,floorDiv:EU,fused:__e,gather:VE,gatherND:d_e,greater:kc,greaterEqual:Jg,ifft:tC,imag:XD,image:nu,inTopKAsync:m_e,irfft:YU,isFinite:OJ,isInf:BJ,isNaN:$J,leakyRelu:qD,less:Z_,lessEqual:Ov,linalg:uZ,linspace:C1e,localResponseNormalization:LJ,log:ou,log1p:KD,logSigmoid:FJ,logSoftmax:$U,logSumExp:YD,logicalAnd:Af,logicalNot:JD,logicalOr:LU,logicalXor:PJ,losses:eEe,lowerBound:U1e,matMul:Br,max:qu,maxPool:ZD,maxPool3d:UJ,maxPoolWithArgmax:G1e,maximum:im,mean:ks,meshgrid:X1e,min:J_,minimum:gv,mirrorPad:zJ,mod:HJ,moments:QD,movingAverage:i_e,mul:ke,multiRNNCell:Q1e,multinomial:tSe,neg:ss,norm:zE,notEqual:v1,oneHot:PU,ones:xc,onesLike:au,op:Ie,outerProduct:oSe,pad:Zg,pad1d:cSe,pad2d:dSe,pad3d:fSe,pad4d:mSe,pool:VJ,pow:Gp,prelu:t3,print:iJ,prod:GJ,raggedGather:_Se,raggedRange:ESe,raggedTensorToTensor:TSe,rand:RSe,randomGamma:JSe,randomNormal:zU,randomStandardNormal:ewe,randomUniform:Bv,randomUniformInt:rwe,range:b1,real:Q_,reciprocal:WJ,relu:$f,relu6:HU,reshape:Fe,reverse:Zu,reverse1d:uwe,reverse2d:hwe,reverse3d:pwe,reverse4d:gwe,rfft:a3,round:VU,rsqrt:GU,scalar:$n,scatterND:o_e,searchSorted:FU,selu:WU,separableConv2d:jU,setdiff1dAsync:wwe,sigmoid:Qd,sign:jJ,signal:QCe,sin:XU,sinh:qU,slice:Kn,slice1d:r3,slice2d:KU,slice3d:i3,slice4d:eC,softmax:s3,softplus:W1,spaceToBatchND:e3,sparse:tEe,sparseToDense:c_e,spectral:ZCe,split:wc,sqrt:ca,square:Ki,squaredDifference:JU,squeeze:js,stack:Mc,step:j1,stridedSlice:XJ,string:nEe,sub:vn,sum:wn,tan:qJ,tanh:mv,tensor:Zd,tensor1d:ho,tensor2d:Ky,tensor3d:KJ,tensor4d:Hwe,tensor5d:Vwe,tensor6d:Gwe,tensorScatterUpdate:jwe,tile:Vu,topk:JJ,transpose:Xr,truncatedNormal:QU,unique:ZJ,unsortedSegmentSum:ez,unstack:Qu,upperBound:Zwe,variable:QJ,where:Ia,whereAsync:eZ,zeros:_o,zerosLike:qr},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ARe=(n,e,t,r=ha)=>{switch(n.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(Z("a",n,e,t),Z("b",n,e,t))];case"AddN":return[r.addN(Z("tensors",n,e,t))];case"FloorMod":case"Mod":return[r.mod(Z("a",n,e,t),Z("b",n,e,t))];case"Mul":return[r.mul(Z("a",n,e,t),Z("b",n,e,t))];case"RealDiv":case"Div":return[r.div(Z("a",n,e,t),Z("b",n,e,t))];case"DivNoNan":return[r.divNoNan(Z("a",n,e,t),Z("b",n,e,t))];case"FloorDiv":return[r.floorDiv(Z("a",n,e,t),Z("b",n,e,t))];case"Sub":return[r.sub(Z("a",n,e,t),Z("b",n,e,t))];case"Minimum":return[r.minimum(Z("a",n,e,t),Z("b",n,e,t))];case"Maximum":return[r.maximum(Z("a",n,e,t),Z("b",n,e,t))];case"Pow":return[r.pow(Z("a",n,e,t),Z("b",n,e,t))];case"SquaredDifference":return[r.squaredDifference(Z("a",n,e,t),Z("b",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TRe=(n,e,t,r=ha)=>{switch(n.op){case"Abs":case"ComplexAbs":return[r.abs(Z("x",n,e,t))];case"Acos":return[r.acos(Z("x",n,e,t))];case"Acosh":return[r.acosh(Z("x",n,e,t))];case"Asin":return[r.asin(Z("x",n,e,t))];case"Asinh":return[r.asinh(Z("x",n,e,t))];case"Atan":return[r.atan(Z("x",n,e,t))];case"Atan2":return[r.atan2(Z("x",n,e,t),Z("y",n,e,t))];case"Atanh":return[r.atanh(Z("x",n,e,t))];case"Ceil":return[r.ceil(Z("x",n,e,t))];case"Complex":return[r.complex(Z("real",n,e,t),Z("imag",n,e,t))];case"Cos":return[r.cos(Z("x",n,e,t))];case"Cosh":return[r.cosh(Z("x",n,e,t))];case"Elu":return[r.elu(Z("x",n,e,t))];case"Erf":return[r.erf(Z("x",n,e,t))];case"Exp":return[r.exp(Z("x",n,e,t))];case"Expm1":return[r.expm1(Z("x",n,e,t))];case"Floor":return[r.floor(Z("x",n,e,t))];case"Log":return[r.log(Z("x",n,e,t))];case"Log1p":return[r.log1p(Z("x",n,e,t))];case"Imag":return[r.imag(Z("x",n,e,t))];case"Neg":return[r.neg(Z("x",n,e,t))];case"Reciprocal":return[r.reciprocal(Z("x",n,e,t))];case"Real":return[r.real(Z("x",n,e,t))];case"Relu":return[r.relu(Z("x",n,e,t))];case"Round":return[r.round(Z("x",n,e,t))];case"Selu":return[r.selu(Z("x",n,e,t))];case"Sigmoid":return[r.sigmoid(Z("x",n,e,t))];case"Sin":return[r.sin(Z("x",n,e,t))];case"Sign":return[r.sign(Z("x",n,e,t))];case"Sinh":return[r.sinh(Z("x",n,e,t))];case"Softplus":return[r.softplus(Z("x",n,e,t))];case"Sqrt":return[r.sqrt(Z("x",n,e,t))];case"Square":return[r.square(Z("x",n,e,t))];case"Tanh":return[r.tanh(Z("x",n,e,t))];case"Tan":return[r.tan(Z("x",n,e,t))];case"ClipByValue":return[r.clipByValue(Z("x",n,e,t),Z("clipValueMin",n,e,t),Z("clipValueMax",n,e,t))];case"Relu6":return[r.relu6(Z("x",n,e,t))];case"Rsqrt":return[r.rsqrt(ra(n.inputNames[0],e,t))];case"LeakyRelu":return[r.leakyRelu(Z("x",n,e,t),Z("alpha",n,e,t))];case"Prelu":return[r.prelu(Z("x",n,e,t),Z("alpha",n,e,t))];case"IsNan":return[r.isNaN(ra(n.inputNames[0],e,t))];case"IsInf":return[r.isInf(ra(n.inputNames[0],e,t))];case"IsFinite":return[r.isFinite(ra(n.inputNames[0],e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bu(n,e,t=""){if(!(typeof n=="number"||typeof e=="number")){de(n.length===e.length,()=>t+` Shapes ${n} and ${e} must match`);for(let r=0;r<n.length;r++){const i=n[r],s=e[r];de(i<0||s<0||i===s,()=>t+` Shapes ${n} and ${e} must match`)}}}function TG(n){return!(typeof n=="number"||n.some(e=>e<0))}function Bw(n,e,t){let r=eF(n,t);const i=!TG(r);if(i&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(i&&e.forEach(s=>{r=eF(s.shape,r)}),!TG(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function eF(n,e){if(typeof n=="number")return e;if(typeof e=="number")return n;if(n.length!==e.length)throw new Error(`Incompatible ranks during merge: ${n} vs. ${e}`);const t=[];for(let r=0;r<n.length;++r){const i=n[r],s=e[r];if(i>=0&&s>=0&&i!==s)throw new Error(`Incompatible shape during merge: ${n} vs. ${e}`);t[r]=i>=0?i:s}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MRe{constructor(e,t,r,i,s,o,a){this.name=e,this.dtype=t,this.maxSize=r,this.elementShape=i,this.identicalElementShapes=s,this.dynamicSize=o,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=$n(0),Uo(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.tensor.id))&&t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(t=>this.read(t))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=t.shape),Bu(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=t,Uo(t),r.written=!0,this.tensors[e]=r}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach((r,i)=>this.write(r,t[i]))}gather(e,t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let i=0;i<this.size();i++)e.push(i)}if(e.length===0)return Zd([],[0].concat(this.elementShape));const r=this.readMany(e);return Bu(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Mc(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return Zd([],[0].concat(this.elementShape));const t=[];for(let i=0;i<this.size();i++)t.push(i);const r=this.readMany(t);return Bu(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),$s(r,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,Qu(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let r=0;const i=e.map(l=>(r+=l,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const s=r===0?0:t.size/r,o=[];Ye(()=>{t=Fe(t,[1,r,s]);for(let l=0;l<e.length;++l){const u=[0,l===0?0:i[l-1],0],d=[1,e[l],s];o[l]=Fe(Kn(t,u,d),this.elementShape)}return o});const a=[];for(let l=0;l<e.length;l++)a[l]=l;this.writeMany(a,o)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bv{get id(){return this.idTensor.id}constructor(e,t,r,i=-1){this.tensors=e,this.elementShape=t,this.elementDtype=r,e!=null&&e.forEach(s=>{if(r!==s.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${s.dtype}`);Bu(t,s.shape,"TensorList shape mismatch: "),Uo(s)}),this.idTensor=$n(0),this.maxNumElements=i,Uo(this.idTensor)}copy(){return new bv([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.id))&&t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,r=-1){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);Bu(e,this.elementShape,"TensorList shape mismatch: ");const i=Bw(this.elementShape,this.tensors,e);return Ye(()=>{const s=this.tensors.map(o=>Fe(o,i));return Mc(s,0)})}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=Bw(this.elementShape,this.tensors,e),i=this.tensors.pop();return i.kept=!1,Bu(i.shape,e,"TensorList shape mismatch: "),Fe(i,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(Bu(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Uo(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const t=new bv([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)t.tensors[r]=this.tensors[r];return t}getItem(e,t,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);Bu(this.tensors[e].shape,t,"TensorList shape mismatch: ");const i=Bw(this.elementShape,this.tensors,t);return Fe(this.tensors[e],i)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);Bu(this.elementShape,t.shape,"TensorList shape mismatch: "),Uo(t),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,r){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);Bu(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const i=Bw(this.elementShape,this.tensors,r);return e.length===0?Zd([],[0].concat(i)):Ye(()=>{const s=e.map(o=>Fe(this.tensors[o],i));return Mc(s,0)})}concat(e,t){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);Bu(this.elementShape,t,"TensorList shape mismatch: ");const r=Bw(this.elementShape,this.tensors,t);return this.size()===0?Zd([],[0].concat(r)):Ye(()=>{const i=this.tensors.map(s=>Fe(s,r));return $s(i,0)})}}function RRe(n,e,t){const r=n.dtype;if(n.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${n.shape}`);if(n.dtype!==t)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${t}`);const i=n.shape.slice(1);Bu(i,e,"TensorList shape mismatch: ");const s=Qu(n);return new bv(s,e,r)}function NRe(n,e,t,r){return new bv([],n,e,r)}function IRe(n,e,t,r){if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const i=Math.max(...e);if(r!=null&&r!==-1&&i>=r)throw new Error(`Max index must be < array size (${i}  vs. ${r})`);const s=new bv([],t,n.dtype,r),o=Qu(n,0);return e.forEach((a,l)=>{s.setItem(a,o[l])}),s}function DRe(n,e,t){let r=0;const i=e.map(u=>(r+=u,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);const s=n.shape.slice(1),o=eF(s,t),a=r===0?0:n.size/r,l=Ye(()=>{const u=[];n=Fe(n,[1,r,a]);for(let d=0;d<e.length;++d){const p=[0,d===0?0:i[d-1],0],g=[1,e[d],a];u[d]=Fe(Kn(n,p,g),o)}return n.dispose(),u}),c=new bv([],t,n.dtype,e.length);for(let u=0;u<l.length;u++)c.setItem(u,l[u]);return c}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kRe=async(n,e,t)=>{switch(n.op){case"If":case"StatelessIf":{const r=Z("thenBranch",n,e,t),i=Z("elseBranch",n,e,t),s=Z("cond",n,e,t),o=Z("args",n,e,t);return(await s.data())[0]?t.functionMap[r].executeFunctionAsync(o,t.tensorArrayMap,t.tensorListMap):t.functionMap[i].executeFunctionAsync(o,t.tensorArrayMap,t.tensorListMap)}case"While":case"StatelessWhile":{const r=Z("body",n,e,t),i=Z("cond",n,e,t),s=Z("args",n,e,t),o=await t.functionMap[i].executeFunctionAsync(s,t.tensorArrayMap,t.tensorListMap),a=s.map(u=>u.id);let l=await o[0].data();o.forEach(u=>{!u.kept&&a.indexOf(u.id)===-1&&u.dispose()});let c=s;for(;l[0];){const u=c;c=await t.functionMap[r].executeFunctionAsync(c,t.tensorArrayMap,t.tensorListMap);const d=c.map(p=>p.id);u.forEach(p=>{!p.kept&&a.indexOf(p.id)===-1&&d.indexOf(p.id)===-1&&p.dispose()});const f=await t.functionMap[i].executeFunctionAsync(c,t.tensorArrayMap,t.tensorListMap);l=await f[0].data(),f.forEach(p=>{!p.kept&&a.indexOf(p.id)===-1&&d.indexOf(p.id)===-1&&p.dispose()})}return c}case"LoopCond":{const r=Z("pred",n,e,t);return[Tp(r)]}case"Switch":{const r=Z("pred",n,e,t);let i=Z("data",n,e,t);return i.kept||(i=Tp(i)),(await r.data())[0]?[void 0,i]:[i,void 0]}case"Merge":{const r=n.inputNames.find(i=>ra(i,e,t)!==void 0);if(r){const i=ra(r,e,t);return[Tp(i)]}return}case"Enter":{const r=Z("frameName",n,e,t),i=Z("tensor",n,e,t);return t.enterFrame(r),[Tp(i)]}case"Exit":{const r=Z("tensor",n,e,t);return t.exitFrame(),[Tp(r)]}case"NextIteration":{const r=Z("tensor",n,e,t);return t.nextIteration(),[Tp(r)]}case"TensorArrayV3":{const r=Z("size",n,e,t),i=Z("dtype",n,e,t),s=Z("elementShape",n,e,t),o=Z("dynamicSize",n,e,t),a=Z("clearAfterRead",n,e,t),l=Z("identicalElementShapes",n,e,t),c=Z("name",n,e,t),u=new MRe(c,i,r,s,l,o,a);return t.addTensorArray(u),[u.idTensor,$n(1)]}case"TensorArrayWriteV3":{const r=Z("tensorArrayId",n,e,t),i=Z("index",n,e,t),s=Z("tensor",n,e,t),o=t.getTensorArray(r.id);return o.write(i,s),[o.idTensor]}case"TensorArrayReadV3":{const r=Z("tensorArrayId",n,e,t),i=Z("index",n,e,t);return[t.getTensorArray(r.id).read(i)]}case"TensorArrayGatherV3":{const r=Z("tensorArrayId",n,e,t),i=Z("indices",n,e,t),s=Z("dtype",n,e,t);return[t.getTensorArray(r.id).gather(i,s)]}case"TensorArrayScatterV3":{const r=Z("tensorArrayId",n,e,t),i=Z("indices",n,e,t),s=Z("tensor",n,e,t),o=t.getTensorArray(r.id);return o.scatter(i,s),[o.idTensor]}case"TensorArrayConcatV3":{const r=Z("tensorArrayId",n,e,t),i=t.getTensorArray(r.id),s=Z("dtype",n,e,t);return[i.concat(s)]}case"TensorArraySplitV3":{const r=Z("tensorArrayId",n,e,t),i=Z("tensor",n,e,t),s=Z("lengths",n,e,t),o=t.getTensorArray(r.id);return o.split(s,i),[o.idTensor]}case"TensorArraySizeV3":{const r=Z("tensorArrayId",n,e,t),i=t.getTensorArray(r.id);return[$n(i.size(),"int32")]}case"TensorArrayCloseV3":{const r=Z("tensorArrayId",n,e,t),i=t.getTensorArray(r.id);return i.clearAndClose(),[i.idTensor]}case"TensorListSetItem":{const r=Z("tensorListId",n,e,t),i=Z("index",n,e,t),s=Z("tensor",n,e,t),o=t.getTensorList(r.id);return o.setItem(i,s),[o.idTensor]}case"TensorListGetItem":{const r=Z("tensorListId",n,e,t),i=Z("index",n,e,t),s=Z("elementShape",n,e,t),o=Z("elementDType",n,e,t);return[t.getTensorList(r.id).getItem(i,s,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=Z("indices",n,e,t),i=Z("tensor",n,e,t),s=Z("elementShape",n,e,t),o=Z("numElements",n,e,t),a=IRe(i,r,s,o);return t.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=Z("elementShape",n,e,t),i=Z("elementDType",n,e,t);let s;n.op==="TensorListReserve"?s="numElements":s="maxNumElements";const o=Z(s,n,e,t),a=n.op==="TensorListReserve"?-1:o,l=NRe(r,i,o,a);return t.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=Z("tensorListId",n,e,t),i=Z("indices",n,e,t),s=Z("elementShape",n,e,t),o=Z("elementDType",n,e,t);return[t.getTensorList(r.id).gather(i,o,s)]}case"TensorListStack":{const r=Z("tensorListId",n,e,t),i=Z("elementShape",n,e,t),s=Z("elementDType",n,e,t),o=Z("numElements",n,e,t);return[t.getTensorList(r.id).stack(i,s,o)]}case"TensorListFromTensor":{const r=Z("tensor",n,e,t),i=Z("elementShape",n,e,t),s=Z("elementDType",n,e,t),o=RRe(r,i,s);return t.addTensorList(o),[o.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=Z("tensorListId",n,e,t),i=t.getTensorList(r.id),s=Z("dtype",n,e,t),o=Z("elementShape",n,e,t);return[i.concat(s,o)]}case"TensorListPushBack":{const r=Z("tensorListId",n,e,t),i=Z("tensor",n,e,t),s=t.getTensorList(r.id);return s.pushBack(i),[s.idTensor]}case"TensorListPopBack":{const r=Z("tensorListId",n,e,t),i=Z("elementShape",n,e,t),s=Z("elementDType",n,e,t);return[t.getTensorList(r.id).popBack(i,s)]}case"TensorListSplit":{const r=Z("tensor",n,e,t),i=Z("elementShape",n,e,t),s=Z("lengths",n,e,t),o=DRe(r,s,i);return t.addTensorList(o),[o.idTensor]}case"TensorListLength":{const r=Z("tensorListId",n,e,t),i=t.getTensorList(r.id);return[$n(i.size(),"int32")]}case"TensorListResize":{const r=Z("tensorListId",n,e,t),i=Z("size",n,e,t),o=t.getTensorList(r.id).resize(i);return t.addTensorList(o),[o.idTensor]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MG(n,e,t){const[r,i]=Z("fusedOps",n,e,t),s=r==="biasadd",o=!s,a=i==="prelu",l=r==="fusedbatchnorm",c=Z("numArgs",n,e,t);if(s){if(a&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&s&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const u=Z("strides",n,e,t),d=kM(n,e,t),f=Z("dataFormat",n,e,t).toUpperCase(),p=Z("dilations",n,e,t);let[g,v]=Z("args",n,e,t);o&&(v=g,g=void 0);const b=Z("leakyreluAlpha",n,e,t);return{stride:u,pad:d,dataFormat:f,dilations:p,biasArg:g,preluArg:v,activationFunc:i,leakyreluAlpha:b}}const ORe=(n,e,t,r=ha)=>{switch(n.op){case"Conv1D":{const i=Z("stride",n,e,t),s=Z("pad",n,e,t),o=Z("dataFormat",n,e,t).toUpperCase(),a=Z("dilation",n,e,t);return[r.conv1d(Z("x",n,e,t),Z("filter",n,e,t),i,s,o,a)]}case"Conv2D":{const i=Z("strides",n,e,t),s=kM(n,e,t),o=Z("dataFormat",n,e,t).toUpperCase(),a=Z("dilations",n,e,t);return[r.conv2d(Z("x",n,e,t),Z("filter",n,e,t),[i[1],i[2]],s,o,[a[1],a[2]])]}case"_FusedConv2D":{const{stride:i,pad:s,dataFormat:o,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=MG(n,e,t);return[r.fused.conv2d({x:Z("x",n,e,t),filter:Z("filter",n,e,t),strides:[i[1],i[2]],pad:s,dataFormat:o,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:i,pad:s,dataFormat:o,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=MG(n,e,t);return[r.fused.depthwiseConv2d({x:Z("x",n,e,t),filter:Z("filter",n,e,t),strides:[i[1],i[2]],pad:s,dataFormat:o,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const i=Z("outputShape",n,e,t),s=Z("strides",n,e,t),o=kM(n,e,t);return[r.conv2dTranspose(Z("x",n,e,t),Z("filter",n,e,t),i,[s[1],s[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const i=Z("strides",n,e,t),s=kM(n,e,t),o=Z("dilations",n,e,t),a=Z("dataFormat",n,e,t).toUpperCase();return[r.depthwiseConv2d(Z("input",n,e,t),Z("filter",n,e,t),[i[1],i[2]],s,a,[o[1],o[2]])]}case"Conv3D":{const i=Z("strides",n,e,t),s=Z("pad",n,e,t),o=Z("dataFormat",n,e,t).toUpperCase(),a=Z("dilations",n,e,t);return[r.conv3d(Z("x",n,e,t),Z("filter",n,e,t),[i[1],i[2],i[3]],s,o,[a[1],a[2],a[3]])]}case"AvgPool":{const i=Z("strides",n,e,t),s=Z("pad",n,e,t),o=Z("kernelSize",n,e,t);return[r.avgPool(Z("x",n,e,t),[o[1],o[2]],[i[1],i[2]],s)]}case"MaxPool":{const i=Z("strides",n,e,t),s=Z("pad",n,e,t),o=Z("kernelSize",n,e,t);return[r.maxPool(Z("x",n,e,t),[o[1],o[2]],[i[1],i[2]],s)]}case"MaxPoolWithArgmax":{const i=Z("strides",n,e,t),s=Z("pad",n,e,t),o=Z("kernelSize",n,e,t),a=Z("includeBatchInIndex",n,e,t),{result:l,indexes:c}=r.maxPoolWithArgmax(Z("x",n,e,t),[o[1],o[2]],[i[1],i[2]],s,a);return[l,c]}case"AvgPool3D":{const i=Z("strides",n,e,t),s=Z("pad",n,e,t),o=Z("kernelSize",n,e,t);return[r.avgPool3d(Z("x",n,e,t),[o[1],o[2],o[3]],[i[1],i[2],i[3]],s)]}case"MaxPool3D":{const i=Z("strides",n,e,t),s=Z("pad",n,e,t),o=Z("kernelSize",n,e,t);return[r.maxPool3d(Z("x",n,e,t),[o[1],o[2],o[3]],[i[1],i[2],i[3]],s)]}case"Dilation2D":{const i=Z("strides",n,e,t),s=Z("pad",n,e,t),o=Z("dilations",n,e,t),a=i[1],l=i[2],c=o[1],u=o[2];return[r.dilation2d(Z("x",n,e,t),Z("filter",n,e,t),[a,l],s,[c,u],"NHWC")]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BRe=(n,e,t,r=ha)=>{switch(n.op){case"Fill":{const i=Z("shape",n,e,t),s=Z("dtype",n,e,t),o=Z("value",n,e,t);return[r.fill(i,o,s)]}case"LinSpace":{const i=Z("start",n,e,t),s=Z("stop",n,e,t),o=Z("num",n,e,t);return[r.linspace(i,s,o)]}case"Multinomial":{const i=Z("logits",n,e,t),s=Z("numSamples",n,e,t),o=Z("seed",n,e,t);return[r.multinomial(i,s,o)]}case"OneHot":{const i=Z("indices",n,e,t),s=Z("depth",n,e,t),o=Z("onValue",n,e,t),a=Z("offValue",n,e,t),l=Z("dtype",n,e,t);return[r.oneHot(i,s,o,a,l)]}case"Ones":return[r.ones(Z("shape",n,e,t),Z("dtype",n,e,t))];case"OnesLike":return[r.onesLike(Z("x",n,e,t))];case"RandomStandardNormal":return[r.randomStandardNormal(Z("shape",n,e,t),Z("dtype",n,e,t),Z("seed",n,e,t))];case"RandomUniform":return[r.randomUniform(Z("shape",n,e,t),Z("minval",n,e,t),Z("maxval",n,e,t),Z("dtype",n,e,t))];case"RandomUniformInt":return[r.randomUniformInt(Z("shape",n,e,t),Z("minval",n,e,t),Z("maxval",n,e,t),Z("seed",n,e,t))];case"Range":{const i=Z("start",n,e,t),s=Z("stop",n,e,t),o=Z("step",n,e,t);return[r.range(i,s,o,Z("dtype",n,e,t))]}case"TruncatedNormal":{const i=Z("shape",n,e,t),s=Z("mean",n,e,t),o=Z("stdDev",n,e,t),a=Z("seed",n,e,t);return[r.truncatedNormal(i,s,o,Z("dtype",n,e,t),a)]}case"Zeros":return[r.zeros(Z("shape",n,e,t),Z("dtype",n,e,t))];case"ZerosLike":return[r.zerosLike(Z("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dB(n,e,t){const r=Z("boxes",n,e,t),i=Z("scores",n,e,t),s=Z("maxOutputSize",n,e,t),o=Z("iouThreshold",n,e,t),a=Z("scoreThreshold",n,e,t),l=Z("softNmsSigma",n,e,t);return{boxes:r,scores:i,maxOutputSize:s,iouThreshold:o,scoreThreshold:a,softNmsSigma:l}}const $Re=async(n,e,t,r,i=ha)=>{switch(n.op){case"NonMaxSuppressionV5":{const{boxes:s,scores:o,maxOutputSize:a,iouThreshold:l,scoreThreshold:c,softNmsSigma:u}=dB(n,e,t),d=await i.image.nonMaxSuppressionWithScoreAsync(s,o,a,l,c,u);return[d.selectedIndices,d.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:s,scores:o,maxOutputSize:a,iouThreshold:l,scoreThreshold:c}=dB(n,e,t),u=Z("padToMaxOutputSize",n,e,t),d=await i.image.nonMaxSuppressionPaddedAsync(s,o,a,l,c,u);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:s,scores:o,maxOutputSize:a,iouThreshold:l,scoreThreshold:c}=dB(n,e,t);return[await i.image.nonMaxSuppressionAsync(s,o,a,l,c)]}case"Where":{const s=i.cast(Z("condition",n,e,t),"bool"),o=[await i.whereAsync(s)];return s.dispose(),o}case"ListDiff":return i.setdiff1dAsync(Z("x",n,e,t),Z("y",n,e,t));default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LRe=(n,e,t,r=ha)=>{switch(n.op){case"LowerBound":{const i=Z("sortedSequence",n,e,t),s=Z("values",n,e,t);return[r.lowerBound(i,s)]}case"TopKV2":{const i=Z("x",n,e,t),s=Z("k",n,e,t),o=Z("sorted",n,e,t),a=r.topk(i,s,o);return[a.values,a.indices]}case"UpperBound":{const i=Z("sortedSequence",n,e,t),s=Z("values",n,e,t);return[r.upperBound(i,s)]}case"Unique":{const i=Z("x",n,e,t),s=r.unique(i);return[s.values,s.indices]}case"UniqueV2":{const i=Z("x",n,e,t),s=Z("axis",n,e,t),o=r.unique(i,s);return[o.values,o.indices]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FRe=(n,e,t,r=ha)=>{switch(n.op){case"Const":return e[n.name];case"PlaceholderWithDefault":const i=Z("default",n,e,t);return[ra(n.name,e,t)||i];case"Placeholder":return[ra(n.name,e,t)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const u=Z("x",n,e,t);return[Tp(u)]}case"IdentityN":return Z("x",n,e,t).map(u=>Tp(u));case"Snapshot":const s=Z("x",n,e,t);return[Tp(s)];case"Shape":return[r.tensor1d(Z("x",n,e,t).shape,"int32")];case"ShapeN":return Z("x",n,e,t).map(u=>r.tensor1d(u.shape));case"Size":return[r.scalar(Z("x",n,e,t).size,"int32")];case"Rank":return[r.scalar(Z("x",n,e,t).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const o=Z("x",n,e,t),a=Z("data",n,e,t),l=Z("message",n,e,t),c=Z("summarize",n,e,t);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let u=0;u<a.length;u++)console.log(Array.prototype.slice.call(a[u].dataSync()).slice(0,c));return[o];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PRe{get id(){return this.handle.id}constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=$n(0),this.tensorMap=new Map,Uo(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return $n(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const r=await e.data();return this.tensorMap.forEach(i=>i.dispose()),this.tensorMap.clear(),Ye(()=>{const i=Qu(t),s=r.length,o=i.length;de(s===o,()=>`The number of elements doesn't match, keys has ${s} elements, the values has ${o} elements.`);for(let a=0;a<s;a++){const l=r[a],c=i[a];Uo(c),this.tensorMap.set(l,c)}return this.handle})}async find(e,t){this.checkKeyAndValueTensor(e,t);const r=await e.data();return Ye(()=>{const i=[];for(let s=0;s<r.length;s++){const o=r[s],a=this.findWithDefault(o,t);i.push(a)}return Mc(i)})}findWithDefault(e,t){const r=this.tensorMap.get(e);return r??t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const URe=async(n,e,t,r)=>{switch(n.op){case"HashTable":case"HashTableV2":{const i=r.getHashTableHandleByName(n.name);if(i!=null)return[i];{const s=Z("keyDType",n,e,t),o=Z("valueDType",n,e,t),a=new PRe(s,o);return r.addHashTable(n.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const i=Z("tableHandle",n,e,t,r),s=Z("keys",n,e,t),o=Z("values",n,e,t);return[await r.getHashTableById(i.id).import(s,o)]}case"LookupTableFind":case"LookupTableFindV2":{const i=Z("tableHandle",n,e,t,r),s=Z("keys",n,e,t),o=Z("defaultValue",n,e,t);return[await r.getHashTableById(i.id).find(s,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const i=Z("tableHandle",n,e,t,r);return[r.getHashTableById(i.id).tensorSize()]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zRe=(n,e,t,r=ha)=>{switch(n.op){case"ResizeBilinear":{const i=Z("images",n,e,t),s=Z("size",n,e,t),o=Z("alignCorners",n,e,t),a=Z("halfPixelCenters",n,e,t);return[r.image.resizeBilinear(i,[s[0],s[1]],o,a)]}case"ResizeNearestNeighbor":{const i=Z("images",n,e,t),s=Z("size",n,e,t),o=Z("alignCorners",n,e,t),a=Z("halfPixelCenters",n,e,t);return[r.image.resizeNearestNeighbor(i,[s[0],s[1]],o,a)]}case"CropAndResize":{const i=Z("image",n,e,t),s=Z("boxes",n,e,t),o=Z("boxInd",n,e,t),a=Z("cropSize",n,e,t),l=Z("method",n,e,t),c=Z("extrapolationValue",n,e,t);return[r.image.cropAndResize(i,s,o,a,l,c)]}case"ImageProjectiveTransformV3":{const i=Z("images",n,e,t),s=Z("transforms",n,e,t),o=Z("outputShape",n,e,t),a=Z("fillValue",n,e,t),l=Z("interpolation",n,e,t),c=Z("fillMode",n,e,t);return[r.image.transform(i,s,l.toLowerCase(),c.toLowerCase(),a,o)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HRe=(n,e,t,r=ha)=>{switch(n.op){case"Equal":return[r.equal(Z("a",n,e,t),Z("b",n,e,t))];case"NotEqual":return[r.notEqual(Z("a",n,e,t),Z("b",n,e,t))];case"Greater":return[r.greater(Z("a",n,e,t),Z("b",n,e,t))];case"GreaterEqual":return[r.greaterEqual(Z("a",n,e,t),Z("b",n,e,t))];case"Less":return[r.less(Z("a",n,e,t),Z("b",n,e,t))];case"LessEqual":return[r.lessEqual(Z("a",n,e,t),Z("b",n,e,t))];case"LogicalAnd":return[r.logicalAnd(Z("a",n,e,t),Z("b",n,e,t))];case"LogicalNot":return[r.logicalNot(Z("a",n,e,t))];case"LogicalOr":return[r.logicalOr(Z("a",n,e,t),Z("b",n,e,t))];case"Select":case"SelectV2":return[r.where(Z("condition",n,e,t),Z("a",n,e,t),Z("b",n,e,t))];case"BitwiseAnd":return[r.bitwiseAnd(Z("a",n,e,t),Z("b",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VRe=(n,e,t,r=ha)=>{switch(n.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(Z("a",n,e,t),Z("b",n,e,t),Z("transposeA",n,e,t),Z("transposeB",n,e,t))];case"Einsum":return[r.einsum(Z("equation",n,e,t),...Z("tensors",n,e,t))];case"Transpose":return[r.transpose(Z("x",n,e,t),Z("perm",n,e,t))];case"_FusedMatMul":const[i,s]=Z("fusedOps",n,e,t),o=i==="biasadd",a=s==="prelu",l=Z("numArgs",n,e,t),c=Z("leakyreluAlpha",n,e,t);if(o){if(a&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,d]=Z("args",n,e,t);return[r.fused.matMul({a:Z("a",n,e,t),b:Z("b",n,e,t),transposeA:Z("transposeA",n,e,t),transposeB:Z("transposeB",n,e,t),bias:u,activation:s,preluActivationWeights:d,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(Z("a",n,e,t),Z("numLower",n,e,t),Z("numUpper",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GRe=(n,e,t,r=ha)=>{switch(n.op){case"EuclideanNorm":return[r.euclideanNorm(Z("x",n,e,t),Z("axis",n,e,t),Z("keepDims",n,e,t))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(Z("x",n,e,t),Z("mean",n,e,t),Z("variance",n,e,t),Z("offset",n,e,t),Z("scale",n,e,t),Z("epsilon",n,e,t))];case"FusedBatchNormV3":return[r.batchNorm(Z("x",n,e,t),Z("mean",n,e,t),Z("variance",n,e,t),Z("offset",n,e,t),Z("scale",n,e,t),Z("epsilon",n,e,t))];case"LRN":return[r.localResponseNormalization(Z("x",n,e,t),Z("radius",n,e,t),Z("bias",n,e,t),Z("alpha",n,e,t),Z("beta",n,e,t))];case"Softmax":return[r.softmax(Z("x",n,e,t))];case"LogSoftmax":return[r.logSoftmax(Z("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WRe=(n,e,t,r=ha)=>{switch(n.op){case"RaggedGather":{const{outputNestedSplits:i,outputDenseValues:s}=r.raggedGather(Z("paramsNestedSplits",n,e,t),Z("paramsDenseValues",n,e,t),Z("indices",n,e,t),Z("outputRaggedRank",n,e,t));return i.concat(s)}case"RaggedRange":{const{rtNestedSplits:i,rtDenseValues:s}=r.raggedRange(Z("starts",n,e,t),Z("limits",n,e,t),Z("splits",n,e,t));return[i,s]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(Z("shape",n,e,t),Z("values",n,e,t),Z("defaultValue",n,e,t),Z("rowPartitionTensors",n,e,t),Z("rowPartitionTypes",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jRe=(n,e,t,r=ha)=>{switch(n.op){case"Max":{const a=Z("axis",n,e,t),l=Z("keepDims",n,e,t);return[r.max(Z("x",n,e,t),a,l)]}case"Mean":{const a=Z("axis",n,e,t),l=Z("keepDims",n,e,t);return[r.mean(Z("x",n,e,t),a,l)]}case"Min":{const a=Z("axis",n,e,t),l=Z("keepDims",n,e,t);return[r.min(Z("x",n,e,t),a,l)]}case"Sum":{const a=Z("axis",n,e,t),l=Z("keepDims",n,e,t);return[r.sum(Z("x",n,e,t),a,l)]}case"All":{const a=Z("axis",n,e,t),l=Z("keepDims",n,e,t);return[r.all(Z("x",n,e,t),a,l)]}case"Any":{const a=Z("axis",n,e,t),l=Z("keepDims",n,e,t);return[r.any(Z("x",n,e,t),a,l)]}case"ArgMax":{const a=Z("axis",n,e,t);return[r.argMax(Z("x",n,e,t),a)]}case"ArgMin":{const a=Z("axis",n,e,t);return[r.argMin(Z("x",n,e,t),a)]}case"Prod":{const a=Z("axis",n,e,t),l=Z("keepDims",n,e,t);return[r.prod(Z("x",n,e,t),a,l)]}case"Cumprod":{const a=Z("axis",n,e,t),l=Z("exclusive",n,e,t),c=Z("reverse",n,e,t);return[r.cumprod(Z("x",n,e,t),a,l,c)]}case"Cumsum":{const a=Z("axis",n,e,t),l=Z("exclusive",n,e,t),c=Z("reverse",n,e,t);return[r.cumsum(Z("x",n,e,t),a,l,c)]}case"Bincount":const i=Z("x",n,e,t),s=Z("weights",n,e,t),o=Z("size",n,e,t);return[r.bincount(i,s,o)];case"DenseBincount":{const a=Z("x",n,e,t),l=Z("weights",n,e,t),c=Z("size",n,e,t),u=Z("binaryOutput",n,e,t);return[r.denseBincount(a,l,c,u)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XRe=(n,e,t,r=ha)=>{switch(n.op){case"ConcatV2":case"Concat":{const i=Z("n",n,e,t),s=Z("axis",n,e,t);let o=Z("tensors",n,e,t);return o=o.slice(0,i),[r.concat(o,s)]}case"Gather":{const i=Z("x",n,e,t),s=Z("indices",n,e,t);return[r.gather(i,r.cast(s,"int32"),0)]}case"GatherV2":{const i=Z("axis",n,e,t),s=Z("batchDims",n,e,t),o=Z("x",n,e,t),a=Z("indices",n,e,t);return[r.gather(o,r.cast(a,"int32"),i,s)]}case"Reverse":{const i=Z("dims",n,e,t),s=[];for(let a=0;a<i.length;a++)i[a]&&s.push(a);const o=Z("x",n,e,t);return[r.reverse(o,s)]}case"ReverseV2":{const i=Z("axis",n,e,t),s=Z("x",n,e,t);return[r.reverse(s,i)]}case"Slice":{const i=Z("begin",n,e,t),s=Z("size",n,e,t);return[r.slice(Z("x",n,e,t),i,s)]}case"StridedSlice":{const i=Z("begin",n,e,t),s=Z("end",n,e,t),o=Z("strides",n,e,t),a=Z("beginMask",n,e,t),l=Z("endMask",n,e,t),c=Z("ellipsisMask",n,e,t),u=Z("newAxisMask",n,e,t),d=Z("shrinkAxisMask",n,e,t),f=Z("x",n,e,t);return[r.stridedSlice(f,i,s,o,a,l,c,u,d)]}case"Pack":return Ye(()=>{const i=Z("axis",n,e,t),s=Z("tensors",n,e,t),o=s[0].shape,a=r.squeeze(s[0]).shape,l=s.map(c=>{const u=Vr(c.shape,o);if(!u&&!Vr(r.squeeze(c).shape,a))throw new Error("the input tensors shape does not match");return u?c:r.reshape(c,o)});return[r.stack(l,i)]});case"Unpack":{const i=Z("axis",n,e,t),s=Z("tensor",n,e,t);return r.unstack(s,i)}case"Tile":{const i=Z("reps",n,e,t);return[r.tile(Z("x",n,e,t),i)]}case"Split":case"SplitV":{const i=Z("axis",n,e,t),s=Z("numOrSizeSplits",n,e,t),o=Z("x",n,e,t);return r.split(o,s,i)}case"ScatterNd":{const i=Z("indices",n,e,t),s=Z("values",n,e,t),o=Z("shape",n,e,t);return[r.scatterND(i,s,o)]}case"GatherNd":{const i=Z("x",n,e,t),s=Z("indices",n,e,t);return[r.gatherND(i,s)]}case"SparseToDense":{const i=Z("sparseIndices",n,e,t),s=Z("outputShape",n,e,t),o=Z("sparseValues",n,e,t),a=Z("defaultValue",n,e,t);return[r.sparseToDense(i,o,s,o.dtype===a.dtype?a:r.cast(a,o.dtype))]}case"TensorScatterUpdate":{const i=Z("indices",n,e,t),s=Z("values",n,e,t),o=Z("tensor",n,e,t);return[r.tensorScatterUpdate(o,i,s)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qRe=(n,e,t,r=ha)=>{switch(n.op){case"SparseFillEmptyRows":{const{outputIndices:i,outputValues:s,emptyRowIndicator:o,reverseIndexMap:a}=r.sparse.sparseFillEmptyRows(Z("indices",n,e,t),Z("values",n,e,t),Z("denseShape",n,e,t),Z("defaultValue",n,e,t));return[i,s,o,a]}case"SparseReshape":{const{outputIndices:i,outputShape:s}=r.sparse.sparseReshape(Z("inputIndices",n,e,t),Z("inputShape",n,e,t),Z("newShape",n,e,t));return[i,s]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(Z("data",n,e,t),Z("indices",n,e,t),Z("segmentIds",n,e,t))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(Z("data",n,e,t),Z("indices",n,e,t),Z("segmentIds",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KRe=(n,e,t,r=ha)=>{switch(n.op){case"FFT":return[r.fft(Z("x",n,e,t))];case"IFFT":return[r.ifft(Z("x",n,e,t))];case"RFFT":return[r.rfft(Z("x",n,e,t))];case"IRFFT":return[r.irfft(Z("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YRe=(n,e,t,r=ha)=>{switch(n.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(Z("input",n,e,t),Z("pattern",n,e,t),Z("rewrite",n,e,t),Z("replaceGlobal",n,e,t))];case"StringNGrams":{const{nGrams:i,nGramsSplits:s}=r.string.stringNGrams(Z("data",n,e,t),Z("dataSplits",n,e,t),Z("separator",n,e,t),Z("nGramWidths",n,e,t),Z("leftPad",n,e,t),Z("rightPad",n,e,t),Z("padWidth",n,e,t),Z("preserveShortSequences",n,e,t));return[i,s]}case"StringSplit":{const{indices:i,values:s,shape:o}=r.string.stringSplit(Z("input",n,e,t),Z("delimiter",n,e,t),Z("skipEmpty",n,e,t));return[i,s,o]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(Z("input",n,e,t),Z("numBuckets",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JRe=(n,e,t,r=ha)=>{switch(n.op){case"Cast":return[r.cast(Z("x",n,e,t),Z("dtype",n,e,t))];case"ExpandDims":{const i=Z("axis",n,e,t);return[r.expandDims(Z("x",n,e,t),i)]}case"Squeeze":{const i=Z("axis",n,e,t);return[r.squeeze(Z("x",n,e,t),i)]}case"Reshape":return[r.reshape(Z("x",n,e,t),Z("shape",n,e,t))];case"EnsureShape":return[r.ensureShape(Z("x",n,e,t),Z("shape",n,e,t))];case"MirrorPad":return[r.mirrorPad(Z("x",n,e,t),Z("padding",n,e,t),Z("mode",n,e,t))];case"PadV2":case"Pad":return[r.pad(Z("x",n,e,t),Z("padding",n,e,t),Z("constantValue",n,e,t))];case"SpaceToBatchND":{const i=Z("blockShape",n,e,t),s=Z("paddings",n,e,t);return[r.spaceToBatchND(Z("x",n,e,t),i,s)]}case"BatchToSpaceND":{const i=Z("blockShape",n,e,t),s=Z("crops",n,e,t);return[r.batchToSpaceND(Z("x",n,e,t),i,s)]}case"DepthToSpace":{const i=Z("blockSize",n,e,t),s=Z("dataFormat",n,e,t).toUpperCase();return[r.depthToSpace(Z("x",n,e,t),i,s)]}case"BroadcastTo":return[r.broadcastTo(Z("x",n,e,t),Z("shape",n,e,t))];case"BroadcastArgs":return[r.broadcastArgs(Z("s0",n,e,t),Z("s1",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RG(n,e,t,r,i=Ye){const s=((o,a,l)=>{switch(o.category){case"arithmetic":return i(()=>ARe(o,a,l));case"basic_math":return i(()=>TRe(o,a,l));case"control":return kRe(o,a,l);case"convolution":return i(()=>ORe(o,a,l));case"creation":return i(()=>BRe(o,a,l));case"dynamic":return $Re(o,a,l);case"evaluation":return i(()=>LRe(o,a,l));case"image":return i(()=>zRe(o,a,l));case"graph":return i(()=>FRe(o,a,l));case"logical":return i(()=>HRe(o,a,l));case"matrices":return i(()=>VRe(o,a,l));case"normalization":return i(()=>GRe(o,a,l));case"ragged":return i(()=>WRe(o,a,l));case"reduction":return i(()=>jRe(o,a,l));case"slice_join":return i(()=>XRe(o,a,l));case"sparse":return i(()=>qRe(o,a,l));case"spectral":return i(()=>KRe(o,a,l));case"string":return i(()=>YRe(o,a,l));case"transformation":return i(()=>JRe(o,a,l));case"hash_table":return URe(o,a,l,r);case"custom":const c=xte(o.op);if(c&&c.customExecutor)return c.customExecutor(new ERe(o,a,l));throw TypeError(`Custom op ${o.op} is not registered.`);default:throw TypeError(`Unknown op '${o.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(n,e,t);return cv(s)?s.then(o=>[].concat(o)):[].concat(s)}class NG{constructor(e={},t={},r={},i={},s){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=r,this.functionMap=i,this.parseNodeNameCache=s,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const r=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(t=>t.id===0&&t.iterationId===0?"":`${t.frameName}-${t.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IG(n,e,t,r){const i=new Set,s=[];let o=null,a=null;const l=new Set,c=new Set(Object.keys(n).map(f=>fc(f)[0]));r=r||[];const u=new Set(r.map(f=>fc(f.name)[0])),d=[...e];for(;d.length>0;){const f=d.pop();if((Ty(f)||sNe(f)||oNe(f))&&o==null&&(o=f,a=o.children.map(p=>p.name).filter(p=>i.has(p))),i.add(f.name),t[f.name]==null&&!c.has(f.name)&&!u.has(f.name)){if(f.inputs.length===0){s.push(f.name);continue}f.inputs.forEach(p=>{l.has(p.name)||(l.add(p.name),d.push(p))})}}return{inputs:n,outputs:e,usedNodes:i,missingInputs:s,dynamicNode:o,syncInputs:a}}function ZRe(n,e){const{usedNodes:t,inputs:r}=e,i=Object.keys(r).map(b=>fc(b)[0]).map(b=>n.nodes[b]),s=n.initNodes||[],o=b=>t.has(typeof b=="string"?b:b.name);function a(b){return[...new Map(b.map(x=>[x.name,x])).values()]}const l=a([...i,...n.weights,...s]).filter(o),c=a([...l,...Object.values(n.nodes)]).filter(o),u=new Map(c.map(b=>[b.name,b])),d={};for(const b of c){d[b.name]=d[b.name]||0;for(const x of b.children)o(x)||(d[x.name]=Number.POSITIVE_INFINITY),d[x.name]=(d[x.name]||0)+1}const f=Object.entries(d).filter(([,b])=>b===0).map(([b])=>b),p=[...f];for(;f.length>0;){const b=f.pop(),x=u.get(b);for(const _ of x.children.filter(o))--d[_.name]===0&&(p.push(_.name),f.push(_.name))}const g=p.map(b=>u.get(b)),v=QRe(g,l);return eNe(v,l),v}function QRe(n,e){const t=new Map(n.map(o=>[o.name,o])),r=e.map(o=>o.name),i=new Set(r);for(;r.length>0;){const o=r.pop(),a=t.get(o);for(const l of a.children)!t.has(l.name)||i.has(l.name)||(i.add(l.name),r.push(l.name))}return n.filter(o=>i.has(o.name))}class zT extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function eNe(n,e){const t=new Map(n.map((a,l)=>[a.name,l])),r=new Set(e.map(a=>a.name)),i=a=>r.has(typeof a=="string"?a:a.name),s=new Set(n.map(a=>a.name)),o=a=>s.has(typeof a=="string"?a:a.name);for(const a of n){for(const l of a.children.filter(o)){if(!t.has(l.name))throw new zT(`Child ${l.name} of node ${a.name} is unreachable.`);if(t.get(a.name)>t.get(l.name))throw new zT(`Node ${a.name} is scheduled to run after its child ${l.name}.`)}if(!i(a))for(const l of a.inputs){if(!t.has(l.name))throw new zT(`Input ${l.name} of node ${a.name} is unreachable.`);if(t.get(l.name)>t.get(a.name))throw new zT(`Node ${a.name} is scheduled to run before its input ${l.name}.`)}}}function tNe(n){const e=new Map(n.map((a,l)=>[a.name,l])),t=Number.MAX_SAFE_INTEGER,r=n.map((a,l)=>Ty(a)?t:l),i=a=>{const l=r[e.get(a.name)];return l??-1},s=n.map((a,l)=>a.children.map(i).reduce((c,u)=>Math.max(c,u),r[l])),o=new Map;for(let a=0;a<n.length;++a){const l=s[a];if(l===t)continue;const c=n[a],u=n[l];o.has(u.name)||o.set(u.name,[]),o.get(u.name).push(c)}return o}const nNe=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),rNe=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),iNe=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Ty(n){return nNe.has(n.op)}function sNe(n){return rNe.has(n.op)}function oNe(n){return iNe.has(n.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rN{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map(r=>e[r].map(i=>i.id));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new rN(e.functions[r],this)})}getCompilationKey(e,t){const r=e.map(s=>s.name).sort(),i=t.map(s=>s.name).sort();return r.join(this.SEPARATOR)+"--"+i.join(this.SEPARATOR)}compile(e,t){const r=IG(e,t,this.weightMap,this._initNodes),{missingInputs:i,dynamicNode:s,syncInputs:o}=r;if(s!=null)throw new Error(`This execution contains the node '${s.name}', which has the dynamic op '${s.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(i.length>0){const c=t.map(d=>d.name),u=Object.keys(e);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${u}]. Missing the following inputs: [${i}]`)}const a=ZRe(this.graph,r),l=tNe(a);return{orderedNodes:a,nodeLiveUntilMap:l}}cloneAndKeepTensor(e){if(e==null)return null;const t=e.clone();return Uo(t),t}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([t,r])=>[t,this.cloneTensorList(r)]))}execute(e,t){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const i=r.map(f=>this.graph.nodes[fc(f)[0]]),s=t.map(f=>fc(f)[0]),o=new Set(s);let a=s.map(f=>this.graph.nodes[f]);a.length===0&&(a=this._outputs);const l=this.getCompilationKey(i,a);let c=this.compiledMap.get(l);c==null&&(c=this.compile(e,a),this.compiledMap.set(l,c));try{this.keepIntermediateTensors=it().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){this.keepIntermediateTensors=!1,console.warn(f.message)}const u={},d={};return Ye(()=>{const f=new NG(this.weightMap,u,d,this.functionExecutorMap,this.parseNodeNameCache),p=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(x=>{const[_,E]=fc(x,f),C=[];C[E]=e[x],p[_]=C,this.keepIntermediateTensors&&(this.clonedTensorsMap[_]=this.cloneTensorList(C))});const g=this.getFrozenTensorIds(p),{orderedNodes:v,nodeLiveUntilMap:b}=c;for(const x of v){if(p[x.name])continue;const _=RG(x,p,f,this._resourceManager);if(cv(_))throw new Error(`The execution of the op '${x.op}' returned a promise. Please use model.executeAsync() instead.`);p[x.name]=_,this.keepIntermediateTensors&&(this.clonedTensorsMap[x.name]=this.cloneTensorList(_)),this.checkTensorForDisposalWithNodeLiveUntilInfo(x,p,f,g,o,b.get(x.name))}return this.parent==null&&f.dispose(g),t.map(x=>ra(x,p,f))})}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(i=>i.id)));return new Set(t)}checkTensorForDisposal(e,t,r,i,s,o,a){if(!(Ty(t)||o.has(e))){for(const l of r[e])l!=null&&(a[l.id]=(a[l.id]||0)+t.children.length);for(const l of t.inputs){if(Ty(l))continue;const c=CG(l.name,r,i);if(c!=null)for(const u of c){if(!u||u.kept||s.has(u.id))continue;const d=a[u.id];d===1?(u.dispose(),delete a[u.id]):d!=null&&a[u.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,t,r,i,s,o){function a(l){return Ty(l)||s.has(l.name)}if(!(Ty(e)||o==null))for(const l of o){if(a(l))continue;const c=CG(l.name,t,r);for(const u of c)!u||u.kept||i.has(u.id)||u.dispose()}}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const t of e)t&&!t.isDisposed&&t.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,t,r=!1,i={},s={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepIntermediateTensors=it().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){this.keepIntermediateTensors=!1,console.warn(f.message)}const o=new NG(this.weightMap,i,s,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const a=await this.executeWithControlFlow(e,o,t,r),l=t.map(f=>ra(f,a,o)),c=l.map(f=>f.id),u=Object.keys(e).map(f=>e[f].id),d=new Set([...c,...u,...this.weightIds]);return Object.values(a).forEach(f=>{f.forEach(p=>{p&&!p.isDisposed&&!d.has(p.id)&&p.dispose()})}),this.parent==null&&o.dispose(d),l}async executeFunctionAsync(e,t,r){const i=e.reduce((s,o,a)=>(s[this.inputs[a].name]=o,s),{});return this._executeAsync(i,this.outputNodes,!0,t,r)}async executeWithControlFlow(e,t,r,i){const s=Object.keys(e),o=s.map(C=>this.graph.nodes[fc(C)[0]]),a=r.map(C=>fc(C)[0]),l=new Set(a);let c=a.map(C=>this.graph.nodes[C]);c.length===0&&(c=this._outputs);const{usedNodes:u,missingInputs:d,dynamicNode:f,syncInputs:p}=IG(e,c,this.weightMap,this._initNodes),g=[...o,...this.graph.weights,...this._initNodes||[]].map(C=>({node:C,contexts:t.currentContext})),v=Object.assign({},this.weightMap);Object.keys(e).forEach(C=>{const[M,R]=fc(C),L=[];L[R]=e[C],v[M]=L});const b={},x=this.getFrozenTensorIds(v),_={};for(;g.length>0;){const C=this.processStack(o,g,t,v,_,x,l,b,u);await Promise.all(C)}f==null&&!i&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const E=c.filter(C=>!Ty(C)&&!ra(C.name,v,t)).map(C=>C.name);if(E.length>0){let C="";throw f!=null&&(C=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${p}]`),new Error(`Cannot compute the outputs [${E}] from the provided inputs [${s}]. Consider providing the following inputs: [${d}]. ${C}`)}return v}processStack(e,t,r,i,s,o,a,l,c){const u=[];for(;t.length>0;){const d=t.pop();r.currentContext=d.contexts;let f="";if(d.node.op==="Enter"&&Z("isConstant",d.node,i,r)&&([f]=Ap(d.node.name,r)),i[d.node.name]==null){const p=RG(d.node,i,r,this._resourceManager);f||([f]=Ap(d.node.name,r));const g=r.currentContext;cv(p)?u.push(p.then(v=>(i[f]=v,this.keepIntermediateTensors&&(this.clonedTensorsMap[f]=this.cloneTensorList(v)),r.currentContext=g,this.checkTensorForDisposal(f,d.node,i,r,o,a,l),this.processChildNodes(d.node,t,r,i,s,c),v))):(i[f]=p,this.keepIntermediateTensors&&(this.clonedTensorsMap[f]=this.cloneTensorList(p)),this.checkTensorForDisposal(f,d.node,i,r,o,a,l),this.processChildNodes(d.node,t,r,i,s,c))}else this.processChildNodes(d.node,t,r,i,s,c)}return u}processChildNodes(e,t,r,i,s,o){e.children.forEach(a=>{const[l]=Ap(a.name,r);s[l]||!o.has(a.name)||(a.op==="Merge"?a.inputNames.some(c=>!!ra(c,i,r))&&(s[l]=!0,t.push({contexts:r.currentContext,node:a})):a.inputNames.every(c=>!!ra(c,i,r))&&(s[l]=!0,t.push({contexts:r.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(t=>t.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(t=>{const r=e[t],[i]=fc(t),s=this.graph.nodes[i];if(s.attrParams.shape&&s.attrParams.shape.value){const o=s.attrParams.shape.value,a=o.length===r.shape.length&&r.shape.every((l,c)=>o[c]===-1||o[c]===l);de(a,()=>`The shape of dict['${s.name}'] provided in model.execute(dict) must be [${o}], but was [${r.shape}]`)}s.attrParams.dtype&&s.attrParams.dtype.value&&de(r.dtype===s.attrParams.dtype.value,()=>`The dtype of dict['${s.name}'] provided in model.execute(dict) must be ${s.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var t,r;const i={};for(const s in e){const o=(r=(t=this._signature)===null||t===void 0?void 0:t.inputs)===null||r===void 0?void 0:r[s];o!=null?i[o.name]=e[s]:i[s]=e[s]}return i}checkInputs(e){const t=Object.keys(e).filter(r=>{const[i]=fc(r);return this.graph.nodes[i]==null});if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map(t=>{var r,i;const s=(i=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||i===void 0?void 0:i[t];return s!=null?s.name:t},{})}checkOutputs(e){e.forEach(t=>{const[r]=fc(t);if(!this.graph.nodes[r])throw new Error(`The output '${t}' is not found in the graph`)})}}class aNe{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lNe="?tfjs-format=file",cNe="model.json";class uNe{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,t={},r=wZ){this.modelUrl=e,this.loadOptions=t,this.version="n/a",this.io=r,t==null&&(this.loadOptions={}),this.resourceManager=new aNe}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const t=this.io.getLoadHandlers(e,this.loadOptions);if(t.length===0)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return cv(e)?e.then(t=>t.getWeightStream==null?this.loadSync(t):this.loadStreaming(t)):this.loadSync(e)}loadSync(e){const t=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,t)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const t=await jY(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,t)}loadWithWeightMap(e,t){this.artifacts=e;const r=this.artifacts.modelTopology;let i=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const s=this.artifacts.userDefinedMetadata;s.signature!=null&&(i=s.signature),s.structuredOutputKeys!=null&&(this.structuredOutputKeys=s.structuredOutputKeys)}if(this.signature=i,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new rN(EG.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(t),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const s=EG.Instance.transformGraph(e.modelInitializer);this.initializer=new rN(s),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,t){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const t=e instanceof qi?[e]:e,r={};return t.forEach((i,s)=>r[this.structuredOutputKeys[s]]=i),r}return e}predict(e,t){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,t){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var t;if(!(e instanceof qi)&&!Array.isArray(e)){const s=(t=this.signature)===null||t===void 0?void 0:t.inputs;if(s!=null)for(const o in s){const a=s[o];a.resourceId!=null&&(e[o]=this.resourceIdToCapturedInput[a.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let i=0;return this.inputNodes.reduce((s,o)=>{var a,l,c;const u=(c=(l=(a=this.signature)===null||a===void 0?void 0:a.inputs)===null||l===void 0?void 0:l[o])===null||c===void 0?void 0:c.resourceId;return u!=null?s[o]=this.resourceIdToCapturedInput[u]:s[o]=e[i++],s},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const t=this.initializerSignature.outputs,r=Object.keys(t);for(let i=0;i<r.length;i++){const s=r[i],o=t[s];this.resourceIdToCapturedInput[o.resourceId]=e[i]}}}execute(e,t){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const r=this.executor.execute(e,t);return r.length>1?r:r[0]}async executeAsync(e,t){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const r=await this.executor.executeAsync(e,t);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,r)=>(t[r]=[e[r]],t),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&rr(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function DG(n,e={},t=wZ){if(n==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof n=="string"&&(n=dNe(n));const r=new uNe(n,e,t);return await r.load(),r}function dNe(n){return n.endsWith("/")||(n=n+"/"),`${n}${cNe}${lNe}`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var kG;(function(n){n[n.FAIL=0]="FAIL",n[n.SHORTEST=1]="SHORTEST",n[n.LONGEST=2]="LONGEST"})(kG||(kG={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _n(n,e){Array.isArray(n)||(n=[n]),n.forEach(t=>{t!=null&&de(t.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hNe=tz;class A3 extends f4{nextDataId(){return A3.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new yY(this,nf())}write(e,t,r){this.firstUse&&(this.firstUse=!1,it().get("IS_NODE")&&Qc(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const i={id:this.nextDataId()};return this.data.set(i,{values:e,dtype:r,refCount:1}),i}makeTensorInfo(e,t,r){let i;if(t==="string"&&r!=null&&r.length>0&&UC(r[0])){const s=r.map(o=>vg(o));i=this.write(s,e,t)}else i=this.write(r,e,t);return{dataId:i,shape:e,dtype:t}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const t=this.data.get(e);t.refCount++}decRef(e){if(this.data.has(e)){const t=this.data.get(e);t.refCount--}}move(e,t,r,i,s){this.data.set(e,{values:t,dtype:i,refCount:s})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:r}=this.data.get(e);if(t==="complex64"){const i=this.readSync(r.real.dataId),s=this.readSync(r.imag.dataId);return jp(i,s)}return pve(this.data.get(e).values,t)}bufferSync(e){const t=this.readSync(e.dataId);if(e.dtype==="string")try{const r=t.map(i=>Mg(i));return Ar(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ar(e.shape,e.dtype,t)}makeOutput(e,t,r){return nf().makeTensorFromTensorInfo(this.makeTensorInfo(t,r,e),this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=Ol();return e(),{kernelMs:Ol()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){_n([e],"where");const t=this.readSync(e.dataId);return hNe(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}A3.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _te(n){const e=new Float32Array(n.length);for(let t=0;t<n.length;++t)e[t]=Math.abs(n[t]);return e}const fNe=n=>{const{x:e}=n.inputs,t=n.backend;_n(e,"abs");let r=new Float32Array(xt(e.shape));const i=t.data.get(e.dataId).values;return r=_te(i),t.makeOutput(r,e.shape,e.dtype)},pNe={kernelName:UI,backendName:"cpu",kernelFunc:fNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eo(n){return(e,t,r,i,s)=>{const o=fr(e,t),a=o.length,l=kn(o),c=xt(o),u=la(s,c),d=e.length,f=t.length,p=kn(e),g=kn(t),v=y1(e,o),b=y1(t,o);if(v.length+b.length===0)for(let x=0;x<u.length;++x)u[x]=n(r[x%r.length],i[x%i.length]);else for(let x=0;x<u.length;++x){const _=H1(x,a,l),E=_.slice(-d);v.forEach(L=>E[L]=0);const C=gf(E,d,p),M=_.slice(-f);b.forEach(L=>M[L]=0);const R=gf(M,f,g);u[x]=n(r[C],i[R])}return[u,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vc(n){const{inputs:e,backend:t}=n,{real:r,imag:i}=e,s=t.data.get(r.dataId).values,o=t.data.get(i.dataId).values,a=t.makeTensorInfo(r.shape,"complex64"),l=t.data.get(a.dataId);return l.complexTensorInfos={real:t.makeTensorInfo(r.shape,"float32",s),imag:t.makeTensorInfo(i.shape,"float32",o)},a}const mNe={kernelName:_4,backendName:"cpu",kernelFunc:vc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iN(n,e,t="float32"){if(t==="complex64"){const i=iN(n,e,"float32"),s=iN(n,e,"float32");return vc({inputs:{real:i,imag:s},backend:n})}const r=ka(xt(e),t);return n.makeTensorInfo(e,t,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mf(n){const{inputs:e,backend:t}=n,{x:r}=e;return t.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const gNe={kernelName:aE,backendName:"cpu",kernelFunc:Mf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xv(n){const{inputs:e,backend:t}=n,{input:r}=e,i=t.data.get(r.dataId).complexTensorInfos.real,s=t.data.get(i.dataId).values;return t.makeTensorInfo(i.shape,i.dtype,s)}const yNe={kernelName:tU,backendName:"cpu",kernelFunc:xv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cte(n,e,t,r){if(r==="int32"){const i=Int32Array.from(n);return[e,"int32",i]}if(r==="bool"){const i=kv([0],t),[s,o]=eo((a,l)=>a!==l?1:0)(e,[],n,i,"bool");return[o,"bool",s]}throw new Error(`Error in Cast: failed to cast ${t} to ${r}`)}function Lg(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return Mf({inputs:{x:i},backend:t});const u=iN(t,i.shape,i.dtype),d=Lg({inputs:{x:i},backend:t,attrs:{dtype:"float32"}}),f=vc({inputs:{real:d,imag:u},backend:t});return t.disposeIntermediateTensorInfo(u),t.disposeIntermediateTensorInfo(d),f}if(i.dtype==="complex64"){const u=xv({inputs:{input:i},backend:t}),d=Lg({inputs:{x:u},backend:t,attrs:{dtype:s}});return t.disposeIntermediateTensorInfo(u),d}if(!bY(i.dtype,s)){const u=Mf({inputs:{x:i},backend:t});return{dataId:u.dataId,shape:u.shape,dtype:s}}const o=t.data.get(i.dataId).values,[a,l,c]=Cte(o,i.shape,i.dtype,s);return t.makeTensorInfo(a,l,c)}const vNe={kernelName:qC,backendName:"cpu",kernelFunc:Lg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function No(n,e,t,r){return t==null?({inputs:i,backend:s})=>{const{a:o,b:a}=i,l=s;_n([o,a],n);const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,d=o.dtype==="string"?Xp(c):c,f=o.dtype==="string"?Xp(u):u,p=r||o.dtype,[g,v]=e(o.shape,a.shape,d,f,p);return l.makeTensorInfo(v,p,g)}:({inputs:i,backend:s})=>{const{a:o,b:a}=i,l=s;if(o.dtype==="complex64"||a.dtype==="complex64"){const c=Lg({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),d=u.complexTensorInfos.real,f=u.complexTensorInfos.imag,p=l.data.get(d.dataId).values,g=l.data.get(f.dataId).values,v=Lg({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),b=l.data.get(v.dataId),x=b.complexTensorInfos.real,_=b.complexTensorInfos.imag,E=l.data.get(x.dataId).values,C=l.data.get(_.dataId).values,[M,R,L]=t(o.shape,a.shape,p,g,E,C),B=l.makeTensorInfo(L,"float32",M),N=l.makeTensorInfo(L,"float32",R),I=vc({inputs:{real:B,imag:N},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(v),l.disposeIntermediateTensorInfo(B),l.disposeIntermediateTensorInfo(N),I}else{const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,d=r||o.dtype,[f,p]=e(o.shape,a.shape,c,u,d);return l.makeTensorInfo(p,d,f)}}}function s5(n){return(e,t,r,i,s,o)=>{const a=fr(e,t),l=xt(a),c=a.length,u=kn(a),d=la("float32",l),f=la("float32",l),p=y1(e,a),g=y1(t,a),v=jp(r,i),b=jp(s,o),x=e.length,_=kn(e),E=t.length,C=kn(t);if(p.length+g.length===0)for(let M=0;M<d.length;M++){const R=M%v.length,L=M%b.length,B=n(v[R*2],v[R*2+1],b[L*2],b[L*2+1]);d[M]=B.real,f[M]=B.imag}else for(let M=0;M<d.length;M++){const R=H1(M,c,u),L=R.slice(-x);p.forEach(P=>L[P]=0);const B=gf(L,x,_),N=R.slice(-E);g.forEach(P=>N[P]=0);const I=gf(N,E,C),D=n(v[B*2],v[B*2+1],b[I*2],b[I*2+1]);d[M]=D.real,f[M]=D.imag}return[d,f,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ete=eo((n,e)=>n+e),bNe=s5((n,e,t,r)=>({real:n+t,imag:e+r})),S1=No(V1,Ete,bNe),xNe={kernelName:V1,backendName:"cpu",kernelFunc:S1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o5(n,e,t,r,i){const s=xt(r),o=ka(i,t);for(let a=0;a<n.length;a++){const l=n[a];if(l<0)throw new Error("Input x must be non-negative!");l>=i||(s>0?o[l]+=e[a]:o[l]+=1)}return o}function Ate(n,e,t,r=!1){const i=n.shape[0],s=n.shape[1],o=Ar([i,t],e.dtype);for(let a=0;a<i;a++)for(let l=0;l<s;l++){const c=n.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=t||(r?o.set(1,a,c):e.size>0?o.set(o.get(a,c)+e.get(a,l),a,c):o.set(o.get(a,c)+1,a,c))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tte=eo((n,e)=>n&e),SNe=No(qI,Tte),wNe={kernelName:qI,backendName:"cpu",kernelFunc:SNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lf(n){return(e,t,r)=>{const i=qs(t,e.length);for(let s=0;s<e.length;++s)i[s]=n(e[s],r);return i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mi(n,e,t){const r=Lf(e);return t0(n,r,t)}function t0(n,e,t){return({inputs:r,attrs:i,backend:s})=>{const{x:o}=r;_n(o,n);const a=s,l=a.data.get(o.dataId).values;let c;if(o.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=Xp(l)}else c=l;const u=t||o.dtype,d=e(c,u,i);return a.makeTensorInfo(o.shape,u,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mte=Lf(n=>Math.ceil(n)),_Ne=t0(KC,Mte),CNe={kernelName:KC,backendName:"cpu",kernelFunc:_Ne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rte(n,e,t,r){const i=qs(t,xt(e));if(r&&t!=="string"){let s=0;n.forEach(o=>{const a=xt(o.shape);i.set(o.vals,s),s+=a})}else{let s=0;n.forEach(o=>{const a=t==="string"?Xp(o.vals):o.vals;let l=0;for(let c=0;c<o.shape[0];++c){const u=c*e[1]+s;for(let d=0;d<o.shape[1];++d)i[u+d]=a[l++]}s+=o.shape[1]})}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nte=eo((n,e)=>n===e?1:0),Ite=No(rD,Nte,null,"bool"),ENe={kernelName:rD,backendName:"cpu",kernelFunc:Ite};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dte=Lf(n=>Math.exp(n)),kte=t0(nE,Dte,"float32"),ANe={kernelName:nE,backendName:"cpu",kernelFunc:kte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ote=Lf(n=>Math.expm1(n)),TNe=t0(rE,Ote),MNe={kernelName:rE,backendName:"cpu",kernelFunc:TNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bte=Lf(n=>Math.floor(n)),RNe=t0(iE,Bte),NNe={kernelName:iE,backendName:"cpu",kernelFunc:RNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $te=eo((n,e)=>Math.floor(n/e)),INe=No(sE,$te,null,"int32"),DNe={kernelName:sE,backendName:"cpu",kernelFunc:INe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lte(n,e,t,r,i,s,o,a,l){const c=Ar([r,s],t);for(let u=0;u<r;u++){const d=[];let f=0;for(let p=0;p<i;p++){const g=n[u*i+p];f+=g*o[p],d.push(g)}if(f<0||f>=l/s)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let p=0;p<s;p++)c.values[u*s+p]=e.get(...e.indexToLoc(f*s+p))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fte(n,e,t){const r=Ar(t,n.dtype);for(let i=0;i<r.size;++i){const o=r.indexToLoc(i).slice(),a=o[0],l=o[2],c=e.locToIndex([a,l]);o[2]=e.values[c];const u=n.locToIndex(o);0<=u&&u<n.values.length&&(r.values[i]=n.values[u])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pte=eo((n,e)=>n>e?1:0),kNe=No(aD,Pte,null,"bool"),ONe={kernelName:aD,backendName:"cpu",kernelFunc:kNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ute=eo((n,e)=>n>=e?1:0),BNe=No(oE,Ute,null,"bool"),$Ne={kernelName:oE,backendName:"cpu",kernelFunc:BNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zte=eo((n,e)=>n<e?1:0),LNe=No(cD,zte,null,"bool"),FNe={kernelName:cD,backendName:"cpu",kernelFunc:LNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hte=eo((n,e)=>n<=e?1:0),PNe=No(uD,Hte,null,"bool"),UNe={kernelName:uD,backendName:"cpu",kernelFunc:PNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vte(n,e,t){const r=(e-n)/(t-1),i=ka(t,"float32");i[0]=n;for(let s=1;s<i.length;s++)i[s]=i[s-1]+r;return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gte=Lf(n=>Math.log(n)),zNe=t0(dE,Gte),HNe={kernelName:dE,backendName:"cpu",kernelFunc:zNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wte(n,e,t,r){const i=la(r,xt(t));for(let s=0;s<i.length;++s){const o=s*e;let a=n[o];for(let l=0;l<e;++l){const c=n[o+l];(Number.isNaN(c)||c>a)&&(a=c)}i[s]=a}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jte=eo((n,e)=>Math.max(n,e)),VNe=No(fE,jte),GNe={kernelName:fE,backendName:"cpu",kernelFunc:VNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xte=eo((n,e)=>Math.min(n,e)),WNe=No(pE,Xte),jNe={kernelName:pE,backendName:"cpu",kernelFunc:WNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a5=eo((n,e)=>n*e),XNe=s5((n,e,t,r)=>({real:n*t-e*r,imag:n*r+e*t})),T3=No(gE,a5,XNe),qNe={kernelName:gE,backendName:"cpu",kernelFunc:T3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qte(n,e,t){const r=jg(-1,t);return a5([],e,r,n,t)}function KNe(n){const{inputs:e,backend:t}=n,{x:r}=e;_n(r,"neg");const i=t.data.get(r.dataId).values,[s,o]=qte(i,r.shape,r.dtype);return t.makeTensorInfo(o,r.dtype,s)}const YNe={kernelName:SD,backendName:"cpu",kernelFunc:KNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kte=eo((n,e)=>n!==e?1:0),JNe=No(wD,Kte,null,"bool"),ZNe={kernelName:wD,backendName:"cpu",kernelFunc:JNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l5(n,e,t,r,i){const s=e.length,o=xt(e),a=kn(e),l=kn(i),c=la(t,xt(i));for(let u=0;u<o;++u){const d=H1(u,s,a),f=new Array(d.length);for(let g=0;g<f.length;g++)f[g]=d[r[g]];const p=gf(f,s,l);c[p]=n[u]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gl(n){const{inputs:e,attrs:t,backend:r}=n,{x:i}=e,{perm:s}=t;_n(i,"transpose");const o=i.shape.length,a=new Array(o);for(let d=0;d<a.length;d++)a[d]=i.shape[s[d]];const l=r.data.get(i.dataId).values,c=l5(l,i.shape,i.dtype,s,a);return{dataId:r.write(c,a,i.dtype),shape:a,dtype:i.dtype}}const QNe={kernelName:Ux,backendName:"cpu",kernelFunc:Gl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yte(n,e,t,r){const[i,s]=Xo(n,r),o=Tc(e,"int32"),a=ka(xt(i),o),l=xt(s);for(let c=0;c<a.length;++c){const u=c*l;let d=1;for(let f=0;f<l;++f)d*=t[u+f];a[c]=d}return{outVals:a,outShape:i,outDtype:o}}function eIe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,keepDims:o}=r;_n(i,"prod");const a=i.shape.length,l=Ir(s,i.shape),c=Cs(l,a);let u=l,d=i;const f=[];c!=null&&(d=Gl({inputs:{x:i},backend:t,attrs:{perm:c}}),f.push(d),u=Zs(u.length,a));const p=t.data.get(d.dataId).values,{outVals:g,outShape:v,outDtype:b}=Yte(d.shape,d.dtype,p,u);let x=v;return o&&(x=Ks(v,l)),f.forEach(_=>t.disposeIntermediateTensorInfo(_)),t.makeTensorInfo(x,b,g)}const tIe={kernelName:MD,backendName:"cpu",kernelFunc:eIe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nIe(n,e,t){n.forEach((r,i)=>{if(r<0||r>=t){const s=H1(i,e.length,kn(e)).join(",");throw new Error(`indices[${s}] = ${r} is not in [0, ${t})`)}})}function rIe(n,e){for(let t=0;t<n.length;++t){const r=n[t],i=t===n.length-1?e:n[t+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let s=1;s<r.length;++s)if(r[s-1]>r[s])throw new Error("Ragged splits must be sorted in ascending order")}}function iIe(n,e,t,r){const i=[];let s=0;const o=e.length-1+t.length,a=new Array(o).fill(null).map(()=>[0]);rIe(t,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const u=e[c+1];for(let d=1;d<l+1;++d)a[c].push(d*u)}for(let c=0;c<n.length;++c){let u=n[c],d=n[c]+1;for(let f=0;f<t.length;++f){const p=t[f],g=f+e.length-1;if(g>=0){const v=a[g],b=v[v.length-1]-p[u];for(let x=u;x<d;++x)a[g].push(p[x+1]+b)}u=p[u],d=p[d]}d!==u&&(i.push([u,d]),s+=d-u)}return{outSplits:a,valueSlices:i,numValues:s}}function sIe(n){const e=[];for(let t=0;t<n.length;++t){const r=n[t].length,i=qs("int32",r);e.push(i),n[t].forEach((s,o)=>i[o]=s)}return e}function OG(n,e){const t=n.slice(0,e);for(;t.length<e;)t.push(1);for(let r=e;r<n.length;r++)t[e-1]*=n[r];return t}function oIe(n,e,t,r,i,s){const o=OG(e,2)[1],a=OG(s,2)[1];let l=0;for(const c of t)for(let u=c[0];u<c[1];++u){for(let d=0;d<r;++d)i[l*a+d]=n[u*o+d];++l}}function aIe(n,e,t,r,i){const s=e.slice();s[0]=i;const o=qs(t,xt(s)),a=n.length,l=a===0?0:a/e[0];return oIe(n,e,r,l,o,s),[o,s]}function Jte(n,e,t,r,i,s,o,a){if(n.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(nIe(s,o,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:u,valueSlices:d,numValues:f}=iIe(s,o,n,c),p=sIe(u),g=aIe(t,r,i,d,f);return[p,g[0],g[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BG=2147483647;function Zte(n,e,t,r,i,s,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=i.length===0,c=o.length===0,u=[];a||u.push(e[0]),l||u.push(i[0]),c||u.push(o[0]);for(let b=1;b<u.length;++b)if(u[b]!==u[b-1])throw new Error("starts, limits, and deltas must have the same shape");const d=u.length===0?1:u[0],f=qs("int32",d+1);f[0]=0;for(let b=0;b<d;++b){const x=a?n[0]:n[b],_=l?r[0]:r[b],E=c?s[0]:s[b];if(E===0)throw new Error("Requires delta != 0");let C;if(E>0&&_<x||E<0&&_>x)C=0;else if(C=Math.ceil(Math.abs((_-x)/E)),C>BG)throw new Error(`Requires ((limit - start) / delta) <= ${BG}`);f[b+1]=f[b]+C}const p=f[d],g=qs(t,p);let v=0;for(let b=0;b<d;++b){const x=f[b+1]-f[b];let _=a?n[0]:n[b];const E=c?s[0]:s[b];for(let C=0;C<x;++C)g[v++]=_,_+=E}return[f,g]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Iu=qd;class sN{constructor(e,t,r,i,s,o,a,l,c,u){this.shape=e,this.shapeShape=t,this.values=r,this.valuesShape=i,this.valuesDType=s,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=kZ(u),this.raggedRank=OZ(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Iu.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Iu.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Iu.VALUE_ROWIDS:return sN.getMaxWidthValueRowID(t);case Iu.ROW_SPLITS:return sN.getMaxWidthRowSplit(t);default:throw new Error(`Cannot handle partition type ${Iu[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const t=e.length;if(t===0||t===1)return 0;let r=0;for(let i=0;i<t-1;++i){const s=e[i+1]-e[i];s>r&&(r=s)}return r}static getMaxWidthValueRowID(e){const t=e.length;if(t===0)return 0;let r=0,i=e[0],s=0;for(let o=1;o<t;++o){const a=e[o];a!==i&&(i=a,s=Math.max(o-r,s),r=o)}return Math.max(t-r,s)}tensorShapeFromTensor(e,t,r=!0){if(t.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return LG(e,r)}calculateOutputSize(e){const t=this.valuesShape,r=this.defaultValueShape;BZ(r,t);const i=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=DZ(this.raggedRank,i,t);o[0]<0&&(o[0]=e);for(let a=1;a<=this.raggedRank;++a)o[a]<0&&(o[a]=this.getMaxWidth(a));return o}calculateFirstParentOutputIndex(e,t,r){const i=Math.min(e,r),s=[];let o=0;for(let a=0;a<i;++a,o+=t)s.push(o);for(let a=i;a<e;++a)s.push(-1);return de(s.length===e,()=>"Final length of result must be equal to firstDimension."),s}calculateOutputIndexRowSplit(e,t,r,i){const s=e.length,o=[];for(let a=0;a<s-1;++a){const l=e[a+1]-e[a];let c=Math.min(i,l),u=t[a];u===-1&&(c=0);for(let d=0;d<c;++d)o.push(u),u+=r;for(let d=0;d<l-c;++d)o.push(-1)}if(s>0&&o.length!==e[s-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,t,r,i){const s=e.length,o=[];if(s===0)return[];let a=0,l=e[0];if(l>=t.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${t.length}`);let c=t[l];o.push(c);for(let u=1;u<s;++u){const d=e[u];if(d===l)c>=0&&(++a,a<i?c+=r:c=-1);else{if(a=0,l=d,d>=t.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${t.length}`);c=t[d]}o.push(c)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,t,r,i){const s=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case Iu.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,t,r,i);case Iu.ROW_SPLITS:if(s.length-1>t.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${t.length}`);return this.calculateOutputIndexRowSplit(s,t,r,i);default:throw new Error(`Unsupported partition type: ${Iu[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case Iu.FIRST_DIM_SIZE:return e[0];case Iu.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Iu.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Iu[t]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const t=this.getFirstDimensionSize(),r=this.calculateOutputSize(t),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let l=i.length-2;l>=0;--l)i[l]=i[l+1]*r[l+1];const s=LG(r,!1),o=qs(this.valuesDType,xt(s));if(i[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(t,i[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,i[c],r[c]);this.setOutput(this.raggedRank,l,o,s)}return[s,o]}setOutput(e,t,r,i){if(r.length===0)return;const s=this.values,o=r;let a=i.slice();a=a.slice(e+1);const l=xt(a),c=t.length;let u=this.defaultValue;if(u.length!==l&&u.length!==1){const g=this.defaultValueShape;Ye(()=>{const v=Fe(u,g);u=Vx(v,a).dataSync()})}let d=0,f=0,p=0;for(let g=0;g<=c;++g){let v=g<c?t[g]:-1;if(v===p){++p;continue}if(f<p){const b=s.subarray(d*l),x=o.subarray(f*l),_=(p-f)*l;$G(x,b,_)}if(g>=c){const b=r.length;v=Math.floor(b/l)}if(v>p)if(this.defaultValue.length===1)o.subarray(p*l,v*l).fill(this.defaultValue[0]),p=v;else for(;v>p;){const b=o.slice(p*l);$G(b,u,l),++p}v<0?(d=g+1,f=p):(d=g,f=p,p=f+1)}}}function $G(n,e,t){for(let r=0;r<t;r++)n[r]=e[r]}function LG(n,e){const t=[];for(let r of n){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}t.push(r)}return t}function Qte(n,e,t,r,i,s,o,a,l,c){return new sN(n,e,t,r,i,s,o,a,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ene(n,e,t,r){const i=n===e,s=n<e&&t<0,o=e<n&&t>1;if(i||s||o)return ka(0,r);const a=Math.abs(Math.ceil((e-n)/t)),l=ka(a,r);e<n&&t===1&&(t=-1),l[0]=n;for(let c=1;c<l.length;c++)l[c]=l[c-1]+t;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tne=Lf(n=>1/Math.sqrt(n)),lIe=t0(wE,tne),cIe={kernelName:wE,backendName:"cpu",kernelFunc:lIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ly(n,e,t,r,i,s,o,a,l,c){const u=[r/i,i],d=n.values,f=e.values;if(r===0)return Ar(t,e.dtype);const p=l instanceof Ao?l:Ar(u,e.dtype);typeof l=="string"||typeof l=="number"?p.values.fill(l):typeof l=="boolean"&&p.values.fill(+l);for(let g=0;g<s;g++){const v=[];let b=0;for(let x=0;x<o;x++){const _=d[g*o+x];v.push(_),b+=_*a[x]}if(b<0||b>=r/i)throw new Error(`Invalid indices: ${v} does not index into ${t}`);for(let x=0;x<i;x++)c?p.values[b*i+x]+=f[g*i+x]:p.values[b*i+x]=e.rank===0?f[0]:f[g*i+x]}return p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uIe=Lf(n=>1/(1+Math.exp(-n))),nne=Mi(TE,n=>1/(1+Math.exp(-n))),dIe={kernelName:TE,backendName:"cpu",kernelFunc:nne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rne(n,e,t,r,i){const s=pz(r,e,t),o=xt(t),a=kn(r);if(s){const d=mz(e,a);return i==="string"?n.slice(d,d+o):n.subarray(d,d+o)}const l=i==="string"?Xp(n):n,c=Ar(r,i,l),u=Ar(t,i);for(let d=0;d<u.size;++d){const f=u.indexToLoc(d),p=f.map((g,v)=>g+e[v]);u.set(c.get(...p),...f)}return i==="string"?tQ(u.values):u.values}function Sv(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{begin:s,size:o}=r;_n(i,"slice");const[a,l]=h3(i,s,o);hz(i,a,l);const c=t.data.get(i.dataId).values,u=rne(c,a,l,i.shape,i.dtype);return t.makeTensorInfo(l,i.dtype,u)}const hIe={kernelName:OD,backendName:"cpu",kernelFunc:Sv};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ine(n,e,t,r,i,s,o){const a=e[0],l=s[0],c=new Array(l),u=new Array(a),d=e[1];if(l===0){if(a!==0)throw new Error(HZ(a));const b=qs(t,0),x=qs(i,0);return[b,[0,d],x,c,u]}let f=!0,p=0;const g=new Array(l).fill(0);for(let b=0;b<a;++b){const x=n[b*d];if(x<0)throw new Error(VZ(b,x));if(x>=l)throw new Error(GZ(b,x,l));++g[x],f=f&&x>=p,p=x}let v=!0;for(let b=0;b<l;++b){const x=g[b]===0;c[b]=x,v=v&&!x,g[b]=Math.max(g[b],1),b>0&&(g[b]+=g[b-1])}if(v&&f){const b=n,x=r;for(let _=0;_<a;++_)u[_]=_;return[b,[a,d],x,c,u]}else{const b=g[l-1],x=qs(t,b*d),_=qs(i,b),E=new Array(l).fill(0);for(let C=0;C<a;++C){const M=n[C*d],R=E[M],L=(M===0?0:g[M-1])+R;E[M]++;for(let B=0;B<d;++B)x[L*d+B]=n[C*d+B];_[L]=r[C],u[C]=L}for(let C=0;C<l;++C)if(E[C]===0){const R=C===0?0:g[C-1];x[R*d+0]=C;for(let L=1;L<d;++L)x[R*d+L]=0;_[R]=o}return[x,[b,d],_,c,u]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sne(n,e,t,r,i){const s=xt(r),o=e[0],a=i.length,l=[];let c=1,u=-1;for(let b=0;b<a;++b){const x=i[b];if(x===-1){if(u!==-1)throw new Error(WZ(u,b));u=b,l.push(1)}else{if(x<0)throw new Error(jZ(b,x));c*=x,l.push(x)}}if(u!==-1){if(c<=0)throw new Error(XZ());const b=Math.trunc(s/c);if(c*b!==s)throw new Error(qZ(r,l));l[u]=b}if(xt(l)!==s)throw new Error(KZ(r,l));const f=r.length,p=[];if(f>0){p[f-1]=1;for(let b=f-2;b>=0;--b)p[b]=p[b+1]*r[b+1]}const g=[];if(a>0){g[a-1]=1;for(let b=a-2;b>=0;--b)g[b]=g[b+1]*l[b+1]}const v=qs(t,o*a);for(let b=0;b<o;++b){let x=0;for(let _=0;_<f;++_)x+=n[b*f+_]*p[_];for(let _=0;_<a;++_)v[b*a+_]=Math.trunc(x/g[_]),x%=g[_]}return[v,[o,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c5(n,e,t,r,i,s=!1,o=0){const a=r.length,l=[e[0],n.length/e[0]],c=l[1],d=a>0?i[a-1]+1:0;if(d<0)throw new Error(kL());const f=e.slice();f[0]=d;const p=f.reduce((E,C)=>E*C,1),g=qs(t,p);if(a===0)return d>0&&g.fill(o),[g,f];if(d<=0)throw new Error(kL());let v=0,b=1,x=0,_=i[v];for(;;){let E=0;if(b<a){if(E=i[b],_===E){++b;continue}if(_>=E)throw new Error(YZ())}if(_<0||_>=d)throw new Error(JZ(_,d));_>x&&g.fill(o,x*c,_*c);for(let C=v;C<b;++C){const M=r[C];if(M<0||M>=l[0])throw new Error(ZZ(C,r[C],l[0]));for(let R=0;R<c;R++)g[_*c+R]+=n[M*c+R]}if(s)for(let C=0;C<c;C++)g[_*c+C]/=b-v;if(v=b,++b,x=_+1,_=E,b>a)break}return x<d&&g.fill(o,x*c,d*c),[g,f]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fIe=Lf(n=>Math.sqrt(n)),pIe=Mi(RE,n=>Math.sqrt(n)),mIe={kernelName:RE,backendName:"cpu",kernelFunc:pIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const one=eo((n,e)=>{const t=n-e;return t*t}),gIe=No(NE,one),yIe={kernelName:NE,backendName:"cpu",kernelFunc:gIe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ane=Lf((n,e)=>{const{pattern:t,replaceGlobal:r,rewrite:i}=e;return n.replace(new RegExp(t,r?"g":""),i)}),vIe=t0(PD,ane),bIe={kernelName:PD,backendName:"cpu",kernelFunc:vIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lne(n,e,t,r){const i=Ar(n,e.dtype);for(let s=0;s<i.size;s++){const o=i.indexToLoc(s),a=new Array(o.length);for(let l=0;l<a.length;l++)a[l]=o[l]*t[l]+r[l];i.set(e.get(...a),...o)}return i}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xIe{constructor(e,t,r,i,s,o){this.separator=vg(e),this.nGramWidths=t,this.leftPad=vg(r),this.rightPad=vg(i),this.padWidth=s,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const r=this.getPadWidth(t);return Math.max(0,e+2*r-t+1)}createNGrams(e,t,r,i,s,o){for(let a=0;a<s;++a){const l=this.getPadWidth(o),c=Math.max(0,l-a),u=Math.max(0,l-(s-(a+1))),d=o-(c+u),f=t+(c>0?0:a-l);let p=0;p+=c*this.leftPad.length;for(let _=0;_<d;++_)p+=e[f+_].length;p+=u*this.rightPad.length;const g=c+u+d-1;p+=g*this.separator.length,r[i+a]=new Uint8Array(p);const v=r[i+a];let b=0;const x=_=>_.forEach(E=>v[b++]=E);for(let _=0;_<c;++_)x(this.leftPad),x(this.separator);for(let _=0;_<d-1;++_)x(e[f+_]),x(this.separator);if(d>0){x(e[f+d-1]);for(let _=0;_<u;++_)x(this.separator),x(this.rightPad)}else{for(let _=0;_<u-1;++_)x(this.rightPad),x(this.separator);x(this.rightPad)}}}compute(e,t){const r=e.length,i=t.length;if(i>0){let l=t[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<i;++c){let u=t[c]>=l;if(u=u&&t[c]<=r,!u)throw new Error(`Invalid split value ${t[c]}, must be in [${l}, ${r}]`);l=t[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const s=i-1,o=qs("int32",i);if(r===0||i===0){const l=new Array(r);for(let c=0;c<=s;++c)o[c]=0;return[l,o]}o[0]=0;for(let l=1;l<=s;++l){const c=t[l]-t[l-1];let u=0;this.nGramWidths.forEach(d=>{u+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&u===0&&(u=1),o[l]=o[l-1]+u}const a=new Array(o[s]);for(let l=0;l<s;++l){const c=t[l];let u=o[l];if(this.nGramWidths.forEach(d=>{const f=t[l+1]-t[l],p=this.getNumNGrams(f,d);this.createNGrams(e,c,a,u,p,d),u+=p}),this.preserveShort&&u===o[l]){const d=t[l+1]-t[l];if(d===0)continue;const f=d+2*this.padWidth;this.createNGrams(e,c,a,u,1,f)}}return[a,o]}}function cne(n,e,t,r,i,s,o,a){return new xIe(t,r,i,s,o,a).compute(n,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SIe(n,e,t,r){if(!n.length)return;if(e.length===0){for(let s=0;s<n.length;++s)r.push(n.subarray(s,s+1));return}if(e.length===1){const s=e[0];let o=n.indexOf(s);for(;o!==-1;){const a=n.subarray(0,o);(!t||a.length!==0)&&r.push(a),n=n.subarray(o+1),o=n.indexOf(s)}(!t||n.length!==0)&&r.push(n);return}let i=0;for(let s=0;s<n.length+1;s++)if(s===n.length||e.indexOf(n[s])!==-1){const o=n.subarray(i,s);(!t||o.length!==0)&&r.push(o),i=s+1}}function une(n,e,t){const r=n.length,i=[];let s=0,o=0;const a=new Array(r);for(let f=0;f<r;++f){const p=i.length;SIe(n[f],e,t,i);const g=i.length-p;a[f]=g,s+=g,o=Math.max(o,g)}const l=qs("int32",s*2),c=new Array(s),u=[r,o];let d=0;for(let f=0;f<r;++f)for(let p=0;p<a[f];++p)l[d*2]=f,l[d*2+1]=p,c[d]=i[d],++d;return[l,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dne(n,e){const t=qs("int32",n.length);for(let r=0;r<n.length;++r)t[r]=Dve(n[r]).modulo(e).getLowBitsUnsigned();return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hne=eo((n,e)=>n-e),wIe=s5((n,e,t,r)=>({real:n-t,imag:e-r})),u5=No(IE,hne,wIe),_Ie={kernelName:IE,backendName:"cpu",kernelFunc:u5};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fne(n,e){const t=new Array(n.rank);for(let i=0;i<t.length;i++)t[i]=n.shape[i]*e[i];const r=Ar(t,n.dtype);for(let i=0;i<r.values.length;++i){const s=r.indexToLoc(i),o=new Array(n.rank);for(let l=0;l<o.length;l++)o[l]=s[l]%n.shape[l];const a=n.locToIndex(o);r.values[i]=n.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o_=(n,e)=>{const t=e.value-n.value;return t===0?n.index-e.index:t};function pne(n,e,t=0,r=n.length-1){for(;r>t;){if(r-t>600){const a=r-t+1,l=e-t+1,c=Math.log(a),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(a-u)/a)*Math.sign(l-a/2),f=Math.max(t,Math.floor(e-l*u/a+d)),p=Math.min(r,Math.floor(e+(a-l)*u/a+d));pne(n,e,f,p)}const i=n[e];let s=t,o=r;for(Mx(n,t,e),o_(n[r],i)>0&&Mx(n,t,r);s<o;){for(Mx(n,s,o),s++,o--;o_(n[s],i)<0;)s=s+1;for(;o_(n[o],i)>0;)o=o-1}o_(n[t],i)===0?Mx(n,t,o):(o=o+1,Mx(n,o,r)),o<=e&&(t=o+1),e<=o&&(r=o-1)}}function mne(n,e,t,r,i){const s=e[e.length-1],[o,a]=[n.length/s,s],l=la(t,o*r),c=la("int32",o*r);for(let d=0;d<o;d++){const f=d*a,p=n.subarray(f,f+a);let g=new Array(p.length);p.forEach((_,E)=>g[E]={value:_,index:E}),r<g.length&&(pne(g,r),g=g.slice(0,r)),i&&g.sort(o_);const v=d*r,b=l.subarray(v,v+r),x=c.subarray(v,v+r);for(let _=0;_<r;_++)b[_]=g[_].value,x[_]=g[_].index}const u=e.slice();return u[u.length-1]=r,[Ar(u,t,l),Ar(u,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gne(n,e,t,r){const i=Ir(e,t)[0],s=[1,t[0],1];for(let g=0;g<i;g++)s[0]*=t[g];s[1]=t[i];for(let g=i+1;g<t.length;g++)s[2]*=t[g];const o=new Map,a=new Int32Array(t[i]),l=new Ao(s,r,n),c=[],u=s[0]===1&&s[2]===1;for(let g=0;g<t[i];g++){let v;if(u)v=n[g].toString();else{const x=[];for(let _=0;_<s[0];_++)for(let E=0;E<s[2];E++)x.push(l.get(_,g,E));v=x.join(",")}const b=o.get(v);if(b!=null)a[g]=b;else{const x=o.size;o.set(v,x),a[g]=x,c.push(g)}}const d=s.slice();d[1]=o.size;const f=new Ao(d,r);c.forEach((g,v)=>{for(let b=0;b<s[0];b++)for(let x=0;x<s[2];x++)f.set(l.get(b,g,x),b,v,x)});const p=t.slice();return p[i]=d[1],{outputValues:f.values,outputShape:p,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CIe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:Ete,bincountImpl:o5,bincountReduceImpl:Ate,bitwiseAndImpl:Tte,castImpl:Cte,ceilImpl:Mte,concatImpl:Rte,equalImpl:Nte,expImpl:Dte,expm1Impl:Ote,floorDivImpl:$te,floorImpl:Bte,gatherNdImpl:Lte,gatherV2Impl:Fte,greaterEqualImpl:Ute,greaterImpl:Pte,lessEqualImpl:Hte,lessImpl:zte,linSpaceImpl:Vte,logImpl:Gte,maxImpl:Wte,maximumImpl:jte,minimumImpl:Xte,multiplyImpl:a5,negImpl:qte,notEqualImpl:Kte,prodImpl:Yte,raggedGatherImpl:Jte,raggedRangeImpl:Zte,raggedTensorToTensorImpl:Qte,rangeImpl:ene,rsqrtImpl:tne,scatterImpl:Ly,sigmoidImpl:uIe,simpleAbsImpl:_te,sliceImpl:rne,sparseFillEmptyRowsImpl:ine,sparseReshapeImpl:sne,sparseSegmentReductionImpl:c5,sqrtImpl:fIe,squaredDifferenceImpl:one,staticRegexReplaceImpl:ane,stridedSliceImpl:lne,stringNGramsImpl:cne,stringSplitImpl:une,stringToHashBucketFastImpl:dne,subImpl:hne,tileImpl:fne,topKImpl:mne,transposeImpl:l5,uniqueImpl:gne},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */HY("cpu",()=>new A3,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yne=Mi(eE,n=>n>=0?n:Math.exp(n)-1),EIe={kernelName:eE,backendName:"cpu",kernelFunc:yne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vne(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{alpha:s}=r;_n([i],"leakyRelu");const o=xt(i.shape),a=t.data.get(i.dataId).values,l=la("float32",o);for(let c=0;c<a.length;c++)l[c]=a[c]<0?s*a[c]:a[c];return t.makeTensorInfo(i.shape,"float32",l)}const AIe={kernelName:lD,backendName:"cpu",kernelFunc:vne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TIe=eo((n,e)=>n<0?e*n:n);function bne(n){const{inputs:e,backend:t}=n,{x:r,alpha:i}=e;_n([r,i],"prelu");const s=t.data.get(r.dataId).values,o=t.data.get(i.dataId).values,[a,l]=TIe(r.shape,i.shape,s,o,"float32");return t.makeTensorInfo(l,"float32",a)}const MIe={kernelName:TD,backendName:"cpu",kernelFunc:bne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xne=Mi(bE,n=>Math.max(0,n)),RIe={kernelName:bE,backendName:"cpu",kernelFunc:xne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sne=Mi(xE,n=>Math.min(Math.max(0,n),6)),NIe={kernelName:xE,backendName:"cpu",kernelFunc:Sne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oN(n,e,t,r,i){if(t==="linear")return Mf({inputs:{x:e},backend:n});if(t==="relu")return xne({inputs:{x:e},backend:n});if(t==="elu")return yne({inputs:{x:e},backend:n});if(t==="relu6")return Sne({inputs:{x:e},backend:n});if(t==="prelu")return bne({inputs:{x:e,alpha:r},backend:n});if(t==="leakyrelu")return vne({inputs:{x:e},backend:n,attrs:{alpha:i}});if(t==="sigmoid")return nne({inputs:{x:e},backend:n});throw new Error(`Activation ${t} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ts(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{shape:s}=r,o=xt(i.shape),a=vY(s,o),l=xt(a);de(o===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),t.incRef(i.dataId);const c=t.data.get(i.dataId);if(c.complexTensorInfos!=null){const u=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;u.shape=a,d.shape=a}return{dataId:i.dataId,shape:a,dtype:i.dtype}}const IIe={kernelName:RD,backendName:"cpu",kernelFunc:ts};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wne(n){const{inputs:e,backend:t,attrs:r}=n,{a:i,b:s}=e,{transposeA:o,transposeB:a}=r;_n([i,s],"matMul");const l=i.shape.length,c=s.shape.length,u=o?i.shape[l-2]:i.shape[l-1],d=a?s.shape[c-1]:s.shape[c-2],f=o?i.shape[l-1]:i.shape[l-2],p=a?s.shape[c-2]:s.shape[c-1],g=i.shape.slice(0,-2),v=s.shape.slice(0,-2),b=xt(g),x=xt(v),E=fr(i.shape.slice(0,-2),s.shape.slice(0,-2)).concat([f,p]);de(u===d,()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${i.shape} and ${s.shape} and transposeA=${o} and transposeB=${a} must match.`);const C=o?[b,u,f]:[b,f,u],M=a?[x,p,d]:[x,d,p],R=ts({inputs:{x:i},backend:t,attrs:{shape:C}}),L=ts({inputs:{x:s},backend:t,attrs:{shape:M}}),B=o?R.shape[1]:R.shape[2],N=o?R.shape[2]:R.shape[1],I=a?L.shape[1]:L.shape[2],D=Math.max(b,x),P=t.data.get(R.dataId).values,G=t.data.get(L.dataId).values,W=kn(R.shape),q=kn(L.shape),[z,J,Q]=o?[W[0],1,W[1]]:[W[0],W[1],1],[Y,X,te]=a?[1,q[1],q[0]]:[q[1],1,q[0]],ne=N*I,le=Ar([D,N,I],R.dtype),ye=le.values,ue=t.blockSize;for(let be=0;be<D;be++){const xe=be%b,Pe=be%x;for(let ze=0;ze<N;ze+=ue){const Ke=Math.min(ze+ue,N);for(let pt=0;pt<I;pt+=ue){const dt=Math.min(pt+ue,I);for(let pe=0;pe<B;pe+=ue){const Le=Math.min(pe+ue,B);for(let Ue=ze;Ue<Ke;Ue++)for(let Ze=pt;Ze<dt;Ze++){let je=0;for(let lt=pe;lt<Le;lt++){const st=P[xe*z+Ue*J+lt*Q],at=G[lt*Y+Ze*X+Pe*te];je+=st*at}ye[be*ne+(Ue*I+Ze)]+=je}}}}}return t.disposeIntermediateTensorInfo(R),t.disposeIntermediateTensorInfo(L),t.makeTensorInfo(E,le.dtype,le.values)}const DIe={kernelName:jI,backendName:"cpu",kernelFunc:wne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kIe(n){const{inputs:e,backend:t,attrs:r}=n,{a:i,b:s,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;let f,p,g;const v=[];f=wne({inputs:{a:i,b:s},attrs:{transposeA:l,transposeB:c},backend:t}),o&&(p=S1({inputs:{a:f,b:o},backend:t}),v.push(f),f=p),u&&(g=oN(t,f,u,a,d),v.push(f),f=g);for(const x of v)t.disposeIntermediateTensorInfo(x);return f}const OIe={kernelName:PR,backendName:"cpu",kernelFunc:kIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BIe=Mi(zC,n=>Math.acos(n)),$Ie={kernelName:zC,backendName:"cpu",kernelFunc:BIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LIe=Mi(HC,n=>Math.acosh(n)),FIe={kernelName:HC,backendName:"cpu",kernelFunc:LIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PIe(n){const{inputs:e,backend:t}=n,r=e;_n(e,"addN");const i=r.map(a=>t.data.get(a.dataId).values),s=Ar(r[0].shape,r[0].dtype),o=s.values;for(let a=0;a<r.length;a++){const l=i[a];for(let c=0;c<o.length;c++)o[c]+=l[c]}return t.makeTensorInfo(s.shape,s.dtype,s.values)}const UIe={kernelName:zI,backendName:"cpu",kernelFunc:PIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zIe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,keepDims:o}=r;_n(i,"all");const a=Ir(s,i.shape);let l=a;const c=Cs(l,i.shape.length);let u=i;c!=null&&(u=Gl({inputs:{x:i},backend:t,attrs:{perm:c}}),l=Zs(l.length,i.shape.length)),da("all",l,u.shape.length);const[d,f]=Xo(u.shape,l),p=xt(f),g=ka(xt(d),u.dtype),v=t.data.get(u.dataId).values;for(let x=0;x<g.length;++x){const _=x*p;let E=v[_];for(let C=0;C<p;++C){const M=v[_+C];E=E&&M}g[x]=E}c!=null&&t.disposeIntermediateTensorInfo(u);const b=t.makeTensorInfo(d,u.dtype,g);if(o){const x=Ks(d,a),_=ts({inputs:{x:b},backend:t,attrs:{shape:x}});return t.disposeIntermediateTensorInfo(b),_}return b}const HIe={kernelName:y4,backendName:"cpu",kernelFunc:zIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VIe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,keepDims:o}=r;_n(i,"any");const a=Ir(s,i.shape);let l=a;const c=Cs(l,i.shape.length);let u=i;c!=null&&(u=Gl({inputs:{x:i},backend:t,attrs:{perm:c}}),l=Zs(l.length,i.shape.length)),da("any",l,u.shape.length);const[d,f]=Xo(u.shape,l),p=xt(f),g=ka(xt(d),u.dtype),v=t.data.get(u.dataId).values;for(let x=0;x<g.length;++x){const _=x*p;let E=v[_];for(let C=0;C<p;++C){const M=v[_+C];E=E||M}g[x]=E}c!=null&&t.disposeIntermediateTensorInfo(u);const b=t.makeTensorInfo(d,u.dtype,g);if(o){const x=Ks(d,a),_=ts({inputs:{x:b},backend:t,attrs:{shape:x}});return t.disposeIntermediateTensorInfo(b),_}return b}const GIe={kernelName:v4,backendName:"cpu",kernelFunc:VIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WIe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s}=r;_n(i,"argMax");let o=Ir(s,i.shape);const a=Cs(o,i.shape.length);let l=i;const c=[];a!=null&&(l=Gl({inputs:{x:i},backend:t,attrs:{perm:a}}),c.push(l),o=Zs(o.length,l.shape.length)),o=[o[0]],da("argMax",o,l.shape.length);const[u,d]=Xo(l.shape,o),f=xt(u),p=ka(f,"int32"),g=xt(d),v=t.data.get(l.dataId).values;for(let b=0;b<p.length;++b){const x=b*g;let _=v[x],E=0;for(let C=0;C<g;++C){const M=v[x+C];M>_&&(_=M,E=C)}p[b]=E}return c.forEach(b=>t.disposeIntermediateTensorInfo(b)),t.makeTensorInfo(u,"int32",p)}const jIe={kernelName:HI,backendName:"cpu",kernelFunc:WIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XIe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s}=r;_n(i,"argMin");let o=Ir(s,i.shape);const a=Cs(o,i.shape.length);let l=i;const c=[];a!=null&&(l=Gl({inputs:{x:i},backend:t,attrs:{perm:a}}),c.push(l),o=Zs(o.length,l.shape.length)),o=[o[0]],da("argMin",o,l.shape.length);const[u,d]=Xo(l.shape,o),f=xt(u),p=ka(f,"int32"),g=xt(d),v=t.data.get(l.dataId).values;for(let b=0;b<p.length;++b){const x=b*g;let _=v[x],E=0;for(let C=0;C<g;++C){const M=v[x+C];M<_&&(_=M,E=C)}p[b]=E}return c.forEach(b=>t.disposeIntermediateTensorInfo(b)),t.makeTensorInfo(u,"int32",p)}const qIe={kernelName:VI,backendName:"cpu",kernelFunc:XIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KIe=Mi(VC,n=>Math.asin(n)),YIe={kernelName:VC,backendName:"cpu",kernelFunc:KIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JIe=Mi(GC,n=>Math.asinh(n)),ZIe={kernelName:GC,backendName:"cpu",kernelFunc:JIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QIe=Mi(WC,n=>Math.atan(n)),eDe={kernelName:WC,backendName:"cpu",kernelFunc:QIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tDe=eo((n,e)=>Math.atan2(n,e)),nDe=No(XC,tDe),rDe={kernelName:XC,backendName:"cpu",kernelFunc:nDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iDe=Mi(jC,n=>Math.atanh(n)),sDe={kernelName:jC,backendName:"cpu",kernelFunc:iDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d5(n,e,t,r,i,s){const o=i.strideHeight,a=i.strideWidth,l=i.dilationHeight,c=i.dilationWidth,u=i.effectiveFilterHeight,d=i.effectiveFilterWidth,f=i.padInfo.top,p=i.padInfo.left,g=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=Ar(i.outShape,t),b=v.values,x=i.outShape[1]*i.outShape[2]*i.outShape[3],_=i.outShape[2]*i.outShape[3],E=i.outShape[3];for(let C=0;C<i.batchSize;++C){const M=C*x,R=C*r[0];for(let L=0;L<i.inChannels;++L)for(let B=0;B<i.outHeight;++B){const N=B*o-f,I=Math.max(0,N),D=Math.min(i.inHeight,u+N),P=M+B*_;for(let G=0;G<i.outWidth;++G){const W=G*a-p,q=Math.max(0,W),z=Math.min(i.inWidth,d+W);let J=g,Q=0,Y=0;for(let te=I;te<D;te+=l){const ne=R+te*r[1];for(let le=q;le<z;le+=c){const ye=ne+le*r[2],ue=n[ye+L];s==="max"&&ue>J?J=ue:s==="avg"&&(Q+=ue,Y++)}if(isNaN(J))break}const X=P+G*E+L;b[X]=s==="avg"?Q/Y:J}}}return v}function _ne(n,e,t,r,i=!1,s=!1){const o=Ar(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,d=r.effectiveFilterHeight,f=r.effectiveFilterWidth,p=r.padInfo.top,g=r.padInfo.left,v=Ar(e,t,n);for(let b=0;b<r.batchSize;++b)for(let x=0;x<r.inChannels;++x)for(let _=0;_<r.outHeight;++_){const E=_*a-p;let C=E;for(;C<0;)C+=c;const M=Math.min(r.inHeight,d+E);for(let R=0;R<r.outWidth;++R){const L=R*l-g;let B=L;for(;B<0;)B+=u;const N=Math.min(r.inWidth,f+L);let I=Number.NEGATIVE_INFINITY,D=-1;for(let P=C;P<M;P+=c){const G=P-E;for(let W=B;W<N;W+=u){const q=W-L,z=v.get(b,P,W,x);z>I&&(I=z,i?D=s?((b*r.inHeight+P)*r.inWidth+W)*r.inChannels+x:(P*r.inWidth+W)*r.inChannels+x:D=G*f+q)}}o.set(D,b,_,R,x)}}return o}function Cne(n,e,t,r,i,s){const o=i.strideDepth,a=i.strideHeight,l=i.strideWidth,c=i.dilationDepth,u=i.dilationHeight,d=i.dilationWidth,f=i.effectiveFilterDepth,p=i.effectiveFilterHeight,g=i.effectiveFilterWidth,v=i.padInfo.front,b=i.padInfo.top,x=i.padInfo.left,_=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,E=Ar(i.outShape,t),C=E.values,M=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],R=i.outShape[2]*i.outShape[3]*i.outShape[4],L=i.outShape[3]*i.outShape[4],B=i.outShape[4];for(let N=0;N<i.batchSize;++N){const I=N*M,D=N*r[0];for(let P=0;P<i.inChannels;++P)for(let G=0;G<i.outDepth;++G){const W=G*o-v;let q=W;for(;q<0;)q+=c;const z=Math.min(i.inDepth,f+W),J=I+G*R;for(let Q=0;Q<i.outHeight;++Q){const Y=Q*a-b;let X=Y;for(;X<0;)X+=u;const te=Math.min(i.inHeight,p+Y),ne=J+Q*L;for(let le=0;le<i.outWidth;++le){const ye=le*l-x;let ue=ye;for(;ue<0;)ue+=d;const be=Math.min(i.inWidth,g+ye),xe=ne+le*B;let Pe=_,ze=0,Ke=0;for(let dt=q;dt<z;dt+=c){const pe=D+dt*r[1];for(let Le=X;Le<te;Le+=u){const Ue=pe+Le*r[2];for(let Ze=ue;Ze<be;Ze+=d){const je=Ue+Ze*r[3],lt=n[je+P];if(s==="max"&&lt>Pe?Pe=lt:s==="avg"&&(ze+=lt,Ke++),isNaN(Pe))break}if(isNaN(Pe))break}if(isNaN(Pe))break}const pt=xe+P;C[pt]=s==="avg"?ze/Math.max(Ke,1):Pe}}}}return E}function oDe(n,e){const t=Ar(e.outShape,"int32"),r=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,u=e.effectiveFilterHeight,d=e.effectiveFilterWidth,f=e.padInfo.front,p=e.padInfo.top,g=e.padInfo.left;for(let v=0;v<e.batchSize;++v)for(let b=0;b<e.inChannels;++b)for(let x=0;x<e.outDepth;++x){const _=x*r-f;let E=_;for(;E<0;)E+=o;const C=Math.min(e.inDepth,c+_);for(let M=0;M<e.outHeight;++M){const R=M*i-p;let L=R;for(;L<0;)L+=a;const B=Math.min(e.inHeight,u+R);for(let N=0;N<e.outWidth;++N){const I=N*s-g;let D=I;for(;D<0;)D+=l;const P=Math.min(e.inWidth,d+I);let G=Number.NEGATIVE_INFINITY,W=-1;for(let q=E;q<C;q+=o){const z=q-_;for(let J=L;J<B;J+=a){const Q=J-R;for(let Y=D;Y<P;Y+=l){const X=Y-I,te=n.get(v,q,J,Y,b);te>=G&&(G=te,W=z*u*d+Q*u+X)}}}t.set(W,v,x,M,N,b)}}}return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aDe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e;_n(i,"avgPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,c=1;de(ua(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=nd(i.shape,s,o,c,a,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&Vr(u.inShape,u.outShape))d=Mf({inputs:{x:i},backend:t});else{const f=t.data.get(i.dataId).values,p=kn(i.shape),g=d5(f,i.shape,i.dtype,p,u,"avg");d=t.makeTensorInfo(u.outShape,i.dtype,g.values)}return d}const lDe={kernelName:GI,backendName:"cpu",kernelFunc:aDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cDe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r;_n(i,"avgPool3d");const u=nm(i.shape,s,o,1,a,l,c),d=t.data.get(i.dataId).values,f=Cne(d,i.shape,i.dtype,kn(i.shape),u,"avg");return t.makeTensorInfo(f.shape,"float32",f.values)}const uDe={kernelName:WI,backendName:"cpu",kernelFunc:cDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dDe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,input:s}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:c}=r;_n([i,s],"avgPool3DGrad");const u=nm(s.shape,o,a,1,l,c),d=u.strideDepth,f=u.strideHeight,p=u.strideWidth,g=u.filterDepth,v=u.filterHeight,b=u.filterWidth,x=u.dilationDepth,_=u.dilationHeight,E=u.dilationWidth,C=u.effectiveFilterDepth,M=u.effectiveFilterHeight,R=u.effectiveFilterWidth,L=C-1-u.padInfo.front,B=R-1-u.padInfo.left,N=M-1-u.padInfo.top,I=Ar(s.shape,"float32"),D=1/(g*v*b),P=t.bufferSync(i);for(let G=0;G<u.batchSize;++G)for(let W=0;W<u.inChannels;++W)for(let q=0;q<u.inDepth;++q)for(let z=0;z<u.inHeight;++z)for(let J=0;J<u.inWidth;++J){const Q=q-L,Y=z-N,X=J-B;let te=0;for(let ne=0;ne<C;ne+=x){const le=(Q+ne)/d;if(!(le<0||le>=u.outDepth||Math.floor(le)!==le))for(let ye=0;ye<M;ye+=_){const ue=(Y+ye)/f;if(!(ue<0||ue>=u.outHeight||Math.floor(ue)!==ue))for(let be=0;be<R;be+=E){const xe=(X+be)/p;if(xe<0||xe>=u.outWidth||Math.floor(xe)!==xe)continue;const Pe=P.get(G,le,ue,xe,W);te+=Pe}}}I.set(te*D,G,q,z,J,W)}return t.makeTensorInfo(I.shape,I.dtype,I.values)}const hDe={kernelName:x4,backendName:"cpu",kernelFunc:dDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fDe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,input:s}=e,o=s;_n([i,s],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=nd(o.shape,a,l,1,c),d=u.strideHeight,f=u.strideWidth,p=u.filterHeight,g=u.filterWidth,v=u.dilationHeight,b=u.dilationWidth,x=u.effectiveFilterHeight,_=u.effectiveFilterWidth,E=_-1-u.padInfo.left,C=x-1-u.padInfo.top,M=Ar(o.shape,"float32"),R=1/(p*g),L=t.data.get(i.dataId).values,B=Ar(i.shape,"float32",L);for(let N=0;N<u.batchSize;++N)for(let I=0;I<u.inChannels;++I)for(let D=0;D<u.inHeight;++D)for(let P=0;P<u.inWidth;++P){const G=D-C,W=P-E;let q=0;for(let z=0;z<x;z+=v){const J=(G+z)/d;if(!(J<0||J>=u.outHeight||Math.floor(J)!==J))for(let Q=0;Q<_;Q+=b){const Y=(W+Q)/f;if(Y<0||Y>=u.outWidth||Math.floor(Y)!==Y)continue;const X=B.get(N,J,Y,I);q+=X}}M.set(q*R,N,D,P,I)}return t.makeTensorInfo(M.shape,M.dtype,M.values)}const pDe={kernelName:b4,backendName:"cpu",kernelFunc:fDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mDe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,scale:s,offset:o,mean:a,variance:l}=e;de(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),de(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),de(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),_n([i,a,l,s,o],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const u=t.data.get(i.dataId).values,d=t.data.get(a.dataId).values,f=t.data.get(l.dataId).values,p=s?t.data.get(s.dataId).values:new Float32Array([1]),g=o?t.data.get(o.dataId).values:new Float32Array([0]),v=new Float32Array(u.length),b=g.length,x=p.length,_=f.length,E=d.length;let C=0,M=0,R=0,L=0;for(let B=0;B<u.length;++B)v[B]=g[C++]+(u[B]-d[M++])*p[R++]/Math.sqrt(f[L++]+c),C>=b&&(C=0),M>=E&&(M=0),R>=x&&(R=0),L>=_&&(L=0);return t.makeTensorInfo(i.shape,i.dtype,v)}const gDe={kernelName:sD,backendName:"cpu",kernelFunc:mDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yDe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{blockShape:s,crops:o}=r;_n([i],"batchToSpaceND");const a=s.reduce((x,_)=>x*_),l=GE(i.shape,s,a),c=WE(l.length,s.length),u=jE(i.shape,s,a),d=xz(o,s.length),f=Sz(u,o,s.length),p=ts({inputs:{x:i},backend:t,attrs:{shape:l}}),g=Gl({inputs:{x:p},backend:t,attrs:{perm:c}}),v=ts({inputs:{x:g},backend:t,attrs:{shape:u}}),b=Sv({inputs:{x:v},backend:t,attrs:{begin:d,size:f}});return t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(v),b}const vDe={kernelName:XI,backendName:"cpu",kernelFunc:yDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bDe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,weights:s}=e,{size:o}=r,a=t.data.get(i.dataId).values,l=t.data.get(s.dataId).values,c=o5(a,l,s.dtype,s.shape,o);return t.makeTensorInfo([o],s.dtype,c)}const xDe={kernelName:S4,backendName:"cpu",kernelFunc:bDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SDe(n){const{inputs:e,backend:t}=n,{s0:r,s1:i}=e,s=t.data.get(r.dataId).values,o=t.data.get(i.dataId).values,a=fr(Array.from(s),Array.from(o));return t.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const wDe={kernelName:w4,backendName:"cpu",kernelFunc:SDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _De=Mi(YC,(n,e)=>{const t=e;return n>t.clipValueMax?t.clipValueMax:n<t.clipValueMin?t.clipValueMin:n}),CDe={kernelName:YC,backendName:"cpu",kernelFunc:_De};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EDe=n=>{const{x:e}=n.inputs,t=n.backend,r=new Float32Array(xt(e.shape)),i=t.data.get(e.dataId),s=i.complexTensorInfos.real,o=i.complexTensorInfos.imag,a=t.data.get(s.dataId).values,l=t.data.get(o.dataId).values;for(let c=0;c<a.length;c++){const u=a[c],d=l[c];r[c]=Math.hypot(u,d)}return t.makeOutput(r,e.shape,"float32")},ADe={kernelName:KI,backendName:"cpu",kernelFunc:EDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w1(n){const{inputs:e,backend:t}=n,{input:r}=e,i=t.data.get(r.dataId).complexTensorInfos.imag,s=t.data.get(i.dataId).values;return t.makeTensorInfo(i.shape,i.dtype,s)}const TDe={kernelName:z4,backendName:"cpu",kernelFunc:w1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _1(n){const{inputs:e,backend:t,attrs:r}=n,{axis:i}=r,s=Ir(i,e[0].shape)[0],o=e.map(v=>v.shape);yz(o,s);let a=yf(e.map(v=>v.shape),s);if(xt(a)===0)return t.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(v=>xt(v.shape)>0);if(l.length===1)return Mf({inputs:{x:l[0]},backend:t});if(l[0].dtype==="complex64"){const v=l.map(C=>xv({inputs:{input:C},backend:t})),b=l.map(C=>w1({inputs:{input:C},backend:t})),x=_1({inputs:v,backend:t,attrs:{axis:s}}),_=_1({inputs:b,backend:t,attrs:{axis:s}}),E=vc({inputs:{real:x,imag:_},backend:t});return v.forEach(C=>t.disposeIntermediateTensorInfo(C)),b.forEach(C=>t.disposeIntermediateTensorInfo(C)),t.disposeIntermediateTensorInfo(x),t.disposeIntermediateTensorInfo(_),E}const c=l.map(v=>{const x=[-1,xt(v.shape.slice(s))];return ts({inputs:{x:v},backend:t,attrs:{shape:x}})}),u=c.map(v=>({vals:t.data.get(v.dataId).values,shape:v.shape}));a=yf(c.map(v=>v.shape),1);const d=c[0].shape[0]===1,f=Rte(u,a,e[0].dtype,d),p=yf(l.map(v=>v.shape),s),g=t.makeTensorInfo(p,e[0].dtype,f);return c.forEach(v=>t.disposeIntermediateTensorInfo(v)),g}const MDe={kernelName:YI,backendName:"cpu",kernelFunc:_1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ene(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:s}=e,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r;_n([i,s],"conv2d");const d=rm(l),f=jo(i.shape,s.shape,o,c,a,u,!1,d),p=f.filterHeight,g=f.filterWidth,v=f.dilationHeight,b=f.dilationWidth,x=f.padInfo.left,_=f.padInfo.top,E=f.dataFormat==="channelsLast",C=new Ao(f.outShape,i.dtype),M=kn(i.shape),R=kn(s.shape),L=M[0],B=E?M[1]:M[2],N=E?M[2]:1,I=E?1:M[1],D=C.strides[0],P=E?C.strides[1]:C.strides[2],G=E?C.strides[2]:1,W=E?1:C.strides[1],q=t.data.get(i.dataId).values,z=t.data.get(s.dataId).values,J=C.values;for(let Q=0;Q<f.batchSize;++Q){const Y=Q*L,X=Q*D;for(let te=0;te<f.outHeight;++te){const ne=X+te*P,le=te*f.strideHeight-_;for(let ye=0;ye<p;++ye){const ue=le+ye*v;if(ue<0||ue>=f.inHeight)continue;const be=ye*R[0],xe=Y+ue*B;for(let Pe=0;Pe<f.outWidth;++Pe){const ze=ne+Pe*G,Ke=Pe*f.strideWidth-x;for(let pt=0;pt<g;++pt){const dt=Ke+pt*b;if(dt<0||dt>=f.inWidth)continue;const pe=be+pt*R[1],Le=xe+dt*N;let Ue=pe;for(let Ze=0;Ze<f.inChannels;++Ze){const je=q[Le+Ze*I];for(let lt=0;lt<f.outChannels;++lt)J[ze+lt*W]+=je*z[Ue+lt];Ue+=f.outChannels}}}}}}return t.makeTensorInfo(C.shape,C.dtype,J)}const RDe={kernelName:JI,backendName:"cpu",kernelFunc:Ene};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NDe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,dy:s}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;_n([i,s],"conv2dBackpropFilter");const d=rm(l),f=jo(i.shape,u,o,1,a,c,!1,d),{strideHeight:p,strideWidth:g,filterHeight:v,filterWidth:b}=f,x=f.dataFormat==="channelsLast",_=new Ao(f.filterShape,"float32"),E=f.padInfo.left,C=f.padInfo.top,M=t.data.get(i.dataId).values,R=t.data.get(s.dataId).values,L=new Ao(i.shape,i.dtype,M),B=new Ao(s.shape,s.dtype,R);for(let N=0;N<v;++N){const I=Math.max(0,Math.ceil((C-N)/p)),D=Math.min(f.outHeight,(f.inHeight+C-N)/p);for(let P=0;P<b;++P){const G=Math.max(0,Math.ceil((E-P)/g)),W=Math.min(f.outWidth,(f.inWidth+E-P)/g);for(let q=0;q<f.inChannels;++q)for(let z=0;z<f.outChannels;++z){let J=0;for(let Q=0;Q<f.batchSize;++Q)for(let Y=I;Y<D;++Y){const X=N+Y*p-C;for(let te=G;te<W;++te){const ne=P+te*g-E;x?J+=L.get(Q,X,ne,q)*B.get(Q,Y,te,z):J+=L.get(Q,q,X,ne)*B.get(Q,z,Y,te)}}_.set(J,N,P,q,z)}}}return t.makeTensorInfo(_.shape,_.dtype,_.values)}const IDe={kernelName:C4,backendName:"cpu",kernelFunc:NDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DDe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,filter:s}=e,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r;_n([i,s],"conv2dBackpropInput");const d=kn(s.shape),f=kn(i.shape);let p=rm(c);const g=jo(o,s.shape,a,1,l,u,!1,p),v=new Ao(g.inShape,"float32"),b=v.values,x=t.data.get(i.dataId).values,_=t.data.get(s.dataId).values,[E,C,M]=d,{batchSize:R,filterHeight:L,filterWidth:B,inChannels:N,inHeight:I,inWidth:D,outChannels:P,outHeight:G,outWidth:W,strideHeight:q,strideWidth:z}=g;p=g.dataFormat;const J=L-1-g.padInfo.top,Q=B-1-g.padInfo.left,Y=p==="channelsLast",X=v.strides[0],te=Y?v.strides[1]:v.strides[2],ne=Y?v.strides[2]:1,le=Y?1:v.strides[1],ye=f[0],ue=Y?f[1]:f[2],be=Y?f[2]:1,xe=Y?1:f[1];for(let Pe=0;Pe<R;++Pe)for(let ze=0;ze<N;++ze)for(let Ke=0;Ke<I;++Ke){const pt=Ke-J,dt=Math.max(0,Math.ceil(pt/q)),pe=Math.min(G,(L+pt)/q);for(let Le=0;Le<D;++Le){const Ue=Le-Q,Ze=Math.max(0,Math.ceil(Ue/z)),je=Math.min(W,(B+Ue)/z);let lt=0;for(let at=dt;at<pe;++at){const Ut=at*q-pt;for(let mt=Ze;mt<je;++mt){const ce=mt*z-Ue,re=ye*Pe+ue*at+be*mt,$e=E*(L-1-Ut)+C*(B-1-ce)+M*ze;for(let qe=0;qe<P;++qe){const ot=x[re+xe*qe],et=_[$e+qe];lt+=ot*et}}}const st=X*Pe+te*Ke+ne*Le+le*ze;b[st]=lt}}return t.makeTensorInfo(v.shape,v.dtype,v.values)}const kDe={kernelName:ZI,backendName:"cpu",kernelFunc:DDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ODe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l}=r;_n([i,s],"conv3d");const c=Kg(i.shape,s.shape,o,l,a),{filterDepth:u,filterHeight:d,filterWidth:f,dilationDepth:p,dilationHeight:g,dilationWidth:v,padInfo:b}=c,x=b.front,_=b.left,E=b.top,C=new Ao(c.outShape,i.dtype),M=t.data.get(i.dataId).values,R=t.data.get(s.dataId).values,L=C.values,B=kn(i.shape),N=kn(s.shape);for(let I=0;I<c.batchSize;++I){const D=I*B[0],P=I*C.strides[0];for(let G=0;G<c.outDepth;++G){const W=P+G*C.strides[1],q=G*c.strideDepth-x;for(let z=0;z<u;++z){const J=q+z*p;if(J<0||J>=c.inDepth)continue;const Q=z*N[0],Y=D+J*B[1];for(let X=0;X<c.outHeight;++X){const te=W+X*C.strides[2],ne=X*c.strideHeight-E;for(let le=0;le<d;++le){const ye=ne+le*g;if(ye<0||ye>=c.inHeight)continue;const ue=Q+le*N[1],be=Y+ye*B[2];for(let xe=0;xe<c.outWidth;++xe){const Pe=te+xe*c.outChannels,ze=xe*c.strideWidth-_;for(let Ke=0;Ke<f;++Ke){const pt=ze+Ke*v;if(pt<0||pt>=c.inWidth)continue;const dt=ue+Ke*N[2],pe=be+pt*c.inChannels;let Le=dt;for(let Ue=0;Ue<c.inChannels;++Ue){const Ze=M[pe+Ue];for(let je=0;je<c.outChannels;++je)L[Pe+je]+=Ze*R[Le+je];Le+=c.outChannels}}}}}}}}return t.makeTensorInfo(C.shape,C.dtype,C.values)}const BDe={kernelName:QI,backendName:"cpu",kernelFunc:ODe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $De(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,dy:s}=e,{strides:o,pad:a,filterShape:l}=r;_n([i,s],"conv3dBackpropFilterV2");const c=kn(i.shape),u=kn(s.shape),d=Kg(i.shape,l,o,1,a),f=d.strideDepth,p=d.strideHeight,g=d.strideWidth,v=d.filterDepth,b=d.filterHeight,x=d.filterWidth,_=new Ao(d.filterShape,"float32"),E=_.values,[C,M,R,L]=_.strides,B=t.data.get(s.dataId).values,[N,I,D,P]=u,G=t.data.get(i.dataId).values,[W,q,z,J]=c,Q=d.padInfo.front,Y=d.padInfo.left,X=d.padInfo.top;for(let te=0;te<v;++te){const ne=Math.max(0,Math.ceil((Q-te)/f)),le=Math.min(d.outDepth,(d.inDepth+Q-te)/f),ye=te*C;for(let ue=0;ue<b;++ue){const be=Math.max(0,Math.ceil((X-ue)/p)),xe=Math.min(d.outHeight,(d.inHeight+X-ue)/p),Pe=ue*M+ye;for(let ze=0;ze<x;++ze){const Ke=Math.max(0,Math.ceil((Y-ze)/g)),pt=Math.min(d.outWidth,(d.inWidth+Y-ze)/g),dt=ze*R+Pe;for(let pe=0;pe<d.inChannels;++pe){const Le=pe*L+dt;for(let Ue=0;Ue<d.outChannels;++Ue){let Ze=0;for(let je=0;je<d.batchSize;++je){const lt=je*W,st=je*N;for(let at=ne;at<le;++at){const mt=(te+at*f-Q)*q+lt,ce=at*I+st;for(let re=be;re<xe;++re){const qe=(ue+re*p-X)*z+mt,ot=re*D+ce;for(let et=Ke;et<pt;++et){const At=(ze+et*g-Y)*J+qe,Ct=et*P+ot;Ze+=G[At+pe]*B[Ct+Ue]}}}}E[Le+Ue]=Ze}}}}}return t.makeTensorInfo(_.shape,_.dtype,_.values)}const LDe={kernelName:E4,backendName:"cpu",kernelFunc:$De};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FDe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,filter:s}=e,{pad:o,strides:a,inputShape:l}=r;_n([i],"conv3dBackpropInputV2");const c=kn(i.shape),u=kn(s.shape),d=Kg(l,s.shape,a,1,o),f=new Ao(d.inShape,"float32"),p=f.values,[g,v,b,x]=f.strides,_=t.data.get(i.dataId).values,[E,C,M,R]=c,L=t.data.get(s.dataId).values,[B,N,I,D]=u,{batchSize:P,filterDepth:G,filterHeight:W,filterWidth:q,inChannels:z,inDepth:J,inHeight:Q,inWidth:Y,outChannels:X,outDepth:te,outHeight:ne,outWidth:le,strideDepth:ye,strideHeight:ue,strideWidth:be}=d,xe=G-1-d.padInfo.front,Pe=W-1-d.padInfo.top,ze=q-1-d.padInfo.left;for(let Ke=0;Ke<P;++Ke)for(let pt=0;pt<z;++pt)for(let dt=0;dt<J;++dt){const pe=dt-xe,Le=Math.max(0,Math.ceil(pe/ye)),Ue=Math.min(te,(G+pe)/ye);for(let Ze=0;Ze<Q;++Ze){const je=Ze-Pe,lt=Math.max(0,Math.ceil(je/ue)),st=Math.min(ne,(W+je)/ue);for(let at=0;at<Y;++at){const Ut=at-ze,mt=Math.max(0,Math.ceil(Ut/be)),ce=Math.min(le,(q+Ut)/be);let re=0;for(let $e=Le;$e<Ue;++$e){const qe=$e*ye-pe;for(let ot=lt;ot<st;++ot){const et=ot*ue-je;for(let Ft=mt;Ft<ce;++Ft){const At=Ft*be-Ut,Ct=E*Ke+C*$e+M*ot+R*Ft,qt=B*(G-1-qe)+N*(W-1-et)+I*(q-1-At)+D*pt;for(let yt=0;yt<X;++yt){const Mt=_[Ct+yt],on=L[qt+yt];re+=Mt*on}}}}p[g*Ke+v*dt+b*Ze+x*at+pt]=re}}}return t.makeTensorInfo(f.shape,f.dtype,f.values)}const PDe={kernelName:A4,backendName:"cpu",kernelFunc:FDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UDe=Mi(JC,n=>Math.cos(n)),zDe={kernelName:JC,backendName:"cpu",kernelFunc:UDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HDe=Mi(ZC,n=>Math.cosh(n)),VDe={kernelName:ZC,backendName:"cpu",kernelFunc:HDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GDe(n){const{inputs:e,backend:t,attrs:r}=n,{image:i,boxes:s,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:c}=r,[u,d,f,p]=i.shape,g=s.shape[0],[v,b]=a,x=Ar([g,v,b,p],"float32"),_=t.data.get(s.dataId).values,E=t.data.get(o.dataId).values,C=t.data.get(i.dataId).values,M=kn(i.shape),R=kn(x.shape);for(let L=0;L<g;L++){const B=L*4,N=_[B],I=_[B+1],D=_[B+2],P=_[B+3],G=E[L];if(G>=u)continue;const W=v>1?(D-N)*(d-1)/(v-1):0,q=b>1?(P-I)*(f-1)/(b-1):0;for(let z=0;z<v;z++){const J=v>1?N*(d-1)+z*W:.5*(N+D)*(d-1);if(J<0||J>d-1){for(let Q=0;Q<b;Q++)for(let Y=0;Y<p;Y++){const X=Y+Q*R[2]+z*R[1]+L*R[0];x.values[X]=c}continue}if(l==="bilinear"){const Q=Math.floor(J),Y=Math.ceil(J),X=J-Q;for(let te=0;te<b;te++){const ne=b>1?I*(f-1)+te*q:.5*(I+P)*(f-1);if(ne<0||ne>f-1){for(let be=0;be<p;be++){const xe=be+te*R[2]+z*R[1]+L*R[0];x.values[xe]=c}continue}const le=Math.floor(ne),ye=Math.ceil(ne),ue=ne-le;for(let be=0;be<p;be++){let xe=be+le*M[2]+Q*M[1]+G*M[0];const Pe=C[xe];xe=be+ye*M[2]+Q*M[1]+G*M[0];const ze=C[xe];xe=be+le*M[2]+Y*M[1]+G*M[0];const Ke=C[xe];xe=be+ye*M[2]+Y*M[1]+G*M[0];const pt=C[xe],dt=Pe+(ze-Pe)*ue,pe=Ke+(pt-Ke)*ue;xe=be+te*R[2]+z*R[1]+L*R[0],x.values[xe]=dt+(pe-dt)*X}}}else for(let Q=0;Q<b;++Q){const Y=b>1?I*(f-1)+Q*q:.5*(I+P)*(f-1);if(Y<0||Y>f-1){for(let ne=0;ne<p;ne++){const le=ne+Q*R[2]+z*R[1]+L*R[0];x.values[le]=c}continue}const X=Math.round(Y),te=Math.round(J);for(let ne=0;ne<p;ne++){const le=ne+X*M[2]+te*M[1]+G*M[0],ye=ne+Q*R[2]+z*R[1]+L*R[0];x.values[ye]=C[le]}}}}return t.makeTensorInfo(x.shape,x.dtype,x.values)}const WDe={kernelName:M4,backendName:"cpu",kernelFunc:GDe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jDe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;_n(i,"cumprod");const l=Cs([s],i.shape.length);let c=i;l!=null&&(c=Gl({inputs:{x:i},backend:t,attrs:{perm:l}}));const u=Zs(1,i.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=Tc(c.dtype,"int32"),f=m4(xt(c.shape),d),p=t.data.get(c.dataId).values,g=c.shape[c.shape.length-1],v=a?(x,_)=>x+g-_-1:(x,_)=>x+_;for(let x=0;x<p.length;x+=g)for(let _=0;_<g;_++){const E=v(x,_);if(_===0)f[E]=o?1:p[E];else{const C=v(x,_-1);f[E]=o?p[C]*f[C]:p[E]*f[C]}}const b=t.makeTensorInfo(c.shape,d,f);if(l!=null){const x=Yg(l),_=Gl({inputs:{x:b},backend:t,attrs:{perm:x}});return t.disposeIntermediateTensorInfo(b),t.disposeIntermediateTensorInfo(c),_}return b}const XDe={kernelName:T4,backendName:"cpu",kernelFunc:jDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qDe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;_n(i,"cumsum");const l=Cs([s],i.shape.length);let c=i;l!=null&&(c=Gl({inputs:{x:i},backend:t,attrs:{perm:l}}));const u=Zs(1,i.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=Tc(c.dtype,"int32"),f=ka(xt(c.shape),d),p=t.data.get(c.dataId).values,g=c.shape[c.shape.length-1],v=a?(x,_)=>x+g-_-1:(x,_)=>x+_;for(let x=0;x<p.length;x+=g)for(let _=0;_<g;_++){const E=v(x,_);if(_===0)f[E]=o?0:p[E];else{const C=v(x,_-1);f[E]=o?p[C]+f[C]:p[E]+f[C]}}const b=t.makeTensorInfo(c.shape,d,f);if(l!=null){const x=Yg(l),_=Gl({inputs:{x:b},backend:t,attrs:{perm:x}});return t.disposeIntermediateTensorInfo(b),t.disposeIntermediateTensorInfo(c),_}return b}const KDe={kernelName:eD,backendName:"cpu",kernelFunc:qDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YDe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,weights:s}=e,{size:o,binaryOutput:a}=r;if(i.shape.length===1){const l=t.data.get(i.dataId).values,c=t.data.get(s.dataId).values,u=o5(l,c,s.dtype,s.shape,o);return t.makeTensorInfo([o],s.dtype,u)}else if(i.shape.length===2){const l=t.bufferSync(i),c=t.bufferSync(s),u=Ate(l,c,o,a);return t.makeTensorInfo(u.shape,s.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const JDe={kernelName:R4,backendName:"cpu",kernelFunc:YDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZDe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{blockSize:s,dataFormat:o}=r;de(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const a=i.shape[0],l=i.shape[1],c=i.shape[2],u=i.shape[3],d=l*s,f=c*s,p=u/(s*s),g=t.data.get(i.dataId).values,v=new Float32Array(a*d*f*p);let b=0;for(let x=0;x<a;++x)for(let _=0;_<d;++_){const E=Math.floor(_/s),C=_%s;for(let M=0;M<f;++M){const R=Math.floor(M/s),L=M%s,B=(C*s+L)*p;for(let N=0;N<p;++N){const D=N+B+u*(R+c*(E+l*x));v[b++]=g[D]}}}return t.makeTensorInfo([a,d,f,p],i.dtype,v)}const QDe={kernelName:N4,backendName:"cpu",kernelFunc:ZDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ane(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=r;_n([i,s],"depthwiseConv2DNative");const u=kn(i.shape),d=kn(s.shape);let f=l;f==null&&(f=[1,1]),de(ua(o,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${f}'`);const p=jo(i.shape,s.shape,o,f,a,c,!0),{filterHeight:g,filterWidth:v,dilationHeight:b,dilationWidth:x,padInfo:_}=p,E=_.left,C=_.top,M=p.outChannels/p.inChannels,R=new Ao(p.outShape,i.dtype),L=t.data.get(i.dataId).values,B=t.data.get(s.dataId).values,N=R.values;for(let I=0;I<p.batchSize;++I){const D=I*u[0],P=I*R.strides[0];for(let G=0;G<p.outHeight;++G){const W=P+G*R.strides[1],q=G*p.strideHeight-C;for(let z=0;z<g;++z){const J=q+z*b;if(J<0||J>=p.inHeight)continue;const Q=z*d[0],Y=D+J*u[1];for(let X=0;X<p.outWidth;++X){const te=W+X*R.strides[2],ne=X*p.strideWidth-E;for(let le=0;le<v;++le){const ye=ne+le*x;if(ye<0||ye>=p.inWidth)continue;const ue=Q+le*d[1],be=Y+ye*p.inChannels;let xe=te,Pe=ue;for(let ze=0;ze<p.inChannels;++ze){const Ke=L[be+ze];for(let pt=0;pt<M;++pt)N[xe+pt]+=Ke*B[Pe+pt];xe+=M,Pe+=M}}}}}}return t.makeTensorInfo(R.shape,R.dtype,R.values)}const e3e={kernelName:tD,backendName:"cpu",kernelFunc:Ane};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t3e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,dy:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r;_n([i,s],"depthwiseConv2dNativeBackpropFilter");const d=jo(i.shape,u,o,a,l,c,!0),{strideHeight:f,strideWidth:p,filterHeight:g,filterWidth:v}=d,b=new Ao(d.filterShape,"float32"),x=d.padInfo.left,_=d.padInfo.top,E=d.outChannels/d.inChannels,C=t.data.get(i.dataId).values,M=new Ao(i.shape,i.dtype,C),R=t.data.get(s.dataId).values,L=new Ao(s.shape,s.dtype,R);for(let B=0;B<g;++B){const N=Math.max(0,Math.ceil((_-B)/f)),I=Math.min(d.outHeight,(d.inHeight+_-B)/f);for(let D=0;D<v;++D){const P=Math.max(0,Math.ceil((x-D)/p)),G=Math.min(d.outWidth,(d.inWidth+x-D)/p);for(let W=0;W<d.outChannels;++W){const q=Math.trunc(W/E),z=W%E;let J=0;for(let Q=0;Q<d.batchSize;++Q)for(let Y=N;Y<I;++Y){const X=B+Y*f-_;for(let te=P;te<G;++te){const ne=D+te*p-x;J+=M.get(Q,X,ne,q)*L.get(Q,Y,te,W)}}b.set(J,B,D,q,z)}}}return t.makeTensorInfo(b.shape,b.dtype,b.values)}const n3e={kernelName:I4,backendName:"cpu",kernelFunc:t3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r3e(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,filter:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r;_n([i,s],"depthwiseConv2DNativeBackpropInput");const d=kn(i.shape),f=kn(s.shape),p=jo(u,s.shape,o,a,l,c,!0),g=new Ao(p.inShape,"float32"),v=g.values,[b,x,_]=g.strides,E=t.data.get(i.dataId).values,[C,M,R]=d,L=t.data.get(s.dataId).values,[B,N,I]=f,{batchSize:D,filterHeight:P,filterWidth:G,inChannels:W,inHeight:q,inWidth:z,outChannels:J,outHeight:Q,outWidth:Y,strideHeight:X,strideWidth:te}=p,ne=P-1-p.padInfo.top,le=G-1-p.padInfo.left,ye=J/W;for(let ue=0;ue<D;++ue)for(let be=0;be<W;++be)for(let xe=0;xe<q;++xe){const Pe=xe-ne,ze=Math.max(0,Math.ceil(Pe/X)),Ke=Math.min(Q,(P+Pe)/X);for(let pt=0;pt<z;++pt){const dt=pt-le,pe=Math.max(0,Math.ceil(dt/te)),Le=Math.min(Y,(G+dt)/te);let Ue=0;for(let Ze=ze;Ze<Ke;++Ze){const je=Ze*X-Pe;for(let lt=pe;lt<Le;++lt){const st=lt*te-dt,at=C*ue+M*Ze+R*lt,Ut=B*(P-1-je)+N*(G-1-st)+I*be;for(let mt=0;mt<ye;++mt){const ce=be*ye+mt,re=E[at+ce],$e=L[Ut+mt];Ue+=re*$e}}}v[b*ue+x*xe+_*pt+be]=Ue}}return t.makeTensorInfo(g.shape,g.dtype,g.values)}const i3e={kernelName:D4,backendName:"cpu",kernelFunc:r3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s3e(n){const{inputs:e,backend:t}=n,{x:r}=e,i=xt(r.shape),s=t.data.get(r.dataId).values,o=Ar([i,i],r.dtype),a=o.values;for(let c=0;c<s.length;c++)a[c*i+c]=s[c];const l=[...r.shape,...r.shape];return t.makeTensorInfo(l,o.dtype,o.values)}const o3e={kernelName:k4,backendName:"cpu",kernelFunc:s3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a3e={kernelName:nD,backendName:"cpu",kernelFunc:({inputs:n,backend:e,attrs:t})=>{const{x:r,filter:i}=n,{strides:s,pad:o,dilations:a}=t,l=e,c=l.data.get(r.dataId).values,u=r.shape.length,d=l.data.get(i.dataId).values,f=i.shape.length,{batchSize:p,inHeight:g,inWidth:v,inChannels:b,outHeight:x,outWidth:_,padInfo:E,strideHeight:C,strideWidth:M,filterHeight:R,filterWidth:L,dilationHeight:B,dilationWidth:N,outShape:I}=LE(r.shape,i.shape,s,o,"NHWC",a),D=xt(I),P=I.length,G=qs(r.dtype,D);for(let q=0;q<p;++q)for(let z=0;z<x;++z){const J=z*C-E.top;for(let Q=0;Q<_;++Q){const Y=Q*M-E.left;for(let X=0;X<b;++X){let te=Number.MIN_SAFE_INTEGER;for(let le=0;le<R;++le){const ye=J+le*B;if(ye>=0&&ye<g)for(let ue=0;ue<L;++ue){const be=Y+ue*N;if(be>=0&&be<v){const xe=gf([q,ye,be,X],u,kn(r.shape)),Pe=gf([le,ue,X],f,kn(i.shape)),ze=c[xe]+d[Pe];ze>te&&(te=ze)}}}const ne=gf([q,z,Q,X],P,kn(I));G[ne]=te}}}return{dataId:l.write(kv(G,r.dtype),I,r.dtype),shape:I,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l3e={kernelName:fL,backendName:"cpu",kernelFunc:({inputs:n,backend:e,attrs:t})=>{const{x:r,filter:i,dy:s}=n,{strides:o,pad:a,dilations:l}=t,c=e,u=Xu(r.shape,c.data.get(r.dataId).values),d=Xu(i.shape,c.data.get(i.dataId).values),{batchSize:f,inHeight:p,inWidth:g,inChannels:v,outHeight:b,outWidth:x,padInfo:_,strideHeight:E,strideWidth:C,filterHeight:M,filterWidth:R,dilationHeight:L,dilationWidth:B,outShape:N}=LE(r.shape,i.shape,o,a,"NHWC",l);de(s.rank===N.length,()=>`Error in ${fL}, dy must have the same rank as output ${N.length}, but got ${s.rank}`);const I=Xu(N,c.data.get(s.dataId).values),D=SY(i.shape,i.dtype);for(let G=0;G<f;++G)for(let W=0;W<b;++W){const q=W*E-_.top;for(let z=0;z<x;++z){const J=z*C-_.left;for(let Q=0;Q<v;++Q){let Y=Number.MIN_SAFE_INTEGER,X=0,te=0;for(let ne=0;ne<M;++ne){const le=q+ne*L;if(le>=0&&le<p)for(let ye=0;ye<R;++ye){const ue=J+ye*B;if(ue>=0&&ue<g){const be=u[G][le][ue][Q]+d[ne][ye][Q];be>Y&&(Y=be,X=ne,te=ye)}}}D[X][te][Q]+=I[G][W][z][Q]}}}return{dataId:c.write(kv(D,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c3e={kernelName:hL,backendName:"cpu",kernelFunc:({inputs:n,backend:e,attrs:t})=>{const{x:r,filter:i,dy:s}=n,{strides:o,pad:a,dilations:l}=t,c=e,u=Xu(r.shape,c.data.get(r.dataId).values),d=Xu(i.shape,c.data.get(i.dataId).values),{batchSize:f,inHeight:p,inWidth:g,inChannels:v,outHeight:b,outWidth:x,padInfo:_,strideHeight:E,strideWidth:C,filterHeight:M,filterWidth:R,dilationHeight:L,dilationWidth:B,outShape:N}=LE(r.shape,i.shape,o,a,"NHWC",l);de(s.rank===N.length,()=>`Error in ${hL}, dy must have the same rank as output ${N.length}, but got ${s.rank}`);const I=Xu(N,c.data.get(s.dataId).values),D=SY(r.shape,r.dtype);for(let G=0;G<f;++G)for(let W=0;W<b;++W){const q=W*E-_.top;for(let z=0;z<x;++z){const J=z*C-_.left;for(let Q=0;Q<v;++Q){let Y=Number.MIN_SAFE_INTEGER,X=q<0?0:q,te=J<0?0:J;for(let ne=0;ne<M;++ne){const le=q+ne*L;if(le>=0&&le<p)for(let ye=0;ye<R;++ye){const ue=J+ye*B;if(ue>=0&&ue<g){const be=u[G][le][ue][Q]+d[ne][ye][Q];be>Y&&(Y=be,X=le,te=ue)}}}D[G][X][te][Q]+=I[G][W][z][Q]}}}return{dataId:c.write(kv(D,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u3e(n){const{inputs:e,backend:t,attrs:r}=n,{image:i}=e,{canvas:s,options:o}=r,{contextOptions:a,imageOptions:l}=o||{},c=(l==null?void 0:l.alpha)||1,u=(a==null?void 0:a.contextType)||"2d";if(u!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const d=s.getContext(u,(a==null?void 0:a.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${u} type.`);const[f,p]=i.shape.slice(0,2),g=i.shape.length===2?1:i.shape[2],v=t.data.get(i.dataId).values,b=i.dtype==="float32"?255:1,x=new Uint8ClampedArray(p*f*4);for(let E=0;E<f*p;++E){const C=[0,0,0,255*c];for(let R=0;R<g;R++){const L=v[E*g+R];if(i.dtype==="float32"){if(L<0||L>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${L}.`)}else if(i.dtype==="int32"&&(L<0||L>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${L}.`);g===1?(C[0]=L*b,C[1]=L*b,C[2]=L*b):C[R]=L*b}const M=E*4;x[M+0]=Math.round(C[0]),x[M+1]=Math.round(C[1]),x[M+2]=Math.round(C[2]),x[M+3]=Math.round(C[3])}s.width=p,s.height=f;const _=new ImageData(x,p,f);return d.putImageData(_,0,0),i}const d3e={kernelName:wve,backendName:"cpu",kernelFunc:u3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t2(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,keepDims:o}=r;_n(i,"sum");let a;i.dtype==="bool"?a=Lg({inputs:{x:i},backend:t,attrs:{dtype:"int32"}}):a=Mf({inputs:{x:i},backend:t});const l=a.shape.length,c=Ir(s,a.shape),u=Cs(c,l);let d=c,f=a;u!=null&&(f=Gl({inputs:{x:a},backend:t,attrs:{perm:u}}),d=Zs(d.length,l)),da("sum",d,f.shape.length);const[p,g]=Xo(f.shape,d),v=Tc(f.dtype,"int32");let b=iN(t,p,v);const x=xt(g),_=t.data.get(b.dataId).values,E=t.data.get(f.dataId).values;for(let C=0;C<_.length;++C){const M=C*x;let R=0;for(let L=0;L<x;++L)R+=E[M+L];_[C]=R}if(o){const C=Ks(b.shape,c),M=b;b=ts({inputs:{x:b},backend:t,attrs:{shape:C}}),t.disposeIntermediateTensorInfo(M)}return t.disposeIntermediateTensorInfo(a),u!=null&&t.disposeIntermediateTensorInfo(f),b}const h3e={kernelName:BD,backendName:"cpu",kernelFunc:t2};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f3e(n){const{inputs:e,backend:t,attrs:r}=n,{equation:i}=r,s=e,{allDims:o,summedDims:a,idDims:l}=Rz(i,s.length);Iz(o.length,l,s);const{path:c,steps:u}=Dz(a,l),d=u.length;let f=null,p=o.length;const g=[];for(let v=0;v<d;++v){for(const b of u[v]){const{permutationIndices:x,expandDims:_}=Nz(p,l[b]);let E;kz(x)?E=s[b]:(E=Gl({inputs:{x:s[b]},backend:t,attrs:{perm:x}}),g.push(E));const C=E.shape.slice();for(let M=0;M<_.length;++M)C.splice(_[M],0,1);Vr(E.shape,C)||(E=ts({inputs:{x:E},backend:t,attrs:{shape:C}}),g.push(E)),f===null?f=E:(f=T3({inputs:{a:E,b:f},backend:t}),g.push(f))}v<d-1&&(c[v]>=0&&(f=t2({inputs:{x:f},backend:t,attrs:{axis:c[v]-(o.length-p),keepDims:!1}}),g.push(f)),p--)}for(const v of g)v!==f&&t.disposeIntermediateTensorInfo(v);return f}const p3e={kernelName:O4,backendName:"cpu",kernelFunc:f3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m3e(n){const{inputs:e,backend:t}=n,{dy:r,y:i}=e;_n([r,i],"eluGrad");const s=new Float32Array(xt(i.shape)),o=t.data.get(i.dataId).values,a=t.data.get(r.dataId).values;for(let l=0;l<o.length;++l){const c=o[l];c>=0?s[l]=a[l]:s[l]=a[l]*(c+1)}return t.makeTensorInfo(i.shape,"float32",s)}const g3e={kernelName:B4,backendName:"cpu",kernelFunc:m3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y3e=wz,v3e=_z,b3e=Cz,x3e=Ez,S3e=Az,w3e=Tz,_3e=Mi(tE,n=>{const e=Math.sign(n),t=Math.abs(n),r=1/(1+y3e*t);return e*(1-((((w3e*r+S3e)*r+x3e)*r+b3e)*r+v3e)*r*Math.exp(-t*t))}),C3e={kernelName:tE,backendName:"cpu",kernelFunc:_3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aN(n){const{inputs:e,backend:t,attrs:r}=n,{input:i}=e,{dim:s}=r,o=i.shape.length,a=i.shape.slice();let l=s;return s<0&&(de(-(o+1)<=s,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+s+1),a.splice(l,0,1),ts({inputs:{x:i},backend:t,attrs:{shape:a}})}const E3e={kernelName:iD,backendName:"cpu",kernelFunc:aN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A3e=eo((n,e)=>n/e),h5=No(QC,A3e),tF={kernelName:QC,backendName:"cpu",kernelFunc:h5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tne(n,e,t){const r=n.shape,i=r[0],s=r[1],o=t.data.get(n.dataId),a=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,c=[i,s],u=xt(c),d=la("float32",u),f=la("float32",u);for(let b=0;b<i;b++){const x=Sv({inputs:{x:a},backend:t,attrs:{begin:[b,0],size:[1,s]}}),_=Sv({inputs:{x:l},backend:t,attrs:{begin:[b,0],size:[1,s]}}),E=vc({inputs:{real:x,imag:_},backend:t}),{real:C,imag:M}=T3e(E,e,t),R=jp(C,M);for(let L=0;L<s;L++){const B=Mz(R,L);d[b*s+L]=B.real,f[b*s+L]=B.imag}t.disposeIntermediateTensorInfo(x),t.disposeIntermediateTensorInfo(_),t.disposeIntermediateTensorInfo(E)}const p=t.makeTensorInfo(c,"float32",d),g=t.makeTensorInfo(c,"float32",f),v=vc({inputs:{real:p,imag:g},backend:t});return t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(g),v}function T3e(n,e,t){const r=xt(n.shape),i=t.data.get(n.dataId),s=t.data.get(i.complexTensorInfos.real.dataId).values,o=t.data.get(i.complexTensorInfos.imag.dataId).values;if(M3e(r)){const a=nF(s,o,r,e,t),l=[n.shape[0],n.shape[1]];if(e){const c=t.makeTensorInfo(l,"float32",a.real),u=t.makeTensorInfo(l,"float32",a.imag),d=t.makeTensorInfo([],"float32",jg(r,"float32")),f=Mf({inputs:{x:d},backend:t}),p=tF.kernelFunc({inputs:{a:c,b:d},backend:t}),g=tF.kernelFunc({inputs:{a:u,b:f},backend:t}),v=t.data.get(p.dataId).values,b=t.data.get(g.dataId).values;return t.disposeIntermediateTensorInfo(c),t.disposeIntermediateTensorInfo(u),t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(g),{real:v,imag:b}}return a}else{const a=jp(s,o),l=R3e(a,r,e);return $Z(l)}}function M3e(n){return(n&n-1)===0}function nF(n,e,t,r,i){if(t===1)return{real:n,imag:e};const s=jp(n,e),o=t/2,a=LZ(s),l=a.real,c=a.imag,u=[l.length],d=i.makeTensorInfo(u,"float32",l),f=i.makeTensorInfo(u,"float32",c),p=vc({inputs:{real:d,imag:f},backend:i}),g=FZ(s),v=g.real,b=g.imag,x=[v.length],_=i.makeTensorInfo(x,"float32",v),E=i.makeTensorInfo(x,"float32",b),C=vc({inputs:{real:_,imag:E},backend:i}),M=nF(l,c,o,r,i),R=M.real,L=M.imag,B=[R.length],N=i.makeTensorInfo(B,"float32",R),I=i.makeTensorInfo(B,"float32",L),D=vc({inputs:{real:N,imag:I},backend:i}),P=nF(v,b,o,r,i),G=P.real,W=P.imag,q=[G.length],z=i.makeTensorInfo(q,"float32",G),J=i.makeTensorInfo(q,"float32",W),Q=vc({inputs:{real:z,imag:J},backend:i}),Y=UZ(t,r),X=[Y.real.length],te=i.makeTensorInfo(X,"float32",Y.real),ne=i.makeTensorInfo(X,"float32",Y.imag),le=vc({inputs:{real:te,imag:ne},backend:i}),ye=T3({inputs:{a:le,b:Q},backend:i}),ue=S1({inputs:{a:D,b:ye},backend:i}),be=u5({inputs:{a:D,b:ye},backend:i}),xe=xv({inputs:{input:ue},backend:i}),Pe=xv({inputs:{input:be},backend:i}),ze=w1({inputs:{input:ue},backend:i}),Ke=w1({inputs:{input:be},backend:i}),pt=_1({inputs:[xe,Pe],backend:i,attrs:{axis:0}}),dt=_1({inputs:[ze,Ke],backend:i,attrs:{axis:0}}),pe=i.data.get(pt.dataId).values,Le=i.data.get(dt.dataId).values;return i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(f),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(_),i.disposeIntermediateTensorInfo(E),i.disposeIntermediateTensorInfo(C),i.disposeIntermediateTensorInfo(N),i.disposeIntermediateTensorInfo(I),i.disposeIntermediateTensorInfo(D),i.disposeIntermediateTensorInfo(z),i.disposeIntermediateTensorInfo(J),i.disposeIntermediateTensorInfo(Q),i.disposeIntermediateTensorInfo(te),i.disposeIntermediateTensorInfo(ne),i.disposeIntermediateTensorInfo(le),i.disposeIntermediateTensorInfo(ye),i.disposeIntermediateTensorInfo(ue),i.disposeIntermediateTensorInfo(be),i.disposeIntermediateTensorInfo(xe),i.disposeIntermediateTensorInfo(ze),i.disposeIntermediateTensorInfo(Pe),i.disposeIntermediateTensorInfo(Ke),i.disposeIntermediateTensorInfo(pt),i.disposeIntermediateTensorInfo(dt),{real:pe,imag:Le}}function R3e(n,e,t){const r=new Float32Array(e*2);for(let i=0;i<e;i++){let s=0,o=0;for(let a=0;a<e;a++){const l=zZ(i*a,e,t),c=Mz(n,a);s+=c.real*l.real-c.imag*l.imag,o+=c.real*l.imag+c.imag*l.real}t&&(s/=e,o/=e),PZ(r,s,o,i)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N3e(n){const{inputs:e,backend:t}=n,{input:r}=e,i=xt(r.shape),s=r.shape[r.shape.length-1],o=i/s,a=ts({inputs:{x:r},backend:t,attrs:{shape:[o,s]}}),l=Tne(a,!1,t),c=ts({inputs:{x:l},backend:t,attrs:{shape:r.shape}});return t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(l),c}const I3e={kernelName:$4,backendName:"cpu",kernelFunc:N3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f5(n){const{backend:e,attrs:t}=n,{shape:r,value:i,dtype:s}=t,o=s||z1(i),a=qs(o,xt(r));return k3e(a,i,o),e.makeTensorInfo(r,o,a)}const D3e={kernelName:L4,backendName:"cpu",kernelFunc:f5};function k3e(n,e,t){n.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O3e={kernelName:F4,backendName:"cpu",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{image:r}=n,i=t,s=la(r.dtype,xt(r.shape)),[o,a,l,c]=r.shape,u=i.data.get(r.dataId).values;for(let f=0;f<o;f++){const p=f*l*a*c;for(let g=0;g<a;g++){const v=g*(l*c);for(let b=0;b<l;b++){const x=b*c;for(let _=0;_<c;_++){const E=Math.round(l-b-1),C=p+v+x+_;let M=u[C];if(E>=0&&E<l){const R=E*c,L=p+v+R+_;M=u[L]}s[C]=M}}}}return{dataId:i.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B3e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f,activation:p,leakyreluAlpha:g}=r;let v=Ene({inputs:{x:i,filter:s},backend:t,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f}});if(o){const b=v;if(u==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const x=ts({inputs:{x:o},backend:t,attrs:{shape:[o.shape[0],1,1]}});v=S1({inputs:{a:v,b:x},backend:t}),t.disposeIntermediateTensorInfo(x)}else v=S1({inputs:{a:v,b:o},backend:t});t.disposeIntermediateTensorInfo(b)}if(p){const b=v;if(u==="NCHW"&&p==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const x=ts({inputs:{x:a},backend:t,attrs:{shape:[a.shape[0],1,1]}});v=oN(t,v,p,x,g),t.disposeIntermediateTensorInfo(x)}else v=oN(t,v,p,a,g);t.disposeIntermediateTensorInfo(b)}return v}const $3e={kernelName:UR,backendName:"cpu",kernelFunc:B3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L3e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f,activation:p,leakyreluAlpha:g}=r;let v=Ane({inputs:{x:i,filter:s},backend:t,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f}});if(o){const b=v;v=S1({inputs:{a:v,b:o},backend:t}),t.disposeIntermediateTensorInfo(b)}if(p){const b=v;v=oN(t,v,p,a,g),t.disposeIntermediateTensorInfo(b)}return v}const F3e={kernelName:zR,backendName:"cpu",kernelFunc:L3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P3e(n){const{inputs:e,backend:t}=n,{params:r,indices:i}=e,s=xt(r.shape),o=i.shape,a=o[o.length-1],[l,c,u,d]=dz(r,i);if(c===0)return t.makeTensorInfo(l,r.dtype,[]);const f=t.data.get(i.dataId).values,p=t.bufferSync(r),g=Lte(f,p,r.dtype,c,a,u,d,r.shape,s);return t.makeTensorInfo(l,r.dtype,g.values)}const U3e={kernelName:P4,backendName:"cpu",kernelFunc:P3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z3e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,indices:s}=e,{axis:o,batchDims:a}=r;_n([i,s],"gatherV2");const l=Ir(o,i.shape)[0],c=t.data.get(s.dataId).values,u=i.shape[l];for(let C=0;C<c.length;++C){const M=c[C];de(M<=u-1&&M>=0,()=>`GatherV2: the index value ${M} is not in [0, ${u-1}]`)}let d=a;a==null&&(d=0);const f=xt(s.shape),p=Bz(i,s,l,d),g=ts({inputs:{x:i},backend:t,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),v=ts({inputs:{x:s},backend:t,attrs:{shape:[p.batchSize,f/p.batchSize]}}),b=[p.batchSize,p.outerSize,f/p.batchSize,p.sliceSize],x=t.bufferSync(v),_=t.bufferSync(g),E=Fte(_,x,b);return t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(v),t.makeTensorInfo(p.outputShape,E.dtype,E.values)}const H3e={kernelName:oD,backendName:"cpu",kernelFunc:z3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V3e(n){const{inputs:e,backend:t}=n,{input:r}=e,i=xt(r.shape),s=r.shape[r.shape.length-1],o=i/s,a=ts({inputs:{x:r},backend:t,attrs:{shape:[o,s]}}),l=Tne(a,!0,t),c=ts({inputs:{x:l},backend:t,attrs:{shape:r.shape}});return t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(l),c}const G3e={kernelName:U4,backendName:"cpu",kernelFunc:V3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W3e=Mi(lE,n=>Number.isFinite(n)?1:0,"bool"),j3e={kernelName:lE,backendName:"cpu",kernelFunc:W3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X3e=Mi(cE,n=>Math.abs(n)===1/0?1:0,"bool"),q3e={kernelName:cE,backendName:"cpu",kernelFunc:X3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K3e=Mi(uE,n=>Number.isNaN(n)?1:0,"bool"),Y3e={kernelName:uE,backendName:"cpu",kernelFunc:K3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J3e(n){const{backend:e,attrs:t}=n,{start:r,stop:i,num:s}=t,o=Vte(r,i,s);return e.makeTensorInfo([o.length],"float32",o)}const Z3e={kernelName:H4,backendName:"cpu",kernelFunc:J3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q3e=Mi(hE,n=>Math.log1p(n)),eke={kernelName:hE,backendName:"cpu",kernelFunc:Q3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tke=eo((n,e)=>n&&e),nke=No(dD,tke,null,"bool"),rke={kernelName:dD,backendName:"cpu",kernelFunc:nke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ike=Mi(hD,n=>n?0:1,"bool"),ske={kernelName:hD,backendName:"cpu",kernelFunc:ike};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oke=eo((n,e)=>n||e),ake=No(fD,oke,null,"bool"),lke={kernelName:fD,backendName:"cpu",kernelFunc:ake};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cke(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{depthRadius:s,bias:o,alpha:a,beta:l}=r;_n(i,"LRN");const c=i.shape[3],u=c-1,d=t.data.get(i.dataId).values,f=xt(i.shape),p=new Float32Array(f);function g(v){const b=v%c;let x=v-b+Math.max(0,b-s);const _=v-b+Math.min(b+s,u);let E=0;for(;x<=_;x++){const C=d[x];E+=C*C}return E}for(let v=0;v<f;v++){const b=g(v),x=d[v]*Math.pow(o+a*b,-l);p[v]=x}return t.makeTensorInfo(i.shape,i.dtype,p)}const uke={kernelName:pD,backendName:"cpu",kernelFunc:cke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dke(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,y:s,dy:o}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=r;_n(o,"LRNGrad");const d=xt(o.shape),f=o.shape[3],p=t.data.get(o.dataId).values,g=t.data.get(i.dataId).values,v=t.data.get(s.dataId).values,b=new Float32Array(d),x=d;for(let _=0;_<x;_++){const E=_%f,C=_-E+Math.max(0,E-a),M=_-E+Math.min(f,E+a+1);let R=0;for(let L=C;L<M;L++)R+=Math.pow(g[L],2);R=c*R+l;for(let L=C;L<M;L++){let B=-2*c*u*g[L]*v[_]/R;_===L&&(B+=Math.pow(R,-u)),B*=p[_],b[L]+=B}}return t.makeTensorInfo(o.shape,i.dtype,b)}const hke={kernelName:V4,backendName:"cpu",kernelFunc:dke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mne(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{reductionIndices:s,keepDims:o}=r,a=t;let l=i.shape;const c=l.length,u=Ir(s,l);let d=u;const f=Cs(d,c);let p=a.data.get(i.dataId).values;if(f!=null){const C=new Array(c);for(let M=0;M<C.length;M++)C[M]=l[f[M]];p=l5(p,l,i.dtype,f,C),d=Zs(d.length,c),l=C}_n(i,"max"),da("max",d,c);const[g,v]=Xo(l,d),b=xt(v),x=Wte(p,b,g,i.dtype),_=a.write(x,g,i.dtype);let E=g;return o&&(E=Ks(g,u)),{dataId:_,shape:E,dtype:i.dtype}}const fke={kernelName:mD,backendName:"cpu",kernelFunc:Mne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pke(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e;_n(i,"maxPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,c=1;de(ua(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=nd(i.shape,s,o,c,a,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&Vr(u.inShape,u.outShape))d=Mf({inputs:{x:i},backend:t});else{const f=t.data.get(i.dataId).values,p=kn(i.shape),g=d5(f,i.shape,i.dtype,p,u,"max");d=t.makeTensorInfo(u.outShape,i.dtype,g.values)}return d}const mke={kernelName:gD,backendName:"cpu",kernelFunc:pke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gke(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r;_n(i,"maxPool3d");const u=nm(i.shape,s,o,1,a,l,c),d=t.data.get(i.dataId).values,f=Cne(d,i.shape,i.dtype,kn(i.shape),u,"max");return t.makeTensorInfo(f.shape,"float32",f.values)}const yke={kernelName:yD,backendName:"cpu",kernelFunc:gke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vke(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,input:s}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:c}=r;_n([i,s],"maxPool3DGrad");const u=nm(s.shape,o,a,1,l,c),d=t.bufferSync(s),f=oDe(d,u),p=u.strideDepth,g=u.strideHeight,v=u.strideWidth,b=u.dilationDepth,x=u.dilationHeight,_=u.dilationWidth,E=u.effectiveFilterDepth,C=u.effectiveFilterHeight,M=u.effectiveFilterWidth,R=E-1-u.padInfo.front,L=M-1-u.padInfo.left,B=C-1-u.padInfo.top,N=Ar(s.shape,"float32"),I=t.bufferSync(i);for(let D=0;D<u.batchSize;++D)for(let P=0;P<u.inChannels;++P)for(let G=0;G<u.inDepth;++G)for(let W=0;W<u.inHeight;++W)for(let q=0;q<u.inWidth;++q){const z=G-R,J=W-B,Q=q-L;let Y=0;for(let X=0;X<E;X+=b){const te=(z+X)/p;if(!(te<0||te>=u.outDepth||Math.floor(te)!==te))for(let ne=0;ne<C;ne+=x){const le=(J+ne)/g;if(!(le<0||le>=u.outHeight||Math.floor(le)!==le))for(let ye=0;ye<M;ye+=_){const ue=(Q+ye)/v;if(ue<0||ue>=u.outWidth||Math.floor(ue)!==ue)continue;const be=E*C*M-1-f.get(D,te,le,ue,P),xe=X*C*M+ne*M+ye,Pe=be===xe?1:0;if(Pe===0)continue;const ze=I.get(D,te,le,ue,P);Y+=ze*Pe}}}N.set(Y,D,G,W,q,P)}return t.makeTensorInfo(N.shape,N.dtype,N.values)}const bke={kernelName:W4,backendName:"cpu",kernelFunc:vke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xke(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,input:s,output:o}=e,a=s;_n([s,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,f=nd(a.shape,l,c,1,u,d),p=t.data.get(a.dataId).values,g=Ar(f.outShape,a.dtype,_ne(p,a.shape,a.dtype,f).values),v=f.strideHeight,b=f.strideWidth,x=f.dilationHeight,_=f.dilationWidth,E=f.effectiveFilterHeight,C=f.effectiveFilterWidth,M=C-1-f.padInfo.left,R=E-1-f.padInfo.top,L=Ar(a.shape,"float32"),B=t.data.get(i.dataId).values,N=Ar(i.shape,"float32",B);for(let I=0;I<f.batchSize;++I)for(let D=0;D<f.inChannels;++D)for(let P=0;P<f.inHeight;++P)for(let G=0;G<f.inWidth;++G){const W=P-R,q=G-M;let z=0;for(let J=0;J<E;J+=x){const Q=(W+J)/v;if(!(Q<0||Q>=f.outHeight||Math.floor(Q)!==Q))for(let Y=0;Y<C;Y+=_){const X=(q+Y)/b;if(X<0||X>=f.outWidth||Math.floor(X)!==X)continue;const te=E*C-1-g.get(I,Q,X,D),ne=J*C+Y,le=te===ne?1:0;if(le===0)continue;const ye=N.get(I,Q,X,D);z+=ye*le}}L.set(z,I,P,G,D)}return t.makeTensorInfo(L.shape,L.dtype,L.values)}const Ske={kernelName:G4,backendName:"cpu",kernelFunc:xke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wke(n,e,t,r,i){const s=kn(e),o=d5(n,e,t,s,i,"max"),a=_ne(n,e,t,i,!0,r);return[o.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ke={kernelName:j4,backendName:"cpu",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{x:r}=n,{filterSize:i,strides:s,pad:o,includeBatchInIndex:a}=e,l=t;_n(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,u=nd(r.shape,i,s,[1,1],o),[d,f]=wke(c,r.shape,r.dtype,a,u),p=l.write(d,u.outShape,r.dtype),g=l.write(f,u.outShape,r.dtype);return[{dataId:p,shape:u.outShape,dtype:r.dtype},{dataId:g,shape:u.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cke(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,keepDims:o}=r,a=Ir(s,i.shape),c=Xo(i.shape,a)[1],u=xt(c),d=[],f=t.makeTensorInfo([],"float32",new Float32Array([u]));d.push(f);const p=Lg({inputs:{x:i},backend:t,attrs:{dtype:"float32"}});d.push(p);const g=h5({inputs:{a:p,b:f},backend:t});d.push(g);const v=t2({inputs:{x:g},backend:t,attrs:{axis:s,keepDims:o}});return d.forEach(b=>t.disposeIntermediateTensorInfo(b)),v}const Eke={kernelName:vD,backendName:"cpu",kernelFunc:Cke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ake(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,keepDims:o}=r;_n(i,"min");const a=Ir(s,i.shape);let l=a;const c=Cs(l,i.shape.length);let u=i;c!=null&&(u=Gl({inputs:{x:i},backend:t,attrs:{perm:c}}),l=Zs(l.length,i.shape.length)),da("min",l,u.shape.length);const[d,f]=Xo(u.shape,l),p=xt(f),g=ka(xt(d),u.dtype),v=t.data.get(u.dataId).values;for(let x=0;x<g.length;++x){const _=x*p;let E=v[_];for(let C=0;C<p;++C){const M=v[_+C];(Number.isNaN(M)||M<E)&&(E=M)}g[x]=E}c!=null&&t.disposeIntermediateTensorInfo(u);const b=t.makeTensorInfo(d,u.dtype,g);if(o){const x=Ks(d,a),_=ts({inputs:{x:b},backend:t,attrs:{shape:x}});return t.disposeIntermediateTensorInfo(b),_}return b}const Tke={kernelName:bD,backendName:"cpu",kernelFunc:Ake};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mke(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{paddings:s,mode:o}=r;_n(i,"mirrorPad");const a=s.map((E,C)=>E[0]+i.shape[C]+E[1]),l=s.map(E=>E[0]),c=s.map((E,C)=>E[0]+i.shape[C]),u=o==="reflect"?0:1,d=t.data.get(i.dataId).values,f=i.shape.length,p=kn(i.shape),g=xt(a),v=a.length,b=kn(a),x=la(i.dtype,g);for(let E=0;E<g;E++){let C=H1(E,v,b);for(let R=0;R<v;R++)C[R]<l[R]?C[R]=l[R]*2-C[R]-u:C[R]>=c[R]&&(C[R]=(c[R]-1)*2-C[R]+u);C=C.map((R,L)=>R-l[L]);const M=gf(C,f,p);x[E]=d[M]}return{dataId:t.write(x,a,i.dtype),shape:a,dtype:i.dtype}}const Rke={kernelName:xD,backendName:"cpu",kernelFunc:Mke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nke=eo((n,e)=>{const t=n%e;return n<0&&e<0||n>=0&&e>=0?t:(t+e)%e}),Ike=No(mE,Nke),Dke={kernelName:mE,backendName:"cpu",kernelFunc:Ike};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rne(n){const{inputs:e,backend:t,attrs:r}=n,{logits:i}=e,{dim:s}=r,o=i.shape.length;let a=s;if(a===-1&&(a=o-1),a!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${a}`);const l=Ir([a],i.shape),c=Mne({inputs:{x:i},backend:t,attrs:{reductionIndices:l,keepDims:!1}}),u=Ks(c.shape,l),d=ts({inputs:{x:c},backend:t,attrs:{shape:u}}),f=u5({inputs:{a:i,b:d},backend:t}),p=kte({inputs:{x:f},backend:t}),g=t2({inputs:{x:p},backend:t,attrs:{axis:l,keepDims:!1}}),v=ts({inputs:{x:g},backend:t,attrs:{shape:u}}),b=h5({inputs:{a:p,b:v},backend:t});return t.disposeIntermediateTensorInfo(c),t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(v),b}const kke={kernelName:FD,backendName:"cpu",kernelFunc:Rne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oke(n){const{inputs:e,backend:t,attrs:r}=n,{logits:i}=e,{numSamples:s,seed:o,normalized:a}=r;_n(i,"multinomial");const l=a?i:Rne({inputs:{logits:i},backend:t,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=t.data.get(l.dataId).values,f=[c,s],p=ka(xt(f),"int32");for(let g=0;g<c;++g){const v=g*u,b=new Float32Array(u-1);b[0]=d[v];for(let E=1;E<b.length;++E)b[E]=b[E-1]+d[v+E];const x=n3.alea(o.toString()),_=g*s;for(let E=0;E<s;++E){const C=x();p[_+E]=b.length;for(let M=0;M<b.length;M++)if(C<b[M]){p[_+E]=M;break}}}return a||t.disposeIntermediateTensorInfo(l),t.makeTensorInfo(f,"int32",p)}const Bke={kernelName:X4,backendName:"cpu",kernelFunc:Oke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ke=iz;function Lke(n){const{inputs:e,backend:t,attrs:r}=n,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r;_n(i,"NonMaxSuppression");const c=t.data.get(i.dataId).values,u=t.data.get(s.dataId).values,{selectedIndices:d}=$ke(c,u,o,a,l);return t.makeTensorInfo([d.length],"int32",new Int32Array(d))}const Fke={kernelName:q4,backendName:"cpu",kernelFunc:Lke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pke=sz;function Uke(n){const{inputs:e,backend:t,attrs:r}=n,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r;_n(i,"NonMaxSuppressionPadded");const u=t.data.get(i.dataId).values,d=t.data.get(s.dataId).values,{selectedIndices:f,validOutputs:p}=Pke(u,d,o,a,l,c);return[t.makeTensorInfo([f.length],"int32",new Int32Array(f)),t.makeTensorInfo([],"int32",new Int32Array([p]))]}const zke={kernelName:K4,backendName:"cpu",kernelFunc:Uke};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hke=oz;function Vke(n){const{inputs:e,backend:t,attrs:r}=n,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r;_n(i,"NonMaxSuppressionWithScore");const u=t.data.get(i.dataId).values,d=t.data.get(s.dataId).values,f=o,p=a,g=l,v=c,{selectedIndices:b,selectedScores:x}=Hke(u,d,f,p,g,v);return[t.makeTensorInfo([b.length],"int32",new Int32Array(b)),t.makeTensorInfo([x.length],"float32",new Float32Array(x))]}const Gke={kernelName:Y4,backendName:"cpu",kernelFunc:Vke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wke(n){const{inputs:e,backend:t,attrs:r}=n,{indices:i}=e,{dtype:s,depth:o,onValue:a,offValue:l}=r;_n(i,"oneHot");const c=xt(i.shape),u=new Float32Array(c*o);u.fill(l);const d=t.data.get(i.dataId).values;for(let f=0;f<c;++f)d[f]>=0&&d[f]<o&&(u[f*o+d[f]]=a);return t.makeTensorInfo([...i.shape,o],s,u)}const jke={kernelName:CD,backendName:"cpu",kernelFunc:Wke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lN(n){const{inputs:e,backend:t}=n,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const i=xv({inputs:{input:r},backend:t}),s=lN({inputs:{x:i},backend:t}),o=w1({inputs:{input:r},backend:t}),a=lN({inputs:{x:o},backend:t}),l=vc({inputs:{real:s,imag:a},backend:t});return t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(a),l}else return f5({backend:t,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const Xke={kernelName:HD,backendName:"cpu",kernelFunc:lN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nne(n){const{inputs:e,backend:t}=n,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const i=xv({inputs:{input:r},backend:t}),s=Nne({inputs:{x:i},backend:t}),o=w1({inputs:{input:r},backend:t}),a=lN({inputs:{x:o},backend:t}),l=vc({inputs:{real:s,imag:a},backend:t});return t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(a),l}else return f5({backend:t,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const qke={kernelName:_D,backendName:"cpu",kernelFunc:Nne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ine(n){const{inputs:e,backend:t,attrs:r}=n,{axis:i}=r;if(e.length===1)return aN({inputs:{input:e[0]},backend:t,attrs:{dim:i}});const s=e[0].shape,o=e[0].dtype;e.forEach(u=>{Dc(s,u.shape,"All tensors passed to stack must have matching shapes"),de(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const d=aN({inputs:{input:u},backend:t,attrs:{dim:i}});return a.push(d),d}),c=_1({inputs:l,backend:t,attrs:{axis:i}});return a.forEach(u=>t.disposeIntermediateTensorInfo(u)),c}const Kke={kernelName:ED,backendName:"cpu",kernelFunc:Ine};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yke(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{paddings:s,constantValue:o}=r;_n(i,"pad");const a=s.map((_,E)=>_[0]+i.shape[E]+_[1]),l=s.map(_=>_[0]),c=t.data.get(i.dataId).values,u=xt(i.shape),d=i.shape.length,f=kn(i.shape),p=xt(a),g=a.length,v=kn(a),b=la(i.dtype,p);o!==0&&b.fill(o);for(let _=0;_<u;_++){const C=H1(_,d,f).map((R,L)=>R+l[L]),M=gf(C,g,v);b[M]=c[_]}return{dataId:t.write(b,a,i.dtype),shape:a,dtype:i.dtype}}const Dne={kernelName:AD,backendName:"cpu",kernelFunc:Yke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jke=eo((n,e)=>Math.pow(n,e)),Zke=No(yE,Jke),Qke={kernelName:yE,backendName:"cpu",kernelFunc:Zke};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eOe(n){const{inputs:e,backend:t,attrs:r}=n,{paramsNestedSplits:i,paramsDenseValues:s,indices:o}=e,{outputRaggedRank:a}=r,l=i.map(x=>t.data.get(x.dataId).values),c=i.map(x=>x.shape),u=t.data.get(s.dataId).values,d=t.data.get(o.dataId).values,[f,p,g]=Jte(l,c,u,s.shape,s.dtype,d,o.shape),v=f.map(x=>t.makeTensorInfo([x.length],"int32",x)),b=t.makeTensorInfo(g,s.dtype,p);return v.concat([b])}const tOe={kernelName:J4,backendName:"cpu",kernelFunc:eOe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nOe(n){const{inputs:e,backend:t}=n,{starts:r,limits:i,deltas:s}=e,o=t.data.get(r.dataId).values,a=t.data.get(i.dataId).values,l=t.data.get(s.dataId).values,[c,u]=Zte(o,r.shape,r.dtype,a,i.shape,l,s.shape),d=t.makeTensorInfo([c.length],"int32",c),f=t.makeTensorInfo([u.length],r.dtype,u);return[d,f]}const rOe={kernelName:Z4,backendName:"cpu",kernelFunc:nOe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iOe(n){const{inputs:e,backend:t,attrs:r}=n,{shape:i,values:s,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=t.data.get(i.dataId).values,u=t.data.get(s.dataId).values,d=t.data.get(o.dataId).values,f=a.map(b=>t.data.get(b.dataId).values),p=a.map(b=>b.shape),[g,v]=Qte(c,i.shape,u,s.shape,s.dtype,d,o.shape,f,p,l);return t.makeTensorInfo(g,s.dtype,v)}const sOe={kernelName:Q4,backendName:"cpu",kernelFunc:iOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oOe(n){const{backend:e,attrs:t}=n,{start:r,stop:i,dtype:s,step:o}=t,a=ene(r,i,o,s);return e.makeTensorInfo([a.length],s,a)}const aOe={kernelName:eU,backendName:"cpu",kernelFunc:oOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lOe=Mi(vE,n=>1/n),cOe={kernelName:vE,backendName:"cpu",kernelFunc:lOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uOe(n){const{inputs:e,backend:t,attrs:r}=n,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r;_n(i,"resizeBilinear");const l=kn(i.shape),[c,u]=a,[d,f,p,g]=i.shape,v=t.data.get(i.dataId).values,b=new Float32Array(xt([d,c,u,g])),x=[s&&c>1?f-1:f,s&&u>1?p-1:p],_=[s&&c>1?c-1:c,s&&u>1?u-1:u];let E=0;const C=x[0]/_[0],M=x[1]/_[1];for(let R=0;R<d;R++)for(let L=0;L<c;L++){let B;o?B=C*(L+.5)-.5:B=C*L;const N=Math.max(0,Math.floor(B)),I=B-N,D=Math.min(f-1,Math.ceil(B)),P=R*l[0]+N*l[1],G=R*l[0]+D*l[1];for(let W=0;W<u;W++){let q;o?q=M*(W+.5)-.5:q=M*W;const z=Math.max(0,Math.floor(q)),J=q-z,Q=Math.min(p-1,Math.ceil(q)),Y=P+z*l[2],X=G+z*l[2],te=P+Q*l[2],ne=G+Q*l[2];for(let le=0;le<g;le++){const ye=v[Y+le],ue=v[X+le],be=v[te+le],xe=v[ne+le],Pe=ye+(be-ye)*J,ze=ue+(xe-ue)*J,Ke=Pe+(ze-Pe)*I;b[E++]=Ke}}}return t.makeTensorInfo([d,c,u,g],"float32",b)}const dOe={kernelName:ID,backendName:"cpu",kernelFunc:uOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hOe(n){const{inputs:e,backend:t,attrs:r}=n,{images:i,dy:s}=e,{alignCorners:o}=r;_n([s,i],"resizeBilinearGrad");const a=kn(i.shape),[l,c,u,d]=i.shape,[,f,p]=s.shape,g=new Float32Array(l*c*u*d),v=[o&&f>1?c-1:c,o&&p>1?u-1:u],b=[o&&f>1?f-1:f,o&&p>1?p-1:p],x=v[0]/b[0],_=v[1]/b[1],E=t.data.get(s.dataId).values;let C=0;for(let M=0;M<l;M++){const R=M*a[0];for(let L=0;L<f;L++){const B=L*x,N=Math.floor(B),I=Math.min(Math.ceil(B),c-1),D=R+N*a[1],P=R+I*a[1],G=B-N,W=1-G;for(let q=0;q<p;q++){const z=q*_,J=Math.floor(z),Q=Math.min(Math.ceil(z),u-1),Y=z-J,X=1-Y,te=D+J*a[2],ne=D+Q*a[2],le=P+J*a[2],ye=P+Q*a[2],ue=W*X,be=W*Y,xe=G*X,Pe=G*Y;for(let ze=0;ze<d;ze++){const Ke=E[C++];g[te+ze]+=Ke*ue,g[ne+ze]+=Ke*be,g[le+ze]+=Ke*xe,g[ye+ze]+=Ke*Pe}}}}return t.makeTensorInfo([l,u,c,d],"float32",g)}const fOe={kernelName:rU,backendName:"cpu",kernelFunc:hOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pOe(n){const{inputs:e,backend:t,attrs:r}=n,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r;_n(i,"resizeNearestNeighbor");const l=kn(i.shape),[c,u]=a,[d,f,p,g]=i.shape,v=t.data.get(i.dataId).values,b=new Float32Array(d*c*u*g),x=[s&&c>1?f-1:f,s&&u>1?p-1:p],_=[s&&c>1?c-1:c,s&&u>1?u-1:u],E=x[0]/_[0],C=x[1]/_[1];let M=0;for(let R=0;R<d;R++){const L=R*l[0];for(let B=0;B<c;B++){const N=o?E*(B+.5):E*B;let I=Math.min(f-1,s?Math.round(N):Math.floor(N));o&&(I=Math.max(0,I));const D=L+I*l[1];for(let P=0;P<u;P++){const G=o?C*(P+.5):C*P;let W=Math.min(p-1,s?Math.round(G):Math.floor(G));o&&(W=Math.max(0,W));const q=D+W*l[2];for(let z=0;z<g;z++){const J=v[q+z];b[M++]=J}}}}return t.makeTensorInfo([d,c,u,g],i.dtype,b)}const mOe={kernelName:ND,backendName:"cpu",kernelFunc:pOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gOe(n){const{inputs:e,backend:t,attrs:r}=n,{images:i,dy:s}=e,{alignCorners:o}=r;_n([s,i],"resizeNearestNeighborGrad");const a=kn(i.shape),l=kn(s.shape),[c,u,d,f]=i.shape,[,p,g]=s.shape,v=new Float32Array(c*u*d*f),b=t.data.get(s.dataId).values,x=[o&&p>1?u-1:u,o&&g>1?d-1:d],_=[o&&p>1?p-1:p,o&&g>1?g-1:g],E=x[0]/_[0],C=x[1]/_[1],M=1/E,R=1/C,L=Math.ceil(M)*2+2,B=Math.ceil(R)*2+2;for(let N=0;N<c;N++){const I=N*a[0];for(let D=0;D<u;D++){const P=I+D*a[1],G=Math.floor(D*M),W=Math.floor(G-L/2);for(let q=0;q<d;q++){const z=P+q*a[2],J=Math.floor(q*R),Q=Math.floor(J-B/2);for(let Y=0;Y<f;Y++){let X=0;for(let te=0;te<L;te++){const ne=te+W;if(ne<0||ne>=p)continue;const le=I+ne*l[1],ye=ne*E,ue=Math.min(u-1,o?Math.round(ye):Math.floor(ye));if(D===ue)for(let be=0;be<B;be++){const xe=be+Q;if(xe<0||xe>=g)continue;const Pe=le+xe*l[2],ze=xe*C,Ke=Math.min(d-1,o?Math.round(ze):Math.floor(ze));q===Ke&&(X+=b[Pe+Y])}}v[z+Y]=X}}}}return t.makeTensorInfo(i.shape,i.dtype,v)}const yOe={kernelName:nU,backendName:"cpu",kernelFunc:gOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vOe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{dims:s}=r;_n(i,"reverse");const o=i.shape.length,a=Ir(s,i.shape);if(o===0)return Mf({inputs:{x:i},backend:t});const l=new Ao(i.shape,i.dtype),c=t.bufferSync(i);for(let u=0;u<l.size;u++){const d=l.indexToLoc(u),f=d.slice();a.forEach(p=>f[p]=i.shape[p]-1-f[p]),l.set(c.get(...f),...d)}return t.makeTensorInfo(l.shape,l.dtype,l.values)}const bOe={kernelName:DD,backendName:"cpu",kernelFunc:vOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xOe={kernelName:xU,backendName:"cpu",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{image:r}=n,{radians:i,fillValue:s,center:o}=e,a=t,l=la(r.dtype,xt(r.shape)),[c,u,d,f]=r.shape,[p,g]=bz(o,u,d),v=255,b=Math.sin(i),x=Math.cos(i),_=a.data.get(r.dataId).values;for(let C=0;C<c;C++){const M=C*d*u*f;for(let R=0;R<u;R++){const L=R*(d*f);for(let B=0;B<d;B++){const N=B*f;for(let I=0;I<f;I++){const D=[c,R,B,I],P=D[2],G=D[1];let W=(P-p)*x-(G-g)*b,q=(P-p)*b+(G-g)*x;W=Math.round(W+p),q=Math.round(q+g);let z=s;if(typeof s!="number"&&(I===3?z=v:z=s[I]),W>=0&&W<d&&q>=0&&q<u){const Q=q*(d*f),Y=W*f,X=M+Q+Y+I;z=_[X]}const J=M+L+N+I;l[J]=z}}}}return{dataId:a.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SOe=Mi(SE,n=>{const e=Math.floor(n);return n-e<.5?Math.floor(n):n-e>.5?Math.ceil(n):e%2===0?e:e+1}),wOe={kernelName:SE,backendName:"cpu",kernelFunc:SOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Oe(n){const{inputs:e,backend:t,attrs:r}=n,{indices:i,updates:s}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=$v(s,i,o),f=!0,p=t.bufferSync(i),g=t.bufferSync(s),v=Ly(p,g,o,d,c,l,a,u,0,f);return t.makeTensorInfo(o,v.dtype,v.values)}const COe={kernelName:iU,backendName:"cpu",kernelFunc:_Oe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EOe(n,e){let t=0,r=n.length,i=0;for(;t<r;)i=Math.floor((t+r)/2),n[i]<e?t=i+1:r=i;return r}function AOe(n,e){let t=0,r=n.length,i=0;for(;t<r;)i=Math.floor((t+r)/2),n[i]<=e?t=i+1:r=i;return r}function TOe(n,e,t,r,i,s){const o=qs("int32",t*i);for(let a=0;a<t;++a){const l=n.slice(a*r,(a+1)*r),c=a*i;for(let u=0;u<i;++u)o[c+u]=s==="left"?EOe(l,e[u+c]):AOe(l,e[u+c])}return o}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MOe(n){const{inputs:e,backend:t,attrs:r}=n,{sortedSequence:i,values:s}=e,{side:o}=r,a=t.data.get(i.dataId).values,l=t.data.get(s.dataId).values,c=TOe(a,l,i.shape[0],i.shape[1],s.shape[1],o);return t.makeTensorInfo(s.shape,"int32",c)}const ROe={kernelName:oU,backendName:"cpu",kernelFunc:MOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NOe(n){const{inputs:e,backend:t}=n,{condition:r,t:i,e:s}=e;_n([r,i,s],"select");const o=r.shape.length,a=t.data.get(r.dataId).values,l=t.data.get(i.dataId).values,c=t.data.get(s.dataId).values,u=Tc(i.dtype,s.dtype),d=ka(xt(i.shape),u);let f=0;const p=o===0||o>1||i.shape.length===1?1:xt(i.shape.slice(1));for(let g=0;g<a.length;g++)for(let v=0;v<p;v++)a[g]===1?d[f++]=l[g]:d[f++]=c[g];return t.makeTensorInfo(i.shape,u,d)}const IOe={kernelName:kD,backendName:"cpu",kernelFunc:NOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DOe=p3,kOe=m3,OOe=Mi(_E,n=>n>=0?kOe*n:DOe*(Math.exp(n)-1)),BOe={kernelName:_E,backendName:"cpu",kernelFunc:OOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Oe=Mi(AE,n=>n<0?-1:n>0?1:0),LOe={kernelName:AE,backendName:"cpu",kernelFunc:$Oe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FOe=Mi(CE,n=>Math.sin(n)),POe={kernelName:CE,backendName:"cpu",kernelFunc:FOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UOe=Mi(EE,n=>Math.sinh(n)),zOe={kernelName:EE,backendName:"cpu",kernelFunc:UOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HOe=11920928955078125e-23,FG=Math.log(HOe)+2,VOe=Mi(ME,n=>{const e=n>-FG,t=n<FG,r=Math.exp(n);let i;return t?i=r:e?i=n:i=Math.log(1+r),i}),GOe={kernelName:ME,backendName:"cpu",kernelFunc:VOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WOe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{blockShape:s,paddings:o}=r;_n([i],"spaceToBatchND");const a=xt(s),l=[[0,0]];l.push(...o);for(let R=1+s.length;R<i.shape.length;++R)l.push([0,0]);const c=Dne.kernelFunc({inputs:{x:i},backend:t,attrs:{paddings:l,constantValue:0}}),u=GE(c.shape,s,a,!1),d=WE(u.length,s.length,!1),f=jE(c.shape,s,a,!1),v=ts({inputs:{x:c},backend:t,attrs:{shape:u}}),_=Gl({inputs:{x:v},backend:t,attrs:{perm:d}}),M=ts({inputs:{x:_},backend:t,attrs:{shape:f}});return t.disposeIntermediateTensorInfo(c),t.disposeIntermediateTensorInfo(v),t.disposeIntermediateTensorInfo(_),M}const jOe={kernelName:$D,backendName:"cpu",kernelFunc:WOe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XOe(n){const{inputs:e,backend:t}=n,{indices:r,values:i,denseShape:s,defaultValue:o}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=t.data.get(r.dataId).values,l=t.data.get(i.dataId).values,c=t.data.get(s.dataId).values,u=t.data.get(o.dataId).values[0],[d,f,p,g,v]=ine(a,r.shape,r.dtype,l,i.dtype,c,u);return[t.makeTensorInfo(f,r.dtype,d),t.makeTensorInfo([f[0]],i.dtype,p),t.makeTensorInfo([g.length],"bool",new Uint8Array(g.map(b=>Number(b)))),t.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}const qOe={kernelName:aU,backendName:"cpu",kernelFunc:XOe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KOe(n){const{inputs:e,backend:t}=n,{inputIndices:r,inputShape:i,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const o=Array.from(t.data.get(i.dataId).values),a=t.data.get(r.dataId).values,l=Array.from(t.data.get(s.dataId).values),[c,u,d]=sne(a,r.shape,r.dtype,o,l);return[t.makeTensorInfo(u,r.dtype,c),t.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}const YOe={kernelName:lU,backendName:"cpu",kernelFunc:KOe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JOe(n){const{inputs:e,backend:t}=n,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const o=t.data.get(r.dataId).values,a=t.data.get(i.dataId).values,l=t.data.get(s.dataId).values,[c,u]=c5(o,r.shape,r.dtype,a,l,!0);return t.makeTensorInfo(u,r.dtype,c)}const ZOe={kernelName:cU,backendName:"cpu",kernelFunc:JOe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QOe(n){const{inputs:e,backend:t}=n,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const o=t.data.get(r.dataId).values,a=t.data.get(i.dataId).values,l=t.data.get(s.dataId).values,[c,u]=c5(o,r.shape,r.dtype,a,l);return t.makeTensorInfo(u,r.dtype,c)}const eBe={kernelName:uU,backendName:"cpu",kernelFunc:QOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tBe(n){const{inputs:e,backend:t,attrs:r}=n,{sparseIndices:i,sparseValues:s,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:f}=$v(s,i,a),p=!1,g=t.bufferSync(i);let v;switch(s.dtype){case"bool":{const b=t.bufferSync(s),x=!!t.data.get(o.dataId).values[0];v=Ly(g,b,a,f,u,c,l,d,x,p);break}case"float32":{const b=t.bufferSync(s),x=t.data.get(o.dataId).values[0];v=Ly(g,b,a,f,u,c,l,d,x,p);break}case"int32":{const b=t.bufferSync(s),x=t.data.get(o.dataId).values[0];v=Ly(g,b,a,f,u,c,l,d,x,p);break}case"string":{const b=t.bufferSync(s),x=Mg(t.data.get(o.dataId).values[0]);v=Ly(g,b,a,f,u,c,l,d,x,p);break}default:throw new Error(`Unsupported type ${s.dtype}`)}return t.makeTensorInfo(a,v.dtype,v.values)}const nBe={kernelName:dU,backendName:"cpu",kernelFunc:tBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rBe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{numOrSizeSplits:s,axis:o}=r,a=Ir(o,i.shape)[0],l=Oz(i,s,a),c=new Array(i.shape.length).fill(0),u=i.shape.slice();return l.map(d=>{const f=[...u];f[a]=d;const p=Sv({inputs:{x:i},backend:t,attrs:{begin:c,size:f}});return c[a]+=d,p})}const iBe={kernelName:LD,backendName:"cpu",kernelFunc:rBe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sBe={kernelName:hU,backendName:"cpu",kernelFunc:({inputs:n,backend:e})=>{const{x:t}=n,r=e;_n(t,"square");const i=r.data.get(t.dataId).values,s=new Float32Array(i.length);for(let a=0;a<i.length;++a){const l=i[a];s[a]=l*l}return{dataId:r.write(s,t.shape,t.dtype),shape:t.shape,dtype:t.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oBe=Mi(BE,(n,e)=>{const t=e;return isNaN(n)?NaN:n>0?1:t.alpha}),aBe={kernelName:BE,backendName:"cpu",kernelFunc:oBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lBe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{begin:s,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:f}=r;_n(i,"stridedSlice");const{finalShapeSparse:p,finalShape:g,isIdentity:v,sliceDim0:b,isSimpleSlice:x,begin:_,end:E,strides:C}=gz(i.shape,s,o,a,l,c,u,d,f);let M;if(v)M=ts({inputs:{x:i},backend:t,attrs:{shape:g}});else if(b||x){de(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const R=fz(_,E,C),L=Sv({inputs:{x:i},backend:t,attrs:{begin:_,size:R}});M=ts({inputs:{x:L},backend:t,attrs:{shape:g}}),t.disposeIntermediateTensorInfo(L)}else{const R=t.bufferSync(i),L=lne(p,R,C,_);M=t.makeTensorInfo(g,L.dtype,L.values)}return M}const cBe={kernelName:fU,backendName:"cpu",kernelFunc:lBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uBe(n){const{inputs:e,backend:t,attrs:r}=n,{separator:i,nGramWidths:s,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,f=t.data.get(u.dataId).values,p=t.data.get(d.dataId).values,[g,v]=cne(f,p,i,s,o,a,l,c);return[t.makeTensorInfo([g.length],"string",g),t.makeTensorInfo(d.shape,"int32",v)]}const dBe={kernelName:pU,backendName:"cpu",kernelFunc:uBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hBe(n){const{inputs:e,backend:t,attrs:r}=n,{skipEmpty:i}=r,{input:s,delimiter:o}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=t.data.get(s.dataId).values,l=t.data.get(o.dataId).values[0],[c,u,d]=une(a,l,i),f=u.length;return[t.makeTensorInfo([f,2],"int32",c),t.makeTensorInfo([f],"string",u),t.makeTensorInfo([2],"int32",new Int32Array(d))]}const fBe={kernelName:mU,backendName:"cpu",kernelFunc:hBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pBe(n){const{inputs:e,backend:t,attrs:r}=n,{numBuckets:i}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=t.data.get(s.dataId).values,a=dne(o,i);return t.makeTensorInfo(s.shape,"int32",a)}const mBe={kernelName:gU,backendName:"cpu",kernelFunc:pBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gBe=Mi(DE,n=>Math.tan(n)),yBe={kernelName:DE,backendName:"cpu",kernelFunc:gBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vBe=Mi(kE,n=>Math.tanh(n)),bBe={kernelName:kE,backendName:"cpu",kernelFunc:vBe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xBe(n){const{inputs:e,backend:t}=n,{tensor:r,indices:i,updates:s}=e,{sliceRank:o,numUpdates:a,sliceSize:l,strides:c,outputSize:u}=$v(s,i,r.shape),d=!1,f=t.bufferSync(i),p=t.bufferSync(s),g=t.bufferSync(r),v=Ly(f,p,r.shape,u,l,a,o,c,g,d);return t.makeTensorInfo(r.shape,v.dtype,v.values)}const SBe={kernelName:sU,backendName:"cpu",kernelFunc:xBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wBe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{reps:s}=r;_n(i,"tile");const o=fne(t.bufferSync(i),s);return t.makeTensorInfo(o.shape,o.dtype,o.values)}const _Be={kernelName:OE,backendName:"cpu",kernelFunc:wBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CBe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{k:s,sorted:o}=r;_n(i,"topk");const a=t.data.get(i.dataId).values,[l,c]=mne(a,i.shape,i.dtype,s,o);return[t.makeTensorInfo(l.shape,l.dtype,l.values),t.makeTensorInfo(c.shape,c.dtype,c.values)]}const EBe={kernelName:yU,backendName:"cpu",kernelFunc:CBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ABe(n){const{inputs:e,attrs:t,backend:r}=n,{image:i,transforms:s}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=t,[u,d,f,p]=i.shape,[g,v]=c??[d,f],b=[u,g,v,p],x=kn(i.shape),_=x[0],E=x[1],C=x[2],M=kn(b),R=M[0],L=M[1],B=M[2],N=la(i.dtype,xt(b));N.fill(l);const I=r.data.get(i.dataId).values,D=r.data.get(s.dataId).values;for(let G=0;G<u;++G){const W=s.shape[0]===1?D:D.subarray(G*8,G*8+8);for(let q=0;q<g;++q)for(let z=0;z<v;++z)for(let J=0;J<p;++J){let Q;const Y=W[6]*z+W[7]*q+1;if(Y===0)continue;const X=(W[0]*z+W[1]*q+W[2])/Y,te=(W[3]*z+W[4]*q+W[5])/Y,ne=PG(X,f,a),le=PG(te,d,a);switch(o){case"nearest":Q=DBe(I,d,f,_,E,C,G,le,ne,J,l);break;case"bilinear":Q=kBe(I,d,f,_,E,C,G,le,ne,J,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const ye=G*R+q*L+z*B+J;N[ye]=Q}return r.makeTensorInfo(b,i.dtype,N)}return{dataId:r.write(N,b,i.dtype),shape:i.shape,dtype:i.dtype}}const TBe={kernelName:vU,backendName:"cpu",kernelFunc:ABe};function PG(n,e,t){switch(t){case"reflect":return MBe(n,e);case"wrap":return RBe(n,e);case"nearest":return IBe(n,e);case"constant":default:return NBe(n)}}function MBe(n,e){let t=n;if(t<0)if(e<=1)t=0;else{const r=2*e;t<r&&(t=r*Math.trunc(-t/r)+t),t=t<-e?t+r:-t-1}else if(t>e-1)if(e<=1)t=0;else{const r=2*e;t-=r*Math.trunc(t/r),t>=e&&(t=r-t-1)}return lv(0,t,e-1)}function RBe(n,e){let t=n;if(t<0)if(e<=1)t=0;else{const r=e-1;t+=e*(Math.trunc(-t/r)+1)}else if(t>e-1)if(e<=1)t=0;else{const r=e-1;t-=e*Math.trunc(t/r)}return lv(0,t,e-1)}function NBe(n,e){return n}function IBe(n,e){return lv(0,n,e-1)}function a_(n,e,t,r,i,s,o,a,l,c,u){const d=o*r+a*i+l*s+c;return 0<=a&&a<e&&0<=l&&l<t?n[d]:u}function DBe(n,e,t,r,i,s,o,a,l,c,u){const d=Math.round(a),f=Math.round(l);return a_(n,e,t,r,i,s,o,d,f,c,u)}function kBe(n,e,t,r,i,s,o,a,l,c,u){const d=Math.floor(a),f=Math.floor(l),p=d+1,g=f+1,v=(g-l)*a_(n,e,t,r,i,s,o,d,f,c,u)+(l-f)*a_(n,e,t,r,i,s,o,d,g,c,u),b=(g-l)*a_(n,e,t,r,i,s,o,p,f,c,u)+(l-f)*a_(n,e,t,r,i,s,o,p,g,c,u);return(p-a)*v+(a-d)*b}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OBe(n){const{inputs:e,attrs:t,backend:r}=n,{axis:i}=t,{x:s}=e;_n(s,"unique");const o=r.data.get(s.dataId).values,{outputValues:a,outputShape:l,indices:c}=gne(o,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const BBe={kernelName:bU,backendName:"cpu",kernelFunc:OBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Be(n){const{inputs:e,backend:t,attrs:r}=n,{value:i}=e;let{axis:s}=r;s<0&&(s+=i.shape.length);const o=i.shape.length,a=i.shape[s],l=new Array(o-1);let c=0;for(let p=0;p<o;p++)p!==s&&(l[c++]=i.shape[p]);const u=new Array(o).fill(0),d=i.shape.slice();d[s]=1;const f=new Array(a);for(let p=0;p<f.length;p++){u[s]=p;const g=Sv({inputs:{x:i},backend:t,attrs:{begin:u,size:d}});f[p]=ts({inputs:{x:g},backend:t,attrs:{shape:l}}),t.disposeIntermediateTensorInfo(g)}return f}const LBe={kernelName:UD,backendName:"cpu",kernelFunc:$Be};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FBe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,segmentIds:s}=e,{numSegments:o}=r;_n(i,"unsortedSegmentSum");const a=i.shape.length,l=s.shape.length,c=[],u=[],d=a-l;let f=s;for(let g=0;g<d;++g){const v=aN({inputs:{input:f},backend:t,attrs:{dim:g+1}});f=v,u.push(v)}for(let g=0;g<o;++g){const v=jg(g,"int32"),b=t.makeTensorInfo([],"int32",v),x=Ite({inputs:{a:b,b:f},backend:t}),_=Lg({inputs:{x},backend:t,attrs:{dtype:"float32"}}),E=T3({inputs:{a:_,b:i},backend:t}),C=t2({inputs:{x:E},backend:t,attrs:{axis:0,keepDims:!1}});c.push(C),u.push(b),u.push(x),u.push(_),u.push(E),u.push(C)}const p=Ine({inputs:c,backend:t,attrs:{axis:0}});return u.forEach(g=>t.disposeIntermediateTensorInfo(g)),p}const PBe={kernelName:zD,backendName:"cpu",kernelFunc:FBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UBe=[OIe,pNe,$Ie,FIe,xNe,UIe,HIe,GIe,jIe,qIe,YIe,ZIe,eDe,rDe,sDe,lDe,uDe,hDe,pDe,DIe,gDe,vDe,xDe,wNe,wDe,vNe,CNe,CDe,mNe,ADe,MDe,RDe,IDe,kDe,BDe,LDe,PDe,zDe,VDe,WDe,XDe,KDe,JDe,QDe,e3e,n3e,i3e,o3e,a3e,l3e,c3e,d3e,p3e,EIe,g3e,ENe,C3e,ANe,E3e,MNe,I3e,D3e,O3e,NNe,DNe,$3e,F3e,U3e,H3e,ONe,$Ne,gNe,G3e,TDe,j3e,q3e,Y3e,AIe,FNe,UNe,Z3e,HNe,eke,rke,ske,lke,uke,hke,fke,GNe,mke,yke,bke,Ske,_ke,Eke,Tke,jNe,Rke,Dke,Bke,qNe,YNe,Fke,zke,Gke,ZNe,jke,qke,Kke,Dne,Qke,MIe,tIe,tOe,rOe,sOe,aOe,yNe,tF,cOe,RIe,NIe,IIe,dOe,fOe,mOe,yOe,bOe,xOe,wOe,cIe,COe,ROe,IOe,BOe,dIe,LOe,POe,zOe,hIe,kke,GOe,jOe,qOe,YOe,ZOe,eBe,nBe,iBe,mIe,sBe,yIe,bIe,aBe,cBe,dBe,fBe,mBe,_Ie,h3e,yBe,bBe,SBe,_Be,EBe,TBe,QNe,BBe,LBe,PBe,Xke];for(const n of UBe)CY(n);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const My={},HT={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function zBe(n,e){My[n]=e}function lh(n,e){if(!(n in My)||e!=null){const r=VBe(n,e);if(r!==null)My[n]=r;else return console.log("Could not get context for WebGL version",n),null}const t=My[n];return t==null||t.isContextLost()?(delete My[n],lh(n)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),My[n])}function HBe(n){if(!it().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&n===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function VBe(n,e){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const t=e??HBe(n);return t.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete My[n]},!1),it().getBool("SOFTWARE_WEBGL_ENABLED")&&(HT.failIfMajorPerformanceCaveat=!1),n===1?t.getContext("webgl",HT)||t.getContext("experimental-webgl",HT):t.getContext("webgl2",HT)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var oC;(function(n){n[n.DENSE=0]="DENSE",n[n.SHARED_BATCH=1]="SHARED_BATCH"})(oC||(oC={}));var ru;(function(n){n[n.RENDER=0]="RENDER",n[n.UPLOAD=1]="UPLOAD",n[n.PIXELS=2]="PIXELS",n[n.DOWNLOAD=3]="DOWNLOAD"})(ru||(ru={}));var ia;(function(n){n[n.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",n[n.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",n[n.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",n[n.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",n[n.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(ia||(ia={}));function n2(n,e){return[e,n]}function GBe(n,e){return n*e}function VT(n){const e=xt(n),t=Math.ceil(e/4);return lL(t)}function Y1(n,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(n/2))]}function WBe(n,e){const[t,r]=Y1(n,e);return t*r*4}function p5(n,e){const t=n;let r,i,s,o,a,l,c,u,d,f;return it().getNumber("WEBGL_VERSION")===2?(r=t.R32F,i=t.R16F,s=t.RGBA16F,o=t.RGBA32F,a=t.RED,c=4,u=1,d=t.HALF_FLOAT,f=t.FLOAT,l=t.RGBA8):(r=n.RGBA,i=n.RGBA,s=n.RGBA,o=t.RGBA,a=n.RGBA,c=4,u=4,d=e!=null?e.HALF_FLOAT_OES:null,f=n.FLOAT,l=n.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:f}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pn(n,e){const t=e();return it().getBool("DEBUG")&&jBe(n),t}function jBe(n){const e=n.getError();if(e!==n.NO_ERROR)throw new Error("WebGL Error: "+YBe(n,e))}const XBe=596e-10,qBe=65504;function KBe(n){return!!(it().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||n===0||XBe<Math.abs(n)&&Math.abs(n)<qBe)}function YBe(n,e){switch(e){case n.NO_ERROR:return"NO_ERROR";case n.INVALID_ENUM:return"INVALID_ENUM";case n.INVALID_VALUE:return"INVALID_VALUE";case n.INVALID_OPERATION:return"INVALID_OPERATION";case n.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case n.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case n.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function GT(n,e){return om(n,()=>n.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function JBe(n,e){const t=om(n,()=>n.createShader(n.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(pn(n,()=>n.shaderSource(t,e)),pn(n,()=>n.compileShader(t)),n.getShaderParameter(t,n.COMPILE_STATUS)===!1)throw console.log(n.getShaderInfoLog(t)),new Error("Failed to compile vertex shader.");return t}function ZBe(n,e){const t=om(n,()=>n.createShader(n.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(pn(n,()=>n.shaderSource(t,e)),pn(n,()=>n.compileShader(t)),it().get("ENGINE_COMPILE_ONLY"))return t;if(n.getShaderParameter(t,n.COMPILE_STATUS)===!1)throw kne(e,n.getShaderInfoLog(t)),new Error("Failed to compile fragment shader.");return t}const QBe=/ERROR: [0-9]+:([0-9]+):/g;function kne(n,e){const t=QBe.exec(e);if(t==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(n);return}const r=+t[1],i=n.split(`
`),s=i.length.toString().length+2,o=i.map((d,f)=>Px((f+1).toString(),s)+d);let a=0;for(let d=0;d<o.length;d++)a=Math.max(o[d].length,a);const l=o.slice(0,r-1),c=o.slice(r-1,r),u=o.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Px(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function e$e(n){return om(n,()=>n.createProgram(),"Unable to create WebGLProgram.")}function t$e(n,e){if(pn(n,()=>n.linkProgram(e)),!it().get("ENGINE_COMPILE_ONLY")&&n.getProgramParameter(e,n.LINK_STATUS)===!1)throw console.log(n.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function hB(n,e){if(pn(n,()=>n.validateProgram(e)),n.getProgramParameter(e,n.VALIDATE_STATUS)===!1)throw console.log(n.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function n$e(n,e){const t=om(n,()=>n.createBuffer(),"Unable to create WebGLBuffer");return pn(n,()=>n.bindBuffer(n.ARRAY_BUFFER,t)),pn(n,()=>n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW)),t}function r$e(n,e){const t=om(n,()=>n.createBuffer(),"Unable to create WebGLBuffer");return pn(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t)),pn(n,()=>n.bufferData(n.ELEMENT_ARRAY_BUFFER,e,n.STATIC_DRAW)),t}function i$e(n){return om(n,()=>n.createTexture(),"Unable to create WebGLTexture.")}function s$e(n,e){const t=it().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n<=0||e<=0){const r=`[${n}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(n>t||e>t){const r=`[${n}x${e}]`,i=`[${t}x${t}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function o$e(n){return om(n,()=>n.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function UG(n,e,t,r,i,s,o){const a=n.getAttribLocation(e,t);return a===-1?!1:(pn(n,()=>n.bindBuffer(n.ARRAY_BUFFER,r)),pn(n,()=>n.vertexAttribPointer(a,i,n.FLOAT,!1,s,o)),pn(n,()=>n.enableVertexAttribArray(a)),!0)}function a$e(n,e,t){h$e(n,t),pn(n,()=>n.activeTexture(n.TEXTURE0+t)),pn(n,()=>n.bindTexture(n.TEXTURE_2D,e))}function l$e(n,e,t){return om(n,()=>n.getUniformLocation(e,t),'uniform "'+t+'" not present in program.')}function c$e(n,e,t){return n.getUniformLocation(e,t)}function u$e(n,e,t,r){pn(n,()=>a$e(n,e,r)),pn(n,()=>n.uniform1i(t,r))}function fB(n,e,t){pn(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,t)),pn(n,()=>n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0))}function zG(n,e){pn(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,e)),pn(n,()=>n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,null,0))}function WT(n){const e=n.checkFramebufferStatus(n.FRAMEBUFFER);if(e!==n.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+d$e(n,e))}function d$e(n,e){switch(e){case n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case n.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function om(n,e,t){const r=pn(n,()=>e());if(r==null)throw new Error(t);return r}function h$e(n,e){const t=n.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+n.TEXTURE0;if(r<n.TEXTURE0||r>t){const i=`[gl.TEXTURE0, gl.TEXTURE${t}]`;throw new Error(`textureUnit must be in ${i}.`)}}function C1(n,e=2){return xt(n.slice(0,n.length-e))}function E1(n){if(n.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[n.length>1?n[n.length-2]:1,n[n.length-1]]}function jT(n){let e=[1,1,1];return n.length===0||n.length===1&&n[0]===1||(e=[C1(n),...E1(n)]),e}function f$e(n,e=!1){let t=it().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=it().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&it().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=t/2),e&&(t=t*2,r=r*2,n=n.map((a,l)=>l>=n.length-2?p4(n[l]):n[l]),n.length===1&&(n=[2,n[0]])),n.length!==2&&(n=Wg(n).newShape);let i=xt(n),s=null;n.length<=1&&i<=t?s=[1,i]:n.length===2&&n[0]<=t&&n[1]<=t?s=n:n.length===3&&n[0]*n[1]<=t&&n[2]<=t?s=[n[0]*n[1],n[2]]:n.length===3&&n[0]<=t&&n[1]*n[2]<=t?s=[n[0],n[1]*n[2]]:n.length===4&&n[0]*n[1]*n[2]<=t&&n[3]<=t?s=[n[0]*n[1]*n[2],n[3]]:n.length===4&&n[0]<=t&&n[1]*n[2]*n[3]<=t&&(s=[n[0],n[1]*n[2]*n[3]]);const o=s!=null&&Math.max(...s)>r&&Math.min(...s)<=(e?2:1)&&Math.min(...s)>0;if(s==null||o)if(e){const a=C1(n);let l=2,c=2;n.length&&([l,c]=E1(n)),i=a*(l/2)*(c/2),s=lL(i).map(u=>u*2)}else s=lL(i);return s}function XT(n){return n%2===0}function cN(n,e){if(n=n.slice(-2),e=e.slice(-2),Vr(n,e)||!n.length||!e.length||n[0]===0||n[1]===0||e[0]===0||e[1]===0)return!0;if(n.length!==e.length){const t=n[n.length-1],r=e[e.length-1];if(t===r||XT(t)&&XT(r)&&(n[0]===1||e[0]===1))return!0}return n[1]===e[1]&&XT(n[0])&&XT(e[0])}let pB,mB;function p$e(n){if(pB==null){const e=lh(n);pB=e.getParameter(e.MAX_TEXTURE_SIZE)}return pB}function m$e(n){if(mB==null){const e=lh(n);mB=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,mB)}function g$e(n){if(n===0)return 0;let e;const t=lh(n);return Wu(t,"EXT_disjoint_timer_query_webgl2")&&n===2?e=2:Wu(t,"EXT_disjoint_timer_query")?e=1:e=0,e}function Wu(n,e){return n.getExtension(e)!=null}function HG(n){try{if(lh(n)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function y$e(n){if(n===0)return!1;const e=lh(n);if(n===1){if(!Wu(e,"OES_texture_float"))return!1}else if(!Wu(e,"EXT_color_buffer_float"))return!1;return rF(e)}function v$e(n){if(n===0)return!1;const e=lh(n);if(n===1){if(!Wu(e,"OES_texture_float")||!Wu(e,"WEBGL_color_buffer_float"))return!1}else{if(Wu(e,"EXT_color_buffer_float"))return rF(e);const r="EXT_color_buffer_half_float";if(Wu(e,r)){const i=e.getExtension(r);return b$e(e,i)}return!1}return rF(e)}function rF(n){const e=p5(n),t=n.createTexture();n.bindTexture(n.TEXTURE_2D,t),n.texImage2D(n.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const s=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,s),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);const o=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(t),n.deleteFramebuffer(s),o}function b$e(n,e){const t=p5(n,e),r=n.createTexture();n.bindTexture(n.TEXTURE_2D,r),n.texImage2D(n.TEXTURE_2D,0,t.internalFormatHalfFloat,1,1,0,t.textureFormatFloat,t.textureTypeHalfFloat,null);const o=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,o),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r,0);const a=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(r),n.deleteFramebuffer(o),a}function x$e(n){return n!==2?!1:lh(n).fenceSync!=null}function r2(n,e){Array.isArray(n)||(n=[n]),n.forEach(t=>{t!=null&&de(t.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tn=it();Tn.registerFlag("HAS_WEBGL",()=>Tn.getNumber("WEBGL_VERSION")>0);Tn.registerFlag("WEBGL_VERSION",()=>HG(2)?2:HG(1)?1:0);Tn.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Tn.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Tn.get("WEBGL_VERSION")===2);Tn.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Tn.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Tn.registerFlag("WEBGL_PACK",()=>Tn.getBool("HAS_WEBGL"));Tn.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Tn.getBool("WEBGL_PACK"));Tn.registerFlag("WEBGL_PACK_CLIP",()=>Tn.getBool("WEBGL_PACK"));Tn.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Tn.getBool("WEBGL_PACK"));Tn.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Tn.getBool("WEBGL_PACK"));Tn.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Tn.getBool("WEBGL_PACK"));Tn.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Tn.getBool("WEBGL_PACK"));Tn.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Tn.getBool("WEBGL_PACK"));Tn.registerFlag("WEBGL_PACK_REDUCE",()=>Tn.getBool("WEBGL_PACK"));Tn.registerFlag("WEBGL_LAZILY_UNPACK",()=>Tn.getBool("WEBGL_PACK"));Tn.registerFlag("WEBGL_CONV_IM2COL",()=>Tn.getBool("WEBGL_PACK"));Tn.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Tn.getBool("WEBGL_PACK"));Tn.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>p$e(Tn.getNumber("WEBGL_VERSION")));Tn.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>m$e(Tn.getNumber("WEBGL_VERSION")));Tn.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const n=Tn.getNumber("WEBGL_VERSION");return n===0?0:g$e(n)});Tn.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Tn.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!LY());Tn.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>y$e(Tn.getNumber("WEBGL_VERSION")));Tn.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Tn.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Tn.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Tn.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>v$e(Tn.getNumber("WEBGL_VERSION")));Tn.registerFlag("WEBGL_FENCE_API_ENABLED",()=>x$e(Tn.getNumber("WEBGL_VERSION")));Tn.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Tn.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Tn.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,n=>{if(typeof n!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${n}.`);if(n<0&&n!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${n}.`)});Tn.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>LY()?1:-1,n=>{if(typeof n!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${n}.`);if(n<0&&n!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${n}.`)});Tn.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Tn.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Tn.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Tn.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Tn.registerFlag("WEBGL_EXP_CONV",()=>!1);Tn.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Tn.getBool("IS_TEST"));Tn.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Tn.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Tn.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Tn.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ll(){let n,e,t,r,i,s,o,a,l,c;return it().getNumber("WEBGL_VERSION")===2?(n="#version 300 es",e="in",t="out",r="in",i="texture",s="outputColor",o="out vec4 outputColor;",a=it().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(n="",e="attribute",t="varying",r="varying",i="texture2D",s="gl_FragColor",o="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:n,attribute:e,varyingVs:t,varyingFs:r,texture2D:i,output:s,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pv(n,e,t="index"){const r=kn(e);return r.map((i,s)=>{const o=`int ${n[s]} = ${t} / ${i}`,a=s===r.length-1?`int ${n[s+1]} = ${t} - ${n[s]} * ${i}`:`index -= ${n[s]} * ${i}`;return`${o}; ${a};`}).join("")}function M3(n,e,t="index"){const r=kn(e);return r.map((i,s)=>{const o=`int ${n[s]} = ${t} / outShapeStrides[${s}]`,a=s===r.length-1?`int ${n[s+1]} = ${t} - ${n[s]} * outShapeStrides[${s}]`:`index -= ${n[s]} * outShapeStrides[${s}]`;return`${o}; ${a};`}).join("")}function S$e(n,e){const t=n.length,r=n.map(s=>`${e}[${s}]`),i=new Array(t-1);i[t-2]=r[t-1];for(let s=t-3;s>=0;--s)i[s]=`(${i[s+1]} * ${r[s+1]})`;return i}function w$e(n,e,t="index"){const r=n.map((s,o)=>o),i=S$e(r,e);return i.map((s,o)=>{const a=`int ${n[o]} = ${t} / ${i[o]}`,l=o===i.length-1?`int ${n[o+1]} = ${t} - ${n[o]} * ${i[o]}`:`index -= ${n[o]} * ${i[o]}`;return`${a}; ${l};`}).join("")}function m5(n){const e=kn(n).map(t=>t.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function g5(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const One=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:Bne}=FEe;function _$e(n,e,t){const r=[];if(n.forEach(p=>{const g=xt(p.shapeInfo.logicalShape);if(p.shapeInfo.isUniform?r.push(`uniform float ${p.name}${g>1?`[${g}]`:""};`):(r.push(`uniform sampler2D ${p.name};`),r.push(`uniform int offset${p.name};`)),t.enableShapeUniforms){const{uniformShape:v}=y5(t.packedInputs,p.shapeInfo.logicalShape,p.shapeInfo.texShape);switch(v.length){case 1:r.push(`uniform int ${p.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${p.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${p.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${p.name}Shape;`);break}r.push(`uniform ivec2 ${p.name}TexShape;`)}}),t.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}t.customUniforms&&t.customUniforms.forEach(p=>{r.push(`uniform ${p.type} ${p.name}${p.arrayIndex?`[${p.arrayIndex}]`:""};`)});const i=r.join(`
`),s=n.map(p=>C$e(p,e,t.packedInputs,t.enableShapeUniforms)).join(`
`),o=e.texShape,a=ll(),l=T$e(a);let c,u,d=N$e(a);return e.isPacked?(c=E$e(e.logicalShape,o,t.enableShapeUniforms),u=R$e(a)):(c=A$e(e.logicalShape,o,t.enableShapeUniforms),u=M$e(a)),t.packedInputs&&(d+=O$e),[d,l,u,i,c,s,t.userCode].join(`
`)}function J1(n,e=!1){const t=n.shapeInfo.logicalShape;switch(t.length){case 0:return j$e(n,e);case 1:return q$e(n,e);case 2:return Y$e(n,e);case 3:return Z$e(n,e);case 4:return eLe(n,e);case 5:return tLe(n);case 6:return nLe(n);default:throw new Error(`${t.length}-D input sampling is not yet supported`)}}function $ne(n,e){switch(n.shapeInfo.logicalShape.length){case 0:return W$e(n);case 1:return X$e(n,e);case 2:return K$e(n,e);case 3:return J$e(n,e);default:return Q$e(n,e)}}function C$e(n,e,t=!1,r){let i="";t?i+=$ne(n,r):i+=J1(n,r);const s=n.shapeInfo.logicalShape,o=e.logicalShape;return s.length<=o.length&&(t?i+=rLe(n,e):i+=iLe(n,e)),i}function E$e(n,e,t){switch(n.length){case 0:return Lne();case 1:return B$e(n,e,t);case 2:return V$e(n,e,t);case 3:return L$e(n,e,t);default:return P$e(n,e,t)}}function A$e(n,e,t){switch(n.length){case 0:return Lne();case 1:return $$e(n,e,t);case 2:return G$e(n,e,t);case 3:return F$e(n,e,t);case 4:return U$e(n,e,t);case 5:return z$e(n,e);case 6:return H$e(n,e);default:throw new Error(`${n.length}-D output sampling is not yet supported`)}}function T$e(n){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${n.texture2D}(textureSampler, uv).r;
    }
  `}function M$e(n){return`
    void setOutput(float val) {
      ${n.output} = vec4(val, 0, 0, 0);
    }
  `}function R$e(n){return`
    void setOutput(vec4 val) {
      ${n.output} = val;
    }
  `}function N$e(n){return`${n.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${n.varyingFs} vec2 resultUV;
    ${n.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${n.defineSpecialNaN}
    ${n.defineSpecialInf}
    ${n.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${I$e}
    ${D$e}
    ${k$e}
  `}const I$e=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,D$e=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,k$e=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,O$e=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Lne(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function B$e(n,e,t){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?t?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?t?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:t?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function $$e(n,e,t){return e[0]===1?t?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?t?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:t?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function L$e(n,e,t){if(t)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(n[2]/2),s=i*Math.ceil(n[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function F$e(n,e,t){if(t)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${M3(["r","c","d"],n)}
    return ivec3(r, c, d);
  }
`;const r=Pv(["r","c","d"],n);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function P$e(n,e,t){if(t)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(n[n.length-1]/2),s=i*Math.ceil(n[n.length-2]/2);let o=s,a="",l="b, r, c";for(let c=2;c<n.length-1;c++)o*=n[n.length-c-1],a=`
      int b${c} = index / ${o};
      index -= b${c} * ${o};
    `+a,l=`b${c}, `+l;return`
    ivec${n.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${n.length}(${l});
    }
  `}function U$e(n,e,t){if(t)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${M3(["r","c","d","d2"],n)}
      return ivec4(r, c, d, d2);
    }
  `;const r=Pv(["r","c","d","d2"],n);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function z$e(n,e){const t=Pv(["r","c","d","d2","d3"],n);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${t}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function H$e(n,e){const t=Pv(["r","c","d","d2","d3","d4"],n);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${t}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function V$e(n,e,t){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Vr(n,e))return t?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const i=Math.ceil(n[1]/2);return t?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function G$e(n,e,t){return Vr(n,e)?t?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:n[1]===1?t?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:n[0]===1?t?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:t?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${n[1]};
      int c = index - r * ${n[1]};
      return ivec2(r, c);
    }
  `}function Uv(n){return`offset${n}`}function W$e(n){const e=n.name,t="get"+e.charAt(0).toUpperCase()+e.slice(1),r=ll();return`
    vec4 ${t}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function j$e(n,e){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1);if(n.shapeInfo.isUniform)return`float ${r}() {return ${t};}`;const[i,s]=n.shapeInfo.texShape;if(i===1&&s===1)return`
      float ${r}() {
        return sampleTexture(${t}, halfCR);
      }
    `;const o=Uv(t);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${t}TexShape[0], ${t}TexShape[1], ${o});
      return sampleTexture(${t}, uv);
    }
  `;const[a,l]=n.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${o});
      return sampleTexture(${t}, uv);
    }
  `}function X$e(n,e){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),i=n.shapeInfo.texShape,s=ll();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${t}TexShape[0]) / 2.0), ceil(float(${t}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${s.texture2D}(${t}, uv);
    }
  `;const o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${s.texture2D}(${t}, uv);
    }
  `}function q$e(n,e){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1);if(n.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Z1(n)}
      }
    `;const i=n.shapeInfo.texShape,s=i[0],o=i[1];if(o===1&&s===1)return`
      float ${r}(int index) {
        return sampleTexture(${t}, halfCR);
      }
    `;const a=Uv(t);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${t}TexShape[0]));
        return sampleTexture(${t}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${s}.0);
        return sampleTexture(${t}, uv);
      }
    `:s===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${t}TexShape[1]), 0.5);
        return sampleTexture(${t}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${t}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${t}TexShape[0], ${t}TexShape[1], index + ${a});
      return sampleTexture(${t}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${s}, ${o}, index + ${a});
      return sampleTexture(${t}, uv);
    }
  `}function K$e(n,e){const t=n.shapeInfo.logicalShape,r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n.shapeInfo.texShape,o=s[0],a=s[1],l=ll();if(s!=null&&Vr(t,s))return e?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=Math.ceil(t[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function Y$e(n,e){const t=n.shapeInfo.logicalShape,r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n.shapeInfo.texShape;if(s!=null&&Vr(t,s)){if(e)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const f=s[0],p=s[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${p}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:a}=Wg(t),l=o;if(l.length<t.length){const f=Q1(n,l),p=["row","col"];return`
      ${J1(f,e)}
      float ${i}(int row, int col) {
        return ${i}(${eS(p,a)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${t[1]}, 1)));
        ${Z1(n)}
      }
    `;const c=s[0],u=s[1],d=Uv(r);return u===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${t[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${t[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${t[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${r}, uv);
  }
`}function J$e(n,e){const t=n.shapeInfo.logicalShape,r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n.shapeInfo.texShape,o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(t[0]===1){const f=t.slice(1),p=[1,2],g=Q1(n,f),v=["b","row","col"];return`
        ${$ne(g,e)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${eS(v,p)});
        }
      `}const a=ll();if(e)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const l=o[0],c=o[1],u=Math.ceil(t[2]/2),d=u*Math.ceil(t[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${d}, ${u}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function Z$e(n,e){const t=n.shapeInfo.logicalShape,r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t[1]*t[2],o=t[2],{newShape:a,keptDims:l}=Wg(t),c=a;if(c.length<t.length){const v=Q1(n,c),b=["row","col","depth"];return`
        ${J1(v,e)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${eS(b,l)});
        }
      `}if(n.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${s}, ${o}, 1)));
        ${Z1(n)}
      }
    `;const u=n.shapeInfo.texShape,d=u[0],f=u[1],p=n.shapeInfo.flatOffset;if(f===s&&p==null)return e?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${f}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(f===o&&p==null)return e?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${t[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const g=Uv(r);return e?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${g};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s} + col * ${o} + depth + ${g};
        vec2 uv = uvFromFlat(${d}, ${f}, index);
        return sampleTexture(${r}, uv);
      }
  `}function Q$e(n,e){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),i=ll();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${t}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${t}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${t}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${t}TexShape[0]) / 2.0), ceil(float(${t}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${t}, uv);
    }
  `;const s=n.shapeInfo.logicalShape,o=s.length,a=n.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],d=Math.ceil(s[o-1]/2);let f=d*Math.ceil(s[o-2]/2),p="int b, int row, int col",g=`b * ${f} + (row / 2) * ${d} + (col / 2)`;for(let v=2;v<o-1;v++)p=`int b${v}, `+p,f*=s[o-v-1],g=`b${v} * ${f} + `+g;return`
    vec4 ${r}(${p}) {
      int index = ${g};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${i.texture2D}(${t}, uv);
    }
  `}function eLe(n,e){const t=n.shapeInfo.logicalShape,r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t[3],o=t[2]*s,a=t[1]*o,{newShape:l,keptDims:c}=Wg(t);if(l.length<t.length){const _=Q1(n,l),E=["row","col","depth","depth2"];return`
      ${J1(_,e)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${eS(E,c)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${o}, ${s}, 1)));
        ${Z1(n)}
      }
    `;const u=n.shapeInfo.flatOffset,d=n.shapeInfo.texShape,f=d[0],p=d[1],g=`int stride2 = ${r}Shape[3];`,v=`int stride1 = ${r}Shape[2] * stride2;`,b=`int stride0 = ${r}Shape[1] * stride1;`;if(p===a&&u==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${g}
        ${v}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(p===s&&u==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${t[1]*t[2]}, ${t[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;const x=Uv(r);return e?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${g}
      ${v}
      ${b}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${x});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} +
          depth * ${s} + depth2;
      vec2 uv = uvFromFlat(${f}, ${p}, index + ${x});
      return sampleTexture(${r}, uv);
    }
  `}function tLe(n){const e=n.shapeInfo.logicalShape,t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),i=e[4],s=e[3]*i,o=e[2]*s,a=e[1]*o,{newShape:l,keptDims:c}=Wg(e);if(l.length<e.length){const v=Q1(n,l),b=["row","col","depth","depth2","depth3"];return`
      ${J1(v)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${eS(b,c)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${o}, ${s}, ${i})) +
          depth3;
        ${Z1(n)}
      }
    `;const u=n.shapeInfo.flatOffset,d=n.shapeInfo.texShape,f=d[0],p=d[1];if(p===a&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${f}.0);
        return sampleTexture(${t}, uv);
      }
    `;if(p===i&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${f}.0);
        return sampleTexture(${t}, uv);
      }
    `;const g=Uv(t);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} + depth * ${s} +
          depth2 * ${i} + depth3 + ${g};
      vec2 uv = uvFromFlat(${f}, ${p}, index);
      return sampleTexture(${t}, uv);
    }
  `}function nLe(n){const e=n.shapeInfo.logicalShape,t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),{newShape:i,keptDims:s}=Wg(e);if(i.length<e.length){const b=Q1(n,i),x=["row","col","depth","depth2","depth3","depth4"];return`
      ${J1(b)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${eS(x,s)});
      }
    `}const o=e[5],a=e[4]*o,l=e[3]*a,c=e[2]*l,u=e[1]*c;if(n.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${Z1(n)}
      }
    `;const d=n.shapeInfo.flatOffset,f=n.shapeInfo.texShape,p=f[0],g=f[1];if(g===u&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${a}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${p}.0);
        return sampleTexture(${t}, uv);
      }
    `;if(g===o&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${p}.0);
        return sampleTexture(${t}, uv);
      }
    `;const v=Uv(t);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${a} + depth3 * ${o} + depth4 + ${v};
      vec2 uv = uvFromFlat(${p}, ${g}, index);
      return sampleTexture(${t}, uv);
    }
  `}function Z1(n){const e=n.name,t=xt(n.shapeInfo.logicalShape);return t<2?`return ${e};`:`
    for (int i = 0; i < ${t}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function rLe(n,e){const t=n.name,r=t.charAt(0).toUpperCase()+t.slice(1),i="get"+r+"AtOutCoords",s=n.shapeInfo.logicalShape.length,o=e.logicalShape.length,a=Bne(n.shapeInfo.logicalShape,e.logicalShape),l=Fi(o),c=o-s;let u;const d=["x","y","z","w","u","v"];s===0?u="":o<2&&a.length>=1?u="coords = 0;":u=a.map(_=>`coords.${d[_+c]} = 0;`).join(`
`);let f="";o<2&&s>0?f="coords":f=n.shapeInfo.logicalShape.map((_,E)=>`coords.${d[E+c]}`).join(", ");let p="return outputValue;";const v=xt(n.shapeInfo.logicalShape)===1,x=xt(e.logicalShape)===1;if(s===1&&!v&&!x)p=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(v&&!x)o===1?p=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:p=`
        return vec4(outputValue.x);
      `;else if(a.length){const _=s-2,E=s-1;a.indexOf(_)>-1&&a.indexOf(E)>-1?p="return vec4(outputValue.x);":a.indexOf(_)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(E)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${r}(${f});
      ${p}
    }
  `}function iLe(n,e){const t=n.name,r=t.charAt(0).toUpperCase()+t.slice(1),i="get"+r+"AtOutCoords",s=e.texShape,o=n.shapeInfo.texShape,a=n.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!n.shapeInfo.isUniform&&a===l&&n.shapeInfo.flatOffset==null&&Vr(o,s))return`
      float ${i}() {
        return sampleTexture(${t}, resultUV);
      }
    `;const c=Fi(l),u=Bne(n.shapeInfo.logicalShape,e.logicalShape),d=l-a;let f;const p=["x","y","z","w","u","v"];a===0?f="":l<2&&u.length>=1?f="coords = 0;":f=u.map(v=>`coords.${p[v+d]} = 0;`).join(`
`);let g="";return l<2&&a>0?g="coords":g=n.shapeInfo.logicalShape.map((v,b)=>`coords.${p[b+d]}`).join(", "),`
    float ${i}() {
      ${c} coords = getOutputCoords();
      ${f}
      return get${r}(${g});
    }
  `}function Fi(n){if(n<=1)return"int";if(n===2)return"ivec2";if(n===3)return"ivec3";if(n===4)return"ivec4";if(n===5)return"ivec5";if(n===6)return"ivec6";throw Error(`GPU for rank ${n} is not yet supported`)}function y5(n,e,t){const{newShape:r,keptDims:i}=Wg(e),s=e.length,o=n&&s===3&&e[0]===1,a=o?e.slice(1):r,l=!n&&s>1&&!Vr(e,t)&&r.length<s||o;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:i}}function Q1(n,e){const t=JSON.parse(JSON.stringify(n));return t.shapeInfo.logicalShape=e,t}function eS(n,e){return e.map(t=>n[t]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sLe(n,e,t,r){const i=t.map((u,d)=>{const f={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(f.flatOffset=u.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:f}}),s=i.map(u=>u.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=_$e(i,o,e),l=ZBe(n.gl,a),c=n.createProgram(l);return it().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:s,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(n.buildVao(c),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:s,outShapeInfo:o},Fne(n,e,c)))}function Fne(n,e,t){const r=[],i=[];let s,o,a,l=null,c=null;c=n.getUniformLocation(t,"NAN",!1),it().getNumber("WEBGL_VERSION")===1&&(l=n.getUniformLocation(t,"INFINITY",!1));const u=!1;for(const d of e.variableNames){const f={name:d,uniform:n.getUniformLocation(t,d,u),offset:n.getUniformLocation(t,`offset${d}`,u)};e.enableShapeUniforms&&(f.shape=n.getUniformLocation(t,`${d}Shape`,u),f.texShape=n.getUniformLocation(t,`${d}TexShape`,u)),r.push(f)}if(e.enableShapeUniforms&&(s=n.getUniformLocation(t,"outShape",u),a=n.getUniformLocation(t,"outShapeStrides",u),o=n.getUniformLocation(t,"outTexShape",u)),e.customUniforms)for(const d of e.customUniforms)i.push(n.getUniformLocation(t,d.name,u));return{variablesLocations:r,customUniformLocations:i,infLoc:l,nanLoc:c,outShapeLocation:s,outShapeStridesLocation:a,outTexShapeLocation:o}}function VG(n,e){if(n.length!==e.length)throw Error(`Binary was compiled with ${n.length} inputs, but was executed with ${e.length} inputs`);n.forEach((t,r)=>{const i=t.logicalShape,s=e[r],o=s.shape;if(!Vr(i,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${o} must match`);if(t.isUniform&&s.isUniform)return;const a=t.texShape,l=s.isUniform?null:s.texData.texShape;if(!Vr(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function oLe(n,e,t,r,i){e.program.enableShapeUniforms||(VG(e.inShapeInfos,t),VG([e.outShapeInfo],[r]));const s=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?n.setOutputPackedMatrixTexture(s.texture,o[0],o[1]):n.setOutputMatrixTexture(s.texture,o[0],o[1]),n.setProgram(e.webGLProgram),n.bindVertexArray(e.webGLProgram.vao),it().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&n.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&n.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<t.length;++l){const c=t[l],{uniform:u,offset:d,shape:f,texShape:p}=e.variablesLocations[l];if(f){const{uniformShape:g}=y5(e.program.packedInputs,c.shape,c.texData.texShape);switch(g.length){case 1:n.gl.uniform1iv(f,new Int32Array(g));break;case 2:n.gl.uniform2iv(f,new Int32Array(g));break;case 3:n.gl.uniform3iv(f,new Int32Array(g));break;case 4:n.gl.uniform4iv(f,new Int32Array(g));break}}if(p&&n.gl.uniform2i(p,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(xt(c.shape)<2)n.gl.uniform1f(u,c.uniformValues[0]);else{let g=c.uniformValues;g instanceof Float32Array||(g=new Float32Array(g)),n.gl.uniform1fv(u,g)}continue}c.texData.slice!=null&&d!=null&&n.gl.uniform1i(d,c.texData.slice.flatOffset),n.setInputMatrixTexture(c.texData.texture.texture,u,l)}}const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:n.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:n.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:n.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:n.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=kn(r.shape);switch(r.shape.length){case 2:n.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:n.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:n.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&n.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&i)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],u=e.customUniformLocations[l],d=i[l];if(c.type==="float")n.gl.uniform1fv(u,d);else if(c.type==="vec2")n.gl.uniform2fv(u,d);else if(c.type==="vec3")n.gl.uniform3fv(u,d);else if(c.type==="vec4")n.gl.uniform4fv(u,d);else if(c.type==="int")n.gl.uniform1iv(u,d);else if(c.type==="ivec2")n.gl.uniform2iv(u,d);else if(c.type==="ivec3")n.gl.uniform3iv(u,d);else if(c.type==="ivec4")n.gl.uniform4iv(u,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}n.executeProgram()}function aLe(n,e,t){let r="";e.concat(t).forEach(o=>{const a=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(n.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:d}=y5(n.packedInputs,o.shape,l);let f="",p="",g="";if(u.length===1&&n.packedInputs){const M=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];f=`${M[0]>1}_${M[1]>1}`}else if(u.length===2&&!n.packedInputs)p=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!n.packedInputs){const M=kn(u);g=`${M[0]===l[1]}_${M[M.length-1]===l[1]}`}const v=o.shape.length,b=u.length===2&&Vr(o.shape,l),x=xt(o.shape)===1,_=y1(o.shape,t.shape),E=!n.packedInputs&&v===t.shape.length&&Vr(l,t.texData.texShape),C=n.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${v}_${E}_${c?d:""}_${u.length}_${x}_${_}_${b}_${f}_${p}_${g}_${C}_${a}`}else{const l=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${l}_${a}`}});const i=n.userCode;let s=n.constructor.name;return s+="_"+r+"_"+i+`${it().getNumber("WEBGL_VERSION")}`,s}function $a(n){return it().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&n<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lLe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=oC.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=ll();this.outputShape=e,this.enableShapeUniforms=$a(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?M3(["r","c","d"],e):Pv(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${t.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cLe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=oC.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=ll();this.outputShape=e,this.enableShapeUniforms=$a(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?M3(["r","c","d"],e):Pv(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${t.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uLe{constructor(e){this.variableNames=["A"],this.outTexUsage=ru.DOWNLOAD;const t=ll();this.outputShape=e,this.userCode=`
      ${One}

      void main() {
        float x = getAAtOutCoords();
        ${t.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dLe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=ru.DOWNLOAD;const t=ll();this.outputShape=e,this.userCode=`
      ${One}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${t.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hLe={R:0,G:1,B:2,A:3};class GG{constructor(e,t=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const i=ll();this.outputShape=e,this.enableShapeUniforms=$a(this.outputShape.length);let s="result";t&&(s="floor(result * 255. + 0.5)");let o="";for(let a=0;a<r.length;a++){const l=r[a];o+=`
          if(offset == ${a}) {
            result = values[${hLe[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?g5():m5(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${i.texture2D}(A, uv);
          ${o}
        }
        ${i.output} = vec4(${s}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fLe{constructor(e,t=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=ll();this.outputShape=e,this.enableShapeUniforms=$a(this.outputShape.length);let i="",s="result";t&&(s="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let a=0;a<=1;a++){const l=o*2+a;i+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?g5():m5(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${i}

          ${r.output} = ${s};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pLe(n){const e=ll(),t=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return JBe(n,t)}function mLe(n){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return n$e(n,e)}function gLe(n){const e=new Uint16Array([0,1,2,2,1,3]);return r$e(n,e)}function i2(n,e,t,r,i,s){s$e(e,t);const o=i$e(n),a=n.TEXTURE_2D;return pn(n,()=>n.bindTexture(a,o)),pn(n,()=>n.texParameteri(a,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE)),pn(n,()=>n.texParameteri(a,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)),pn(n,()=>n.texParameteri(a,n.TEXTURE_MIN_FILTER,n.NEAREST)),pn(n,()=>n.texParameteri(a,n.TEXTURE_MAG_FILTER,n.NEAREST)),it().getNumber("WEBGL_VERSION")===1?pn(n,()=>n.texImage2D(a,0,r,e,t,0,i,s,null)):pn(n,()=>n.texStorage2D(a,1,r,e,t)),pn(n,()=>n.bindTexture(n.TEXTURE_2D,null)),{texture:o,texShape:[t,e]}}function Pne(n){return n.internalFormatFloat}function yLe(n,e,t,r){const[i,s]=n2(e,t);return i2(n,i,s,Pne(r),r.textureFormatFloat,n.FLOAT)}function Une(n){return n.internalFormatHalfFloat}function vLe(n,e,t,r){const[i,s]=n2(e,t);return i2(n,i,s,Une(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function zne(n){return n.downloadTextureFormat}function bLe(n,e,t,r){const[i,s]=n2(e,t);return i2(n,i,s,zne(r),n.RGBA,n.UNSIGNED_BYTE)}function Hne(n){return n.internalFormatPackedFloat}function xLe(n,e,t,r){const[i,s]=Y1(e,t);return i2(n,i,s,Hne(r),n.RGBA,n.FLOAT)}function Vne(n){return n.internalFormatPackedHalfFloat}function SLe(n,e,t,r){const[i,s]=Y1(e,t);return i2(n,i,s,Vne(r),n.RGBA,r.textureTypeHalfFloat)}function wLe(n,e,t){return pn(n,()=>n.bindBuffer(n.ARRAY_BUFFER,t)),UG(n,e,"clipSpacePos",t,3,20,0)&&UG(n,e,"uv",t,2,20,12)}function _Le(n,e,t,r,i,s){pn(n,()=>n.bindTexture(n.TEXTURE_2D,e));let o,a,l;i instanceof Uint8Array?(o=new Uint8Array(t*r*4),a=n.UNSIGNED_BYTE,l=n.RGBA):(o=new Float32Array(t*r*4),a=n.FLOAT,l=s.internalFormatPackedFloat),o.set(i),it().getNumber("WEBGL_VERSION")===2?pn(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,t,r,n.RGBA,a,o)):pn(n,()=>n.texImage2D(n.TEXTURE_2D,0,l,t,r,0,n.RGBA,a,o)),pn(n,()=>n.bindTexture(n.TEXTURE_2D,null))}function CLe(n,e,t){pn(n,()=>n.bindTexture(n.TEXTURE_2D,e)),t.data instanceof Uint8Array?it().getNumber("WEBGL_VERSION")===2?pn(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,t.width,t.height,n.RGBA,n.UNSIGNED_BYTE,t.data)):pn(n,()=>n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t.width,t.height,0,n.RGBA,n.UNSIGNED_BYTE,t.data)):it().getNumber("WEBGL_VERSION")===2?pn(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,t)):pn(n,()=>n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t)),pn(n,()=>n.bindTexture(n.TEXTURE_2D,null))}function ELe(n,e,t,r){const i=n.createBuffer();pn(n,()=>n.bindBuffer(n.PIXEL_PACK_BUFFER,i));const a=4*4*e*t;return pn(n,()=>n.bufferData(n.PIXEL_PACK_BUFFER,a,n.STREAM_READ)),pn(n,()=>n.readPixels(0,0,t,e,n.RGBA,n.FLOAT,0)),pn(n,()=>n.bindBuffer(n.PIXEL_PACK_BUFFER,null)),i}function ALe(n,e,t){const r=n,i=new Float32Array(t);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function TLe(n,e,t,r){const[i,s]=n2(e,t),o=4,a=new Uint8Array(GBe(e*t,o));return pn(n,()=>n.readPixels(0,0,i,s,r.downloadTextureFormat,n.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function MLe(n,e,t,r,i,s,o,a){const l=n,c=new Float32Array(WBe(s,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function RLe(n,e,t){const r=new Float32Array(e*t*4);return pn(n,()=>n.readPixels(0,0,t,e,n.RGBA,n.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gB{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const t=it().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,zBe(t,e)):this.gl=lh(t),e=this.gl,it().getNumber("WEBGL_VERSION")===2){const s=e;this.createVertexArray=()=>pn(s,()=>s.createVertexArray()),this.bindVertexArray=o=>pn(s,()=>s.bindVertexArray(o)),this.deleteVertexArray=o=>pn(s,()=>s.deleteVertexArray(o)),this.getVertexArray=()=>pn(s,()=>s.getParameter(s.VERTEX_ARRAY_BINDING))}else if(e!=null){const s=e.getExtension("OES_vertex_array_object");if(s==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>pn(e,()=>s.createVertexArrayOES()),this.bindVertexArray=o=>pn(e,()=>s.bindVertexArrayOES(o)),this.deleteVertexArray=o=>pn(e,()=>s.deleteVertexArrayOES(o)),this.getVertexArray=()=>pn(e,()=>e.getParameter(s.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),it().getNumber("WEBGL_VERSION")===1){const s="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=GT(this.gl,s),Wu(this.gl,o))this.textureHalfFloatExtension=GT(this.gl,o);else if(it().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Wu(this.gl,i))this.colorBufferHalfFloatExtension=GT(this.gl,i);else if(it().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Wu(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Wu(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=mLe(this.gl),this.indexBuffer=gLe(this.gl),this.framebuffer=o$e(this.gl),this.textureConfig=p5(this.gl,this.textureHalfFloatExtension)}get debug(){return it().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;pn(e,()=>e.finish()),pn(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),pn(e,()=>e.deleteFramebuffer(this.framebuffer)),pn(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),pn(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),pn(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),yLe(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),vLe(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),bLe(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),CLe(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,r,i){this.throwIfDisposed(),_Le(this.gl,e,t,r,i,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),SLe(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),xLe(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(zG(this.gl,this.framebuffer),this.outputTexture=null),pn(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,r){return this.downloadMatrixDriver(e,()=>TLe(this.gl,t,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,r,i,s,o){return MLe(this.gl,e,t,r,i,s,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return ALe(this.gl,e,t)}createBufferFromTexture(e,t,r){this.bindTextureToFrameBuffer(e);const i=ELe(this.gl,t,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,r;if(it().getBool("WEBGL_FENCE_API_ENABLED")){const i=e,s=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=i.clientWaitSync(s,0,0);return o===i.ALREADY_SIGNALED||o===i.CONDITION_SATISFIED},t=s}else it().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(t,it().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:t,isFencePassed:r}}downloadMatrixFromPackedTexture(e,t,r){return this.downloadMatrixDriver(e,()=>RLe(this.gl,t,r))}createProgram(e){this.throwIfDisposed();const t=this.gl;this.vertexShader==null&&(this.vertexShader=pLe(t));const r=e$e(t);pn(t,()=>t.attachShader(r,this.vertexShader)),pn(t,()=>t.attachShader(r,e)),t$e(t,r);const i=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&hB(t,i),i}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const t=this.gl;pn(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),wLe(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(pn(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&hB(this.gl,this.program),pn(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t,r=!0){return this.throwIfDisposed(),r?l$e(this.gl,e,t):c$e(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),pn(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,r){this.throwIfDisposed(),this.throwIfNoProgram(),u$e(this.gl,e,t,r)}setOutputMatrixTexture(e,t,r){this.setOutputMatrixTextureDriver(e,r,t)}setOutputPackedMatrixTexture(e,t,r){this.throwIfDisposed();const[i,s]=Y1(t,r);this.setOutputMatrixTextureDriver(e,i,s)}setOutputMatrixWriteRegion(e,t,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,t)}setOutputPackedMatrixWriteRegion(e,t,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&hB(this.gl,this.program),WT(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const t=this.getVertexArray();console.assert(t===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}pn(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),pn(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=GT(this.gl,it().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(it().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.createQuery();return r.beginQuery(i.TIME_ELAPSED_EXT,s),s}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(it().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const t=this.gl,r=this.getQueryTimerExtensionWebGL2();t.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await x8(()=>this.disposed||this.isQueryAvailable(e,it().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,it().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(t===0)return null;if(t===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(t===0)return!0;if(t===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),s&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),i=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){const e=NLe(this.itemsToPoll.map(t=>t.isDoneFn));for(let t=0;t<=e;++t){const{resolveFn:r}=this.itemsToPoll[t];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in it().platform&&(r=it().platform.setTimeoutCustom.bind(it().platform)),x8(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),fB(this.gl,e,this.framebuffer),this.debug&&WT(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(fB(this.gl,this.outputTexture,this.framebuffer),this.debug&&WT(this.gl)):zG(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const r=t();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,t,r){this.throwIfDisposed();const i=this.gl;fB(i,e,this.framebuffer),this.debug&&WT(i),this.outputTexture=e,pn(i,()=>i.viewport(0,0,t,r)),pn(i,()=>i.scissor(0,0,t,r))}setOutputMatrixWriteRegionDriver(e,t,r,i){this.throwIfDisposed(),pn(this.gl,()=>this.gl.scissor(e,t,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function NLe(n){let e=0;for(;e<n.length&&n[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:ILe,bincountImpl:Gne,bincountReduceImpl:DLe,bitwiseAndImpl:kLe,castImpl:OLe,ceilImpl:BLe,concatImpl:$Le,equalImpl:LLe,expImpl:FLe,expm1Impl:PLe,floorImpl:ULe,gatherNdImpl:zLe,gatherV2Impl:HLe,greaterImpl:VLe,greaterEqualImpl:GLe,lessImpl:WLe,lessEqualImpl:jLe,linSpaceImpl:XLe,logImpl:qLe,maxImpl:KLe,maximumImpl:YLe,minimumImpl:JLe,multiplyImpl:ZLe,negImpl:QLe,notEqualImpl:eFe,prodImpl:tFe,raggedGatherImpl:nFe,raggedRangeImpl:rFe,raggedTensorToTensorImpl:iFe,rangeImpl:sFe,rsqrtImpl:oFe,scatterImpl:aFe,sigmoidImpl:lFe,simpleAbsImpl:Wne,sliceImpl:cFe,sparseFillEmptyRowsImpl:uFe,sparseReshapeImpl:dFe,sparseSegmentReductionImpl:jne,sqrtImpl:hFe,staticRegexReplaceImpl:fFe,stridedSliceImpl:pFe,stringNGramsImpl:mFe,stringSplitImpl:gFe,stringToHashBucketFastImpl:yFe,subImpl:vFe,tileImpl:bFe,topKImpl:xFe,transposeImpl:v5,uniqueImpl:SFe}=CIe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xne(n,e){return["x","y","z","w","u","v"].slice(0,e).map(t=>`${n}.${t}`)}function tl(n,e){return e===1?[n]:Xne(n,e)}function wFe(n,e){if(n===1)return"rc";let t="";for(let r=0;r<n;r++)t+=e[r],r<n-1&&(t+=",");return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Fe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=$a(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const t=tl("rc",this.rank),r=Fi(this.rank),i=this.getOutOfBoundsCondition(t),s=this.getSetup(t),o=this.getOutput(t);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${s}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const t=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let s=`${r===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)s=`${e[e.length-1-o]},`+s;t.push(s)}return t}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let t="";for(let r=this.rank-2;r<this.rank;r++)t+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(t+="||");return t}getSetup(e){if(this.rank===1)return"";const t=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],i=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${t[0]};
      int c = ${t[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${i};
    `}getOutput(e){const t=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${t[0]}),
            cEdge ? 0. : getA(${t[1]}),
            rEdge ? 0. : getA(${t[2]}),
            rEdge || cEdge ? 0. : getA(${t[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qne{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=$a(this.outputShape.length);let r="";for(let i=0;i<4;i++){let s="thisRC = rc;";i%2===1&&(s+="thisRC.z += 1;"),i>1&&(s+="thisRC.y += 1;"),r+=`
        ${s}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${CFe(t,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?g5():m5(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function CFe(n,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?w$e(["r","c","d"],"inputShape"):Pv(["r","c","d"],n)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EFe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,r){const i=jG(t,r),s=XG(e,i,r);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);const o=WG(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[s].pop();return this.usedTextures[s].push(l),l}let a;return i===ia.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===ia.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===ia.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===ia.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===ia.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[s].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(e,t,r,i){if(this.freeTextures==null)return;const s=jG(r,i),o=XG(t,s,i);o in this.freeTextures||(this.freeTextures[o]=[]);const a=WG(t,s,this.gpgpu.gl,this.gpgpu.textureConfig,i),l=it().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const c=this.usedTextures[o],u=c&&c.indexOf(e);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(t=>{this.gpgpu.deleteMatrixTexture(t.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(t=>{this.gpgpu.deleteMatrixTexture(t.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function AFe(n,e){const t=n;if(e===t.R32F)return 4;if(e===t.R16F)return 2;if(e===t.RGBA32F)return 16;if(e===n.RGBA)return 16;if(e===t.RGBA16F)return 8;if(e===t.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function WG(n,e,t,r,i){const s=TFe(e,r);let o;if(i){const[l,c]=Y1(n[0],n[1]);o=l*c}else{const[l,c]=n2(n[0],n[1]);o=l*c}const a=AFe(t,s);return o*a}function TFe(n,e){switch(n){case ia.PACKED_2X2_FLOAT32:return Hne(e);case ia.PACKED_2X2_FLOAT16:return Vne(e);case ia.UNPACKED_FLOAT32:return Pne(e);case ia.UNPACKED_FLOAT16:return Une(e);case ia.PACKED_4X1_UNSIGNED_BYTE:return zne(e);default:throw new Error(`Unknown physical texture type ${n}`)}}function MFe(n){return it().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?ia.PACKED_2X2_FLOAT32:ia.UNPACKED_FLOAT32:n?ia.PACKED_2X2_FLOAT16:ia.UNPACKED_FLOAT16}function jG(n,e){if(n===ru.UPLOAD)return ia.PACKED_2X2_FLOAT32;if(n===ru.RENDER||n==null)return MFe(e);if(n===ru.DOWNLOAD||n===ru.PIXELS)return ia.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${n}`)}function XG(n,e,t){return`${n[0]}_${n[1]}_${e}_${t}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ff{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=$a(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${t}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const id="if (isnan(x)) return x;",RFe="return x;",qG="return abs(x);",NFe="return (x >= 0.0) ? x : (exp(x) - 1.0);",IFe=id+`
  return (x < 0.0) ? 0.0 : x;
`,DFe=id+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,sg="return x;",kFe="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OFe="return x;",BFe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,$Fe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,LFe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,FFe="return 1.0 / (1.0 + exp(-1.0 * x));";class fg{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=$a(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${t}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PFe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=$a(this.outputShape.length);const t=e.length,r=tl("rc",t),i=Fi(t),s=wFe(t,r),o=r.slice(-2),a=t<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${s});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UFe=tz,zFe=1e-7,HFe=1e-4,qT={};function VFe(n){return n in qT||(qT[n]={}),qT[n]}const GFe=it().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),WFe=600;function jFe(){return it().global.screen==null?1024:it().global.screen.height*it().global.screen.width*window.devicePixelRatio*WFe/1024/1024}class R3 extends f4{nextDataId(){return R3.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!it().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(e!=null){if(e instanceof gB)t=e;else{const r=lh(it().getNumber("WEBGL_VERSION"),e);t=new gB(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=lh(it().getNumber("WEBGL_VERSION"));t=new gB(r),this.binaryCache=VFe(it().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new EFe(this.gpgpu),this.numMBBeforeWarning=jFe(),this.texData=new yY(this,nf())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,r,i,s,o){const a=this.makeTensorInfo(t,r),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[i,s]},l.texShape=[i,s];const c=jT(t),u=new GG(c,!1,o),d=this.runWebGLProgram(u,[a],r,[[i,s]]);return d.shape=t,l.texture=null,this.disposeIntermediateTensorInfo(a),d.dataId}write(e,t,r){if((it().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||it().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const i={id:this.nextDataId()};return this.texData.set(i,{shape:t,dtype:r,values:e,usage:ru.UPLOAD,refCount:1}),i}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const t=this.texData.get(e);t.refCount++}decRef(e){if(this.texData.has(e)){const t=this.texData.get(e);t.refCount--}}move(e,t,r,i,s){if(it().getBool("DEBUG")&&this.checkNumericalProblems(t),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:i,values:t,usage:ru.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:r,dtype:i,complexTensorInfos:s,slice:o,shape:a,isPacked:l}=t;if(o!=null){let f;l?f=new fg(a,sg):f=new ff(a,sg);const p=this.runWebGLProgram(f,[{dataId:e,shape:a,dtype:i}],i),g=this.readSync(p.dataId);return this.disposeIntermediateTensorInfo(p),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(i==="string")return r;const c=this.activeTimers!=null;let u;c&&(u=Ol());let d;if(i==="complex64"){const f=this.readSync(s.real.dataId),p=this.readSync(s.imag.dataId);d=jp(f,p)}else d=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=Ol()-u),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const g=this.pendingRead.get(e);return new Promise(v=>g.push(v))}const t=this.texData.get(e),{values:r,shape:i,slice:s,dtype:o,complexTensorInfos:a,isPacked:l}=t;if(s!=null){let g;l?g=new fg(i,sg):g=new ff(i,sg);const v=this.runWebGLProgram(g,[{dataId:e,shape:i,dtype:o}],o),b=this.read(v.dataId);return this.disposeIntermediateTensorInfo(v),b}if(r!=null)return this.convertAndCacheOnCPU(e);if(it().getBool("DEBUG")&&!it().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&it().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,u;if(o!=="complex64"&&it().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const g=this.texData.get(u.dataId);c=this.gpgpu.createBufferFromTexture(g.texture.texture,...VT(i))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(o==="complex64"){const g=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),v=g[0],b=g[1];d=jp(v,b)}else if(c==null)d=this.getValuesFromTexture(e);else{const g=xt(i);d=this.gpgpu.downloadFloat32MatrixFromBuffer(c,g)}if(u!=null&&this.disposeIntermediateTensorInfo(u),c!=null){const g=this.gpgpu.gl;pn(g,()=>g.deleteBuffer(c))}const f=this.convertAndCacheOnCPU(e,d),p=this.pendingRead.get(e);return this.pendingRead.delete(e),p.forEach(g=>g(f)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&nf().removeDataId(e,this),this.pendingDeletes--),f}readToGPU(e,t={}){const r=this.texData.get(e),{values:i,shape:s,slice:o,dtype:a,isPacked:l,texture:c}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let p;l?p=new fg(s,sg):p=new ff(s,sg);const g=this.runWebGLProgram(p,[{dataId:e,shape:s,dtype:a}],a),v=this.readToGPU(g,t);return this.disposeIntermediateTensorInfo(g),v}if(c==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,t.customTexShape),d=nf().makeTensorFromTensorInfo(u),f=this.texData.get(u.dataId);return Object.assign({tensorRef:d},f.texture)}bufferSync(e){const t=this.readSync(e.dataId);if(e.dtype==="string")try{const r=t.map(i=>Mg(i));return Ar(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ar(e.shape,e.dtype,t)}checkNumericalProblems(e){if(e!=null)for(let t=0;t<e.length;t++){const r=e[t];if(!KBe(r))throw it().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:t,dtype:r,isPacked:i}=this.texData.get(e),s=xt(t);if(it().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const f=this.decode(e),p=this.texData.get(f.dataId),g=this.gpgpu.downloadMatrixFromPackedTexture(p.texture.texture,...VT(t)).subarray(0,s);return this.disposeIntermediateTensorInfo(f),g}const o=it().getBool("WEBGL_PACK")&&i===!0,a=o?jT(t):t,l=o?new dLe(a):new uLe(a),c=this.runWebGLProgram(l,[{shape:a,dtype:r,dataId:e}],"float32"),u=this.texData.get(c.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(c),d}timerAvailable(){return it().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,r=[];let i=!1;this.programTimersStack==null?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,e();const s=uv(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=uv(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=t,i&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(it().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(s);a.kernelMs=lve(l),a.getExtraProfileInfo=()=>l.map((c,u)=>({name:o[u],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return it().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Ol(),endMs:null}}endTimer(e){return it().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Ol(),e)}async getQueryTime(e){if(it().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:r,texShape:i,usage:s,isPacked:o,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),t!=null&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(t,i,s,o)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,t=GFe){return it().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&xt(r.shape)<t)}getGPGPUContext(){return this.gpgpu}where(e){Qc("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return UFe(e.shape,t)}packedUnaryOp(e,t,r){const i=new fg(e.shape,t),s=this.compileAndRun(i,[e],r);return nf().makeTensorFromTensorInfo(s)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const i=Wne(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,i)}if(it().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,qG,e.dtype);const t=new ff(e.shape,qG),r=this.compileAndRun(t,[e]);return nf().makeTensorFromTensorInfo(r)}makeTensorInfo(e,t,r){let i;if(t==="string"&&r!=null&&r.length>0&&UC(r[0])){const s=r.map(o=>vg(o));i=this.write(s,e,t)}else i=this.write(r,e,t);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:t}}makeOutput(e,t,r){return nf().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,r),this)}unpackTensor(e){const t=new PFe(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new _Fe(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const r=[C1(e.shape),...E1(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},s=[C1(t),...E1(t)],o=new qne(s,r),a=!0,l=[r],c=this.runWebGLProgram(o,[i],e.dtype,l,a);return{dataId:c.dataId,shape:t,dtype:c.dtype}}decode(e,t){const r=this.texData.get(e),{isPacked:i,shape:s,dtype:o}=r;if(t!=null){const f=xt(s),p=t[0]*t[1]*4;de(f<=p,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=jT(s);let l;i?l=new cLe(a):l=new lLe(a);const c=!0,u=[t??VT(a)],d=this.runWebGLProgram(l,[{shape:a,dtype:o,dataId:e}],o,u,c,t);return{dtype:o,shape:s,dataId:d.dataId}}runWebGLProgram(e,t,r,i,s=!1,o){const a=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===oC.DENSE){const x=o??VT(e.outputShape);l.texShape=x.map(_=>_*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),xt(a.shape)===0)return l.values=la(a.dtype,0),a;const c=[],u=t.map(x=>{if(x.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let _=this.texData.get(x.dataId);if(_.texture==null){if(!e.packedInputs&&xt(x.shape)<=it().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:x.shape,texData:null,isUniform:!0,uniformValues:_.values};e.packedInputs&&(_.isPacked=!0,_.shape=x.shape)}if(this.uploadToGPU(x.dataId),!!_.isPacked!=!!e.packedInputs)x=_.isPacked?this.unpackTensor(x):this.packTensor(x),c.push(x),_=this.texData.get(x.dataId);else if(_.isPacked&&!cN(_.shape,x.shape)){const E=x,C=x.shape;x.shape=_.shape,x=this.packedReshape(x,C),c.push(x),_=this.texData.get(x.dataId),E.shape=C}return{shape:x.shape,texData:_,isUniform:!1}});this.uploadToGPU(a.dataId);const d={shape:a.shape,texData:l,isUniform:!1},f=aLe(e,u,d),p=this.getAndSaveBinary(f,()=>sLe(this.gpgpu,e,u,d)),g=this.activeTimers!=null;let v;g&&(v=this.startTimer()),it().get("ENGINE_COMPILE_ONLY")||oLe(this.gpgpu,p,u,d,i),c.forEach(x=>this.disposeIntermediateTensorInfo(x)),g&&(v=this.endTimer(v),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(v)}));const b=it().getNumber("WEBGL_FLUSH_THRESHOLD");if(b>0){const x=Ol();x-this.lastGlFlushTime>b&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=x)}if(!it().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&s===!1){const x=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),x}return a}compileAndRun(e,t,r,i,s=!1){return r=r||t[0].dtype,this.runWebGLProgram(e,t,r,i,s)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(it().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(t=>{this.gpgpu.deleteProgram(this.binaryCache[t].webGLProgram),delete this.binaryCache[t]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Ye(()=>{if(!it().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=it().getBool("DEBUG");it().set("DEBUG",!1);const t=this.abs($n(1e-8)).dataSync()[0];if(it().set("DEBUG",e),t>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?zFe:HFe}uploadToGPU(e){const t=this.texData.get(e),{shape:r,dtype:i,values:s,texture:o,usage:a,isPacked:l}=t;if(o!=null)return;const c=this.activeTimers!=null;let u;c&&(u=Ol());let d=t.texShape;if(d==null&&(d=f$e(r,l),t.texShape=d),s!=null){const f=jT(r);let p,g=d[1],v=d[0];const b=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(l||!b)&&([g,v]=Y1(d[0],d[1])),l?p=new fLe(f,b):p=new GG(f,b);const x=b?[v,g]:d,_=this.makeTensorInfo(x,i),E=this.texData.get(_.dataId);b?E.usage=ru.PIXELS:E.usage=ru.UPLOAD,E.texShape=x,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(_.dataId),g,v,s);const C=[[v,g]],R=this.runWebGLProgram(p,[_],i,C,!0),L=this.texData.get(R.dataId);t.texShape=L.texShape,t.isPacked=L.isPacked,t.usage=L.usage,it().get("ENGINE_COMPILE_ONLY")?this.disposeData(R.dataId):(t.texture=L.texture,t.values=null,this.texData.delete(R.dataId)),this.disposeIntermediateTensorInfo(_),c&&(this.uploadWaitMs+=Ol()-u)}else{const f=this.acquireTexture(d,a,i,l);t.texture=f}}convertAndCacheOnCPU(e,t){const r=this.texData.get(e),{dtype:i}=r;return t!=null&&(r.values=XFe(t,i)),r.values}acquireTexture(e,t,r,i){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,i)}computeBytes(e,t){return e[0]*e[1]*FR(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}else{for(const[,t]of Object.entries(this.binaryCache)){const r=new Promise(i=>{try{this.checkCompletion_(t),i(!0)}catch(s){throw s}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await IZ(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(kne(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:t,customUniformLocations:r,infLoc:i,nanLoc:s,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:l}=Fne(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=r,e.infLoc=i,e.nanLoc=s,e.outShapeLocation=o,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,t,r){e.channels=e.channels||"RGBA";const{texture:i,height:s,width:o,channels:a}=e,l=nf().backend;if(!l.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(i,t,r,s,o,a);return nf().makeTensorFromDataId(c,t,r,l)}}R3.nextDataId=0;function XFe(n,e){if(e==="float32"||e==="complex64")return n;if(e==="int32"||e==="bool"){const t=e==="int32"?new Int32Array(n.length):new Uint8Array(n.length);for(let r=0;r<t.length;++r)t[r]=Math.round(n[r]);return t}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */FY()&&HY("webgl",()=>new R3,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b5=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class wv{constructor(e,t,r){this.variableNames=["A","B"],this.outputShape=fr(t,r),this.enableShapeUniforms=$a(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zv=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class tS{constructor(e,t,r,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=fr(t,r);const s=this.outputShape.length;this.enableShapeUniforms=$a(s);let o="";if(i)if(s===0||xt(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${Fi(s)} coords = getOutputCoords();
        `,s===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=tl("coords",s);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= outShape[${s} - 2];
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= outShape[${s} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= ${this.outputShape[s-2]};
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= ${this.outputShape[s-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nc(n){const{inputs:e,backend:t}=n,{x:r}=e;return t.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const qFe={kernelName:aE,backendName:"webgl",kernelFunc:Nc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n0(n){const{inputs:e,backend:t}=n,{real:r,imag:i}=e,s=t.makeTensorInfo(r.shape,"complex64"),o=t.texData.get(s.dataId),a=Nc({inputs:{x:r},backend:t}),l=Nc({inputs:{x:i},backend:t});return o.complexTensorInfos={real:a,imag:l},s}const KFe={kernelName:_4,backendName:"webgl",kernelFunc:n0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kne="return (a < 0.) ? b * a : a;",Yne=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function YFe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{alpha:s}=r,o=t.makeTensorInfo([],"float32",jg(s,"float32")),a=it().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new tS(Yne,i.shape,o.shape):new wv(Kne,i.shape,o.shape),l=t.runWebGLProgram(a,[i,o],"float32");return t.disposeIntermediateTensorInfo(o),l}const JFe={kernelName:lD,backendName:"webgl",kernelFunc:YFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jne="return (a < 0.) ? b * a : a;",Zne=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function ZFe(n){const{inputs:e,backend:t}=n,{x:r,alpha:i}=e,s=it().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new tS(Zne,r.shape,i.shape):new wv(Jne,r.shape,i.shape);return t.runWebGLProgram(s,[r,i],"float32")}const QFe={kernelName:TD,backendName:"webgl",kernelFunc:ZFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nS="if (isnan(x)) return x;";function ti({opSnippet:n,packedOpSnippet:e,cpuKernelImpl:t,dtype:r}){return({inputs:i,backend:s})=>{const{x:o}=i,a=s,l=r||o.dtype;if(a.shouldExecuteOnCPU([o])&&t!=null){const d=a.texData.get(o.dataId),f=t(d.values,l);return a.makeTensorInfo(o.shape,l,f)}const c=it().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let u;return c?u=new fg(o.shape,e):u=new ff(o.shape,n),a.runWebGLProgram(u,[o],l)}}function fa({opSnippet:n,packedOpSnippet:e,checkOutOfBounds:t=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:s}){return({inputs:o,backend:a})=>{const{a:l,b:c}=o,u=a;if(r&&l.dtype==="complex64"){const g=u.texData.get(l.dataId),v=u.texData.get(c.dataId),[b,x]=[[g.complexTensorInfos.real,v.complexTensorInfos.real],[g.complexTensorInfos.imag,v.complexTensorInfos.imag]].map(E=>{const[C,M]=E,R={dataId:C.dataId,dtype:C.dtype,shape:l.shape},L={dataId:M.dataId,dtype:M.dtype,shape:c.shape},B=new wv(n,l.shape,c.shape);return u.runWebGLProgram(B,[R,L],Tc(C.dtype,M.dtype))}),_=n0({inputs:{real:b,imag:x},backend:u});return u.disposeIntermediateTensorInfo(b),u.disposeIntermediateTensorInfo(x),_}const d=s||Tc(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&i!=null){const g=u.texData.get(l.dataId).values,v=u.texData.get(c.dataId).values,b=l.dtype==="string"?Xp(g):g,x=l.dtype==="string"?Xp(v):v,[_,E]=i(l.shape,c.shape,b,x,d),C=u.makeTensorInfo(E,d),M=u.texData.get(C.dataId);return M.values=_,C}const f=it().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let p;return f?p=new tS(e,l.shape,c.shape,t):p=new wv(n,l.shape,c.shape),u.runWebGLProgram(p,[l,c],d)}}function aC(n,e=!1){if(n==="linear")return e?OFe:RFe;if(n==="relu")return e?$Fe:IFe;if(n==="elu")return e?BFe:NFe;if(n==="relu6")return e?LFe:DFe;if(n==="prelu")return e?Zne:Jne;if(n==="leakyrelu")return e?Yne:Kne;if(n==="sigmoid")return e?FFe:kFe;throw new Error(`Activation ${n} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qne{constructor(e,t,r,i=!1,s=!1,o=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=$a(this.outputShape.length);const u=i?e[1]:e[2],d=Math.ceil(u/2),f=i?"i * 2, rc.y":"rc.y, i * 2",p=s?"rc.z, i * 2":"i * 2, rc.z",g=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let b="",x="";a&&(l?b=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:c?b=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:b=`vec4 activation(vec4 x) {
          ${a}
        }`,x="result = activation(result);");const _=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let E="rc.x",C="rc.x";e[0]<t[0]?E=`imod(rc.x, ${e[0]})`:t[0]<e[0]&&(C=`imod(rc.x, ${t[0]})`),this.userCode=`
      ${b}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${E};
        int batchB = ${C};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${f});
          vec4 b = getMatrixB(batchB, ${p});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${g[0]} * ${v[0]});
          result += (${g[1]} * ${v[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${_}

        ${x}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KG={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class YG{constructor(e,t,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=fr(t,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JG="return a * b;";function x5(n){const{inputs:e,backend:t}=n,{a:r,b:i}=e,s=Tc(r.dtype,i.dtype);if(r.dtype==="complex64"){const a=t.texData.get(r.dataId),l=t.texData.get(i.dataId),c=new YG(KG.REAL,r.shape,i.shape),u=new YG(KG.IMAG,r.shape,i.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],f=t.runWebGLProgram(c,d,"float32"),p=t.runWebGLProgram(u,d,"float32"),g=n0({inputs:{real:f,imag:p},backend:t});return t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(p),g}if(t.shouldExecuteOnCPU([r,i])){const a=t.texData.get(r.dataId),l=t.texData.get(i.dataId),[c,u]=ZLe(r.shape,i.shape,a.values,l.values,s),d=t.makeTensorInfo(u,s),f=t.texData.get(d.dataId);return f.values=c,d}let o;return it().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new tS(JG,r.shape,i.shape):o=new wv(JG,r.shape,i.shape),t.runWebGLProgram(o,[r,i],s)}const ePe={kernelName:gE,backendName:"webgl",kernelFunc:x5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tPe(n,e,t){const r=[C1(n.shape),...E1(n.shape)],i={dtype:n.dtype,shape:r,dataId:n.dataId},s=[C1(e),...E1(e)],o=new qne(s,r),a=!0,l=[r],c=t.runWebGLProgram(o,[i],n.dtype,l,a);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sn(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{shape:s}=r,o=t,a=xt(i.shape),l=vY(s,a),c=xt(l);de(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const u=o.texData.get(i.dataId);return u.isPacked&&!cN(i.shape,l)&&!(u.texture!==null&&cN(u.shape,l))?tPe(i,l,o):(o.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype})}const nPe={kernelName:RD,backendName:"webgl",kernelFunc:sn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZG{constructor(e,t){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:o}=e;this.outputShape=[i,o];const a=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(t!=null){const d=1/t;c=`sumValue += dot(values * ${m1(d)?d.toPrecision(2):d}, ones);`}let u="";s%r>0&&(u=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rPe{constructor(e,t){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:o}=e;this.outputShape=[i,o];let a="0.0",l="";t==="prod"?a="1.0":t==="min"?(a="1.0 / 1e-20",l="min"):t==="max"&&(a="-1.0 / 1e-20",l="max");let c=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="sum"?c="sumValue":t==="prod"?c="prodValue":t==="all"?c="allValue":t==="any"&&(c="anyValue");const u=Math.floor(r/4)*4,d=r%4;let f=`
      if (${t==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${t==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${t==="min"} || ${t==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,p="vec4";t==="all"?(a="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,p="bvec4"):t==="any"&&(a="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,p="bvec4");let g="";s%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${g}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${f}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===2}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===3}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${f}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iPe(n){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const t=e.length?e[e.length-1].outSize:n[1],r=f3(t);e.push({inSize:t,windowSize:r,outSize:Math.ceil(t/r)})}return e}function Hv(n,e,t,r){const i=iPe(n.shape);let s=n;for(let o=0;o<i.length;o++){const{inSize:a,windowSize:l,outSize:c}=i[o];let u,d;t==="mean"?u=o===0?new ZG({windowSize:l,inSize:a,batchSize:n.shape[0],outSize:c},a):new ZG({windowSize:l,inSize:a,batchSize:n.shape[0],outSize:c}):u=new rPe({windowSize:l,inSize:a,batchSize:n.shape[0],outSize:c},t),d=s,s=r.runWebGLProgram(u,[s],e),d.dataId!==n.dataId&&r.disposeIntermediateTensorInfo(d)}return s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sPe{constructor(e,t){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[t[o]];this.outputShape=r,this.rank=r.length;const i=Fi(this.rank),s=oPe(t);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${s}));
    }
    `}}function oPe(n){const e=n.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let i=0;i<n.length;i++)r[n[i]]=t[i];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aPe{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let u=0;u<r.length;u++)r[u]=e[t[u]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const i=Fi(this.rank),s=Xne("rc",this.rank),o=new Array(this.rank);for(let u=0;u<t.length;u++)o[t[u]]=s[u];const a=`vec2(${o.slice(-2).join()})`,l=`++${s[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${s[this.rank-1]};
      if(++${s[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N3(n,e,t){const r=it().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new aPe(n.shape,e):new sPe(n.shape,e);return t.runWebGLProgram(r,[n],n.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lPe(n,e,t,r){const i=e,s=n.shape.length,o=Ir(i,n.shape);let a=o;const l=Cs(a,s),c=l!=null;let u=n;c&&(u=N3(n,l,r),a=Zs(a.length,s)),da("sum",a,s);const[d,f]=Xo(u.shape,a);let p=d;t&&(p=Ks(d,o));const g=xt(f),b=xt(n.shape)/g,x=sn({inputs:{x:u},attrs:{shape:[b,g]},backend:r}),_=SU(n.dtype),E=Hv(x,_,"sum",r),C=sn({inputs:{x:E},attrs:{shape:p},backend:r});return r.disposeIntermediateTensorInfo(x),r.disposeIntermediateTensorInfo(E),c&&r.disposeIntermediateTensorInfo(u),C}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I3(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,keepDims:o}=r;return lPe(i,s,o,t)}const cPe={kernelName:BD,backendName:"webgl",kernelFunc:I3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sl(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{perm:s}=r,o=t,a=i.shape.length,l=new Array(a);for(let u=0;u<l.length;u++)l[u]=i.shape[s[u]];let c;if(o.shouldExecuteOnCPU([i])){const d=o.texData.get(i.dataId).values,f=v5(d,i.shape,i.dtype,s,l);c=o.makeTensorInfo(l,i.dtype);const p=o.texData.get(c.dataId);p.values=f}else c=N3(i,s,o);return c}const uPe={kernelName:Ux,backendName:"webgl",kernelFunc:sl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ere=1e3;function uN({a:n,b:e,transposeA:t,transposeB:r,backend:i,bias:s=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:l=null}){const c=n.shape.length,u=e.shape.length,d=t?n.shape[c-2]:n.shape[c-1],f=r?e.shape[u-1]:e.shape[u-2],p=t?n.shape[c-1]:n.shape[c-2],g=r?e.shape[u-2]:e.shape[u-1],v=n.shape.slice(0,-2),b=e.shape.slice(0,-2),x=xt(v),_=xt(b),C=fr(n.shape.slice(0,-2),e.shape.slice(0,-2)).concat([p,g]);de(d===f,()=>`Error in matMul: inner shapes (${d}) and (${f}) of Tensors with shapes ${n.shape} and ${e.shape} and transposeA=${t} and transposeB=${r} must match.`);const M=t?[x,d,p]:[x,p,d],R=r?[_,g,f]:[_,f,g],L=sn({inputs:{x:n},backend:i,attrs:{shape:M}}),B=sn({inputs:{x:e},backend:i,attrs:{shape:R}}),N=[L,B],I=Math.max(x,_),D=t?L.shape[1]:L.shape[2],P=s!=null,G=o!=null,W=l==="leakyrelu",q=l!=null?aC(l,!0):null,z=P||G||W||q!=null;let J;if((p===1||g===1)&&D>ere&&z===!1){let Y=L,X=B;t&&(Y=sl({inputs:{x:L},backend:i,attrs:{perm:[0,2,1]}}),N.push(Y)),r&&(X=sl({inputs:{x:B},backend:i,attrs:{perm:[0,2,1]}}),N.push(X));const te=g!==1,ne=g===1;let le=Y;te&&(le=sn({inputs:{x:Y},backend:i,attrs:{shape:[I,D,1]}}),N.push(le));const ye=g===1?2:1;let ue=X;ne&&(ue=sn({inputs:{x:X},backend:i,attrs:{shape:[I,1,D]}}),N.push(ue));const be=x5({inputs:{a:le,b:ue},backend:i});J=I3({inputs:{x:be},backend:i,attrs:{axis:ye,keepDims:!0}}),N.push(be)}else{const Y=Tc(n.dtype,e.dtype),X=new Qne(M,R,[I,p,g],t,r,P,q,G,W),te=[L,B];if(s!=null&&te.push(s),G&&te.push(o),W){const ne=i.makeTensorInfo([],"float32",jg(a,"float32"));te.push(ne),N.push(ne)}J=i.runWebGLProgram(X,te,Y)}const Q=sn({inputs:{x:J},backend:i,attrs:{shape:C}});N.push(J);for(const Y of N)i.disposeIntermediateTensorInfo(Y);return Q}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dPe(n){const{inputs:e,backend:t,attrs:r}=n,{a:i,b:s,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;return uN({a:i,b:s,transposeA:l,transposeB:c,backend:t,bias:o,preluActivationWeights:a,leakyreluAlpha:d,activation:u})}const hPe={kernelName:PR,backendName:"webgl",kernelFunc:dPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QG="return abs(x);";function fPe(n){const{inputs:e,backend:t}=n,{x:r}=e;if(t.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const s=t.texData.get(r.dataId),o=Wne(s.values);return t.makeTensorInfo(r.shape,r.dtype,o)}let i;return it().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new fg(r.shape,QG):i=new ff(r.shape,QG),t.runWebGLProgram(i,[r],r.dtype)}const pPe={kernelName:UI,backendName:"webgl",kernelFunc:fPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mPe=id+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,gPe=ti({opSnippet:mPe}),yPe={kernelName:zC,backendName:"webgl",kernelFunc:gPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vPe=id+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,bPe=ti({opSnippet:vPe}),xPe={kernelName:HC,backendName:"webgl",kernelFunc:bPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e9="return a + b;",SPe=fa({opSnippet:e9,packedOpSnippet:e9,supportsComplex:!0,cpuKernelImpl:ILe}),wPe={kernelName:V1,backendName:"webgl",kernelFunc:SPe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Pe{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((s,o)=>`T${o}`);const r=[];this.variableNames.forEach(s=>{r.push(`float v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CPe{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((s,o)=>`T${o}`);const r=[];this.variableNames.forEach(s=>{r.push(`vec4 v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OM(n){const{inputs:e,backend:t}=n,r=e;if(r.length===1)return Nc({inputs:{x:r[0]},backend:t});if(r.length>it().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=OM({inputs:r.slice(0,l),backend:t}),u=OM({inputs:r.slice(l),backend:t});return OM({inputs:[c,u],backend:t})}const i=r.map(l=>l.dtype).reduce((l,c)=>Tc(l,c)),s=r.map(l=>l.shape),a=it().getBool("WEBGL_PACK")?new CPe(r[0].shape,s):new _Pe(r[0].shape,s);return t.runWebGLProgram(a,r,i)}const EPe={kernelName:zI,backendName:"webgl",kernelFunc:OM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function APe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=Ir(s,i.shape);let c=l;const u=Cs(c,a);let d=i;u!=null&&(d=sl({inputs:{x:i},backend:t,attrs:{perm:u}}),c=Zs(c.length,a)),da("all",c,a);const[f,p]=Xo(d.shape,c),g=xt(p),v=sn({inputs:{x:d},backend:t,attrs:{shape:[-1,g]}}),b=Hv(v,v.dtype,"all",t);let x;if(o){const _=Ks(f,l);x=sn({inputs:{x:b},backend:t,attrs:{shape:_}})}else x=sn({inputs:{x:b},backend:t,attrs:{shape:f}});return t.disposeIntermediateTensorInfo(v),t.disposeIntermediateTensorInfo(b),u!=null&&t.disposeIntermediateTensorInfo(d),x}const TPe={kernelName:y4,backendName:"webgl",kernelFunc:APe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MPe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=Ir(s,i.shape);let c=l;const u=Cs(c,a);let d=i;u!=null&&(d=sl({inputs:{x:i},backend:t,attrs:{perm:u}}),c=Zs(c.length,a)),da("any",c,a);const[f,p]=Xo(d.shape,c),g=xt(p),v=sn({inputs:{x:d},backend:t,attrs:{shape:[-1,g]}}),b=Hv(v,v.dtype,"any",t);let x;if(o){const _=Ks(f,l);x=sn({inputs:{x:b},backend:t,attrs:{shape:_}})}else x=sn({inputs:{x:b},backend:t,attrs:{shape:f}});return t.disposeIntermediateTensorInfo(v),t.disposeIntermediateTensorInfo(b),u!=null&&t.disposeIntermediateTensorInfo(d),x}const RPe={kernelName:v4,backendName:"webgl",kernelFunc:MPe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NPe{constructor(e,t,r){this.variableNames=["A"];const{windowSize:i,batchSize:s,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,o];const a=t==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IPe{constructor(e,t,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,de(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const s=e[e.length-1],o=Math.ceil(s/t);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),i||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,c=Fi(l),u=tl("coords",l);let d,f;if(o===1){f=l+1;const B=Fi(f);d=`
        ${B} sourceLocR = ${B}(${u.join()}, 0);
        ++${u[l-1]};
        ${B} sourceLocG = ${B}(${u.join()}, 0);
        ++${u[l-2]};
        ${B} sourceLocA = ${B}(${u.join()}, 0);
        --${u[l-1]};
        ${B} sourceLocB = ${B}(${u.join()}, 0);
        --${u[l-2]};`}else f=l,d=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;const p=["x","y","z","w","u","v"].slice(0,f),g="."+p[f-1],v=p.map(B=>"int "+B),b=tl("sourceLocR",f-1).concat("inIdx.r"),x=tl("sourceLocG",f-1).concat("inIdx.g"),_=tl("sourceLocB",f-1).concat("inIdx.b"),E=tl("sourceLocA",f-1).concat("inIdx.a"),C=r==="max"?"greaterThan":"lessThan",M=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${_.join()}),
                             getBestIndicesAChannel(${E.join()})));`,R=`vec4(
            getAChannel(${b.join()}),
            hasNextCol ? getAChannel(${x.join()}) : 0.,
            hasNextRow ? getAChannel(${_.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${E.join()}) : 0.)`,L=i?"":`
      float getBestIndicesAChannel(${v.join()}) {
        return getChannel(getBestIndicesA(${p.join()}),
                                          vec2(${p.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${v.join()}) {
        return getChannel(getA(${p.join()}),
                               vec2(${p.slice(-2).join()}));
      }
      ${L}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${a[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${g}, sourceLocG${g},
          sourceLocB${g}, sourceLocA${g}) * ${t};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${R};

        for (int i = 0; i < ${t}; i++) {
          inIdx = srcIdx;
          ${M}
          vec4 candidate = ${R};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${C}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tre(n,e,t,r=null){let i=e.shape[0],s=e.shape[1];r!=null&&(i=r.shape[0],s=r.shape[1]);const o=f3(s),a={windowSize:o,inSize:s,batchSize:i,outSize:Math.ceil(s/o)},l=new NPe(a,t,r==null),c=[e];r!=null&&c.push(r);const u=n.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;const d=tre(n,e,t,u);return n.disposeIntermediateTensorInfo(u),d}function nre(n,e,t,r=null){const i=r!=null?r.shape:e.shape,s=i[i.length-1],o=f3(s),a=new IPe(i,o,t,r==null),l=r==null?[e]:[e,r],c=n.runWebGLProgram(a,l,"int32");if(c.shape.length===e.shape.length){const u=nre(n,e,t,c);return n.disposeIntermediateTensorInfo(c),u}return c}function rre(n,e,t,r){const i=[t];if(da("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,e.shape.length),!it().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const s=[],o=n.texData.get(e.dataId),a=o!==null&&o.isPacked;let l=e;a&&(l=n.unpackTensor(e),s.push(l));const[c,u]=Xo(l.shape,i),d=xt(u),f=sn({inputs:{x:l},backend:n,attrs:{shape:[-1,d]}});s.push(f);const p=tre(n,f,r);s.push(p);const g=sn({inputs:{x:p},backend:n,attrs:{shape:c}});return s.forEach(v=>n.disposeIntermediateTensorInfo(v)),g}return nre(n,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DPe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s}=r;let o=Ir(s,i.shape);const a=Cs(o,i.shape.length);let l=i;const c=[];a!=null&&(l=sl({inputs:{x:i},backend:t,attrs:{perm:a}}),c.push(l),o=Zs(o.length,l.shape.length)),da("argMax",[o[0]],l.shape.length);const u=rre(t,l,o[0],"max");return c.forEach(d=>t.disposeIntermediateTensorInfo(d)),u}const kPe={kernelName:HI,backendName:"webgl",kernelFunc:DPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OPe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s}=r;let o=Ir(s,i.shape);const a=Cs(o,i.shape.length);let l=i;const c=[];a!=null&&(l=sl({inputs:{x:i},backend:t,attrs:{perm:a}}),c.push(l),o=Zs(o.length,l.shape.length)),da("argMin",[o[0]],l.shape.length);const u=rre(t,l,o[0],"min");return c.forEach(d=>t.disposeIntermediateTensorInfo(d)),u}const BPe={kernelName:VI,backendName:"webgl",kernelFunc:OPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Pe=id+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,LPe=ti({opSnippet:$Pe}),FPe={kernelName:VC,backendName:"webgl",kernelFunc:LPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PPe=id+"return log(x + sqrt(x * x + 1.0));",UPe=ti({opSnippet:PPe}),zPe={kernelName:GC,backendName:"webgl",kernelFunc:UPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HPe=id+`
  return atan(x);
`,VPe=ti({opSnippet:HPe}),GPe={kernelName:WC,backendName:"webgl",kernelFunc:VPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WPe=b5+`
  return atan(a, b);
`,jPe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+zv+`
  return result;
`,XPe=fa({opSnippet:WPe,packedOpSnippet:jPe}),qPe={kernelName:XC,backendName:"webgl",kernelFunc:XPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KPe=id+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,YPe=ti({opSnippet:KPe}),JPe={kernelName:jC,backendName:"webgl",kernelFunc:YPe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lC{constructor(e,t,r,i=!1,s=!1){if(this.variableNames=["x"],t==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,p=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;const v=t==="avg",b=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,x=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let _="0.0";if(v||(_="-1.0 / 1e-20"),r){this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${p}, ${g});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?s?b:x:`wR * ${f} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const E="max";let C=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="avg"&&(C="avgValue / max(count, 1.0)");const M=Math.floor(o/4)*4,R=o%4,L=`
      if (${v}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${E}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${p}, ${g});
      const float initializationValue = ${_};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${_});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${M}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${L}
          }

          int xC = xCCorner + ${M};
          if (${R===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${L}
          } else if (${R===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${L}
          } else if (${R===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${L}
          }
        }
        setOutput(${C});
      }
    `}}class S5{constructor(e,t,r,i=!1,s=!1){if(this.variableNames=["x"],t==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideDepth,l=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,d=e.dilationHeight,f=e.dilationWidth,p=e.effectiveFilterDepth,g=e.effectiveFilterHeight,v=e.effectiveFilterWidth,b=e.padInfo.front,x=e.padInfo.top,_=e.padInfo.left;this.outputShape=e.outShape;const E=t==="avg";let C="0.0";if(E||(C="-1.0 / 1e-20"),r){this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${c});
        const ivec3 pads = ivec3(${b}, ${x}, ${_});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${p};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${g};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${v};
                  wC += ${f}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?s?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${g} * ${v} +
                      wR * ${v} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const M="max";let R=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="avg"&&(R="avgValue / max(count, 1.0)");const L=Math.floor(o/4)*4,B=o%4,N=`
      if (${E}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${M}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${c});
      const ivec3 pads = ivec3(${b}, ${x}, ${_});
      const float initializationValue = ${C};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${C});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${p};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${g};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${L}; wC += 4) {
              int xC = xCCorner + wC * ${f};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                getValue(batch, xD, xR, xC + 3 * ${f}, ch)
              );

              ${N}
            }

            int xC = xCCorner + ${L};
            if (${B===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${N}
            } else if (${B===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                initializationValue,
                initializationValue
              );

              ${N}
            } else if (${B===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                initializationValue
              );

              ${N}
            }
          }
        }
        setOutput(${R});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZPe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e;r2(i,"avgPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,c=1;de(ua(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=nd(i.shape,s,o,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&Vr(u.inShape,u.outShape))return Nc({inputs:{x:i},backend:t});const d=new lC(u,"avg",!1);return t.runWebGLProgram(d,[i],"float32")}const QPe={kernelName:GI,backendName:"webgl",kernelFunc:ZPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e4e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r,u=[1,1,1],d=nm(i.shape,s,o,u,a,l,c),f=new S5(d,"avg",!1);return t.runWebGLProgram(f,[i],"float32")}const t4e={kernelName:WI,backendName:"webgl",kernelFunc:e4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class n4e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=l-1-e.padInfo.top,d=c-1-e.padInfo.left,f=1/(t*r);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${d});
      const float avgMultiplier = float(${f});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class r4e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,r=e.filterHeight,i=e.filterWidth,s=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterDepth,f=e.effectiveFilterHeight,p=e.effectiveFilterWidth,g=d-1-e.padInfo.front,v=f-1-e.padInfo.top,b=p-1-e.padInfo.left,x=1/(t*r*i);this.userCode=`
      const ivec3 pads = ivec3(${g}, ${v}, ${b});
      const float avgMultiplier = float(${x});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${f};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${p};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i4e(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,input:s}=e,o=s,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],f=nm(o.shape,a,l,d,c,u),p=new r4e(f);return t.runWebGLProgram(p,[i],o.dtype)}const s4e={kernelName:x4,backendName:"webgl",kernelFunc:i4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o4e(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,input:s}=e,o=s;r2([i,s],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=nd(o.shape,a,l,1,c),d=new n4e(u);return t.runWebGLProgram(d,[i],o.dtype)}const a4e={kernelName:b4,backendName:"webgl",kernelFunc:o4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l4e(n){const{inputs:e,backend:t,attrs:r}=n,{a:i,b:s}=e,{transposeA:o,transposeB:a}=r;return uN({a:i,b:s,transposeA:o,transposeB:a,backend:t})}const c4e={kernelName:jI,backendName:"webgl",kernelFunc:l4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class u4e{constructor(e,t,r,i,s,o){this.outputShape=[],this.variableNames=["x","mean","variance"],fr(e,t),fr(e,r);let a="0.0";i!=null&&(fr(e,i),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";s!=null&&(fr(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d4e{constructor(e,t,r,i,s,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],fr(e,t),fr(e,r);let a="vec4(0.0)";i!=null&&(fr(e,i),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";s!=null&&(fr(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h4e=({inputs:n,backend:e,attrs:t})=>{const{x:r,mean:i,variance:s,offset:o,scale:a}=n;de(i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),de(o==null||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),de(a==null||i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=t;l==null&&(l=.001);const c=[r,i,s];let u=null;o!=null&&(u=o.shape,c.push(o));let d=null;a!=null&&(d=a.shape,c.push(a));const f=it().getBool("WEBGL_PACK_NORMALIZATION")?new d4e(r.shape,i.shape,s.shape,u,d,l):new u4e(r.shape,i.shape,s.shape,u,d,l);return e.runWebGLProgram(f,c,c[0].dtype)},f4e={kernelName:sD,backendName:"webgl",kernelFunc:h4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p4e{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=Fi(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=m4e(this.rank);let i;const s=e.map((o,a)=>`sourceLoc.${iF[a]} = start[${a}] + coords.${iF[a]};`);i=`
        ${t} sourceLoc;
        ${t} coords = getOutputCoords();
        ${s.join(`
`)}
      `,this.userCode=`
      void main() {
        ${i}
        setOutput(getSource(${r}));
      }
    `}}const iF=["x","y","z","w","u","v"];function m4e(n){if(n===1)return"sourceLoc";if(n<=6)return iF.slice(0,n).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${n} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g4e{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=Fi(this.rank),r=tl("coords",this.rank),i=tl("sourceLoc",this.rank),s=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,o=`getChannel(getSource(${i.join()}), ${s})`,a=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${o};
        --${i[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${o};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${t}(${e.map((u,d)=>`start[${d}]`).join()});`:e.map((u,d)=>`${i[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${t} coords = getOutputCoords();
        ${t} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y4e(n,e,t,r){const i=r.texData.get(n.dataId),s=r.makeTensorInfo(t,n.dtype),o=r.texData.get(s.dataId);Object.assign(o,i),o.refCount=1,o.shape=t,o.dtype=n.dtype;let a=mz(e,kn(n.shape));i.slice&&(a+=i.slice.flatOffset),o.slice={flatOffset:a,origDataId:i.slice&&i.slice.origDataId||n.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),s}function rS(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{begin:s,size:o}=r,[a,l]=h3(i,s,o);if(hz(i,a,l),xt(l)===0)return t.makeTensorInfo(l,i.dtype,[]);if(t.shouldExecuteOnCPU([i])||i.dtype==="string"){const d=t.texData.get(i.dataId),f=cFe(d.values,a,l,i.shape,i.dtype);return t.makeTensorInfo(l,i.dtype,f)}const{isPacked:c}=t.texData.get(i.dataId),u=pz(i.shape,a,l);if(c||!u){const d=it().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new g4e(l):new p4e(l),f=[a];return t.runWebGLProgram(d,[i],i.dtype,f)}return t.uploadToGPU(i.dataId),y4e(i,a,l,t)}const v4e={kernelName:OD,backendName:"webgl",kernelFunc:rS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b4e=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{blockShape:s,crops:o}=r;de(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((_,E)=>_*E),l=GE(i.shape,s,a),c=WE(l.length,s.length),u=jE(i.shape,s,a),d=xz(o,s.length),f=Sz(u,o,s.length),p=[],g=sn({inputs:{x:i},backend:t,attrs:{shape:l}}),v=sl({inputs:{x:g},backend:t,attrs:{perm:c}}),b=sn({inputs:{x:v},backend:t,attrs:{shape:u}}),x=rS({inputs:{x:b},backend:t,attrs:{begin:d,size:f}});return p.push(g),p.push(v),p.push(b),p.forEach(_=>t.disposeIntermediateTensorInfo(_)),x},x4e={kernelName:XI,backendName:"webgl",kernelFunc:b4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S4e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,weights:s}=e,{size:o}=r,a=t.readSync(i.dataId),l=t.readSync(s.dataId),c=Gne(a,l,s.dtype,s.shape,o);return t.makeTensorInfo([o],s.dtype,c)}const w4e={kernelName:S4,backendName:"webgl",kernelFunc:S4e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _4e=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,C4e=`
  return float(int(a.r) & int(b.r));
`;function E4e(n){const{inputs:e,backend:t}=n,{a:r,b:i}=e,s=it().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=it().getNumber("WEBGL_VERSION");if(t.shouldExecuteOnCPU([r,i])||o===1){const l=t.texData.get(r.dataId).values,c=t.texData.get(i.dataId).values,[u,d]=kLe(r.shape,i.shape,l,c,r.dtype),f=t.makeTensorInfo(d,r.dtype),p=t.texData.get(f.dataId);return p.values=u,f}let a;return s?a=new tS(_4e,r.shape,i.shape,!1):a=new wv(C4e,r.shape,i.shape),t.runWebGLProgram(a,[r,i],r.dtype)}const A4e={kernelName:qI,backendName:"webgl",kernelFunc:E4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T4e(n){const{inputs:e,backend:t}=n,{s0:r,s1:i}=e,s=t.readSync(r.dataId),o=t.readSync(i.dataId),a=fr(Array.from(s),Array.from(o));return t.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const M4e={kernelName:w4,backendName:"webgl",kernelFunc:T4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R4e="return float(a != b);",ire=fa({opSnippet:R4e,cpuKernelImpl:eFe,dtype:"bool"}),N4e={kernelName:wD,backendName:"webgl",kernelFunc:ire};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s2(n){const{inputs:e,backend:t}=n,{input:r}=e,i=t.texData.get(r.dataId);return Nc({inputs:{x:i.complexTensorInfos.real},backend:t})}const I4e={kernelName:tU,backendName:"webgl",kernelFunc:s2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D4e="return float(int(x));";function k4e(n,e){const t=new ff(n.shape,D4e),r=e.runWebGLProgram(t,[n],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sF(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return Nc({inputs:{x:i},backend:t});const o=_o(i.shape),a=sF({inputs:{x:i},backend:t,attrs:{dtype:"float32"}}),l=n0({inputs:{real:a,imag:o},backend:t});return o.dispose(),t.disposeIntermediateTensorInfo(a),l}if(i.dtype==="complex64"){const o=s2({inputs:{input:i},backend:t}),a=sF({inputs:{x:o},backend:t,attrs:{dtype:s}});return t.disposeIntermediateTensorInfo(o),a}if(!bY(i.dtype,s)){const o=Nc({inputs:{x:i},backend:t});return{dataId:o.dataId,shape:o.shape,dtype:s}}if(t.shouldExecuteOnCPU([i])){const o=t.texData.get(i.dataId).values,[a,l,c]=OLe(o,i.shape,i.dtype,s);return t.makeTensorInfo(a,l,c)}if(s==="int32")return k4e(i,t);if(s==="bool"){const o=t.makeTensorInfo([],"bool",la("bool",1)),l=ire({inputs:{a:i,b:o},backend:t});return t.disposeIntermediateTensorInfo(o),l}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${s}`)}const O4e={kernelName:qC,backendName:"webgl",kernelFunc:sF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t9="return ceil(x);",B4e=ti({opSnippet:t9,packedOpSnippet:t9,cpuKernelImpl:BLe}),$4e={kernelName:KC,backendName:"webgl",kernelFunc:B4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L4e{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F4e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P4e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{clipValueMin:s,clipValueMax:o}=r;let a;it().getBool("WEBGL_PACK_CLIP")?a=new F4e(i.shape):a=new L4e(i.shape);const l=[[s],[o]];return t.runWebGLProgram(a,[i],i.dtype,l)}const U4e={kernelName:YC,backendName:"webgl",kernelFunc:P4e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class z4e{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n9(n,e){return{dataId:e.dataId,dtype:e.dtype,shape:n.shape}}function H4e(n){const{inputs:e,backend:t}=n,{x:r}=e,i=t.texData.get(r.dataId),s=new z4e(r.shape),o=[n9(r,i.complexTensorInfos.real),n9(r,i.complexTensorInfos.imag)];return t.runWebGLProgram(s,o,o[0].dtype)}const V4e={kernelName:KI,backendName:"webgl",kernelFunc:H4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class G4e{constructor(e){this.outputShape=[],this.outputShape=yf(e,1),this.variableNames=e.map((o,a)=>`T${a}`);const t=new Array(e.length-1);t[0]=e[0][1];for(let o=1;o<t.length;o++)t[o]=t[o-1]+e[o][1];const r=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<t.length;o++){const a=t[o-1];r.push(`else if (yC < ${t[o]}) setOutput(getT${o}(yR, yC-${a}));`)}const i=t.length,s=t[t.length-1];r.push(`else setOutput(getT${i}(yR, yC-${s}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class W4e{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=yf(e,t);const r=this.outputShape,i=r.length,s=Fi(i),o=tl("coords",i),a=["x","y","z","w","u","v"].slice(0,i);this.variableNames=e.map((v,b)=>`T${b}`);const l=new Array(e.length-1);l[0]=e[0][t];for(let v=1;v<l.length;v++)l[v]=l[v-1]+e[v][t];const c=a[t],u=a.slice(-2),d=a.join();let f=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${u.join()}));
        }`;for(let v=1;v<l.length;v++){const b=l[v-1];f+=`
        if (${c} < ${l[v]}  && ${c} >= ${l[v-1]}) {
          return getChannel(
            getT${v}(${KT(a,c,b)}),
            vec2(${KT(u,c,b)}));
        }`}const p=l.length,g=l[l.length-1];f+=`
        return getChannel(
          getT${p}(${KT(a,c,g)}),
          vec2(${KT(u,c,g)}));`,this.userCode=`
      float getValue(${a.map(v=>"int "+v)}) {
        ${f}
      }

      void main() {
        ${s} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[i-1]} = ${o[i-1]} + 1;
        if (${o[i-1]} < ${r[i-1]}) {
          result.g = getValue(${o});
        }

        ${o[i-2]} = ${o[i-2]} + 1;
        if (${o[i-2]} < ${r[i-2]}) {
          result.a = getValue(${o});
        }

        ${o[i-1]} = ${o[i-1]} - 1;
        if (${o[i-2]} < ${r[i-2]} &&
            ${o[i-1]} < ${r[i-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function KT(n,e,t){const r=n.indexOf(e);return n.map((s,o)=>o===r?`${s} - ${t}`:s).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D3(n){const{inputs:e,backend:t}=n,{input:r}=e,i=t.texData.get(r.dataId);return Nc({inputs:{x:i.complexTensorInfos.imag},backend:t})}const j4e={kernelName:z4,backendName:"webgl",kernelFunc:D3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l_(n,e,t){const r=n[0].dtype;if(r==="complex64"){const p=n.map(_=>s2({inputs:{input:_},backend:t})),g=n.map(_=>D3({inputs:{input:_},backend:t})),v=l_(p,e,t),b=l_(g,e,t),x=n0({inputs:{real:v,imag:b},backend:t});return p.forEach(_=>t.disposeIntermediateTensorInfo(_)),g.forEach(_=>t.disposeIntermediateTensorInfo(_)),t.disposeIntermediateTensorInfo(v),t.disposeIntermediateTensorInfo(b),x}let i=t.shouldExecuteOnCPU(n);if(r==="string"&&(i=!0),i){const p=n.map(C=>{const R=[-1,xt(C.shape.slice(e))];return sn({inputs:{x:C},backend:t,attrs:{shape:R}})}),g=p.map(C=>({vals:t.readSync(C.dataId),shape:C.shape})),v=yf(p.map(C=>C.shape),1),b=p[0].shape[0]===1,x=$Le(g,v,r,b),_=yf(n.map(C=>C.shape),e),E=t.makeTensorInfo(_,r,x);return p.forEach(C=>t.disposeIntermediateTensorInfo(C)),E}const s=n.filter(p=>xt(p.shape)>0),o=it().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&s[0].shape.length>1;if(s.length===1){const p=o?new ff(n[0].shape,sg):new fg(n[0].shape,sg);return t.runWebGLProgram(p,n,r)}const a=it().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(s.length>a){const p=[];for(let v=0;v<s.length;v+=a){const b=s.slice(v,v+a);p.push(l_(b,e,t))}const g=l_(p,e,t);for(const v of p)t.disposeIntermediateTensorInfo(v);return g}if(o){const p=new W4e(s.map(g=>g.shape),e);return t.runWebGLProgram(p,s,r)}const{tensors2D:l,outShape:c}=X4e(s,e,t),u=new G4e(l.map(p=>p.shape)),d=t.runWebGLProgram(u,l,r);l.forEach(p=>t.disposeIntermediateTensorInfo(p));const f=sn({inputs:{x:d},attrs:{shape:c},backend:t});return t.disposeIntermediateTensorInfo(d),f}function X4e(n,e,t){const r=yf(n.map(s=>s.shape),e);return{tensors2D:n.map(s=>sn({inputs:{x:s},attrs:{shape:[-1,xt(s.shape.slice(e))]},backend:t})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sre(n){const{inputs:e,backend:t,attrs:r}=n,{axis:i}=r,s=Ir(i,e[0].shape)[0],o=e.map(c=>c.shape);yz(o,s);const a=yf(e.map(c=>c.shape),s);if(xt(a)===0)return t.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(c=>xt(c.shape)>0);return l.length===1?Nc({inputs:{x:l[0]},backend:t}):l_(l,s,t)}const q4e={kernelName:YI,backendName:"webgl",kernelFunc:sre};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ore{constructor(e,t=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,d=e.dilationWidth,f=e.filterHeight,p=e.filterWidth,g=Math.floor(e.inChannels/4)*4,v=e.inChannels%4,b=e.dataFormat==="channelsLast",x=b?1:2,_=b?2:3,E=b?3:1;let C="",M="";r&&(i?C=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?C=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:C=`
          float activation(float x) {
            ${r}
          }
        `,M="result = activation(result);");const R=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${C}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${E}];

        ivec2 xRCCorner =
            ivec2(coords[${x}], coords[${_}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${f}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${p}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${g}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${b}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${v===1}) {

              if (${b}) {
                dotProd +=
                    getX(batch, xR, xC, ${g}) *
                    getW(wR, wC, ${g}, d2);
              } else {
                dotProd +=
                    getX(batch, ${g}, xR, xC) *
                    getW(wR, wC, ${g}, d2);
              }

            } else if (${v===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2)
              );

              if (${b}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${v===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2),
                getW(wR, wC, ${g} + 2, d2)
              );

              if (${b}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1),
                  getX(batch, xR, xC, ${g} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC),
                  getX(batch, ${g} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${R}
        ${M}
        setOutput(result);
      }
    `}}class K4e{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,r=e.padInfo.top,i=e.padInfo.left,s=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.filterDepth,f=e.filterHeight,p=e.filterWidth,g=Math.floor(e.inChannels/4)*4,v=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${s}, ${o}, ${a});
      const ivec3 pads = ivec3(${t}, ${r}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${g}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${v===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${g}) *
                  getW(wF, wR, wC, ${g}, d2);
              } else if (${v===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${v===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1),
                  getX(batch, xF, xR, xC, ${g} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2),
                  getW(wF, wR, wC, ${g} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class are{constructor(e,t=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=$a(this.outputShape.length);const o=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,d=u;let f=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<u;b++)f+=`
           vec4 xTexelC${b*2};
           int xTexelC${b*2}Ready;
           vec4 xTexelC${b*2+1};
           int xTexelC${b*2+1}Ready;
           vec4 xC${b};`;f+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let b=0;b<u;b++)f+=`
           xTexelC${b*2} = vec4(0.0);
           xTexelC${b*2}Ready = 0;
           xTexelC${b*2+1} = vec4(0.0);
           xTexelC${b*2+1}Ready = 0;
           xC${b} = vec4(0.0);`;f+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let b=0;b<(d+1)/2;b++){const x=b*2;if(f+=`
           xC = xCCorner + ${x*l};
           `,a===1){if(x<u&&(o%2===1?(f+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                   xTexelC${x} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${x}.zw = vec2(0.0);
                   }
                   xTexelC${x}Ready = 1;
                 }
               `,l===1&&x>0?f+=`
                 xC${x} = vec4(xTexelC${x-2}.zw, xTexelC${x}.xy);
                 `:f+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${x} = vec4(previous.zw, xTexelC${x}.xy);
                   } else {
                     xC${x} = vec4(0.0, 0.0, xTexelC${x}.xy);
                   }
                   `):f+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                   xTexelC${x} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${x}.zw = vec2(0.0);
                   }
                   xTexelC${x}Ready = 1;
                 }

                 xC${x} = xTexelC${x};
                 `,x+1<u)){const _=o%2===0?p4(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(f+=`
                   xCOffset = xC + imod(pads[1], 2) + ${_};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                     xTexelC${x+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${x+1}.zw = vec2(0.0);
                     }
                     xTexelC${x+1}Ready = 1;
                   }
                   `,l>1?f+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${x+1} = vec4(previous.zw, xTexelC${x+1}.xy);
                     } else {
                      xC${x+1} = vec4(0.0, 0.0, xTexelC${x+1}.xy);
                     }
                     `:f+=`
                     xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.xy);
                     `):_===1?f+=`
                     xC${x+1} = xTexelC${x};
                     `:f+=`
                     xCOffset = xC + ${_};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                       xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${x+1}.zw = vec2(0.0);
                       }
                       xTexelC${x+1}Ready = 1;
                     }

                     xC${x+1} = xTexelC${x+1};
                     `}}else x<u&&(o%2===1?(f+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                   xTexelC${x} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${x}.zw = vec2(0.0);
                   }
                   xTexelC${x}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${x+1}Ready == 0) {
                   xTexelC${x+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${x+1}.zw = vec2(0.0);
                   }
                   xTexelC${x+1}Ready = 1;
                 }

                 xC${x} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
               `,x+1<u&&(f+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${x+1} = vec4(xTexelC${x+1}.xy, final.xy);
                 `)):(f+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                   xTexelC${x} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${x}.zw = vec2(0.0);
                   }
                   xTexelC${x}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                   xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${x+1}.zw = vec2(0.);
                   }
                   xTexelC${x+1}Ready = 1;
                 }

                 xC${x} = vec4(
                   xTexelC${x}.xy, xTexelC${x+1}.xy);
               `,x+1<u&&(f+=`
                   xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
                 `)));x<u&&(f+=`
             wTexel = getW(r, ${x}, d1, d2);
             dotProd += xC${x}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${x}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,x+1<u&&(f+=`
               wTexel = getW(r, ${x+1}, d1, d2);
               dotProd += xC${x+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${x+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}f+=`
     }
   `,f+=`
     }
   `,f+=`
     }
   `;let p="",g="";r&&(i?p=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:s?p=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:p=`vec4 activation(vec4 x) {
           ${r}
         }`,g="result = activation(result);");const v=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${p}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${f}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${v}
         ${g}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Y4e{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=$a(this.outputShape.length);const{dataFormat:r}=t,i=ll(),s=r==="channelsLast",o=s?1:2,a=s?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let u=0;u<=1;u++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${s}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${i.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dN(n,e){const t=n.length;return t>=3?e?[...n.slice(0,-3),n[t-3]*n[t-2],n[t-1]]:[...n.slice(0,-3),n[t-3],n[t-2]*n[t-1]]:!e&&t===1&&n[0]>1?[n[0],1]:null}function lre({x:n,filter:e,convInfo:t,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:a=null}){const l=n.shape,c=r.texData.get(n.dataId),u=t.inChannels,d=l[0]*l[1]*l[2],f=t.outChannels,p=t.dataFormat==="channelsLast",g=!1,v=!1;let b;const x=[];if(s!=null){const C=dN(s.shape,p);C!=null&&(s=sn({inputs:{x:s},backend:r,attrs:{shape:C}}),x.push(s))}if(i!=null){const C=dN(i.shape,p);C!=null&&(i=sn({inputs:{x:i},backend:r,attrs:{shape:C}}),x.push(i))}if(!((d===1||f===1)&&u>ere)&&c.isPacked&&p&&c.texture!=null&&l[2]%2!==0&&Vr(c.shape.slice(-3),l.slice(-3))){const C=l[0]*l[1]*(l[2]+1),M={dataId:n.dataId,shape:[1,C,t.inChannels],dtype:n.dtype},R=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,de(cN(c.shape,M.shape),()=>`packed reshape ${c.shape} to ${M.shape} isn't free`);const L=sn({inputs:{x:e},backend:r,attrs:{shape:[1,t.inChannels,t.outChannels]}});x.push(L);const B=uN({a:M,b:L,backend:r,transposeA:g,transposeB:v,bias:i,activation:a,preluActivationWeights:s,leakyreluAlpha:o}),N=r.texData.get(B.dataId);de(N.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=R,N.shape=t.outShape,b=Nc({inputs:{x:B},backend:r}),b.shape=t.outShape,x.push(B)}else{const C=t.outHeight*t.outWidth,M=sn({inputs:{x:n},backend:r,attrs:{shape:p?[t.batchSize,C,t.inChannels]:[t.batchSize,t.inChannels,C]}}),R=sn({inputs:{x:e},backend:r,attrs:{shape:[1,t.inChannels,t.outChannels]}}),L=uN({a:p?M:R,b:p?R:M,transposeA:!p,transposeB:v,backend:r,bias:i,activation:a,preluActivationWeights:s,leakyreluAlpha:o});b=sn({inputs:{x:L},backend:r,attrs:{shape:t.outShape}}),x.push(M),x.push(R),x.push(L)}for(const C of x)r.disposeIntermediateTensorInfo(C);return b}function cre({x:n,filter:e,convInfo:t,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:a=null}){const{filterWidth:l,filterHeight:c,inChannels:u,outWidth:d,outHeight:f,dataFormat:p}=t,g=p==="channelsLast",v=l*c*u,b=f*d,x=[t.batchSize,v,b],_=!0,E=!1,C=[];if(s!=null){const Q=dN(s.shape,g);Q!=null&&(s=sn({inputs:{x:s},backend:r,attrs:{shape:Q}}),C.push(s))}if(i!=null){const Q=dN(i.shape,g);Q!=null&&(i=sn({inputs:{x:i},backend:r,attrs:{shape:Q}}),C.push(i))}const M=sn({inputs:{x:e},backend:r,attrs:{shape:[1,v,xt(e.shape)/v]}});C.push(M);const R=new Y4e(x,t),L=[n.shape,[t.padInfo.top,t.padInfo.left],[t.strideHeight,t.strideWidth],[t.dilationHeight,t.dilationWidth],[t.inChannels],[t.filterWidth*t.inChannels],[t.outWidth]],B=r.runWebGLProgram(R,[n],"float32",L),N=sn({inputs:{x:B},backend:r,attrs:{shape:x}});C.push(B),C.push(N);const I=i!=null,D=s!=null,P=a==="leakyrelu",G=a?aC(a,!0):null,W=new Qne(g?N.shape:M.shape,g?M.shape:N.shape,g?[t.batchSize,b,t.outChannels]:[t.batchSize,t.outChannels,b],_,E,I,G,D,P),q=g?[N,M]:[M,N];if(i&&q.push(i),D&&q.push(s),P){const Q=r.makeTensorInfo([],"float32",jg(o,"float32"));q.push(Q),C.push(Q)}const z=r.runWebGLProgram(W,q,"float32"),J=sn({inputs:{x:z},backend:r,attrs:{shape:t.outShape}});C.push(z);for(const Q of C)r.disposeIntermediateTensorInfo(Q);return J}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J4e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:s}=e,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r,d=rm(l),f=jo(i.shape,s.shape,o,c,a,u,!1,d);let p;if(f.filterHeight===1&&f.filterWidth===1&&f.dilationHeight===1&&f.dilationWidth===1&&f.strideHeight===1&&f.strideWidth===1&&(f.padInfo.type==="SAME"||f.padInfo.type==="VALID"))p=lre({x:i,filter:s,convInfo:f,backend:t});else if(f.strideWidth<=2&&d==="channelsLast"&&it().getBool("WEBGL_EXP_CONV")){const v=new are(f),b=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];p=t.runWebGLProgram(v,[i,s],"float32",b)}else if(it().getBool("WEBGL_CONV_IM2COL"))p=cre({x:i,filter:s,convInfo:f,backend:t});else{const v=new ore(f);p=t.runWebGLProgram(v,[i,s],"float32")}const g=sn({inputs:{x:p},backend:t,attrs:{shape:f.outShape}});return t.disposeIntermediateTensorInfo(p),g}const Z4e={kernelName:JI,backendName:"webgl",kernelFunc:J4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q4e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,s=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class eUe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,o=e.dataFormat==="channelsLast",a=t-1-e.padInfo.top,l=r-1-e.padInfo.left,c=o?1:2,u=o?2:3,d=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class tUe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,r=e.strideHeight,i=e.strideWidth,s=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${t} - ${s};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class nUe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,r=e.filterHeight,i=e.filterWidth,s=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=t-1-e.padInfo.front,c=r-1-e.padInfo.top,u=i-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${t}; wF++) {
          float dyF = float(dyFCorner + wF) / ${s}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${t} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rUe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,dy:s}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,d=rm(l),f=jo(i.shape,u,o,1,a,c,!1,d),p=new Q4e(f);return t.runWebGLProgram(p,[i,s],"float32")}const iUe={kernelName:C4,backendName:"webgl",kernelFunc:rUe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sUe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=$a(this.outputShape.length);const t=e.filterHeight,r=e.filterWidth,i=t-1-e.padInfo.top,s=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oUe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,filter:s}=e,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r,d=rm(c),f=jo(o,s.shape,a,1,l,u,!1,d);if(it().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const p=[[f.strideHeight,f.strideWidth]],g=new sUe(f);return t.runWebGLProgram(g,[i,s],"float32",p)}else{const p=new eUe(f);return t.runWebGLProgram(p,[i,s],"float32")}}const aUe={kernelName:ZI,backendName:"webgl",kernelFunc:oUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lUe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l}=r,c=Kg(i.shape,s.shape,o,l,a),u=new K4e(c);return t.runWebGLProgram(u,[i,s],"float32")}const cUe={kernelName:QI,backendName:"webgl",kernelFunc:lUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uUe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,dy:s}=e,{strides:o,pad:a,filterShape:l}=r,c=Kg(i.shape,l,o,1,a),u=new tUe(c);return t.runWebGLProgram(u,[i,s],"float32")}const dUe={kernelName:E4,backendName:"webgl",kernelFunc:uUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hUe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,filter:s}=e,{pad:o,strides:a,inputShape:l}=r,c=Kg(l,s.shape,a,1,o),u=new nUe(c);return t.runWebGLProgram(u,[i,s],"float32")}const fUe={kernelName:A4,backendName:"webgl",kernelFunc:hUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pUe=nS+`
  return cos(x);
`,mUe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${zv}
  return result;
`,gUe=ti({opSnippet:pUe,packedOpSnippet:mUe}),yUe={kernelName:JC,backendName:"webgl",kernelFunc:gUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vUe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,bUe=ti({opSnippet:vUe}),xUe={kernelName:ZC,backendName:"webgl",kernelFunc:bUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SUe{constructor(e,t,r,i,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,l,c]=e,[u]=t,[d,f]=r;this.outputShape=[u,d,f,c];const p=i==="bilinear"?1:0,[g,v]=[`${a-1}.0`,`${l-1}.0`],[b,x,_]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${g} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${g}`],[E,C,M]=f>1?[`${(l-1)/(f-1)}`,"(x2-x1) * width_ratio",`x1*${v} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${v}`];this.userCode=`
      const float height_ratio = float(${b});
      const float width_ratio = float(${E});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${x};
        float width_scale = ${C};

        float in_y = ${_};
        if( in_y < 0.0 || in_y > ${g} ) {
          setOutput(float(${s}));
          return;
        }
        float in_x = ${M};
        if( in_x < 0.0 || in_x > ${v} ) {
          setOutput(float(${s}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${p} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wUe=n=>{const{inputs:e,backend:t,attrs:r}=n,{image:i,boxes:s,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:c}=r,u=new SUe(i.shape,s.shape,a,l,c);return t.runWebGLProgram(u,[i,s,o],"float32")},_Ue={kernelName:M4,backendName:"webgl",kernelFunc:wUe};var cC;(function(n){n.Prod="*",n.Sum="+"})(cC||(cC={}));class r9{constructor(e,t,r,i){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const s=this.outputShape.length,o=this.op===cC.Prod?"1.0":"0.0",a=r?o:`getX(${i9(s,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",u="";r?(c=i?`end != ${l-1}`:"end != 0",u=i?"end + 1":"end - 1"):(c=i?`end + pow2 < ${l}`:"end >= pow2",u=i?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Fi(s)} coords = getOutputCoords();
        int end = ${s9(s,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${s9(s,"coords",this.op)} = idx;
          val ${this.op}= getX(${i9(s,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function i9(n,e,t){if(n===1)return`${e}`;if(n===2)return`${e}.x, ${e}.y`;if(n===3)return`${e}.x, ${e}.y, ${e}.z`;if(n===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${t} for rank ${n} is not yet supported`)}function s9(n,e,t){if(n===1)return`${e}`;if(n===2)return`${e}.y`;if(n===3)return`${e}.z`;if(n===4)return`${e}.w`;throw new Error(`Cumulative ${t} for rank ${n} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ure(n,e,t,r,i,s){const o=e.shape.length,a=Cs([r],o);let l=e;a!=null&&(l=sl({inputs:{x:e},backend:t,attrs:{perm:a}}));const c=Zs(1,o)[0];if(c!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const u=l.shape[c];let d=Nc({inputs:{x:l},backend:t});for(let f=0;f<=Math.ceil(Math.log2(u))-1;f++){const p=new r9(n,l.shape,!1,s),g=[[f]],v=d;d=t.runWebGLProgram(p,[d],d.dtype,g),t.disposeIntermediateTensorInfo(v)}if(i){const f=new r9(n,l.shape,i,s),p=d;d=t.runWebGLProgram(f,[d],d.dtype),t.disposeIntermediateTensorInfo(p)}if(a!=null){const f=Yg(a),p=sl({inputs:{x:d},backend:t,attrs:{perm:f}});return t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(l),p}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CUe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;return ure(cC.Prod,i,t,s,o,a)}const EUe={kernelName:T4,backendName:"webgl",kernelFunc:CUe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AUe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;return ure(cC.Sum,i,t,s,o,a)}const TUe={kernelName:eD,backendName:"webgl",kernelFunc:AUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MUe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,weights:s}=e,{size:o,binaryOutput:a}=r;if(i.shape.length===1){const l=t.readSync(i.dataId),c=t.readSync(s.dataId),u=Gne(l,c,s.dtype,s.shape,o);return t.makeTensorInfo([o],s.dtype,u)}else if(i.shape.length===2){const l=t.bufferSync(i),c=t.bufferSync(s),u=DLe(l,c,o,a);return t.makeTensorInfo(u.shape,s.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const RUe={kernelName:R4,backendName:"webgl",kernelFunc:MUe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NUe{constructor(e,t,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${t};
      int offset_h = imod(h, ${t});
      int in_w = w / ${t};
      int offset_w = imod(w, ${t});
      int offset_d = (offset_h * ${t} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IUe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{blockSize:s,dataFormat:o}=r,a=i.shape[0],l=o==="NHWC"?i.shape[1]:i.shape[2],c=o==="NHWC"?i.shape[2]:i.shape[3],u=o==="NHWC"?i.shape[3]:i.shape[1],d=l*s,f=c*s,p=u/(s*s),g=o==="NHWC"?[a,d,f,p]:[a,p,d,f],v=new NUe(g,s,o);return t.runWebGLProgram(v,[i],i.dtype)}const DUe={kernelName:N4,backendName:"webgl",kernelFunc:IUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dre{constructor(e,t=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=$a(this.outputShape.length);const o=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let c="",u="";r&&(i?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,u="result = activation(result);");const d=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hre{constructor(e,t=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=$a(this.outputShape.length);const o=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,d=e.filterWidth,f=d;let p=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let x=0;x<d;x++)p+=`
          vec4 xTexelC${x*2};
          int xTexelC${x*2}Ready;
          vec4 xTexelC${x*2+1};
          int xTexelC${x*2+1}Ready;
          vec4 xC${x};`;p+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let x=0;x<d;x++)p+=`
          xTexelC${x*2} = vec4(0.0);
          xTexelC${x*2}Ready = 0;
          xTexelC${x*2+1} = vec4(0.0);
          xTexelC${x*2+1}Ready = 0;
          xC${x} = vec4(0.0);`;p+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let x=0;x<(f+1)/2;x++){const _=x*2;if(p+=`
          xC = xCCorner + ${_*c};
          `,l===1){if(_<d&&(a%2===1?(p+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${_}Ready == 0) {
                  xTexelC${_} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${_}.zw = vec2(0.0);
                  }
                  xTexelC${_}Ready = 1;
                }
              `,c===1&&_>0?p+=`
                xC${_} = vec4(xTexelC${_-2}.zw, xTexelC${_}.xy);
                `:p+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${_} = vec4(previous.zw, xTexelC${_}.xy);
                  } else {
                    xC${_} = vec4(0.0, 0.0, xTexelC${_}.xy);
                  }
                  `):p+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${_}Ready == 0) {
                  xTexelC${_} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${_}.zw = vec2(0.0);
                  }
                  xTexelC${_}Ready = 1;
                }

                xC${_} = xTexelC${_};
                `,_+1<d)){const E=a%2===0?p4(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(p+=`
                  xCOffset = xC + imod(pads[1], 2) + ${E};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${_+1}Ready == 0) {
                    xTexelC${_+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${_+1}.zw = vec2(0.0);
                    }
                    xTexelC${_+1}Ready = 1;
                  }
                  `,c>1?p+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${_+1} = vec4(previous.zw, xTexelC${_+1}.xy);
                    } else {
                     xC${_+1} = vec4(0.0, 0.0, xTexelC${_+1}.xy);
                    }
                    `:p+=`
                    xC${_+1} = vec4(xTexelC${_}.zw, xTexelC${_+1}.xy);
                    `):E===1?p+=`
                    xC${_+1} = xTexelC${_};
                    `:p+=`
                    xCOffset = xC + ${E};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${_+1}Ready == 0) {
                      xTexelC${_+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${_+1}.zw = vec2(0.0);
                      }
                      xTexelC${_+1}Ready = 1;
                    }

                    xC${_+1} = xTexelC${_+1};
                    `}}else _<d&&(a%2===1?(p+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${_}Ready == 0) {
                  xTexelC${_} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${_}.zw = vec2(0.0);
                  }
                  xTexelC${_}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${_+1}Ready == 0) {
                  xTexelC${_+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${_+1}.zw = vec2(0.0);
                  }
                  xTexelC${_+1}Ready = 1;
                }

                xC${_} = vec4(xTexelC${_}.zw, xTexelC${_+1}.zw);
              `,_+1<d&&(p+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${_+1} = vec4(xTexelC${_+1}.xy, final.xy);
                `)):(p+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${_}Ready == 0) {
                  xTexelC${_} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${_}.zw = vec2(0.0);
                  }
                  xTexelC${_}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${_+1}Ready == 0) {
                  xTexelC${_+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${_+1}.zw = vec2(0.);
                  }
                  xTexelC${_+1}Ready = 1;
                }

                xC${_} = vec4(
                  xTexelC${_}.xy, xTexelC${_+1}.xy);
              `,_+1<d&&(p+=`
                  xC${_+1} = vec4(xTexelC${_}.zw, xTexelC${_+1}.zw);
                `)));_<d&&(p+=`
            wTexel = getW(r, ${_}, d1, q);
            dotProd += xC${_} * vec4(wTexel.xz, wTexel.xz);
          `,_+1<d&&(p+=`
              wTexel = getW(r, ${_+1}, d1, q);
              dotProd += xC${_+1} * vec4(wTexel.xz, wTexel.xz);
            `))}p+=`
    }
  `,p+=`
      }
    `;let g="",v="";r&&(i?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:g=`vec4 activation(vec4 x) {
          ${r}
        }`,v="result = activation(result);");const b=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${g}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${p}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${b}
        ${v}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kUe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=r;let u=l;u==null&&(u=[1,1]),de(ua(o,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const d=jo(i.shape,s.shape,o,u,a,c,!0);let f;it().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?f=new hre(d):f=new dre(d);const p=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return t.runWebGLProgram(f,[i,s],"float32",p)}const OUe={kernelName:tD,backendName:"webgl",kernelFunc:kUe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BUe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,s=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class $Ue{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,o=t-1-e.padInfo.top,a=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LUe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,dy:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r,d=jo(i.shape,u,o,a,l,c,!0),f=new BUe(d);return t.runWebGLProgram(f,[i,s],"float32")}const FUe={kernelName:I4,backendName:"webgl",kernelFunc:LUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PUe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,filter:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r,d=jo(u,s.shape,o,a,l,c,!0),f=new $Ue(d);return t.runWebGLProgram(f,[i,s],"float32")}const UUe={kernelName:D4,backendName:"webgl",kernelFunc:PUe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zUe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HUe(n){const{inputs:e,backend:t}=n,{x:r}=e,i=[...r.shape,...r.shape],s=xt(r.shape),o=sn({inputs:{x:r},backend:t,attrs:{shape:[s]}}),a=new zUe(s),l=t.runWebGLProgram(a,[o],o.dtype),c=sn({inputs:{x:l},backend:t,attrs:{shape:i}});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(l),c}const VUe={kernelName:k4,backendName:"webgl",kernelFunc:HUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GUe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:r,padInfo:i,strideHeight:s,strideWidth:o,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:u}=e,{top:d,left:f}=i;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${o});
      const ivec2 pads = ivec2(${d}, ${f});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${t}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WUe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l}=r,c=LE(i.shape,s.shape,o,a,"NHWC",l);let u;const d=new GUe(c);u=t.runWebGLProgram(d,[i,s],"float32");const f=sn({inputs:{x:u},backend:t,attrs:{shape:c.outShape}});return t.disposeIntermediateTensorInfo(u),f}const jUe={kernelName:nD,backendName:"webgl",kernelFunc:WUe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XUe(n){const{inputs:e,backend:t,attrs:r}=n,{equation:i}=r,s=e,{allDims:o,summedDims:a,idDims:l}=Rz(i,s.length);Iz(o.length,l,s);const{path:c,steps:u}=Dz(a,l),d=u.length;let f=null,p=o.length;const g=[];for(let v=0;v<d;++v){for(const b of u[v]){const{permutationIndices:x,expandDims:_}=Nz(p,l[b]);let E;kz(x)?E=s[b]:(E=sl({inputs:{x:s[b]},backend:t,attrs:{perm:x}}),g.push(E));const C=E.shape.slice();for(let M=0;M<_.length;++M)C.splice(_[M],0,1);Vr(E.shape,C)||(E=sn({inputs:{x:E},backend:t,attrs:{shape:C}}),g.push(E)),f===null?f=E:(f=x5({inputs:{a:E,b:f},backend:t}),g.push(f))}v<d-1&&(c[v]>=0&&(f=I3({inputs:{x:f},backend:t,attrs:{axis:c[v]-(o.length-p),keepDims:!1}}),g.push(f)),p--)}for(const v of g)v!==f&&t.disposeIntermediateTensorInfo(v);return f}const qUe={kernelName:O4,backendName:"webgl",kernelFunc:XUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KUe="return (x >= 0.0) ? x : (exp(x) - 1.0);",YUe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,JUe=ti({opSnippet:KUe,packedOpSnippet:YUe}),ZUe={kernelName:eE,backendName:"webgl",kernelFunc:JUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QUe="return (b >= 0.0) ? a : a * (b + 1.0);",eze=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,tze=n=>{const{inputs:e,backend:t}=n,{dy:r,y:i}=e,s=it().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new tS(eze,r.shape,i.shape):new wv(QUe,r.shape,i.shape);return t.runWebGLProgram(s,[r,i],r.dtype)},nze={kernelName:B4,backendName:"webgl",kernelFunc:tze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rze=`
  return vec4(equal(a, b));
`,ize="return float(a == b);",sze=fa({opSnippet:ize,packedOpSnippet:rze,dtype:"bool",cpuKernelImpl:LLe}),oze={kernelName:rD,backendName:"webgl",kernelFunc:sze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aze=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${wz};
  float a1 = ${_z};
  float a2 = ${Cz};
  float a3 = ${Ez};
  float a4 = ${Az};
  float a5 = ${Tz};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,lze=ti({opSnippet:aze}),cze={kernelName:tE,backendName:"webgl",kernelFunc:lze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uze=nS+`
  return exp(x);
`,dze=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,fre=ti({opSnippet:uze,packedOpSnippet:dze,cpuKernelImpl:FLe,dtype:"float32"}),hze={kernelName:nE,backendName:"webgl",kernelFunc:fre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oF(n){const{inputs:e,attrs:t,backend:r}=n,{dim:i}=t,{input:s}=e,o=s.shape.length,a=s.shape.slice();let l=i;return i<0&&(de(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),a.splice(l,0,1),sn({inputs:{x:s},backend:r,attrs:{shape:a}})}const fze={kernelName:iD,backendName:"webgl",kernelFunc:oF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o9="return exp(x) - 1.0;",pze=ti({opSnippet:o9,packedOpSnippet:o9,cpuKernelImpl:PLe}),mze={kernelName:rE,backendName:"webgl",kernelFunc:pze};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a9{constructor(e,t,r){this.variableNames=["real","imag"];const i=t[1];this.outputShape=t;const s=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${i}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${s};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pre(n,e,t){const r=t.texData.get(n.dataId),i=xt(n.shape),s=n.shape[n.shape.length-1],o=i/s,a=sn({inputs:{x:n},backend:t,attrs:{shape:[o,s]}}),l=a.shape,c=new a9("real",l,e),u=new a9("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],f=t.runWebGLProgram(c,d,"float32"),p=t.runWebGLProgram(u,d,"float32"),g=n0({inputs:{real:f,imag:p},backend:t});t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(p);const v=sn({inputs:{x:g},backend:t,attrs:{shape:n.shape}});return t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(g),v}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gze(n){const{inputs:e,backend:t}=n,{input:r}=e;return pre(r,!1,t)}const yze={kernelName:$4,backendName:"webgl",kernelFunc:gze};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vze{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o2(n){const{backend:e,attrs:t}=n,{shape:r,value:i}=t;let{dtype:s}=t;if(s=s||z1(i),s==="string"){const o=qs(s,xt(r));return o.fill(i),e.makeTensorInfo(r,s,o)}else{const o=new vze(r,i),a=[[i]];return e.runWebGLProgram(o,[],s,a)}}const bze={kernelName:L4,backendName:"webgl",kernelFunc:o2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xze{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${t} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${t}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sze={kernelName:F4,backendName:"webgl",kernelFunc:({inputs:n,backend:e})=>{const{image:t}=n,r=e,i=new xze(t.shape);return r.runWebGLProgram(i,[t],t.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l9="return floor(x);",wze=ti({opSnippet:l9,packedOpSnippet:l9,cpuKernelImpl:ULe}),_ze={kernelName:iE,backendName:"webgl",kernelFunc:wze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cze=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,Eze=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,Aze=fa({opSnippet:Cze,packedOpSnippet:Eze,dtype:"int32"}),Tze={kernelName:sE,backendName:"webgl",kernelFunc:Aze};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mze{constructor(e){this.variableNames=["A"];const t=ll(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${r}.0);

        vec4 values = ${t.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rze{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=ll(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${r}.0);
            vec4 values = ${t.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${t.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nze={kernelName:pL,backendName:"webgl",kernelFunc:Ize};let fx,yB=it().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function Ize(n){const{inputs:e,backend:t,attrs:r}=n;let{pixels:i}=e;const{numChannels:s}=r,o=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[l,c]=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],u=[c,l],d=[c,l,s];if(a||o){const v=it().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(fx==null||v!==yB)&&(yB=v,fx=document.createElement("canvas").getContext("2d",{willReadFrequently:yB})),fx.canvas.width=l,fx.canvas.height=c,fx.drawImage(i,0,0,l,c),i=fx.canvas}const f=t.makeTensorInfo(u,"int32");t.texData.get(f.dataId).usage=ru.PIXELS,t.gpgpu.uploadPixelDataToTexture(t.getTexture(f.dataId),i);const p=it().getBool("WEBGL_PACK")?new Rze(d):new Mze(d),g=t.runWebGLProgram(p,[f],"int32");return t.disposeData(f.dataId),g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dze(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f,activation:p,leakyreluAlpha:g}=r,v=rm(u),b=jo(i.shape,s.shape,l,d,c,f,!1,v);let x;const _=[],E=o!=null,C=a!=null,M=p==="leakyrelu",R=()=>{const B=[i,s],N=(I,D)=>{if(D==="NCHW"&&I.shape.length===1&&I.shape[0]!==1){const P=sn({inputs:{x:I},backend:t,attrs:{shape:[I.shape[0],1,1]}});return _.push(P),P}return I};if(E&&B.push(N(o,u)),C&&B.push(N(a,u)),M){const I=t.makeTensorInfo([],"float32",jg(g,"float32"));B.push(I),_.push(I)}return B};if(b.filterHeight===1&&b.filterWidth===1&&b.dilationHeight===1&&b.dilationWidth===1&&b.strideHeight===1&&b.strideWidth===1&&(b.padInfo.type==="SAME"||b.padInfo.type==="VALID"))x=lre({x:i,filter:s,convInfo:b,backend:t,bias:o,activation:p,preluActivationWeights:a,leakyreluAlpha:g});else if(b.strideWidth<=2&&v==="channelsLast"&&it().getBool("WEBGL_EXP_CONV")){const B=p?aC(p,!0):null,N=new are(b,E,B,C,M),I=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],D=R();x=t.runWebGLProgram(N,D,"float32",I)}else if(it().getBool("WEBGL_CONV_IM2COL"))x=cre({x:i,filter:s,convInfo:b,backend:t,bias:o,activation:p,preluActivationWeights:a,leakyreluAlpha:g});else{const B=p?aC(p,!1):null,N=new ore(b,E,B,C,M),I=R();x=t.runWebGLProgram(N,I,"float32")}const L=sn({inputs:{x},backend:t,attrs:{shape:b.outShape}});return _.push(x),_.forEach(B=>t.disposeIntermediateTensorInfo(B)),L}const kze={kernelName:UR,backendName:"webgl",kernelFunc:Dze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oze(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:f,leakyreluAlpha:p}=r,g=[];let v=u;v==null&&(v=[1,1]),de(ua(l,v),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${v}'`);const b=jo(i.shape,s.shape,l,v,c,d,!0),x=it().getBool("WEBGL_PACK_DEPTHWISECONV")&&b.strideWidth<=2&&b.outChannels/b.inChannels===1,_=f?aC(f,x):null,E=[i,s],C=o!=null,M=a!=null,R=f==="leakyrelu";if(C&&E.push(o),M&&E.push(a),R){const I=t.makeTensorInfo([],"float32",jg(p,"float32"));E.push(I),g.push(I)}let L;x?L=new hre(b,C,_,M,R):L=new dre(b,C,_,M,R);const B=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],N=t.runWebGLProgram(L,E,"float32",B);return g.forEach(I=>t.disposeIntermediateTensorInfo(I)),N}const Bze={kernelName:zR,backendName:"webgl",kernelFunc:Oze};class $ze{constructor(e,t,r,i){this.sliceDim=e,this.strides=t,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=r;const s=Fi(r.length);let o=`
    int index;`;for(let a=0;a<this.sliceDim;a++)o+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${s} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lze(n){const{inputs:e,backend:t}=n,{params:r,indices:i}=e,s=i.shape,o=s[s.length-1],a=xt(r.shape),[l,c,u,d]=dz(r,i),f=sn({inputs:{x:i},backend:t,attrs:{shape:[c,o]}}),p=sn({inputs:{x:r},backend:t,attrs:{shape:[xt(r.shape)/u,u]}});if(t.shouldExecuteOnCPU([r,i])||r.dtype==="string"){const x=t.readSync(i.dataId),_=t.bufferSync(r),E=zLe(x,_,r.dtype,c,o,u,d,r.shape,a);return t.makeTensorInfo(l,r.dtype,E.values)}const g=new $ze(o,d,[c,u],r.shape),v=t.runWebGLProgram(g,[p,f],p.dtype),b=sn({inputs:{x:v},backend:t,attrs:{shape:l}});return t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(v),b}const Fze={kernelName:P4,backendName:"webgl",kernelFunc:Lze};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pze{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const r=Fi(this.rank),i=Uze(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${i}));
      }
    `}}function Uze(n,e){const t=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<n.length;i++)i===2?r.push("index"):r.push(`${t[i]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mre(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,indices:s}=e,{axis:o,batchDims:a}=r,l=Ir(o,i.shape)[0];if(it().get("DEBUG")){const _=t.readSync(s.dataId),E=i.shape[l];for(let C=0;C<_.length;++C){const M=_[C];de(M<=E-1&&M>=0,()=>`GatherV2: the index value ${M} is not in [0, ${E-1}]`)}}const c=Bz(i,s,l,a),u=xt(s.shape),d=[],f=sn({inputs:{x:i},backend:t,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),p=sn({inputs:{x:s},backend:t,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(f),d.push(p);const g=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(t.shouldExecuteOnCPU([i,s])||i.dtype==="string"){const _=t.bufferSync(p),E=t.bufferSync(f),C=HLe(E,_,g);return d.forEach(M=>t.disposeIntermediateTensorInfo(M)),t.makeTensorInfo(c.outputShape,C.dtype,C.values)}const v=new Pze(f.shape,g),b=t.runWebGLProgram(v,[f,p],f.dtype);d.push(b);const x=sn({inputs:{x:b},backend:t,attrs:{shape:c.outputShape}});return d.forEach(_=>t.disposeIntermediateTensorInfo(_)),x}const zze={kernelName:oD,backendName:"webgl",kernelFunc:mre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hze="return float(a > b);",Vze=`
  return vec4(greaterThan(a, b));
`,Gze=fa({opSnippet:Hze,packedOpSnippet:Vze,cpuKernelImpl:VLe,dtype:"bool"}),Wze={kernelName:aD,backendName:"webgl",kernelFunc:Gze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jze="return float(a >= b);",Xze=`
  return vec4(greaterThanEqual(a, b));
`,qze=fa({opSnippet:jze,packedOpSnippet:Xze,dtype:"bool",cpuKernelImpl:GLe}),Kze={kernelName:oE,backendName:"webgl",kernelFunc:qze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yze(n){const{inputs:e,backend:t}=n,{input:r}=e;return pre(r,!0,t)}const Jze={kernelName:U4,backendName:"webgl",kernelFunc:Yze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zze="return float(!isnan(x) && !isinf(x));",Qze=ti({opSnippet:Zze,dtype:"bool"}),e5e={kernelName:lE,backendName:"webgl",kernelFunc:Qze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t5e="return float(isinf(x));",n5e=ti({opSnippet:t5e,dtype:"bool"}),r5e={kernelName:cE,backendName:"webgl",kernelFunc:n5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i5e="return float(isnan(x));",s5e=ti({opSnippet:i5e,dtype:"bool"}),o5e={kernelName:uE,backendName:"webgl",kernelFunc:s5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a5e="return float(a < b);",l5e=`
  return vec4(lessThan(a, b));
`,c5e=fa({opSnippet:a5e,packedOpSnippet:l5e,cpuKernelImpl:WLe,dtype:"bool"}),u5e={kernelName:cD,backendName:"webgl",kernelFunc:c5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d5e="return float(a <= b);",h5e=`
  return vec4(lessThanEqual(a, b));
`,f5e=fa({opSnippet:d5e,packedOpSnippet:h5e,cpuKernelImpl:jLe,dtype:"bool"}),p5e={kernelName:uD,backendName:"webgl",kernelFunc:f5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m5e(n){const{backend:e,attrs:t}=n,{start:r,stop:i,num:s}=t,o=XLe(r,i,s);return e.makeTensorInfo([o.length],"float32",o)}const g5e={kernelName:H4,backendName:"webgl",kernelFunc:m5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y5e=nS+`
  return x < 0.0 ? 0./0. : log(x);
`,v5e=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,b5e=ti({opSnippet:y5e,packedOpSnippet:v5e,cpuKernelImpl:qLe}),x5e={kernelName:dE,backendName:"webgl",kernelFunc:b5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S5e=nS+`
  return log(1.0 + x);
`,w5e=ti({opSnippet:S5e}),_5e={kernelName:hE,backendName:"webgl",kernelFunc:w5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C5e="return float(a >= 1.0 && b >= 1.0);",E5e=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,A5e=fa({opSnippet:C5e,packedOpSnippet:E5e,dtype:"bool"}),T5e={kernelName:dD,backendName:"webgl",kernelFunc:A5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M5e="return float(!(x >= 1.0));",R5e=ti({opSnippet:M5e}),N5e={kernelName:hD,backendName:"webgl",kernelFunc:R5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I5e="return float(a >= 1.0 || b >= 1.0);",D5e=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,k5e=fa({opSnippet:I5e,packedOpSnippet:D5e,dtype:"bool"}),O5e={kernelName:fD,backendName:"webgl",kernelFunc:k5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class B5e{constructor(e,t,r,i,s){this.variableNames=["x"],this.outputShape=[];const o=t,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${c})`:s===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $5e{constructor(e,t,r,i,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=t,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${c})`:s===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L5e=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{depthRadius:s,bias:o,alpha:a,beta:l}=r,c=it().getBool("WEBGL_PACK_NORMALIZATION")?new $5e(i.shape,s,o,a,l):new B5e(i.shape,s,o,a,l);return t.runWebGLProgram(c,[i],i.dtype)},F5e={kernelName:pD,backendName:"webgl",kernelFunc:L5e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P5e{constructor(e,t,r,i,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=r,this.alpha=i,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${t})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${t} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${s})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${s});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U5e=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:i,y:s,dy:o}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=r,d=new P5e(i.shape,a,l,c,u);return t.runWebGLProgram(d,[i,s,o],i.dtype)},z5e={kernelName:V4,backendName:"webgl",kernelFunc:U5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H5e(n,e,t,r){const i=xt(e),o=xt(n.shape)/i,a=sn({inputs:{x:n},attrs:{shape:[o,i]},backend:r}),l=Hv(a,n.dtype,"max",r),c=sn({inputs:{x:l},attrs:{shape:t},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gre(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{reductionIndices:s,keepDims:o}=r,a=i.shape.length,l=Ir(s,i.shape);let c=l;const u=Cs(c,a),d=u!=null,f=t.shouldExecuteOnCPU([i]);let p=i;if(d){if(f){const E=t.texData.get(p.dataId).values,C=new Array(a);for(let L=0;L<C.length;L++)C[L]=i.shape[u[L]];const M=v5(E,i.shape,i.dtype,u,C);p=t.makeTensorInfo(C,i.dtype);const R=t.texData.get(p.dataId);R.values=M}else p=N3(i,u,t);c=Zs(c.length,a)}da("max",c,a);const[g,v]=Xo(p.shape,c);let b=g;o&&(b=Ks(g,l));let x;if(f){const E=t.texData.get(p.dataId).values,C=KLe(E,xt(v),b,i.dtype);x=t.makeTensorInfo(b,i.dtype);const M=t.texData.get(x.dataId);M.values=C}else x=H5e(p,v,b,t);return d&&t.disposeIntermediateTensorInfo(p),x}const V5e={kernelName:mD,backendName:"webgl",kernelFunc:gre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G5e=b5+`
  return max(a, b);
`,W5e=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+zv+`
  return result;
`,j5e=fa({opSnippet:G5e,packedOpSnippet:W5e,cpuKernelImpl:YLe}),X5e={kernelName:fE,backendName:"webgl",kernelFunc:j5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q5e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e;r2(i,"maxPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,c=1;de(ua(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=nd(i.shape,s,o,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&Vr(u.inShape,u.outShape))return Nc({inputs:{x:i},backend:t});const d=new lC(u,"max",!1);return t.runWebGLProgram(d,[i],i.dtype)}const K5e={kernelName:gD,backendName:"webgl",kernelFunc:q5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y5e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{filterSize:s,strides:o,pad:a,dataFormat:l,dimRoundingMode:c}=r,u=[1,1,1],d=nm(i.shape,s,o,u,a,c,l),f=new S5(d,"max",!1);return t.runWebGLProgram(f,[i],i.dtype)}const J5e={kernelName:yD,backendName:"webgl",kernelFunc:Y5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Z5e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,r=e.strideWidth,i=e.dilationHeight,s=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=s-1-e.padInfo.top,l=o-1-e.padInfo.left,c=s*o-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${t}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class Q5e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,r=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,d=l-1-e.padInfo.front,f=c-1-e.padInfo.top,p=u-1-e.padInfo.left,g=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${f}, ${p});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${t}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${g} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e6e(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,input:s}=e,o=s,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],f=nm(o.shape,a,l,d,c,u),p=new S5(f,"max",!0),g=t.runWebGLProgram(p,[o],o.dtype),v=new Q5e(f),b=t.runWebGLProgram(v,[i,g],o.dtype);return t.disposeIntermediateTensorInfo(g),b}const t6e={kernelName:W4,backendName:"webgl",kernelFunc:e6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n6e(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,input:s,output:o}=e,a=s;r2([s,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,f=nd(a.shape,l,c,1,u,d),p=!0,g=new lC(f,"max",p),v=t.runWebGLProgram(g,[a],a.dtype),b=new Z5e(f),x=t.runWebGLProgram(b,[i,v],a.dtype);return t.disposeIntermediateTensorInfo(v),x}const r6e={kernelName:G4,backendName:"webgl",kernelFunc:n6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i6e(n,e,t,r){let i=new lC(t,"max",!1);const s=r.runWebGLProgram(i,[n],"float32");i=new lC(t,"max",!0,!0,e);const o=r.runWebGLProgram(i,[n],"float32");return[s,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s6e={kernelName:j4,backendName:"webgl",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{x:r}=n,{filterSize:i,strides:s,pad:o,includeBatchInIndex:a}=e,l=t;de(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];de(ua(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const u=nd(r.shape,i,s,c,o),[d,f]=i6e(r,a,u,l);return[d,f]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o6e(n,e,t,r){const i=xt(e),o=xt(n.shape)/i,a=sn({inputs:{x:n},attrs:{shape:[o,i]},backend:r}),l=Hv(a,"float32","mean",r),c=sn({inputs:{x:l},attrs:{shape:t},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a6e={kernelName:vD,backendName:"webgl",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{x:r}=n,{keepDims:i,axis:s}=e,o=t,a=r.shape.length,l=Ir(s,r.shape);let c=l;const u=Cs(c,a),d=u!=null,f=o.shouldExecuteOnCPU([r]),p=[];let g=r;if(d){if(f){const C=o.texData.get(g.dataId).values,M=new Array(a);for(let B=0;B<M.length;B++)M[B]=r.shape[u[B]];const R=v5(C,r.shape,r.dtype,u,M);g=o.makeTensorInfo(M,r.dtype);const L=o.texData.get(g.dataId);L.values=R}else g=N3(r,u,o);p.push(g),c=Zs(c.length,a)}da("sum",c,a);const[v,b]=Xo(g.shape,c);let x=v;i&&(x=Ks(v,l));const _=o6e(g,b,x,o);for(const E of p)o.disposeIntermediateTensorInfo(E);return _}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l6e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=Ir(s,i.shape);let c=l;const u=Cs(c,a);let d=i;u!=null&&(d=sl({inputs:{x:i},backend:t,attrs:{perm:u}}),c=Zs(c.length,i.shape.length)),da("min",c,a);const[f,p]=Xo(d.shape,c),g=xt(p),v=sn({inputs:{x:d},backend:t,attrs:{shape:[-1,g]}}),b=Hv(v,v.dtype,"min",t);let x;if(o){const _=Ks(f,l);x=sn({inputs:{x:b},backend:t,attrs:{shape:_}})}else x=sn({inputs:{x:b},backend:t,attrs:{shape:f}});return t.disposeIntermediateTensorInfo(v),t.disposeIntermediateTensorInfo(b),u!=null&&t.disposeIntermediateTensorInfo(d),x}const c6e={kernelName:bD,backendName:"webgl",kernelFunc:l6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u6e=b5+`
  return min(a, b);
`,d6e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+zv+`
  return result;
`,h6e=fa({opSnippet:u6e,packedOpSnippet:d6e,cpuKernelImpl:JLe}),f6e={kernelName:pE,backendName:"webgl",kernelFunc:h6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p6e{constructor(e,t,r){this.variableNames=["x"],this.outputShape=t.map((u,d)=>u[0]+e[d]+u[1]);const i=e.length,s=Fi(i),o=t.map(u=>u[0]).join(","),a=t.map((u,d)=>u[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),c=r==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${o});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${s} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m6e{constructor(e,t,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((g,v)=>g[0]+e[v]+g[1]);const i=e.length,s=Fi(i),o=t.map(g=>g[0]).join(","),a=t.map((g,v)=>g[0]+e[v]).join(","),l=tl("rc",i),c=tl("source",i),u=`${l[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,f=r==="reflect"?0:1;let p="";if(i===1){const g=`
        ${s} source = rc;
        if (source < start) {
          source = start * 2 - source - ${f};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${f};
        }
        source -= start;
      `;p=`
        ${s} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[i-1]} += 1;
        if(${u}) {
          ${g}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{const g=`
        ${s} source = rc;
        ${s} lt = ${s}(lessThan(source, start));
        ${s} gte = ${s}(greaterThanEqual(source, end));
        ${s} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${f}) +
                gte * ((end - 1) * 2 - source + ${f});
        source -= start;
      `;p=`
        ${s} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[i-1]} += 1;
        if(${u}) {
          ${g}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${l[i-2]} += 1;
        if(${l[i-2]} < ${this.outputShape[i-2]}) {
          ${g}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${l[i-1]} += 1;
          if(${u}) {
            ${g}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${s} start = ${s}(${o});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g6e=({inputs:n,backend:e,attrs:t})=>{const{x:r}=n,{paddings:i,mode:s}=t,o=it().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new m6e(r.shape,i,s):new p6e(r.shape,i,s);return e.runWebGLProgram(o,[r],r.dtype)},y6e={kernelName:xD,backendName:"webgl",kernelFunc:g6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v6e=`if (b == 0.0) return NAN;
  return mod(a, b);`,b6e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+zv+`
  return result;
`,x6e=fa({opSnippet:v6e,packedOpSnippet:b6e}),S6e={kernelName:mE,backendName:"webgl",kernelFunc:x6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w6e{constructor(e,t,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${t-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${t-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _6e=`
if (a == b) {
  return 1.0;
};
return a / b;`,C6e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,yre=fa({opSnippet:_6e,packedOpSnippet:C6e,checkOutOfBounds:!0}),E6e={kernelName:QC,backendName:"webgl",kernelFunc:yre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c9="return a - b;",vre=fa({opSnippet:c9,packedOpSnippet:c9,supportsComplex:!0,cpuKernelImpl:vFe}),A6e={kernelName:IE,backendName:"webgl",kernelFunc:vre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bre(n){const{inputs:e,backend:t,attrs:r}=n,{logits:i}=e,{dim:s}=r,o=Ir([s],i.shape),a=gre({inputs:{x:i},backend:t,attrs:{reductionIndices:o,keepDims:!1}}),l=Ks(a.shape,o),c=sn({inputs:{x:a},backend:t,attrs:{shape:l}}),u=vre({inputs:{a:i,b:c},backend:t}),d=fre({inputs:{x:u},backend:t}),f=I3({inputs:{x:d},backend:t,attrs:{axis:o,keepDims:!1}}),p=sn({inputs:{x:f},backend:t,attrs:{shape:l}}),g=yre({inputs:{a:d,b:p},backend:t});return t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(c),t.disposeIntermediateTensorInfo(u),t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(p),g}const T6e={kernelName:FD,backendName:"webgl",kernelFunc:bre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M6e(n){const{inputs:e,backend:t,attrs:r}=n,{logits:i}=e,{numSamples:s,seed:o,normalized:a}=r,l=a?i:bre({inputs:{logits:i},backend:t,attrs:{dim:i.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new w6e(c,u,s),f=[[o]],p=t.runWebGLProgram(d,[l],"int32",f);return a||t.disposeIntermediateTensorInfo(l),p}const R6e={kernelName:X4,backendName:"webgl",kernelFunc:M6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N6e=id+`
  return -x;
`,I6e=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function D6e(n){const{inputs:e,backend:t}=n,{x:r}=e;if(t.shouldExecuteOnCPU([r])){const s=t.texData.get(r.dataId),[o,a]=QLe(s.values,r.shape,r.dtype);return t.makeTensorInfo(a,r.dtype,o)}let i;return it().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new fg(r.shape,I6e):i=new ff(r.shape,N6e),t.runWebGLProgram(i,[r],r.dtype)}const k6e={kernelName:SD,backendName:"webgl",kernelFunc:D6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O6e=iz;function B6e(n){Qc("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:t,attrs:r}=n,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r,c=t.readSync(i.dataId),u=t.readSync(s.dataId),{selectedIndices:d}=O6e(c,u,o,a,l);return t.makeTensorInfo([d.length],"int32",new Int32Array(d))}const $6e={kernelName:q4,backendName:"webgl",kernelFunc:B6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L6e=sz;function F6e(n){Qc("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:t,attrs:r}=n,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r,u=t.readSync(i.dataId),d=t.readSync(s.dataId),{selectedIndices:f,validOutputs:p}=L6e(u,d,o,a,l,c);return[t.makeTensorInfo([f.length],"int32",new Int32Array(f)),t.makeTensorInfo([],"int32",new Int32Array([p]))]}const P6e={kernelName:K4,backendName:"webgl",kernelFunc:F6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U6e=oz;function z6e(n){Qc("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:t,attrs:r}=n,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r,u=t.readSync(i.dataId),d=t.readSync(s.dataId),f=o,p=a,g=l,v=c,{selectedIndices:b,selectedScores:x}=U6e(u,d,f,p,g,v);return[t.makeTensorInfo([b.length],"int32",new Int32Array(b)),t.makeTensorInfo([x.length],"float32",new Float32Array(x))]}const H6e={kernelName:Y4,backendName:"webgl",kernelFunc:z6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class V6e{constructor(e,t,r,i){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G6e=n=>{const{inputs:e,backend:t,attrs:r}=n,{indices:i}=e,{dtype:s,depth:o,onValue:a,offValue:l}=r,c=xt(i.shape),u=new V6e(c,o,a,l),d=sn({inputs:{x:i},backend:t,attrs:{shape:[c]}}),f=t.runWebGLProgram(u,[d],s);t.disposeIntermediateTensorInfo(d);const p=[...i.shape,o],g=sn({inputs:{x:f},backend:t,attrs:{shape:p}});return t.disposeIntermediateTensorInfo(f),g},W6e={kernelName:CD,backendName:"webgl",kernelFunc:G6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hN(n){const{inputs:e,backend:t}=n,{x:r}=e;if(r.dtype==="complex64"){const i=s2({inputs:{input:r},backend:t}),s=hN({inputs:{x:i},backend:t}),o=D3({inputs:{input:r},backend:t}),a=hN({inputs:{x:o},backend:t}),l=n0({inputs:{real:s,imag:a},backend:t});return t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(a),l}else return o2({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:t})}const j6e={kernelName:HD,backendName:"webgl",kernelFunc:hN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xre(n){const{inputs:e,backend:t}=n,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const i=s2({inputs:{input:r},backend:t}),s=xre({inputs:{x:i},backend:t}),o=D3({inputs:{input:r},backend:t}),a=hN({inputs:{x:o},backend:t}),l=n0({inputs:{real:s,imag:a},backend:t});return t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(a),l}else return o2({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:t})}const X6e={kernelName:_D,backendName:"webgl",kernelFunc:xre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q6e(n){const{inputs:e,backend:t,attrs:r}=n,{axis:i}=r;if(e.length===1)return oF({inputs:{input:e[0]},backend:t,attrs:{dim:i}});const s=e[0].shape,o=e[0].dtype;e.forEach(u=>{Dc(s,u.shape,"All tensors passed to stack must have matching shapes"),de(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const d=oF({inputs:{input:u},backend:t,attrs:{dim:i}});return a.push(d),d}),c=sre({inputs:l,backend:t,attrs:{axis:i}});return a.forEach(u=>t.disposeIntermediateTensorInfo(u)),c}const K6e={kernelName:ED,backendName:"webgl",kernelFunc:q6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Y6e{constructor(e,t,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((c,u)=>c[0]+e[u]+c[1]);const i=e.length,s=Fi(i),o=t.map(c=>c[0]).join(","),a=t.map((c,u)=>c[0]+e[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${o});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${s} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J6e{constructor(e,t,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((v,b)=>v[0]+e[b]+v[1]);const i=e.length,s=Fi(i),o=t.map(v=>v[0]).join(","),a=t.map((v,b)=>v[0]+e[b]).join(","),l=tl("rc",i),c=tl("source",i),u=`${l[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,f=[`${s} rc = outputLoc;`,`${l[i-1]} += 1;
       if(${u}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${l[i-2]} += 1;
       if(${l[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${l[i-1]} += 1;
         if(${u}) {`],p=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let g="";for(let v=0,b=i===1?2:4;v<b;v++)g+=`
        ${f[v]}
        if (${p}) {
          result[${v}] = float(value);
        } else {
          ${s} source = rc - start;
          result[${v}] = getChannel(getX(${c.join()}), ${d});
        }
      `;g+=i===1?"} ":"}}",this.userCode=`
      const ${s} start = ${s}(${o});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sre=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{paddings:s,constantValue:o}=r;if(xt(i.shape)===0){const c=s.map((u,d)=>u[0]+i.shape[d]+u[1]);return o2({backend:t,attrs:{shape:c,value:o,dtype:i.dtype}})}const a=it().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new J6e(i.shape,s,o):new Y6e(i.shape,s,o),l=[[o]];return t.runWebGLProgram(a,[i],i.dtype,l)},Z6e={kernelName:AD,backendName:"webgl",kernelFunc:Sre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q6e=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,eHe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+zv+`
  return result;
`,tHe=fa({opSnippet:Q6e,packedOpSnippet:eHe}),nHe={kernelName:yE,backendName:"webgl",kernelFunc:tHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rHe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=[],c=Ir(s,i.shape);let u=c;const d=Cs(u,a);let f=i;d!=null&&(f=sl({inputs:{x:i},backend:t,attrs:{perm:d}}),u=Zs(u.length,a),l.push(f)),da("prod",u,a);let p;if(t.shouldExecuteOnCPU([f])){const g=t.texData.get(f.dataId).values,{outVals:v,outShape:b,outDtype:x}=tFe(f.shape,f.dtype,g,u);p=t.makeTensorInfo(b,x,v)}else{const[g,v]=Xo(f.shape,u),b=xt(v),x=sn({inputs:{x:f},backend:t,attrs:{shape:[-1,b]}}),_=SU(i.dtype),E=Hv(x,_,"prod",t);p=sn({inputs:{x:E},backend:t,attrs:{shape:g}}),l.push(x),l.push(E)}if(o){l.push(p);const g=Ks(p.shape,c);p=sn({inputs:{x:p},backend:t,attrs:{shape:g}})}return l.forEach(g=>t.disposeIntermediateTensorInfo(g)),p}const iHe={kernelName:MD,backendName:"webgl",kernelFunc:rHe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sHe(n){const{inputs:e,backend:t,attrs:r}=n,{paramsNestedSplits:i,paramsDenseValues:s,indices:o}=e,{outputRaggedRank:a}=r,l=i.map(x=>t.readSync(x.dataId)),c=i.map(x=>x.shape),u=t.readSync(s.dataId),d=t.readSync(o.dataId),[f,p,g]=nFe(l,c,u,s.shape,s.dtype,d,o.shape,a),v=f.map(x=>t.makeTensorInfo([x.length],"int32",x)),b=t.makeTensorInfo(g,s.dtype,p);return v.concat([b])}const oHe={kernelName:J4,backendName:"webgl",kernelFunc:sHe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aHe(n){const{inputs:e,backend:t}=n,{starts:r,limits:i,deltas:s}=e,o=t.readSync(r.dataId),a=t.readSync(i.dataId),l=t.readSync(s.dataId),[c,u]=rFe(o,r.shape,r.dtype,a,i.shape,l,s.shape),d=t.makeTensorInfo([c.length],"int32",c),f=t.makeTensorInfo([u.length],r.dtype,u);return[d,f]}const lHe={kernelName:Z4,backendName:"webgl",kernelFunc:aHe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cHe(n){const{inputs:e,backend:t,attrs:r}=n,{shape:i,values:s,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=t.readSync(i.dataId),u=t.readSync(s.dataId),d=t.readSync(o.dataId),f=a.map(b=>t.readSync(b.dataId)),p=a.map(b=>b.shape),[g,v]=iFe(c,i.shape,u,s.shape,s.dtype,d,o.shape,f,p,l);return t.makeTensorInfo(g,s.dtype,v)}const uHe={kernelName:Q4,backendName:"webgl",kernelFunc:cHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wre=n=>{const{backend:e,attrs:t}=n,{start:r,stop:i,step:s,dtype:o}=t,a=sFe(r,i,s,o);return e.makeTensorInfo([a.length],o,a)},dHe={kernelName:eU,backendName:"webgl",kernelFunc:wre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hHe="return 1.0 / x;",fHe=ti({opSnippet:hHe}),pHe={kernelName:vE,backendName:"webgl",kernelFunc:fHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mHe=id+`
  return (x < 0.0) ? 0.0 : x;
`,gHe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,yHe=ti({opSnippet:mHe,packedOpSnippet:gHe}),vHe={kernelName:bE,backendName:"webgl",kernelFunc:yHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bHe=id+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,xHe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,SHe=ti({opSnippet:bHe,packedOpSnippet:xHe}),wHe={kernelName:xE,backendName:"webgl",kernelFunc:SHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _He{constructor(e,t,r,i,s){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,t,r,c];const u=[i&&t>1?a-1:a,i&&r>1?l-1:l],d=[i&&t>1?t-1:t,i&&r>1?r-1:r];let f;s?f="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CHe{constructor(e,t,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,t,r,c];const u=[i&&t>1?a-1:a,i&&r>1?l-1:l],d=[i&&t>1?t-1:t,i&&r>1?r-1:r];let f;s?f="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EHe(n){const{inputs:e,backend:t,attrs:r}=n,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r,[l,c]=a,u=it().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new CHe(i.shape,l,c,s,o):new _He(i.shape,l,c,s,o);return t.runWebGLProgram(u,[i],"float32")}const AHe={kernelName:ID,backendName:"webgl",kernelFunc:EHe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class THe{constructor(e,t,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,i,s]=t,[,o,a]=e,l=[r&&o>1?i-1:i,r&&a>1?s-1:s],c=[r&&o>1?o-1:o,r&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],f=1/u,p=1/d,g=Math.ceil(f)*2+2,v=Math.ceil(p)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${p});

        const int winHeight = int(${g});
        const int winWidth = int(${v});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MHe(n){const{inputs:e,backend:t,attrs:r}=n,{images:i,dy:s}=e,{alignCorners:o}=r,a=new THe(s.shape,i.shape,o);return t.runWebGLProgram(a,[s],s.dtype)}const RHe={kernelName:rU,backendName:"webgl",kernelFunc:MHe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NHe{constructor(e,t,r,i,s){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,t,r,c];const u=[i&&t>1?a-1:a,i&&r>1?l-1:l],d=[i&&t>1?t-1:t,i&&r>1?r-1:r],f=i?"0.5":"0.0";let p;s?p="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IHe{constructor(e,t,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,t,r,c];const u=[i&&t>1?a-1:a,i&&r>1?l-1:l],d=[i&&t>1?t-1:t,i&&r>1?r-1:r],f=i?"0.5":"0.0";let p;s?p="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DHe(n){const{inputs:e,backend:t,attrs:r}=n,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r,[l,c]=a,u=it().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new IHe(i.shape,l,c,s,o):new NHe(i.shape,l,c,s,o);return t.runWebGLProgram(u,[i],i.dtype)}const kHe={kernelName:ND,backendName:"webgl",kernelFunc:DHe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OHe{constructor(e,t,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,i,s]=t,[,o,a]=e,l=[r&&o>1?i-1:i,r&&a>1?s-1:s],c=[r&&o>1?o-1:o,r&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],f=1/u,p=1/d,g=Math.ceil(f)*2+2,v=Math.ceil(p)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${p});

        const int winHeight = int(${g});
        const int winWidth = int(${v});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BHe(n){const{inputs:e,backend:t,attrs:r}=n,{images:i,dy:s}=e,{alignCorners:o}=r,a=new OHe(s.shape,i.shape,o);return t.runWebGLProgram(a,[s],s.dtype)}const $He={kernelName:nU,backendName:"webgl",kernelFunc:BHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LHe{constructor(e,t){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const i=a=>t.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,s=e.map((a,l)=>i(l)).join(","),o=Fi(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FHe{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const i=tl("rc",r),s=`${i[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${i[r-2]} + 1 < ${this.outputShape[r-2]}`,a=Fi(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(i.slice())};
          if(${s}){
            result.g = ${c(i.slice())};
          }
          if(${o}) {
            result.b = ${u(i.slice())};
            if(${s}) {
              result.a = ${d(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(g){return f(g)}function c(g){return g[r-1]="("+g[r-1]+" + 1)",f(g)}function u(g){return g[r-2]="("+g[r-2]+" + 1)",f(g)}function d(g){return g[r-1]="("+g[r-1]+" + 1)",g[r-2]="("+g[r-2]+" + 1)",f(g)}function f(g){const v=e.map((_,E)=>p(E,g)),b=v.join(","),x=v.slice(-2).join(",");return`getChannel(getX(${b}), vec2(${x}))`}function p(g,v){return t.indexOf(g)!==-1&&e[g]!==1?`${e[g]} - ${v[g]} - 1`:`${v[g]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PHe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{dims:s}=r,o=i.shape.length,a=Ir(s,i.shape);if(o===0)return Nc({inputs:{x:i},backend:t});const l=it().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new FHe(i.shape,a):new LHe(i.shape,a);return t.runWebGLProgram(l,[i],i.dtype)}const UHe={kernelName:DD,backendName:"webgl",kernelFunc:PHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zHe{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],i=e[2];this.outputShape=e;let s="";typeof t=="number"?s=`float outputValue = ${t.toFixed(2)};`:s=`
        vec3 fill = vec3(${t.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${s}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HHe={kernelName:xU,backendName:"webgl",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{image:r}=n,{radians:i,fillValue:s,center:o}=e,a=t,l=new zHe(r.shape,s),[c,u]=bz(o,r.shape[1],r.shape[2]),d=[[c,u,Math.sin(i),Math.cos(i)]];return a.runWebGLProgram(l,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VHe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,GHe=ti({opSnippet:VHe}),WHe={kernelName:SE,backendName:"webgl",kernelFunc:GHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jHe="return inversesqrt(x);",XHe=ti({opSnippet:jHe,cpuKernelImpl:oFe}),qHe={kernelName:wE,backendName:"webgl",kernelFunc:XHe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w5{constructor(e,t,r,i,s,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const c=Fi(s.length),u=Fi(o.length);let d="";r===1?d="i":r===2&&(d="i, j");const f=`getIndices(${d})`;let p="";i===1?p="i":i===2&&(p="i, coords[1]");const g=`getUpdates(${p})`;let v="";l&&(v="coords[0], coords[1]");const b=`getDefaultValue(${v})`,x=t>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${t}; j++) {
              int index = round(${f});
              flattenedIndex += index * ${x};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${g};
              found = true;
            }
          }
          setOutput(mix(${b}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KHe{constructor(e,t,r,i,s,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const c=Fi(s.length),u=Fi(o.length);let d="";r===1?d="i":r===2&&(d="i, j");const f=`getIndices(${d})`;let p="";i===1?p="i":i===2&&(p="i, coords[1]");const g=`getUpdates(${p})`;let v="";l&&(v="coords[0], coords[1]");const b=`getDefaultValue(${v})`,x=t>1?"strides[j]":"strides",_=t>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${t}; j+=2) {
              ivec4 index = round(${f});
              flattenedIndex += index.xz * ${x};
              if (j + 1 < ${t}) {
                flattenedIndex += index.yw * ${_};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${g};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${b}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YHe(n){const{inputs:e,backend:t,attrs:r}=n,{indices:i,updates:s}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=$v(s,i,o),f=[d/c,c];if(d===0)return t.makeTensorInfo(o,i.dtype);const p=sn({inputs:{x:i},backend:t,attrs:{shape:[l,a]}}),g=sn({inputs:{x:s},backend:t,attrs:{shape:[l,c]}}),v=t.makeTensorInfo([],"float32",new Float32Array([0]));let b;it().getBool("WEBGL_PACK")?b=new KHe(l,a,p.shape.length,g.shape.length,u,f):b=new w5(l,a,p.shape.length,g.shape.length,u,f);const x=t.runWebGLProgram(b,[g,p,v],g.dtype),_=sn({inputs:{x},backend:t,attrs:{shape:o}});return t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(x),t.disposeIntermediateTensorInfo(v),_}const JHe={kernelName:iU,backendName:"webgl",kernelFunc:YHe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZHe{constructor(e,t,r,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const s="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(t+1))}; ++i) { if (left >= right) break;`,a=it().getNumber("WEBGL_VERSION")===2?s:o,l=i==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QHe(n){const{inputs:e,backend:t,attrs:r}=n,{sortedSequence:i,values:s}=e,{side:o}=r,a=new ZHe(i.shape[0],i.shape[1],s.shape[1],o),l=[[i.shape[1]]];return t.runWebGLProgram(a,[i,s],"int32",l)}const eVe={kernelName:oU,backendName:"webgl",kernelFunc:QHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tVe{constructor(e,t,r){this.variableNames=["c","a","b"],this.outputShape=t;let i,s;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)s="resRC",i="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<t.length;u++)c.push(`${a[u]}`),u<e&&l.push(`${a[u]}`);i=l.join(),s=c.join()}const o=Fi(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${s}));
        } else {
          setOutput(getB(${s}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nVe(n){const{inputs:e,backend:t}=n,{condition:r,t:i,e:s}=e,o=new tVe(r.shape.length,i.shape,i.shape.length);return t.runWebGLProgram(o,[r,i,s],Tc(i.dtype,s.dtype))}const rVe={kernelName:kD,backendName:"webgl",kernelFunc:nVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iVe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${p3};
  float scale = ${m3};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,sVe=ti({opSnippet:iVe}),oVe={kernelName:_E,backendName:"webgl",kernelFunc:sVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aVe=nS+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,lVe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,cVe=ti({opSnippet:aVe,packedOpSnippet:lVe,cpuKernelImpl:lFe}),uVe={kernelName:TE,backendName:"webgl",kernelFunc:cVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dVe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,hVe=ti({opSnippet:dVe}),fVe={kernelName:AE,backendName:"webgl",kernelFunc:hVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pVe=nS+`
  return sin(x);
`,mVe=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${zv}
  return result;
`,gVe=ti({opSnippet:pVe,packedOpSnippet:mVe}),yVe={kernelName:CE,backendName:"webgl",kernelFunc:gVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vVe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,bVe=ti({opSnippet:vVe}),xVe={kernelName:EE,backendName:"webgl",kernelFunc:bVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SVe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,wVe=ti({opSnippet:SVe}),_Ve={kernelName:ME,backendName:"webgl",kernelFunc:wVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CVe=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{blockShape:s,paddings:o}=r;de(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((x,_)=>x*_),l=[[0,0]];l.push(...o);for(let x=1+s.length;x<i.shape.length;++x)l.push([0,0]);const c=[],u=Sre({inputs:{x:i},backend:t,attrs:{paddings:l,constantValue:0}}),d=GE(u.shape,s,a,!1),f=WE(d.length,s.length,!1),p=jE(u.shape,s,a,!1),g=sn({inputs:{x:u},backend:t,attrs:{shape:d}}),v=sl({inputs:{x:g},backend:t,attrs:{perm:f}}),b=sn({inputs:{x:v},backend:t,attrs:{shape:p}});return c.push(u),c.push(g),c.push(v),c.forEach(x=>t.disposeIntermediateTensorInfo(x)),b},EVe={kernelName:$D,backendName:"webgl",kernelFunc:CVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AVe(n){const{inputs:e,backend:t}=n,{indices:r,values:i,denseShape:s,defaultValue:o}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=t.readSync(r.dataId),l=t.readSync(i.dataId),c=t.readSync(s.dataId),u=t.readSync(o.dataId)[0],[d,f,p,g,v]=uFe(a,r.shape,r.dtype,l,i.dtype,c,u);return[t.makeTensorInfo(f,r.dtype,d),t.makeTensorInfo([f[0]],i.dtype,p),t.makeTensorInfo([g.length],"bool",new Uint8Array(g.map(b=>Number(b)))),t.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}const TVe={kernelName:aU,backendName:"webgl",kernelFunc:AVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MVe(n){const{inputs:e,backend:t}=n,{inputIndices:r,inputShape:i,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const o=Array.from(t.readSync(i.dataId)),a=t.readSync(r.dataId),l=Array.from(t.readSync(s.dataId)),[c,u,d]=dFe(a,r.shape,r.dtype,o,l);return[t.makeTensorInfo(u,r.dtype,c),t.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}const RVe={kernelName:lU,backendName:"webgl",kernelFunc:MVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NVe(n){const{inputs:e,backend:t}=n,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${s.shape}`);const o=t.readSync(r.dataId),a=t.readSync(i.dataId),l=t.readSync(s.dataId),[c,u]=jne(o,r.shape,r.dtype,a,l,!0);return t.makeTensorInfo(u,r.dtype,c)}const IVe={kernelName:cU,backendName:"webgl",kernelFunc:NVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DVe(n){const{inputs:e,backend:t}=n,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${s.shape}`);const o=t.readSync(r.dataId),a=t.readSync(i.dataId),l=t.readSync(s.dataId),[c,u]=jne(o,r.shape,r.dtype,a,l);return t.makeTensorInfo(u,r.dtype,c)}const kVe={kernelName:uU,backendName:"webgl",kernelFunc:DVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OVe(n){const{inputs:e,backend:t,attrs:r}=n,{sparseIndices:i,sparseValues:s,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:f}=$v(s,i,a),p=!1;if(s.dtype==="string"){const x=t.bufferSync(i),_=t.bufferSync(s),E=Mg(t.readSync(o.dataId)[0]),C=aFe(x,_,a,f,u,c,l,d,E,p);return t.makeTensorInfo(a,C.dtype,C.values)}const g=new w5(c,l,i.shape.length,s.shape.length,d,[f,1],p),v=t.runWebGLProgram(g,[s,i,o],s.dtype),b=sn({inputs:{x:v},backend:t,attrs:{shape:a}});return t.disposeIntermediateTensorInfo(v),b}const BVe={kernelName:dU,backendName:"webgl",kernelFunc:OVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ve(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{numOrSizeSplits:s,axis:o}=r,a=Ir(o,i.shape)[0],l=Oz(i,s,a),c=i.shape.length,u=new Array(c).fill(0),d=i.shape.slice();return l.map(f=>{const p=[...d];p[a]=f;const g=rS({inputs:{x:i},backend:t,attrs:{begin:u,size:p}});return u[a]+=f,g})}const LVe={kernelName:LD,backendName:"webgl",kernelFunc:$Ve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u9="return sqrt(x);",FVe=ti({opSnippet:u9,packedOpSnippet:u9,cpuKernelImpl:hFe}),PVe={kernelName:RE,backendName:"webgl",kernelFunc:FVe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UVe="return x * x;",zVe=ti({opSnippet:UVe}),HVe={kernelName:hU,backendName:"webgl",kernelFunc:zVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d9="return (a - b) * (a - b);",VVe=fa({opSnippet:d9,packedOpSnippet:d9}),GVe={kernelName:NE,backendName:"webgl",kernelFunc:VVe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WVe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");const s=t.readSync(i.dataId),o=Xp(s),a=fFe(o,"string",r);return t.makeTensorInfo(i.shape,"string",a)}const jVe={kernelName:PD,backendName:"webgl",kernelFunc:WVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XVe({inputs:n,attrs:e,backend:t}){const{x:r}=n,i=id+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,s=new ff(r.shape,i);return t.runWebGLProgram(s,[r],r.dtype)}const qVe={kernelName:BE,backendName:"webgl",kernelFunc:XVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KVe{constructor(e,t,r){this.variableNames=["x"],this.outputShape=r;const i=r.length,s=Fi(r.length),o=Fi(r.length);let a="";if(i===1)a="coords * strides + begin";else{let l=0;a=r.map((c,u)=>(l++,r.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${s} begin = ${s}(${e});
      ${s} strides = ${s}(${t});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YVe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{begin:s,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:f}=r,{finalShapeSparse:p,finalShape:g,isIdentity:v,sliceDim0:b,isSimpleSlice:x,begin:_,end:E,strides:C}=gz(i.shape,s,o,a,l,c,u,d,f);let M;if(v)M=sn({inputs:{x:i},backend:t,attrs:{shape:g}});else if(b||x){de(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const L=fz(_,E,C),B=rS({inputs:{x:i},backend:t,attrs:{begin:_,size:L}});M=sn({inputs:{x:B},backend:t,attrs:{shape:g}}),t.disposeIntermediateTensorInfo(B)}else if(t.shouldExecuteOnCPU([i])){const B=t.readSync(i.dataId),N=Ar(i.shape,i.dtype,B),I=pFe(p,N,C,_);M=t.makeTensorInfo(g,i.dtype,I.values)}else{const B=new KVe(_,C,p);M=t.runWebGLProgram(B,[i],i.dtype)}const R=sn({inputs:{x:M},backend:t,attrs:{shape:g}});return t.disposeIntermediateTensorInfo(M),R}const JVe={kernelName:fU,backendName:"webgl",kernelFunc:YVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZVe(n){const{inputs:e,backend:t,attrs:r}=n,{separator:i,nGramWidths:s,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,f=t.readSync(u.dataId),p=t.readSync(d.dataId),[g,v]=mFe(f,p,i,s,o,a,l,c);return[t.makeTensorInfo([g.length],"string",g),t.makeTensorInfo(d.shape,"int32",v)]}const QVe={kernelName:pU,backendName:"webgl",kernelFunc:ZVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e8e(n){const{inputs:e,backend:t,attrs:r}=n,{skipEmpty:i}=r,{input:s,delimiter:o}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=t.readSync(s.dataId),l=t.readSync(o.dataId)[0],[c,u,d]=gFe(a,l,i),f=u.length;return[t.makeTensorInfo([f,2],"int32",c),t.makeTensorInfo([f],"string",u),t.makeTensorInfo([2],"int32",new Int32Array(d))]}const t8e={kernelName:mU,backendName:"webgl",kernelFunc:e8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n8e(n){const{inputs:e,backend:t,attrs:r}=n,{numBuckets:i}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=t.readSync(s.dataId),a=yFe(o,i);return t.makeTensorInfo(s.shape,"int32",a)}const r8e={kernelName:gU,backendName:"webgl",kernelFunc:n8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i8e="return tan(x);",s8e=ti({opSnippet:i8e}),o8e={kernelName:DE,backendName:"webgl",kernelFunc:s8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a8e=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,l8e=ti({opSnippet:a8e}),c8e={kernelName:kE,backendName:"webgl",kernelFunc:l8e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u8e(n){const{inputs:e,backend:t,attrs:r}=n,{tensor:i,indices:s,updates:o}=e,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=$v(o,s,i.shape),f=[d/c,c];if(d===0)return t.makeTensorInfo(i.shape,s.dtype);const p=sn({inputs:{x:s},backend:t,attrs:{shape:[l,a]}}),g=sn({inputs:{x:o},backend:t,attrs:{shape:[l,c]}}),v=sn({inputs:{x:i},backend:t,attrs:{shape:f}}),b=new w5(l,a,p.shape.length,g.shape.length,u,f,!1,!0),x=t.runWebGLProgram(b,[g,p,v],v.dtype),_=sn({inputs:{x},backend:t,attrs:{shape:i.shape}});return t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(v),t.disposeIntermediateTensorInfo(x),_}const d8e={kernelName:sU,backendName:"webgl",kernelFunc:u8e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h8e{constructor(e,t){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*t[o];this.outputShape=r,this.rank=r.length;const i=Fi(this.rank),s=f8e(e);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${s}));
      }
    `}}function f8e(n){const e=n.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${n[0]})`;const t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<n.length;i++)r.push(`imod(${t[i]}, ${n[i]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _re(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{reps:s}=r;if(i.dtype==="string"||i.shape.length>5){const l=t.readSync(i.dataId),c=i.dtype==="string"?l.map(f=>Mg(f)):l,u=Ar(i.shape,i.dtype,c),d=bFe(u,s);return t.makeTensorInfo(d.shape,d.dtype,d.values)}const o=new h8e(i.shape,s);return t.runWebGLProgram(o,[i],i.dtype)}const p8e={kernelName:OE,backendName:"webgl",kernelFunc:_re};class m8e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class g8e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hy(n,e){e!==null&&n.disposeIntermediateTensorInfo(e)}function h9(n){let e=1;for(;e<n;)e*=2;return e}function y8e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{k:s,sorted:o}=r,a=it().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=it().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=i.shape,u=c[c.length-1];if(t.shouldExecuteOnCPU([i])||u<a||s>l){const I=t.readSync(i.dataId),[D,P]=xFe(I,c,i.dtype,s,o);return[t.makeTensorInfo(D.shape,D.dtype,D.values),t.makeTensorInfo(P.shape,P.dtype,P.values)]}if(s===0)return c[c.length-1]=0,[t.makeTensorInfo(c,i.dtype,[]),t.makeTensorInfo(c,"int32",[])];if(u===1)return[i,o2({attrs:{shape:c,dtype:"int32",value:0},backend:t})];const d=t.texData.get(i.dataId),f=d!==null&&d.isPacked,p=f?t.unpackTensor(i):i,v=xt(c)/u,b=sn({inputs:{x:p},attrs:{shape:[v,u]},backend:t});f&&hy(t,p);const x=h9(s),_=h9(u);let E=null;const C=()=>E===null?[b,b]:[b,E],M=(I,D,P)=>{const G=C(),W=new m8e(P),z=[[u],[E===null?1:0],[Number.NEGATIVE_INFINITY],[I],[D]],J=E;E=t.runWebGLProgram(W,G,"int32",z),hy(t,J)};for(let I=1;I<x;I*=2){const D=I*2;for(let P=I;P>=1;P/=2)M(D,P,[v,_])}for(let I=_;I>x;I/=2){const D=C(),P=new g8e([v,I/2]),W=[[u],[E===null?1:0],[x]],q=E;E=t.runWebGLProgram(P,D,"int32",W),hy(t,q);const z=x/2,J=z*2;for(let Q=z;Q>=1;Q/=2)M(J,Q,E.shape)}let R=E;E=rS({inputs:{x:E},backend:t,attrs:{begin:0,size:[v,s]}}),hy(t,R);let L=mre({inputs:{x:b,indices:E},backend:t,attrs:{axis:1,batchDims:1}});hy(t,b);const B=c.slice(0,-1);B.push(s),R=E,E=sn({inputs:{x:E},attrs:{shape:B},backend:t}),hy(t,R);const N=L;return L=sn({inputs:{x:L},attrs:{shape:B},backend:t}),hy(t,N),[L,E]}const v8e={kernelName:yU,backendName:"webgl",kernelFunc:y8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b8e{constructor(e,t,r,i,s,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a=r==="nearest"?1:2;let l;switch(i){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${s});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${s});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${t}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x8e(n){const{inputs:e,backend:t,attrs:r}=n,{image:i,transforms:s}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=r,[u,d,f,p]=i.shape,[g,v]=c??[d,f],b=[u,g,v,p],x=new b8e(d,f,o,a,l,b);return t.runWebGLProgram(x,[i,s],"float32")}const S8e={kernelName:vU,backendName:"webgl",kernelFunc:x8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w8e(n){const{inputs:e,attrs:t,backend:r}=n,{axis:i}=t,{x:s}=e;r2(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(s.dataId),{outputValues:a,outputShape:l,indices:c}=SFe(o,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const _8e={kernelName:bU,backendName:"webgl",kernelFunc:w8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C8e(n){const{inputs:e,backend:t,attrs:r}=n,{value:i}=e;let{axis:s}=r;s<0&&(s+=i.shape.length);const o=i,a=o.shape.length,l=i.shape[s],c=new Array(a-1);let u=0;for(let v=0;v<a;v++)v!==s&&(c[u++]=o.shape[v]);const d=[],f=new Array(a).fill(0),p=o.shape.slice();p[s]=1;const g=new Array(l);for(let v=0;v<g.length;v++){f[s]=v;const b=rS({inputs:{x:o},backend:t,attrs:{begin:f,size:p}}),x=sn({inputs:{x:b},backend:t,attrs:{shape:c}});g[v]=x,d.push(b)}return d.forEach(v=>t.disposeIntermediateTensorInfo(v)),g}const E8e={kernelName:UD,backendName:"webgl",kernelFunc:C8e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class A8e{constructor(e,t){this.variableNames=["x","segmentIds"];const r=e.windowSize,i=e.batchSize,s=e.inSize,o=e.numSegments,a=o*Math.ceil(s/r);this.outputShape=[i,a];const l="0.0",c="sumValue",u=Math.floor(r/4)*4,d=r%4,f=`
        sumValue += dot(values, segFilter);
    `;let p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `);let g="";s%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${g}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${f}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${f}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${f}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${f}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T8e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,segmentIds:s}=e,{numSegments:o}=r,a=i.shape.length,l=[];let c=0;const u=Cs([c],a);let d=i;u!=null&&(d=sl({inputs:{x:i},backend:t,attrs:{perm:u}}),l.push(d),c=Zs(1,a)[0]);const f=eQ(d.shape,c,o),p=xt([d.shape[c]]),g=sn({inputs:{x:d},backend:t,attrs:{shape:[-1,p]}});l.push(g);const v=SU(i.dtype),b=(C,M,R,L,B)=>{const N=C.shape[0],I=C.shape[1],D=QZ(I,B),P={windowSize:D,inSize:I,batchSize:N,numSegments:B},G=new A8e(P,M),W=t.compileAndRun(G,[C,R],L);if(l.push(W),W.shape[1]===B)return W;const q=wre({backend:t,attrs:{start:0,stop:B,step:1,dtype:"float32"}}),z=_re({inputs:{x:q},backend:t,attrs:{reps:[I/D]}});return l.push(q),l.push(z),b(W,M,z,L,B)},x=b(g,"unsortedSegmentSum",s,v,o),_=sn({inputs:{x},backend:t,attrs:{shape:f}});let E=_;if(u!=null){l.push(_);const C=Yg(u);E=sl({inputs:{x:E},backend:t,attrs:{perm:C}})}return l.forEach(C=>t.disposeIntermediateTensorInfo(C)),E}const M8e={kernelName:zD,backendName:"webgl",kernelFunc:T8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R8e=[hPe,pPe,yPe,xPe,wPe,EPe,TPe,RPe,kPe,BPe,FPe,zPe,GPe,qPe,JPe,QPe,t4e,s4e,a4e,c4e,f4e,x4e,w4e,A4e,M4e,O4e,$4e,U4e,KFe,V4e,q4e,Z4e,iUe,aUe,cUe,dUe,fUe,yUe,xUe,_Ue,EUe,TUe,RUe,DUe,OUe,FUe,UUe,VUe,jUe,qUe,ZUe,nze,oze,cze,hze,fze,mze,yze,bze,Sze,_ze,Tze,Nze,kze,Bze,Fze,zze,Wze,Kze,qFe,Jze,j4e,e5e,r5e,o5e,JFe,u5e,p5e,g5e,x5e,_5e,T5e,N5e,O5e,F5e,z5e,V5e,X5e,K5e,J5e,t6e,r6e,s6e,a6e,c6e,f6e,y6e,S6e,R6e,ePe,k6e,$6e,P6e,H6e,N4e,W6e,X6e,K6e,Z6e,nHe,QFe,iHe,oHe,lHe,uHe,dHe,I4e,E6e,pHe,vHe,wHe,nPe,AHe,RHe,kHe,$He,UHe,HHe,WHe,qHe,JHe,eVe,rVe,oVe,uVe,fVe,yVe,xVe,v4e,T6e,_Ve,EVe,TVe,RVe,IVe,kVe,BVe,LVe,PVe,HVe,GVe,jVe,qVe,JVe,QVe,t8e,r8e,A6e,cPe,o8e,c8e,d8e,p8e,v8e,S8e,uPe,_8e,E8e,M8e,j6e];for(const n of R8e)CY(n);var vB={},f9;function N8e(){return f9||(f9=1,(function(){var n;function e(O){var j=0;return function(){return j<O.length?{done:!1,value:O[j++]}:{done:!0}}}var t=typeof Object.defineProperties=="function"?Object.defineProperty:function(O,j,ee){return O==Array.prototype||O==Object.prototype||(O[j]=ee.value),O};function r(O){O=[typeof globalThis=="object"&&globalThis,O,typeof window=="object"&&window,typeof self=="object"&&self,typeof _H=="object"&&_H];for(var j=0;j<O.length;++j){var ee=O[j];if(ee&&ee.Math==Math)return ee}throw Error("Cannot find global object")}var i=r(this);function s(O,j){if(j)e:{var ee=i;O=O.split(".");for(var ae=0;ae<O.length-1;ae++){var we=O[ae];if(!(we in ee))break e;ee=ee[we]}O=O[O.length-1],ae=ee[O],j=j(ae),j!=ae&&j!=null&&t(ee,O,{configurable:!0,writable:!0,value:j})}}s("Symbol",function(O){function j(Ee){if(this instanceof j)throw new TypeError("Symbol is not a constructor");return new ee(ae+(Ee||"")+"_"+we++,Ee)}function ee(Ee,_e){this.h=Ee,t(this,"description",{configurable:!0,writable:!0,value:_e})}if(O)return O;ee.prototype.toString=function(){return this.h};var ae="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",we=0;return j}),s("Symbol.iterator",function(O){if(O)return O;O=Symbol("Symbol.iterator");for(var j="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),ee=0;ee<j.length;ee++){var ae=i[j[ee]];typeof ae=="function"&&typeof ae.prototype[O]!="function"&&t(ae.prototype,O,{configurable:!0,writable:!0,value:function(){return o(e(this))}})}return O});function o(O){return O={next:O},O[Symbol.iterator]=function(){return this},O}function a(O){var j=typeof Symbol<"u"&&Symbol.iterator&&O[Symbol.iterator];return j?j.call(O):{next:e(O)}}function l(O){if(!(O instanceof Array)){O=a(O);for(var j,ee=[];!(j=O.next()).done;)ee.push(j.value);O=ee}return O}var c=typeof Object.assign=="function"?Object.assign:function(O,j){for(var ee=1;ee<arguments.length;ee++){var ae=arguments[ee];if(ae)for(var we in ae)Object.prototype.hasOwnProperty.call(ae,we)&&(O[we]=ae[we])}return O};s("Object.assign",function(O){return O||c});var u=typeof Object.create=="function"?Object.create:function(O){function j(){}return j.prototype=O,new j},d;if(typeof Object.setPrototypeOf=="function")d=Object.setPrototypeOf;else{var f;e:{var p={a:!0},g={};try{g.__proto__=p,f=g.a;break e}catch{}f=!1}d=f?function(O,j){if(O.__proto__=j,O.__proto__!==j)throw new TypeError(O+" is not extensible");return O}:null}var v=d;function b(O,j){if(O.prototype=u(j.prototype),O.prototype.constructor=O,v)v(O,j);else for(var ee in j)if(ee!="prototype")if(Object.defineProperties){var ae=Object.getOwnPropertyDescriptor(j,ee);ae&&Object.defineProperty(O,ee,ae)}else O[ee]=j[ee];O.ya=j.prototype}function x(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function _(O){if(O.m)throw new TypeError("Generator is already running");O.m=!0}x.prototype.u=function(O){this.i=O};function E(O,j){O.l={ma:j,na:!0},O.h=O.s||O.v}x.prototype.return=function(O){this.l={return:O},this.h=this.v};function C(O,j,ee){return O.h=ee,{value:j}}function M(O){this.h=new x,this.i=O}function R(O,j){_(O.h);var ee=O.h.j;return ee?L(O,"return"in ee?ee.return:function(ae){return{value:ae,done:!0}},j,O.h.return):(O.h.return(j),B(O))}function L(O,j,ee,ae){try{var we=j.call(O.h.j,ee);if(!(we instanceof Object))throw new TypeError("Iterator result "+we+" is not an object");if(!we.done)return O.h.m=!1,we;var Ee=we.value}catch(_e){return O.h.j=null,E(O.h,_e),B(O)}return O.h.j=null,ae.call(O.h,Ee),B(O)}function B(O){for(;O.h.h;)try{var j=O.i(O.h);if(j)return O.h.m=!1,{value:j.value,done:!1}}catch(ee){O.h.i=void 0,E(O.h,ee)}if(O.h.m=!1,O.h.l){if(j=O.h.l,O.h.l=null,j.na)throw j.ma;return{value:j.return,done:!0}}return{value:void 0,done:!0}}function N(O){this.next=function(j){return _(O.h),O.h.j?j=L(O,O.h.j.next,j,O.h.u):(O.h.u(j),j=B(O)),j},this.throw=function(j){return _(O.h),O.h.j?j=L(O,O.h.j.throw,j,O.h.u):(E(O.h,j),j=B(O)),j},this.return=function(j){return R(O,j)},this[Symbol.iterator]=function(){return this}}function I(O){function j(ae){return O.next(ae)}function ee(ae){return O.throw(ae)}return new Promise(function(ae,we){function Ee(_e){_e.done?ae(_e.value):Promise.resolve(_e.value).then(j,ee).then(Ee,we)}Ee(O.next())})}function D(O){return I(new N(new M(O)))}s("Promise",function(O){function j(_e){this.i=0,this.j=void 0,this.h=[],this.u=!1;var He=this.l();try{_e(He.resolve,He.reject)}catch(ft){He.reject(ft)}}function ee(){this.h=null}function ae(_e){return _e instanceof j?_e:new j(function(He){He(_e)})}if(O)return O;ee.prototype.i=function(_e){if(this.h==null){this.h=[];var He=this;this.j(function(){He.m()})}this.h.push(_e)};var we=i.setTimeout;ee.prototype.j=function(_e){we(_e,0)},ee.prototype.m=function(){for(;this.h&&this.h.length;){var _e=this.h;this.h=[];for(var He=0;He<_e.length;++He){var ft=_e[He];_e[He]=null;try{ft()}catch(Ht){this.l(Ht)}}}this.h=null},ee.prototype.l=function(_e){this.j(function(){throw _e})},j.prototype.l=function(){function _e(Ht){return function(Zt){ft||(ft=!0,Ht.call(He,Zt))}}var He=this,ft=!1;return{resolve:_e(this.I),reject:_e(this.m)}},j.prototype.I=function(_e){if(_e===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(_e instanceof j)this.L(_e);else{e:switch(typeof _e){case"object":var He=_e!=null;break e;case"function":He=!0;break e;default:He=!1}He?this.F(_e):this.s(_e)}},j.prototype.F=function(_e){var He=void 0;try{He=_e.then}catch(ft){this.m(ft);return}typeof He=="function"?this.M(He,_e):this.s(_e)},j.prototype.m=function(_e){this.v(2,_e)},j.prototype.s=function(_e){this.v(1,_e)},j.prototype.v=function(_e,He){if(this.i!=0)throw Error("Cannot settle("+_e+", "+He+"): Promise already settled in state"+this.i);this.i=_e,this.j=He,this.i===2&&this.K(),this.H()},j.prototype.K=function(){var _e=this;we(function(){if(_e.D()){var He=i.console;typeof He<"u"&&He.error(_e.j)}},1)},j.prototype.D=function(){if(this.u)return!1;var _e=i.CustomEvent,He=i.Event,ft=i.dispatchEvent;return typeof ft>"u"?!0:(typeof _e=="function"?_e=new _e("unhandledrejection",{cancelable:!0}):typeof He=="function"?_e=new He("unhandledrejection",{cancelable:!0}):(_e=i.document.createEvent("CustomEvent"),_e.initCustomEvent("unhandledrejection",!1,!0,_e)),_e.promise=this,_e.reason=this.j,ft(_e))},j.prototype.H=function(){if(this.h!=null){for(var _e=0;_e<this.h.length;++_e)Ee.i(this.h[_e]);this.h=null}};var Ee=new ee;return j.prototype.L=function(_e){var He=this.l();_e.T(He.resolve,He.reject)},j.prototype.M=function(_e,He){var ft=this.l();try{_e.call(He,ft.resolve,ft.reject)}catch(Ht){ft.reject(Ht)}},j.prototype.then=function(_e,He){function ft(Cn,cn){return typeof Cn=="function"?function(xn){try{Ht(Cn(xn))}catch(ir){Zt(ir)}}:cn}var Ht,Zt,Un=new j(function(Cn,cn){Ht=Cn,Zt=cn});return this.T(ft(_e,Ht),ft(He,Zt)),Un},j.prototype.catch=function(_e){return this.then(void 0,_e)},j.prototype.T=function(_e,He){function ft(){switch(Ht.i){case 1:_e(Ht.j);break;case 2:He(Ht.j);break;default:throw Error("Unexpected state: "+Ht.i)}}var Ht=this;this.h==null?Ee.i(ft):this.h.push(ft),this.u=!0},j.resolve=ae,j.reject=function(_e){return new j(function(He,ft){ft(_e)})},j.race=function(_e){return new j(function(He,ft){for(var Ht=a(_e),Zt=Ht.next();!Zt.done;Zt=Ht.next())ae(Zt.value).T(He,ft)})},j.all=function(_e){var He=a(_e),ft=He.next();return ft.done?ae([]):new j(function(Ht,Zt){function Un(xn){return function(ir){Cn[xn]=ir,cn--,cn==0&&Ht(Cn)}}var Cn=[],cn=0;do Cn.push(void 0),cn++,ae(ft.value).T(Un(Cn.length-1),Zt),ft=He.next();while(!ft.done)})},j});function P(O,j){O instanceof String&&(O+="");var ee=0,ae=!1,we={next:function(){if(!ae&&ee<O.length){var Ee=ee++;return{value:j(Ee,O[Ee]),done:!1}}return ae=!0,{done:!0,value:void 0}}};return we[Symbol.iterator]=function(){return we},we}s("Array.prototype.keys",function(O){return O||function(){return P(this,function(j){return j})}}),s("Array.prototype.fill",function(O){return O||function(j,ee,ae){var we=this.length||0;for(0>ee&&(ee=Math.max(0,we+ee)),(ae==null||ae>we)&&(ae=we),ae=Number(ae),0>ae&&(ae=Math.max(0,we+ae)),ee=Number(ee||0);ee<ae;ee++)this[ee]=j;return this}});function G(O){return O||Array.prototype.fill}s("Int8Array.prototype.fill",G),s("Uint8Array.prototype.fill",G),s("Uint8ClampedArray.prototype.fill",G),s("Int16Array.prototype.fill",G),s("Uint16Array.prototype.fill",G),s("Int32Array.prototype.fill",G),s("Uint32Array.prototype.fill",G),s("Float32Array.prototype.fill",G),s("Float64Array.prototype.fill",G),s("Object.is",function(O){return O||function(j,ee){return j===ee?j!==0||1/j===1/ee:j!==j&&ee!==ee}}),s("Array.prototype.includes",function(O){return O||function(j,ee){var ae=this;ae instanceof String&&(ae=String(ae));var we=ae.length;for(ee=ee||0,0>ee&&(ee=Math.max(ee+we,0));ee<we;ee++){var Ee=ae[ee];if(Ee===j||Object.is(Ee,j))return!0}return!1}}),s("String.prototype.includes",function(O){return O||function(j,ee){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(j instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(j,ee||0)!==-1}});var W=this||self;function q(O,j){O=O.split(".");var ee=W;O[0]in ee||typeof ee.execScript>"u"||ee.execScript("var "+O[0]);for(var ae;O.length&&(ae=O.shift());)O.length||j===void 0?ee[ae]&&ee[ae]!==Object.prototype[ae]?ee=ee[ae]:ee=ee[ae]={}:ee[ae]=j}function z(O){var j;e:{if((j=W.navigator)&&(j=j.userAgent))break e;j=""}return j.indexOf(O)!=-1}var J=Array.prototype.map?function(O,j){return Array.prototype.map.call(O,j,void 0)}:function(O,j){for(var ee=O.length,ae=Array(ee),we=typeof O=="string"?O.split(""):O,Ee=0;Ee<ee;Ee++)Ee in we&&(ae[Ee]=j.call(void 0,we[Ee],Ee,O));return ae},Q={},Y=null;function X(O){var j=O.length,ee=3*j/4;ee%3?ee=Math.floor(ee):"=.".indexOf(O[j-1])!=-1&&(ee="=.".indexOf(O[j-2])!=-1?ee-2:ee-1);var ae=new Uint8Array(ee),we=0;return te(O,function(Ee){ae[we++]=Ee}),we!==ee?ae.subarray(0,we):ae}function te(O,j){function ee(ft){for(;ae<O.length;){var Ht=O.charAt(ae++),Zt=Y[Ht];if(Zt!=null)return Zt;if(!/^[\s\xa0]*$/.test(Ht))throw Error("Unknown base64 encoding at char: "+Ht)}return ft}ne();for(var ae=0;;){var we=ee(-1),Ee=ee(0),_e=ee(64),He=ee(64);if(He===64&&we===-1)break;j(we<<2|Ee>>4),_e!=64&&(j(Ee<<4&240|_e>>2),He!=64&&j(_e<<6&192|He))}}function ne(){if(!Y){Y={};for(var O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),j=["+/=","+/","-_=","-_.","-_"],ee=0;5>ee;ee++){var ae=O.concat(j[ee].split(""));Q[ee]=ae;for(var we=0;we<ae.length;we++){var Ee=ae[we];Y[Ee]===void 0&&(Y[Ee]=we)}}}}var le=typeof Uint8Array<"u",ye=!(z("Trident")||z("MSIE"))&&typeof W.btoa=="function";function ue(O){if(!ye){var j;j===void 0&&(j=0),ne(),j=Q[j];for(var ee=Array(Math.floor(O.length/3)),ae=j[64]||"",we=0,Ee=0;we<O.length-2;we+=3){var _e=O[we],He=O[we+1],ft=O[we+2],Ht=j[_e>>2];_e=j[(_e&3)<<4|He>>4],He=j[(He&15)<<2|ft>>6],ft=j[ft&63],ee[Ee++]=Ht+_e+He+ft}switch(Ht=0,ft=ae,O.length-we){case 2:Ht=O[we+1],ft=j[(Ht&15)<<2]||ae;case 1:O=O[we],ee[Ee]=j[O>>2]+j[(O&3)<<4|Ht>>4]+ft+ae}return ee.join("")}for(j="";10240<O.length;)j+=String.fromCharCode.apply(null,O.subarray(0,10240)),O=O.subarray(10240);return j+=String.fromCharCode.apply(null,O),btoa(j)}var be=RegExp("[-_.]","g");function xe(O){switch(O){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function Pe(O){if(!ye)return X(O);be.test(O)&&(O=O.replace(be,xe)),O=atob(O);for(var j=new Uint8Array(O.length),ee=0;ee<O.length;ee++)j[ee]=O.charCodeAt(ee);return j}var ze;function Ke(){return ze||(ze=new Uint8Array(0))}var pt={},dt=typeof Uint8Array.prototype.slice=="function",pe=0,Le=0;function Ue(O){var j=0>O;O=Math.abs(O);var ee=O>>>0;O=Math.floor((O-ee)/4294967296),j&&(ee=a(je(ee,O)),j=ee.next().value,O=ee.next().value,ee=j),pe=ee>>>0,Le=O>>>0}var Ze=typeof BigInt=="function";function je(O,j){return j=~j,O?O=~O+1:j+=1,[O,j]}function lt(O,j){this.i=O>>>0,this.h=j>>>0}function st(O){if(!O)return at||(at=new lt(0,0));if(!/^-?\d+$/.test(O))return null;if(16>O.length)Ue(Number(O));else if(Ze)O=BigInt(O),pe=Number(O&BigInt(4294967295))>>>0,Le=Number(O>>BigInt(32)&BigInt(4294967295));else{var j=+(O[0]==="-");Le=pe=0;for(var ee=O.length,ae=j,we=(ee-j)%6+j;we<=ee;ae=we,we+=6)ae=Number(O.slice(ae,we)),Le*=1e6,pe=1e6*pe+ae,4294967296<=pe&&(Le+=pe/4294967296|0,pe%=4294967296);j&&(j=a(je(pe,Le)),O=j.next().value,j=j.next().value,pe=O,Le=j)}return new lt(pe,Le)}var at;function Ut(O,j){return Error("Invalid wire type: "+O+" (at position "+j+")")}function mt(){return Error("Failed to read varint, encoding is invalid.")}function ce(O,j){return Error("Tried to read past the end of the data "+j+" > "+O)}function re(){throw Error("Invalid UTF8")}function $e(O,j){return j=String.fromCharCode.apply(null,j),O==null?j:O+j}var qe=void 0,ot,et=typeof TextDecoder<"u",Ft,At=typeof TextEncoder<"u",Ct;function qt(O){if(O!==pt)throw Error("illegal external caller")}function yt(O,j){if(qt(j),this.V=O,O!=null&&O.length===0)throw Error("ByteString should be constructed with non-empty values")}function Mt(){return Ct||(Ct=new yt(null,pt))}function on(O){qt(pt);var j=O.V;return j=j==null||le&&j!=null&&j instanceof Uint8Array?j:typeof j=="string"?Pe(j):null,j==null?j:O.V=j}function tn(O){if(typeof O=="string")return{buffer:Pe(O),C:!1};if(Array.isArray(O))return{buffer:new Uint8Array(O),C:!1};if(O.constructor===Uint8Array)return{buffer:O,C:!1};if(O.constructor===ArrayBuffer)return{buffer:new Uint8Array(O),C:!1};if(O.constructor===yt)return{buffer:on(O)||Ke(),C:!0};if(O instanceof Uint8Array)return{buffer:new Uint8Array(O.buffer,O.byteOffset,O.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function zt(O,j){this.i=null,this.m=!1,this.h=this.j=this.l=0,fn(this,O,j)}function fn(O,j,ee){ee=ee===void 0?{}:ee,O.S=ee.S===void 0?!1:ee.S,j&&(j=tn(j),O.i=j.buffer,O.m=j.C,O.l=0,O.j=O.i.length,O.h=O.l)}zt.prototype.reset=function(){this.h=this.l};function Te(O,j){if(O.h=j,j>O.j)throw ce(O.j,j)}function Xe(O){var j=O.i,ee=O.h,ae=j[ee++],we=ae&127;if(ae&128&&(ae=j[ee++],we|=(ae&127)<<7,ae&128&&(ae=j[ee++],we|=(ae&127)<<14,ae&128&&(ae=j[ee++],we|=(ae&127)<<21,ae&128&&(ae=j[ee++],we|=ae<<28,ae&128&&j[ee++]&128&&j[ee++]&128&&j[ee++]&128&&j[ee++]&128&&j[ee++]&128)))))throw mt();return Te(O,ee),we}function Lt(O,j){if(0>j)throw Error("Tried to read a negative byte length: "+j);var ee=O.h,ae=ee+j;if(ae>O.j)throw ce(j,O.j-ee);return O.h=ae,ee}var en=[];function Vt(){this.h=[]}Vt.prototype.length=function(){return this.h.length},Vt.prototype.end=function(){var O=this.h;return this.h=[],O};function Ot(O,j,ee){for(;0<ee||127<j;)O.h.push(j&127|128),j=(j>>>7|ee<<25)>>>0,ee>>>=7;O.h.push(j)}function un(O,j){for(;127<j;)O.h.push(j&127|128),j>>>=7;O.h.push(j)}function In(O,j){if(en.length){var ee=en.pop();fn(ee,O,j),O=ee}else O=new zt(O,j);this.h=O,this.j=this.h.h,this.i=this.l=-1,this.setOptions(j)}In.prototype.setOptions=function(O){O=O===void 0?{}:O,this.ca=O.ca===void 0?!1:O.ca},In.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function Tr(O){var j=O.h;if(j.h==j.j)return!1;O.j=O.h.h;var ee=Xe(O.h)>>>0;if(j=ee>>>3,ee&=7,!(0<=ee&&5>=ee))throw Ut(ee,O.j);if(1>j)throw Error("Invalid field number: "+j+" (at position "+O.j+")");return O.l=j,O.i=ee,!0}function lr(O){switch(O.i){case 0:if(O.i!=0)lr(O);else e:{O=O.h;for(var j=O.h,ee=j+10,ae=O.i;j<ee;)if((ae[j++]&128)===0){Te(O,j);break e}throw mt()}break;case 1:O=O.h,Te(O,O.h+8);break;case 2:O.i!=2?lr(O):(j=Xe(O.h)>>>0,O=O.h,Te(O,O.h+j));break;case 5:O=O.h,Te(O,O.h+4);break;case 3:j=O.l;do{if(!Tr(O))throw Error("Unmatched start-group tag: stream EOF");if(O.i==4){if(O.l!=j)throw Error("Unmatched end-group tag");break}lr(O)}while(!0);break;default:throw Ut(O.i,O.j)}}var to=[];function ns(){this.j=[],this.i=0,this.h=new Vt}function pi(O,j){j.length!==0&&(O.j.push(j),O.i+=j.length)}function Si(O,j){if(j=j.R){pi(O,O.h.end());for(var ee=0;ee<j.length;ee++)pi(O,on(j[ee])||Ke())}}var Ri=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function as(O,j){return Ri?O[Ri]|=j:O.A!==void 0?O.A|=j:(Object.defineProperties(O,{A:{value:j,configurable:!0,writable:!0,enumerable:!1}}),j)}function Fa(O,j){Ri?O[Ri]&&(O[Ri]&=~j):O.A!==void 0&&(O.A&=~j)}function vr(O){var j;return Ri?j=O[Ri]:j=O.A,j??0}function Nn(O,j){Ri?O[Ri]=j:O.A!==void 0?O.A=j:Object.defineProperties(O,{A:{value:j,configurable:!0,writable:!0,enumerable:!1}})}function Fs(O){return as(O,1),O}function ci(O,j){Nn(j,(O|0)&-51)}function oe(O,j){Nn(j,(O|18)&-41)}var me={};function Oe(O){return O!==null&&typeof O=="object"&&!Array.isArray(O)&&O.constructor===Object}var nt,ct=[];Nn(ct,23),nt=Object.freeze(ct);function St(O){if(vr(O.o)&2)throw Error("Cannot mutate an immutable Message")}function jt(O){var j=O.length;(j=j?O[j-1]:void 0)&&Oe(j)?j.g=1:(j={},O.push((j.g=1,j)))}function se(O){var j=O.i+O.G;return O.B||(O.B=O.o[j]={})}function Se(O,j){return j===-1?null:j>=O.i?O.B?O.B[j]:void 0:O.o[j+O.G]}function Ae(O,j,ee,ae){St(O),Me(O,j,ee,ae)}function Me(O,j,ee,ae){O.j&&(O.j=void 0),j>=O.i||ae?se(O)[j]=ee:(O.o[j+O.G]=ee,(O=O.B)&&j in O&&delete O[j])}function Ce(O,j,ee,ae){var we=Se(O,j);Array.isArray(we)||(we=nt);var Ee=vr(we);if(Ee&1||Fs(we),ae)Ee&2||as(we,2),ee&1||Object.freeze(we);else{ae=!(ee&2);var _e=Ee&2;ee&1||!_e?ae&&Ee&16&&!_e&&Fa(we,16):(we=Fs(Array.prototype.slice.call(we)),Me(O,j,we))}return we}function It(O,j){var ee=Se(O,j),ae=ee==null?ee:typeof ee=="number"||ee==="NaN"||ee==="Infinity"||ee==="-Infinity"?Number(ee):void 0;return ae!=null&&ae!==ee&&Me(O,j,ae),ae}function vt(O,j,ee,ae,we){O.h||(O.h={});var Ee=O.h[ee],_e=Ce(O,ee,3,we);if(!Ee){var He=_e;Ee=[];var ft=!!(vr(O.o)&16);_e=!!(vr(He)&2);var Ht=He;!we&&_e&&(He=Array.prototype.slice.call(He));for(var Zt=_e,Un=0;Un<He.length;Un++){var Cn=He[Un],cn=j,xn=!1;if(xn=xn===void 0?!1:xn,Cn=Array.isArray(Cn)?new cn(Cn):xn?new cn:void 0,Cn!==void 0){cn=Cn.o;var ir=xn=vr(cn);_e&&(ir|=2),ft&&(ir|=16),ir!=xn&&Nn(cn,ir),cn=ir,Zt=Zt||!!(2&cn),Ee.push(Cn)}}return O.h[ee]=Ee,ft=vr(He),j=ft|33,j=Zt?j&-9:j|8,ft!=j&&(Zt=He,Object.isFrozen(Zt)&&(Zt=Array.prototype.slice.call(Zt)),Nn(Zt,j),He=Zt),Ht!==He&&Me(O,ee,He),(we||ae&&_e)&&as(Ee,2),ae&&Object.freeze(Ee),Ee}return we||(we=Object.isFrozen(Ee),ae&&!we?Object.freeze(Ee):!ae&&we&&(Ee=Array.prototype.slice.call(Ee),O.h[ee]=Ee)),Ee}function Tt(O,j,ee){var ae=!!(vr(O.o)&2);if(j=vt(O,j,ee,ae,ae),O=Ce(O,ee,3,ae),!(ae||vr(O)&8)){for(ae=0;ae<j.length;ae++){if(ee=j[ae],vr(ee.o)&2){var we=cr(ee,!1);we.j=ee}else we=ee;ee!==we&&(j[ae]=we,O[ae]=we.o)}as(O,8)}return j}function Et(O,j,ee){if(ee!=null&&typeof ee!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof ee+": "+ee);Ae(O,j,ee)}function Xt(O,j,ee,ae,we){St(O);var Ee=vt(O,ee,j,!1,!1);return ee=ae??new ee,O=Ce(O,j,2,!1),we!=null?(Ee.splice(we,0,ee),O.splice(we,0,ee.o)):(Ee.push(ee),O.push(ee.o)),ee.C()&&Fa(O,8),ee}function Qt(O,j){return O??j}function Wt(O,j,ee){return ee=ee===void 0?0:ee,Qt(It(O,j),ee)}var bn;function Hn(O){switch(typeof O){case"number":return isFinite(O)?O:String(O);case"object":if(O)if(Array.isArray(O)){if((vr(O)&128)!==0)return O=Array.prototype.slice.call(O),jt(O),O}else{if(le&&O!=null&&O instanceof Uint8Array)return ue(O);if(O instanceof yt){var j=O.V;return j==null?"":typeof j=="string"?j:O.V=ue(j)}}}return O}function On(O,j,ee,ae){if(O!=null){if(Array.isArray(O))O=ar(O,j,ee,ae!==void 0);else if(Oe(O)){var we={},Ee;for(Ee in O)we[Ee]=On(O[Ee],j,ee,ae);O=we}else O=j(O,ae);return O}}function ar(O,j,ee,ae){var we=vr(O);ae=ae?!!(we&16):void 0,O=Array.prototype.slice.call(O);for(var Ee=0;Ee<O.length;Ee++)O[Ee]=On(O[Ee],j,ee,ae);return ee(we,O),O}function yn(O){return O.ja===me?O.toJSON():Hn(O)}function ln(O,j){O&128&&jt(j)}function Rr(O,j,ee){if(ee=ee===void 0?oe:ee,O!=null){if(le&&O instanceof Uint8Array)return O.length?new yt(new Uint8Array(O),pt):Mt();if(Array.isArray(O)){var ae=vr(O);return ae&2?O:j&&!(ae&32)&&(ae&16||ae===0)?(Nn(O,ae|2),O):(O=ar(O,Rr,ae&4?oe:ee,!0),j=vr(O),j&4&&j&2&&Object.freeze(O),O)}return O.ja===me?Kr(O):O}}function Jn(O,j,ee,ae,we,Ee,_e){if(O=O.h&&O.h[ee]){if(ae=vr(O),ae&2?ae=O:(Ee=J(O,Kr),oe(ae,Ee),Object.freeze(Ee),ae=Ee),St(j),_e=ae==null?nt:Fs([]),ae!=null){for(Ee=!!ae.length,O=0;O<ae.length;O++){var He=ae[O];Ee=Ee&&!(vr(He.o)&2),_e[O]=He.o}Ee=(Ee?8:0)|1,O=vr(_e),(O&Ee)!==Ee&&(Object.isFrozen(_e)&&(_e=Array.prototype.slice.call(_e)),Nn(_e,O|Ee)),j.h||(j.h={}),j.h[ee]=ae}else j.h&&(j.h[ee]=void 0);Me(j,ee,_e,we)}else Ae(j,ee,Rr(ae,Ee,_e),we)}function Kr(O){return vr(O.o)&2||(O=cr(O,!0),as(O.o,2)),O}function cr(O,j){var ee=O.o,ae=[];as(ae,16);var we=O.constructor.h;if(we&&ae.push(we),we=O.B,we){ae.length=ee.length,ae.fill(void 0,ae.length,ee.length);var Ee={};ae[ae.length-1]=Ee}(vr(ee)&128)!==0&&jt(ae),j=j||O.C()?oe:ci,Ee=O.constructor,bn=ae,ae=new Ee(ae),bn=void 0,O.R&&(ae.R=O.R.slice()),Ee=!!(vr(ee)&16);for(var _e=we?ee.length-1:ee.length,He=0;He<_e;He++)Jn(O,ae,He-O.G,ee[He],!1,Ee,j);if(we)for(var ft in we)Jn(O,ae,+ft,we[ft],!0,Ee,j);return ae}function jn(O,j,ee){O==null&&(O=bn),bn=void 0;var ae=this.constructor.i||0,we=0<ae,Ee=this.constructor.h,_e=!1;if(O==null){O=Ee?[Ee]:[];var He=48,ft=!0;we&&(ae=0,He|=128),Nn(O,He)}else{if(!Array.isArray(O)||Ee&&Ee!==O[0])throw Error();var Ht=He=as(O,0);if((ft=(16&Ht)!==0)&&((_e=(32&Ht)!==0)||(Ht|=32)),we){if(128&Ht)ae=0;else if(0<O.length){var Zt=O[O.length-1];if(Oe(Zt)&&"g"in Zt){ae=0,Ht|=128,delete Zt.g;var Un=!0,Cn;for(Cn in Zt){Un=!1;break}Un&&O.pop()}}}else if(128&Ht)throw Error();He!==Ht&&Nn(O,Ht)}this.G=(Ee?0:-1)-ae,this.h=void 0,this.o=O;e:{if(Ee=this.o.length,ae=Ee-1,Ee&&(Ee=this.o[ae],Oe(Ee))){this.B=Ee,this.i=ae-this.G;break e}j!==void 0&&-1<j?(this.i=Math.max(j,ae+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!we&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(ee){j=ft&&!_e&&!0,we=this.i;var cn;for(ft=0;ft<ee.length;ft++)_e=ee[ft],_e<we?(_e+=this.G,(ae=O[_e])?Zn(ae,j):O[_e]=nt):(cn||(cn=se(this)),(ae=cn[_e])?Zn(ae,j):cn[_e]=nt)}}jn.prototype.toJSON=function(){return ar(this.o,yn,ln)},jn.prototype.C=function(){return!!(vr(this.o)&2)};function Zn(O,j){if(Array.isArray(O)){var ee=vr(O),ae=1;!j||ee&2||(ae|=16),(ee&ae)!==ae&&Nn(O,ee|ae)}}jn.prototype.ja=me,jn.prototype.toString=function(){return this.o.toString()};function Mn(O,j,ee){if(ee){var ae={},we;for(we in ee){var Ee=ee[we],_e=Ee.qa;_e||(ae.J=Ee.wa||Ee.oa.W,Ee.ia?(ae.aa=vh(Ee.ia),_e=function(He){return function(ft,Ht,Zt){return He.J(ft,Ht,Zt,He.aa)}}(ae)):Ee.ka?(ae.Z=Pf(Ee.da.P,Ee.ka),_e=function(He){return function(ft,Ht,Zt){return He.J(ft,Ht,Zt,He.Z)}}(ae)):_e=ae.J,Ee.qa=_e),_e(j,O,Ee.da),ae={J:ae.J,aa:ae.aa,Z:ae.Z}}}Si(j,O)}var Wr=Symbol();function wi(O,j,ee){return O[Wr]||(O[Wr]=function(ae,we){return j(ae,we,ee)})}function Sr(O){var j=O[Wr];if(!j){var ee=Pa(O);j=function(ae,we){return xh(ae,we,ee)},O[Wr]=j}return j}function _i(O){var j=O.ia;if(j)return Sr(j);if(j=O.va)return wi(O.da.P,j,O.ka)}function ad(O){var j=_i(O),ee=O.da,ae=O.oa.U;return j?function(we,Ee){return ae(we,Ee,ee,j)}:function(we,Ee){return ae(we,Ee,ee)}}function ps(O,j){var ee=O[j];return typeof ee=="function"&&ee.length===0&&(ee=ee(),O[j]=ee),Array.isArray(ee)&&(ul in ee||ld in ee||0<ee.length&&typeof ee[0]=="function")?ee:void 0}function s0(O,j,ee,ae,we,Ee){j.P=O[0];var _e=1;if(O.length>_e&&typeof O[_e]!="number"){var He=O[_e++];ee(j,He)}for(;_e<O.length;){ee=O[_e++];for(var ft=_e+1;ft<O.length&&typeof O[ft]!="number";)ft++;switch(He=O[_e++],ft-=_e,ft){case 0:ae(j,ee,He);break;case 1:(ft=ps(O,_e))?(_e++,we(j,ee,He,ft)):ae(j,ee,He,O[_e++]);break;case 2:ft=_e++,ft=ps(O,ft),we(j,ee,He,ft,O[_e++]);break;case 3:Ee(j,ee,He,O[_e++],O[_e++],O[_e++]);break;case 4:Ee(j,ee,He,O[_e++],O[_e++],O[_e++],O[_e++]);break;default:throw Error("unexpected number of binary field arguments: "+ft)}}return j}var uu=Symbol();function vh(O){var j=O[uu];if(!j){var ee=Xl(O);j=function(ae,we){return cd(ae,we,ee)},O[uu]=j}return j}function Pf(O,j){var ee=O[uu];return ee||(ee=function(ae,we){return Mn(ae,we,j)},O[uu]=ee),ee}var ld=Symbol();function Wv(O,j){O.push(j)}function Uf(O,j,ee){O.push(j,ee.W)}function cm(O,j,ee,ae){var we=vh(ae),Ee=Xl(ae).P,_e=ee.W;O.push(j,function(He,ft,Ht){return _e(He,ft,Ht,Ee,we)})}function um(O,j,ee,ae,we,Ee){var _e=Pf(ae,Ee),He=ee.W;O.push(j,function(ft,Ht,Zt){return He(ft,Ht,Zt,ae,_e)})}function Xl(O){var j=O[ld];return j||(j=s0(O,O[ld]=[],Wv,Uf,cm,um),ul in O&&ld in O&&(O.length=0),j)}var ul=Symbol();function o0(O,j){O[0]=j}function zf(O,j,ee,ae){var we=ee.U;O[j]=ae?function(Ee,_e,He){return we(Ee,_e,He,ae)}:we}function a0(O,j,ee,ae,we){var Ee=ee.U,_e=Sr(ae),He=Pa(ae).P;O[j]=function(ft,Ht,Zt){return Ee(ft,Ht,Zt,He,_e,we)}}function bh(O,j,ee,ae,we,Ee,_e){var He=ee.U,ft=wi(ae,we,Ee);O[j]=function(Ht,Zt,Un){return He(Ht,Zt,Un,ae,ft,_e)}}function Pa(O){var j=O[ul];return j||(j=s0(O,O[ul]={},o0,zf,a0,bh),ul in O&&ld in O&&(O.length=0),j)}function xh(O,j,ee){for(;Tr(j)&&j.i!=4;){var ae=j.l,we=ee[ae];if(!we){var Ee=ee[0];Ee&&(Ee=Ee[ae])&&(we=ee[ae]=ad(Ee))}if(!we||!we(j,O,ae)){we=j,ae=O,Ee=we.j,lr(we);var _e=we;if(!_e.ca){if(we=_e.h.h-Ee,_e.h.h=Ee,_e=_e.h,we==0)we=Mt();else{if(Ee=Lt(_e,we),_e.S&&_e.m)we=_e.i.subarray(Ee,Ee+we);else{_e=_e.i;var He=Ee;we=Ee+we,we=He===we?Ke():dt?_e.slice(He,we):new Uint8Array(_e.subarray(He,we))}we=we.length==0?Mt():new yt(we,pt)}(Ee=ae.R)?Ee.push(we):ae.R=[we]}}}return O}function cd(O,j,ee){for(var ae=ee.length,we=ae%2==1,Ee=we?1:0;Ee<ae;Ee+=2)(0,ee[Ee+1])(j,O,ee[Ee]);Mn(O,j,we?ee[0]:void 0)}function pa(O,j){return{U:O,W:j}}var ma=pa(function(O,j,ee){if(O.i!==5)return!1;O=O.h;var ae=O.i,we=O.h,Ee=ae[we],_e=ae[we+1],He=ae[we+2];return ae=ae[we+3],Te(O,O.h+4),_e=(Ee<<0|_e<<8|He<<16|ae<<24)>>>0,O=2*(_e>>31)+1,Ee=_e>>>23&255,_e&=8388607,Ae(j,ee,Ee==255?_e?NaN:1/0*O:Ee==0?O*Math.pow(2,-149)*_e:O*Math.pow(2,Ee-150)*(_e+Math.pow(2,23))),!0},function(O,j,ee){if(j=It(j,ee),j!=null){un(O.h,8*ee+5),O=O.h;var ae=+j;ae===0?0<1/ae?pe=Le=0:(Le=0,pe=2147483648):isNaN(ae)?(Le=0,pe=2147483647):(ae=(ee=0>ae?-2147483648:0)?-ae:ae,34028234663852886e22<ae?(Le=0,pe=(ee|2139095040)>>>0):11754943508222875e-54>ae?(ae=Math.round(ae/Math.pow(2,-149)),Le=0,pe=(ee|ae)>>>0):(j=Math.floor(Math.log(ae)/Math.LN2),ae*=Math.pow(2,-j),ae=Math.round(8388608*ae),16777216<=ae&&++j,Le=0,pe=(ee|j+127<<23|ae&8388607)>>>0)),ee=pe,O.h.push(ee>>>0&255),O.h.push(ee>>>8&255),O.h.push(ee>>>16&255),O.h.push(ee>>>24&255)}}),dm=pa(function(O,j,ee){if(O.i!==0)return!1;var ae=O.h,we=0,Ee=O=0,_e=ae.i,He=ae.h;do{var ft=_e[He++];we|=(ft&127)<<Ee,Ee+=7}while(32>Ee&&ft&128);for(32<Ee&&(O|=(ft&127)>>4),Ee=3;32>Ee&&ft&128;Ee+=7)ft=_e[He++],O|=(ft&127)<<Ee;if(Te(ae,He),128>ft)ae=we>>>0,ft=O>>>0,(O=ft&2147483648)&&(ae=~ae+1>>>0,ft=~ft>>>0,ae==0&&(ft=ft+1>>>0)),ae=4294967296*ft+(ae>>>0);else throw mt();return Ae(j,ee,O?-ae:ae),!0},function(O,j,ee){j=Se(j,ee),j!=null&&(typeof j=="string"&&st(j),j!=null&&(un(O.h,8*ee),typeof j=="number"?(O=O.h,Ue(j),Ot(O,pe,Le)):(ee=st(j),Ot(O.h,ee.i,ee.h))))}),l0=pa(function(O,j,ee){return O.i!==0?!1:(Ae(j,ee,Xe(O.h)),!0)},function(O,j,ee){if(j=Se(j,ee),j!=null&&j!=null)if(un(O.h,8*ee),O=O.h,ee=j,0<=ee)un(O,ee);else{for(j=0;9>j;j++)O.h.push(ee&127|128),ee>>=7;O.h.push(1)}}),Oc=pa(function(O,j,ee){if(O.i!==2)return!1;var ae=Xe(O.h)>>>0;O=O.h;var we=Lt(O,ae);if(O=O.i,et){var Ee=O,_e;(_e=ot)||(_e=ot=new TextDecoder("utf-8",{fatal:!0})),O=we+ae,Ee=we===0&&O===Ee.length?Ee:Ee.subarray(we,O);try{var He=_e.decode(Ee)}catch(Un){if(qe===void 0){try{_e.decode(new Uint8Array([128]))}catch{}try{_e.decode(new Uint8Array([97])),qe=!0}catch{qe=!1}}throw!qe&&(ot=void 0),Un}}else{He=we,ae=He+ae,we=[];for(var ft=null,Ht,Zt;He<ae;)Ht=O[He++],128>Ht?we.push(Ht):224>Ht?He>=ae?re():(Zt=O[He++],194>Ht||(Zt&192)!==128?(He--,re()):we.push((Ht&31)<<6|Zt&63)):240>Ht?He>=ae-1?re():(Zt=O[He++],(Zt&192)!==128||Ht===224&&160>Zt||Ht===237&&160<=Zt||((Ee=O[He++])&192)!==128?(He--,re()):we.push((Ht&15)<<12|(Zt&63)<<6|Ee&63)):244>=Ht?He>=ae-2?re():(Zt=O[He++],(Zt&192)!==128||(Ht<<28)+(Zt-144)>>30!==0||((Ee=O[He++])&192)!==128||((_e=O[He++])&192)!==128?(He--,re()):(Ht=(Ht&7)<<18|(Zt&63)<<12|(Ee&63)<<6|_e&63,Ht-=65536,we.push((Ht>>10&1023)+55296,(Ht&1023)+56320))):re(),8192<=we.length&&(ft=$e(ft,we),we.length=0);He=$e(ft,we)}return Ae(j,ee,He),!0},function(O,j,ee){if(j=Se(j,ee),j!=null){var ae=!1;if(ae=ae===void 0?!1:ae,At){if(ae&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(j))throw Error("Found an unpaired surrogate");j=(Ft||(Ft=new TextEncoder)).encode(j)}else{for(var we=0,Ee=new Uint8Array(3*j.length),_e=0;_e<j.length;_e++){var He=j.charCodeAt(_e);if(128>He)Ee[we++]=He;else{if(2048>He)Ee[we++]=He>>6|192;else{if(55296<=He&&57343>=He){if(56319>=He&&_e<j.length){var ft=j.charCodeAt(++_e);if(56320<=ft&&57343>=ft){He=1024*(He-55296)+ft-56320+65536,Ee[we++]=He>>18|240,Ee[we++]=He>>12&63|128,Ee[we++]=He>>6&63|128,Ee[we++]=He&63|128;continue}else _e--}if(ae)throw Error("Found an unpaired surrogate");He=65533}Ee[we++]=He>>12|224,Ee[we++]=He>>6&63|128}Ee[we++]=He&63|128}}j=we===Ee.length?Ee:Ee.subarray(0,we)}un(O.h,8*ee+2),un(O.h,j.length),pi(O,O.h.end()),pi(O,j)}}),ud=pa(function(O,j,ee,ae,we){if(O.i!==2)return!1;j=Xt(j,ee,ae),ee=O.h.j,ae=Xe(O.h)>>>0;var Ee=O.h.h+ae,_e=Ee-ee;if(0>=_e&&(O.h.j=Ee,we(j,O,void 0,void 0,void 0),_e=Ee-O.h.h),_e)throw Error("Message parsing ended unexpectedly. Expected to read "+(ae+" bytes, instead read "+(ae-_e)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return O.h.h=Ee,O.h.j=ee,!0},function(O,j,ee,ae,we){if(j=Tt(j,ae,ee),j!=null)for(ae=0;ae<j.length;ae++){var Ee=O;un(Ee.h,8*ee+2);var _e=Ee.h.end();pi(Ee,_e),_e.push(Ee.i),Ee=_e,we(j[ae],O),_e=O;var He=Ee.pop();for(He=_e.i+_e.h.length()-He;127<He;)Ee.push(He&127|128),He>>>=7,_e.i++;Ee.push(He),_e.i++}});function dd(O){return function(j,ee){e:{if(to.length){var ae=to.pop();ae.setOptions(ee),fn(ae.h,j,ee),j=ae}else j=new In(j,ee);try{var we=Pa(O),Ee=xh(new we.P,j,we);break e}finally{we=j.h,we.i=null,we.m=!1,we.l=0,we.j=0,we.h=0,we.S=!1,j.l=-1,j.i=-1,100>to.length&&to.push(j)}Ee=void 0}return Ee}}function no(O){return function(){var j=new ns;cd(this,j,Xl(O)),pi(j,j.h.end());for(var ee=new Uint8Array(j.i),ae=j.j,we=ae.length,Ee=0,_e=0;_e<we;_e++){var He=ae[_e];ee.set(He,Ee),Ee+=He.length}return j.j=[ee],ee}}function ga(O){jn.call(this,O)}b(ga,jn);var hd=[ga,1,l0,2,ma,3,Oc,4,Oc];ga.prototype.l=no(hd);function du(O){jn.call(this,O,-1,jv)}b(du,jn),du.prototype.addClassification=function(O,j){return Xt(this,1,ga,O,j),this};var jv=[1],ql=dd([du,1,ud,hd]);function dl(O){jn.call(this,O)}b(dl,jn);var fd=[dl,1,ma,2,ma,3,ma,4,ma,5,ma];dl.prototype.l=no(fd);function pd(O){jn.call(this,O,-1,c0)}b(pd,jn);var c0=[1],u0=dd([pd,1,ud,fd]);function hm(O){jn.call(this,O)}b(hm,jn);var Ps=[hm,1,ma,2,ma,3,ma,4,ma,5,ma,6,dm],fm=dd(Ps);hm.prototype.l=no(Ps);function d0(O,j,ee){if(ee=O.createShader(ee===0?O.VERTEX_SHADER:O.FRAGMENT_SHADER),O.shaderSource(ee,j),O.compileShader(ee),!O.getShaderParameter(ee,O.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+O.getShaderInfoLog(ee));return ee}function h0(O){return Tt(O,ga,1).map(function(j){var ee=Se(j,1);return{index:ee??0,score:Wt(j,2),label:Se(j,3)!=null?Qt(Se(j,3),""):void 0,displayName:Se(j,4)!=null?Qt(Se(j,4),""):void 0}})}function f0(O){return{x:Wt(O,1),y:Wt(O,2),z:Wt(O,3),visibility:It(O,4)!=null?Wt(O,4):void 0}}function p0(O){return O.map(function(j){return Tt(u0(j),dl,1).map(f0)})}function md(O,j){this.i=O,this.h=j,this.m=0}function Hf(O,j,ee){return Xv(O,j),typeof O.h.canvas.transferToImageBitmap=="function"?Promise.resolve(O.h.canvas.transferToImageBitmap()):ee?Promise.resolve(O.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(O.h.canvas):(O.j===void 0&&(O.j=document.createElement("canvas")),new Promise(function(ae){O.j.height=O.h.canvas.height,O.j.width=O.h.canvas.width,O.j.getContext("2d",{}).drawImage(O.h.canvas,0,0,O.h.canvas.width,O.h.canvas.height),ae(O.j)}))}function Xv(O,j){var ee=O.h;if(O.s===void 0){var ae=d0(ee,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),we=d0(ee,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),Ee=ee.createProgram();if(ee.attachShader(Ee,ae),ee.attachShader(Ee,we),ee.linkProgram(Ee),!ee.getProgramParameter(Ee,ee.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+ee.getProgramInfoLog(Ee));ae=O.s=Ee,ee.useProgram(ae),we=ee.getUniformLocation(ae,"sampler0"),O.l={O:ee.getAttribLocation(ae,"aVertex"),N:ee.getAttribLocation(ae,"aTex"),xa:we},O.v=ee.createBuffer(),ee.bindBuffer(ee.ARRAY_BUFFER,O.v),ee.enableVertexAttribArray(O.l.O),ee.vertexAttribPointer(O.l.O,2,ee.FLOAT,!1,0,0),ee.bufferData(ee.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),ee.STATIC_DRAW),ee.bindBuffer(ee.ARRAY_BUFFER,null),O.u=ee.createBuffer(),ee.bindBuffer(ee.ARRAY_BUFFER,O.u),ee.enableVertexAttribArray(O.l.N),ee.vertexAttribPointer(O.l.N,2,ee.FLOAT,!1,0,0),ee.bufferData(ee.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),ee.STATIC_DRAW),ee.bindBuffer(ee.ARRAY_BUFFER,null),ee.uniform1i(we,0)}ae=O.l,ee.useProgram(O.s),ee.canvas.width=j.width,ee.canvas.height=j.height,ee.viewport(0,0,j.width,j.height),ee.activeTexture(ee.TEXTURE0),O.i.bindTexture2d(j.glName),ee.enableVertexAttribArray(ae.O),ee.bindBuffer(ee.ARRAY_BUFFER,O.v),ee.vertexAttribPointer(ae.O,2,ee.FLOAT,!1,0,0),ee.enableVertexAttribArray(ae.N),ee.bindBuffer(ee.ARRAY_BUFFER,O.u),ee.vertexAttribPointer(ae.N,2,ee.FLOAT,!1,0,0),ee.bindFramebuffer(ee.DRAW_FRAMEBUFFER?ee.DRAW_FRAMEBUFFER:ee.FRAMEBUFFER,null),ee.clearColor(0,0,0,0),ee.clear(ee.COLOR_BUFFER_BIT),ee.colorMask(!0,!0,!0,!0),ee.drawArrays(ee.TRIANGLE_FAN,0,4),ee.disableVertexAttribArray(ae.O),ee.disableVertexAttribArray(ae.N),ee.bindBuffer(ee.ARRAY_BUFFER,null),O.i.bindTexture2d(0)}function qv(O){this.h=O}var Kv=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function m0(O,j){return j+O}function Sh(O,j){window[O]=j}function Yv(O){var j=document.createElement("script");return j.setAttribute("src",O),j.setAttribute("crossorigin","anonymous"),new Promise(function(ee){j.addEventListener("load",function(){ee()},!1),j.addEventListener("error",function(){ee()},!1),document.body.appendChild(j)})}function g0(){return D(function(O){switch(O.h){case 1:return O.s=2,C(O,WebAssembly.instantiate(Kv),4);case 4:O.h=3,O.s=0;break;case 2:return O.s=0,O.l=null,O.return(!1);case 3:return O.return(!0)}})}function Vf(O){if(this.h=O,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=O&&O.locateFile||m0,typeof window=="object")var j=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")j=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=j,O.options){j=a(Object.keys(O.options));for(var ee=j.next();!ee.done;ee=j.next()){ee=ee.value;var ae=O.options[ee].default;ae!==void 0&&(this.l[ee]=typeof ae=="function"?ae():ae)}}}n=Vf.prototype,n.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function pm(O){var j,ee,ae,we,Ee,_e,He,ft,Ht,Zt,Un;return D(function(Cn){switch(Cn.h){case 1:return O.ga?(j=O.h.files===void 0?[]:typeof O.h.files=="function"?O.h.files(O.l):O.h.files,C(Cn,g0(),2)):Cn.return();case 2:if(ee=Cn.i,typeof window=="object")return Sh("createMediapipeSolutionsWasm",{locateFile:O.locateFile}),Sh("createMediapipeSolutionsPackedAssets",{locateFile:O.locateFile}),_e=j.filter(function(cn){return cn.data!==void 0}),He=j.filter(function(cn){return cn.data===void 0}),ft=Promise.all(_e.map(function(cn){var xn=Gf(O,cn.url);if(cn.path!==void 0){var ir=cn.path;xn=xn.then(function(Yr){return O.overrideFile(ir,Yr),Promise.resolve(Yr)})}return xn})),Ht=Promise.all(He.map(function(cn){return cn.simd===void 0||cn.simd&&ee||!cn.simd&&!ee?Yv(O.locateFile(cn.url,O.ha)):Promise.resolve()})).then(function(){var cn,xn,ir;return D(function(Yr){if(Yr.h==1)return cn=window.createMediapipeSolutionsWasm,xn=window.createMediapipeSolutionsPackedAssets,ir=O,C(Yr,cn(xn),2);ir.i=Yr.i,Yr.h=0})}),Zt=function(){return D(function(cn){return O.h.graph&&O.h.graph.url?cn=C(cn,Gf(O,O.h.graph.url),0):(cn.h=0,cn=void 0),cn})}(),C(Cn,Promise.all([Ht,ft,Zt]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return ae=j.filter(function(cn){return cn.simd===void 0||cn.simd&&ee||!cn.simd&&!ee}).map(function(cn){return O.locateFile(cn.url,O.ha)}),importScripts.apply(null,l(ae)),we=O,C(Cn,createMediapipeSolutionsWasm(Module),6);case 6:we.i=Cn.i,O.m=new OffscreenCanvas(1,1),O.i.canvas=O.m,Ee=O.i.GL.createContext(O.m,{antialias:!1,alpha:!1,ua:typeof WebGL2RenderingContext<"u"?2:1}),O.i.GL.makeContextCurrent(Ee),Cn.h=4;break;case 7:if(O.m=document.createElement("canvas"),Un=O.m.getContext("webgl2",{}),!Un&&(Un=O.m.getContext("webgl",{}),!Un))return alert("Failed to create WebGL canvas context when passing video frame."),Cn.return();O.K=Un,O.i.canvas=O.m,O.i.createContext(O.m,!0,!0,{});case 4:O.j=new O.i.SolutionWasm,O.ga=!1,Cn.h=0}})}function Jv(O){var j,ee,ae,we,Ee,_e,He,ft;return D(function(Ht){if(Ht.h==1){if(O.h.graph&&O.h.graph.url&&O.fa===O.h.graph.url)return Ht.return();if(O.u=!0,!O.h.graph||!O.h.graph.url){Ht.h=2;return}return O.fa=O.h.graph.url,C(Ht,Gf(O,O.h.graph.url),3)}for(Ht.h!=2&&(j=Ht.i,O.j.loadGraph(j)),ee=a(Object.keys(O.D)),ae=ee.next();!ae.done;ae=ee.next())we=ae.value,O.j.overrideFile(we,O.D[we]);if(O.D={},O.h.listeners)for(Ee=a(O.h.listeners),_e=Ee.next();!_e.done;_e=Ee.next())He=_e.value,mS(O,He);ft=O.l,O.l={},O.setOptions(ft),Ht.h=0})}n.reset=function(){var O=this;return D(function(j){O.j&&(O.j.reset(),O.s={},O.v={}),j.h=0})},n.setOptions=function(O,j){var ee=this;if(j=j||this.h.options){for(var ae=[],we=[],Ee={},_e=a(Object.keys(O)),He=_e.next();!He.done;Ee={X:Ee.X,Y:Ee.Y},He=_e.next())if(He=He.value,!(He in this.l&&this.l[He]===O[He])){this.l[He]=O[He];var ft=j[He];ft!==void 0&&(ft.onChange&&(Ee.X=ft.onChange,Ee.Y=O[He],ae.push(function(Ht){return function(){var Zt;return D(function(Un){if(Un.h==1)return C(Un,Ht.X(Ht.Y),2);Zt=Un.i,Zt===!0&&(ee.u=!0),Un.h=0})}}(Ee))),ft.graphOptionXref&&(He=Object.assign({},{calculatorName:"",calculatorIndex:0},ft.graphOptionXref,{valueNumber:ft.type===1?O[He]:0,valueBoolean:ft.type===0?O[He]:!1,valueString:ft.type===2?O[He]:""}),we.push(He)))}(ae.length!==0||we.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(we),this.F=(this.F===void 0?[]:this.F).concat(ae))}};function y0(O){var j,ee,ae,we,Ee,_e,He;return D(function(ft){switch(ft.h){case 1:if(!O.u)return ft.return();if(!O.F){ft.h=2;break}j=a(O.F),ee=j.next();case 3:if(ee.done){ft.h=5;break}return ae=ee.value,C(ft,ae(),4);case 4:ee=j.next(),ft.h=3;break;case 5:O.F=void 0;case 2:if(O.H){for(we=new O.i.GraphOptionChangeRequestList,Ee=a(O.H),_e=Ee.next();!_e.done;_e=Ee.next())He=_e.value,we.push_back(He);O.j.changeOptions(we),we.delete(),O.H=void 0}O.u=!1,ft.h=0}})}n.initialize=function(){var O=this;return D(function(j){return j.h==1?C(j,pm(O),2):j.h!=3?C(j,Jv(O),3):C(j,y0(O),0)})};function Gf(O,j){var ee,ae;return D(function(we){return j in O.L?we.return(O.L[j]):(ee=O.locateFile(j,""),ae=fetch(ee).then(function(Ee){return Ee.arrayBuffer()}),O.L[j]=ae,we.return(ae))})}n.overrideFile=function(O,j){this.j?this.j.overrideFile(O,j):this.D[O]=j},n.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},n.send=function(O,j){var ee=this,ae,we,Ee,_e,He,ft,Ht,Zt,Un;return D(function(Cn){switch(Cn.h){case 1:return ee.h.inputs?(ae=1e3*(j??performance.now()),C(Cn,ee.I,2)):Cn.return();case 2:return C(Cn,ee.initialize(),3);case 3:for(we=new ee.i.PacketDataList,Ee=a(Object.keys(O)),_e=Ee.next();!_e.done;_e=Ee.next())if(He=_e.value,ft=ee.h.inputs[He]){e:{var cn=O[He];switch(ft.type){case"video":var xn=ee.s[ft.stream];if(xn||(xn=new md(ee.i,ee.K),ee.s[ft.stream]=xn),xn.m===0&&(xn.m=xn.i.createTexture()),typeof HTMLVideoElement<"u"&&cn instanceof HTMLVideoElement)var ir=cn.videoWidth,Yr=cn.videoHeight;else typeof HTMLImageElement<"u"&&cn instanceof HTMLImageElement?(ir=cn.naturalWidth,Yr=cn.naturalHeight):(ir=cn.width,Yr=cn.height);Yr={glName:xn.m,width:ir,height:Yr},ir=xn.h,ir.canvas.width=Yr.width,ir.canvas.height=Yr.height,ir.activeTexture(ir.TEXTURE0),xn.i.bindTexture2d(xn.m),ir.texImage2D(ir.TEXTURE_2D,0,ir.RGBA,ir.RGBA,ir.UNSIGNED_BYTE,cn),xn.i.bindTexture2d(0),xn=Yr;break e;case"detections":for(xn=ee.s[ft.stream],xn||(xn=new qv(ee.i),ee.s[ft.stream]=xn),xn.data||(xn.data=new xn.h.DetectionListData),xn.data.reset(cn.length),Yr=0;Yr<cn.length;++Yr){ir=cn[Yr];var mi=xn.data,ls=mi.setBoundingBox,Io=Yr,ro=ir.la,kr=new hm;if(Et(kr,1,ro.ra),Et(kr,2,ro.sa),Et(kr,3,ro.height),Et(kr,4,ro.width),Et(kr,5,ro.rotation),Ae(kr,6,ro.pa),ro=kr.l(),ls.call(mi,Io,ro),ir.ea)for(mi=0;mi<ir.ea.length;++mi){kr=ir.ea[mi],ls=xn.data,Io=ls.addNormalizedLandmark,ro=Yr,kr=Object.assign({},kr,{visibility:kr.visibility?kr.visibility:0});var rs=new dl;Et(rs,1,kr.x),Et(rs,2,kr.y),Et(rs,3,kr.z),kr.visibility&&Et(rs,4,kr.visibility),kr=rs.l(),Io.call(ls,ro,kr)}if(ir.ba)for(mi=0;mi<ir.ba.length;++mi)ls=xn.data,Io=ls.addClassification,ro=Yr,kr=ir.ba[mi],rs=new ga,Et(rs,2,kr.score),kr.index&&Ae(rs,1,kr.index),kr.label&&Ae(rs,3,kr.label),kr.displayName&&Ae(rs,4,kr.displayName),kr=rs.l(),Io.call(ls,ro,kr)}xn=xn.data;break e;default:xn={}}}switch(Ht=xn,Zt=ft.stream,ft.type){case"video":we.pushTexture2d(Object.assign({},Ht,{stream:Zt,timestamp:ae}));break;case"detections":Un=Ht,Un.stream=Zt,Un.timestamp=ae,we.pushDetectionList(Un);break;default:throw Error("Unknown input config type: '"+ft.type+"'")}}return ee.j.send(we),C(Cn,ee.I,4);case 4:we.delete(),Cn.h=0}})};function Bc(O,j,ee){var ae,we,Ee,_e,He,ft,Ht,Zt,Un,Cn,cn,xn,ir,Yr;return D(function(mi){switch(mi.h){case 1:if(!ee)return mi.return(j);for(ae={},we=0,Ee=a(Object.keys(ee)),_e=Ee.next();!_e.done;_e=Ee.next())He=_e.value,ft=ee[He],typeof ft!="string"&&ft.type==="texture"&&j[ft.stream]!==void 0&&++we;1<we&&(O.M=!1),Ht=a(Object.keys(ee)),_e=Ht.next();case 2:if(_e.done){mi.h=4;break}if(Zt=_e.value,Un=ee[Zt],typeof Un=="string")return ir=ae,Yr=Zt,C(mi,v0(O,Zt,j[Un]),14);if(Cn=j[Un.stream],Un.type==="detection_list"){if(Cn){for(var ls=Cn.getRectList(),Io=Cn.getLandmarksList(),ro=Cn.getClassificationsList(),kr=[],rs=0;rs<ls.size();++rs){var ya=fm(ls.get(rs)),Pi=Wt(ya,1),Zv=Wt(ya,2),gS=Wt(ya,3),Qv=Wt(ya,4),Wf=Wt(ya,5,0),hl=void 0;hl=hl===void 0?0:hl,ya={la:{ra:Pi,sa:Zv,height:gS,width:Qv,rotation:Wf,pa:Qt(Se(ya,6),hl)},ea:Tt(u0(Io.get(rs)),dl,1).map(f0),ba:h0(ql(ro.get(rs)))},kr.push(ya)}ls=kr}else ls=[];ae[Zt]=ls,mi.h=7;break}if(Un.type==="proto_list"){if(Cn){for(ls=Array(Cn.size()),Io=0;Io<Cn.size();Io++)ls[Io]=Cn.get(Io);Cn.delete()}else ls=[];ae[Zt]=ls,mi.h=7;break}if(Cn===void 0){mi.h=3;break}if(Un.type==="float_list"){ae[Zt]=Cn,mi.h=7;break}if(Un.type==="proto"){ae[Zt]=Cn,mi.h=7;break}if(Un.type!=="texture")throw Error("Unknown output config type: '"+Un.type+"'");return cn=O.v[Zt],cn||(cn=new md(O.i,O.K),O.v[Zt]=cn),C(mi,Hf(cn,Cn,O.M),13);case 13:xn=mi.i,ae[Zt]=xn;case 7:Un.transform&&ae[Zt]&&(ae[Zt]=Un.transform(ae[Zt])),mi.h=3;break;case 14:ir[Yr]=mi.i;case 3:_e=Ht.next(),mi.h=2;break;case 4:return mi.return(ae)}})}function v0(O,j,ee){var ae;return D(function(we){return typeof ee=="number"||ee instanceof Uint8Array||ee instanceof O.i.Uint8BlobList?we.return(ee):ee instanceof O.i.Texture2dDataOut?(ae=O.v[j],ae||(ae=new md(O.i,O.K),O.v[j]=ae),we.return(Hf(ae,ee,O.M))):we.return(void 0)})}function mS(O,j){for(var ee=j.name||"$",ae=[].concat(l(j.wants)),we=new O.i.StringList,Ee=a(j.wants),_e=Ee.next();!_e.done;_e=Ee.next())we.push_back(_e.value);Ee=O.i.PacketListener.implement({onResults:function(He){for(var ft={},Ht=0;Ht<j.wants.length;++Ht)ft[ae[Ht]]=He.get(Ht);var Zt=O.listeners[ee];Zt&&(O.I=Bc(O,ft,j.outs).then(function(Un){Un=Zt(Un);for(var Cn=0;Cn<j.wants.length;++Cn){var cn=ft[ae[Cn]];typeof cn=="object"&&cn.hasOwnProperty&&cn.hasOwnProperty("delete")&&cn.delete()}Un&&(O.I=Un)}))}}),O.j.attachMultiListener(we,Ee),we.delete()}n.onResults=function(O,j){this.listeners[j||"$"]=O},q("Solution",Vf),q("OptionType",{BOOL:0,NUMBER:1,ta:2,0:"BOOL",1:"NUMBER",2:"STRING"});function b0(O){return O===void 0&&(O=0),O===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function $c(O){var j=this;O=O||{},this.h=new Vf({locateFile:O.locateFile,files:function(ee){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:b0(ee.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:p0},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:p0},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(ee){return ee.map(function(ae){return h0(ql(ae))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(ee){var ae,we,Ee;return D(function(_e){return _e.h==1?(ae=b0(ee),we="third_party/mediapipe/modules/hand_landmark/"+ae,C(_e,Gf(j.h,ae),2)):(Ee=_e.i,j.h.overrideFile(we,Ee),_e.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}n=$c.prototype,n.close=function(){return this.h.close(),Promise.resolve()},n.onResults=function(O){this.h.onResults(O)},n.initialize=function(){var O=this;return D(function(j){return C(j,O.h.initialize(),0)})},n.reset=function(){this.h.reset()},n.send=function(O){var j=this;return D(function(ee){return C(ee,j.h.send(O),0)})},n.setOptions=function(O){this.h.setOptions(O)},q("Hands",$c),q("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),q("VERSION","0.4.1675469240")}).call(vB)),vB}var I8e=N8e();/**
    * @license
    * Copyright 2023 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */var el=function(){return el=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},el.apply(this,arguments)};function th(n,e,t,r){return new(t||(t=Promise))(function(i,s){function o(c){try{l(r.next(c))}catch(u){s(u)}}function a(c){try{l(r.throw(c))}catch(u){s(u)}}function l(c){var u;c.done?i(c.value):(u=c.value,u instanceof t?u:new t(function(d){d(u)})).then(o,a)}l((r=r.apply(n,[])).next())})}function nh(n,e){var t,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(c){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(o=0)),o;)try{if(t=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||u[0]!==6&&u[0]!==2)){o=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(u[0]===6&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(n,o)}catch(d){u=[6,d],r=0}finally{t=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([l,c])}}}var fN=["wrist","thumb_cmc","thumb_mcp","thumb_ip","thumb_tip","index_finger_mcp","index_finger_pip","index_finger_dip","index_finger_tip","middle_finger_mcp","middle_finger_pip","middle_finger_dip","middle_finger_tip","ring_finger_mcp","ring_finger_pip","ring_finger_dip","ring_finger_tip","pinky_finger_mcp","pinky_finger_pip","pinky_finger_dip","pinky_finger_tip"],bB={runtime:"mediapipe",maxHands:2,modelType:"full"},D8e=function(){function n(e){var t,r=this;this.width=0,this.height=0,this.selfieMode=!1,this.handsSolution=new I8e.Hands({locateFile:function(i,s){return e.solutionPath?e.solutionPath.replace(/\/+$/,"")+"/"+i:s+"/"+i}}),e.modelType==="lite"?t=0:t=1,this.handsSolution.setOptions({modelComplexity:t,selfieMode:this.selfieMode,maxNumHands:e.maxHands}),this.handsSolution.onResults(function(i){if(r.height=i.image.height,r.width=i.image.width,r.hands=[],i.multiHandLandmarks!==null)for(var s=i.multiHandedness,o=i.multiHandLandmarks,a=i.multiHandWorldLandmarks,l=0;l<s.length;l++)r.hands.push(el(el({},r.translateOutput(o[l],a[l])),{score:s[l].score,handedness:s[l].label}))})}return n.prototype.translateOutput=function(e,t){var r=this;return{keypoints:e.map(function(i,s){return{x:i.x*r.width,y:i.y*r.height,score:i.visibility,name:fN[s]}}),keypoints3D:t.map(function(i,s){return{x:i.x,y:i.y,z:i.z,score:i.visibility,name:fN[s]}})}},n.prototype.estimateHands=function(e,t){return th(this,void 0,void 0,function(){var r,i;return nh(this,function(s){switch(s.label){case 0:return t&&t.flipHorizontal&&t.flipHorizontal!==this.selfieMode&&(this.selfieMode=t.flipHorizontal,this.handsSolution.setOptions({selfieMode:this.selfieMode})),e instanceof qi?(i=ImageData.bind,[4,AEe(e)]):[3,2];case 1:return r=new(i.apply(ImageData,[void 0,s.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:r=e,s.label=3;case 3:return e=r,[4,this.handsSolution.send({image:e})];case 4:return s.sent(),[2,this.hands]}})})},n.prototype.dispose=function(){this.handsSolution.close()},n.prototype.reset=function(){this.handsSolution.reset(),this.width=0,this.height=0,this.hands=null,this.selfieMode=!1},n.prototype.initialize=function(){return this.handsSolution.initialize()},n}();function k8e(n){return th(this,void 0,void 0,function(){var e,t;return nh(this,function(r){switch(r.label){case 0:return e=function(i){if(i==null)return el({},bB);var s=el({},i);return s.runtime="mediapipe",s.maxHands==null&&(s.maxHands=bB.maxHands),s.modelType==null&&(s.modelType=bB.modelType),s}(n),[4,(t=new D8e(e)).initialize()];case 1:return r.sent(),[2,t]}})})}function xB(n){return n.width*n.height}function p9(n){var e=n.xCenter-n.width/2,t=e+n.width,r=n.yCenter-n.height/2;return{xMin:e,xMax:t,yMin:r,yMax:r+n.height,width:n.width,height:n.height}}function O8e(n,e){var t=p9(n),r=p9(e);if(!function(o,a){return!(o.xMax<a.xMin||a.xMax<o.xMin||o.yMax<a.yMin||a.yMax<o.yMin)}(t,r))return 0;var i=xB(function(o,a){var l=Math.max(o.xMin,a.xMin),c=Math.min(o.xMax,a.xMax),u=Math.max(o.yMin,a.yMin),d=Math.min(o.yMax,a.yMax);return{xMin:l,xMax:c,yMin:u,yMax:d,width:Math.max(c-l,0),height:Math.max(d-u,0)}}(t,r)),s=xB(t)+xB(r)-i;return s>0?i/s:0}function B8e(n,e,t,r){var i=n.width,s=n.height,o=1,a=Math.cos(n.rotation),l=Math.sin(n.rotation),c=n.xCenter,u=n.yCenter,d=1/e,f=1/t,p=new Array(16);return p[0]=i*a*o*d,p[1]=-s*l*d,p[2]=0,p[3]=(-.5*i*a*o+.5*s*l+c)*d,p[4]=i*l*o*f,p[5]=s*a*f,p[6]=0,p[7]=(-.5*s*a-.5*i*l*o+u)*f,p[8]=0,p[9]=0,p[10]=i*d,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,function(g){if(g.length!==16)throw new Error("Array length must be 16 but got "+g.length);return[[g[0],g[1],g[2],g[3]],[g[4],g[5],g[6],g[7]],[g[8],g[9],g[10],g[11]],[g[12],g[13],g[14],g[15]]]}(p)}function Cre(n){return n instanceof qi?{height:n.shape[0],width:n.shape[1]}:{height:n.height,width:n.width}}function pN(n){return n-2*Math.PI*Math.floor((n+Math.PI)/(2*Math.PI))}function Ere(n){return n instanceof qi?n:TEe(n)}function SB(n,e){de(n.width!==0,function(){return e+" width cannot be 0."}),de(n.height!==0,function(){return e+" height cannot be 0."})}function $8e(n,e){var t=function(r,i,s,o){var a=i-r,l=o-s,c=l/a;return{scale:c,offset:s-r*c}}(0,255,e[0],e[1]);return Ye(function(){return $t(ke(n,t.scale),t.offset)})}function m9(n,e,t){var r=e.outputTensorSize,i=e.keepAspectRatio,s=e.borderMode,o=e.outputTensorFloatRange,a=Cre(n),l=function(f,p){return p?{xCenter:p.xCenter*f.width,yCenter:p.yCenter*f.height,width:p.width*f.width,height:p.height*f.height,rotation:p.rotation}:{xCenter:.5*f.width,yCenter:.5*f.height,width:f.width,height:f.height,rotation:0}}(a,t),c=function(f,p,g){if(g===void 0&&(g=!1),!g)return{top:0,left:0,right:0,bottom:0};var v=p.height,b=p.width;SB(p,"targetSize"),SB(f,"roi");var x,_,E=v/b,C=f.height/f.width,M=0,R=0;return E>C?(x=f.width,_=f.width*E,R=(1-C/E)/2):(x=f.height/E,_=f.height,M=(1-E/C)/2),f.width=x,f.height=_,{top:R,left:M,right:M,bottom:R}}(l,r,i),u=B8e(l,a.width,a.height),d=Ye(function(){var f=Ere(n),p=Ky(function(b,x,_){return SB(_,"inputResolution"),[1/_.width*b[0][0]*x.width,1/_.height*b[0][1]*x.width,b[0][3]*x.width,1/_.width*b[1][0]*x.height,1/_.height*b[1][1]*x.height,b[1][3]*x.height,0,0]}(u,a,r),[1,8]),g=s==="zero"?"constant":"nearest",v=nu.transform(na(nn(f,"float32")),p,"bilinear",g,0,[r.height,r.width]);return o!=null?$8e(v,o):v});return{imageTensor:d,padding:c,transformationMatrix:u}}function g9(n,e,t,r){return r===1?.5*(n+e):n+(e-n)*t/(r-1)}function y9(n){return{xCenter:n.xMin+n.width/2,yCenter:n.yMin+n.height/2,width:n.width,height:n.height}}function L8e(n){var e=n.relativeKeypoints;if(e.length<=1)throw new Error("2 or more keypoints required to calculate a rect.");var t=Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.MIN_VALUE,s=Number.MIN_VALUE;return e.forEach(function(o){t=Math.min(t,o.x),i=Math.max(i,o.x),r=Math.min(r,o.y),s=Math.max(s,o.y)}),{xCenter:(t+i)/2,yCenter:(r+s)/2,width:i-t,height:s-r}}function F8e(n,e,t,r,i){var s=t==="rect"?function(o,a,l){var c,u=o.locationData;return c=y9(u.boundingBox),c}(n):function(o,a){var l=o.locationData;return a==="boundingbox"?y9(l.relativeBoundingBox):L8e(l)}(n,e);return i&&(s.rotation=function(o,a,l){var c,u=o.locationData,d=l.rotationVectorStartKeypointIndex,f=l.rotationVectorEndKeypointIndex;c=l.rotationVectorTargetAngle?l.rotationVectorTargetAngle:Math.PI*l.rotationVectorTargetAngleDegree/180;var p=u.relativeKeypoints[d].x*a.width,g=u.relativeKeypoints[d].y*a.height,v=u.relativeKeypoints[f].x*a.width,b=u.relativeKeypoints[f].y*a.height;return pN(c-Math.atan2(-(b-g),v-p))}(n,r,i)),s}function P8e(n){return Ye(function(){var e=function(i){return Ye(function(){return[Kn(i,[0,0,0],[1,-1,1]),Kn(i,[0,0,1],[1,-1,-1])]})}(n),t=e[0],r=e[1];return{boxes:js(r),logits:js(t)}})}function U8e(n,e,t,r){return th(this,void 0,void 0,function(){var i,s,o,a,l;return nh(this,function(c){switch(c.label){case 0:return n.sort(function(u,d){return Math.max.apply(Math,d.score)-Math.max.apply(Math,u.score)}),i=Ky(n.map(function(u){return[u.locationData.relativeBoundingBox.yMin,u.locationData.relativeBoundingBox.xMin,u.locationData.relativeBoundingBox.yMax,u.locationData.relativeBoundingBox.xMax]})),s=ho(n.map(function(u){return u.score[0]})),[4,nu.nonMaxSuppressionAsync(i,s,e,t)];case 1:return[4,(o=c.sent()).array()];case 2:return a=c.sent(),l=n.filter(function(u,d){return a.indexOf(d)>-1}),rr([i,s,o]),[2,l]}})})}function z8e(n,e){return n.map(function(t){var r=el(el({},t),{x:t.x*e.width,y:t.y*e.height});return t.z!=null&&(r.z=t.z*e.width),r})}function H8e(n,e,t){return th(this,void 0,void 0,function(){var r,i,s,o,a;return nh(this,function(l){switch(l.label){case 0:return r=n[0],i=n[1],s=function(c,u,d){return Ye(function(){var f,p,g,v;d.reverseOutputOrder?(p=js(Kn(c,[0,d.boxCoordOffset+0],[-1,1])),f=js(Kn(c,[0,d.boxCoordOffset+1],[-1,1])),v=js(Kn(c,[0,d.boxCoordOffset+2],[-1,1])),g=js(Kn(c,[0,d.boxCoordOffset+3],[-1,1]))):(f=js(Kn(c,[0,d.boxCoordOffset+0],[-1,1])),p=js(Kn(c,[0,d.boxCoordOffset+1],[-1,1])),g=js(Kn(c,[0,d.boxCoordOffset+2],[-1,1])),v=js(Kn(c,[0,d.boxCoordOffset+3],[-1,1]))),p=$t(ke(mn(p,d.xScale),u.w),u.x),f=$t(ke(mn(f,d.yScale),u.h),u.y),d.applyExponentialOnBoxSize?(g=ke(il(mn(g,d.hScale)),u.h),v=ke(il(mn(v,d.wScale)),u.w)):(g=ke(mn(g,d.hScale),u.h),v=ke(mn(v,d.wScale),u.h));var b=vn(f,mn(g,2)),x=vn(p,mn(v,2)),_=$t(f,mn(g,2)),E=$t(p,mn(v,2)),C=$s([Fe(b,[d.numBoxes,1]),Fe(x,[d.numBoxes,1]),Fe(_,[d.numBoxes,1]),Fe(E,[d.numBoxes,1])],1);if(d.numKeypoints)for(var M=0;M<d.numKeypoints;++M){var R=d.keypointCoordOffset+M*d.numValuesPerKeypoint,L=void 0,B=void 0;d.reverseOutputOrder?(L=js(Kn(c,[0,R],[-1,1])),B=js(Kn(c,[0,R+1],[-1,1]))):(B=js(Kn(c,[0,R],[-1,1])),L=js(Kn(c,[0,R+1],[-1,1])));var N=$t(ke(mn(L,d.xScale),u.w),u.x),I=$t(ke(mn(B,d.yScale),u.h),u.y);C=$s([C,Fe(N,[d.numBoxes,1]),Fe(I,[d.numBoxes,1])],1)}return C})}(i,e,t),o=Ye(function(){var c=r;return t.sigmoidScore?(t.scoreClippingThresh!=null&&(c=Vl(r,-t.scoreClippingThresh,t.scoreClippingThresh)),c=Qd(c)):c}),[4,V8e(s,o,t)];case 1:return a=l.sent(),rr([s,o]),[2,a]}})})}function V8e(n,e,t){return th(this,void 0,void 0,function(){var r,i,s,o,a,l,c,u,d,f,p,g;return nh(this,function(v){switch(v.label){case 0:return r=[],[4,n.data()];case 1:return i=v.sent(),[4,e.data()];case 2:for(s=v.sent(),o=0;o<t.numBoxes;++o)if(!(t.minScoreThresh!=null&&s[o]<t.minScoreThresh||(a=o*t.numCoords,l=G8e(i[a+0],i[a+1],i[a+2],i[a+3],s[o],t.flipVertically,o),(c=l.locationData.relativeBoundingBox).width<0||c.height<0))){if(t.numKeypoints>0)for((u=l.locationData).relativeKeypoints=[],d=t.numKeypoints*t.numValuesPerKeypoint,f=0;f<d;f+=t.numValuesPerKeypoint)p=a+t.keypointCoordOffset+f,g={x:i[p+0],y:t.flipVertically?1-i[p+1]:i[p+1]},u.relativeKeypoints.push(g);r.push(l)}return[2,r]}})})}function G8e(n,e,t,r,i,s,o){return{score:[i],ind:o,locationData:{relativeBoundingBox:{xMin:e,yMin:s?1-t:n,xMax:r,yMax:s?1-n:t,width:r-e,height:t-n}}}}function W8e(n,e){return n==="none"?e:function(t){return 1/(1+Math.exp(-t))}(e)}function v9(n,e,t,r){return th(this,void 0,void 0,function(){var i,s,o,a,l,c,u,d;return nh(this,function(f){switch(f.label){case 0:return t=t||e.flipHorizontally||!1,r=r||e.flipVertically||!1,i=n.size,s=i/e.numLandmarks,[4,n.data()];case 1:for(o=f.sent(),a=[],l=0;l<e.numLandmarks;++l)c=l*s,(d={x:0,y:0}).x=t?e.inputImageWidth-o[c]:o[c],s>1&&(d.y=r?e.inputImageHeight-o[c+1]:o[c+1]),s>2&&(d.z=o[c+2]),s>3&&(d.score=W8e(e.visibilityActivation,o[c+3])),a.push(d);for(u=0;u<a.length;++u)(d=a[u]).x=d.x/e.inputImageWidth,d.y=d.y/e.inputImageHeight,d.z=d.z/e.inputImageWidth/(e.normalizeZ||1);return[2,a]}})})}function b9(n,e,t){var r=n.width,i=n.height,s=n.rotation;if(t.rotation==null&&t.rotationDegree==null||(s=function(u,d){return d.rotation!=null?u+=d.rotation:d.rotationDegree!=null&&(u+=Math.PI*d.rotationDegree/180),pN(u)}(s,t)),s===0)n.xCenter=n.xCenter+r*t.shiftX,n.yCenter=n.yCenter+i*t.shiftY;else{var o=(e.width*r*t.shiftX*Math.cos(s)-e.height*i*t.shiftY*Math.sin(s))/e.width,a=(e.width*r*t.shiftX*Math.sin(s)+e.height*i*t.shiftY*Math.cos(s))/e.height;n.xCenter=n.xCenter+o,n.yCenter=n.yCenter+a}if(t.squareLong){var l=Math.max(r*e.width,i*e.height);r=l/e.width,i=l/e.height}else if(t.squareShort){var c=Math.min(r*e.width,i*e.height);r=c/e.width,i=c/e.height}return n.width=r*t.scaleX,n.height=i*t.scaleY,n}function j8e(n,e){for(var t=function(D,P){var G=D[0].x*P.width,W=D[0].y*P.height,q=(D[4].x+D[8].x)/2,z=(D[4].y+D[8].y)/2;return q=(q+D[6].x)/2*P.width,z=(z+D[6].y)/2*P.height,pN(Math.PI/2-Math.atan2(-(z-W),q-G))}(n,e),r=pN(-t),i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=0,c=n;l<c.length;l++){var u=(b=c[l]).x,d=b.y;i=Math.min(i,u),s=Math.max(s,u),o=Math.min(o,d),a=Math.max(a,d)}var f=(s+i)/2,p=(a+o)/2;i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;for(var g=0,v=n;g<v.length;g++){var b,x=((b=v[g]).x-f)*e.width,_=(b.y-p)*e.height,E=x*Math.cos(r)-_*Math.sin(r),C=x*Math.sin(r)+_*Math.cos(r);i=Math.min(i,E),s=Math.max(s,E),o=Math.min(o,C),a=Math.max(a,C)}var M=(s+i)/2,R=(a+o)/2,L=M*Math.cos(t)-R*Math.sin(t)+e.width*f,B=M*Math.sin(t)+R*Math.cos(t)+e.height*p,N=(s-i)/e.width,I=(a-o)/e.height;return{xCenter:L/e.width,yCenter:B/e.height,width:N,height:I,rotation:t}}var X8e={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:4,minScale:.1484375,maxScale:.75,inputSizeHeight:192,inputSizeWidth:192,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,16,16],aspectRatios:[1],fixedAnchorSize:!0},wB={runtime:"tfjs",modelType:"full",maxHands:2,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/full/1",landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/full/1"},_B={flipHorizontal:!1,staticImageMode:!1},q8e={applyExponentialOnBoxSize:!1,flipVertically:!1,numBoxes:2016,numCoords:18,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:7,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:192,yScale:192,hScale:192,wScale:192,minScoreThresh:.5},K8e=.3,Y8e={shiftX:0,shiftY:-.5,scaleX:2.6,scaleY:2.6,squareLong:!0},J8e={shiftX:0,shiftY:-.1,scaleX:2,scaleY:2,squareLong:!0},Z8e={outputTensorSize:{width:192,height:192},keepAspectRatio:!0,outputTensorFloatRange:[0,1],borderMode:"zero"},Q8e={outputTensorSize:{width:224,height:224},keepAspectRatio:!0,outputTensorFloatRange:[0,1],borderMode:"zero"},eGe={numLandmarks:21,inputImageWidth:224,inputImageHeight:224,normalizeZ:.4,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},tGe={numLandmarks:21,inputImageWidth:1,inputImageHeight:1,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},mN,nGe=function(){function n(e,t,r){this.detectorModel=e,this.landmarkModel=t,this.maxHands=r,this.prevHandRectsFromLandmarks=null,this.anchors=function(l){l.reduceBoxesInLowestLayer==null&&(l.reduceBoxesInLowestLayer=!1),l.interpolatedScaleAspectRatio==null&&(l.interpolatedScaleAspectRatio=1),l.fixedAnchorSize==null&&(l.fixedAnchorSize=!1);for(var c=[],u=0;u<l.numLayers;){for(var d=[],f=[],p=[],g=[],v=u;v<l.strides.length&&l.strides[v]===l.strides[u];){var b=g9(l.minScale,l.maxScale,v,l.strides.length);if(v===0&&l.reduceBoxesInLowestLayer)p.push(1),p.push(2),p.push(.5),g.push(.1),g.push(b),g.push(b);else{for(var x=0;x<l.aspectRatios.length;++x)p.push(l.aspectRatios[x]),g.push(b);if(l.interpolatedScaleAspectRatio>0){var _=v===l.strides.length-1?1:g9(l.minScale,l.maxScale,v+1,l.strides.length);g.push(Math.sqrt(b*_)),p.push(l.interpolatedScaleAspectRatio)}}v++}for(var E=0;E<p.length;++E){var C=Math.sqrt(p[E]);d.push(g[E]/C),f.push(g[E]*C)}var M=0,R=0;if(l.featureMapHeight.length>0)M=l.featureMapHeight[u],R=l.featureMapWidth[u];else{var L=l.strides[u];M=Math.ceil(l.inputSizeHeight/L),R=Math.ceil(l.inputSizeWidth/L)}for(var B=0;B<M;++B)for(var N=0;N<R;++N)for(var I=0;I<d.length;++I){var D={xCenter:(N+l.anchorOffsetX)/R,yCenter:(B+l.anchorOffsetY)/M,width:0,height:0};l.fixedAnchorSize?(D.width=1,D.height=1):(D.width=f[I],D.height=d[I]),c.push(D)}u=v}return c}(X8e);var i=ho(this.anchors.map(function(l){return l.width})),s=ho(this.anchors.map(function(l){return l.height})),o=ho(this.anchors.map(function(l){return l.xCenter})),a=ho(this.anchors.map(function(l){return l.yCenter}));this.anchorTensor={x:o,y:a,w:i,h:s}}return n.prototype.estimateHands=function(e,t){return th(this,void 0,void 0,function(){var r,i,s,o,a,l,c,u,d,f,p,g,v,b,x,_,E,C,M=this;return nh(this,function(R){switch(R.label){case 0:return r=function(N){if(N==null)return el({},_B);var I=el({},N);return I.flipHorizontal==null&&(I.flipHorizontal=_B.flipHorizontal),I.staticImageMode==null&&(I.staticImageMode=_B.staticImageMode),I}(t),e==null?(this.reset(),[2,[]]):(i=Cre(e),s=Ye(function(){var N=nn(Ere(e),"float32");return r.flipHorizontal&&(N=js(nu.flipLeftRight(na(N,0)),[0])),N}),o=this.prevHandRectsFromLandmarks,r.staticImageMode||o==null||o.length<this.maxHands?[4,this.detectPalm(s)]:[3,2]);case 1:return(l=R.sent()).length===0?(this.reset(),s.dispose(),[2,[]]):(c=l.map(function(N){return M.palmDetectionToRoi(N,i)}),a=c,[3,3]);case 2:a=o,R.label=3;case 3:return L=.5,B=[],[a].forEach(function(N){return N.forEach(function(I){(B=B.filter(function(D){return O8e(I,D)<=L})).push(I)})}),a=B,[4,Promise.all(a.map(function(N){return M.handLandmarks(N,s)}))];case 4:for(u=R.sent(),d=[],this.prevHandRectsFromLandmarks=[],f=0,p=u;f<p.length;f++)(g=p[f])!=null&&(v=g.landmarks,b=g.worldLandmarks,x=g.handScore,_=g.handedness,this.prevHandRectsFromLandmarks.push(this.handLandmarksToRoi(v,i)),(E=z8e(v,i))!=null&&E.forEach(function(N,I){delete N.z,N.name=fN[I]}),(C=b)!=null&&C.forEach(function(N,I){N.name=fN[I]}),d.push({keypoints:E,keypoints3D:C,handedness:_,score:x}));return s.dispose(),[2,d]}var L,B})})},n.prototype.dispose=function(){this.detectorModel.dispose(),this.landmarkModel.dispose(),rr([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},n.prototype.reset=function(){this.prevHandRectsFromLandmarks=null},n.prototype.detectPalm=function(e){return th(this,void 0,void 0,function(){var t,r,i,s,o,a,l,c,u,d;return nh(this,function(f){switch(f.label){case 0:return t=m9(e,Z8e),r=t.imageTensor,i=t.padding,s=this.detectorModel.predict(r),o=P8e(s),a=o.boxes,[4,H8e([l=o.logits,a],this.anchorTensor,q8e)];case 1:return(c=f.sent()).length===0?(rr([r,s,l,a]),[2,c]):[4,U8e(c,this.maxHands,K8e)];case 2:return u=f.sent(),d=function(p,g){p===void 0&&(p=[]);for(var v=g.left,b=g.top,x=g.left+g.right,_=g.top+g.bottom,E=0;E<p.length;E++){var C=p[E],M=C.locationData.relativeBoundingBox,R=(M.xMin-v)/(1-x),L=(M.yMin-b)/(1-_),B=M.width/(1-x),N=M.height/(1-_);M.xMin=R,M.yMin=L,M.width=B,M.height=N,M.xMax=R+B,M.yMax=L+N;var I=C.locationData.relativeKeypoints;I&&I.forEach(function(D){var P=(D.x-v)/(1-x),G=(D.y-b)/(1-_);D.x=P,D.y=G})}return p}(u,i),rr([r,s,l,a]),[2,d]}})})},n.prototype.palmDetectionToRoi=function(e,t){return b9(F8e(e,"boundingbox","normRect",t,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:2,rotationVectorTargetAngleDegree:90}),t,Y8e)},n.prototype.handLandmarks=function(e,t){return th(this,void 0,void 0,function(){var r,i,s,o,a,l,c,u,d,f,p,g,v,b,x,_;return nh(this,function(E){switch(E.label){case 0:return r=m9(t,Q8e,e),i=r.imageTensor,s=r.padding,o=this.landmarkModel.execute(i,["Identity_2:0","Identity_1:0","Identity:0","Identity_3:0"]),a=o[0],l=o[1],c=o[2],u=o[3],[4,l.data()];case 1:return(d=E.sent()[0])<.5?(rr(o),rr(i),[2,null]):[4,c.data()];case 2:return f=E.sent()[0],p=f>=.5?"Left":"Right",[4,v9(a,eGe)];case 3:return g=E.sent(),[4,v9(u,tGe)];case 4:return v=E.sent(),b=function(C,M){var R=M.left,L=M.top,B=M.left+M.right,N=M.top+M.bottom;return C.map(function(I){return el(el({},I),{x:(I.x-R)/(1-B),y:(I.y-L)/(1-N),z:I.z/(1-B)})})}(g,s),x=function(C,M,R){R===void 0&&(R={ignoreRotation:!1});for(var L=[],B=0,N=C;B<N.length;B++){var I=N[B],D=I.x-.5,P=I.y-.5,G=R.ignoreRotation?0:M.rotation,W=Math.cos(G)*D-Math.sin(G)*P,q=Math.sin(G)*D+Math.cos(G)*P;W=W*M.width+M.xCenter,q=q*M.height+M.yCenter;var z=I.z*M.width,J=el({},I);J.x=W,J.y=q,J.z=z,L.push(J)}return L}(b,e),_=function(C,M){for(var R=[],L=0,B=C;L<B.length;L++){var N=B[L],I=N.x,D=N.y,P=M.rotation,G=Math.cos(P)*I-Math.sin(P)*D,W=Math.sin(P)*I+Math.cos(P)*D,q=el({},N);q.x=G,q.y=W,R.push(q)}return R}(v,e),rr(o),rr(i),[2,{landmarks:x,worldLandmarks:_,handScore:d,handedness:p}]}})})},n.prototype.handLandmarksToRoi=function(e,t){return b9(j8e([].concat(e.slice(0,4),e.slice(5,7),e.slice(9,11),e.slice(13,15),e.slice(17,19)),t),t,J8e)},n}();function rGe(n){return th(this,void 0,void 0,function(){var e,t,r,i,s,o;return nh(this,function(a){switch(a.label){case 0:return e=function(l){if(l==null)return el({},wB);var c=el({},l);if(c.runtime="tfjs",c.maxHands==null&&(c.maxHands=wB.maxHands),c.modelType==null&&(c.modelType=wB.modelType),c.modelType!=="lite"&&c.modelType!=="full")throw new Error("Model type must be one of lite or full, but got "+c.modelType);return c.detectorModelUrl==null&&(c.modelType==="lite"?c.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/lite/1":c.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/full/1"),c.landmarkModelUrl==null&&(c.modelType==="lite"?c.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/lite/1":c.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/full/1"),c}(n),t=e.detectorModelUrl.indexOf("https://tfhub.dev")>-1,r=e.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,Promise.all([DG(e.detectorModelUrl,{fromTFHub:t}),DG(e.landmarkModelUrl,{fromTFHub:r})])];case 1:return i=a.sent(),s=i[0],o=i[1],[2,new nGe(s,o,e.maxHands)]}})})}function iGe(n,e){return th(this,void 0,void 0,function(){var t,r;return nh(this,function(i){if(n===mN.MediaPipeHands){if(r=void 0,(t=e)!=null){if(t.runtime==="tfjs")return[2,rGe(t)];if(t.runtime==="mediapipe")return[2,k8e(t)];r=t.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+r)}throw new Error(n+" is not a supported model name.")})})}(function(n){n.MediaPipeHands="MediaPipeHands"})(mN||(mN={}));var BM={exports:{}},sGe=BM.exports,x9;function oGe(){return x9||(x9=1,function(n,e){(function(t,r){n.exports=r()})(typeof self<"u"?self:sGe,function(){return function(t){var r={};function i(s){if(r[s])return r[s].exports;var o=r[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=r,i.d=function(s,o,a){i.o(s,o)||Object.defineProperty(s,o,{enumerable:!0,get:a})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,o){if(1&o&&(s=i(s)),8&o||4&o&&typeof s=="object"&&s&&s.__esModule)return s;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:s}),2&o&&typeof s!="string")for(var l in s)i.d(a,l,(function(c){return s[c]}).bind(null,l));return a},i.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(o,"a",o),o},i.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},i.p="",i(i.s=0)}([function(t,r,i){i.r(r);var s={};function o(Y){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X})(Y)}i.r(s),i.d(s,"VictoryGesture",function(){return G}),i.d(s,"ThumbsUpGesture",function(){return Q});var a={Thumb:0,Index:1,Middle:2,Ring:3,Pinky:4,all:[0,1,2,3,4],nameMapping:{0:"Thumb",1:"Index",2:"Middle",3:"Ring",4:"Pinky"},pointsMapping:{0:[[0,1],[1,2],[2,3],[3,4]],1:[[0,5],[5,6],[6,7],[7,8]],2:[[0,9],[9,10],[10,11],[11,12]],3:[[0,13],[13,14],[14,15],[15,16]],4:[[0,17],[17,18],[18,19],[19,20]]},getName:function(Y){return o(this.nameMapping[Y])!==void 0&&this.nameMapping[Y]},getPoints:function(Y){return o(this.pointsMapping[Y])!==void 0&&this.pointsMapping[Y]}},l={NoCurl:0,HalfCurl:1,FullCurl:2,nameMapping:{0:"No Curl",1:"Half Curl",2:"Full Curl"},getName:function(Y){return o(this.nameMapping[Y])!==void 0&&this.nameMapping[Y]}},c={VerticalUp:0,VerticalDown:1,HorizontalLeft:2,HorizontalRight:3,DiagonalUpRight:4,DiagonalUpLeft:5,DiagonalDownRight:6,DiagonalDownLeft:7,nameMapping:{0:"Vertical Up",1:"Vertical Down",2:"Horizontal Left",3:"Horizontal Right",4:"Diagonal Up Right",5:"Diagonal Up Left",6:"Diagonal Down Right",7:"Diagonal Down Left"},getName:function(Y){return o(this.nameMapping[Y])!==void 0&&this.nameMapping[Y]}};function u(Y,X){var te=typeof Symbol<"u"&&Y[Symbol.iterator]||Y["@@iterator"];if(!te){if(Array.isArray(Y)||(te=function(xe,Pe){if(xe){if(typeof xe=="string")return d(xe,Pe);var ze=Object.prototype.toString.call(xe).slice(8,-1);if(ze==="Object"&&xe.constructor&&(ze=xe.constructor.name),ze==="Map"||ze==="Set")return Array.from(xe);if(ze==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ze))return d(xe,Pe)}}(Y))||X){te&&(Y=te);var ne=0,le=function(){};return{s:le,n:function(){return ne>=Y.length?{done:!0}:{done:!1,value:Y[ne++]}},e:function(xe){throw xe},f:le}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ye,ue=!0,be=!1;return{s:function(){te=te.call(Y)},n:function(){var xe=te.next();return ue=xe.done,xe},e:function(xe){be=!0,ye=xe},f:function(){try{ue||te.return==null||te.return()}finally{if(be)throw ye}}}}function d(Y,X){(X==null||X>Y.length)&&(X=Y.length);for(var te=0,ne=new Array(X);te<X;te++)ne[te]=Y[te];return ne}function f(Y,X){var te=Object.keys(Y);if(Object.getOwnPropertySymbols){var ne=Object.getOwnPropertySymbols(Y);X&&(ne=ne.filter(function(le){return Object.getOwnPropertyDescriptor(Y,le).enumerable})),te.push.apply(te,ne)}return te}function p(Y){for(var X=1;X<arguments.length;X++){var te=arguments[X]!=null?arguments[X]:{};X%2?f(Object(te),!0).forEach(function(ne){g(Y,ne,te[ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(te)):f(Object(te)).forEach(function(ne){Object.defineProperty(Y,ne,Object.getOwnPropertyDescriptor(te,ne))})}return Y}function g(Y,X,te){return X in Y?Object.defineProperty(Y,X,{value:te,enumerable:!0,configurable:!0,writable:!0}):Y[X]=te,Y}function v(Y,X){for(var te=0;te<X.length;te++){var ne=X[te];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(Y,ne.key,ne)}}var b=function(){function Y(ne){(function(le,ye){if(!(le instanceof ye))throw new TypeError("Cannot call a class as a function")})(this,Y),this.options=p(p({},{HALF_CURL_START_LIMIT:60,NO_CURL_START_LIMIT:130,DISTANCE_VOTE_POWER:1.1,SINGLE_ANGLE_VOTE_POWER:.9,TOTAL_ANGLE_VOTE_POWER:1.6}),ne)}var X,te;return X=Y,(te=[{key:"estimate",value:function(ne){var le,ye=[],ue=[],be=u(a.all);try{for(be.s();!(le=be.n()).done;){var xe,Pe=le.value,ze=a.getPoints(Pe),Ke=[],pt=[],dt=u(ze);try{for(dt.s();!(xe=dt.n()).done;){var pe=xe.value,Le=ne[pe[0]],Ue=ne[pe[1]],Ze=this.getSlopes(Le,Ue),je=Ze[0],lt=Ze[1];Ke.push(je),pt.push(lt)}}catch(Ct){dt.e(Ct)}finally{dt.f()}ye.push(Ke),ue.push(pt)}}catch(Ct){be.e(Ct)}finally{be.f()}var st,at=[],Ut=[],mt=u(a.all);try{for(mt.s();!(st=mt.n()).done;){var ce=st.value,re=ce==a.Thumb?1:0,$e=a.getPoints(ce),qe=ne[$e[re][0]],ot=ne[$e[re+1][1]],et=ne[$e[3][1]],Ft=this.estimateFingerCurl(qe,ot,et),At=this.calculateFingerDirection(qe,ot,et,ye[ce].slice(re));at[ce]=Ft,Ut[ce]=At}}catch(Ct){mt.e(Ct)}finally{mt.f()}return{curls:at,directions:Ut}}},{key:"getSlopes",value:function(ne,le){var ye=this.calculateSlope(ne[0],ne[1],le[0],le[1]);return ne.length==2?ye:[ye,this.calculateSlope(ne[1],ne[2],le[1],le[2])]}},{key:"angleOrientationAt",value:function(ne){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,ye=0,ue=0,be=0;return ne>=75&&ne<=105?ye=1*le:ne>=25&&ne<=155?ue=1*le:be=1*le,[ye,ue,be]}},{key:"estimateFingerCurl",value:function(ne,le,ye){var ue=ne[0]-le[0],be=ne[0]-ye[0],xe=le[0]-ye[0],Pe=ne[1]-le[1],ze=ne[1]-ye[1],Ke=le[1]-ye[1],pt=ne[2]-le[2],dt=ne[2]-ye[2],pe=le[2]-ye[2],Le=Math.sqrt(ue*ue+Pe*Pe+pt*pt),Ue=Math.sqrt(be*be+ze*ze+dt*dt),Ze=Math.sqrt(xe*xe+Ke*Ke+pe*pe),je=(Ze*Ze+Le*Le-Ue*Ue)/(2*Ze*Le);je>1?je=1:je<-1&&(je=-1);var lt=Math.acos(je);return(lt=57.2958*lt%180)>this.options.NO_CURL_START_LIMIT?l.NoCurl:lt>this.options.HALF_CURL_START_LIMIT?l.HalfCurl:l.FullCurl}},{key:"estimateHorizontalDirection",value:function(ne,le,ye,ue){return ue==Math.abs(ne)?ne>0?c.HorizontalLeft:c.HorizontalRight:ue==Math.abs(le)?le>0?c.HorizontalLeft:c.HorizontalRight:ye>0?c.HorizontalLeft:c.HorizontalRight}},{key:"estimateVerticalDirection",value:function(ne,le,ye,ue){return ue==Math.abs(ne)?ne<0?c.VerticalDown:c.VerticalUp:ue==Math.abs(le)?le<0?c.VerticalDown:c.VerticalUp:ye<0?c.VerticalDown:c.VerticalUp}},{key:"estimateDiagonalDirection",value:function(ne,le,ye,ue,be,xe,Pe,ze){var Ke=this.estimateVerticalDirection(ne,le,ye,ue),pt=this.estimateHorizontalDirection(be,xe,Pe,ze);return Ke==c.VerticalUp?pt==c.HorizontalLeft?c.DiagonalUpLeft:c.DiagonalUpRight:pt==c.HorizontalLeft?c.DiagonalDownLeft:c.DiagonalDownRight}},{key:"calculateFingerDirection",value:function(ne,le,ye,ue){var be=ne[0]-le[0],xe=ne[0]-ye[0],Pe=le[0]-ye[0],ze=ne[1]-le[1],Ke=ne[1]-ye[1],pt=le[1]-ye[1],dt=Math.max(Math.abs(be),Math.abs(xe),Math.abs(Pe)),pe=Math.max(Math.abs(ze),Math.abs(Ke),Math.abs(pt)),Le=0,Ue=0,Ze=0,je=pe/(dt+1e-5);je>1.5?Le+=this.options.DISTANCE_VOTE_POWER:je>.66?Ue+=this.options.DISTANCE_VOTE_POWER:Ze+=this.options.DISTANCE_VOTE_POWER;var lt=Math.sqrt(be*be+ze*ze),st=Math.sqrt(xe*xe+Ke*Ke),at=Math.sqrt(Pe*Pe+pt*pt),Ut=Math.max(lt,st,at),mt=ne[0],ce=ne[1],re=ye[0],$e=ye[1];Ut==lt?(re=ye[0],$e=ye[1]):Ut==at&&(mt=le[0],ce=le[1]);var qe=[mt,ce],ot=[re,$e],et=this.getSlopes(qe,ot),Ft=this.angleOrientationAt(et,this.options.TOTAL_ANGLE_VOTE_POWER);Le+=Ft[0],Ue+=Ft[1],Ze+=Ft[2];var At,Ct=u(ue);try{for(Ct.s();!(At=Ct.n()).done;){var qt=At.value,yt=this.angleOrientationAt(qt,this.options.SINGLE_ANGLE_VOTE_POWER);Le+=yt[0],Ue+=yt[1],Ze+=yt[2]}}catch(Mt){Ct.e(Mt)}finally{Ct.f()}return Le==Math.max(Le,Ue,Ze)?this.estimateVerticalDirection(Ke,ze,pt,pe):Ze==Math.max(Ue,Ze)?this.estimateHorizontalDirection(xe,be,Pe,dt):this.estimateDiagonalDirection(Ke,ze,pt,pe,xe,be,Pe,dt)}},{key:"calculateSlope",value:function(ne,le,ye,ue){var be=(le-ue)/(ne-ye),xe=180*Math.atan(be)/Math.PI;return xe<=0?xe=-xe:xe>0&&(xe=180-xe),xe}}])&&v(X.prototype,te),Y}();function x(Y,X){var te=typeof Symbol<"u"&&Y[Symbol.iterator]||Y["@@iterator"];if(!te){if(Array.isArray(Y)||(te=function(xe,Pe){if(xe){if(typeof xe=="string")return _(xe,Pe);var ze=Object.prototype.toString.call(xe).slice(8,-1);if(ze==="Object"&&xe.constructor&&(ze=xe.constructor.name),ze==="Map"||ze==="Set")return Array.from(xe);if(ze==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ze))return _(xe,Pe)}}(Y))||X){te&&(Y=te);var ne=0,le=function(){};return{s:le,n:function(){return ne>=Y.length?{done:!0}:{done:!1,value:Y[ne++]}},e:function(xe){throw xe},f:le}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ye,ue=!0,be=!1;return{s:function(){te=te.call(Y)},n:function(){var xe=te.next();return ue=xe.done,xe},e:function(xe){be=!0,ye=xe},f:function(){try{ue||te.return==null||te.return()}finally{if(be)throw ye}}}}function _(Y,X){(X==null||X>Y.length)&&(X=Y.length);for(var te=0,ne=new Array(X);te<X;te++)ne[te]=Y[te];return ne}function E(Y,X){if(!(Y instanceof X))throw new TypeError("Cannot call a class as a function")}function C(Y,X){for(var te=0;te<X.length;te++){var ne=X[te];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(Y,ne.key,ne)}}var M=function(){function Y(ne){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};E(this,Y),this.estimator=new b(le),this.gestures=ne}var X,te;return X=Y,(te=[{key:"estimate",value:function(ne,le){var ye,ue=[],be=this.estimator.estimate(ne),xe=[],Pe=x(a.all);try{for(Pe.s();!(ye=Pe.n()).done;){var ze=ye.value;xe.push([a.getName(ze),l.getName(be.curls[ze]),c.getName(be.directions[ze])])}}catch(Le){Pe.e(Le)}finally{Pe.f()}var Ke,pt=x(this.gestures);try{for(pt.s();!(Ke=pt.n()).done;){var dt=Ke.value,pe=dt.matchAgainst(be.curls,be.directions);pe>=le&&ue.push({name:dt.name,score:pe})}}catch(Le){pt.e(Le)}finally{pt.f()}return{poseData:xe,gestures:ue}}}])&&C(X.prototype,te),Y}();function R(Y,X){return function(te){if(Array.isArray(te))return te}(Y)||function(te,ne){var le=te==null?null:typeof Symbol<"u"&&te[Symbol.iterator]||te["@@iterator"];if(le!=null){var ye,ue,be=[],xe=!0,Pe=!1;try{for(le=le.call(te);!(xe=(ye=le.next()).done)&&(be.push(ye.value),!ne||be.length!==ne);xe=!0);}catch(ze){Pe=!0,ue=ze}finally{try{xe||le.return==null||le.return()}finally{if(Pe)throw ue}}return be}}(Y,X)||B(Y,X)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function L(Y,X){var te=typeof Symbol<"u"&&Y[Symbol.iterator]||Y["@@iterator"];if(!te){if(Array.isArray(Y)||(te=B(Y))||X){te&&(Y=te);var ne=0,le=function(){};return{s:le,n:function(){return ne>=Y.length?{done:!0}:{done:!1,value:Y[ne++]}},e:function(xe){throw xe},f:le}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ye,ue=!0,be=!1;return{s:function(){te=te.call(Y)},n:function(){var xe=te.next();return ue=xe.done,xe},e:function(xe){be=!0,ye=xe},f:function(){try{ue||te.return==null||te.return()}finally{if(be)throw ye}}}}function B(Y,X){if(Y){if(typeof Y=="string")return N(Y,X);var te=Object.prototype.toString.call(Y).slice(8,-1);return te==="Object"&&Y.constructor&&(te=Y.constructor.name),te==="Map"||te==="Set"?Array.from(Y):te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(te)?N(Y,X):void 0}}function N(Y,X){(X==null||X>Y.length)&&(X=Y.length);for(var te=0,ne=new Array(X);te<X;te++)ne[te]=Y[te];return ne}function I(Y,X){for(var te=0;te<X.length;te++){var ne=X[te];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(Y,ne.key,ne)}}var D=function(){function Y(ne){(function(le,ye){if(!(le instanceof ye))throw new TypeError("Cannot call a class as a function")})(this,Y),this.name=ne,this.curls={},this.directions={}}var X,te;return X=Y,(te=[{key:"addCurl",value:function(ne,le){var ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;this.curls[ne]===void 0&&(this.curls[ne]=[]),this.curls[ne].push([le,ye])}},{key:"addDirection",value:function(ne,le){var ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;this.directions[ne]===void 0&&(this.directions[ne]=[]),this.directions[ne].push([le,ye])}},{key:"matchAgainst",value:function(ne,le){var ye=0,ue=0;for(var be in ne){var xe=ne[be],Pe=this.curls[be];if(Pe!==void 0){ue++;var ze,Ke=!1,pt=0,dt=L(Pe);try{for(dt.s();!(ze=dt.n()).done;){var pe=R(ze.value,2),Le=pe[0],Ue=pe[1];if(xe==Le){ye+=Ue,pt=Math.max(pt,Ue),Ke=!0;break}}}catch(qe){dt.e(qe)}finally{dt.f()}Ke||(ye-=pt)}}for(var Ze in le){var je=le[Ze],lt=this.directions[Ze];if(lt!==void 0){ue++;var st,at=!1,Ut=0,mt=L(lt);try{for(mt.s();!(st=mt.n()).done;){var ce=R(st.value,2),re=ce[0],$e=ce[1];if(je==re){ye+=$e,Ut=Math.max(Ut,$e),at=!0;break}}}catch(qe){mt.e(qe)}finally{mt.f()}at||(ye-=Ut)}}return ye/ue*10}}])&&I(X.prototype,te),Y}(),P=new D("victory");P.addDirection(a.Thumb,c.VerticalUp,1),P.addDirection(a.Thumb,c.DiagonalUpLeft,1),P.addDirection(a.Thumb,c.DiagonalUpRight,1),P.addCurl(a.Index,l.NoCurl,1),P.addDirection(a.Index,c.VerticalUp,1),P.addDirection(a.Index,c.DiagonalUpLeft,1),P.addDirection(a.Index,c.DiagonalUpRight,1),P.addDirection(a.Index,c.HorizontalLeft,1),P.addDirection(a.Index,c.HorizontalRight,1),P.addCurl(a.Middle,l.NoCurl,1),P.addDirection(a.Middle,c.VerticalUp,1),P.addDirection(a.Middle,c.DiagonalUpLeft,1),P.addDirection(a.Middle,c.DiagonalUpRight,1),P.addDirection(a.Middle,c.HorizontalLeft,1),P.addDirection(a.Middle,c.HorizontalRight,1),P.addCurl(a.Ring,l.FullCurl,1),P.addCurl(a.Ring,l.HalfCurl,.9),P.addCurl(a.Pinky,l.FullCurl,1),P.addCurl(a.Pinky,l.HalfCurl,.9);var G=P,W=new D("thumbs_up");W.addCurl(a.Thumb,l.NoCurl,1),W.addDirection(a.Thumb,c.VerticalUp,1),W.addDirection(a.Thumb,c.DiagonalUpLeft,.9),W.addDirection(a.Thumb,c.DiagonalUpRight,.9);for(var q=0,z=[a.Index,a.Middle,a.Ring,a.Pinky];q<z.length;q++){var J=z[q];W.addCurl(J,l.FullCurl,1),W.addCurl(J,l.HalfCurl,.9)}W.addDirection(a.Index,c.DiagonalUpLeft,1),W.addDirection(a.Index,c.HorizontalLeft,1),W.addDirection(a.Index,c.HorizontalRight,1),W.addDirection(a.Index,c.DiagonalUpRight,1);var Q=W;r.default={GestureEstimator:M,GestureDescription:D,Finger:a,FingerCurl:l,FingerDirection:c,Gestures:s}}]).default})}(BM)),BM.exports}var ea=oGe(),$M={exports:{}},aGe=$M.exports,S9;function lGe(){return S9||(S9=1,function(n,e){(function(r,i){n.exports=i(Mv())})(aGe,function(t){return function(r){var i={};function s(o){if(i[o])return i[o].exports;var a=i[o]={i:o,l:!1,exports:{}};return r[o].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=r,s.c=i,s.d=function(o,a,l){s.o(o,a)||Object.defineProperty(o,a,{enumerable:!0,get:l})},s.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},s.t=function(o,a){if(a&1&&(o=s(o)),a&8||a&4&&typeof o=="object"&&o&&o.__esModule)return o;var l=Object.create(null);if(s.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:o}),a&2&&typeof o!="string")for(var c in o)s.d(l,c,(function(u){return o[u]}).bind(null,c));return l},s.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return s.d(a,"a",a),a},s.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},s.p="",s(s.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(r,i,s){s.r(i);var o=s("react"),a=function(){var f=function(p,g){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,b){v.__proto__=b}||function(v,b){for(var x in b)b.hasOwnProperty(x)&&(v[x]=b[x])},f(p,g)};return function(p,g){f(p,g);function v(){this.constructor=p}p.prototype=g===null?Object.create(g):(v.prototype=g.prototype,new v)}}(),l=function(){return l=Object.assign||function(f){for(var p,g=1,v=arguments.length;g<v;g++){p=arguments[g];for(var b in p)Object.prototype.hasOwnProperty.call(p,b)&&(f[b]=p[b])}return f},l.apply(this,arguments)},c=function(f,p){var g={};for(var v in f)Object.prototype.hasOwnProperty.call(f,v)&&p.indexOf(v)<0&&(g[v]=f[v]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,v=Object.getOwnPropertySymbols(f);b<v.length;b++)p.indexOf(v[b])<0&&Object.prototype.propertyIsEnumerable.call(f,v[b])&&(g[v[b]]=f[v[b]]);return g};(function(){typeof window>"u"||(navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(p){var g=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return g?new Promise(function(v,b){g.call(navigator,p,v,b)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}))})();function u(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}var d=function(f){a(p,f);function p(g){var v=f.call(this,g)||this;return v.canvas=null,v.ctx=null,v.requestUserMediaId=0,v.unmounted=!1,v.state={hasUserMedia:!1},v}return p.prototype.componentDidMount=function(){var g=this,v=g.state,b=g.props;if(this.unmounted=!1,!u()){b.onUserMediaError("getUserMedia not supported");return}v.hasUserMedia||this.requestUserMedia(),b.children&&typeof b.children!="function"&&console.warn("children must be a function")},p.prototype.componentDidUpdate=function(g){var v=this.props;if(!u()){v.onUserMediaError("getUserMedia not supported");return}var b=JSON.stringify(g.audioConstraints)!==JSON.stringify(v.audioConstraints),x=JSON.stringify(g.videoConstraints)!==JSON.stringify(v.videoConstraints),_=g.minScreenshotWidth!==v.minScreenshotWidth,E=g.minScreenshotHeight!==v.minScreenshotHeight;(x||_||E)&&(this.canvas=null,this.ctx=null),(b||x)&&(this.stopAndCleanup(),this.requestUserMedia())},p.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},p.stopMediaStream=function(g){g&&(g.getVideoTracks&&g.getAudioTracks?(g.getVideoTracks().map(function(v){g.removeTrack(v),v.stop()}),g.getAudioTracks().map(function(v){g.removeTrack(v),v.stop()})):g.stop())},p.prototype.stopAndCleanup=function(){var g=this.state;g.hasUserMedia&&(p.stopMediaStream(this.stream),g.src&&window.URL.revokeObjectURL(g.src))},p.prototype.getScreenshot=function(g){var v=this,b=v.state,x=v.props;if(!b.hasUserMedia)return null;var _=this.getCanvas(g);return _&&_.toDataURL(x.screenshotFormat,x.screenshotQuality)},p.prototype.getCanvas=function(g){var v=this,b=v.state,x=v.props;if(!this.video||!b.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var _=this.video.videoWidth,E=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var C=_/E;_=x.minScreenshotWidth||this.video.clientWidth,E=_/C,x.minScreenshotHeight&&E<x.minScreenshotHeight&&(E=x.minScreenshotHeight,_=E*C)}this.canvas=document.createElement("canvas"),this.canvas.width=(g==null?void 0:g.width)||_,this.canvas.height=(g==null?void 0:g.height)||E,this.ctx=this.canvas.getContext("2d")}var M=this,R=M.ctx,L=M.canvas;return R&&L&&(L.width=(g==null?void 0:g.width)||L.width,L.height=(g==null?void 0:g.height)||L.height,x.mirrored&&(R.translate(L.width,0),R.scale(-1,1)),R.imageSmoothingEnabled=x.imageSmoothing,R.drawImage(this.video,0,0,(g==null?void 0:g.width)||L.width,(g==null?void 0:g.height)||L.height),x.mirrored&&(R.scale(-1,1),R.translate(-L.width,0))),L},p.prototype.requestUserMedia=function(){var g=this,v=this.props,b=function(E,C){var M={video:typeof C<"u"?C:!0};v.audio&&(M.audio=typeof E<"u"?E:!0),g.requestUserMediaId++;var R=g.requestUserMediaId;navigator.mediaDevices.getUserMedia(M).then(function(L){g.unmounted||R!==g.requestUserMediaId?p.stopMediaStream(L):g.handleUserMedia(null,L)}).catch(function(L){g.handleUserMedia(L)})};if("mediaDevices"in navigator)b(v.audioConstraints,v.videoConstraints);else{var x=function(E){return{optional:[{sourceId:E}]}},_=function(E){var C=E.deviceId;return typeof C=="string"?C:Array.isArray(C)&&C.length>0?C[0]:typeof C=="object"&&C.ideal?C.ideal:null};MediaStreamTrack.getSources(function(E){var C=null,M=null;E.forEach(function(B){B.kind==="audio"?C=B.id:B.kind==="video"&&(M=B.id)});var R=_(v.audioConstraints);R&&(C=R);var L=_(v.videoConstraints);L&&(M=L),b(x(C),x(M))})}},p.prototype.handleUserMedia=function(g,v){var b=this.props;if(g||!v){this.setState({hasUserMedia:!1}),b.onUserMediaError(g);return}this.stream=v;try{this.video&&(this.video.srcObject=v),this.setState({hasUserMedia:!0})}catch{this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(v)})}b.onUserMedia(v)},p.prototype.render=function(){var g=this,v=this,b=v.state,x=v.props,_=x.audio;x.forceScreenshotSourceSize;var E=x.disablePictureInPicture;x.onUserMedia,x.onUserMediaError,x.screenshotFormat,x.screenshotQuality,x.minScreenshotWidth,x.minScreenshotHeight,x.audioConstraints,x.videoConstraints,x.imageSmoothing;var C=x.mirrored,M=x.style,R=M===void 0?{}:M,L=x.children,B=c(x,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),N=C?l(l({},R),{transform:(R.transform||"")+" scaleX(-1)"}):R,I={getScreenshot:this.getScreenshot.bind(this)};return o.createElement(o.Fragment,null,o.createElement("video",l({autoPlay:!0,disablePictureInPicture:E,src:b.src,muted:!_,playsInline:!0,ref:function(D){g.video=D},style:N},B)),L&&L(I))},p.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},p}(o.Component);i.default=d},react:function(r,i){r.exports=t}}).default})}($M)),$M.exports}var cGe=lGe();const uGe=Zp(cGe),w9={thumb:[0,1,2,3,4],indexFinger:[0,5,6,7,8],middleFinger:[0,9,10,11,12],ringFinger:[0,13,14,15,16],pinky:[0,17,18,19,20]},dGe={thumb:"red",indexFinger:"blue",middleFinger:"green",ringFinger:"orange",pinky:"purple"},hGe=[ea.Gestures.ThumbsUpGesture,ea.Gestures.VictoryGesture,pGe()],fGe={thumbs_up:"",victory:"",middle_finger:""};function pGe(){const n=new ea.GestureDescription("middle_finger");return n.addCurl(ea.Finger.Middle,ea.FingerCurl.NoCurl),n.addDirection(ea.Finger.Middle,ea.FingerDirection.VerticalUp,1),n.addDirection(ea.Finger.Middle,ea.FingerDirection.DiagonalUpLeft,.9),n.addDirection(ea.Finger.Middle,ea.FingerDirection.DiagonalUpRight,.9),[ea.Finger.Thumb,ea.Finger.Index,ea.Finger.Ring,ea.Finger.Pinky].forEach(e=>{n.addCurl(e,ea.FingerCurl.FullCurl,1),n.addCurl(e,ea.FingerCurl.HalfCurl,.9)}),n}const mGe=(n,e)=>{e.clearRect(0,0,e.canvas.width,e.canvas.height),n.length>0&&n.forEach(t=>{const r=t.keypoints;for(let i in w9){const s=w9[i];for(let o=0;o<s.length-1;o++){const a=r[s[o]],l=r[s[o+1]];e.beginPath(),e.moveTo(a.x,a.y),e.lineTo(l.x,l.y),e.strokeStyle=dGe[i],e.lineWidth=3,e.stroke()}}for(let i=0;i<r.length;i++){const s=r[i].x,o=r[i].y;e.beginPath(),e.arc(s,o,5,0,2*Math.PI),e.fillStyle="white",e.fill()}})},gGe=async(n,e)=>{const t=[];if(n.length>0){const r=new ea.GestureEstimator(e);n.forEach((i,s)=>{if(i.keypoints3D){const o=i.keypoints3D.map(l=>[l.x,l.y,l.z]),a=r.estimate(o,7.5);if(a.gestures.length>0){let l=a.gestures.reduce((c,u)=>c.score>u.score?c:u);l.score>9&&t.push({name:l.name,emoji:fGe[l.name]||"",confidence:l.score,handedness:i.handedness||"Unknown",handIndex:s})}}})}return t.length>0?t:null};function yGe(){const n=F.useRef(null),e=F.useRef(null),[t,r]=F.useState("Initializing..."),[i,s]=F.useState(null),[o,a]=F.useState([]),l=async c=>{if(typeof n.current<"u"&&n.current!==null&&n.current.video.readyState===4){const u=n.current.video,d=n.current.video.videoWidth,f=n.current.video.videoHeight;n.current.video.width=d,n.current.video.height=f,e.current.width=d,e.current.height=f;try{const p=await c.estimateHands(u,{flipHorizontal:!1});if(p.length>0){console.log(`Detected ${p.length} hand(s)`);const v=await gGe(p,hGe);v?(console.log("Detected gestures:",v),a(v)):a([])}else a([]);const g=e.current.getContext("2d");mGe(p,g)}catch(p){console.error("Detection error:",p)}}};return F.useEffect(()=>{(async()=>{try{r("Initializing TensorFlow..."),await Jve(),console.log("TensorFlow backend:",zY()),r("Loading MediaPipe Hands model...");const u=mN.MediaPipeHands,f=await iGe(u,{runtime:"mediapipe",solutionPath:"https://cdn.jsdelivr.net/npm/@mediapipe/hands",maxHands:2,modelType:"full"});console.log("Hand pose model loaded with multi-hand detection."),r("Model loaded - show your hands to the camera!");const p=setInterval(()=>{l(f)},100);return()=>clearInterval(p)}catch(u){console.error("Error loading model:",u),s(`Failed to load hand pose model: ${u.message}`),r("Error")}})().then(u=>{})},[]),V.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 p-4",children:V.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-4xl",children:[V.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Hand Pose Detection with Gestures"}),V.jsx("div",{className:"mb-6",children:V.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[V.jsx("div",{className:`w-3 h-3 rounded-full ${i?"bg-red-500":"bg-green-500 animate-pulse"}`}),V.jsx("span",{className:"text-base text-gray-600",children:t})]})}),o.length>0&&V.jsx("div",{className:"mb-4 flex gap-4 justify-center flex-wrap",children:o.map((c,u)=>V.jsxs("div",{className:"p-4 bg-blue-100 border-2 border-blue-500 rounded-lg text-center min-w-[200px]",children:[V.jsxs("div",{className:"text-sm font-semibold text-blue-600 mb-1",children:[c.handedness," Hand"]}),V.jsx("div",{className:"text-5xl mb-2",children:c.emoji}),V.jsx("div",{className:"text-lg font-bold text-blue-800",children:c.name.replace("_"," ").toUpperCase()}),V.jsxs("div",{className:"text-xs text-blue-600",children:["Confidence: ",c.confidence.toFixed(2)]})]},u))}),V.jsxs("div",{className:"relative w-full mx-auto",style:{maxWidth:"960px",height:"720px"},children:[V.jsx(uGe,{ref:n,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",transform:"scaleX(-1)",zIndex:1}}),V.jsx("canvas",{ref:e,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:2,transform:"scaleX(-1)"}})]}),V.jsxs("div",{className:"mt-6 space-y-3",children:[V.jsx("p",{className:"text-base text-gray-600 text-center",children:"Show gestures with either or both hands:  Thumbs Up or  Victory/Peace Sign"}),i&&V.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:V.jsx("p",{className:"text-sm",children:i})}),V.jsxs("div",{className:"flex flex-wrap gap-3 justify-center mt-6",children:[V.jsxs("div",{className:"flex items-center space-x-2",children:[V.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),V.jsx("span",{className:"text-sm",children:"Thumb"})]}),V.jsxs("div",{className:"flex items-center space-x-2",children:[V.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded"}),V.jsx("span",{className:"text-sm",children:"Index"})]}),V.jsxs("div",{className:"flex items-center space-x-2",children:[V.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),V.jsx("span",{className:"text-sm",children:"Middle"})]}),V.jsxs("div",{className:"flex items-center space-x-2",children:[V.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),V.jsx("span",{className:"text-sm",children:"Ring"})]}),V.jsxs("div",{className:"flex items-center space-x-2",children:[V.jsx("div",{className:"w-4 h-4 bg-purple-500 rounded"}),V.jsx("span",{className:"text-sm",children:"Pinky"})]})]})]})]})})}function Are({audioData:n,autoPlay:e=!0,onPlayingStateChange:t}){const r=F.useRef(null),i=F.useRef(null);return F.useEffect(()=>{if(!(!n||n.length===0)){if(n===i.current){console.log("Audio already processed, skipping...");return}console.log("Processing new audio data..."),i.current=n;try{let s;if(typeof n=="string"){const c=atob(n);s=new Uint8Array(c.length);for(let u=0;u<c.length;u++)s[u]=c.charCodeAt(u)}else s=new Uint8Array(n);console.log("Creating audio blob, size:",s.length,"bytes");const o=new Blob([s],{type:"audio/mpeg"}),a=URL.createObjectURL(o);console.log("Audio URL created:",a),r.current&&(console.log("Cleaning up previous audio"),r.current.pause(),r.current.onplay=null,r.current.onended=null,r.current.onpause=null,r.current.onerror=null,URL.revokeObjectURL(r.current.src));const l=new Audio(a);r.current=l,l.onloadeddata=()=>{console.log("Audio loaded successfully, duration:",l.duration)},l.onplay=()=>{console.log("Audio started playing"),t&&t(!0)},l.onended=()=>{console.log("Audio playback finished"),URL.revokeObjectURL(a),t&&t(!1)},l.onpause=()=>{l.currentTime>0&&l.currentTime<l.duration&&(console.log("Audio paused at",l.currentTime),t&&t(!1))},l.onerror=c=>{console.error("Error playing audio:",c),console.error("Audio error details:",l.error),URL.revokeObjectURL(a),t&&t(!1)},e&&setTimeout(()=>{l.play().then(()=>{console.log("Audio playing...")}).catch(c=>{console.error("Failed to auto-play audio:",c),t&&t(!1)})},100)}catch(s){console.error("Error processing audio data:",s),t&&t(!1)}}},[n]),F.useEffect(()=>()=>{console.log("TTSControls unmounting, cleaning up audio"),r.current&&(r.current.pause(),r.current.onplay=null,r.current.onended=null,r.current.onpause=null,r.current.onerror=null,r.current.src&&URL.revokeObjectURL(r.current.src)),t&&t(!1)},[]),null}var CB={exports:{}},vp={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _9;function vGe(){return _9||(_9=1,vp.ConcurrentRoot=1,vp.ContinuousEventPriority=8,vp.DefaultEventPriority=32,vp.DiscreteEventPriority=2,vp.IdleEventPriority=268435456,vp.LegacyRoot=0,vp.NoEventPriority=0),vp}var C9;function bGe(){return C9||(C9=1,CB.exports=vGe()),CB.exports}var LM=bGe(),EB={exports:{}},AB={},TB={exports:{}},MB={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E9;function xGe(){if(E9)return MB;E9=1;var n=Mv();function e(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,s=n.useLayoutEffect,o=n.useDebugValue;function a(d,f){var p=f(),g=r({inst:{value:p,getSnapshot:f}}),v=g[0].inst,b=g[1];return s(function(){v.value=p,v.getSnapshot=f,l(v)&&b({inst:v})},[d,p,f]),i(function(){return l(v)&&b({inst:v}),d(function(){l(v)&&b({inst:v})})},[d]),o(p),p}function l(d){var f=d.getSnapshot;d=d.value;try{var p=f();return!t(d,p)}catch{return!0}}function c(d,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return MB.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:u,MB}var A9;function SGe(){return A9||(A9=1,TB.exports=xGe()),TB.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T9;function wGe(){if(T9)return AB;T9=1;var n=Mv(),e=SGe();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,s=n.useRef,o=n.useEffect,a=n.useMemo,l=n.useDebugValue;return AB.useSyncExternalStoreWithSelector=function(c,u,d,f,p){var g=s(null);if(g.current===null){var v={hasValue:!1,value:null};g.current=v}else v=g.current;g=a(function(){function x(R){if(!_){if(_=!0,E=R,R=f(R),p!==void 0&&v.hasValue){var L=v.value;if(p(L,R))return C=L}return C=R}if(L=C,r(E,R))return L;var B=f(R);return p!==void 0&&p(L,B)?(E=R,L):(E=R,C=B)}var _=!1,E,C,M=d===void 0?null:d;return[function(){return x(u())},M===null?void 0:function(){return x(M())}]},[u,d,f,p]);var b=i(c,g[0],g[1]);return o(function(){v.hasValue=!0,v.value=b},[b]),l(b),b},AB}var M9;function _Ge(){return M9||(M9=1,EB.exports=wGe()),EB.exports}var CGe=_Ge();const EGe=Zp(CGe),R9=n=>{let e;const t=new Set,r=(c,u)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const f=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),t.forEach(p=>p(e,f))}},i=()=>e,a={setState:r,getState:i,getInitialState:()=>l,subscribe:c=>(t.add(c),()=>t.delete(c))},l=e=n(r,i,a);return a},AGe=n=>n?R9(n):R9,{useSyncExternalStoreWithSelector:TGe}=EGe,MGe=n=>n;function RGe(n,e=MGe,t){const r=TGe(n.subscribe,n.getState,n.getInitialState,e,t);return Ne.useDebugValue(r),r}const N9=(n,e)=>{const t=AGe(n),r=(i,s=e)=>RGe(t,i,s);return Object.assign(r,t),r},Tre=(n,e)=>n?N9(n,e):N9,NGe=n=>typeof n=="object"&&typeof n.then=="function",Fy=[];function Mre(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function Rre(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of Fy)if(Mre(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=Fy.indexOf(i);s!==-1&&Fy.splice(s,1)},promise:(NGe(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(Fy.push(i),!t)throw i.promise}const IGe=(n,e,t)=>Rre(n,e,!1,t),DGe=(n,e,t)=>void Rre(n,e,!0,t),kGe=n=>{if(n===void 0||n.length===0)Fy.splice(0,Fy.length);else{const e=Fy.find(t=>Mre(n,t.keys,t.equal));e&&e.remove()}};var RB={exports:{}},NB={exports:{}},IB={exports:{}},DB={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I9;function OGe(){return I9||(I9=1,function(n){function e(z,J){var Q=z.length;z.push(J);e:for(;0<Q;){var Y=Q-1>>>1,X=z[Y];if(0<i(X,J))z[Y]=J,z[Q]=X,Q=Y;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var J=z[0],Q=z.pop();if(Q!==J){z[0]=Q;e:for(var Y=0,X=z.length,te=X>>>1;Y<te;){var ne=2*(Y+1)-1,le=z[ne],ye=ne+1,ue=z[ye];if(0>i(le,Q))ye<X&&0>i(ue,le)?(z[Y]=ue,z[ye]=Q,Y=ye):(z[Y]=le,z[ne]=Q,Y=ne);else if(ye<X&&0>i(ue,Q))z[Y]=ue,z[ye]=Q,Y=ye;else break e}}return J}function i(z,J){var Q=z.sortIndex-J.sortIndex;return Q!==0?Q:z.id-J.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,g=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function E(z){for(var J=t(c);J!==null;){if(J.callback===null)r(c);else if(J.startTime<=z)r(c),J.sortIndex=J.expirationTime,e(l,J);else break;J=t(c)}}function C(z){if(v=!1,E(z),!g)if(t(l)!==null)g=!0,W();else{var J=t(c);J!==null&&q(C,J.startTime-z)}}var M=!1,R=-1,L=5,B=-1;function N(){return!(n.unstable_now()-B<L)}function I(){if(M){var z=n.unstable_now();B=z;var J=!0;try{e:{g=!1,v&&(v=!1,x(R),R=-1),p=!0;var Q=f;try{t:{for(E(z),d=t(l);d!==null&&!(d.expirationTime>z&&N());){var Y=d.callback;if(typeof Y=="function"){d.callback=null,f=d.priorityLevel;var X=Y(d.expirationTime<=z);if(z=n.unstable_now(),typeof X=="function"){d.callback=X,E(z),J=!0;break t}d===t(l)&&r(l),E(z)}else r(l);d=t(l)}if(d!==null)J=!0;else{var te=t(c);te!==null&&q(C,te.startTime-z),J=!1}}break e}finally{d=null,f=Q,p=!1}J=void 0}}finally{J?D():M=!1}}}var D;if(typeof _=="function")D=function(){_(I)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,G=P.port2;P.port1.onmessage=I,D=function(){G.postMessage(null)}}else D=function(){b(I,0)};function W(){M||(M=!0,D())}function q(z,J){R=b(function(){z(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){g||p||(g=!0,W())},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(z){switch(f){case 1:case 2:case 3:var J=3;break;default:J=f}var Q=f;f=J;try{return z()}finally{f=Q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,J){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=f;f=z;try{return J()}finally{f=Q}},n.unstable_scheduleCallback=function(z,J,Q){var Y=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?Y+Q:Y):Q=Y,z){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=Q+X,z={id:u++,callback:J,priorityLevel:z,startTime:Q,expirationTime:X,sortIndex:-1},Q>Y?(z.sortIndex=Q,e(c,z),t(l)===null&&z===t(c)&&(v?(x(R),R=-1):v=!0,q(C,Q-Y))):(z.sortIndex=X,e(l,z),g||p||(g=!0,W())),z},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(z){var J=f;return function(){var Q=f;f=J;try{return z.apply(this,arguments)}finally{f=Q}}}}(DB)),DB}var D9;function BGe(){return D9||(D9=1,IB.exports=OGe()),IB.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k9;function $Ge(){return k9||(k9=1,function(n){n.exports=function(e){function t(y,S,T,$){return new IS(y,S,T,$)}function r(){}function i(y){var S="https://react.dev/errors/"+y;if(1<arguments.length){S+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)S+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+y+"; visit "+S+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(y){return y===null||typeof y!="object"?null:(y=Cd&&y[Cd]||y["@@iterator"],typeof y=="function"?y:null)}function o(y){if(y==null)return null;if(typeof y=="function")return y.$$typeof===BS?null:y.displayName||y.name||null;if(typeof y=="string")return y;switch(y){case Nh:return"Fragment";case Zl:return"Portal";case hb:return"Profiler";case D0:return"StrictMode";case fb:return"Suspense";case _m:return"SuspenseList"}if(typeof y=="object")switch(y.$$typeof){case Pc:return(y.displayName||"Context")+".Provider";case kS:return(y._context.displayName||"Context")+".Consumer";case O0:var S=y.render;return y=y.displayName,y||(y=S.displayName||S.name||"",y=y!==""?"ForwardRef("+y+")":"ForwardRef"),y;case pb:return S=y.displayName||null,S!==null?S:o(y.type)||"Memo";case Ql:S=y._payload,y=y._init;try{return o(y(S))}catch{}}return null}function a(y){if(mu===void 0)try{throw Error()}catch(T){var S=T.stack.trim().match(/\n( *(at )?)/);mu=S&&S[1]||"",Ed=-1<T.stack.indexOf(`
    at`)?" (<anonymous>)":-1<T.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mu+y+Ed}function l(y,S){if(!y||Xf)return"";Xf=!0;var T=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var $={DetermineComponentFrameRoot:function(){try{if(S){var dn=function(){throw Error()};if(Object.defineProperty(dn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(dn,[])}catch(dr){var gn=dr}Reflect.construct(y,[],dn)}else{try{dn.call()}catch(dr){gn=dr}y.call(dn.prototype)}}else{try{throw Error()}catch(dr){gn=dr}(dn=y())&&typeof dn.catch=="function"&&dn.catch(function(){})}}catch(dr){if(dr&&gn&&typeof dr.stack=="string")return[dr.stack,gn.stack]}return[null,null]}};$.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var H=Object.getOwnPropertyDescriptor($.DetermineComponentFrameRoot,"name");H&&H.configurable&&Object.defineProperty($.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var K=$.DetermineComponentFrameRoot(),ge=K[0],De=K[1];if(ge&&De){var Qe=ge.split(`
`),Dt=De.split(`
`);for(H=$=0;$<Qe.length&&!Qe[$].includes("DetermineComponentFrameRoot");)$++;for(;H<Dt.length&&!Dt[H].includes("DetermineComponentFrameRoot");)H++;if($===Qe.length||H===Dt.length)for($=Qe.length-1,H=Dt.length-1;1<=$&&0<=H&&Qe[$]!==Dt[H];)H--;for(;1<=$&&0<=H;$--,H--)if(Qe[$]!==Dt[H]){if($!==1||H!==1)do if($--,H--,0>H||Qe[$]!==Dt[H]){var Jt=`
`+Qe[$].replace(" at new "," at ");return y.displayName&&Jt.includes("<anonymous>")&&(Jt=Jt.replace("<anonymous>",y.displayName)),Jt}while(1<=$&&0<=H);break}}}finally{Xf=!1,Error.prepareStackTrace=T}return(T=y?y.displayName||y.name:"")?a(T):""}function c(y){switch(y.tag){case 26:case 27:case 5:return a(y.type);case 16:return a("Lazy");case 13:return a("Suspense");case 19:return a("SuspenseList");case 0:case 15:return y=l(y.type,!1),y;case 11:return y=l(y.type.render,!1),y;case 1:return y=l(y.type,!0),y;default:return""}}function u(y){try{var S="";do S+=c(y),y=y.return;while(y);return S}catch(T){return`
Error generating stack: `+T.message+`
`+T.stack}}function d(y){var S=y,T=y;if(y.alternate)for(;S.return;)S=S.return;else{y=S;do S=y,(S.flags&4098)!==0&&(T=S.return),y=S.return;while(y)}return S.tag===3?T:null}function f(y){if(d(y)!==y)throw Error(i(188))}function p(y){var S=y.alternate;if(!S){if(S=d(y),S===null)throw Error(i(188));return S!==y?null:y}for(var T=y,$=S;;){var H=T.return;if(H===null)break;var K=H.alternate;if(K===null){if($=H.return,$!==null){T=$;continue}break}if(H.child===K.child){for(K=H.child;K;){if(K===T)return f(H),y;if(K===$)return f(H),S;K=K.sibling}throw Error(i(188))}if(T.return!==$.return)T=H,$=K;else{for(var ge=!1,De=H.child;De;){if(De===T){ge=!0,T=H,$=K;break}if(De===$){ge=!0,$=H,T=K;break}De=De.sibling}if(!ge){for(De=K.child;De;){if(De===T){ge=!0,T=K,$=H;break}if(De===$){ge=!0,$=K,T=H;break}De=De.sibling}if(!ge)throw Error(i(189))}}if(T.alternate!==$)throw Error(i(190))}if(T.tag!==3)throw Error(i(188));return T.stateNode.current===T?y:S}function g(y){var S=y.tag;if(S===5||S===26||S===27||S===6)return y;for(y=y.child;y!==null;){if(S=g(y),S!==null)return S;y=y.sibling}return null}function v(y){var S=y.tag;if(S===5||S===26||S===27||S===6)return y;for(y=y.child;y!==null;){if(y.tag!==4&&(S=v(y),S!==null))return S;y=y.sibling}return null}function b(y){return{current:y}}function x(y){0>Rd||(y.current=Ts[Rd],Ts[Rd]=null,Rd--)}function _(y,S){Rd++,Ts[Rd]=y.current,y.current=S}function E(y){return y>>>=0,y===0?32:31-(bA(y)/xA|0)|0}function C(y){var S=y&42;if(S!==0)return S;switch(y&-y){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return y&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return y}}function M(y,S){var T=y.pendingLanes;if(T===0)return 0;var $=0,H=y.suspendedLanes,K=y.pingedLanes,ge=y.warmLanes;y=y.finishedLanes!==0;var De=T&134217727;return De!==0?(T=De&~H,T!==0?$=C(T):(K&=De,K!==0?$=C(K):y||(ge=De&~ge,ge!==0&&($=C(ge))))):(De=T&~H,De!==0?$=C(De):K!==0?$=C(K):y||(ge=T&~ge,ge!==0&&($=C(ge)))),$===0?0:S!==0&&S!==$&&(S&H)===0&&(H=$&-$,ge=S&-S,H>=ge||H===32&&(ge&4194176)!==0)?S:$}function R(y,S){return(y.pendingLanes&~(y.suspendedLanes&~y.pingedLanes)&S)===0}function L(y,S){switch(y){case 1:case 2:case 4:case 8:return S+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return S+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function B(){var y=yu;return yu<<=1,(yu&4194176)===0&&(yu=128),y}function N(){var y=Yf;return Yf<<=1,(Yf&62914560)===0&&(Yf=4194304),y}function I(y){for(var S=[],T=0;31>T;T++)S.push(y);return S}function D(y,S){y.pendingLanes|=S,S!==268435456&&(y.suspendedLanes=0,y.pingedLanes=0,y.warmLanes=0)}function P(y,S,T,$,H,K){var ge=y.pendingLanes;y.pendingLanes=T,y.suspendedLanes=0,y.pingedLanes=0,y.warmLanes=0,y.expiredLanes&=T,y.entangledLanes&=T,y.errorRecoveryDisabledLanes&=T,y.shellSuspendCounter=0;var De=y.entanglements,Qe=y.expirationTimes,Dt=y.hiddenUpdates;for(T=ge&~T;0<T;){var Jt=31-wa(T),dn=1<<Jt;De[Jt]=0,Qe[Jt]=-1;var gn=Dt[Jt];if(gn!==null)for(Dt[Jt]=null,Jt=0;Jt<gn.length;Jt++){var dr=gn[Jt];dr!==null&&(dr.lane&=-536870913)}T&=~dn}$!==0&&G(y,$,0),K!==0&&H===0&&y.tag!==0&&(y.suspendedLanes|=K&~(ge&~S))}function G(y,S,T){y.pendingLanes|=S,y.suspendedLanes&=~S;var $=31-wa(S);y.entangledLanes|=S,y.entanglements[$]=y.entanglements[$]|1073741824|T&4194218}function W(y,S){var T=y.entangledLanes|=S;for(y=y.entanglements;T;){var $=31-wa(T),H=1<<$;H&S|y[$]&S&&(y[$]|=S),T&=~H}}function q(y){return y&=-y,2<y?8<y?(y&134217727)!==0?32:268435456:8:2}function z(y){if(Wa&&typeof Wa.onCommitFiberRoot=="function")try{Wa.onCommitFiberRoot(Ms,y,void 0,(y.current.flags&128)===128)}catch{}}function J(y){if(typeof _A=="function"&&go(y),Wa&&typeof Wa.setStrictMode=="function")try{Wa.setStrictMode(Ms,y)}catch{}}function Q(y,S){return y===S&&(y!==0||1/y===1/S)||y!==y&&S!==S}function Y(y,S){if(typeof y=="object"&&y!==null){var T=ew.get(y);return T!==void 0?T:(S={value:y,source:S,stack:u(S)},ew.set(y,S),S)}return{value:y,source:S,stack:u(S)}}function X(y,S){Jf[Zf++]=Dm,Jf[Zf++]=Qf,Qf=y,Dm=S}function te(y,S,T){yl[vl++]=Hc,yl[vl++]=Vc,yl[vl++]=Lh,Lh=y;var $=Hc;y=Vc;var H=32-wa($)-1;$&=~(1<<H),T+=1;var K=32-wa(S)+H;if(30<K){var ge=H-H%5;K=($&(1<<ge)-1).toString(32),$>>=ge,H-=ge,Hc=1<<32-wa(S)+H|T<<H|$,Vc=K+y}else Hc=1<<K|T<<H|$,Vc=y}function ne(y){y.return!==null&&(X(y,1),te(y,1,0))}function le(y){for(;y===Qf;)Qf=Jf[--Zf],Jf[Zf]=null,Dm=Jf[--Zf],Jf[Zf]=null;for(;y===Lh;)Lh=yl[--vl],yl[vl]=null,Vc=yl[--vl],yl[vl]=null,Hc=yl[--vl],yl[vl]=null}function ye(y,S){_(vu,S),_(km,y),_(so,null),y=F2(S),x(so),_(so,y)}function ue(){x(so),x(km),x(vu)}function be(y){y.memoizedState!==null&&_(ep,y);var S=so.current,T=Tm(S,y.type);S!==T&&(_(km,y),_(so,T))}function xe(y){km.current===y&&(x(so),x(km)),ep.current===y&&(x(ep),xa?Uc._currentValue=Dh:Uc._currentValue2=Dh)}function Pe(y){var S=Error(i(418,""));throw pe(Y(S,y)),V0}function ze(y,S){if(!Bo)throw Error(i(175));cA(y.stateNode,y.type,y.memoizedProps,S,y)||Pe(y)}function Ke(y){for($o=y.return;$o;)switch($o.tag){case 3:case 27:yo=!0;return;case 5:case 13:yo=!1;return;default:$o=$o.return}}function pt(y){if(!Bo||y!==$o)return!1;if(!jr)return Ke(y),jr=!0,!1;var S=!1;if(Ni?y.tag!==3&&y.tag!==27&&(y.tag!==5||_b(y.type)&&!mr(y.type,y.memoizedProps))&&(S=!0):y.tag!==3&&(y.tag!==5||_b(y.type)&&!mr(y.type,y.memoizedProps))&&(S=!0),S&&Lo&&Pe(y),Ke(y),y.tag===13){if(!Bo)throw Error(i(316));if(y=y.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));Lo=dA(y)}else Lo=$o?YS(y.stateNode):null;return!0}function dt(){Bo&&(Lo=$o=null,jr=!1)}function pe(y){nc===null?nc=[y]:nc.push(y)}function Le(){for(var y=tp,S=Gc=tp=0;S<y;){var T=rc[S];rc[S++]=null;var $=rc[S];rc[S++]=null;var H=rc[S];rc[S++]=null;var K=rc[S];if(rc[S++]=null,$!==null&&H!==null){var ge=$.pending;ge===null?H.next=H:(H.next=ge.next,ge.next=H),$.pending=H}K!==0&&lt(T,H,K)}}function Ue(y,S,T,$){rc[tp++]=y,rc[tp++]=S,rc[tp++]=T,rc[tp++]=$,Gc|=$,y.lanes|=$,y=y.alternate,y!==null&&(y.lanes|=$)}function Ze(y,S,T,$){return Ue(y,S,T,$),st(y)}function je(y,S){return Ue(y,null,null,S),st(y)}function lt(y,S,T){y.lanes|=T;var $=y.alternate;$!==null&&($.lanes|=T);for(var H=!1,K=y.return;K!==null;)K.childLanes|=T,$=K.alternate,$!==null&&($.childLanes|=T),K.tag===22&&(y=K.stateNode,y===null||y._visibility&1||(H=!0)),y=K,K=K.return;H&&S!==null&&y.tag===3&&(K=y.stateNode,H=31-wa(T),K=K.hiddenUpdates,y=K[H],y===null?K[H]=[S]:y.push(S),S.lane=T|536870912)}function st(y){if(50<Hm)throw Hm=0,Fb=null,Error(i(185));for(var S=y.return;S!==null;)y=S,S=y.return;return y.tag===3?y.stateNode:null}function at(y){y!==Nd&&y.next===null&&(Nd===null?G0=Nd=y:Nd=Nd.next=y),Ui=!0,np||(np=!0,qe(mt))}function Ut(y,S){if(!tw&&Ui){tw=!0;do for(var T=!1,$=G0;$!==null;){if(y!==0){var H=$.pendingLanes;if(H===0)var K=0;else{var ge=$.suspendedLanes,De=$.pingedLanes;K=(1<<31-wa(42|y)+1)-1,K&=H&~(ge&~De),K=K&201326677?K&201326677|1:K?K|2:0}K!==0&&(T=!0,$e($,K))}else K=$r,K=M($,$===hi?K:0),(K&3)===0||R($,K)||(T=!0,$e($,K));$=$.next}while(T);tw=!1}}function mt(){Ui=np=!1;var y=0;Om!==0&&(H2()&&(y=Om),Om=0);for(var S=tc(),T=null,$=G0;$!==null;){var H=$.next,K=ce($,S);K===0?($.next=null,T===null?G0=H:T.next=H,H===null&&(Nd=T)):(T=$,(y!==0||(K&3)!==0)&&(Ui=!0)),$=H}Ut(y)}function ce(y,S){for(var T=y.suspendedLanes,$=y.pingedLanes,H=y.expirationTimes,K=y.pendingLanes&-62914561;0<K;){var ge=31-wa(K),De=1<<ge,Qe=H[ge];Qe===-1?((De&T)===0||(De&$)!==0)&&(H[ge]=L(De,S)):Qe<=S&&(y.expiredLanes|=De),K&=~De}if(S=hi,T=$r,T=M(y,y===S?T:0),$=y.callbackNode,T===0||y===S&&Ci===2||y.cancelPendingCommit!==null)return $!==null&&$!==null&&Tb($),y.callbackNode=null,y.callbackPriority=0;if((T&3)===0||R(y,T)){if(S=T&-T,S===y.callbackPriority)return S;switch($!==null&&Tb($),q(T)){case 2:case 8:T=wA;break;case 32:T=Nb;break;case 268435456:T=Ek;break;default:T=Nb}return $=re.bind(null,y),T=H0(T,$),y.callbackPriority=S,y.callbackNode=T,S}return $!==null&&$!==null&&Tb($),y.callbackPriority=2,y.callbackNode=null,2}function re(y,S){var T=y.callbackNode;if(Fc()&&y.callbackNode!==T)return null;var $=$r;return $=M(y,y===hi?$:0),$===0?null:(Eh(y,$,S),ce(y,tc()),y.callbackNode!=null&&y.callbackNode===T?re.bind(null,y):null)}function $e(y,S){if(Fc())return null;Eh(y,S,!0)}function qe(y){US?Md(function(){(Zr&6)!==0?H0(Rb,y):y()}):H0(Rb,y)}function ot(){return Om===0&&(Om=B()),Om}function et(y,S){if(Bm===null){var T=Bm=[];rp=0,bl=ot(),ip={status:"pending",value:void 0,then:function($){T.push($)}}}return rp++,S.then(Ft,Ft),S}function Ft(){if(--rp===0&&Bm!==null){ip!==null&&(ip.status="fulfilled");var y=Bm;Bm=null,bl=0,ip=null;for(var S=0;S<y.length;S++)(0,y[S])()}}function At(y,S){var T=[],$={status:"pending",value:null,reason:null,then:function(H){T.push(H)}};return y.then(function(){$.status="fulfilled",$.value=S;for(var H=0;H<T.length;H++)(0,T[H])(S)},function(H){for($.status="rejected",$.reason=H,H=0;H<T.length;H++)(0,T[H])(void 0)}),$}function Ct(y){y.updateQueue={baseState:y.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qt(y,S){y=y.updateQueue,S.updateQueue===y&&(S.updateQueue={baseState:y.baseState,firstBaseUpdate:y.firstBaseUpdate,lastBaseUpdate:y.lastBaseUpdate,shared:y.shared,callbacks:null})}function yt(y){return{lane:y,tag:0,payload:null,callback:null,next:null}}function Mt(y,S,T){var $=y.updateQueue;if($===null)return null;if($=$.shared,(Zr&2)!==0){var H=$.pending;return H===null?S.next=S:(S.next=H.next,H.next=S),$.pending=S,S=st(y),lt(y,null,T),S}return Ue(y,$,S,T),st(y)}function on(y,S,T){if(S=S.updateQueue,S!==null&&(S=S.shared,(T&4194176)!==0)){var $=S.lanes;$&=y.pendingLanes,T|=$,S.lanes=T,W(y,T)}}function tn(y,S){var T=y.updateQueue,$=y.alternate;if($!==null&&($=$.updateQueue,T===$)){var H=null,K=null;if(T=T.firstBaseUpdate,T!==null){do{var ge={lane:T.lane,tag:T.tag,payload:T.payload,callback:null,next:null};K===null?H=K=ge:K=K.next=ge,T=T.next}while(T!==null);K===null?H=K=S:K=K.next=S}else H=K=S;T={baseState:$.baseState,firstBaseUpdate:H,lastBaseUpdate:K,shared:$.shared,callbacks:$.callbacks},y.updateQueue=T;return}y=T.lastBaseUpdate,y===null?T.firstBaseUpdate=S:y.next=S,T.lastBaseUpdate=S}function zt(){if(sp){var y=ip;if(y!==null)throw y}}function fn(y,S,T,$){sp=!1;var H=y.updateQueue;Id=!1;var K=H.firstBaseUpdate,ge=H.lastBaseUpdate,De=H.shared.pending;if(De!==null){H.shared.pending=null;var Qe=De,Dt=Qe.next;Qe.next=null,ge===null?K=Dt:ge.next=Dt,ge=Qe;var Jt=y.alternate;Jt!==null&&(Jt=Jt.updateQueue,De=Jt.lastBaseUpdate,De!==ge&&(De===null?Jt.firstBaseUpdate=Dt:De.next=Dt,Jt.lastBaseUpdate=Qe))}if(K!==null){var dn=H.baseState;ge=0,Jt=Dt=Qe=null,De=K;do{var gn=De.lane&-536870913,dr=gn!==De.lane;if(dr?($r&gn)===gn:($&gn)===gn){gn!==0&&gn===bl&&(sp=!0),Jt!==null&&(Jt=Jt.next={lane:0,tag:De.tag,payload:De.payload,callback:null,next:null});e:{var Tl=y,jh=De;gn=S;var Xh=T;switch(jh.tag){case 1:if(Tl=jh.payload,typeof Tl=="function"){dn=Tl.call(Xh,dn,gn);break e}dn=Tl;break e;case 3:Tl.flags=Tl.flags&-65537|128;case 0:if(Tl=jh.payload,gn=typeof Tl=="function"?Tl.call(Xh,dn,gn):Tl,gn==null)break e;dn=db({},dn,gn);break e;case 2:Id=!0}}gn=De.callback,gn!==null&&(y.flags|=64,dr&&(y.flags|=8192),dr=H.callbacks,dr===null?H.callbacks=[gn]:dr.push(gn))}else dr={lane:gn,tag:De.tag,payload:De.payload,callback:De.callback,next:null},Jt===null?(Dt=Jt=dr,Qe=dn):Jt=Jt.next=dr,ge|=gn;if(De=De.next,De===null){if(De=H.shared.pending,De===null)break;dr=De,De=dr.next,dr.next=null,H.lastBaseUpdate=dr,H.shared.pending=null}}while(!0);Jt===null&&(Qe=dn),H.baseState=Qe,H.firstBaseUpdate=Dt,H.lastBaseUpdate=Jt,K===null&&(H.shared.lanes=0),El|=ge,y.lanes=ge,y.memoizedState=dn}}function Te(y,S){if(typeof y!="function")throw Error(i(191,y));y.call(S)}function Xe(y,S){var T=y.callbacks;if(T!==null)for(y.callbacks=null,y=0;y<T.length;y++)Te(T[y],S)}function Lt(y,S){if(ja(y,S))return!0;if(typeof y!="object"||y===null||typeof S!="object"||S===null)return!1;var T=Object.keys(y),$=Object.keys(S);if(T.length!==$.length)return!1;for($=0;$<T.length;$++){var H=T[$];if(!bu.call(S,H)||!ja(y[H],S[H]))return!1}return!0}function en(y){return y=y.status,y==="fulfilled"||y==="rejected"}function Vt(){}function Ot(y,S,T){switch(T=y[T],T===void 0?y.push(S):T!==S&&(S.then(Vt,Vt),S=T),S.status){case"fulfilled":return S.value;case"rejected":throw y=S.reason,y===$m?Error(i(483)):y;default:if(typeof S.status=="string")S.then(Vt,Vt);else{if(y=hi,y!==null&&100<y.shellSuspendCounter)throw Error(i(482));y=S,y.status="pending",y.then(function($){if(S.status==="pending"){var H=S;H.status="fulfilled",H.value=$}},function($){if(S.status==="pending"){var H=S;H.status="rejected",H.reason=$}})}switch(S.status){case"fulfilled":return S.value;case"rejected":throw y=S.reason,y===$m?Error(i(483)):y}throw Fh=S,$m}}function un(){if(Fh===null)throw Error(i(459));var y=Fh;return Fh=null,y}function In(y){var S=Uh;return Uh+=1,Ph===null&&(Ph=[]),Ot(Ph,y,S)}function Tr(y,S){S=S.props.ref,y.ref=S!==void 0?S:null}function lr(y,S){throw S.$$typeof===vk?Error(i(525)):(y=Object.prototype.toString.call(S),Error(i(31,y==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":y)))}function to(y){var S=y._init;return S(y._payload)}function ns(y){function S(ut,Ve){if(y){var bt=ut.deletions;bt===null?(ut.deletions=[Ve],ut.flags|=16):bt.push(Ve)}}function T(ut,Ve){if(!y)return null;for(;Ve!==null;)S(ut,Ve),Ve=Ve.sibling;return null}function $(ut){for(var Ve=new Map;ut!==null;)ut.key!==null?Ve.set(ut.key,ut):Ve.set(ut.index,ut),ut=ut.sibling;return Ve}function H(ut,Ve){return ut=Jl(ut,Ve),ut.index=0,ut.sibling=null,ut}function K(ut,Ve,bt){return ut.index=bt,y?(bt=ut.alternate,bt!==null?(bt=bt.index,bt<Ve?(ut.flags|=33554434,Ve):bt):(ut.flags|=33554434,Ve)):(ut.flags|=1048576,Ve)}function ge(ut){return y&&ut.alternate===null&&(ut.flags|=33554434),ut}function De(ut,Ve,bt,Kt){return Ve===null||Ve.tag!==6?(Ve=cb(bt,ut.mode,Kt),Ve.return=ut,Ve):(Ve=H(Ve,bt),Ve.return=ut,Ve)}function Qe(ut,Ve,bt,Kt){var Dn=bt.type;return Dn===Nh?Jt(ut,Ve,bt.props.children,Kt,bt.key):Ve!==null&&(Ve.elementType===Dn||typeof Dn=="object"&&Dn!==null&&Dn.$$typeof===Ql&&to(Dn)===Ve.type)?(Ve=H(Ve,bt.props),Tr(Ve,bt),Ve.return=ut,Ve):(Ve=pu(bt.type,bt.key,bt.props,null,ut.mode,Kt),Tr(Ve,bt),Ve.return=ut,Ve)}function Dt(ut,Ve,bt,Kt){return Ve===null||Ve.tag!==4||Ve.stateNode.containerInfo!==bt.containerInfo||Ve.stateNode.implementation!==bt.implementation?(Ve=DS(bt,ut.mode,Kt),Ve.return=ut,Ve):(Ve=H(Ve,bt.children||[]),Ve.return=ut,Ve)}function Jt(ut,Ve,bt,Kt,Dn){return Ve===null||Ve.tag!==7?(Ve=ms(bt,ut.mode,Kt,Dn),Ve.return=ut,Ve):(Ve=H(Ve,bt),Ve.return=ut,Ve)}function dn(ut,Ve,bt){if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint")return Ve=cb(""+Ve,ut.mode,bt),Ve.return=ut,Ve;if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case I0:return bt=pu(Ve.type,Ve.key,Ve.props,null,ut.mode,bt),Tr(bt,Ve),bt.return=ut,bt;case Zl:return Ve=DS(Ve,ut.mode,bt),Ve.return=ut,Ve;case Ql:var Kt=Ve._init;return Ve=Kt(Ve._payload),dn(ut,Ve,bt)}if(Cm(Ve)||s(Ve))return Ve=ms(Ve,ut.mode,bt,null),Ve.return=ut,Ve;if(typeof Ve.then=="function")return dn(ut,In(Ve),bt);if(Ve.$$typeof===Pc)return dn(ut,He(ut,Ve),bt);lr(ut,Ve)}return null}function gn(ut,Ve,bt,Kt){var Dn=Ve!==null?Ve.key:null;if(typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint")return Dn!==null?null:De(ut,Ve,""+bt,Kt);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case I0:return bt.key===Dn?Qe(ut,Ve,bt,Kt):null;case Zl:return bt.key===Dn?Dt(ut,Ve,bt,Kt):null;case Ql:return Dn=bt._init,bt=Dn(bt._payload),gn(ut,Ve,bt,Kt)}if(Cm(bt)||s(bt))return Dn!==null?null:Jt(ut,Ve,bt,Kt,null);if(typeof bt.then=="function")return gn(ut,Ve,In(bt),Kt);if(bt.$$typeof===Pc)return gn(ut,Ve,He(ut,bt),Kt);lr(ut,bt)}return null}function dr(ut,Ve,bt,Kt,Dn){if(typeof Kt=="string"&&Kt!==""||typeof Kt=="number"||typeof Kt=="bigint")return ut=ut.get(bt)||null,De(Ve,ut,""+Kt,Dn);if(typeof Kt=="object"&&Kt!==null){switch(Kt.$$typeof){case I0:return ut=ut.get(Kt.key===null?bt:Kt.key)||null,Qe(Ve,ut,Kt,Dn);case Zl:return ut=ut.get(Kt.key===null?bt:Kt.key)||null,Dt(Ve,ut,Kt,Dn);case Ql:var Qi=Kt._init;return Kt=Qi(Kt._payload),dr(ut,Ve,bt,Kt,Dn)}if(Cm(Kt)||s(Kt))return ut=ut.get(bt)||null,Jt(Ve,ut,Kt,Dn,null);if(typeof Kt.then=="function")return dr(ut,Ve,bt,In(Kt),Dn);if(Kt.$$typeof===Pc)return dr(ut,Ve,bt,He(Ve,Kt),Dn);lr(Ve,Kt)}return null}function Tl(ut,Ve,bt,Kt){for(var Dn=null,Qi=null,er=Ve,ri=Ve=0,Rs=null;er!==null&&ri<bt.length;ri++){er.index>ri?(Rs=er,er=null):Rs=er.sibling;var Or=gn(ut,er,bt[ri],Kt);if(Or===null){er===null&&(er=Rs);break}y&&er&&Or.alternate===null&&S(ut,er),Ve=K(Or,Ve,ri),Qi===null?Dn=Or:Qi.sibling=Or,Qi=Or,er=Rs}if(ri===bt.length)return T(ut,er),jr&&X(ut,ri),Dn;if(er===null){for(;ri<bt.length;ri++)er=dn(ut,bt[ri],Kt),er!==null&&(Ve=K(er,Ve,ri),Qi===null?Dn=er:Qi.sibling=er,Qi=er);return jr&&X(ut,ri),Dn}for(er=$(er);ri<bt.length;ri++)Rs=dr(er,ut,ri,bt[ri],Kt),Rs!==null&&(y&&Rs.alternate!==null&&er.delete(Rs.key===null?ri:Rs.key),Ve=K(Rs,Ve,ri),Qi===null?Dn=Rs:Qi.sibling=Rs,Qi=Rs);return y&&er.forEach(function(Tu){return S(ut,Tu)}),jr&&X(ut,ri),Dn}function jh(ut,Ve,bt,Kt){if(bt==null)throw Error(i(151));for(var Dn=null,Qi=null,er=Ve,ri=Ve=0,Rs=null,Or=bt.next();er!==null&&!Or.done;ri++,Or=bt.next()){er.index>ri?(Rs=er,er=null):Rs=er.sibling;var Tu=gn(ut,er,Or.value,Kt);if(Tu===null){er===null&&(er=Rs);break}y&&er&&Tu.alternate===null&&S(ut,er),Ve=K(Tu,Ve,ri),Qi===null?Dn=Tu:Qi.sibling=Tu,Qi=Tu,er=Rs}if(Or.done)return T(ut,er),jr&&X(ut,ri),Dn;if(er===null){for(;!Or.done;ri++,Or=bt.next())Or=dn(ut,Or.value,Kt),Or!==null&&(Ve=K(Or,Ve,ri),Qi===null?Dn=Or:Qi.sibling=Or,Qi=Or);return jr&&X(ut,ri),Dn}for(er=$(er);!Or.done;ri++,Or=bt.next())Or=dr(er,ut,ri,Or.value,Kt),Or!==null&&(y&&Or.alternate!==null&&er.delete(Or.key===null?ri:Or.key),Ve=K(Or,Ve,ri),Qi===null?Dn=Or:Qi.sibling=Or,Qi=Or);return y&&er.forEach(function(Pb){return S(ut,Pb)}),jr&&X(ut,ri),Dn}function Xh(ut,Ve,bt,Kt){if(typeof bt=="object"&&bt!==null&&bt.type===Nh&&bt.key===null&&(bt=bt.props.children),typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case I0:e:{for(var Dn=bt.key;Ve!==null;){if(Ve.key===Dn){if(Dn=bt.type,Dn===Nh){if(Ve.tag===7){T(ut,Ve.sibling),Kt=H(Ve,bt.props.children),Kt.return=ut,ut=Kt;break e}}else if(Ve.elementType===Dn||typeof Dn=="object"&&Dn!==null&&Dn.$$typeof===Ql&&to(Dn)===Ve.type){T(ut,Ve.sibling),Kt=H(Ve,bt.props),Tr(Kt,bt),Kt.return=ut,ut=Kt;break e}T(ut,Ve);break}else S(ut,Ve);Ve=Ve.sibling}bt.type===Nh?(Kt=ms(bt.props.children,ut.mode,Kt,bt.key),Kt.return=ut,ut=Kt):(Kt=pu(bt.type,bt.key,bt.props,null,ut.mode,Kt),Tr(Kt,bt),Kt.return=ut,ut=Kt)}return ge(ut);case Zl:e:{for(Dn=bt.key;Ve!==null;){if(Ve.key===Dn)if(Ve.tag===4&&Ve.stateNode.containerInfo===bt.containerInfo&&Ve.stateNode.implementation===bt.implementation){T(ut,Ve.sibling),Kt=H(Ve,bt.children||[]),Kt.return=ut,ut=Kt;break e}else{T(ut,Ve);break}else S(ut,Ve);Ve=Ve.sibling}Kt=DS(bt,ut.mode,Kt),Kt.return=ut,ut=Kt}return ge(ut);case Ql:return Dn=bt._init,bt=Dn(bt._payload),Xh(ut,Ve,bt,Kt)}if(Cm(bt))return Tl(ut,Ve,bt,Kt);if(s(bt)){if(Dn=s(bt),typeof Dn!="function")throw Error(i(150));return bt=Dn.call(bt),jh(ut,Ve,bt,Kt)}if(typeof bt.then=="function")return Xh(ut,Ve,In(bt),Kt);if(bt.$$typeof===Pc)return Xh(ut,Ve,He(ut,bt),Kt);lr(ut,bt)}return typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint"?(bt=""+bt,Ve!==null&&Ve.tag===6?(T(ut,Ve.sibling),Kt=H(Ve,bt),Kt.return=ut,ut=Kt):(T(ut,Ve),Kt=cb(bt,ut.mode,Kt),Kt.return=ut,ut=Kt),ge(ut)):T(ut,Ve)}return function(ut,Ve,bt,Kt){try{Uh=0;var Dn=Xh(ut,Ve,bt,Kt);return Ph=null,Dn}catch(er){if(er===$m)throw er;var Qi=t(29,er,null,ut.mode);return Qi.lanes=Kt,Qi.return=ut,Qi}finally{}}}function pi(y,S){y=Jo,_(Lm,y),_(zi,S),Jo=y|S.baseLanes}function Si(){_(Lm,Jo),_(zi,zi.current)}function Ri(){Jo=Lm.current,x(zi),x(Lm)}function as(y){var S=y.alternate;_(oo,oo.current&1),_(xl,y),Ii===null&&(S===null||zi.current!==null||S.memoizedState!==null)&&(Ii=y)}function Fa(y){if(y.tag===22){if(_(oo,oo.current),_(xl,y),Ii===null){var S=y.alternate;S!==null&&S.memoizedState!==null&&(Ii=y)}}else vr()}function vr(){_(oo,oo.current),_(xl,xl.current)}function Nn(y){x(xl),Ii===y&&(Ii=null),x(oo)}function Fs(y){for(var S=y;S!==null;){if(S.tag===13){var T=S.memoizedState;if(T!==null&&(T=T.dehydrated,T===null||xb(T)||Sb(T)))return S}else if(S.tag===19&&S.memoizedProps.revealOrder!==void 0){if((S.flags&128)!==0)return S}else if(S.child!==null){S.child.return=S,S=S.child;continue}if(S===y)break;for(;S.sibling===null;){if(S.return===null||S.return===y)return null;S=S.return}S.sibling.return=S.return,S=S.sibling}return null}function ci(){throw Error(i(321))}function oe(y,S){if(S===null)return!1;for(var T=0;T<S.length&&T<y.length;T++)if(!ja(y[T],S[T]))return!1;return!0}function me(y,S,T,$,H,K){return Dd=K,wr=S,S.memoizedState=null,S.updateQueue=null,S.lanes=0,Qn.H=y===null||y.memoizedState===null?Vh:_a,Hh=!1,K=T($,H),Hh=!1,op&&(K=nt(S,T,$,H)),Oe(y),K}function Oe(y){Qn.H=gs;var S=Vn!==null&&Vn.next!==null;if(Dd=0,Jr=Vn=wr=null,ic=!1,ap=0,vo=null,S)throw Error(i(300));y===null||Di||(y=y.dependencies,y!==null&&we(y)&&(Di=!0))}function nt(y,S,T,$){wr=y;var H=0;do{if(op&&(vo=null),ap=0,op=!1,25<=H)throw Error(i(301));if(H+=1,Jr=Vn=null,y.updateQueue!=null){var K=y.updateQueue;K.lastEffect=null,K.events=null,K.stores=null,K.memoCache!=null&&(K.memoCache.index=0)}Qn.H=Sl,K=S(T,$)}while(op);return K}function ct(){var y=Qn.H,S=y.useState()[0];return S=typeof S.then=="function"?Me(S):S,y=y.useState()[0],(Vn!==null?Vn.memoizedState:null)!==y&&(wr.flags|=1024),S}function St(){var y=Ib!==0;return Ib=0,y}function jt(y,S,T){S.updateQueue=y.updateQueue,S.flags&=-2053,y.lanes&=~T}function se(y){if(ic){for(y=y.memoizedState;y!==null;){var S=y.queue;S!==null&&(S.pending=null),y=y.next}ic=!1}Dd=0,Jr=Vn=wr=null,op=!1,ap=Ib=0,vo=null}function Se(){var y={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jr===null?wr.memoizedState=Jr=y:Jr=Jr.next=y,Jr}function Ae(){if(Vn===null){var y=wr.alternate;y=y!==null?y.memoizedState:null}else y=Vn.next;var S=Jr===null?wr.memoizedState:Jr.next;if(S!==null)Jr=S,Vn=y;else{if(y===null)throw wr.alternate===null?Error(i(467)):Error(i(310));Vn=y,y={memoizedState:Vn.memoizedState,baseState:Vn.baseState,baseQueue:Vn.baseQueue,queue:Vn.queue,next:null},Jr===null?wr.memoizedState=Jr=y:Jr=Jr.next=y}return Jr}function Me(y){var S=ap;return ap+=1,vo===null&&(vo=[]),y=Ot(vo,y,S),S=wr,(Jr===null?S.memoizedState:Jr.next)===null&&(S=S.alternate,Qn.H=S===null||S.memoizedState===null?Vh:_a),y}function Ce(y){if(y!==null&&typeof y=="object"){if(typeof y.then=="function")return Me(y);if(y.$$typeof===Pc)return _e(y)}throw Error(i(438,String(y)))}function It(y){var S=null,T=wr.updateQueue;if(T!==null&&(S=T.memoCache),S==null){var $=wr.alternate;$!==null&&($=$.updateQueue,$!==null&&($=$.memoCache,$!=null&&(S={data:$.data.map(function(H){return H.slice()}),index:0})))}if(S==null&&(S={data:[],index:0}),T===null&&(T=Db(),wr.updateQueue=T),T.memoCache=S,T=S.data[S.index],T===void 0)for(T=S.data[S.index]=Array(y),$=0;$<y;$++)T[$]=L2;return S.index++,T}function vt(y,S){return typeof S=="function"?S(y):S}function Tt(y){var S=Ae();return Et(S,Vn,y)}function Et(y,S,T){var $=y.queue;if($===null)throw Error(i(311));$.lastRenderedReducer=T;var H=y.baseQueue,K=$.pending;if(K!==null){if(H!==null){var ge=H.next;H.next=K.next,K.next=ge}S.baseQueue=H=K,$.pending=null}if(K=y.baseState,H===null)y.memoizedState=K;else{S=H.next;var De=ge=null,Qe=null,Dt=S,Jt=!1;do{var dn=Dt.lane&-536870913;if(dn!==Dt.lane?($r&dn)===dn:(Dd&dn)===dn){var gn=Dt.revertLane;if(gn===0)Qe!==null&&(Qe=Qe.next={lane:0,revertLane:0,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null}),dn===bl&&(Jt=!0);else if((Dd&gn)===gn){Dt=Dt.next,gn===bl&&(Jt=!0);continue}else dn={lane:0,revertLane:Dt.revertLane,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null},Qe===null?(De=Qe=dn,ge=K):Qe=Qe.next=dn,wr.lanes|=gn,El|=gn;dn=Dt.action,Hh&&T(K,dn),K=Dt.hasEagerState?Dt.eagerState:T(K,dn)}else gn={lane:dn,revertLane:Dt.revertLane,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null},Qe===null?(De=Qe=gn,ge=K):Qe=Qe.next=gn,wr.lanes|=dn,El|=dn;Dt=Dt.next}while(Dt!==null&&Dt!==S);if(Qe===null?ge=K:Qe.next=De,!ja(K,y.memoizedState)&&(Di=!0,Jt&&(T=ip,T!==null)))throw T;y.memoizedState=K,y.baseState=ge,y.baseQueue=Qe,$.lastRenderedState=K}return H===null&&($.lanes=0),[y.memoizedState,$.dispatch]}function Xt(y){var S=Ae(),T=S.queue;if(T===null)throw Error(i(311));T.lastRenderedReducer=y;var $=T.dispatch,H=T.pending,K=S.memoizedState;if(H!==null){T.pending=null;var ge=H=H.next;do K=y(K,ge.action),ge=ge.next;while(ge!==H);ja(K,S.memoizedState)||(Di=!0),S.memoizedState=K,S.baseQueue===null&&(S.baseState=K),T.lastRenderedState=K}return[K,$]}function Qt(y,S,T){var $=wr,H=Ae(),K=jr;if(K){if(T===void 0)throw Error(i(407));T=T()}else T=S();var ge=!ja((Vn||H).memoizedState,T);if(ge&&(H.memoizedState=T,Di=!0),H=H.queue,ld(Hn.bind(null,$,H,y),[y]),H.getSnapshot!==S||ge||Jr!==null&&Jr.memoizedState.tag&1){if($.flags|=2048,ps(9,bn.bind(null,$,H,T,S),{destroy:void 0},null),hi===null)throw Error(i(349));K||(Dd&60)!==0||Wt($,S,T)}return T}function Wt(y,S,T){y.flags|=16384,y={getSnapshot:S,value:T},S=wr.updateQueue,S===null?(S=Db(),wr.updateQueue=S,S.stores=[y]):(T=S.stores,T===null?S.stores=[y]:T.push(y))}function bn(y,S,T,$){S.value=T,S.getSnapshot=$,On(S)&&ar(y)}function Hn(y,S,T){return T(function(){On(S)&&ar(y)})}function On(y){var S=y.getSnapshot;y=y.value;try{var T=S();return!ja(y,T)}catch{return!0}}function ar(y){var S=je(y,2);S!==null&&mo(S,y,2)}function yn(y){var S=Se();if(typeof y=="function"){var T=y;if(y=T(),Hh){J(!0);try{T()}finally{J(!1)}}}return S.memoizedState=S.baseState=y,S.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vt,lastRenderedState:y},S}function ln(y,S,T,$){return y.baseState=T,Et(y,Vn,typeof $=="function"?$:vt)}function Rr(y,S,T,$,H){if(dd(y))throw Error(i(485));if(y=S.action,y!==null){var K={payload:H,action:y,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ge){K.listeners.push(ge)}};Qn.T!==null?T(!0):K.isTransition=!1,$(K),T=S.pending,T===null?(K.next=S.pending=K,Jn(S,K)):(K.next=T.next,S.pending=T.next=K)}}function Jn(y,S){var T=S.action,$=S.payload,H=y.state;if(S.isTransition){var K=Qn.T,ge={};Qn.T=ge;try{var De=T(H,$),Qe=Qn.S;Qe!==null&&Qe(ge,De),Kr(y,S,De)}catch(Dt){jn(y,S,Dt)}finally{Qn.T=K}}else try{K=T(H,$),Kr(y,S,K)}catch(Dt){jn(y,S,Dt)}}function Kr(y,S,T){T!==null&&typeof T=="object"&&typeof T.then=="function"?T.then(function($){cr(y,S,$)},function($){return jn(y,S,$)}):cr(y,S,T)}function cr(y,S,T){S.status="fulfilled",S.value=T,Zn(S),y.state=T,S=y.pending,S!==null&&(T=S.next,T===S?y.pending=null:(T=T.next,S.next=T,Jn(y,T)))}function jn(y,S,T){var $=y.pending;if(y.pending=null,$!==null){$=$.next;do S.status="rejected",S.reason=T,Zn(S),S=S.next;while(S!==$)}y.action=null}function Zn(y){y=y.listeners;for(var S=0;S<y.length;S++)(0,y[S])()}function Mn(y,S){return S}function Wr(y,S){if(jr){var T=hi.formState;if(T!==null){e:{var $=wr;if(jr){if(Lo){var H=KS(Lo,yo);if(H){Lo=YS(H),$=sA(H);break e}}Pe($)}$=!1}$&&(S=T[0])}}T=Se(),T.memoizedState=T.baseState=S,$={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:S},T.queue=$,T=l0.bind(null,wr,$),$.dispatch=T,$=yn(!1);var K=ud.bind(null,wr,!1,$.queue);return $=Se(),H={state:S,dispatch:null,action:y,pending:null},$.queue=H,T=Rr.bind(null,wr,H,K,T),H.dispatch=T,$.memoizedState=y,[S,T,!1]}function wi(y){var S=Ae();return Sr(S,Vn,y)}function Sr(y,S,T){S=Et(y,S,Mn)[0],y=Tt(vt)[0],S=typeof S=="object"&&S!==null&&typeof S.then=="function"?Me(S):S;var $=Ae(),H=$.queue,K=H.dispatch;return T!==$.memoizedState&&(wr.flags|=2048,ps(9,_i.bind(null,H,T),{destroy:void 0},null)),[S,K,y]}function _i(y,S){y.action=S}function ad(y){var S=Ae(),T=Vn;if(T!==null)return Sr(S,T,y);Ae(),S=S.memoizedState,T=Ae();var $=T.queue.dispatch;return T.memoizedState=y,[S,$,!1]}function ps(y,S,T,$){return y={tag:y,create:S,inst:T,deps:$,next:null},S=wr.updateQueue,S===null&&(S=Db(),wr.updateQueue=S),T=S.lastEffect,T===null?S.lastEffect=y.next=y:($=T.next,T.next=y,y.next=$,S.lastEffect=y),y}function s0(){return Ae().memoizedState}function uu(y,S,T,$){var H=Se();wr.flags|=y,H.memoizedState=ps(1|S,T,{destroy:void 0},$===void 0?null:$)}function vh(y,S,T,$){var H=Ae();$=$===void 0?null:$;var K=H.memoizedState.inst;Vn!==null&&$!==null&&oe($,Vn.memoizedState.deps)?H.memoizedState=ps(S,T,K,$):(wr.flags|=y,H.memoizedState=ps(1|S,T,K,$))}function Pf(y,S){uu(8390656,8,y,S)}function ld(y,S){vh(2048,8,y,S)}function Wv(y,S){return vh(4,2,y,S)}function Uf(y,S){return vh(4,4,y,S)}function cm(y,S){if(typeof S=="function"){y=y();var T=S(y);return function(){typeof T=="function"?T():S(null)}}if(S!=null)return y=y(),S.current=y,function(){S.current=null}}function um(y,S,T){T=T!=null?T.concat([y]):null,vh(4,4,cm.bind(null,S,y),T)}function Xl(){}function ul(y,S){var T=Ae();S=S===void 0?null:S;var $=T.memoizedState;return S!==null&&oe(S,$[1])?$[0]:(T.memoizedState=[y,S],y)}function o0(y,S){var T=Ae();S=S===void 0?null:S;var $=T.memoizedState;if(S!==null&&oe(S,$[1]))return $[0];if($=y(),Hh){J(!0);try{y()}finally{J(!1)}}return T.memoizedState=[$,S],$}function zf(y,S,T){return T===void 0||(Dd&1073741824)!==0?y.memoizedState=S:(y.memoizedState=T,y=AS(),wr.lanes|=y,El|=y,T)}function a0(y,S,T,$){return ja(T,S)?T:zi.current!==null?(y=zf(y,T,$),ja(y,S)||(Di=!0),y):(Dd&42)===0?(Di=!0,y.memoizedState=T):(y=AS(),wr.lanes|=y,El|=y,S)}function bh(y,S,T,$,H){var K=Td();Ko(K!==0&&8>K?K:8);var ge=Qn.T,De={};Qn.T=De,ud(y,!1,S,T);try{var Qe=H(),Dt=Qn.S;if(Dt!==null&&Dt(De,Qe),Qe!==null&&typeof Qe=="object"&&typeof Qe.then=="function"){var Jt=At(Qe,$);Oc(y,S,Jt,Es(y))}else Oc(y,S,$,Es(y))}catch(dn){Oc(y,S,{then:function(){},status:"rejected",reason:dn},Es())}finally{Ko(K),Qn.T=ge}}function Pa(y){var S=y.memoizedState;if(S!==null)return S;S={memoizedState:Dh,baseState:Dh,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vt,lastRenderedState:Dh},next:null};var T={};return S.next={memoizedState:T,baseState:T,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vt,lastRenderedState:T},next:null},y.memoizedState=S,y=y.alternate,y!==null&&(y.memoizedState=S),S}function xh(){return _e(Uc)}function cd(){return Ae().memoizedState}function pa(){return Ae().memoizedState}function ma(y){for(var S=y.return;S!==null;){switch(S.tag){case 24:case 3:var T=Es();y=yt(T);var $=Mt(S,y,T);$!==null&&(mo($,S,T),on($,S,T)),S={cache:Ht()},y.payload=S;return}S=S.return}}function dm(y,S,T){var $=Es();T={lane:$,revertLane:0,action:T,hasEagerState:!1,eagerState:null,next:null},dd(y)?no(S,T):(T=Ze(y,S,T,$),T!==null&&(mo(T,y,$),ga(T,S,$)))}function l0(y,S,T){var $=Es();Oc(y,S,T,$)}function Oc(y,S,T,$){var H={lane:$,revertLane:0,action:T,hasEagerState:!1,eagerState:null,next:null};if(dd(y))no(S,H);else{var K=y.alternate;if(y.lanes===0&&(K===null||K.lanes===0)&&(K=S.lastRenderedReducer,K!==null))try{var ge=S.lastRenderedState,De=K(ge,T);if(H.hasEagerState=!0,H.eagerState=De,ja(De,ge))return Ue(y,S,H,0),hi===null&&Le(),!1}catch{}finally{}if(T=Ze(y,S,H,$),T!==null)return mo(T,y,$),ga(T,S,$),!0}return!1}function ud(y,S,T,$){if($={lane:2,revertLane:ot(),action:$,hasEagerState:!1,eagerState:null,next:null},dd(y)){if(S)throw Error(i(479))}else S=Ze(y,T,$,2),S!==null&&mo(S,y,2)}function dd(y){var S=y.alternate;return y===wr||S!==null&&S===wr}function no(y,S){op=ic=!0;var T=y.pending;T===null?S.next=S:(S.next=T.next,T.next=S),y.pending=S}function ga(y,S,T){if((T&4194176)!==0){var $=S.lanes;$&=y.pendingLanes,T|=$,S.lanes=T,W(y,T)}}function hd(y,S,T,$){S=y.memoizedState,T=T($,S),T=T==null?S:db({},S,T),y.memoizedState=T,y.lanes===0&&(y.updateQueue.baseState=T)}function du(y,S,T,$,H,K,ge){return y=y.stateNode,typeof y.shouldComponentUpdate=="function"?y.shouldComponentUpdate($,K,ge):S.prototype&&S.prototype.isPureReactComponent?!Lt(T,$)||!Lt(H,K):!0}function jv(y,S,T,$){y=S.state,typeof S.componentWillReceiveProps=="function"&&S.componentWillReceiveProps(T,$),typeof S.UNSAFE_componentWillReceiveProps=="function"&&S.UNSAFE_componentWillReceiveProps(T,$),S.state!==y&&Su.enqueueReplaceState(S,S.state,null)}function ql(y,S){var T=S;if("ref"in S){T={};for(var $ in S)$!=="ref"&&(T[$]=S[$])}if(y=y.defaultProps){T===S&&(T=db({},T));for(var H in y)T[H]===void 0&&(T[H]=y[H])}return T}function dl(y,S){try{var T=y.onUncaughtError;T(S.value,{componentStack:S.stack})}catch($){setTimeout(function(){throw $})}}function fd(y,S,T){try{var $=y.onCaughtError;$(T.value,{componentStack:T.stack,errorBoundary:S.tag===1?S.stateNode:null})}catch(H){setTimeout(function(){throw H})}}function pd(y,S,T){return T=yt(T),T.tag=3,T.payload={element:null},T.callback=function(){dl(y,S)},T}function c0(y){return y=yt(y),y.tag=3,y}function u0(y,S,T,$){var H=T.type.getDerivedStateFromError;if(typeof H=="function"){var K=$.value;y.payload=function(){return H(K)},y.callback=function(){fd(S,T,$)}}var ge=T.stateNode;ge!==null&&typeof ge.componentDidCatch=="function"&&(y.callback=function(){fd(S,T,$),typeof H!="function"&&(Gh===null?Gh=new Set([this]):Gh.add(this));var De=$.stack;this.componentDidCatch($.value,{componentStack:De!==null?De:""})})}function hm(y,S,T,$,H){if(T.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){if(S=T.alternate,S!==null&&ae(S,T,H,!0),T=xl.current,T!==null){switch(T.tag){case 13:return Ii===null?Sd():T.alternate===null&&ki===0&&(ki=3),T.flags&=-257,T.flags|=65536,T.lanes=H,$===j0?T.flags|=16384:(S=T.updateQueue,S===null?T.updateQueue=new Set([$]):S.add($),jf(y,$,H)),!1;case 22:return T.flags|=65536,$===j0?T.flags|=16384:(S=T.updateQueue,S===null?(S={transitions:null,markerInstances:null,retryQueue:new Set([$])},T.updateQueue=S):(T=S.retryQueue,T===null?S.retryQueue=new Set([$]):T.add($)),jf(y,$,H)),!1}throw Error(i(435,T.tag))}return jf(y,$,H),Sd(),!1}if(jr)return S=xl.current,S!==null?((S.flags&65536)===0&&(S.flags|=256),S.flags|=65536,S.lanes=H,$!==V0&&(y=Error(i(422),{cause:$}),pe(Y(y,T)))):($!==V0&&(S=Error(i(423),{cause:$}),pe(Y(S,T))),y=y.current.alternate,y.flags|=65536,H&=-H,y.lanes|=H,$=Y($,T),H=pd(y.stateNode,$,H),tn(y,H),ki!==4&&(ki=2)),!1;var K=Error(i(520),{cause:$});if(K=Y(K,T),cp===null?cp=[K]:cp.push(K),ki!==4&&(ki=2),S===null)return!0;$=Y($,T),T=S;do{switch(T.tag){case 3:return T.flags|=65536,y=H&-H,T.lanes|=y,y=pd(T.stateNode,$,y),tn(T,y),!1;case 1:if(S=T.type,K=T.stateNode,(T.flags&128)===0&&(typeof S.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(Gh===null||!Gh.has(K))))return T.flags|=65536,H&=-H,T.lanes|=H,H=c0(H),u0(H,y,T,$),tn(T,H),!1}T=T.return}while(T!==null);return!1}function Ps(y,S,T,$){S.child=y===null?xu(S,null,T,$):zh(S,y.child,T,$)}function fm(y,S,T,$,H){T=T.render;var K=S.ref;if("ref"in $){var ge={};for(var De in $)De!=="ref"&&(ge[De]=$[De])}else ge=$;return Ee(S),$=me(y,S,T,ge,K,H),De=St(),y!==null&&!Di?(jt(y,S,H),Bc(y,S,H)):(jr&&De&&ne(S),S.flags|=1,Ps(y,S,$,H),S.child)}function d0(y,S,T,$,H){if(y===null){var K=T.type;return typeof K=="function"&&!T0(K)&&K.defaultProps===void 0&&T.compare===null?(S.tag=15,S.type=K,h0(y,S,K,$,H)):(y=pu(T.type,null,$,S,S.mode,H),y.ref=S.ref,y.return=S,S.child=y)}if(K=y.child,!v0(y,H)){var ge=K.memoizedProps;if(T=T.compare,T=T!==null?T:Lt,T(ge,$)&&y.ref===S.ref)return Bc(y,S,H)}return S.flags|=1,y=Jl(K,$),y.ref=S.ref,y.return=S,S.child=y}function h0(y,S,T,$,H){if(y!==null){var K=y.memoizedProps;if(Lt(K,$)&&y.ref===S.ref)if(Di=!1,S.pendingProps=$=K,v0(y,H))(y.flags&131072)!==0&&(Di=!0);else return S.lanes=y.lanes,Bc(y,S,H)}return Hf(y,S,T,$,H)}function f0(y,S,T){var $=S.pendingProps,H=$.children,K=(S.stateNode._pendingVisibility&2)!==0,ge=y!==null?y.memoizedState:null;if(md(y,S),$.mode==="hidden"||K){if((S.flags&128)!==0){if($=ge!==null?ge.baseLanes|T:T,y!==null){for(H=S.child=y.child,K=0;H!==null;)K=K|H.lanes|H.childLanes,H=H.sibling;S.childLanes=K&~$}else S.childLanes=0,S.child=null;return p0(y,S,$,T)}if((T&536870912)!==0)S.memoizedState={baseLanes:0,cachePool:null},y!==null&&Cn(S,ge!==null?ge.cachePool:null),ge!==null?pi(S,ge):Si(),Fa(S);else return S.lanes=S.childLanes=536870912,p0(y,S,ge!==null?ge.baseLanes|T:T,T)}else ge!==null?(Cn(S,ge.cachePool),pi(S,ge),vr(),S.memoizedState=null):(y!==null&&Cn(S,null),Si(),vr());return Ps(y,S,H,T),S.child}function p0(y,S,T,$){var H=Un();return H=H===null?null:{parent:xa?Hi._currentValue:Hi._currentValue2,pool:H},S.memoizedState={baseLanes:T,cachePool:H},y!==null&&Cn(S,null),Si(),Fa(S),y!==null&&ae(y,S,$,!0),null}function md(y,S){var T=S.ref;if(T===null)y!==null&&y.ref!==null&&(S.flags|=2097664);else{if(typeof T!="function"&&typeof T!="object")throw Error(i(284));(y===null||y.ref!==T)&&(S.flags|=2097664)}}function Hf(y,S,T,$,H){return Ee(S),T=me(y,S,T,$,void 0,H),$=St(),y!==null&&!Di?(jt(y,S,H),Bc(y,S,H)):(jr&&$&&ne(S),S.flags|=1,Ps(y,S,T,H),S.child)}function Xv(y,S,T,$,H,K){return Ee(S),S.updateQueue=null,T=nt(S,$,T,H),Oe(y),$=St(),y!==null&&!Di?(jt(y,S,K),Bc(y,S,K)):(jr&&$&&ne(S),S.flags|=1,Ps(y,S,T,K),S.child)}function qv(y,S,T,$,H){if(Ee(S),S.stateNode===null){var K=$h,ge=T.contextType;typeof ge=="object"&&ge!==null&&(K=_e(ge)),K=new T($,K),S.memoizedState=K.state!==null&&K.state!==void 0?K.state:null,K.updater=Su,S.stateNode=K,K._reactInternals=S,K=S.stateNode,K.props=$,K.state=S.memoizedState,K.refs={},Ct(S),ge=T.contextType,K.context=typeof ge=="object"&&ge!==null?_e(ge):$h,K.state=S.memoizedState,ge=T.getDerivedStateFromProps,typeof ge=="function"&&(hd(S,T,ge,$),K.state=S.memoizedState),typeof T.getDerivedStateFromProps=="function"||typeof K.getSnapshotBeforeUpdate=="function"||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(ge=K.state,typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount(),ge!==K.state&&Su.enqueueReplaceState(K,K.state,null),fn(S,$,K,H),zt(),K.state=S.memoizedState),typeof K.componentDidMount=="function"&&(S.flags|=4194308),$=!0}else if(y===null){K=S.stateNode;var De=S.memoizedProps,Qe=ql(T,De);K.props=Qe;var Dt=K.context,Jt=T.contextType;ge=$h,typeof Jt=="object"&&Jt!==null&&(ge=_e(Jt));var dn=T.getDerivedStateFromProps;Jt=typeof dn=="function"||typeof K.getSnapshotBeforeUpdate=="function",De=S.pendingProps!==De,Jt||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(De||Dt!==ge)&&jv(S,K,$,ge),Id=!1;var gn=S.memoizedState;K.state=gn,fn(S,$,K,H),zt(),Dt=S.memoizedState,De||gn!==Dt||Id?(typeof dn=="function"&&(hd(S,T,dn,$),Dt=S.memoizedState),(Qe=Id||du(S,T,Qe,$,gn,Dt,ge))?(Jt||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(S.flags|=4194308)):(typeof K.componentDidMount=="function"&&(S.flags|=4194308),S.memoizedProps=$,S.memoizedState=Dt),K.props=$,K.state=Dt,K.context=ge,$=Qe):(typeof K.componentDidMount=="function"&&(S.flags|=4194308),$=!1)}else{K=S.stateNode,qt(y,S),ge=S.memoizedProps,Jt=ql(T,ge),K.props=Jt,dn=S.pendingProps,gn=K.context,Dt=T.contextType,Qe=$h,typeof Dt=="object"&&Dt!==null&&(Qe=_e(Dt)),De=T.getDerivedStateFromProps,(Dt=typeof De=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ge!==dn||gn!==Qe)&&jv(S,K,$,Qe),Id=!1,gn=S.memoizedState,K.state=gn,fn(S,$,K,H),zt();var dr=S.memoizedState;ge!==dn||gn!==dr||Id||y!==null&&y.dependencies!==null&&we(y.dependencies)?(typeof De=="function"&&(hd(S,T,De,$),dr=S.memoizedState),(Jt=Id||du(S,T,Jt,$,gn,dr,Qe)||y!==null&&y.dependencies!==null&&we(y.dependencies))?(Dt||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate($,dr,Qe),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate($,dr,Qe)),typeof K.componentDidUpdate=="function"&&(S.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(S.flags|=1024)):(typeof K.componentDidUpdate!="function"||ge===y.memoizedProps&&gn===y.memoizedState||(S.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ge===y.memoizedProps&&gn===y.memoizedState||(S.flags|=1024),S.memoizedProps=$,S.memoizedState=dr),K.props=$,K.state=dr,K.context=Qe,$=Jt):(typeof K.componentDidUpdate!="function"||ge===y.memoizedProps&&gn===y.memoizedState||(S.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ge===y.memoizedProps&&gn===y.memoizedState||(S.flags|=1024),$=!1)}return K=$,md(y,S),$=(S.flags&128)!==0,K||$?(K=S.stateNode,T=$&&typeof T.getDerivedStateFromError!="function"?null:K.render(),S.flags|=1,y!==null&&$?(S.child=zh(S,y.child,null,H),S.child=zh(S,null,T,H)):Ps(y,S,T,H),S.memoizedState=K.state,y=S.child):y=Bc(y,S,H),y}function Kv(y,S,T,$){return dt(),S.flags|=256,Ps(y,S,T,$),S.child}function m0(y){return{baseLanes:y,cachePool:cn()}}function Sh(y,S,T){return y=y!==null?y.childLanes&~T:0,S&&(y|=Al),y}function Yv(y,S,T){var $=S.pendingProps,H=!1,K=(S.flags&128)!==0,ge;if((ge=K)||(ge=y!==null&&y.memoizedState===null?!1:(oo.current&2)!==0),ge&&(H=!0,S.flags&=-129),ge=(S.flags&32)!==0,S.flags&=-33,y===null){if(jr){if(H?as(S):vr(),jr){var De=Lo,Qe;(Qe=De)&&(De=lA(De,yo),De!==null?(S.memoizedState={dehydrated:De,treeContext:Lh!==null?{id:Hc,overflow:Vc}:null,retryLane:536870912},Qe=t(18,null,null,0),Qe.stateNode=De,Qe.return=S,S.child=Qe,$o=S,Lo=null,Qe=!0):Qe=!1),Qe||Pe(S)}if(De=S.memoizedState,De!==null&&(De=De.dehydrated,De!==null))return Sb(De)?S.lanes=16:S.lanes=536870912,null;Nn(S)}return De=$.children,$=$.fallback,H?(vr(),H=S.mode,De=Vf({mode:"hidden",children:De},H),$=ms($,H,T,null),De.return=S,$.return=S,De.sibling=$,S.child=De,H=S.child,H.memoizedState=m0(T),H.childLanes=Sh(y,ge,T),S.memoizedState=Bb,$):(as(S),g0(S,De))}if(Qe=y.memoizedState,Qe!==null&&(De=Qe.dehydrated,De!==null)){if(K)S.flags&256?(as(S),S.flags&=-257,S=pm(y,S,T)):S.memoizedState!==null?(vr(),S.child=y.child,S.flags|=128,S=null):(vr(),H=$.fallback,De=S.mode,$=Vf({mode:"visible",children:$.children},De),H=ms(H,De,T,null),H.flags|=2,$.return=S,H.return=S,$.sibling=H,S.child=$,zh(S,y.child,null,T),$=S.child,$.memoizedState=m0(T),$.childLanes=Sh(y,ge,T),S.memoizedState=Bb,S=H);else if(as(S),Sb(De))ge=rA(De).digest,$=Error(i(419)),$.stack="",$.digest=ge,pe({value:$,source:null,stack:null}),S=pm(y,S,T);else if(Di||ae(y,S,T,!1),ge=(T&y.childLanes)!==0,Di||ge){if(ge=hi,ge!==null){if($=T&-T,($&42)!==0)$=1;else switch($){case 2:$=1;break;case 8:$=4;break;case 32:$=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:$=64;break;case 268435456:$=134217728;break;default:$=0}if($=($&(ge.suspendedLanes|T))!==0?0:$,$!==0&&$!==Qe.retryLane)throw Qe.retryLane=$,je(y,$),mo(ge,y,$),Ob}xb(De)||Sd(),S=pm(y,S,T)}else xb(De)?(S.flags|=128,S.child=y.child,S=wd.bind(null,y),iA(De,S),S=null):(y=Qe.treeContext,Bo&&(Lo=aA(De),$o=S,jr=!0,nc=null,yo=!1,y!==null&&(yl[vl++]=Hc,yl[vl++]=Vc,yl[vl++]=Lh,Hc=y.id,Vc=y.overflow,Lh=S)),S=g0(S,$.children),S.flags|=4096);return S}return H?(vr(),H=$.fallback,De=S.mode,Qe=y.child,K=Qe.sibling,$=Jl(Qe,{mode:"hidden",children:$.children}),$.subtreeFlags=Qe.subtreeFlags&31457280,K!==null?H=Jl(K,H):(H=ms(H,De,T,null),H.flags|=2),H.return=S,$.return=S,$.sibling=H,S.child=$,$=H,H=S.child,De=y.child.memoizedState,De===null?De=m0(T):(Qe=De.cachePool,Qe!==null?(K=xa?Hi._currentValue:Hi._currentValue2,Qe=Qe.parent!==K?{parent:K,pool:K}:Qe):Qe=cn(),De={baseLanes:De.baseLanes|T,cachePool:Qe}),H.memoizedState=De,H.childLanes=Sh(y,ge,T),S.memoizedState=Bb,$):(as(S),T=y.child,y=T.sibling,T=Jl(T,{mode:"visible",children:$.children}),T.return=S,T.sibling=null,y!==null&&(ge=S.deletions,ge===null?(S.deletions=[y],S.flags|=16):ge.push(y)),S.child=T,S.memoizedState=null,T)}function g0(y,S){return S=Vf({mode:"visible",children:S},y.mode),S.return=y,y.child=S}function Vf(y,S){return R0(y,S,0,null)}function pm(y,S,T){return zh(S,y.child,null,T),y=g0(S,S.pendingProps.children),y.flags|=2,S.memoizedState=null,y}function Jv(y,S,T){y.lanes|=S;var $=y.alternate;$!==null&&($.lanes|=S),j(y.return,S,T)}function y0(y,S,T,$,H){var K=y.memoizedState;K===null?y.memoizedState={isBackwards:S,rendering:null,renderingStartTime:0,last:$,tail:T,tailMode:H}:(K.isBackwards=S,K.rendering=null,K.renderingStartTime=0,K.last=$,K.tail=T,K.tailMode=H)}function Gf(y,S,T){var $=S.pendingProps,H=$.revealOrder,K=$.tail;if(Ps(y,S,$.children,T),$=oo.current,($&2)!==0)$=$&1|2,S.flags|=128;else{if(y!==null&&(y.flags&128)!==0)e:for(y=S.child;y!==null;){if(y.tag===13)y.memoizedState!==null&&Jv(y,T,S);else if(y.tag===19)Jv(y,T,S);else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===S)break e;for(;y.sibling===null;){if(y.return===null||y.return===S)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}$&=1}switch(_(oo,$),H){case"forwards":for(T=S.child,H=null;T!==null;)y=T.alternate,y!==null&&Fs(y)===null&&(H=T),T=T.sibling;T=H,T===null?(H=S.child,S.child=null):(H=T.sibling,T.sibling=null),y0(S,!1,H,T,K);break;case"backwards":for(T=null,H=S.child,S.child=null;H!==null;){if(y=H.alternate,y!==null&&Fs(y)===null){S.child=H;break}y=H.sibling,H.sibling=T,T=H,H=y}y0(S,!0,T,null,K);break;case"together":y0(S,!1,null,null,void 0);break;default:S.memoizedState=null}return S.child}function Bc(y,S,T){if(y!==null&&(S.dependencies=y.dependencies),El|=S.lanes,(T&S.childLanes)===0)if(y!==null){if(ae(y,S,T,!1),(T&S.childLanes)===0)return null}else return null;if(y!==null&&S.child!==y.child)throw Error(i(153));if(S.child!==null){for(y=S.child,T=Jl(y,y.pendingProps),S.child=T,T.return=S;y.sibling!==null;)y=y.sibling,T=T.sibling=Jl(y,y.pendingProps),T.return=S;T.sibling=null}return S.child}function v0(y,S){return(y.lanes&S)!==0?!0:(y=y.dependencies,!!(y!==null&&we(y)))}function mS(y,S,T){switch(S.tag){case 3:ye(S,S.stateNode.containerInfo),$c(S,Hi,y.memoizedState.cache),dt();break;case 27:case 5:be(S);break;case 4:ye(S,S.stateNode.containerInfo);break;case 10:$c(S,S.type,S.memoizedProps.value);break;case 13:var $=S.memoizedState;if($!==null)return $.dehydrated!==null?(as(S),S.flags|=128,null):(T&S.child.childLanes)!==0?Yv(y,S,T):(as(S),y=Bc(y,S,T),y!==null?y.sibling:null);as(S);break;case 19:var H=(y.flags&128)!==0;if($=(T&S.childLanes)!==0,$||(ae(y,S,T,!1),$=(T&S.childLanes)!==0),H){if($)return Gf(y,S,T);S.flags|=128}if(H=S.memoizedState,H!==null&&(H.rendering=null,H.tail=null,H.lastEffect=null),_(oo,oo.current),$)break;return null;case 22:case 23:return S.lanes=0,f0(y,S,T);case 24:$c(S,Hi,y.memoizedState.cache)}return Bc(y,S,T)}function b0(y,S,T){if(y!==null)if(y.memoizedProps!==S.pendingProps)Di=!0;else{if(!v0(y,T)&&(S.flags&128)===0)return Di=!1,mS(y,S,T);Di=(y.flags&131072)!==0}else Di=!1,jr&&(S.flags&1048576)!==0&&te(S,Dm,S.index);switch(S.lanes=0,S.tag){case 16:e:{y=S.pendingProps;var $=S.elementType,H=$._init;if($=H($._payload),S.type=$,typeof $=="function")T0($)?(y=ql($,y),S.tag=1,S=qv(null,S,$,y,T)):(S.tag=0,S=Hf(null,S,$,y,T));else{if($!=null){if(H=$.$$typeof,H===O0){S.tag=11,S=fm(null,S,$,y,T);break e}else if(H===pb){S.tag=14,S=d0(null,S,$,y,T);break e}}throw S=o($)||$,Error(i(306,S,""))}}return S;case 0:return Hf(y,S,S.type,S.pendingProps,T);case 1:return $=S.type,H=ql($,S.pendingProps),qv(y,S,$,H,T);case 3:e:{if(ye(S,S.stateNode.containerInfo),y===null)throw Error(i(387));var K=S.pendingProps;H=S.memoizedState,$=H.element,qt(y,S),fn(S,K,null,T);var ge=S.memoizedState;if(K=ge.cache,$c(S,Hi,K),K!==H.cache&&ee(S,[Hi],T,!0),zt(),K=ge.element,Bo&&H.isDehydrated)if(H={element:K,isDehydrated:!1,cache:ge.cache},S.updateQueue.baseState=H,S.memoizedState=H,S.flags&256){S=Kv(y,S,K,T);break e}else if(K!==$){$=Y(Error(i(424)),S),pe($),S=Kv(y,S,K,T);break e}else for(Bo&&(Lo=oA(S.stateNode.containerInfo),$o=S,jr=!0,nc=null,yo=!0),T=xu(S,null,K,T),S.child=T;T;)T.flags=T.flags&-3|4096,T=T.sibling;else{if(dt(),K===$){S=Bc(y,S,T);break e}Ps(y,S,K,T)}S=S.child}return S;case 26:if(gl)return md(y,S),y===null?(T=QS(S.type,null,S.pendingProps,null))?S.memoizedState=T:jr||(S.stateNode=Ab(S.type,S.pendingProps,vu.current,S)):S.memoizedState=QS(S.type,y.memoizedProps,S.pendingProps,y.memoizedState),null;case 27:if(Ni)return be(S),y===null&&Ni&&jr&&($=S.stateNode=zc(S.type,S.pendingProps,vu.current,so.current,!1),$o=S,yo=!0,Lo=wb($)),$=S.pendingProps.children,y!==null||jr?Ps(y,S,$,T):S.child=zh(S,null,$,T),md(y,S),S.child;case 5:return y===null&&jr&&(Cb(S.type,S.pendingProps,so.current),(H=$=Lo)&&($=wk($,S.type,S.pendingProps,yo),$!==null?(S.stateNode=$,$o=S,Lo=wb($),yo=!1,H=!0):H=!1),H||Pe(S)),be(S),H=S.type,K=S.pendingProps,ge=y!==null?y.memoizedProps:null,$=K.children,mr(H,K)?$=null:ge!==null&&mr(H,ge)&&(S.flags|=32),S.memoizedState!==null&&(H=me(y,S,ct,null,null,T),xa?Uc._currentValue=H:Uc._currentValue2=H),md(y,S),Ps(y,S,$,T),S.child;case 6:return y===null&&jr&&(fA(S.pendingProps,so.current),(y=T=Lo)&&(T=JS(T,S.pendingProps,yo),T!==null?(S.stateNode=T,$o=S,Lo=null,y=!0):y=!1),y||Pe(S)),null;case 13:return Yv(y,S,T);case 4:return ye(S,S.stateNode.containerInfo),$=S.pendingProps,y===null?S.child=zh(S,null,$,T):Ps(y,S,$,T),S.child;case 11:return fm(y,S,S.type,S.pendingProps,T);case 7:return Ps(y,S,S.pendingProps,T),S.child;case 8:return Ps(y,S,S.pendingProps.children,T),S.child;case 12:return Ps(y,S,S.pendingProps.children,T),S.child;case 10:return $=S.pendingProps,$c(S,S.type,$.value),Ps(y,S,$.children,T),S.child;case 9:return H=S.type._context,$=S.pendingProps.children,Ee(S),H=_e(H),$=$(H),S.flags|=1,Ps(y,S,$,T),S.child;case 14:return d0(y,S,S.type,S.pendingProps,T);case 15:return h0(y,S,S.type,S.pendingProps,T);case 19:return Gf(y,S,T);case 22:return f0(y,S,T);case 24:return Ee(S),$=_e(Hi),y===null?(H=Un(),H===null&&(H=hi,K=Ht(),H.pooledCache=K,K.refCount++,K!==null&&(H.pooledCacheLanes|=T),H=K),S.memoizedState={parent:$,cache:H},Ct(S),$c(S,Hi,H)):((y.lanes&T)!==0&&(qt(y,S),fn(S,null,null,T),zt()),H=y.memoizedState,K=S.memoizedState,H.parent!==$?(H={parent:$,cache:$},S.memoizedState=H,S.lanes===0&&(S.memoizedState=S.updateQueue.baseState=H),$c(S,Hi,$)):($=K.cache,$c(S,Hi,$),$!==H.cache&&ee(S,[Hi],T,!0))),Ps(y,S,S.pendingProps.children,T),S.child;case 29:throw S.pendingProps}throw Error(i(156,S.tag))}function $c(y,S,T){xa?(_(kd,S._currentValue),S._currentValue=T):(_(kd,S._currentValue2),S._currentValue2=T)}function O(y){var S=kd.current;xa?y._currentValue=S:y._currentValue2=S,x(kd)}function j(y,S,T){for(;y!==null;){var $=y.alternate;if((y.childLanes&S)!==S?(y.childLanes|=S,$!==null&&($.childLanes|=S)):$!==null&&($.childLanes&S)!==S&&($.childLanes|=S),y===T)break;y=y.return}}function ee(y,S,T,$){var H=y.child;for(H!==null&&(H.return=y);H!==null;){var K=H.dependencies;if(K!==null){var ge=H.child;K=K.firstContext;e:for(;K!==null;){var De=K;K=H;for(var Qe=0;Qe<S.length;Qe++)if(De.context===S[Qe]){K.lanes|=T,De=K.alternate,De!==null&&(De.lanes|=T),j(K.return,T,y),$||(ge=null);break e}K=De.next}}else if(H.tag===18){if(ge=H.return,ge===null)throw Error(i(341));ge.lanes|=T,K=ge.alternate,K!==null&&(K.lanes|=T),j(ge,T,y),ge=null}else ge=H.child;if(ge!==null)ge.return=H;else for(ge=H;ge!==null;){if(ge===y){ge=null;break}if(H=ge.sibling,H!==null){H.return=ge.return,ge=H;break}ge=ge.return}H=ge}}function ae(y,S,T,$){y=null;for(var H=S,K=!1;H!==null;){if(!K){if((H.flags&524288)!==0)K=!0;else if((H.flags&262144)!==0)break}if(H.tag===10){var ge=H.alternate;if(ge===null)throw Error(i(387));if(ge=ge.memoizedProps,ge!==null){var De=H.type;ja(H.pendingProps.value,ge.value)||(y!==null?y.push(De):y=[De])}}else if(H===ep.current){if(ge=H.alternate,ge===null)throw Error(i(387));ge.memoizedState.memoizedState!==H.memoizedState.memoizedState&&(y!==null?y.push(Uc):y=[Uc])}H=H.return}y!==null&&ee(S,y,T,$),S.flags|=262144}function we(y){for(y=y.firstContext;y!==null;){var S=y.context;if(!ja(xa?S._currentValue:S._currentValue2,y.memoizedValue))return!0;y=y.next}return!1}function Ee(y){jc=y,wl=null,y=y.dependencies,y!==null&&(y.firstContext=null)}function _e(y){return ft(jc,y)}function He(y,S){return jc===null&&Ee(y),ft(y,S)}function ft(y,S){var T=xa?S._currentValue:S._currentValue2;if(S={context:S,memoizedValue:T,next:null},wl===null){if(y===null)throw Error(i(308));wl=S,y.dependencies={lanes:0,firstContext:S},y.flags|=524288}else wl=wl.next=S;return T}function Ht(){return{controller:new Fm,data:new Map,refCount:0}}function Zt(y){y.refCount--,y.refCount===0&&CA(EA,function(){y.controller.abort()})}function Un(){var y=wu.current;return y!==null?y:hi.pooledCache}function Cn(y,S){S===null?_(wu,wu.current):_(wu,S.pool)}function cn(){var y=Un();return y===null?null:{parent:xa?Hi._currentValue:Hi._currentValue2,pool:y}}function xn(y){y.flags|=4}function ir(y,S){if(y!==null&&y.child===S.child)return!1;if((S.flags&16)!==0)return!0;for(y=S.child;y!==null;){if((y.flags&13878)!==0||(y.subtreeFlags&13878)!==0)return!0;y=y.sibling}return!1}function Yr(y,S,T,$){if(io)for(T=S.child;T!==null;){if(T.tag===5||T.tag===6)$0(y,T.stateNode);else if(!(T.tag===4||Ni&&T.tag===27)&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===S)break;for(;T.sibling===null;){if(T.return===null||T.return===S)return;T=T.return}T.sibling.return=T.return,T=T.sibling}else if(ec)for(var H=S.child;H!==null;){if(H.tag===5){var K=H.stateNode;T&&$&&(K=XS(K,H.type,H.memoizedProps)),$0(y,K)}else if(H.tag===6)K=H.stateNode,T&&$&&(K=qS(K,H.memoizedProps)),$0(y,K);else if(H.tag!==4){if(H.tag===22&&H.memoizedState!==null)K=H.child,K!==null&&(K.return=H),Yr(y,H,!0,!0);else if(H.child!==null){H.child.return=H,H=H.child;continue}}if(H===S)break;for(;H.sibling===null;){if(H.return===null||H.return===S)return;H=H.return}H.sibling.return=H.return,H=H.sibling}}function mi(y,S,T,$){if(ec)for(var H=S.child;H!==null;){if(H.tag===5){var K=H.stateNode;T&&$&&(K=XS(K,H.type,H.memoizedProps)),jS(y,K)}else if(H.tag===6)K=H.stateNode,T&&$&&(K=qS(K,H.memoizedProps)),jS(y,K);else if(H.tag!==4){if(H.tag===22&&H.memoizedState!==null)K=H.child,K!==null&&(K.return=H),mi(y,H,!(H.memoizedProps!==null&&H.memoizedProps.mode==="manual"),!0);else if(H.child!==null){H.child.return=H,H=H.child;continue}}if(H===S)break;for(;H.sibling===null;){if(H.return===null||H.return===S)return;H=H.return}H.sibling.return=H.return,H=H.sibling}}function ls(y,S){if(ec&&ir(y,S)){y=S.stateNode;var T=y.containerInfo,$=L0();mi($,S,!1,!1),y.pendingChildren=$,xn(S),bb(T,$)}}function Io(y,S,T,$){if(io)y.memoizedProps!==$&&xn(S);else if(ec){var H=y.stateNode,K=y.memoizedProps;if((y=ir(y,S))||K!==$){var ge=so.current;K=Rm(H,T,K,$,!y,null),K===H?S.stateNode=H:(Ad(K,T,$,ge)&&xn(S),S.stateNode=K,y?Yr(K,S,!1,!1):xn(S))}else S.stateNode=H}}function ro(y,S,T){if(FS(S,T)){if(y.flags|=16777216,!yb(S,T))if(Ah())y.flags|=8192;else throw Fh=j0,W0}else y.flags&=-16777217}function kr(y,S){if(gA(S)){if(y.flags|=16777216,!Kf(S))if(Ah())y.flags|=8192;else throw Fh=j0,W0}else y.flags&=-16777217}function rs(y,S){S!==null&&(y.flags|=4),y.flags&16384&&(S=y.tag!==22?N():536870912,y.lanes|=S,Eu|=S)}function ya(y,S){if(!jr)switch(y.tailMode){case"hidden":S=y.tail;for(var T=null;S!==null;)S.alternate!==null&&(T=S),S=S.sibling;T===null?y.tail=null:T.sibling=null;break;case"collapsed":T=y.tail;for(var $=null;T!==null;)T.alternate!==null&&($=T),T=T.sibling;$===null?S||y.tail===null?y.tail=null:y.tail.sibling=null:$.sibling=null}}function Pi(y){var S=y.alternate!==null&&y.alternate.child===y.child,T=0,$=0;if(S)for(var H=y.child;H!==null;)T|=H.lanes|H.childLanes,$|=H.subtreeFlags&31457280,$|=H.flags&31457280,H.return=y,H=H.sibling;else for(H=y.child;H!==null;)T|=H.lanes|H.childLanes,$|=H.subtreeFlags,$|=H.flags,H.return=y,H=H.sibling;return y.subtreeFlags|=$,y.childLanes=T,S}function Zv(y,S,T){var $=S.pendingProps;switch(le(S),S.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pi(S),null;case 1:return Pi(S),null;case 3:return T=S.stateNode,$=null,y!==null&&($=y.memoizedState.cache),S.memoizedState.cache!==$&&(S.flags|=2048),O(Hi),ue(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(y===null||y.child===null)&&(pt(S)?xn(S):y===null||y.memoizedState.isDehydrated&&(S.flags&256)===0||(S.flags|=1024,nc!==null&&(E0(nc),nc=null))),ls(y,S),Pi(S),null;case 26:if(gl){T=S.type;var H=S.memoizedState;return y===null?(xn(S),H!==null?(Pi(S),kr(S,H)):(Pi(S),ro(S,T,$))):H?H!==y.memoizedState?(xn(S),Pi(S),kr(S,H)):(Pi(S),S.flags&=-16777217):(io?y.memoizedProps!==$&&xn(S):Io(y,S,T,$),Pi(S),ro(S,T,$)),null}case 27:if(Ni){if(xe(S),T=vu.current,H=S.type,y!==null&&S.stateNode!=null)io?y.memoizedProps!==$&&xn(S):Io(y,S,H,$);else{if(!$){if(S.stateNode===null)throw Error(i(166));return Pi(S),null}y=so.current,pt(S)?ze(S,y):(y=zc(H,$,T,y,!0),S.stateNode=y,xn(S))}return Pi(S),null}case 5:if(xe(S),T=S.type,y!==null&&S.stateNode!=null)Io(y,S,T,$);else{if(!$){if(S.stateNode===null)throw Error(i(166));return Pi(S),null}y=so.current,pt(S)?ze(S,y):(H=LS(T,$,vu.current,y,S),Yr(H,S,!1,!1),S.stateNode=H,Ad(H,T,$,y)&&xn(S))}return Pi(S),ro(S,S.type,S.pendingProps),null;case 6:if(y&&S.stateNode!=null)T=y.memoizedProps,io?T!==$&&xn(S):ec&&(T!==$?(S.stateNode=gi($,vu.current,so.current,S),xn(S)):S.stateNode=y.stateNode);else{if(typeof $!="string"&&S.stateNode===null)throw Error(i(166));if(y=vu.current,T=so.current,pt(S)){if(!Bo)throw Error(i(176));if(y=S.stateNode,T=S.memoizedProps,$=null,H=$o,H!==null)switch(H.tag){case 27:case 5:$=H.memoizedProps}ZS(y,T,S,$)||Pe(S)}else S.stateNode=gi($,y,T,S)}return Pi(S),null;case 13:if($=S.memoizedState,y===null||y.memoizedState!==null&&y.memoizedState.dehydrated!==null){if(H=pt(S),$!==null&&$.dehydrated!==null){if(y===null){if(!H)throw Error(i(318));if(!Bo)throw Error(i(344));if(H=S.memoizedState,H=H!==null?H.dehydrated:null,!H)throw Error(i(317));uA(H,S)}else dt(),(S.flags&128)===0&&(S.memoizedState=null),S.flags|=4;Pi(S),H=!1}else nc!==null&&(E0(nc),nc=null),H=!0;if(!H)return S.flags&256?(Nn(S),S):(Nn(S),null)}if(Nn(S),(S.flags&128)!==0)return S.lanes=T,S;if(T=$!==null,y=y!==null&&y.memoizedState!==null,T){$=S.child,H=null,$.alternate!==null&&$.alternate.memoizedState!==null&&$.alternate.memoizedState.cachePool!==null&&(H=$.alternate.memoizedState.cachePool.pool);var K=null;$.memoizedState!==null&&$.memoizedState.cachePool!==null&&(K=$.memoizedState.cachePool.pool),K!==H&&($.flags|=2048)}return T!==y&&T&&(S.child.flags|=8192),rs(S,S.updateQueue),Pi(S),null;case 4:return ue(),ls(y,S),y===null&&As(S.stateNode.containerInfo),Pi(S),null;case 10:return O(S.type),Pi(S),null;case 19:if(x(oo),H=S.memoizedState,H===null)return Pi(S),null;if($=(S.flags&128)!==0,K=H.rendering,K===null)if($)ya(H,!1);else{if(ki!==0||y!==null&&(y.flags&128)!==0)for(y=S.child;y!==null;){if(K=Fs(y),K!==null){for(S.flags|=128,ya(H,!1),y=K.updateQueue,S.updateQueue=y,rs(S,y),S.subtreeFlags=0,y=T,T=S.child;T!==null;)M0(T,y),T=T.sibling;return _(oo,oo.current&1|2),S.child}y=y.sibling}H.tail!==null&&tc()>zm&&(S.flags|=128,$=!0,ya(H,!1),S.lanes=4194304)}else{if(!$)if(y=Fs(K),y!==null){if(S.flags|=128,$=!0,y=y.updateQueue,S.updateQueue=y,rs(S,y),ya(H,!0),H.tail===null&&H.tailMode==="hidden"&&!K.alternate&&!jr)return Pi(S),null}else 2*tc()-H.renderingStartTime>zm&&T!==536870912&&(S.flags|=128,$=!0,ya(H,!1),S.lanes=4194304);H.isBackwards?(K.sibling=S.child,S.child=K):(y=H.last,y!==null?y.sibling=K:S.child=K,H.last=K)}return H.tail!==null?(S=H.tail,H.rendering=S,H.tail=S.sibling,H.renderingStartTime=tc(),S.sibling=null,y=oo.current,_(oo,$?y&1|2:y&1),S):(Pi(S),null);case 22:case 23:return Nn(S),Ri(),$=S.memoizedState!==null,y!==null?y.memoizedState!==null!==$&&(S.flags|=8192):$&&(S.flags|=8192),$?(T&536870912)!==0&&(S.flags&128)===0&&(Pi(S),S.subtreeFlags&6&&(S.flags|=8192)):Pi(S),T=S.updateQueue,T!==null&&rs(S,T.retryQueue),T=null,y!==null&&y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(T=y.memoizedState.cachePool.pool),$=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&($=S.memoizedState.cachePool.pool),$!==T&&(S.flags|=2048),y!==null&&x(wu),null;case 24:return T=null,y!==null&&(T=y.memoizedState.cache),S.memoizedState.cache!==T&&(S.flags|=2048),O(Hi),Pi(S),null;case 25:return null}throw Error(i(156,S.tag))}function gS(y,S){switch(le(S),S.tag){case 1:return y=S.flags,y&65536?(S.flags=y&-65537|128,S):null;case 3:return O(Hi),ue(),y=S.flags,(y&65536)!==0&&(y&128)===0?(S.flags=y&-65537|128,S):null;case 26:case 27:case 5:return xe(S),null;case 13:if(Nn(S),y=S.memoizedState,y!==null&&y.dehydrated!==null){if(S.alternate===null)throw Error(i(340));dt()}return y=S.flags,y&65536?(S.flags=y&-65537|128,S):null;case 19:return x(oo),null;case 4:return ue(),null;case 10:return O(S.type),null;case 22:case 23:return Nn(S),Ri(),y!==null&&x(wu),y=S.flags,y&65536?(S.flags=y&-65537|128,S):null;case 24:return O(Hi),null;case 25:return null;default:return null}}function Qv(y,S){switch(le(S),S.tag){case 3:O(Hi),ue();break;case 26:case 27:case 5:xe(S);break;case 4:ue();break;case 13:Nn(S);break;case 19:x(oo);break;case 10:O(S.type);break;case 22:case 23:Nn(S),Ri(),y!==null&&x(wu);break;case 24:O(Hi)}}function Wf(y,S){try{var T=S.updateQueue,$=T!==null?T.lastEffect:null;if($!==null){var H=$.next;T=H;do{if((T.tag&y)===y){$=void 0;var K=T.create,ge=T.inst;$=K(),ge.destroy=$}T=T.next}while(T!==H)}}catch(De){ui(S,S.return,De)}}function hl(y,S,T){try{var $=S.updateQueue,H=$!==null?$.lastEffect:null;if(H!==null){var K=H.next;$=K;do{if(($.tag&y)===y){var ge=$.inst,De=ge.destroy;if(De!==void 0){ge.destroy=void 0,H=S;var Qe=T;try{De()}catch(Dt){ui(H,Qe,Dt)}}}$=$.next}while($!==K)}}catch(Dt){ui(S,S.return,Dt)}}function D2(y){var S=y.updateQueue;if(S!==null){var T=y.stateNode;try{Xe(S,T)}catch($){ui(y,y.return,$)}}}function Ua(y,S,T){T.props=ql(y.type,y.memoizedProps),T.state=y.memoizedState;try{T.componentWillUnmount()}catch($){ui(y,S,$)}}function Lc(y,S){try{var T=y.ref;if(T!==null){var $=y.stateNode;switch(y.tag){case 26:case 27:case 5:var H=Am($);break;default:H=$}typeof T=="function"?y.refCleanup=T(H):T.current=H}}catch(K){ui(y,S,K)}}function za(y,S){var T=y.ref,$=y.refCleanup;if(T!==null)if(typeof $=="function")try{$()}catch(H){ui(y,S,H)}finally{y.refCleanup=null,y=y.alternate,y!=null&&(y.refCleanup=null)}else if(typeof T=="function")try{T(null)}catch(H){ui(y,S,H)}else T.current=null}function yS(y){var S=y.type,T=y.memoizedProps,$=y.stateNode;try{xk($,S,T,y)}catch(H){ui(y,y.return,H)}}function vS(y,S,T){try{K2(y.stateNode,y.type,T,S,y)}catch($){ui(y,y.return,$)}}function bS(y){return y.tag===5||y.tag===3||(gl?y.tag===26:!1)||(Ni?y.tag===27:!1)||y.tag===4}function x0(y){e:for(;;){for(;y.sibling===null;){if(y.return===null||bS(y.return))return null;y=y.return}for(y.sibling.return=y.return,y=y.sibling;y.tag!==5&&y.tag!==6&&(!Ni||y.tag!==27)&&y.tag!==18;){if(y.flags&2||y.child===null||y.tag===4)continue e;y.child.return=y,y=y.child}if(!(y.flags&2))return y.stateNode}}function xS(y,S,T){var $=y.tag;if($===5||$===6)y=y.stateNode,S?J2(T,y,S):VS(T,y);else if(!($===4||Ni&&$===27)&&(y=y.child,y!==null))for(xS(y,S,T),y=y.sibling;y!==null;)xS(y,S,T),y=y.sibling}function gd(y,S,T){var $=y.tag;if($===5||$===6)y=y.stateNode,S?Y2(T,y,S):X2(T,y);else if(!($===4||Ni&&$===27)&&(y=y.child,y!==null))for(gd(y,S,T),y=y.sibling;y!==null;)gd(y,S,T),y=y.sibling}function eb(y,S,T){y=y.containerInfo;try{Nm(y,T)}catch($){ui(S,S.return,$)}}function S0(y,S){for(mb(y.containerInfo),ur=S;ur!==null;)if(y=ur,S=y.child,(y.subtreeFlags&1028)!==0&&S!==null)S.return=y,ur=S;else for(;ur!==null;){y=ur;var T=y.alternate;switch(S=y.flags,y.tag){case 0:break;case 11:case 15:break;case 1:if((S&1024)!==0&&T!==null){S=void 0;var $=y,H=T.memoizedProps;T=T.memoizedState;var K=$.stateNode;try{var ge=ql($.type,H,$.elementType===$.type);S=K.getSnapshotBeforeUpdate(ge,T),K.__reactInternalSnapshotBeforeUpdate=S}catch(De){ui($,$.return,De)}}break;case 3:(S&1024)!==0&&io&&nA(y.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((S&1024)!==0)throw Error(i(163))}if(S=y.sibling,S!==null){S.return=y.return,ur=S;break}ur=y.return}return ge=Nr,Nr=!1,ge}function tb(y,S,T){var $=T.flags;switch(T.tag){case 0:case 11:case 15:vd(y,T),$&4&&Wf(5,T);break;case 1:if(vd(y,T),$&4)if(y=T.stateNode,S===null)try{y.componentDidMount()}catch(De){ui(T,T.return,De)}else{var H=ql(T.type,S.memoizedProps);S=S.memoizedState;try{y.componentDidUpdate(H,S,y.__reactInternalSnapshotBeforeUpdate)}catch(De){ui(T,T.return,De)}}$&64&&D2(T),$&512&&Lc(T,T.return);break;case 3:if(vd(y,T),$&64&&($=T.updateQueue,$!==null)){if(y=null,T.child!==null)switch(T.child.tag){case 27:case 5:y=Am(T.child.stateNode);break;case 1:y=T.child.stateNode}try{Xe($,y)}catch(De){ui(T,T.return,De)}}break;case 26:if(gl){vd(y,T),$&512&&Lc(T,T.return);break}case 27:case 5:vd(y,T),S===null&&$&4&&yS(T),$&512&&Lc(T,T.return);break;case 12:vd(y,T);break;case 13:vd(y,T),$&4&&nb(y,T);break;case 22:if(H=T.memoizedState!==null||_u,!H){S=S!==null&&S.memoizedState!==null||ys;var K=_u,ge=ys;_u=H,(ys=S)&&!ge?bd(y,T,(T.subtreeFlags&8772)!==0):vd(y,T),_u=K,ys=ge}$&512&&(T.memoizedProps.mode==="manual"?Lc(T,T.return):za(T,T.return));break;default:vd(y,T)}}function SS(y){var S=y.alternate;S!==null&&(y.alternate=null,SS(S)),y.child=null,y.deletions=null,y.sibling=null,y.tag===5&&(S=y.stateNode,S!==null&&bk(S)),y.stateNode=null,y.return=null,y.dependencies=null,y.memoizedProps=null,y.memoizedState=null,y.pendingProps=null,y.stateNode=null,y.updateQueue=null}function Do(y,S,T){for(T=T.child;T!==null;)wh(y,S,T),T=T.sibling}function wh(y,S,T){if(Wa&&typeof Wa.onCommitFiberUnmount=="function")try{Wa.onCommitFiberUnmount(Ms,T)}catch{}switch(T.tag){case 26:if(gl){ys||za(T,S),Do(y,S,T),T.memoizedState?qf(T.memoizedState):T.stateNode&&Im(T.stateNode);break}case 27:if(Ni){ys||za(T,S);var $=Fn,H=br;Fn=T.stateNode,Do(y,S,T),Bh(T.stateNode),Fn=$,br=H;break}case 5:ys||za(T,S);case 6:if(io){if($=Fn,H=br,Fn=null,Do(y,S,T),Fn=$,br=H,Fn!==null)if(br)try{Z2(Fn,T.stateNode)}catch(K){ui(T,S,K)}else try{GS(Fn,T.stateNode)}catch(K){ui(T,S,K)}}else Do(y,S,T);break;case 18:io&&Fn!==null&&(br?F0(Fn,T.stateNode):hA(Fn,T.stateNode));break;case 4:io?($=Fn,H=br,Fn=T.stateNode.containerInfo,br=!0,Do(y,S,T),Fn=$,br=H):(ec&&eb(T.stateNode,T,L0()),Do(y,S,T));break;case 0:case 11:case 14:case 15:ys||hl(2,T,S),ys||hl(4,T,S),Do(y,S,T);break;case 1:ys||(za(T,S),$=T.stateNode,typeof $.componentWillUnmount=="function"&&Ua(T,S,$)),Do(y,S,T);break;case 21:Do(y,S,T);break;case 22:ys||za(T,S),ys=($=ys)||T.memoizedState!==null,Do(y,S,T),ys=$;break;default:Do(y,S,T)}}function nb(y,S){if(Bo&&S.memoizedState===null&&(y=S.alternate,y!==null&&(y=y.memoizedState,y!==null&&(y=y.dehydrated,y!==null))))try{Ck(y)}catch(T){ui(S,S.return,T)}}function k2(y){switch(y.tag){case 13:case 19:var S=y.stateNode;return S===null&&(S=y.stateNode=new di),S;case 22:return y=y.stateNode,S=y._retryCache,S===null&&(S=y._retryCache=new di),S;default:throw Error(i(435,y.tag))}}function yd(y,S){var T=k2(y);S.forEach(function($){var H=Rh.bind(null,y,$);T.has($)||(T.add($),$.then(H,H))})}function va(y,S){var T=S.deletions;if(T!==null)for(var $=0;$<T.length;$++){var H=T[$],K=y,ge=S;if(io){var De=ge;e:for(;De!==null;){switch(De.tag){case 27:case 5:Fn=De.stateNode,br=!1;break e;case 3:Fn=De.stateNode.containerInfo,br=!0;break e;case 4:Fn=De.stateNode.containerInfo,br=!0;break e}De=De.return}if(Fn===null)throw Error(i(160));wh(K,ge,H),Fn=null,br=!1}else wh(K,ge,H);K=H.alternate,K!==null&&(K.return=null),H.return=null}if(S.subtreeFlags&13878)for(S=S.child;S!==null;)wS(S,y),S=S.sibling}function wS(y,S){var T=y.alternate,$=y.flags;switch(y.tag){case 0:case 11:case 14:case 15:va(S,y),Ha(y),$&4&&(hl(3,y,y.return),Wf(3,y),hl(5,y,y.return));break;case 1:va(S,y),Ha(y),$&512&&(ys||T===null||za(T,T.return)),$&64&&_u&&(y=y.updateQueue,y!==null&&($=y.callbacks,$!==null&&(T=y.shared.hiddenCallbacks,y.shared.hiddenCallbacks=T===null?$:T.concat($))));break;case 26:if(gl){var H=us;va(S,y),Ha(y),$&512&&(ys||T===null||za(T,T.return)),$&4&&($=T!==null?T.memoizedState:null,S=y.memoizedState,T===null?S===null?y.stateNode===null?y.stateNode=U0(H,y.type,y.memoizedProps,y):z0(H,y.type,y.stateNode):y.stateNode=pA(H,S,y.memoizedProps):$!==S?($===null?T.stateNode!==null&&Im(T.stateNode):qf($),S===null?z0(H,y.type,y.stateNode):pA(H,S,y.memoizedProps)):S===null&&y.stateNode!==null&&vS(y,y.memoizedProps,T.memoizedProps));break}case 27:if(Ni&&$&4&&y.alternate===null){H=y.stateNode;var K=y.memoizedProps;try{Oh(H),vA(y.type,K,H,y)}catch(Jt){ui(y,y.return,Jt)}}case 5:if(va(S,y),Ha(y),$&512&&(ys||T===null||za(T,T.return)),io){if(y.flags&32){S=y.stateNode;try{WS(S)}catch(Jt){ui(y,y.return,Jt)}}$&4&&y.stateNode!=null&&(S=y.memoizedProps,vS(y,S,T!==null?T.memoizedProps:S)),$&1024&&(rw=!0)}break;case 6:if(va(S,y),Ha(y),$&4&&io){if(y.stateNode===null)throw Error(i(162));$=y.memoizedProps,T=T!==null?T.memoizedProps:$,S=y.stateNode;try{q2(S,T,$)}catch(Jt){ui(y,y.return,Jt)}}break;case 3:if(gl?(mA(),H=us,us=Eb(S.containerInfo),va(S,y),us=H):va(S,y),Ha(y),$&4){if(io&&Bo&&T!==null&&T.memoizedState.isDehydrated)try{_k(S.containerInfo)}catch(Jt){ui(y,y.return,Jt)}if(ec){$=S.containerInfo,T=S.pendingChildren;try{Nm($,T)}catch(Jt){ui(y,y.return,Jt)}}}rw&&(rw=!1,O2(y));break;case 4:gl?(T=us,us=Eb(y.stateNode.containerInfo),va(S,y),Ha(y),us=T):(va(S,y),Ha(y)),$&4&&ec&&eb(y.stateNode,y,y.stateNode.pendingChildren);break;case 12:va(S,y),Ha(y);break;case 13:va(S,y),Ha(y),y.child.flags&8192&&y.memoizedState!==null!=(T!==null&&T.memoizedState!==null)&&(Ca=tc()),$&4&&($=y.updateQueue,$!==null&&(y.updateQueue=null,yd(y,$)));break;case 22:$&512&&(ys||T===null||za(T,T.return)),H=y.memoizedState!==null;var ge=T!==null&&T.memoizedState!==null,De=_u,Qe=ys;if(_u=De||H,ys=Qe||ge,va(S,y),ys=Qe,_u=De,Ha(y),S=y.stateNode,S._current=y,S._visibility&=-3,S._visibility|=S._pendingVisibility&2,$&8192&&(S._visibility=H?S._visibility&-2:S._visibility|1,H&&(S=_u||ys,T===null||ge||S||mm(y)),io&&(y.memoizedProps===null||y.memoizedProps.mode!=="manual"))){e:if(T=null,io)for(S=y;;){if(S.tag===5||gl&&S.tag===26||Ni&&S.tag===27){if(T===null){ge=T=S;try{K=ge.stateNode,H?Q2(K):tA(ge.stateNode,ge.memoizedProps)}catch(Jt){ui(ge,ge.return,Jt)}}}else if(S.tag===6){if(T===null){ge=S;try{var Dt=ge.stateNode;H?eA(Dt):Sk(Dt,ge.memoizedProps)}catch(Jt){ui(ge,ge.return,Jt)}}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===y)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===y)break e;for(;S.sibling===null;){if(S.return===null||S.return===y)break e;T===S&&(T=null),S=S.return}T===S&&(T=null),S.sibling.return=S.return,S=S.sibling}}$&4&&($=y.updateQueue,$!==null&&(T=$.retryQueue,T!==null&&($.retryQueue=null,yd(y,T))));break;case 19:va(S,y),Ha(y),$&4&&($=y.updateQueue,$!==null&&(y.updateQueue=null,yd(y,$)));break;case 21:break;default:va(S,y),Ha(y)}}function Ha(y){var S=y.flags;if(S&2){try{if(io&&(!Ni||y.tag!==27)){e:{for(var T=y.return;T!==null;){if(bS(T)){var $=T;break e}T=T.return}throw Error(i(160))}switch($.tag){case 27:if(Ni){var H=$.stateNode,K=x0(y);gd(y,K,H);break}case 5:var ge=$.stateNode;$.flags&32&&(WS(ge),$.flags&=-33);var De=x0(y);gd(y,De,ge);break;case 3:case 4:var Qe=$.stateNode.containerInfo,Dt=x0(y);xS(y,Dt,Qe);break;default:throw Error(i(161))}}}catch(Jt){ui(y,y.return,Jt)}y.flags&=-3}S&4096&&(y.flags&=-4097)}function O2(y){if(y.subtreeFlags&1024)for(y=y.child;y!==null;){var S=y;O2(S),S.tag===5&&S.flags&1024&&vb(S.stateNode),y=y.sibling}}function vd(y,S){if(S.subtreeFlags&8772)for(S=S.child;S!==null;)tb(y,S.alternate,S),S=S.sibling}function mm(y){for(y=y.child;y!==null;){var S=y;switch(S.tag){case 0:case 11:case 14:case 15:hl(4,S,S.return),mm(S);break;case 1:za(S,S.return);var T=S.stateNode;typeof T.componentWillUnmount=="function"&&Ua(S,S.return,T),mm(S);break;case 26:case 27:case 5:za(S,S.return),mm(S);break;case 22:za(S,S.return),S.memoizedState===null&&mm(S);break;default:mm(S)}y=y.sibling}}function bd(y,S,T){for(T=T&&(S.subtreeFlags&8772)!==0,S=S.child;S!==null;){var $=S.alternate,H=y,K=S,ge=K.flags;switch(K.tag){case 0:case 11:case 15:bd(H,K,T),Wf(4,K);break;case 1:if(bd(H,K,T),$=K,H=$.stateNode,typeof H.componentDidMount=="function")try{H.componentDidMount()}catch(Dt){ui($,$.return,Dt)}if($=K,H=$.updateQueue,H!==null){var De=$.stateNode;try{var Qe=H.shared.hiddenCallbacks;if(Qe!==null)for(H.shared.hiddenCallbacks=null,H=0;H<Qe.length;H++)Te(Qe[H],De)}catch(Dt){ui($,$.return,Dt)}}T&&ge&64&&D2(K),Lc(K,K.return);break;case 26:case 27:case 5:bd(H,K,T),T&&$===null&&ge&4&&yS(K),Lc(K,K.return);break;case 12:bd(H,K,T);break;case 13:bd(H,K,T),T&&ge&4&&nb(H,K);break;case 22:K.memoizedState===null&&bd(H,K,T),Lc(K,K.return);break;default:bd(H,K,T)}S=S.sibling}}function rb(y,S){var T=null;y!==null&&y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(T=y.memoizedState.cachePool.pool),y=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(y=S.memoizedState.cachePool.pool),y!==T&&(y!=null&&y.refCount++,T!=null&&Zt(T))}function w0(y,S){y=null,S.alternate!==null&&(y=S.alternate.memoizedState.cache),S=S.memoizedState.cache,S!==y&&(S.refCount++,y!=null&&Zt(y))}function po(y,S,T,$){if(S.subtreeFlags&10256)for(S=S.child;S!==null;)_S(y,S,T,$),S=S.sibling}function _S(y,S,T,$){var H=S.flags;switch(S.tag){case 0:case 11:case 15:po(y,S,T,$),H&2048&&Wf(9,S);break;case 3:po(y,S,T,$),H&2048&&(y=null,S.alternate!==null&&(y=S.alternate.memoizedState.cache),S=S.memoizedState.cache,S!==y&&(S.refCount++,y!=null&&Zt(y)));break;case 12:if(H&2048){po(y,S,T,$),y=S.stateNode;try{var K=S.memoizedProps,ge=K.id,De=K.onPostCommit;typeof De=="function"&&De(ge,S.alternate===null?"mount":"update",y.passiveEffectDuration,-0)}catch(Qe){ui(S,S.return,Qe)}}else po(y,S,T,$);break;case 23:break;case 22:K=S.stateNode,S.memoizedState!==null?K._visibility&4?po(y,S,T,$):qo(y,S):K._visibility&4?po(y,S,T,$):(K._visibility|=4,ko(y,S,T,$,(S.subtreeFlags&10256)!==0)),H&2048&&rb(S.alternate,S);break;case 24:po(y,S,T,$),H&2048&&w0(S.alternate,S);break;default:po(y,S,T,$)}}function ko(y,S,T,$,H){for(H=H&&(S.subtreeFlags&10256)!==0,S=S.child;S!==null;){var K=y,ge=S,De=T,Qe=$,Dt=ge.flags;switch(ge.tag){case 0:case 11:case 15:ko(K,ge,De,Qe,H),Wf(8,ge);break;case 23:break;case 22:var Jt=ge.stateNode;ge.memoizedState!==null?Jt._visibility&4?ko(K,ge,De,Qe,H):qo(K,ge):(Jt._visibility|=4,ko(K,ge,De,Qe,H)),H&&Dt&2048&&rb(ge.alternate,ge);break;case 24:ko(K,ge,De,Qe,H),H&&Dt&2048&&w0(ge.alternate,ge);break;default:ko(K,ge,De,Qe,H)}S=S.sibling}}function qo(y,S){if(S.subtreeFlags&10256)for(S=S.child;S!==null;){var T=y,$=S,H=$.flags;switch($.tag){case 22:qo(T,$),H&2048&&rb($.alternate,$);break;case 24:qo(T,$),H&2048&&w0($.alternate,$);break;default:qo(T,$)}S=S.sibling}}function Kl(y){if(y.subtreeFlags&_l)for(y=y.child;y!==null;)ib(y),y=y.sibling}function ib(y){switch(y.tag){case 26:Kl(y),y.flags&_l&&(y.memoizedState!==null?yA(us,y.memoizedState,y.memoizedProps):Sa(y.type,y.memoizedProps));break;case 5:Kl(y),y.flags&_l&&Sa(y.type,y.memoizedProps);break;case 3:case 4:if(gl){var S=us;us=Eb(y.stateNode.containerInfo),Kl(y),us=S}else Kl(y);break;case 22:y.memoizedState===null&&(S=y.alternate,S!==null&&S.memoizedState!==null?(S=_l,_l=16777216,Kl(y),_l=S):Kl(y));break;default:Kl(y)}}function _0(y){var S=y.alternate;if(S!==null&&(y=S.child,y!==null)){S.child=null;do S=y.sibling,y.sibling=null,y=S;while(y!==null)}}function _h(y){var S=y.deletions;if((y.flags&16)!==0){if(S!==null)for(var T=0;T<S.length;T++){var $=S[T];ur=$,CS($,y)}_0(y)}if(y.subtreeFlags&10256)for(y=y.child;y!==null;)sb(y),y=y.sibling}function sb(y){switch(y.tag){case 0:case 11:case 15:_h(y),y.flags&2048&&hl(9,y,y.return);break;case 3:_h(y);break;case 12:_h(y);break;case 22:var S=y.stateNode;y.memoizedState!==null&&S._visibility&4&&(y.return===null||y.return.tag!==13)?(S._visibility&=-5,xd(y)):_h(y);break;default:_h(y)}}function xd(y){var S=y.deletions;if((y.flags&16)!==0){if(S!==null)for(var T=0;T<S.length;T++){var $=S[T];ur=$,CS($,y)}_0(y)}for(y=y.child;y!==null;){switch(S=y,S.tag){case 0:case 11:case 15:hl(8,S,S.return),xd(S);break;case 22:T=S.stateNode,T._visibility&4&&(T._visibility&=-5,xd(S));break;default:xd(S)}y=y.sibling}}function CS(y,S){for(;ur!==null;){var T=ur;switch(T.tag){case 0:case 11:case 15:hl(8,T,S);break;case 23:case 22:if(T.memoizedState!==null&&T.memoizedState.cachePool!==null){var $=T.memoizedState.cachePool.pool;$!=null&&$.refCount++}break;case 24:Zt(T.memoizedState.cache)}if($=T.child,$!==null)$.return=T,ur=$;else e:for(T=y;ur!==null;){$=ur;var H=$.sibling,K=$.return;if(SS($),$===T){ur=null;break e}if(H!==null){H.return=K,ur=H;break e}ur=K}}}function gm(y){var S=U2(y);if(S!=null){if(typeof S.memoizedProps["data-testname"]!="string")throw Error(i(364));return S}if(y=zS(y),y===null)throw Error(i(362));return y.stateNode.current}function Ch(y,S){var T=y.tag;switch(S.$$typeof){case Um:if(y.type===S.value)return!0;break;case sc:e:{for(S=S.value,y=[y,0],T=0;T<y.length;){var $=y[T++],H=$.tag,K=y[T++],ge=S[K];if(H!==5&&H!==26&&H!==27||!Mm($)){for(;ge!=null&&Ch($,ge);)K++,ge=S[K];if(K===S.length){S=!0;break e}else for($=$.child;$!==null;)y.push($,K),$=$.sibling}}S=!1}return S;case Zi:if((T===5||T===26||T===27)&&G2(y.stateNode,S.value))return!0;break;case Cu:if((T===5||T===6||T===26||T===27)&&(y=V2(y),y!==null&&0<=y.indexOf(S.value)))return!0;break;case Xc:if((T===5||T===26||T===27)&&(y=y.memoizedProps["data-testname"],typeof y=="string"&&y.toLowerCase()===S.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function ES(y){switch(y.$$typeof){case Um:return"<"+(o(y.value)||"Unknown")+">";case sc:return":has("+(ES(y)||"")+")";case Zi:return'[role="'+y.value+'"]';case Cu:return'"'+y.value+'"';case Xc:return'[data-testname="'+y.value+'"]';default:throw Error(i(365))}}function Va(y,S){var T=[];y=[y,0];for(var $=0;$<y.length;){var H=y[$++],K=H.tag,ge=y[$++],De=S[ge];if(K!==5&&K!==26&&K!==27||!Mm(H)){for(;De!=null&&Ch(H,De);)ge++,De=S[ge];if(ge===S.length)T.push(H);else for(H=H.child;H!==null;)y.push(H,ge),H=H.sibling}}return T}function C0(y,S){if(!kh)throw Error(i(363));y=gm(y),y=Va(y,S),S=[],y=Array.from(y);for(var T=0;T<y.length;){var $=y[T++],H=$.tag;if(H===5||H===26||H===27)Mm($)||S.push($.stateNode);else for($=$.child;$!==null;)y.push($),$=$.sibling}return S}function Es(){if((Zr&2)!==0&&$r!==0)return $r&-$r;if(Qn.T!==null){var y=bl;return y!==0?y:ot()}return z2()}function AS(){Al===0&&(Al=($r&536870912)===0||jr?B():536870912);var y=xl.current;return y!==null&&(y.flags|=32),Al}function mo(y,S,T){(y===hi&&Ci===2||y.cancelPendingCommit!==null)&&(Oo(y,0),Ga(y,$r,Al,!1)),D(y,T),((Zr&2)===0||y!==hi)&&(y===hi&&((Zr&2)===0&&(Od|=T),ki===4&&Ga(y,$r,Al,!1)),at(y))}function Eh(y,S,T){if((Zr&6)!==0)throw Error(i(327));var $=!T&&(S&60)===0&&(S&y.expiredLanes)===0||R(y,S),H=$?MS(y,S):ab(y,S,!0),K=$;do{if(H===0){Cl&&!$&&Ga(y,S,0,!1);break}else if(H===6)Ga(y,S,0,!ac);else{if(T=y.current.alternate,K&&!ym(T)){H=ab(y,S,!1),K=!1;continue}if(H===2){if(K=S,y.errorRecoveryDisabledLanes&K)var ge=0;else ge=y.pendingLanes&-536870913,ge=ge!==0?ge:ge&536870912?536870912:0;if(ge!==0){S=ge;e:{var De=y;H=cp;var Qe=Bo&&De.current.memoizedState.isDehydrated;if(Qe&&(Oo(De,ge).flags|=256),ge=ab(De,ge,!1),ge!==2){if(ao&&!Qe){De.errorRecoveryDisabledLanes|=K,Od|=K,H=4;break e}K=vs,vs=H,K!==null&&E0(K)}H=ge}if(K=!1,H!==2)continue}}if(H===1){Oo(y,0),Ga(y,S,0,!0);break}e:{switch($=y,H){case 0:case 1:throw Error(i(345));case 4:if((S&4194176)===S){Ga($,S,Al,!ac);break e}break;case 2:vs=null;break;case 3:case 5:break;default:throw Error(i(329))}if($.finishedWork=T,$.finishedLanes=S,(S&62914560)===S&&(K=Ca+300-tc(),10<K)){if(Ga($,S,Al,!ac),M($,0)!==0)break e;$.timeoutHandle=zs(ob.bind(null,$,T,vs,q0,$b,S,Al,Od,Eu,ac,2,-0,0),K);break e}ob($,T,vs,q0,$b,S,Al,Od,Eu,ac,0,-0,0)}}break}while(!0);at(y)}function E0(y){vs===null?vs=y:vs.push.apply(vs,y)}function ob(y,S,T,$,H,K,ge,De,Qe,Dt,Jt,dn,gn){var dr=S.subtreeFlags;if((dr&8192||(dr&16785408)===16785408)&&(PS(),ib(S),S=Hs(),S!==null)){y.cancelPendingCommit=S(Th.bind(null,y,T,$,H,ge,De,Qe,1,dn,gn)),Ga(y,K,ge,!Dt);return}Th(y,T,$,H,ge,De,Qe,Jt,dn,gn)}function ym(y){for(var S=y;;){var T=S.tag;if((T===0||T===11||T===15)&&S.flags&16384&&(T=S.updateQueue,T!==null&&(T=T.stores,T!==null)))for(var $=0;$<T.length;$++){var H=T[$],K=H.getSnapshot;H=H.value;try{if(!ja(K(),H))return!1}catch{return!1}}if(T=S.child,S.subtreeFlags&16384&&T!==null)T.return=S,S=T;else{if(S===y)break;for(;S.sibling===null;){if(S.return===null||S.return===y)return!0;S=S.return}S.sibling.return=S.return,S=S.sibling}}return!0}function Ga(y,S,T,$){S&=~X0,S&=~Od,y.suspendedLanes|=S,y.pingedLanes&=~S,$&&(y.warmLanes|=S),$=y.expirationTimes;for(var H=S;0<H;){var K=31-wa(H),ge=1<<K;$[K]=-1,H&=~ge}T!==0&&G(y,T,S)}function A0(){return(Zr&6)===0?(Ut(0),!1):!0}function vm(){if(Gn!==null){if(Ci===0)var y=Gn.return;else y=Gn,wl=jc=null,se(y),Ph=null,Uh=0,y=Gn;for(;y!==null;)Qv(y.alternate,y),y=y.return;Gn=null}}function Oo(y,S){y.finishedWork=null,y.finishedLanes=0;var T=y.timeoutHandle;T!==Ih&&(y.timeoutHandle=Ih,gb(T)),T=y.cancelPendingCommit,T!==null&&(y.cancelPendingCommit=null,T()),vm(),hi=y,Gn=T=Jl(y.current,null),$r=S,Ci=0,Yo=null,ac=!1,Cl=R(y,S),ao=!1,Eu=Al=X0=Od=El=ki=0,vs=cp=null,$b=!1,(S&8)!==0&&(S|=S&32);var $=y.entangledLanes;if($!==0)for(y=y.entanglements,$&=S;0<$;){var H=31-wa($),K=1<<H;S|=y[H],$&=~K}return Jo=S,Le(),T}function fl(y,S){wr=null,Qn.H=gs,S===$m?(S=un(),Ci=3):S===W0?(S=un(),Ci=4):Ci=S===Ob?8:S!==null&&typeof S=="object"&&typeof S.then=="function"?6:1,Yo=S,Gn===null&&(ki=1,dl(y,Y(S,y.current)))}function Ah(){var y=xl.current;return y===null?!0:($r&4194176)===$r?Ii===null:($r&62914560)===$r||($r&536870912)!==0?y===Ii:!1}function hu(){var y=Qn.H;return Qn.H=gs,y===null?gs:y}function fu(){var y=Qn.A;return Qn.A=Pm,y}function Sd(){ki=4,ac||($r&4194176)!==$r&&xl.current!==null||(Cl=!0),(El&134217727)===0&&(Od&134217727)===0||hi===null||Ga(hi,$r,Al,!1)}function ab(y,S,T){var $=Zr;Zr|=2;var H=hu(),K=fu();(hi!==y||$r!==S)&&(q0=null,Oo(y,S)),S=!1;var ge=ki;e:do try{if(Ci!==0&&Gn!==null){var De=Gn,Qe=Yo;switch(Ci){case 8:vm(),ge=6;break e;case 3:case 2:case 6:xl.current===null&&(S=!0);var Dt=Ci;if(Ci=0,Yo=null,Yl(y,De,Qe,Dt),T&&Cl){ge=0;break e}break;default:Dt=Ci,Ci=0,Yo=null,Yl(y,De,Qe,Dt)}}TS(),ge=ki;break}catch(Jt){fl(y,Jt)}while(!0);return S&&y.shellSuspendCounter++,wl=jc=null,Zr=$,Qn.H=H,Qn.A=K,Gn===null&&(hi=null,$r=0,Le()),ge}function TS(){for(;Gn!==null;)cs(Gn)}function MS(y,S){var T=Zr;Zr|=2;var $=hu(),H=fu();hi!==y||$r!==S?(q0=null,zm=tc()+500,Oo(y,S)):Cl=R(y,S);e:do try{if(Ci!==0&&Gn!==null){S=Gn;var K=Yo;t:switch(Ci){case 1:Ci=0,Yo=null,Yl(y,S,K,1);break;case 2:if(en(K)){Ci=0,Yo=null,ni(S);break}S=function(){Ci===2&&hi===y&&(Ci=7),at(y)},K.then(S,S);break e;case 3:Ci=7;break e;case 4:Ci=5;break e;case 7:en(K)?(Ci=0,Yo=null,ni(S)):(Ci=0,Yo=null,Yl(y,S,K,7));break;case 5:var ge=null;switch(Gn.tag){case 26:ge=Gn.memoizedState;case 5:case 27:var De=Gn,Qe=De.type,Dt=De.pendingProps;if(ge?Kf(ge):yb(Qe,Dt)){Ci=0,Yo=null;var Jt=De.sibling;if(Jt!==null)Gn=Jt;else{var dn=De.return;dn!==null?(Gn=dn,pl(dn)):Gn=null}break t}}Ci=0,Yo=null,Yl(y,S,K,5);break;case 6:Ci=0,Yo=null,Yl(y,S,K,6);break;case 8:vm(),ki=6;break e;default:throw Error(i(462))}}ba();break}catch(gn){fl(y,gn)}while(!0);return wl=jc=null,Qn.H=$,Qn.A=H,Zr=T,Gn!==null?0:(hi=null,$r=0,Le(),ki)}function ba(){for(;Gn!==null&&!SA();)cs(Gn)}function cs(y){var S=b0(y.alternate,y,Jo);y.memoizedProps=y.pendingProps,S===null?pl(y):Gn=S}function ni(y){var S=y,T=S.alternate;switch(S.tag){case 15:case 0:S=Xv(T,S,S.pendingProps,S.type,void 0,$r);break;case 11:S=Xv(T,S,S.pendingProps,S.type.render,S.ref,$r);break;case 5:se(S);default:Qv(T,S),S=Gn=M0(S,Jo),S=b0(T,S,Jo)}y.memoizedProps=y.pendingProps,S===null?pl(y):Gn=S}function Yl(y,S,T,$){wl=jc=null,se(S),Ph=null,Uh=0;var H=S.return;try{if(hm(y,H,S,T,$r)){ki=1,dl(y,Y(T,y.current)),Gn=null;return}}catch(K){if(H!==null)throw Gn=H,K;ki=1,dl(y,Y(T,y.current)),Gn=null;return}S.flags&32768?(jr||$===1?y=!0:Cl||($r&536870912)!==0?y=!1:(ac=y=!0,($===2||$===3||$===6)&&($=xl.current,$!==null&&$.tag===13&&($.flags|=16384))),lb(S,y)):pl(S)}function pl(y){var S=y;do{if((S.flags&32768)!==0){lb(S,ac);return}y=S.return;var T=Zv(S.alternate,S,Jo);if(T!==null){Gn=T;return}if(S=S.sibling,S!==null){Gn=S;return}Gn=S=y}while(S!==null);ki===0&&(ki=5)}function lb(y,S){do{var T=gS(y.alternate,y);if(T!==null){T.flags&=32767,Gn=T;return}if(T=y.return,T!==null&&(T.flags|=32768,T.subtreeFlags=0,T.deletions=null),!S&&(y=y.sibling,y!==null)){Gn=y;return}Gn=y=T}while(y!==null);ki=6,Gn=null}function Th(y,S,T,$,H,K,ge,De,Qe,Dt){var Jt=Qn.T,dn=Td();try{Ko(2),Qn.T=null,B2(y,S,T,$,dn,H,K,ge,De,Qe,Dt)}finally{Qn.T=Jt,Ko(dn)}}function B2(y,S,T,$,H,K,ge,De){do Fc();while(Au!==null);if((Zr&6)!==0)throw Error(i(327));var Qe=y.finishedWork;if($=y.finishedLanes,Qe===null)return null;if(y.finishedWork=null,y.finishedLanes=0,Qe===y.current)throw Error(i(177));y.callbackNode=null,y.callbackPriority=0,y.cancelPendingCommit=null;var Dt=Qe.lanes|Qe.childLanes;if(Dt|=Gc,P(y,$,Dt,K,ge,De),y===hi&&(Gn=hi=null,$r=0),(Qe.subtreeFlags&10256)===0&&(Qe.flags&10256)===0||qc||(qc=!0,Wh=Dt,Lb=T,_d(Nb,function(){return Fc(),null})),T=(Qe.flags&15990)!==0,(Qe.subtreeFlags&15990)!==0||T?(T=Qn.T,Qn.T=null,K=Td(),Ko(2),ge=Zr,Zr|=4,S0(y,Qe),wS(Qe,y),P2(y.containerInfo),y.current=Qe,tb(y,Qe.alternate,Qe),Mb(),Zr=ge,Ko(K),Qn.T=T):y.current=Qe,qc?(qc=!1,Au=y,up=$):RS(y,Dt),Dt=y.pendingLanes,Dt===0&&(Gh=null),z(Qe.stateNode),at(y),S!==null)for(H=y.onRecoverableError,Qe=0;Qe<S.length;Qe++)Dt=S[Qe],H(Dt.value,{componentStack:Dt.stack});return(up&3)!==0&&Fc(),Dt=y.pendingLanes,($&4194218)!==0&&(Dt&42)!==0?y===Fb?Hm++:(Hm=0,Fb=y):Hm=0,Ut(0),null}function RS(y,S){(y.pooledCacheLanes&=S)===0&&(S=y.pooledCache,S!=null&&(y.pooledCache=null,Zt(S)))}function Fc(){if(Au!==null){var y=Au,S=Wh;Wh=0;var T=q(up),$=32>T?32:T;T=Qn.T;var H=Td();try{if(Ko($),Qn.T=null,Au===null)var K=!1;else{$=Lb,Lb=null;var ge=Au,De=up;if(Au=null,up=0,(Zr&6)!==0)throw Error(i(331));var Qe=Zr;if(Zr|=4,sb(ge.current),_S(ge,ge.current,De,$),Zr=Qe,Ut(0,!1),Wa&&typeof Wa.onPostCommitFiberRoot=="function")try{Wa.onPostCommitFiberRoot(Ms,ge)}catch{}K=!0}return K}finally{Ko(H),Qn.T=T,RS(y,S)}}return!1}function bm(y,S,T){S=Y(T,S),S=pd(y.stateNode,S,2),y=Mt(y,S,2),y!==null&&(D(y,2),at(y))}function ui(y,S,T){if(y.tag===3)bm(y,y,T);else for(;S!==null;){if(S.tag===3){bm(S,y,T);break}else if(S.tag===1){var $=S.stateNode;if(typeof S.type.getDerivedStateFromError=="function"||typeof $.componentDidCatch=="function"&&(Gh===null||!Gh.has($))){y=Y(T,y),T=c0(2),$=Mt(S,T,2),$!==null&&(u0(T,$,S,y),D($,2),at($));break}}S=S.return}}function jf(y,S,T){var $=y.pingCache;if($===null){$=y.pingCache=new oc;var H=new Set;$.set(S,H)}else H=$.get(S),H===void 0&&(H=new Set,$.set(S,H));H.has(T)||(ao=!0,H.add(T),y=NS.bind(null,y,S,T),S.then(y,y))}function NS(y,S,T){var $=y.pingCache;$!==null&&$.delete(S),y.pingedLanes|=y.suspendedLanes&T,y.warmLanes&=~T,hi===y&&($r&T)===T&&(ki===4||ki===3&&($r&62914560)===$r&&300>tc()-Ca?(Zr&2)===0&&Oo(y,0):X0|=T,Eu===$r&&(Eu=0)),at(y)}function Mh(y,S){S===0&&(S=N()),y=je(y,S),y!==null&&(D(y,S),at(y))}function wd(y){var S=y.memoizedState,T=0;S!==null&&(T=S.retryLane),Mh(y,T)}function Rh(y,S){var T=0;switch(y.tag){case 13:var $=y.stateNode,H=y.memoizedState;H!==null&&(T=H.retryLane);break;case 19:$=y.stateNode;break;case 22:$=y.stateNode._retryCache;break;default:throw Error(i(314))}$!==null&&$.delete(S),Mh(y,T)}function _d(y,S){return H0(y,S)}function IS(y,S,T,$){this.tag=y,this.key=T,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=S,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=$,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function T0(y){return y=y.prototype,!(!y||!y.isReactComponent)}function Jl(y,S){var T=y.alternate;return T===null?(T=t(y.tag,S,y.key,y.mode),T.elementType=y.elementType,T.type=y.type,T.stateNode=y.stateNode,T.alternate=y,y.alternate=T):(T.pendingProps=S,T.type=y.type,T.flags=0,T.subtreeFlags=0,T.deletions=null),T.flags=y.flags&31457280,T.childLanes=y.childLanes,T.lanes=y.lanes,T.child=y.child,T.memoizedProps=y.memoizedProps,T.memoizedState=y.memoizedState,T.updateQueue=y.updateQueue,S=y.dependencies,T.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext},T.sibling=y.sibling,T.index=y.index,T.ref=y.ref,T.refCleanup=y.refCleanup,T}function M0(y,S){y.flags&=31457282;var T=y.alternate;return T===null?(y.childLanes=0,y.lanes=S,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=T.childLanes,y.lanes=T.lanes,y.child=T.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=T.memoizedProps,y.memoizedState=T.memoizedState,y.updateQueue=T.updateQueue,y.type=T.type,S=T.dependencies,y.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext}),y}function pu(y,S,T,$,H,K){var ge=0;if($=y,typeof y=="function")T0(y)&&(ge=1);else if(typeof y=="string")ge=gl&&Ni?P0(y,T,so.current)?26:gu(y)?27:5:gl?P0(y,T,so.current)?26:5:Ni&&gu(y)?27:5;else e:switch(y){case Nh:return ms(T.children,H,K,S);case D0:ge=8,H|=24;break;case hb:return y=t(12,T,S,H|2),y.elementType=hb,y.lanes=K,y;case fb:return y=t(13,T,S,H),y.elementType=fb,y.lanes=K,y;case _m:return y=t(19,T,S,H),y.elementType=_m,y.lanes=K,y;case OS:return R0(T,H,K,S);default:if(typeof y=="object"&&y!==null)switch(y.$$typeof){case k0:case Pc:ge=10;break e;case kS:ge=9;break e;case O0:ge=11;break e;case pb:ge=14;break e;case Ql:ge=16,$=null;break e}ge=29,T=Error(i(130,y===null?"null":typeof y,"")),$=null}return S=t(ge,T,S,H),S.elementType=y,S.type=$,S.lanes=K,S}function ms(y,S,T,$){return y=t(7,y,$,S),y.lanes=T,y}function R0(y,S,T,$){y=t(22,y,$,S),y.elementType=OS,y.lanes=T;var H={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var K=H._current;if(K===null)throw Error(i(456));if((H._pendingVisibility&2)===0){var ge=je(K,2);ge!==null&&(H._pendingVisibility|=2,mo(ge,K,2))}},attach:function(){var K=H._current;if(K===null)throw Error(i(456));if((H._pendingVisibility&2)!==0){var ge=je(K,2);ge!==null&&(H._pendingVisibility&=-3,mo(ge,K,2))}}};return y.stateNode=H,y}function cb(y,S,T){return y=t(6,y,null,S),y.lanes=T,y}function DS(y,S,T){return S=t(4,y.children!==null?y.children:[],y.key,S),S.lanes=T,S.stateNode={containerInfo:y.containerInfo,pendingChildren:null,implementation:y.implementation},S}function yk(y,S,T,$,H,K,ge,De){this.tag=1,this.containerInfo=y,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ih,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=I(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I(0),this.hiddenUpdates=I(null),this.identifierPrefix=$,this.onUncaughtError=H,this.onCaughtError=K,this.onRecoverableError=ge,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=De,this.incompleteTransitions=new Map}function $2(y,S,T,$,H,K,ge,De,Qe,Dt,Jt,dn){return y=new yk(y,S,T,ge,De,Qe,Dt,dn),S=1,K===!0&&(S|=24),K=t(3,null,null,S),y.current=K,K.stateNode=y,S=Ht(),S.refCount++,y.pooledCache=S,S.refCount++,K.memoizedState={element:$,isDehydrated:T,cache:S},Ct(K),y}function Us(y){return y?(y=$h,y):$h}function ub(y){var S=y._reactInternals;if(S===void 0)throw typeof y.render=="function"?Error(i(188)):(y=Object.keys(y).join(","),Error(i(268,y)));return y=p(S),y=y!==null?g(y):null,y===null?null:Am(y.stateNode)}function xm(y,S,T,$,H,K){H=Us(H),$.context===null?$.context=H:$.pendingContext=H,$=yt(S),$.payload={element:T},K=K===void 0?null:K,K!==null&&($.callback=K),T=Mt(y,$,S),T!==null&&(mo(T,y,S),on(T,y,S))}function Sm(y,S){if(y=y.memoizedState,y!==null&&y.dehydrated!==null){var T=y.retryLane;y.retryLane=T!==0&&T<S?T:S}}function N0(y,S){Sm(y,S),(y=y.alternate)&&Sm(y,S)}var pr={},wm=Mv(),ml=BGe(),db=Object.assign,vk=Symbol.for("react.element"),I0=Symbol.for("react.transitional.element"),Zl=Symbol.for("react.portal"),Nh=Symbol.for("react.fragment"),D0=Symbol.for("react.strict_mode"),hb=Symbol.for("react.profiler"),k0=Symbol.for("react.provider"),kS=Symbol.for("react.consumer"),Pc=Symbol.for("react.context"),O0=Symbol.for("react.forward_ref"),fb=Symbol.for("react.suspense"),_m=Symbol.for("react.suspense_list"),pb=Symbol.for("react.memo"),Ql=Symbol.for("react.lazy"),OS=Symbol.for("react.offscreen"),L2=Symbol.for("react.memo_cache_sentinel"),Cd=Symbol.iterator,BS=Symbol.for("react.client.reference"),Qn=wm.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,mu,Ed,Xf=!1,Cm=Array.isArray,$S=e.rendererVersion,B0=e.rendererPackageName,Em=e.extraDevToolsConfig,Am=e.getPublicInstance,F2=e.getRootHostContext,Tm=e.getChildHostContext,mb=e.prepareForCommit,P2=e.resetAfterCommit,LS=e.createInstance,$0=e.appendInitialChild,Ad=e.finalizeInitialChildren,mr=e.shouldSetTextContent,gi=e.createTextInstance,zs=e.scheduleTimeout,gb=e.cancelTimeout,Ih=e.noTimeout,xa=e.isPrimaryRenderer;e.warnsIfNotActing;var io=e.supportsMutation,ec=e.supportsPersistence,Bo=e.supportsHydration,U2=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var As=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Ko=e.setCurrentUpdatePriority,Td=e.getCurrentUpdatePriority,z2=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var H2=e.shouldAttemptEagerTransition,bk=e.detachDeletedInstance;e.requestPostPaintCallback;var FS=e.maySuspendCommit,yb=e.preloadInstance,PS=e.startSuspendingCommit,Sa=e.suspendInstance,Hs=e.waitForCommitToBeReady,Dh=e.NotPendingTransition,Uc=e.HostTransitionContext,vb=e.resetFormInstance;e.bindToConsole;var US=e.supportsMicrotasks,Md=e.scheduleMicrotask,kh=e.supportsTestSelectors,zS=e.findFiberRoot,HS=e.getBoundingRect,V2=e.getTextContent,Mm=e.isHiddenSubtree,G2=e.matchAccessibilityRole,W2=e.setFocusIfFocusable,j2=e.setupIntersectionObserver,X2=e.appendChild,VS=e.appendChildToContainer,q2=e.commitTextUpdate,xk=e.commitMount,K2=e.commitUpdate,Y2=e.insertBefore,J2=e.insertInContainerBefore,GS=e.removeChild,Z2=e.removeChildFromContainer,WS=e.resetTextContent,Q2=e.hideInstance,eA=e.hideTextInstance,tA=e.unhideInstance,Sk=e.unhideTextInstance,nA=e.clearContainer,Rm=e.cloneInstance,L0=e.createContainerChildSet,jS=e.appendChildToContainerChildSet,bb=e.finalizeContainerChildren,Nm=e.replaceContainerChildren,XS=e.cloneHiddenInstance,qS=e.cloneHiddenTextInstance,xb=e.isSuspenseInstancePending,Sb=e.isSuspenseInstanceFallback,rA=e.getSuspenseInstanceFallbackErrorDetails,iA=e.registerSuspenseInstanceRetry,KS=e.canHydrateFormStateMarker,sA=e.isFormStateMarkerMatching,YS=e.getNextHydratableSibling,wb=e.getFirstHydratableChild,oA=e.getFirstHydratableChildWithinContainer,aA=e.getFirstHydratableChildWithinSuspenseInstance,wk=e.canHydrateInstance,JS=e.canHydrateTextInstance,lA=e.canHydrateSuspenseInstance,cA=e.hydrateInstance,ZS=e.hydrateTextInstance,uA=e.hydrateSuspenseInstance,dA=e.getNextHydratableInstanceAfterSuspenseInstance,_k=e.commitHydratedContainer,Ck=e.commitHydratedSuspenseInstance,hA=e.clearSuspenseBoundary,F0=e.clearSuspenseBoundaryFromContainer,_b=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Cb=e.validateHydratableInstance,fA=e.validateHydratableTextInstance,gl=e.supportsResources,P0=e.isHostHoistableType,Eb=e.getHoistableRoot,QS=e.getResource,pA=e.acquireResource,qf=e.releaseResource,U0=e.hydrateHoistable,z0=e.mountHoistable,Im=e.unmountHoistable,Ab=e.createHoistableInstance,mA=e.prepareToCommitHoistables,gA=e.mayResourceSuspendCommit,Kf=e.preloadResource,yA=e.suspendResource,Ni=e.supportsSingletons,zc=e.resolveSingletonInstance,Oh=e.clearSingleton,vA=e.acquireSingletonInstance,Bh=e.releaseSingletonInstance,gu=e.isHostSingletonType,Ts=[],Rd=-1,$h={},wa=Math.clz32?Math.clz32:E,bA=Math.log,xA=Math.LN2,yu=128,Yf=4194304,H0=ml.unstable_scheduleCallback,Tb=ml.unstable_cancelCallback,SA=ml.unstable_shouldYield,Mb=ml.unstable_requestPaint,tc=ml.unstable_now,Rb=ml.unstable_ImmediatePriority,wA=ml.unstable_UserBlockingPriority,Nb=ml.unstable_NormalPriority,Ek=ml.unstable_IdlePriority,_A=ml.log,go=ml.unstable_setDisableYieldValue,Ms=null,Wa=null,ja=typeof Object.is=="function"?Object.is:Q,ew=new WeakMap,Jf=[],Zf=0,Qf=null,Dm=0,yl=[],vl=0,Lh=null,Hc=1,Vc="",so=b(null),km=b(null),vu=b(null),ep=b(null),$o=null,Lo=null,jr=!1,nc=null,yo=!1,V0=Error(i(519)),rc=[],tp=0,Gc=0,G0=null,Nd=null,np=!1,Ui=!1,tw=!1,Om=0,Bm=null,rp=0,bl=0,ip=null,Id=!1,sp=!1,bu=Object.prototype.hasOwnProperty,$m=Error(i(460)),W0=Error(i(474)),j0={then:function(){}},Fh=null,Ph=null,Uh=0,zh=ns(!0),xu=ns(!1),zi=b(null),Lm=b(0),xl=b(null),Ii=null,oo=b(0),Dd=0,wr=null,Vn=null,Jr=null,ic=!1,op=!1,Hh=!1,Ib=0,ap=0,vo=null,Wc=0,Db=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},gs={readContext:_e,use:Ce,useCallback:ci,useContext:ci,useEffect:ci,useImperativeHandle:ci,useLayoutEffect:ci,useInsertionEffect:ci,useMemo:ci,useReducer:ci,useRef:ci,useState:ci,useDebugValue:ci,useDeferredValue:ci,useTransition:ci,useSyncExternalStore:ci,useId:ci};gs.useCacheRefresh=ci,gs.useMemoCache=ci,gs.useHostTransitionStatus=ci,gs.useFormState=ci,gs.useActionState=ci,gs.useOptimistic=ci;var Vh={readContext:_e,use:Ce,useCallback:function(y,S){return Se().memoizedState=[y,S===void 0?null:S],y},useContext:_e,useEffect:Pf,useImperativeHandle:function(y,S,T){T=T!=null?T.concat([y]):null,uu(4194308,4,cm.bind(null,S,y),T)},useLayoutEffect:function(y,S){return uu(4194308,4,y,S)},useInsertionEffect:function(y,S){uu(4,2,y,S)},useMemo:function(y,S){var T=Se();S=S===void 0?null:S;var $=y();if(Hh){J(!0);try{y()}finally{J(!1)}}return T.memoizedState=[$,S],$},useReducer:function(y,S,T){var $=Se();if(T!==void 0){var H=T(S);if(Hh){J(!0);try{T(S)}finally{J(!1)}}}else H=S;return $.memoizedState=$.baseState=H,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:H},$.queue=y,y=y.dispatch=dm.bind(null,wr,y),[$.memoizedState,y]},useRef:function(y){var S=Se();return y={current:y},S.memoizedState=y},useState:function(y){y=yn(y);var S=y.queue,T=l0.bind(null,wr,S);return S.dispatch=T,[y.memoizedState,T]},useDebugValue:Xl,useDeferredValue:function(y,S){var T=Se();return zf(T,y,S)},useTransition:function(){var y=yn(!1);return y=bh.bind(null,wr,y.queue,!0,!1),Se().memoizedState=y,[!1,y]},useSyncExternalStore:function(y,S,T){var $=wr,H=Se();if(jr){if(T===void 0)throw Error(i(407));T=T()}else{if(T=S(),hi===null)throw Error(i(349));($r&60)!==0||Wt($,S,T)}H.memoizedState=T;var K={value:T,getSnapshot:S};return H.queue=K,Pf(Hn.bind(null,$,K,y),[y]),$.flags|=2048,ps(9,bn.bind(null,$,K,T,S),{destroy:void 0},null),T},useId:function(){var y=Se(),S=hi.identifierPrefix;if(jr){var T=Vc,$=Hc;T=($&~(1<<32-wa($)-1)).toString(32)+T,S=":"+S+"R"+T,T=Ib++,0<T&&(S+="H"+T.toString(32)),S+=":"}else T=Wc++,S=":"+S+"r"+T.toString(32)+":";return y.memoizedState=S},useCacheRefresh:function(){return Se().memoizedState=ma.bind(null,wr)}};Vh.useMemoCache=It,Vh.useHostTransitionStatus=xh,Vh.useFormState=Wr,Vh.useActionState=Wr,Vh.useOptimistic=function(y){var S=Se();S.memoizedState=S.baseState=y;var T={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return S.queue=T,S=ud.bind(null,wr,!0,T),T.dispatch=S,[y,S]};var _a={readContext:_e,use:Ce,useCallback:ul,useContext:_e,useEffect:ld,useImperativeHandle:um,useInsertionEffect:Wv,useLayoutEffect:Uf,useMemo:o0,useReducer:Tt,useRef:s0,useState:function(){return Tt(vt)},useDebugValue:Xl,useDeferredValue:function(y,S){var T=Ae();return a0(T,Vn.memoizedState,y,S)},useTransition:function(){var y=Tt(vt)[0],S=Ae().memoizedState;return[typeof y=="boolean"?y:Me(y),S]},useSyncExternalStore:Qt,useId:cd};_a.useCacheRefresh=pa,_a.useMemoCache=It,_a.useHostTransitionStatus=xh,_a.useFormState=wi,_a.useActionState=wi,_a.useOptimistic=function(y,S){var T=Ae();return ln(T,Vn,y,S)};var Sl={readContext:_e,use:Ce,useCallback:ul,useContext:_e,useEffect:ld,useImperativeHandle:um,useInsertionEffect:Wv,useLayoutEffect:Uf,useMemo:o0,useReducer:Xt,useRef:s0,useState:function(){return Xt(vt)},useDebugValue:Xl,useDeferredValue:function(y,S){var T=Ae();return Vn===null?zf(T,y,S):a0(T,Vn.memoizedState,y,S)},useTransition:function(){var y=Xt(vt)[0],S=Ae().memoizedState;return[typeof y=="boolean"?y:Me(y),S]},useSyncExternalStore:Qt,useId:cd};Sl.useCacheRefresh=pa,Sl.useMemoCache=It,Sl.useHostTransitionStatus=xh,Sl.useFormState=ad,Sl.useActionState=ad,Sl.useOptimistic=function(y,S){var T=Ae();return Vn!==null?ln(T,Vn,y,S):(T.baseState=y,[y,T.queue.dispatch])};var Su={isMounted:function(y){return(y=y._reactInternals)?d(y)===y:!1},enqueueSetState:function(y,S,T){y=y._reactInternals;var $=Es(),H=yt($);H.payload=S,T!=null&&(H.callback=T),S=Mt(y,H,$),S!==null&&(mo(S,y,$),on(S,y,$))},enqueueReplaceState:function(y,S,T){y=y._reactInternals;var $=Es(),H=yt($);H.tag=1,H.payload=S,T!=null&&(H.callback=T),S=Mt(y,H,$),S!==null&&(mo(S,y,$),on(S,y,$))},enqueueForceUpdate:function(y,S){y=y._reactInternals;var T=Es(),$=yt(T);$.tag=2,S!=null&&($.callback=S),S=Mt(y,$,T),S!==null&&(mo(S,y,T),on(S,y,T))}},kb=typeof reportError=="function"?reportError:function(y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var S=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof y=="object"&&y!==null&&typeof y.message=="string"?String(y.message):String(y),error:y});if(!window.dispatchEvent(S))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",y);return}console.error(y)},Ob=Error(i(461)),Di=!1,Bb={dehydrated:null,treeContext:null,retryLane:0},kd=b(null),jc=null,wl=null,Fm=typeof AbortController<"u"?AbortController:function(){var y=[],S=this.signal={aborted:!1,addEventListener:function(T,$){y.push($)}};this.abort=function(){S.aborted=!0,y.forEach(function(T){return T()})}},CA=ml.unstable_scheduleCallback,EA=ml.unstable_NormalPriority,Hi={$$typeof:Pc,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},nw=Qn.S;Qn.S=function(y,S){typeof S=="object"&&S!==null&&typeof S.then=="function"&&et(y,S),nw!==null&&nw(y,S)};var wu=b(null),_u=!1,ys=!1,rw=!1,di=typeof WeakSet=="function"?WeakSet:Set,ur=null,Nr=!1,Fn=null,br=!1,us=null,_l=8192,Pm={getCacheForType:function(y){var S=_e(Hi),T=S.data.get(y);return T===void 0&&(T=y(),S.data.set(y,T)),T}},Um=0,sc=1,Zi=2,Xc=3,Cu=4;if(typeof Symbol=="function"&&Symbol.for){var lp=Symbol.for;Um=lp("selector.component"),sc=lp("selector.has_pseudo_class"),Zi=lp("selector.role"),Xc=lp("selector.test_id"),Cu=lp("selector.text")}var oc=typeof WeakMap=="function"?WeakMap:Map,Zr=0,hi=null,Gn=null,$r=0,Ci=0,Yo=null,ac=!1,Cl=!1,ao=!1,Jo=0,ki=0,El=0,Od=0,X0=0,Al=0,Eu=0,cp=null,vs=null,$b=!1,Ca=0,zm=1/0,q0=null,Gh=null,qc=!1,Au=null,up=0,Wh=0,Lb=null,Hm=0,Fb=null;return pr.attemptContinuousHydration=function(y){if(y.tag===13){var S=je(y,67108864);S!==null&&mo(S,y,67108864),N0(y,67108864)}},pr.attemptHydrationAtCurrentPriority=function(y){if(y.tag===13){var S=Es(),T=je(y,S);T!==null&&mo(T,y,S),N0(y,S)}},pr.attemptSynchronousHydration=function(y){switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=C(y.pendingLanes);if(S!==0){for(y.pendingLanes|=2,y.entangledLanes|=2;S;){var T=1<<31-wa(S);y.entanglements[1]|=T,S&=~T}at(y),(Zr&6)===0&&(zm=tc()+500,Ut(0))}}break;case 13:S=je(y,2),S!==null&&mo(S,y,2),A0(),N0(y,2)}},pr.batchedUpdates=function(y,S){return y(S)},pr.createComponentSelector=function(y){return{$$typeof:Um,value:y}},pr.createContainer=function(y,S,T,$,H,K,ge,De,Qe,Dt){return $2(y,S,!1,null,T,$,K,ge,De,Qe,Dt,null)},pr.createHasPseudoClassSelector=function(y){return{$$typeof:sc,value:y}},pr.createHydrationContainer=function(y,S,T,$,H,K,ge,De,Qe,Dt,Jt,dn,gn){return y=$2(T,$,!0,y,H,K,De,Qe,Dt,Jt,dn,gn),y.context=Us(null),T=y.current,$=Es(),H=yt($),H.callback=S??null,Mt(T,H,$),y.current.lanes=$,D(y,$),at(y),y},pr.createPortal=function(y,S,T){var $=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zl,key:$==null?null:""+$,children:y,containerInfo:S,implementation:T}},pr.createRoleSelector=function(y){return{$$typeof:Zi,value:y}},pr.createTestNameSelector=function(y){return{$$typeof:Xc,value:y}},pr.createTextSelector=function(y){return{$$typeof:Cu,value:y}},pr.defaultOnCaughtError=function(y){console.error(y)},pr.defaultOnRecoverableError=function(y){kb(y)},pr.defaultOnUncaughtError=function(y){kb(y)},pr.deferredUpdates=function(y){var S=Qn.T,T=Td();try{return Ko(32),Qn.T=null,y()}finally{Ko(T),Qn.T=S}},pr.discreteUpdates=function(y,S,T,$,H){var K=Qn.T,ge=Td();try{return Ko(2),Qn.T=null,y(S,T,$,H)}finally{Ko(ge),Qn.T=K,Zr===0&&(zm=tc()+500)}},pr.findAllNodes=C0,pr.findBoundingRects=function(y,S){if(!kh)throw Error(i(363));S=C0(y,S),y=[];for(var T=0;T<S.length;T++)y.push(HS(S[T]));for(S=y.length-1;0<S;S--){T=y[S];for(var $=T.x,H=$+T.width,K=T.y,ge=K+T.height,De=S-1;0<=De;De--)if(S!==De){var Qe=y[De],Dt=Qe.x,Jt=Dt+Qe.width,dn=Qe.y,gn=dn+Qe.height;if($>=Dt&&K>=dn&&H<=Jt&&ge<=gn){y.splice(S,1);break}else if($!==Dt||T.width!==Qe.width||gn<K||dn>ge){if(!(K!==dn||T.height!==Qe.height||Jt<$||Dt>H)){Dt>$&&(Qe.width+=Dt-$,Qe.x=$),Jt<H&&(Qe.width=H-Dt),y.splice(S,1);break}}else{dn>K&&(Qe.height+=dn-K,Qe.y=K),gn<ge&&(Qe.height=ge-dn),y.splice(S,1);break}}}return y},pr.findHostInstance=ub,pr.findHostInstanceWithNoPortals=function(y){return y=p(y),y=y!==null?v(y):null,y===null?null:Am(y.stateNode)},pr.findHostInstanceWithWarning=function(y){return ub(y)},pr.flushPassiveEffects=Fc,pr.flushSyncFromReconciler=function(y){var S=Zr;Zr|=1;var T=Qn.T,$=Td();try{if(Ko(2),Qn.T=null,y)return y()}finally{Ko($),Qn.T=T,Zr=S,(Zr&6)===0&&Ut(0)}},pr.flushSyncWork=A0,pr.focusWithin=function(y,S){if(!kh)throw Error(i(363));for(y=gm(y),S=Va(y,S),S=Array.from(S),y=0;y<S.length;){var T=S[y++],$=T.tag;if(!Mm(T)){if(($===5||$===26||$===27)&&W2(T.stateNode))return!0;for(T=T.child;T!==null;)S.push(T),T=T.sibling}}return!1},pr.getFindAllNodesFailureDescription=function(y,S){if(!kh)throw Error(i(363));var T=0,$=[];y=[gm(y),0];for(var H=0;H<y.length;){var K=y[H++],ge=K.tag,De=y[H++],Qe=S[De];if((ge!==5&&ge!==26&&ge!==27||!Mm(K))&&(Ch(K,Qe)&&($.push(ES(Qe)),De++,De>T&&(T=De)),De<S.length))for(K=K.child;K!==null;)y.push(K,De),K=K.sibling}if(T<S.length){for(y=[];T<S.length;T++)y.push(ES(S[T]));return`findAllNodes was able to match part of the selector:
  `+($.join(" > ")+`

No matching component was found for:
  `)+y.join(" > ")}return null},pr.getPublicRootInstance=function(y){if(y=y.current,!y.child)return null;switch(y.child.tag){case 27:case 5:return Am(y.child.stateNode);default:return y.child.stateNode}},pr.injectIntoDevTools=function(){var y={bundleType:0,version:$S,rendererPackageName:B0,currentDispatcherRef:Qn,findFiberByHostInstance:U2,reconcilerVersion:"19.0.0"};if(Em!==null&&(y.rendererConfig=Em),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")y=!1;else{var S=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(S.isDisabled||!S.supportsFiber)y=!0;else{try{Ms=S.inject(y),Wa=S}catch{}y=!!S.checkDCE}}return y},pr.isAlreadyRendering=function(){return!1},pr.observeVisibleRects=function(y,S,T,$){if(!kh)throw Error(i(363));y=C0(y,S);var H=j2(y,T,$).disconnect;return{disconnect:function(){H()}}},pr.shouldError=function(){return null},pr.shouldSuspend=function(){return!1},pr.startHostTransition=function(y,S,T,$){if(y.tag!==5)throw Error(i(476));var H=Pa(y).queue;bh(y,H,S,Dh,T===null?r:function(){var K=Pa(y).next.queue;return Oc(y,K,{},Es()),T($)})},pr.updateContainer=function(y,S,T,$){var H=S.current,K=Es();return xm(H,K,y,S,T,$),K},pr.updateContainerSync=function(y,S,T,$){return S.tag===0&&Fc(),xm(S.current,2,y,S,T,$),2},pr},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})}(NB)),NB.exports}var O9;function LGe(){return O9||(O9=1,RB.exports=$Ge()),RB.exports}var FGe=LGe();const PGe=Zp(FGe);var kB={exports:{}},OB={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B9;function UGe(){return B9||(B9=1,function(n){function e(z,J){var Q=z.length;z.push(J);e:for(;0<Q;){var Y=Q-1>>>1,X=z[Y];if(0<i(X,J))z[Y]=J,z[Q]=X,Q=Y;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var J=z[0],Q=z.pop();if(Q!==J){z[0]=Q;e:for(var Y=0,X=z.length,te=X>>>1;Y<te;){var ne=2*(Y+1)-1,le=z[ne],ye=ne+1,ue=z[ye];if(0>i(le,Q))ye<X&&0>i(ue,le)?(z[Y]=ue,z[ye]=Q,Y=ye):(z[Y]=le,z[ne]=Q,Y=ne);else if(ye<X&&0>i(ue,Q))z[Y]=ue,z[ye]=Q,Y=ye;else break e}}return J}function i(z,J){var Q=z.sortIndex-J.sortIndex;return Q!==0?Q:z.id-J.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,g=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function E(z){for(var J=t(c);J!==null;){if(J.callback===null)r(c);else if(J.startTime<=z)r(c),J.sortIndex=J.expirationTime,e(l,J);else break;J=t(c)}}function C(z){if(v=!1,E(z),!g)if(t(l)!==null)g=!0,W();else{var J=t(c);J!==null&&q(C,J.startTime-z)}}var M=!1,R=-1,L=5,B=-1;function N(){return!(n.unstable_now()-B<L)}function I(){if(M){var z=n.unstable_now();B=z;var J=!0;try{e:{g=!1,v&&(v=!1,x(R),R=-1),p=!0;var Q=f;try{t:{for(E(z),d=t(l);d!==null&&!(d.expirationTime>z&&N());){var Y=d.callback;if(typeof Y=="function"){d.callback=null,f=d.priorityLevel;var X=Y(d.expirationTime<=z);if(z=n.unstable_now(),typeof X=="function"){d.callback=X,E(z),J=!0;break t}d===t(l)&&r(l),E(z)}else r(l);d=t(l)}if(d!==null)J=!0;else{var te=t(c);te!==null&&q(C,te.startTime-z),J=!1}}break e}finally{d=null,f=Q,p=!1}J=void 0}}finally{J?D():M=!1}}}var D;if(typeof _=="function")D=function(){_(I)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,G=P.port2;P.port1.onmessage=I,D=function(){G.postMessage(null)}}else D=function(){b(I,0)};function W(){M||(M=!0,D())}function q(z,J){R=b(function(){z(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){g||p||(g=!0,W())},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(z){switch(f){case 1:case 2:case 3:var J=3;break;default:J=f}var Q=f;f=J;try{return z()}finally{f=Q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,J){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=f;f=z;try{return J()}finally{f=Q}},n.unstable_scheduleCallback=function(z,J,Q){var Y=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?Y+Q:Y):Q=Y,z){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=Q+X,z={id:u++,callback:J,priorityLevel:z,startTime:Q,expirationTime:X,sortIndex:-1},Q>Y?(z.sortIndex=Q,e(c,z),t(l)===null&&z===t(c)&&(v?(x(R),R=-1):v=!0,q(C,Q-Y))):(z.sortIndex=X,e(l,z),g||p||(g=!0,W())),z},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(z){var J=f;return function(){var Q=f;f=J;try{return z.apply(this,arguments)}finally{f=Q}}}}(OB)),OB}var $9;function zGe(){return $9||($9=1,kB.exports=UGe()),kB.exports}var L9=zGe();function _5(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=e?n.return:n.child;for(;r;){const i=_5(r,e,t);if(i)return i;r=e?null:r.sibling}}function Nre(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const C5=Nre(F.createContext(null));let Ire=class extends F.Component{render(){return F.createElement(C5.Provider,{value:this._reactInternals},this.props.children)}};function Dre(){const n=F.useContext(C5);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=F.useId();return F.useMemo(()=>{for(const t of[n,n==null?void 0:n.alternate]){if(!t)continue;const r=_5(t,!1,i=>{let s=i.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(r)return r}},[n,e])}const HGe=Symbol.for("react.context"),VGe=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===HGe;function GGe(){const n=Dre(),[e]=F.useState(()=>new Map);e.clear();let t=n;for(;t;){const r=t.type;VGe(r)&&r!==C5&&!e.has(r)&&e.set(r,F.use(Nre(r))),t=t.return}return e}function WGe(){const n=GGe();return F.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>F.createElement(e,null,F.createElement(t.Provider,{...r,value:n.get(t)})),e=>F.createElement(Ire,{...e})),[n])}function kre(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Ore=n=>n&&n.isOrthographicCamera,jGe=n=>n&&n.hasOwnProperty("current"),XGe=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),a2=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?F.useLayoutEffect:F.useEffect;function E5(n){const e=F.useRef(n);return a2(()=>void(e.current=n),[n]),e}function qGe(){const n=Dre(),e=WGe();return F.useMemo(()=>({children:t})=>{const i=!!_5(n,!0,s=>s.type===F.StrictMode)?F.StrictMode:F.Fragment;return V.jsx(i,{children:V.jsx(e,{children:t})})},[n,e])}function KGe({set:n}){return a2(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const YGe=(n=>(n=class extends F.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function Bre(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function px(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const Ss={obj:n=>n===Object(n)&&!Ss.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Ss.str(n)||Ss.num(n)||Ss.boo(n))return n===e;const s=Ss.obj(n);if(s&&r==="reference")return n===e;const o=Ss.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!Ss.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(Ss.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function JGe(n){const e={nodes:{},materials:{},meshes:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function ZGe(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const $re=["children","key","ref"];function QGe(n){const e={};for(const t in n)$re.includes(t)||(e[t]=n[t]);return e}function gN(n,e,t,r){const i=n;let s=i==null?void 0:i.__r3f;return s||(s={root:e,type:t,parent:null,children:[],props:QGe(r),object:i,eventCount:0,handlers:{},isHidden:!1},i&&(i.__r3f=s)),s}function uC(n,e){let t=n[e];if(!e.includes("-"))return{root:n,key:e,target:t};t=n;for(const i of e.split("-")){var r;e=i,n=t,t=(r=t)==null?void 0:r[e]}return{root:n,key:e,target:t}}const F9=/-\d+$/;function yN(n,e){if(Ss.str(e.props.attach)){if(F9.test(e.props.attach)){const i=e.props.attach.replace(F9,""),{root:s,key:o}=uC(n.object,i);Array.isArray(s[o])||(s[o]=[])}const{root:t,key:r}=uC(n.object,e.props.attach);e.previousAttach=t[r],t[r]=e.object}else Ss.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function vN(n,e){if(Ss.str(e.props.attach)){const{root:t,key:r}=uC(n.object,e.props.attach),i=e.previousAttach;i===void 0?delete t[r]:t[r]=i}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const aF=[...$re,"args","dispose","attach","object","onUpdate","dispose"],P9=new Map;function e9e(n){let e=P9.get(n.constructor);try{e||(e=new n.constructor,P9.set(n.constructor,e))}catch{}return e}function t9e(n,e){const t={};for(const r in e)if(!aF.includes(r)&&!Ss.equ(e[r],n.props[r])){t[r]=e[r];for(const i in e)i.startsWith(`${r}-`)&&(t[i]=e[i])}for(const r in n.props){if(aF.includes(r)||e.hasOwnProperty(r))continue;const{root:i,key:s}=uC(n.object,r);if(i.constructor&&i.constructor.length===0){const o=e9e(i);Ss.und(o)||(t[s]=o[s])}else t[s]=0}return t}const n9e=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],r9e=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function uf(n,e){var t;const r=n.__r3f,i=r&&kre(r).getState(),s=r==null?void 0:r.eventCount;for(const a in e){let l=e[a];if(aF.includes(a))continue;if(r&&r9e.test(a)){typeof l=="function"?r.handlers[a]=l:delete r.handlers[a],r.eventCount=Object.keys(r.handlers).length;continue}if(l===void 0)continue;let{root:c,key:u,target:d}=uC(n,a);if(d instanceof d1&&l instanceof d1)d.mask=l.mask;else if(d instanceof rn&&XGe(l))d.set(l);else if(d!==null&&typeof d=="object"&&typeof d.set=="function"&&typeof d.copy=="function"&&l!=null&&l.constructor&&d.constructor===l.constructor)d.copy(l);else if(d!==null&&typeof d=="object"&&typeof d.set=="function"&&Array.isArray(l))typeof d.fromArray=="function"?d.fromArray(l):d.set(...l);else if(d!==null&&typeof d=="object"&&typeof d.set=="function"&&typeof l=="number")typeof d.setScalar=="function"?d.setScalar(l):d.set(l);else{var o;c[u]=l,i&&!i.linear&&n9e.includes(u)&&(o=c[u])!=null&&o.isTexture&&c[u].format===uo&&c[u].type===zl&&(c[u].colorSpace=Aa)}}if(r!=null&&r.parent&&i!=null&&i.internal&&(t=r.object)!=null&&t.isObject3D&&s!==r.eventCount){const a=r.object,l=i.internal.interaction.indexOf(a);l>-1&&i.internal.interaction.splice(l,1),r.eventCount&&a.raycast!==null&&i.internal.interaction.push(a)}return r&&r.props.attach===void 0&&(r.object.isBufferGeometry?r.props.attach="geometry":r.object.isMaterial&&(r.props.attach="material")),r&&iS(r),n}function iS(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function Lre(n,e){n.manual||(Ore(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const kl=n=>n==null?void 0:n.isObject3D;function YT(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Fre(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function i9e(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{Fre(t.capturedMap,e,r,i)})}function s9e(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],d=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+d*d))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var d;return(d=c.__r3f)==null?void 0:d.handlers["onPointer"+u]}))}function r(l,c){const u=n.getState(),d=new Set,f=[],p=c?c(u.internal.interaction):u.internal.interaction;for(let x=0;x<p.length;x++){const _=px(p[x]);_&&(_.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function g(x){const _=px(x);if(!_||!_.events.enabled||_.raycaster.camera===null)return[];if(_.raycaster.camera===void 0){var E;_.events.compute==null||_.events.compute(l,_,(E=_.previousRoot)==null?void 0:E.getState()),_.raycaster.camera===void 0&&(_.raycaster.camera=null)}return _.raycaster.camera?_.raycaster.intersectObject(x,!0):[]}let v=p.flatMap(g).sort((x,_)=>{const E=px(x.object),C=px(_.object);return!E||!C?x.distance-_.distance:C.events.priority-E.events.priority||x.distance-_.distance}).filter(x=>{const _=YT(x);return d.has(_)?!1:(d.add(_),!0)});u.events.filter&&(v=u.events.filter(v,u));for(const x of v){let _=x.object;for(;_;){var b;(b=_.__r3f)!=null&&b.eventCount&&f.push({...x,eventObject:_}),_=_.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let x of u.internal.capturedMap.get(l.pointerId).values())d.has(YT(x.intersection))||f.push(x.intersection);return f}function i(l,c,u,d){if(l.length){const f={stopped:!1};for(const p of l){let g=px(p.object);if(g||p.object.traverseAncestors(v=>{const b=px(v);if(b)return g=b,!1}),g){const{raycaster:v,pointer:b,camera:x,internal:_}=g,E=new ve(b.x,b.y,0).unproject(x),C=N=>{var I,D;return(I=(D=_.capturedMap.get(N))==null?void 0:D.has(p.eventObject))!=null?I:!1},M=N=>{const I={intersection:p,target:c.target};_.capturedMap.has(N)?_.capturedMap.get(N).set(p.eventObject,I):_.capturedMap.set(N,new Map([[p.eventObject,I]])),c.target.setPointerCapture(N)},R=N=>{const I=_.capturedMap.get(N);I&&Fre(_.capturedMap,p.eventObject,I,N)};let L={};for(let N in c){let I=c[N];typeof I!="function"&&(L[N]=I)}let B={...p,...L,pointer:b,intersections:l,stopped:f.stopped,delta:u,unprojectedPoint:E,ray:v.ray,camera:x,stopPropagation(){const N="pointerId"in c&&_.capturedMap.get(c.pointerId);if((!N||N.has(p.eventObject))&&(B.stopped=f.stopped=!0,_.hovered.size&&Array.from(_.hovered.values()).find(I=>I.eventObject===p.eventObject))){const I=l.slice(0,l.indexOf(p));s([...I,p])}},target:{hasPointerCapture:C,setPointerCapture:M,releasePointerCapture:R},currentTarget:{hasPointerCapture:C,setPointerCapture:M,releasePointerCapture:R},nativeEvent:c};if(d(B),f.stopped===!0)break}}}return l}function s(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(d=>d.object===u.object&&d.index===u.index&&d.instanceId===u.instanceId)){const f=u.eventObject.__r3f;if(c.hovered.delete(YT(u)),f!=null&&f.eventCount){const p=f.handlers,g={...u,intersections:l};p.onPointerOut==null||p.onPointerOut(g),p.onPointerLeave==null||p.onPointerLeave(g)}}}function o(l,c){for(let u=0;u<c.length;u++){const d=c[u].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:d,internal:f}=n.getState();f.lastEvent.current=u;const p=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",b=r(u,p?t:void 0),x=g?e(u):0;l==="onPointerDown"&&(f.initialClick=[u.offsetX,u.offsetY],f.initialHits=b.map(E=>E.eventObject)),g&&!b.length&&x<=2&&(o(u,f.interaction),d&&d(u)),p&&s(b);function _(E){const C=E.eventObject,M=C.__r3f;if(!(M!=null&&M.eventCount))return;const R=M.handlers;if(p){if(R.onPointerOver||R.onPointerEnter||R.onPointerOut||R.onPointerLeave){const L=YT(E),B=f.hovered.get(L);B?B.stopped&&E.stopPropagation():(f.hovered.set(L,E),R.onPointerOver==null||R.onPointerOver(E),R.onPointerEnter==null||R.onPointerEnter(E))}R.onPointerMove==null||R.onPointerMove(E)}else{const L=R[l];L?(!g||f.initialHits.includes(C))&&(o(u,f.interaction.filter(B=>!f.initialHits.includes(B))),L(E)):g&&f.initialHits.includes(C)&&o(u,f.interaction.filter(B=>!f.initialHits.includes(B)))}}i(b,u,x,_)}}return{handlePointer:a}}const U9=n=>!!(n!=null&&n.render),A5=F.createContext(null),o9e=(n,e)=>{const t=Tre((a,l)=>{const c=new ve,u=new ve,d=new ve;function f(x=l().camera,_=u,E=l().size){const{width:C,height:M,top:R,left:L}=E,B=C/M;_.isVector3?d.copy(_):d.set(..._);const N=x.getWorldPosition(c).distanceTo(d);if(Ore(x))return{width:C/x.zoom,height:M/x.zoom,top:R,left:L,factor:1,distance:N,aspect:B};{const I=x.fov*Math.PI/180,D=2*Math.tan(I/2)*N,P=D*(C/M);return{width:P,height:D,top:R,left:L,factor:C/P,distance:N,aspect:B}}}let p;const g=x=>a(_=>({performance:{..._.performance,current:x}})),v=new Nt;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(x=1)=>n(l(),x),advance:(x,_)=>e(x,_,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new e4,pointer:v,mouse:v,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const x=l();p&&clearTimeout(p),x.performance.current!==x.performance.min&&g(x.performance.min),p=setTimeout(()=>g(l().performance.max),x.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:f},setEvents:x=>a(_=>({..._,events:{..._.events,...x}})),setSize:(x,_,E=0,C=0)=>{const M=l().camera,R={width:x,height:_,top:E,left:C};a(L=>({size:R,viewport:{...L.viewport,...f(M,u,R)}}))},setDpr:x=>a(_=>{const E=Bre(x);return{viewport:{..._.viewport,dpr:E,initialDpr:_.viewport.initialDpr||E}}}),setFrameloop:(x="always")=>{const _=l().clock;_.stop(),_.elapsedTime=0,x!=="never"&&(_.start(),_.elapsedTime=0),a(()=>({frameloop:x}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:F.createRef(),active:!1,frames:0,priority:0,subscribe:(x,_,E)=>{const C=l().internal;return C.priority=C.priority+(_>0?1:0),C.subscribers.push({ref:x,priority:_,store:E}),C.subscribers=C.subscribers.sort((M,R)=>M.priority-R.priority),()=>{const M=l().internal;M!=null&&M.subscribers&&(M.priority=M.priority-(_>0?1:0),M.subscribers=M.subscribers.filter(R=>R.ref!==x))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:d}=t.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==s){i=l,s=c.dpr,Lre(a,l),c.dpr>0&&u.setPixelRatio(c.dpr);const f=typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,f)}a!==o&&(o=a,d(f=>({viewport:{...f.viewport,...f.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};function T5(){const n=F.useContext(A5);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function rh(n=t=>t,e){return T5()(n,e)}function l2(n,e=0){const t=T5(),r=t.getState().internal.subscribe,i=E5(n);return a2(()=>r(i,e,t),[e,r,t]),null}const z9=new WeakMap,a9e=n=>{var e;return typeof n=="function"&&(n==null||(e=n.prototype)==null?void 0:e.constructor)===n};function Pre(n,e){return function(t,...r){let i;return a9e(t)?(i=z9.get(t),i||(i=new t,z9.set(t,i))):i=t,n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{kl(l==null?void 0:l.scene)&&Object.assign(l,JGe(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function Rf(n,e,t,r){const i=Array.isArray(e)?e:[e],s=IGe(Pre(t,r),[n,...i],{equal:Ss.equ});return Array.isArray(e)?s:s[0]}Rf.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return DGe(Pre(t),[n,...r])};Rf.clear=function(n,e){const t=Array.isArray(e)?e:[e];return kGe([n,...t])};function l9e(n){const e=PGe(n);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:F.version}),e}const Ure=0,A1={},c9e=/^three(?=[A-Z])/,k3=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let u9e=0;const d9e=n=>typeof n=="function";function zre(n){if(d9e(n)){const e=`${u9e++}`;return A1[e]=n,e}else Object.assign(A1,n)}function Hre(n,e){const t=k3(n),r=A1[t];if(n!=="primitive"&&!r)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function h9e(n,e,t){var r;return n=k3(n)in A1?n:n.replace(c9e,""),Hre(n,e),n==="primitive"&&(r=e.object)!=null&&r.__r3f&&delete e.object.__r3f,gN(e.object,t,n,e)}function f9e(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?vN(n.parent,n):kl(n.object)&&(n.object.visible=!1),n.isHidden=!0,iS(n)}}function Vre(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?yN(n.parent,n):kl(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,iS(n)}}function M5(n,e,t){const r=e.root.getState();if(!(!n.parent&&n.object!==r.scene)){if(!e.object){var i,s;const o=A1[k3(e.type)];e.object=(i=e.props.object)!=null?i:new o(...(s=e.props.args)!=null?s:[]),e.object.__r3f=e}if(uf(e.object,e.props),e.props.attach)yN(n,e);else if(kl(e.object)&&kl(n.object)){const o=n.object.children.indexOf(t==null?void 0:t.object);if(t&&o!==-1){const a=n.object.children.indexOf(e.object);if(a!==-1){n.object.children.splice(a,1);const l=a<o?o-1:o;n.object.children.splice(l,0,e.object)}else e.object.parent=n.object,n.object.children.splice(o,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const o of e.children)M5(e,o);iS(e)}}function BB(n,e){e&&(e.parent=n,n.children.push(e),M5(n,e))}function H9(n,e,t){if(!e||!t)return;e.parent=n;const r=n.children.indexOf(t);r!==-1?n.children.splice(r,0,e):n.children.push(e),M5(n,e,t)}function Gre(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():L9.unstable_scheduleCallback(L9.unstable_IdlePriority,e)}}function lF(n,e,t){if(!e)return;e.parent=null;const r=n.children.indexOf(e);r!==-1&&n.children.splice(r,1),e.props.attach?vN(n,e):kl(e.object)&&kl(n.object)&&(n.object.remove(e.object),i9e(kre(e),e.object));const i=e.props.dispose!==null&&t!==!1;for(let s=e.children.length-1;s>=0;s--){const o=e.children[s];lF(e,o,i)}e.children.length=0,delete e.object.__r3f,i&&e.type!=="primitive"&&e.object.type!=="Scene"&&Gre(e.object),t===void 0&&iS(e)}function p9e(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const r=t.ref(e);typeof r=="function"&&(t.refCleanup=r)}else t.ref&&(t.ref.current=e)}const FM=[];function m9e(){for(const[t]of FM){const r=t.parent;if(r){t.props.attach?vN(r,t):kl(t.object)&&kl(r.object)&&r.object.remove(t.object);for(const i of t.children)i.props.attach?vN(t,i):kl(i.object)&&kl(t.object)&&t.object.remove(i.object)}t.isHidden&&Vre(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&Gre(t.object)}for(const[t,r,i]of FM){t.props=r;const s=t.parent;if(s){var n,e;const o=A1[k3(t.type)];t.object=(n=t.props.object)!=null?n:new o(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,p9e(i,t.object),uf(t.object,t.props),t.props.attach?yN(s,t):kl(t.object)&&kl(s.object)&&s.object.add(t.object);for(const a of t.children)a.props.attach?yN(t,a):kl(a.object)&&kl(t.object)&&t.object.add(a.object);iS(t)}}FM.length=0}const $B=()=>{},V9={};let JT=Ure;const g9e=0,y9e=4,bN=l9e({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:h9e,removeChild:lF,appendChild:BB,appendInitialChild:BB,insertBefore:H9,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||BB(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||lF(t,e)},insertInContainerBefore(n,e,t){const r=n.getState().scene.__r3f;!e||!t||!r||H9(r,e,t)},getRootHostContext:()=>V9,getChildHostContext:()=>V9,commitUpdate(n,e,t,r,i){var s,o,a;Hre(e,r);let l=!1;if((n.type==="primitive"&&t.object!==r.object||((s=r.args)==null?void 0:s.length)!==((o=t.args)==null?void 0:o.length)||(a=r.args)!=null&&a.some((u,d)=>{var f;return u!==((f=t.args)==null?void 0:f[d])}))&&(l=!0),l)FM.push([n,{...r},i]);else{const u=t9e(n,r);Object.keys(u).length&&(Object.assign(n.props,u),uf(n.object,u))}(i.sibling===null||(i.flags&y9e)===g9e)&&m9e()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n==null?void 0:n.object,prepareForCommit:()=>null,preparePortalMount:n=>gN(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:f9e,unhideInstance:Vre,createTextInstance:$B,hideTextInstance:$B,unhideTextInstance:$B,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:F.createContext(null),setCurrentUpdatePriority(n){JT=n},getCurrentUpdatePriority(){return JT},resolveUpdatePriority(){var n;if(JT!==Ure)return JT;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return LM.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return LM.ContinuousEventPriority;default:return LM.DefaultEventPriority}},resetFormInstance(){}}),_v=new Map,mx={objects:"shallow",strict:!1};function v9e(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:r,top:i,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:r,top:i,left:s}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function b9e(n){const e=_v.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||o9e(dF,W9),o=t||bN.createContainer(s,LM.ConcurrentRoot,null,!1,null,"",i,i,i,null);e||_v.set(n,{fiber:o,store:s});let a,l,c=!1,u=null;return{async configure(d={}){let f;u=new Promise(te=>f=te);let{gl:p,size:g,scene:v,events:b,onCreated:x,shadows:_=!1,linear:E=!1,flat:C=!1,legacy:M=!1,orthographic:R=!1,frameloop:L="always",dpr:B=[1,2],performance:N,raycaster:I,camera:D,onPointerMissed:P}=d,G=s.getState(),W=G.gl;if(!G.gl){const te={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},ne=typeof p=="function"?await p(te):p;U9(ne)?W=ne:W=new BI({...te,...p}),G.set({gl:W})}let q=G.raycaster;q||G.set({raycaster:q=new kI});const{params:z,...J}=I||{};if(Ss.equ(J,q,mx)||uf(q,{...J}),Ss.equ(z,q.params,mx)||uf(q,{params:{...q.params,...z}}),!G.camera||G.camera===l&&!Ss.equ(l,D,mx)){l=D;const te=D==null?void 0:D.isCamera,ne=te?D:R?new Dv(0,0,0,0,.1,1e3):new So(75,0,.1,1e3);te||(ne.position.z=5,D&&(uf(ne,D),ne.manual||("aspect"in D||"left"in D||"right"in D||"bottom"in D||"top"in D)&&(ne.manual=!0,ne.updateProjectionMatrix())),!G.camera&&!(D!=null&&D.rotation)&&ne.lookAt(0,0,0)),G.set({camera:ne}),q.camera=ne}if(!G.scene){let te;v!=null&&v.isScene?(te=v,gN(te,s,"",{})):(te=new D1,gN(te,s,"",{}),v&&uf(te,v)),G.set({scene:te})}b&&!G.events.handlers&&G.set({events:b(s)});const Q=v9e(n,g);if(Ss.equ(Q,G.size,mx)||G.setSize(Q.width,Q.height,Q.top,Q.left),B&&G.viewport.dpr!==Bre(B)&&G.setDpr(B),G.frameloop!==L&&G.setFrameloop(L),G.onPointerMissed||G.set({onPointerMissed:P}),N&&!Ss.equ(N,G.performance,mx)&&G.set(te=>({performance:{...te.performance,...N}})),!G.xr){var Y;const te=(ye,ue)=>{const be=s.getState();be.frameloop!=="never"&&W9(ye,!0,be,ue)},ne=()=>{const ye=s.getState();ye.gl.xr.enabled=ye.gl.xr.isPresenting,ye.gl.xr.setAnimationLoop(ye.gl.xr.isPresenting?te:null),ye.gl.xr.isPresenting||dF(ye)},le={connect(){const ye=s.getState().gl;ye.xr.addEventListener("sessionstart",ne),ye.xr.addEventListener("sessionend",ne)},disconnect(){const ye=s.getState().gl;ye.xr.removeEventListener("sessionstart",ne),ye.xr.removeEventListener("sessionend",ne)}};typeof((Y=W.xr)==null?void 0:Y.addEventListener)=="function"&&le.connect(),G.set({xr:le})}if(W.shadowMap){const te=W.shadowMap.enabled,ne=W.shadowMap.type;if(W.shadowMap.enabled=!!_,Ss.boo(_))W.shadowMap.type=g_;else if(Ss.str(_)){var X;const le={basic:QX,percentage:JN,soft:g_,variance:Wd};W.shadowMap.type=(X=le[_])!=null?X:g_}else Ss.obj(_)&&Object.assign(W.shadowMap,_);(te!==W.shadowMap.enabled||ne!==W.shadowMap.type)&&(W.shadowMap.needsUpdate=!0)}return Qr.enabled=!M,c||(W.outputColorSpace=E?Yu:Aa,W.toneMapping=C?mf:yP),G.legacy!==M&&G.set(()=>({legacy:M})),G.linear!==E&&G.set(()=>({linear:E})),G.flat!==C&&G.set(()=>({flat:C})),p&&!Ss.fun(p)&&!U9(p)&&!Ss.equ(p,W,mx)&&uf(W,p),a=x,c=!0,f(),this},render(d){return!c&&!u&&this.configure(),u.then(()=>{bN.updateContainer(V.jsx(x9e,{store:s,children:d,onCreated:a,rootElement:n}),o,null,()=>{})}),s},unmount(){Wre(n)}}}function x9e({store:n,children:e,onCreated:t,rootElement:r}){return a2(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),V.jsx(A5.Provider,{value:n,children:e})}function Wre(n,e){const t=_v.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),bN.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),ZGe(i.scene),_v.delete(n)}catch{}},500)})}}function S9e(n,e,t){return V.jsx(w9e,{children:n,container:e,state:t})}function w9e({state:n={},children:e,container:t}){const{events:r,size:i,...s}=n,o=T5(),[a]=F.useState(()=>new kI),[l]=F.useState(()=>new Nt),c=E5((d,f)=>{let p;if(f.camera&&i){const g=f.camera;p=d.viewport.getCurrentViewport(g,new ve,i),g!==d.camera&&Lre(g,i)}return{...d,...f,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...d.events,...f.events,...r},size:{...d.size,...i},viewport:{...d.viewport,...p},setEvents:g=>f.set(v=>({...v,events:{...v.events,...g}}))}}),u=F.useMemo(()=>{const d=Tre((p,g)=>({...s,set:p,get:g})),f=p=>d.setState(g=>c.current(p,g));return f(o.getState()),o.subscribe(f),d},[o,t]);return V.jsx(V.Fragment,{children:bN.createPortal(V.jsx(A5.Provider,{value:u,children:e}),u,null)})}const _9e=new Set,C9e=new Set,E9e=new Set;function LB(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function A_(n,e){switch(n){case"before":return LB(_9e,e);case"after":return LB(C9e,e);case"tail":return LB(E9e,e)}}let FB,PB;function cF(n,e,t){let r=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),FB=e.internal.subscribers;for(let i=0;i<FB.length;i++)PB=FB[i],PB.ref.current(PB.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let xN=!1,uF=!1,UB,G9,gx;function jre(n){G9=requestAnimationFrame(jre),xN=!0,UB=0,A_("before",n),uF=!0;for(const t of _v.values()){var e;gx=t.store.getState(),gx.internal.active&&(gx.frameloop==="always"||gx.internal.frames>0)&&!((e=gx.gl.xr)!=null&&e.isPresenting)&&(UB+=cF(n,gx))}if(uF=!1,A_("after",n),UB===0)return A_("tail",n),xN=!1,cancelAnimationFrame(G9)}function dF(n,e=1){var t;if(!n)return _v.forEach(r=>dF(r.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):uF?n.internal.frames=2:n.internal.frames=1,xN||(xN=!0,requestAnimationFrame(jre)))}function W9(n,e=!0,t,r){if(e&&A_("before",n),t)cF(n,t,r);else for(const i of _v.values())cF(n,i.store.getState());e&&A_("after",n)}const zB={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function A9e(n){const{handlePointer:e}=s9e(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(zB).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{const{set:r,events:i}=n.getState();if(i.disconnect==null||i.disconnect(),r(s=>({events:{...s.events,connected:t}})),i.handlers)for(const s in i.handlers){const o=i.handlers[s],[a,l]=zB[s];t.addEventListener(a,o,{passive:l})}},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){if(r.handlers)for(const i in r.handlers){const s=r.handlers[i],[o]=zB[i];r.connected.removeEventListener(o,s)}t(i=>({events:{...i.events,connected:void 0}}))}}}}function j9(n,e){let t;return(...r)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...r),e)}}function T9e({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=F.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=F.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,u=F.useRef(!1);F.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[d,f,p]=F.useMemo(()=>{const x=()=>{if(!a.current.element)return;const{left:_,top:E,width:C,height:M,bottom:R,right:L,x:B,y:N}=a.current.element.getBoundingClientRect(),I={left:_,top:E,width:C,height:M,bottom:R,right:L,x:B,y:N};a.current.element instanceof HTMLElement&&r&&(I.height=a.current.element.offsetHeight,I.width=a.current.element.offsetWidth),Object.freeze(I),u.current&&!I9e(a.current.lastBounds,I)&&o(a.current.lastBounds=I)};return[x,c?j9(x,c):x,l?j9(x,l):x]},[o,r,l,c]);function g(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",p,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function v(){a.current.element&&(a.current.resizeObserver=new i(p),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(x=>x.addEventListener("scroll",p,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{p()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const b=x=>{!x||x===a.current.element||(g(),a.current.element=x,a.current.scrollContainers=Xre(x),v())};return R9e(p,!!e),M9e(f),F.useEffect(()=>{g(),v()},[e,p,f]),F.useEffect(()=>g,[]),[b,s,d]}function M9e(n){F.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function R9e(n,e){F.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function Xre(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...Xre(n.parentElement)]}const N9e=["x","y","top","bottom","left","right","width","height"],I9e=(n,e)=>N9e.every(t=>n[t]===e[t]);function D9e({ref:n,children:e,fallback:t,resize:r,style:i,gl:s,events:o=A9e,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:d,legacy:f,orthographic:p,frameloop:g,dpr:v,performance:b,raycaster:x,camera:_,scene:E,onPointerMissed:C,onCreated:M,...R}){F.useMemo(()=>zre(Yge),[]);const L=qGe(),[B,N]=T9e({scroll:!0,debounce:{scroll:50,resize:0},...r}),I=F.useRef(null),D=F.useRef(null);F.useImperativeHandle(n,()=>I.current);const P=E5(C),[G,W]=F.useState(!1),[q,z]=F.useState(!1);if(G)throw G;if(q)throw q;const J=F.useRef(null);a2(()=>{const Y=I.current;if(N.width>0&&N.height>0&&Y){J.current||(J.current=b9e(Y));async function X(){await J.current.configure({gl:s,scene:E,events:o,shadows:c,linear:u,flat:d,legacy:f,orthographic:p,frameloop:g,dpr:v,performance:b,raycaster:x,camera:_,size:N,onPointerMissed:(...te)=>P.current==null?void 0:P.current(...te),onCreated:te=>{te.events.connect==null||te.events.connect(a?jGe(a)?a.current:a:D.current),l&&te.setEvents({compute:(ne,le)=>{const ye=ne[l+"X"],ue=ne[l+"Y"];le.pointer.set(ye/le.size.width*2-1,-(ue/le.size.height)*2+1),le.raycaster.setFromCamera(le.pointer,le.camera)}}),M==null||M(te)}}),J.current.render(V.jsx(L,{children:V.jsx(YGe,{set:z,children:V.jsx(F.Suspense,{fallback:V.jsx(KGe,{set:W}),children:e??null})})}))}X()}}),F.useEffect(()=>{const Y=I.current;if(Y)return()=>Wre(Y)},[]);const Q=a?"none":"auto";return V.jsx("div",{ref:D,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Q,...i},...R,children:V.jsx("div",{ref:B,style:{width:"100%",height:"100%"},children:V.jsx("canvas",{ref:I,style:{display:"block"},children:t})})})}function qre(n){return V.jsx(Ire,{children:V.jsx(D9e,{...n})})}let k9e=class extends RI{constructor(e){super(e),this.type=Xs}parse(e){const o=function(B,N){switch(B){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(N||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(N||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(N||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(N||""))}},d=function(B,N,I){N=N||1024;let P=B.pos,G=-1,W=0,q="",z=String.fromCharCode.apply(null,new Uint16Array(B.subarray(P,P+128)));for(;0>(G=z.indexOf(`
`))&&W<N&&P<B.byteLength;)q+=z,W+=z.length,P+=128,z+=String.fromCharCode.apply(null,new Uint16Array(B.subarray(P,P+128)));return-1<G?(B.pos+=W+G+1,q+z.slice(0,G)):!1},f=function(B){const N=/^#\?(\S+)/,I=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,D=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,P=/^\s*FORMAT=(\S+)\s*$/,G=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,W={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let q,z;for((B.pos>=B.byteLength||!(q=d(B)))&&o(1,"no header found"),(z=q.match(N))||o(3,"bad initial token"),W.valid|=1,W.programtype=z[1],W.string+=q+`
`;q=d(B),q!==!1;){if(W.string+=q+`
`,q.charAt(0)==="#"){W.comments+=q+`
`;continue}if((z=q.match(I))&&(W.gamma=parseFloat(z[1])),(z=q.match(D))&&(W.exposure=parseFloat(z[1])),(z=q.match(P))&&(W.valid|=2,W.format=z[1]),(z=q.match(G))&&(W.valid|=4,W.height=parseInt(z[1],10),W.width=parseInt(z[2],10)),W.valid&2&&W.valid&4)break}return W.valid&2||o(3,"missing format specifier"),W.valid&4||o(3,"missing image size specifier"),W},p=function(B,N,I){const D=N;if(D<8||D>32767||B[0]!==2||B[1]!==2||B[2]&128)return new Uint8Array(B);D!==(B[2]<<8|B[3])&&o(3,"wrong scanline width");const P=new Uint8Array(4*N*I);P.length||o(4,"unable to allocate buffer space");let G=0,W=0;const q=4*D,z=new Uint8Array(4),J=new Uint8Array(q);let Q=I;for(;Q>0&&W<B.byteLength;){W+4>B.byteLength&&o(1),z[0]=B[W++],z[1]=B[W++],z[2]=B[W++],z[3]=B[W++],(z[0]!=2||z[1]!=2||(z[2]<<8|z[3])!=D)&&o(3,"bad rgbe scanline format");let Y=0,X;for(;Y<q&&W<B.byteLength;){X=B[W++];const ne=X>128;if(ne&&(X-=128),(X===0||Y+X>q)&&o(3,"bad scanline data"),ne){const le=B[W++];for(let ye=0;ye<X;ye++)J[Y++]=le}else J.set(B.subarray(W,W+X),Y),Y+=X,W+=X}const te=D;for(let ne=0;ne<te;ne++){let le=0;P[G]=J[ne+le],le+=D,P[G+1]=J[ne+le],le+=D,P[G+2]=J[ne+le],le+=D,P[G+3]=J[ne+le],G+=4}Q--}return P},g=function(B,N,I,D){const P=B[N+3],G=Math.pow(2,P-128)/255;I[D+0]=B[N+0]*G,I[D+1]=B[N+1]*G,I[D+2]=B[N+2]*G,I[D+3]=1},v=function(B,N,I,D){const P=B[N+3],G=Math.pow(2,P-128)/255;I[D+0]=Kd.toHalfFloat(Math.min(B[N+0]*G,65504)),I[D+1]=Kd.toHalfFloat(Math.min(B[N+1]*G,65504)),I[D+2]=Kd.toHalfFloat(Math.min(B[N+2]*G,65504)),I[D+3]=Kd.toHalfFloat(1)},b=new Uint8Array(e);b.pos=0;const x=f(b),_=x.width,E=x.height,C=p(b.subarray(b.pos),_,E);let M,R,L;switch(this.type){case is:L=C.length/4;const B=new Float32Array(L*4);for(let I=0;I<L;I++)g(C,I*4,B,I*4);M=B,R=is;break;case Xs:L=C.length/4;const N=new Uint16Array(L*4);for(let I=0;I<L;I++)v(C,I*4,N,I*4);M=N,R=Xs;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:_,height:E,data:M,header:x.string,gamma:x.gamma,exposure:x.exposure,type:R}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){switch(o.type){case is:case Xs:o.colorSpace=Yu,o.minFilter=oi,o.magFilter=oi,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,r,i)}};function os(){return os=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},os.apply(null,arguments)}function O9e(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function B9e(...n){return e=>n.forEach(t=>O9e(t,e))}const Kre=F.forwardRef((n,e)=>{const{children:t,...r}=n,i=F.Children.toArray(t),s=i.find(L9e);if(s){const o=s.props.children,a=i.map(l=>l===s?F.Children.count(o)>1?F.Children.only(null):F.isValidElement(o)?o.props.children:null:l);return F.createElement(hF,os({},r,{ref:e}),F.isValidElement(o)?F.cloneElement(o,void 0,a):null)}return F.createElement(hF,os({},r,{ref:e}),t)});Kre.displayName="Slot";const hF=F.forwardRef((n,e)=>{const{children:t,...r}=n;return F.isValidElement(t)?F.cloneElement(t,{...F9e(r,t.props),ref:B9e(e,t.ref)}):F.Children.count(t)>1?F.Children.only(null):null});hF.displayName="SlotClone";const $9e=({children:n})=>F.createElement(F.Fragment,null,n);function L9e(n){return F.isValidElement(n)&&n.type===$9e}function F9e(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{s(...a),i(...a)}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}const P9e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],U9e=P9e.reduce((n,e)=>{const t=F.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?Kre:e;return F.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),F.createElement(a,os({},o,{ref:i}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{}),z9e=F.forwardRef((n,e)=>{var t;const{container:r=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...i}=n;return r?n_.createPortal(F.createElement(U9e.div,os({},i,{ref:e})),r):null}),H9e=z9e;var X9=Object.prototype.hasOwnProperty;function dC(n,e){var t,r;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&dC(n[r],e[r]););return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(X9.call(n,t)&&++r&&!X9.call(e,t)||!(t in e)||!dC(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}function O3(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!Object.is(n[t[r]],e[t[r]]))return!1;return!0}var B3=function(e,t,r,i){this.name=e,this.fn=t,this.args=r,this.modifiers=i};B3.prototype._test=function(e){var t=this.fn;try{jx(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return jx(this.modifiers.slice(),t,this)(e)}catch{return!1}};B3.prototype._check=function(e){try{jx(this.modifiers.slice(),this.fn,this)(e)}catch{if(jx(this.modifiers.slice(),function(r){return r},this)(!1))return}if(!jx(this.modifiers.slice(),this.fn,this)(e))throw null};B3.prototype._testAsync=function(e){var t=this;return new Promise(function(r,i){Jre(t.modifiers.slice(),t.fn,t)(e).then(function(s){s?r(e):i(null)}).catch(function(s){return i(s)})})};function Yre(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function jx(n,e,t){if(n.length){var r=n.shift(),i=jx(n,e,t);return r.perform(i,t)}else return Yre(e)}function Jre(n,e,t){if(n.length){var r=n.shift(),i=Jre(n,e,t);return r.performAsync(i,t)}else return function(s){return Promise.resolve(Yre(e,"async")(s))}}var V9e=function(e,t,r){this.name=e,this.perform=t,this.performAsync=r},R5=function(n){function e(t,r,i,s){for(var o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];n.call(this,o),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=r,this.cause=i,this.target=s}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Error),Nf=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};Nf.prototype._applyRule=function(e,t){var r=this;return function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return r.chain.push(new B3(t,e.apply(r,i),i,r.nextRuleModifiers)),r.nextRuleModifiers=[],r}};Nf.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new V9e(t,e.simple,e.async)),this};Nf.prototype._clone=function(){return new Nf(this.chain.slice(),this.nextRuleModifiers.slice())};Nf.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};Nf.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(r){try{r._check(e)}catch(i){t.push(new R5(r,e,i))}}),t};Nf.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(r){throw new R5(t,e,r)}})};Nf.prototype.testAsync=function(e){var t=this;return new Promise(function(r,i){Zre(e,t.chain.slice(),r,i)})};function Zre(n,e,t,r){if(e.length){var i=e.shift();i._testAsync(n).then(function(){Zre(n,e,t,r)},function(s){r(new R5(i,n,s))})}else t(n)}var q9=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function G9e(n,e){return e===void 0&&(e=!1),{simple:function(t){return q9(t,e)||n.check(t)===void 0},async:function(t){return q9(t,e)||n.testAsync(t)}}}function Sc(){return typeof Proxy<"u"?Qre(new Nf):fF(new Nf)}var hC={};Sc.extend=function(n){Object.assign(hC,n)};Sc.clearCustomRules=function(){hC={}};function Qre(n){return new Proxy(n,{get:function(t,r){if(r in t)return t[r];var i=Qre(n._clone());if(r in SN)return i._applyModifier(SN[r],r);if(r in hC)return i._applyRule(hC[r],r);if(r in pF)return i._applyRule(pF[r],r)}})}function fF(n){var e=function(i,s){return Object.keys(i).forEach(function(o){s[o]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var c=fF(s._clone()),u=c._applyRule(i[o],o).apply(void 0,a);return u}}),s},t=e(pF,n),r=e(hC,t);return Object.keys(SN).forEach(function(i){Object.defineProperty(r,i,{get:function(){var s=fF(r._clone());return s._applyModifier(SN[i],i)}})}),r}var SN={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return ZT(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(ZT(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&ZT(e).every(n)}},async:function(n){return function(e){return Promise.all(ZT(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return K9(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(r){return K9(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&r:r}).catch(function(){return!1})}}}};function K9(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function ZT(n){return typeof n=="string"?n.split(""):n}var pF={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||W9e;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return yx("string")},boolean:function(){return yx("boolean")},undefined:function(){return yx("undefined")},null:function(){return yx("null")},array:function(){return yx("array")},object:function(){return yx("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return j9e(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(r){return r.test(t)})}},optional:G9e};function yx(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function W9e(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function j9e(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(r){var i=n[r];try{i.check((e||{})[r])}catch(s){s.target=r,t.push(s)}}),t.length>0)throw t;return!0},async:function(e){var t=[],r=Object.keys(n).map(function(i){var s=n[i];return s.testAsync((e||{})[i]).catch(function(o){o.target=i,t.push(o)})});return Promise.all(r).then(function(){if(t.length>0)throw t;return!0})}}}var Wi="colors",Rl="sizes",Sn="space",X9e={gap:Sn,gridGap:Sn,columnGap:Sn,gridColumnGap:Sn,rowGap:Sn,gridRowGap:Sn,inset:Sn,insetBlock:Sn,insetBlockEnd:Sn,insetBlockStart:Sn,insetInline:Sn,insetInlineEnd:Sn,insetInlineStart:Sn,margin:Sn,marginTop:Sn,marginRight:Sn,marginBottom:Sn,marginLeft:Sn,marginBlock:Sn,marginBlockEnd:Sn,marginBlockStart:Sn,marginInline:Sn,marginInlineEnd:Sn,marginInlineStart:Sn,padding:Sn,paddingTop:Sn,paddingRight:Sn,paddingBottom:Sn,paddingLeft:Sn,paddingBlock:Sn,paddingBlockEnd:Sn,paddingBlockStart:Sn,paddingInline:Sn,paddingInlineEnd:Sn,paddingInlineStart:Sn,top:Sn,right:Sn,bottom:Sn,left:Sn,scrollMargin:Sn,scrollMarginTop:Sn,scrollMarginRight:Sn,scrollMarginBottom:Sn,scrollMarginLeft:Sn,scrollMarginX:Sn,scrollMarginY:Sn,scrollMarginBlock:Sn,scrollMarginBlockEnd:Sn,scrollMarginBlockStart:Sn,scrollMarginInline:Sn,scrollMarginInlineEnd:Sn,scrollMarginInlineStart:Sn,scrollPadding:Sn,scrollPaddingTop:Sn,scrollPaddingRight:Sn,scrollPaddingBottom:Sn,scrollPaddingLeft:Sn,scrollPaddingX:Sn,scrollPaddingY:Sn,scrollPaddingBlock:Sn,scrollPaddingBlockEnd:Sn,scrollPaddingBlockStart:Sn,scrollPaddingInline:Sn,scrollPaddingInlineEnd:Sn,scrollPaddingInlineStart:Sn,fontSize:"fontSizes",background:Wi,backgroundColor:Wi,backgroundImage:Wi,borderImage:Wi,border:Wi,borderBlock:Wi,borderBlockEnd:Wi,borderBlockStart:Wi,borderBottom:Wi,borderBottomColor:Wi,borderColor:Wi,borderInline:Wi,borderInlineEnd:Wi,borderInlineStart:Wi,borderLeft:Wi,borderLeftColor:Wi,borderRight:Wi,borderRightColor:Wi,borderTop:Wi,borderTopColor:Wi,caretColor:Wi,color:Wi,columnRuleColor:Wi,fill:Wi,outline:Wi,outlineColor:Wi,stroke:Wi,textDecorationColor:Wi,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Rl,minBlockSize:Rl,maxBlockSize:Rl,inlineSize:Rl,minInlineSize:Rl,maxInlineSize:Rl,width:Rl,minWidth:Rl,maxWidth:Rl,height:Rl,minHeight:Rl,maxHeight:Rl,flexBasis:Rl,gridTemplateColumns:Rl,gridTemplateRows:Rl,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},q9e=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,sS=()=>{const n=Object.create(null);return(e,t,...r)=>{const i=(s=>JSON.stringify(s,q9e))(e);return i in n?n[i]:n[i]=t(e,...r)}},Zy=Symbol.for("sxs.internal"),N5=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),Y9=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:K9e}=Object.prototype,mF=n=>n.includes("-")?n:n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),Y9e=/\s+(?![^()]*\))/,vx=n=>e=>n(...typeof e=="string"?String(e).split(Y9e):[e]),J9={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:vx((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n})),marginInline:vx((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n})),maxSize:vx((n,e)=>({maxBlockSize:n,maxInlineSize:e||n})),minSize:vx((n,e)=>({minBlockSize:n,minInlineSize:e||n})),paddingBlock:vx((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n})),paddingInline:vx((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n}))},HB=/([\d.]+)([^]*)/,J9e=(n,e)=>n.length?n.reduce((t,r)=>(t.push(...e.map(i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(i)?`:is(${r})`:r):r+" "+i)),t),[]):e,Z9e=(n,e)=>n in Q9e&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,r,i,s)=>r+(i==="stretch"?`-moz-available${s};${mF(n)}:${r}-webkit-fill-available`:`-moz-fit-content${s};${mF(n)}:${r}fit-content`)+s):String(e),Q9e={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},qp=n=>n?n+"-":"",eie=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,i,s,o,a)=>o=="$"==!!s?r:(i||o=="--"?"calc(":"")+"var(--"+(o==="$"?qp(e)+(a.includes("$")?"":qp(t))+a.replace(/\$/g,"-"):a)+")"+(i||o=="--"?"*"+(i||"")+(s||"1")+")":"")),eWe=/\s*,\s*(?![^()]*\))/,tWe=Object.prototype.toString,Bx=(n,e,t,r,i)=>{let s,o,a;const l=(c,u,d)=>{let f,p;const g=v=>{for(f in v){const _=f.charCodeAt(0)===64,E=_&&Array.isArray(v[f])?v[f]:[v[f]];for(p of E){const C=/[A-Z]/.test(x=f)?x:x.replace(/-[^]/g,R=>R[1].toUpperCase()),M=typeof p=="object"&&p&&p.toString===tWe&&(!r.utils[C]||!u.length);if(C in r.utils&&!M){const R=r.utils[C];if(R!==o){o=R,g(R(p)),o=null;continue}}else if(C in J9){const R=J9[C];if(R!==a){a=R,g(R(p)),a=null;continue}}if(_&&(b=f.slice(1)in r.media?"@media "+r.media[f.slice(1)]:f,f=b.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(R,L,B,N,I,D)=>{const P=HB.test(L),G=.0625*(P?-1:1),[W,q]=P?[N,L]:[L,N];return"("+(B[0]==="="?"":B[0]===">"===P?"max-":"min-")+W+":"+(B[0]!=="="&&B.length===1?q.replace(HB,(z,J,Q)=>Number(J)+G*(B===">"?1:-1)+Q):q)+(I?") and ("+(I[0]===">"?"min-":"max-")+W+":"+(I.length===1?D.replace(HB,(z,J,Q)=>Number(J)+G*(I===">"?-1:1)+Q):D):"")+")"})),M){const R=_?d.concat(f):[...d],L=_?[...u]:J9e(u,f.split(eWe));s!==void 0&&i(Z9(...s)),s=void 0,l(p,L,R)}else s===void 0&&(s=[[],u,d]),f=_||f.charCodeAt(0)!==36?f:`--${qp(r.prefix)}${f.slice(1).replace(/\$/g,"-")}`,p=M?p:typeof p=="number"?p&&C in nWe?String(p)+"px":String(p):eie(Z9e(C,p??""),r.prefix,r.themeMap[C]),s[0].push(`${_?`${f} `:`${mF(f)}:`}${p}`)}}var b,x};g(c),s!==void 0&&i(Z9(...s)),s=void 0};l(n,e,t)},Z9=(n,e,t)=>`${t.map(r=>`${r}{`).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,nWe={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},Q9=n=>String.fromCharCode(n+(n>25?39:97)),Qy=n=>(e=>{let t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=Q9(t%52)+r;return Q9(t%52)+r})(((e,t)=>{let r=t.length;for(;r;)e=33*e^t.charCodeAt(--r);return e})(5381,JSON.stringify(n))>>>0),c_=["themed","global","styled","onevar","resonevar","allvar","inline"],rWe=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},iWe=n=>{let e;const t=()=>{const{cssRules:i}=e.sheet;return[].map.call(i,(s,o)=>{const{cssText:a}=s;let l="";if(a.startsWith("--sxs"))return"";if(i[o-1]&&(l=i[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const c in e.rules)if(e.rules[c].group===s)return`--sxs{--sxs:${[...e.rules[c].cache].join(" ")}}${a}`;return s.cssRules.length?`${l}${a}`:""}return a}).join("")},r=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const c in a)delete a[c]}const i=Object(n).styleSheets||[];for(const a of i)if(rWe(a)){for(let l=0,c=a.cssRules;c[l];++l){const u=Object(c[l]);if(u.type!==1)continue;const d=Object(c[l+1]);if(d.type!==4)continue;++l;const{cssText:f}=u;if(!f.startsWith("--sxs"))continue;const p=f.slice(14,-3).trim().split(/\s+/),g=c_[p[0]];g&&(e||(e={sheet:a,reset:r,rules:{},toString:t}),e.rules[g]={group:d,index:l,cache:new Set(p)})}if(e)break}if(!e){const a=(l,c)=>({type:c,cssRules:[],insertRule(u,d){this.cssRules.splice(d,0,a(u,{import:3,undefined:1}[(u.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,u=>u.cssText).join("")}}`:l}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:r,toString:t}}const{sheet:s,rules:o}=e;for(let a=c_.length-1;a>=0;--a){const l=c_[a];if(!o[l]){const c=c_[a+1],u=o[c]?o[c].index:s.cssRules.length;s.insertRule("@media{}",u),s.insertRule(`--sxs{--sxs:${a}}`,u),o[l]={group:s.cssRules[u+1],index:u,cache:new Set([a])}}sWe(o[l])}};return r(),e},sWe=n=>{const e=n.group;let t=e.cssRules.length;n.apply=r=>{try{e.insertRule(r,t),++t}catch{}}},$w=Symbol(),oWe=sS(),eW=(n,e)=>oWe(n,()=>(...t)=>{let r={type:null,composers:new Set};for(const i of t)if(i!=null)if(i[Zy]){r.type==null&&(r.type=i[Zy].type);for(const s of i[Zy].composers)r.composers.add(s)}else i.constructor!==Object||i.$$typeof?r.type==null&&(r.type=i):r.composers.add(aWe(i,n));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),lWe(n,r,e)}),aWe=({variants:n,compoundVariants:e,defaultVariants:t,...r},i)=>{const s=`${qp(i.prefix)}c-${Qy(r)}`,o=[],a=[],l=Object.create(null),c=[];for(const f in t)l[f]=String(t[f]);if(typeof n=="object"&&n)for(const f in n){u=l,d=f,K9e.call(u,d)||(l[f]="undefined");const p=n[f];for(const g in p){const v={[f]:String(g)};String(g)==="undefined"&&c.push(f);const b=p[g],x=[v,b,!Y9(b)];o.push(x)}}var u,d;if(typeof e=="object"&&e)for(const f of e){let{css:p,...g}=f;p=typeof p=="object"&&p||{};for(const b in g)g[b]=String(g[b]);const v=[g,p,!Y9(p)];a.push(v)}return[s,r,o,a,l,c]},lWe=(n,e,t)=>{const[r,i,s,o]=cWe(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(d=>{function f(){for(let p=0;p<f[$w].length;p++){const[g,v]=f[$w][p];d.rules[g].apply(v)}return f[$w]=[],null}return f[$w]=[],f.rules={},c_.forEach(p=>f.rules[p]={apply:g=>f[$w].push([p,g])}),f})(t):null,l=(a||t).rules,c=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,u=d=>{d=typeof d=="object"&&d||uWe;const{css:f,...p}=d,g={};for(const x in s)if(delete p[x],x in d){let _=d[x];typeof _=="object"&&_?g[x]={"@initial":s[x],..._}:(_=String(_),g[x]=_!=="undefined"||o.has(x)?_:s[x])}else g[x]=s[x];const v=new Set([...i]);for(const[x,_,E,C]of e.composers){t.rules.styled.cache.has(x)||(t.rules.styled.cache.add(x),Bx(_,[`.${x}`],[],n,L=>{l.styled.apply(L)}));const M=tW(E,g,n.media),R=tW(C,g,n.media,!0);for(const L of M)if(L!==void 0)for(const[B,N,I]of L){const D=`${x}-${Qy(N)}-${B}`;v.add(D);const P=(I?t.rules.resonevar:t.rules.onevar).cache,G=I?l.resonevar:l.onevar;P.has(D)||(P.add(D),Bx(N,[`.${D}`],[],n,W=>{G.apply(W)}))}for(const L of R)if(L!==void 0)for(const[B,N]of L){const I=`${x}-${Qy(N)}-${B}`;v.add(I),t.rules.allvar.cache.has(I)||(t.rules.allvar.cache.add(I),Bx(N,[`.${I}`],[],n,D=>{l.allvar.apply(D)}))}}if(typeof f=="object"&&f){const x=`${r}-i${Qy(f)}-css`;v.add(x),t.rules.inline.cache.has(x)||(t.rules.inline.cache.add(x),Bx(f,[`.${x}`],[],n,_=>{l.inline.apply(_)}))}for(const x of String(d.className||"").trim().split(/\s+/))x&&v.add(x);const b=p.className=[...v].join(" ");return{type:e.type,className:b,selector:c,props:p,toString:()=>b,deferredInjector:a}};return N5(u,{className:r,selector:c,[Zy]:e,toString:()=>(t.rules.styled.cache.has(r)||u(),r)})},cWe=n=>{let e="";const t=[],r={},i=[];for(const[s,,,,o,a]of n){e===""&&(e=s),t.push(s),i.push(...a);for(const l in o){const c=o[l];(r[l]===void 0||c!=="undefined"||a.includes(c))&&(r[l]=c)}}return[e,t,r,new Set(i)]},tW=(n,e,t,r)=>{const i=[];e:for(let[s,o,a]of n){if(a)continue;let l,c=0,u=!1;for(l in s){const d=s[l];let f=e[l];if(f!==d){if(typeof f!="object"||!f)continue e;{let p,g,v=0;for(const b in f){if(d===String(f[b])){if(b!=="@initial"){const x=b.slice(1);(g=g||[]).push(x in t?t[x]:b.replace(/^@media ?/,"")),u=!0}c+=v,p=!0}++v}if(g&&g.length&&(o={["@media "+g.join(", ")]:o}),!p)continue e}}}(i[c]=i[c]||[]).push([r?"cv":`${l}-${s[l]}`,o,u])}return i},uWe={},dWe=sS(),hWe=(n,e)=>dWe(n,()=>(...t)=>{const r=()=>{for(let i of t){i=typeof i=="object"&&i||{};let s=Qy(i);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in i){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(i["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,o++);delete i["@import"]}Bx(i,[],[],n,o=>{e.rules.global.apply(o)})}}return""};return N5(r,{toString:r})}),fWe=sS(),pWe=(n,e)=>fWe(n,()=>t=>{const r=`${qp(n.prefix)}k-${Qy(t)}`,i=()=>{if(!e.rules.global.cache.has(r)){e.rules.global.cache.add(r);const s=[];Bx(t,[],[],n,a=>s.push(a));const o=`@keyframes ${r}{${s.join("")}}`;e.rules.global.apply(o)}return r};return N5(i,{get name(){return i()},toString:i})}),mWe=class{constructor(n,e,t,r){this.token=n==null?"":String(n),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+qp(this.prefix)+qp(this.scale)+this.token}toString(){return this.computedValue}},gWe=sS(),yWe=(n,e)=>gWe(n,()=>(t,r)=>{r=typeof t=="object"&&t||Object(r);const i=`.${t=(t=typeof t=="string"?t:"")||`${qp(n.prefix)}t-${Qy(r)}`}`,s={},o=[];for(const l in r){s[l]={};for(const c in r[l]){const u=`--${qp(n.prefix)}${l}-${c}`,d=eie(String(r[l][c]),n.prefix,l);s[l][c]=new mWe(c,d,l,n.prefix),o.push(`${u}:${d}`)}}const a=()=>{if(o.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${r===n.theme?":root,":""}.${t}{${o.join(";")}}`;e.rules.themed.apply(l)}return t};return{...s,get className(){return a()},selector:i,toString:a}}),vWe=sS(),bWe=sS(),xWe=n=>{const e=(t=>{let r=!1;const i=vWe(t,s=>{r=!0;const o="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",a=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,c=typeof s.theme=="object"&&s.theme||{},u={prefix:o,media:a,theme:c,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...X9e},utils:typeof s.utils=="object"&&s.utils||{}},d=iWe(l),f={css:eW(u,d),globalCss:hWe(u,d),keyframes:pWe(u,d),createTheme:yWe(u,d),reset(){d.reset(),f.theme.toString()},theme:{},sheet:d,config:u,prefix:o,getCssText:d.toString,toString:d.toString};return String(f.theme=f.createTheme(c)),f});return r||i.reset(),i})(n);return e.styled=(({config:t,sheet:r})=>bWe(t,()=>{const i=eW(t,r);return(...s)=>{const o=i(...s),a=o[Zy].type,l=Ne.forwardRef((c,u)=>{const d=c&&c.as||a,{props:f,deferredInjector:p}=o(c);return delete f.as,f.ref=u,p?Ne.createElement(Ne.Fragment,null,Ne.createElement(d,f),Ne.createElement(p,null)):Ne.createElement(d,f)});return l.className=o.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=o.selector,l.toString=()=>o.selector,l[Zy]=o[Zy],l}}))(e),e};function SWe(n,e,t){return Math.max(e,Math.min(n,t))}const rl={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function nW(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function rW(n,e,t,r=.15){return r===0?SWe(n,e,t):n<e?-nW(e-n,t-e,r)+e:n>t?+nW(n-t,t-e,r)+t:n}function wWe(n,[e,t],[r,i]){const[[s,o],[a,l]]=n;return[rW(e,s,o,r),rW(t,a,l,i)]}function _We(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function CWe(n){var e=_We(n,"string");return typeof e=="symbol"?e:String(e)}function pc(n,e,t){return e=CWe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function iW(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Os(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?iW(Object(t),!0).forEach(function(r){pc(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):iW(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const tie={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function sW(n){return n?n[0].toUpperCase()+n.slice(1):""}const EWe=["enter","leave"];function AWe(n=!1,e){return n&&!EWe.includes(e)}function TWe(n,e="",t=!1){const r=tie[n],i=r&&r[e]||e;return"on"+sW(n)+sW(i)+(AWe(t,i)?"Capture":"")}const MWe=["gotpointercapture","lostpointercapture"];function RWe(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const r=MWe.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:t}}function NWe(n,e=""){const t=tie[n],r=t&&t[e]||e;return n+r}function $3(n){return"touches"in n}function nie(n){return $3(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function IWe(n){return Array.from(n.touches).filter(e=>{var t,r;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(r=t.contains)===null||r===void 0?void 0:r.call(t,e.target))})}function DWe(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function rie(n){return $3(n)?DWe(n)[0]:n}function kWe(n){return IWe(n).map(e=>e.identifier)}function VB(n){const e=rie(n);return $3(n)?e.identifier:e.pointerId}function oW(n){const e=rie(n);return[e.clientX,e.clientY]}function OWe(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s})}return e}function wN(n,...e){return typeof n=="function"?n(...e):n}function BWe(){}function $We(...n){return n.length===0?BWe:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function aW(n,e){return Object.assign({},e,n||{})}const LWe=32;class FWe{constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:r,args:i}=this;t[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,r=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=r.from?wN(r.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:r,shared:i}=this;t.args=this.args;let s=0;if(e&&(t.event=e,r.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,OWe(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const R=t._delta.map(Math.abs);rl.addTo(t._distance,R)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,c]=r.threshold,{_step:u,values:d}=t;if(r.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(o)>=l&&d[0]),u[1]===!1&&(u[1]=Math.abs(a)>=c&&d[1])):(u[0]===!1&&(u[0]=Math.abs(o)>=l&&Math.sign(o)*l),u[1]===!1&&(u[1]=Math.abs(a)>=c&&Math.sign(a)*c)),t.intentional=u[0]!==!1||u[1]!==!1,!t.intentional)return;const f=[0,0];if(r.hasCustomTransform){const[R,L]=d;f[0]=u[0]!==!1?R-u[0]:0,f[1]=u[1]!==!1?L-u[1]:0}else f[0]=u[0]!==!1?o-u[0]:0,f[1]=u[1]!==!1?a-u[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(f);const p=t.offset,g=t._active&&!t._blocked||t.active;g&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in r&&(t._bounds=wN(r.bounds,t)),this.setup&&this.setup()),t.movement=f,this.computeOffset()));const[v,b]=t.offset,[[x,_],[E,C]]=t._bounds;t.overflow=[v<x?-1:v>_?1:0,b<E?-1:b>C?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const M=t._active?r.rubberband||[0,0]:[0,0];if(t.offset=wWe(t._bounds,t.offset,M),t.delta=rl.sub(t.offset,p),this.computeMovement(),g&&(!t.last||s>LWe)){t.delta=rl.sub(t.offset,p);const R=t.delta.map(Math.abs);rl.addTo(t.distance,R),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[R[0]/s,R[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(Os(Os(Os({},t),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function PWe([n,e],t){const r=Math.abs(n),i=Math.abs(e);if(r>i&&r>t)return"x";if(i>r&&i>t)return"y"}class UWe extends FWe{constructor(...e){super(...e),pc(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=rl.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=rl.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,r=this.config;if(!t.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[nie(e)]:r.axisThreshold;t.axis=PWe(t._movement,i)}t._blocked=(r.lockDirection||!!r.axis)&&!t.axis||!!r.axis&&r.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const zWe=n=>n,lW=.15,iie={enabled(n=!0){return n},eventOptions(n,e,t){return Os(Os({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[lW,lW];case!1:return[0,0];default:return rl.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return rl.toVector(n)},transform(n,e,t){const r=n||t.shared.transform;return this.hasCustomTransform=!!r,r||zWe},threshold(n){return rl.toVector(n,0)}},HWe=0,c2=Os(Os({},iie),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=HWe){return n},bounds(n={}){if(typeof n=="function")return s=>c2.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:r=-1/0,bottom:i=1/0}=n;return[[e,t],[r,i]]}}),cW={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class VWe extends UWe{constructor(...e){super(...e),pc(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:t.left-r.left+e.offset[0],right:t.right-r.right+e.offset[0],top:t.top-r.top+e.offset[1],bottom:t.bottom-r.bottom+e.offset[1]};e._bounds=c2.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=VB(e),r._pointerActive=!0,this.computeValues(oW(e)),this.computeInitial(),t.preventScrollAxis&&nie(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,r=this.config;if(!t._pointerActive)return;const i=VB(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;const s=oW(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=rl.sub(s,t._values),this.computeValues(s)),rl.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,r=this.config;if(!t._active||!t._pointerActive)return;const i=VB(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=r.tapsThreshold&&o<=r.tapsThreshold,t.tap&&r.filterTaps)t._force=!0;else{const[a,l]=t._delta,[c,u]=t._movement,[d,f]=r.swipe.velocity,[p,g]=r.swipe.distance,v=r.swipe.duration;if(t.elapsedTime<v){const b=Math.abs(a/t.timeDelta),x=Math.abs(l/t.timeDelta);b>d&&Math.abs(c)>p&&(t.swipe[0]=Math.sign(a)),x>f&&Math.abs(u)>g&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,r=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,GWe(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=cW[e.key];if(t){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=t(this.config.keyboardDisplacement,i),r._keyboardActive=!0,rl.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in cW&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function GWe(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const u2=typeof window<"u"&&window.document&&window.document.createElement;function sie(){return u2&&"ontouchstart"in window}function WWe(){return sie()||u2&&window.navigator.maxTouchPoints>1}function jWe(){return u2&&"onpointerdown"in window}function XWe(){return u2&&"exitPointerLock"in window.document}function qWe(){try{return"constructor"in GestureEvent}catch{return!1}}const Fu={isBrowser:u2,gesture:qWe(),touch:sie(),touchscreen:WWe(),pointer:jWe(),pointerLock:XWe()},KWe=250,YWe=180,JWe=.5,ZWe=50,QWe=250,eje=10,uW={mouse:0,touch:0,pen:8},tje=Os(Os({},c2),{},{device(n,e,{pointer:{touch:t=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&Fu.pointerLock,Fu.touch&&t?"touch":this.pointerLock?"mouse":Fu.pointer&&!i?"pointer":Fu.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?KWe:void 0,!(!Fu.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:r=3,axis:i=void 0}){const s=rl.toVector(n,t?r:i?1:0);return this.filterTaps=t,this.tapsThreshold=r,s},swipe({velocity:n=JWe,distance:e=ZWe,duration:t=QWe}={}){return{velocity:this.transform(rl.toVector(n)),distance:this.transform(rl.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return YWe;case!1:return 0;default:return n}},axisThreshold(n){return n?Os(Os({},uW),n):uW},keyboardDisplacement(n=eje){return n}});Os(Os({},iie),{},{device(n,e,{shared:t,pointer:{touch:r=!1}={}}){if(t.target&&!Fu.touch&&Fu.gesture)return"gesture";if(Fu.touch&&r)return"touch";if(Fu.touchscreen){if(Fu.pointer)return"pointer";if(Fu.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:r={}}){const i=o=>{const a=aW(wN(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=aW(wN(r,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof r!="function"?[i(),s()]:o=>[i(o),s(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",rl.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});Os(Os({},c2),{},{mouseOnly:(n=!0)=>n});Os(Os({},c2),{},{mouseOnly:(n=!0)=>n});const oie=new Map,gF=new Map;function nje(n){oie.set(n.key,n.engine),gF.set(n.key,n.resolver)}const rje={key:"drag",engine:VWe,resolver:tje};function ije(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function sje(n,e){if(n==null)return{};var t=ije(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}const oje={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=Fu.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},aje=["target","eventOptions","window","enabled","transform"];function PM(n={},e){const t={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":t[r]=i.call(t,n[r],r,n);break;case"object":t[r]=PM(n[r],i);break;case"boolean":i&&(t[r]=n[r]);break}return t}function lje(n,e,t={}){const r=n,{target:i,eventOptions:s,window:o,enabled:a,transform:l}=r,c=sje(r,aje);if(t.shared=PM({target:i,eventOptions:s,window:o,enabled:a,transform:l},oje),e){const u=gF.get(e);t[e]=PM(Os({shared:t.shared},c),u)}else for(const u in c){const d=gF.get(u);d&&(t[u]=PM(Os({shared:t.shared},c[u]),d))}return t}class aie{constructor(e,t){pc(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,r,i,s){const o=this._listeners,a=NWe(t,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=Os(Os({},l),s);e.addEventListener(a,i,c);const u=()=>{e.removeEventListener(a,i,c),o.delete(u)};return o.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class cje{constructor(){pc(this,"_timeouts",new Map)}add(e,t,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class uje{constructor(e){pc(this,"gestures",new Set),pc(this,"_targetEventStore",new aie(this)),pc(this,"gestureEventStores",{}),pc(this,"gestureTimeoutStores",{}),pc(this,"handlers",{}),pc(this,"config",{}),pc(this,"pointerIds",new Set),pc(this,"touchIds",new Set),pc(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),dje(this,e)}setEventIds(e){if($3(e))return this.touchIds=new Set(kWe(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=lje(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,r={};let i;if(!(t.target&&(i=t.target(),!i))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=dW(r,a.eventOptions,!!i);if(a.enabled){const c=oie.get(o);new c(this,e,o).bind(l)}}const s=dW(r,t.eventOptions,!!i);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](Os(Os({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in r)r[s]=$We(...r[s]);if(!i)return r;for(const s in r){const{device:o,capture:a,passive:l}=RWe(s);this._targetEventStore.add(i,o,"",r[s],{capture:a,passive:l})}}}}function bx(n,e){n.gestures.add(e),n.gestureEventStores[e]=new aie(n,e),n.gestureTimeoutStores[e]=new cje}function dje(n,e){e.drag&&bx(n,"drag"),e.wheel&&bx(n,"wheel"),e.scroll&&bx(n,"scroll"),e.move&&bx(n,"move"),e.pinch&&bx(n,"pinch"),e.hover&&bx(n,"hover")}const dW=(n,e,t)=>(r,i,s,o={},a=!1)=>{var l,c;const u=(l=o.capture)!==null&&l!==void 0?l:e.capture,d=(c=o.passive)!==null&&c!==void 0?c:e.passive;let f=a?r:TWe(r,i,u);t&&d&&(f+="Passive"),n[f]=n[f]||[],n[f].push(s)};function hje(n,e={},t,r){const i=Ne.useMemo(()=>new uje(n),[]);if(i.applyHandlers(n,r),i.applyConfig(e,t),Ne.useEffect(i.effect.bind(i)),Ne.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function fje(n,e){return nje(rje),hje({drag:n},e||{},"drag")}function Mp(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function pje(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function lie(...n){return e=>n.forEach(t=>pje(t,e))}function oS(...n){return F.useCallback(lie(...n),n)}function cie(n,e=[]){let t=[];function r(s,o){const a=F.createContext(o),l=t.length;t=[...t,o];function c(d){const{scope:f,children:p,...g}=d,v=(f==null?void 0:f[n][l])||a,b=F.useMemo(()=>g,Object.values(g));return F.createElement(v.Provider,{value:b},p)}function u(d,f){const p=(f==null?void 0:f[n][l])||a,g=F.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=t.map(o=>F.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return F.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,mje(i,...e)]}function mje(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return F.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}const uie=F.forwardRef((n,e)=>{const{children:t,...r}=n,i=F.Children.toArray(t),s=i.find(gje);if(s){const o=s.props.children,a=i.map(l=>l===s?F.Children.count(o)>1?F.Children.only(null):F.isValidElement(o)?o.props.children:null:l);return F.createElement(yF,os({},r,{ref:e}),F.isValidElement(o)?F.cloneElement(o,void 0,a):null)}return F.createElement(yF,os({},r,{ref:e}),t)});uie.displayName="Slot";const yF=F.forwardRef((n,e)=>{const{children:t,...r}=n;return F.isValidElement(t)?F.cloneElement(t,{...yje(r,t.props),ref:lie(e,t.ref)}):F.Children.count(t)>1?F.Children.only(null):null});yF.displayName="SlotClone";const die=({children:n})=>F.createElement(F.Fragment,null,n);function gje(n){return F.isValidElement(n)&&n.type===die}function yje(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{s(...a),i(...a)}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}const vje=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Cv=vje.reduce((n,e)=>{const t=F.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?uie:e;return F.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),F.createElement(a,os({},o,{ref:i}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function bje(n,e){n&&PC.flushSync(()=>n.dispatchEvent(e))}function I5(n){const e=F.useRef(n);return F.useEffect(()=>{e.current=n}),F.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}function xje(n,e=globalThis==null?void 0:globalThis.document){const t=I5(n);F.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[t,e])}const vF="dismissableLayer.update",Sje="dismissableLayer.pointerDownOutside",wje="dismissableLayer.focusOutside";let hW;const _je=F.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Cje=F.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=n,u=F.useContext(_je),[d,f]=F.useState(null),p=(t=d==null?void 0:d.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,g]=F.useState({}),v=oS(e,B=>f(B)),b=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=b.indexOf(x),E=d?b.indexOf(d):-1,C=u.layersWithOutsidePointerEventsDisabled.size>0,M=E>=_,R=Eje(B=>{const N=B.target,I=[...u.branches].some(D=>D.contains(N));!M||I||(s==null||s(B),a==null||a(B),B.defaultPrevented||l==null||l())},p),L=Aje(B=>{const N=B.target;[...u.branches].some(D=>D.contains(N))||(o==null||o(B),a==null||a(B),B.defaultPrevented||l==null||l())},p);return xje(B=>{E===u.layers.size-1&&(i==null||i(B),!B.defaultPrevented&&l&&(B.preventDefault(),l()))},p),F.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(hW=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),fW(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=hW)}},[d,p,r,u]),F.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),fW())},[d,u]),F.useEffect(()=>{const B=()=>g({});return document.addEventListener(vF,B),()=>document.removeEventListener(vF,B)},[]),F.createElement(Cv.div,os({},c,{ref:v,style:{pointerEvents:C?M?"auto":"none":void 0,...n.style},onFocusCapture:Mp(n.onFocusCapture,L.onFocusCapture),onBlurCapture:Mp(n.onBlurCapture,L.onBlurCapture),onPointerDownCapture:Mp(n.onPointerDownCapture,R.onPointerDownCapture)}))});function Eje(n,e=globalThis==null?void 0:globalThis.document){const t=I5(n),r=F.useRef(!1),i=F.useRef(()=>{});return F.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let u=function(){hie(Sje,t,c,{discrete:!0})};var l=u;const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function Aje(n,e=globalThis==null?void 0:globalThis.document){const t=I5(n),r=F.useRef(!1);return F.useEffect(()=>{const i=s=>{s.target&&!r.current&&hie(wje,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function fW(){const n=new CustomEvent(vF);document.dispatchEvent(n)}function hie(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?bje(i,s):i.dispatchEvent(s)}const Tje=globalThis!=null&&globalThis.document?F.useLayoutEffect:()=>{},Mje=KM.useId||(()=>{});let Rje=0;function Nje(n){const[e,t]=F.useState(Mje());return Tje(()=>{t(r=>r??String(Rje++))},[n]),e?`radix-${e}`:""}function Vv(n){return n.split("-")[0]}function d2(n){return n.split("-")[1]}function aS(n){return["top","bottom"].includes(Vv(n))?"x":"y"}function D5(n){return n==="y"?"height":"width"}function pW(n,e,t){let{reference:r,floating:i}=n;const s=r.x+r.width/2-i.width/2,o=r.y+r.height/2-i.height/2,a=aS(e),l=D5(a),c=r[l]/2-i[l]/2,u=a==="x";let d;switch(Vv(e)){case"top":d={x:s,y:r.y-i.height};break;case"bottom":d={x:s,y:r.y+r.height};break;case"right":d={x:r.x+r.width,y:o};break;case"left":d={x:r.x-i.width,y:o};break;default:d={x:r.x,y:r.y}}switch(d2(e)){case"start":d[a]-=c*(t&&u?-1:1);break;case"end":d[a]+=c*(t&&u?-1:1)}return d}const Ije=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=await(o.isRTL==null?void 0:o.isRTL(e));let l=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:c,y:u}=pW(l,r,a),d=r,f={},p=0;for(let g=0;g<s.length;g++){const{name:v,fn:b}=s[g],{x,y:_,data:E,reset:C}=await b({x:c,y:u,initialPlacement:r,placement:d,strategy:i,middlewareData:f,rects:l,platform:o,elements:{reference:n,floating:e}});c=x??c,u=_??u,f={...f,[v]:{...f[v],...E}},C&&p<=50&&(p++,typeof C=="object"&&(C.placement&&(d=C.placement),C.rects&&(l=C.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):C.rects),{x:c,y:u}=pW(l,d,a)),g=-1)}return{x:c,y:u,placement:d,strategy:i,middlewareData:f}};function fie(n){return typeof n!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(n):{top:n,right:n,bottom:n,left:n}}function _N(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}async function fC(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=e,g=fie(p),v=a[f?d==="floating"?"reference":"floating":d],b=_N(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(v)))==null||t?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=_N(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:d==="floating"?{...o.floating,x:r,y:i}:o.reference,offsetParent:await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),strategy:l}):o[d]);return{top:b.top-x.top+g.top,bottom:x.bottom-b.bottom+g.bottom,left:b.left-x.left+g.left,right:x.right-b.right+g.right}}const Dje=Math.min,Sy=Math.max;function bF(n,e,t){return Sy(n,Dje(e,t))}const mW=n=>({name:"arrow",options:n,async fn(e){const{element:t,padding:r=0}=n??{},{x:i,y:s,placement:o,rects:a,platform:l}=e;if(t==null)return{};const c=fie(r),u={x:i,y:s},d=aS(o),f=d2(o),p=D5(d),g=await l.getDimensions(t),v=d==="y"?"top":"left",b=d==="y"?"bottom":"right",x=a.reference[p]+a.reference[d]-u[d]-a.floating[p],_=u[d]-a.reference[d],E=await(l.getOffsetParent==null?void 0:l.getOffsetParent(t));let C=E?d==="y"?E.clientHeight||0:E.clientWidth||0:0;C===0&&(C=a.floating[p]);const M=x/2-_/2,R=c[v],L=C-g[p]-c[b],B=C/2-g[p]/2+M,N=bF(R,B,L),I=(f==="start"?c[v]:c[b])>0&&B!==N&&a.reference[p]<=a.floating[p];return{[d]:u[d]-(I?B<R?R-B:L-B:0),data:{[d]:N,centerOffset:B-N}}}}),kje={left:"right",right:"left",bottom:"top",top:"bottom"};function CN(n){return n.replace(/left|right|bottom|top/g,e=>kje[e])}function Oje(n,e,t){t===void 0&&(t=!1);const r=d2(n),i=aS(n),s=D5(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=CN(o)),{main:o,cross:CN(o)}}const Bje={start:"end",end:"start"};function gW(n){return n.replace(/start|end/g,e=>Bje[e])}const pie=["top","right","bottom","left"];pie.reduce((n,e)=>n.concat(e,e+"-start",e+"-end"),[]);const $je=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t;const{placement:r,middlewareData:i,rects:s,initialPlacement:o,platform:a,elements:l}=e,{mainAxis:c=!0,crossAxis:u=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",flipAlignment:p=!0,...g}=n,v=Vv(r),b=d||(v===o||!p?[CN(o)]:function(B){const N=CN(B);return[gW(B),N,gW(N)]}(o)),x=[o,...b],_=await fC(e,g),E=[];let C=((t=i.flip)==null?void 0:t.overflows)||[];if(c&&E.push(_[v]),u){const{main:B,cross:N}=Oje(r,s,await(a.isRTL==null?void 0:a.isRTL(l.floating)));E.push(_[B],_[N])}if(C=[...C,{placement:r,overflows:E}],!E.every(B=>B<=0)){var M,R;const B=((M=(R=i.flip)==null?void 0:R.index)!=null?M:0)+1,N=x[B];if(N)return{data:{index:B,overflows:C},reset:{placement:N}};let I="bottom";switch(f){case"bestFit":{var L;const D=(L=C.map(P=>[P,P.overflows.filter(G=>G>0).reduce((G,W)=>G+W,0)]).sort((P,G)=>P[1]-G[1])[0])==null?void 0:L[0].placement;D&&(I=D);break}case"initialPlacement":I=o}if(r!==I)return{reset:{placement:I}}}return{}}}};function yW(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function vW(n){return pie.some(e=>n[e]>=0)}const Lje=function(n){let{strategy:e="referenceHidden",...t}=n===void 0?{}:n;return{name:"hide",async fn(r){const{rects:i}=r;switch(e){case"referenceHidden":{const s=yW(await fC(r,{...t,elementContext:"reference"}),i.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:vW(s)}}}case"escaped":{const s=yW(await fC(r,{...t,altBoundary:!0}),i.floating);return{data:{escapedOffsets:s,escaped:vW(s)}}}default:return{}}}}},Fje=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){const{x:t,y:r}=e,i=await async function(s,o){const{placement:a,platform:l,elements:c}=s,u=await(l.isRTL==null?void 0:l.isRTL(c.floating)),d=Vv(a),f=d2(a),p=aS(a)==="x",g=["left","top"].includes(d)?-1:1,v=u&&p?-1:1,b=typeof o=="function"?o(s):o;let{mainAxis:x,crossAxis:_,alignmentAxis:E}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...b};return f&&typeof E=="number"&&(_=f==="end"?-1*E:E),p?{x:_*v,y:x*g}:{x:x*g,y:_*v}}(e,n);return{x:t+i.x,y:r+i.y,data:i}}}};function mie(n){return n==="x"?"y":"x"}const Pje=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x,y:_}=b;return{x,y:_}}},...l}=n,c={x:t,y:r},u=await fC(e,l),d=aS(Vv(i)),f=mie(d);let p=c[d],g=c[f];if(s){const b=d==="y"?"bottom":"right";p=bF(p+u[d==="y"?"top":"left"],p,p-u[b])}if(o){const b=f==="y"?"bottom":"right";g=bF(g+u[f==="y"?"top":"left"],g,g-u[b])}const v=a.fn({...e,[d]:p,[f]:g});return{...v,data:{x:v.x-t,y:v.y-r}}}}},Uje=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=n,u={x:t,y:r},d=aS(i),f=mie(d);let p=u[d],g=u[f];const v=typeof a=="function"?a({...s,placement:i}):a,b=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const M=d==="y"?"height":"width",R=s.reference[d]-s.floating[M]+b.mainAxis,L=s.reference[d]+s.reference[M]-b.mainAxis;p<R?p=R:p>L&&(p=L)}if(c){var x,_,E,C;const M=d==="y"?"width":"height",R=["top","left"].includes(Vv(i)),L=s.reference[f]-s.floating[M]+(R&&(x=(_=o.offset)==null?void 0:_[f])!=null?x:0)+(R?0:b.crossAxis),B=s.reference[f]+s.reference[M]+(R?0:(E=(C=o.offset)==null?void 0:C[f])!=null?E:0)-(R?b.crossAxis:0);g<L?g=L:g>B&&(g=B)}return{[d]:p,[f]:g}}}},zje=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){const{placement:t,rects:r,platform:i,elements:s}=e,{apply:o,...a}=n,l=await fC(e,a),c=Vv(t),u=d2(t);let d,f;c==="top"||c==="bottom"?(d=c,f=u===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(f=c,d=u==="end"?"top":"bottom");const p=Sy(l.left,0),g=Sy(l.right,0),v=Sy(l.top,0),b=Sy(l.bottom,0),x={availableHeight:r.floating.height-(["left","right"].includes(t)?2*(v!==0||b!==0?v+b:Sy(l.top,l.bottom)):l[d]),availableWidth:r.floating.width-(["top","bottom"].includes(t)?2*(p!==0||g!==0?p+g:Sy(l.left,l.right)):l[f])},_=await i.getDimensions(s.floating);o==null||o({...e,...x});const E=await i.getDimensions(s.floating);return _.width!==E.width||_.height!==E.height?{reset:{rects:!0}}:{}}}};function gie(n){return n&&n.document&&n.location&&n.alert&&n.setInterval}function am(n){if(n==null)return window;if(!gie(n)){const e=n.ownerDocument;return e&&e.defaultView||window}return n}function h2(n){return am(n).getComputedStyle(n)}function Fp(n){return gie(n)?"":n?(n.nodeName||"").toLowerCase():""}function yie(){const n=navigator.userAgentData;return n!=null&&n.brands?n.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function If(n){return n instanceof am(n).HTMLElement}function Fg(n){return n instanceof am(n).Element}function k5(n){return typeof ShadowRoot>"u"?!1:n instanceof am(n).ShadowRoot||n instanceof ShadowRoot}function L3(n){const{overflow:e,overflowX:t,overflowY:r}=h2(n);return/auto|scroll|overlay|hidden/.test(e+r+t)}function Hje(n){return["table","td","th"].includes(Fp(n))}function bW(n){const e=/firefox/i.test(yie()),t=h2(n);return t.transform!=="none"||t.perspective!=="none"||t.contain==="paint"||["transform","perspective"].includes(t.willChange)||e&&t.willChange==="filter"||e&&!!t.filter&&t.filter!=="none"}function vie(){return!/^((?!chrome|android).)*safari/i.test(yie())}const xW=Math.min,T_=Math.max,EN=Math.round;function Pp(n,e,t){var r,i,s,o;e===void 0&&(e=!1),t===void 0&&(t=!1);const a=n.getBoundingClientRect();let l=1,c=1;e&&If(n)&&(l=n.offsetWidth>0&&EN(a.width)/n.offsetWidth||1,c=n.offsetHeight>0&&EN(a.height)/n.offsetHeight||1);const u=Fg(n)?am(n):window,d=!vie()&&t,f=(a.left+(d&&(r=(i=u.visualViewport)==null?void 0:i.offsetLeft)!=null?r:0))/l,p=(a.top+(d&&(s=(o=u.visualViewport)==null?void 0:o.offsetTop)!=null?s:0))/c,g=a.width/l,v=a.height/c;return{width:g,height:v,top:p,right:f+g,bottom:p+v,left:f,x:f,y:p}}function Sg(n){return(e=n,(e instanceof am(e).Node?n.ownerDocument:n.document)||window.document).documentElement;var e}function F3(n){return Fg(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function bie(n){return Pp(Sg(n)).left+F3(n).scrollLeft}function Vje(n,e,t){const r=If(e),i=Sg(e),s=Pp(n,r&&function(l){const c=Pp(l);return EN(c.width)!==l.offsetWidth||EN(c.height)!==l.offsetHeight}(e),t==="fixed");let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(r||!r&&t!=="fixed")if((Fp(e)!=="body"||L3(i))&&(o=F3(e)),If(e)){const l=Pp(e,!0);a.x=l.x+e.clientLeft,a.y=l.y+e.clientTop}else i&&(a.x=bie(i));return{x:s.left+o.scrollLeft-a.x,y:s.top+o.scrollTop-a.y,width:s.width,height:s.height}}function xie(n){return Fp(n)==="html"?n:n.assignedSlot||n.parentNode||(k5(n)?n.host:null)||Sg(n)}function SW(n){return If(n)&&getComputedStyle(n).position!=="fixed"?n.offsetParent:null}function xF(n){const e=am(n);let t=SW(n);for(;t&&Hje(t)&&getComputedStyle(t).position==="static";)t=SW(t);return t&&(Fp(t)==="html"||Fp(t)==="body"&&getComputedStyle(t).position==="static"&&!bW(t))?e:t||function(r){let i=xie(r);for(k5(i)&&(i=i.host);If(i)&&!["html","body"].includes(Fp(i));){if(bW(i))return i;i=i.parentNode}return null}(n)||e}function wW(n){if(If(n))return{width:n.offsetWidth,height:n.offsetHeight};const e=Pp(n);return{width:e.width,height:e.height}}function Sie(n){const e=xie(n);return["html","body","#document"].includes(Fp(e))?n.ownerDocument.body:If(e)&&L3(e)?e:Sie(e)}function AN(n,e){var t;e===void 0&&(e=[]);const r=Sie(n),i=r===((t=n.ownerDocument)==null?void 0:t.body),s=am(r),o=i?[s].concat(s.visualViewport||[],L3(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(AN(o))}function _W(n,e,t){return e==="viewport"?_N(function(r,i){const s=am(r),o=Sg(r),a=s.visualViewport;let l=o.clientWidth,c=o.clientHeight,u=0,d=0;if(a){l=a.width,c=a.height;const f=vie();(f||!f&&i==="fixed")&&(u=a.offsetLeft,d=a.offsetTop)}return{width:l,height:c,x:u,y:d}}(n,t)):Fg(e)?function(r,i){const s=Pp(r,!1,i==="fixed"),o=s.top+r.clientTop,a=s.left+r.clientLeft;return{top:o,left:a,x:a,y:o,right:a+r.clientWidth,bottom:o+r.clientHeight,width:r.clientWidth,height:r.clientHeight}}(e,t):_N(function(r){var i;const s=Sg(r),o=F3(r),a=(i=r.ownerDocument)==null?void 0:i.body,l=T_(s.scrollWidth,s.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),c=T_(s.scrollHeight,s.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0);let u=-o.scrollLeft+bie(r);const d=-o.scrollTop;return h2(a||s).direction==="rtl"&&(u+=T_(s.clientWidth,a?a.clientWidth:0)-l),{width:l,height:c,x:u,y:d}}(Sg(n)))}function Gje(n){const e=AN(n),t=["absolute","fixed"].includes(h2(n).position)&&If(n)?xF(n):n;return Fg(t)?e.filter(r=>Fg(r)&&function(i,s){const o=s.getRootNode==null?void 0:s.getRootNode();if(i.contains(s))return!0;if(o&&k5(o)){let a=s;do{if(a&&i===a)return!0;a=a.parentNode||a.host}while(a)}return!1}(r,t)&&Fp(r)!=="body"):[]}const Wje={getClippingRect:function(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const s=[...t==="clippingAncestors"?Gje(e):[].concat(t),r],o=s[0],a=s.reduce((l,c)=>{const u=_W(e,c,i);return l.top=T_(u.top,l.top),l.right=xW(u.right,l.right),l.bottom=xW(u.bottom,l.bottom),l.left=T_(u.left,l.left),l},_W(e,o,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(n){let{rect:e,offsetParent:t,strategy:r}=n;const i=If(t),s=Sg(t);if(t===s)return e;let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if((i||!i&&r!=="fixed")&&((Fp(t)!=="body"||L3(s))&&(o=F3(t)),If(t))){const l=Pp(t,!0);a.x=l.x+t.clientLeft,a.y=l.y+t.clientTop}return{...e,x:e.x-o.scrollLeft+a.x,y:e.y-o.scrollTop+a.y}},isElement:Fg,getDimensions:wW,getOffsetParent:xF,getDocumentElement:Sg,getElementRects:n=>{let{reference:e,floating:t,strategy:r}=n;return{reference:Vje(e,xF(t),r),floating:{...wW(t),x:0,y:0}}},getClientRects:n=>Array.from(n.getClientRects()),isRTL:n=>h2(n).direction==="rtl"};function jje(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=!0,animationFrame:a=!1}=r,l=i&&!a,c=s&&!a,u=l||c?[...Fg(n)?AN(n):[],...AN(e)]:[];u.forEach(g=>{l&&g.addEventListener("scroll",t,{passive:!0}),c&&g.addEventListener("resize",t)});let d,f=null;if(o){let g=!0;f=new ResizeObserver(()=>{g||t(),g=!1}),Fg(n)&&!a&&f.observe(n),f.observe(e)}let p=a?Pp(n):null;return a&&function g(){const v=Pp(n);!p||v.x===p.x&&v.y===p.y&&v.width===p.width&&v.height===p.height||t(),p=v,d=requestAnimationFrame(g)}(),t(),()=>{var g;u.forEach(v=>{l&&v.removeEventListener("scroll",t),c&&v.removeEventListener("resize",t)}),(g=f)==null||g.disconnect(),f=null,a&&cancelAnimationFrame(d)}}const Xje=(n,e,t)=>Ije(n,e,{platform:Wje,...t});var SF=typeof document<"u"?F.useLayoutEffect:F.useEffect;function wF(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(r=t;r--!==0;)if(!wF(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!wF(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function qje(n){const e=F.useRef(n);return SF(()=>{e.current=n}),e}function Kje(n){let{middleware:e,placement:t="bottom",strategy:r="absolute",whileElementsMounted:i}=n===void 0?{}:n;const s=F.useRef(null),o=F.useRef(null),a=qje(i),l=F.useRef(null),[c,u]=F.useState({x:null,y:null,strategy:r,placement:t,middlewareData:{}}),[d,f]=F.useState(e);wF(d==null?void 0:d.map(E=>{let{options:C}=E;return C}),e==null?void 0:e.map(E=>{let{options:C}=E;return C}))||f(e);const p=F.useCallback(()=>{!s.current||!o.current||Xje(s.current,o.current,{middleware:d,placement:t,strategy:r}).then(E=>{g.current&&PC.flushSync(()=>{u(E)})})},[d,t,r]);SF(()=>{g.current&&p()},[p]);const g=F.useRef(!1);SF(()=>(g.current=!0,()=>{g.current=!1}),[]);const v=F.useCallback(()=>{if(typeof l.current=="function"&&(l.current(),l.current=null),s.current&&o.current)if(a.current){const E=a.current(s.current,o.current,p);l.current=E}else p()},[p,a]),b=F.useCallback(E=>{s.current=E,v()},[v]),x=F.useCallback(E=>{o.current=E,v()},[v]),_=F.useMemo(()=>({reference:s,floating:o}),[]);return F.useMemo(()=>({...c,update:p,refs:_,reference:b,floating:x}),[c,p,_,b,x])}const Yje=n=>{const{element:e,padding:t}=n;function r(i){return Object.prototype.hasOwnProperty.call(i,"current")}return{name:"arrow",options:n,fn(i){return r(e)?e.current!=null?mW({element:e.current,padding:t}).fn(i):{}:e?mW({element:e,padding:t}).fn(i):{}}}},Jje=F.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return F.createElement(Cv.svg,os({},s,{ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),n.asChild?t:F.createElement("polygon",{points:"0,0 30,0 15,10"}))}),Zje=Jje;function Qje(n){const e=F.useRef(n);return F.useEffect(()=>{e.current=n}),F.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}const u_=globalThis!=null&&globalThis.document?F.useLayoutEffect:()=>{};function e7e(n){const[e,t]=F.useState(void 0);return u_(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}const wie="Popper",[O5,_ie]=cie(wie),[t7e,Cie]=O5(wie),n7e=n=>{const{__scopePopper:e,children:t}=n,[r,i]=F.useState(null);return F.createElement(t7e,{scope:e,anchor:r,onAnchorChange:i},t)},r7e="PopperAnchor",i7e=F.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=Cie(r7e,t),o=F.useRef(null),a=oS(e,o);return F.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:F.createElement(Cv.div,os({},i,{ref:a}))}),TN="PopperContent",[s7e,o7e]=O5(TN),[a7e,l7e]=O5(TN,{hasParent:!1,positionUpdateFns:new Set}),c7e=F.forwardRef((n,e)=>{var t,r,i,s,o,a,l,c;const{__scopePopper:u,side:d="bottom",sideOffset:f=0,align:p="center",alignOffset:g=0,arrowPadding:v=0,collisionBoundary:b=[],collisionPadding:x=0,sticky:_="partial",hideWhenDetached:E=!1,avoidCollisions:C=!0,onPlaced:M,...R}=n,L=Cie(TN,u),[B,N]=F.useState(null),I=oS(e,mt=>N(mt)),[D,P]=F.useState(null),G=e7e(D),W=(t=G==null?void 0:G.width)!==null&&t!==void 0?t:0,q=(r=G==null?void 0:G.height)!==null&&r!==void 0?r:0,z=d+(p!=="center"?"-"+p:""),J=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},Q=Array.isArray(b)?b:[b],Y=Q.length>0,X={padding:J,boundary:Q.filter(p7e),altBoundary:Y},{reference:te,floating:ne,strategy:le,x:ye,y:ue,placement:be,middlewareData:xe,update:Pe}=Kje({strategy:"fixed",placement:z,whileElementsMounted:jje,middleware:[m7e(),Fje({mainAxis:f+q,alignmentAxis:g}),C?Pje({mainAxis:!0,crossAxis:!1,limiter:_==="partial"?Uje():void 0,...X}):void 0,D?Yje({element:D,padding:v}):void 0,C?$je({...X}):void 0,zje({...X,apply:({elements:mt,availableWidth:ce,availableHeight:re})=>{mt.floating.style.setProperty("--radix-popper-available-width",`${ce}px`),mt.floating.style.setProperty("--radix-popper-available-height",`${re}px`)}}),g7e({arrowWidth:W,arrowHeight:q}),E?Lje({strategy:"referenceHidden"}):void 0].filter(f7e)});u_(()=>{te(L.anchor)},[te,L.anchor]);const ze=ye!==null&&ue!==null,[Ke,pt]=Eie(be),dt=Qje(M);u_(()=>{ze&&(dt==null||dt())},[ze,dt]);const pe=(i=xe.arrow)===null||i===void 0?void 0:i.x,Le=(s=xe.arrow)===null||s===void 0?void 0:s.y,Ue=((o=xe.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[Ze,je]=F.useState();u_(()=>{B&&je(window.getComputedStyle(B).zIndex)},[B]);const{hasParent:lt,positionUpdateFns:st}=l7e(TN,u),at=!lt;F.useLayoutEffect(()=>{if(!at)return st.add(Pe),()=>{st.delete(Pe)}},[at,st,Pe]),u_(()=>{at&&ze&&Array.from(st).reverse().forEach(mt=>requestAnimationFrame(mt))},[at,ze,st]);const Ut={"data-side":Ke,"data-align":pt,...R,ref:I,style:{...R.style,animation:ze?void 0:"none",opacity:(a=xe.hide)!==null&&a!==void 0&&a.referenceHidden?0:void 0}};return F.createElement("div",{ref:ne,"data-radix-popper-content-wrapper":"",style:{position:le,left:0,top:0,transform:ze?`translate3d(${Math.round(ye)}px, ${Math.round(ue)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Ze,"--radix-popper-transform-origin":[(l=xe.transformOrigin)===null||l===void 0?void 0:l.x,(c=xe.transformOrigin)===null||c===void 0?void 0:c.y].join(" ")},dir:n.dir},F.createElement(s7e,{scope:u,placedSide:Ke,onArrowChange:P,arrowX:pe,arrowY:Le,shouldHideArrow:Ue},at?F.createElement(a7e,{scope:u,hasParent:!0,positionUpdateFns:st},F.createElement(Cv.div,Ut)):F.createElement(Cv.div,Ut)))}),u7e="PopperArrow",d7e={top:"bottom",right:"left",bottom:"top",left:"right"},h7e=F.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=o7e(u7e,r),o=d7e[s.placedSide];return F.createElement("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0}},F.createElement(Zje,os({},i,{ref:t,style:{...i.style,display:"block"}})))});function f7e(n){return n!==void 0}function p7e(n){return n!==null}const m7e=()=>({name:"anchorCssProperties",fn(n){const{rects:e,elements:t}=n,{width:r,height:i}=e.reference;return t.floating.style.setProperty("--radix-popper-anchor-width",`${r}px`),t.floating.style.setProperty("--radix-popper-anchor-height",`${i}px`),{}}}),g7e=n=>({name:"transformOrigin",options:n,fn(e){var t,r,i,s,o;const{placement:a,rects:l,middlewareData:c}=e,d=((t=c.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,f=d?0:n.arrowWidth,p=d?0:n.arrowHeight,[g,v]=Eie(a),b={start:"0%",center:"50%",end:"100%"}[v],x=((r=(i=c.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+f/2,_=((s=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+p/2;let E="",C="";return g==="bottom"?(E=d?b:`${x}px`,C=`${-p}px`):g==="top"?(E=d?b:`${x}px`,C=`${l.floating.height+p}px`):g==="right"?(E=`${-p}px`,C=d?b:`${_}px`):g==="left"&&(E=`${l.floating.width+p}px`,C=d?b:`${_}px`),{data:{x:E,y:C}}}});function Eie(n){const[e,t="center"]=n.split("-");return[e,t]}const y7e=n7e,v7e=i7e,b7e=c7e,x7e=h7e,CW=globalThis!=null&&globalThis.document?F.useLayoutEffect:()=>{};function S7e(n,e){return F.useReducer((t,r)=>{const i=e[t][r];return i??t},n)}const Aie=n=>{const{present:e,children:t}=n,r=w7e(e),i=typeof t=="function"?t({present:r.isPresent}):F.Children.only(t),s=oS(r.ref,i.ref);return typeof t=="function"||r.isPresent?F.cloneElement(i,{ref:s}):null};Aie.displayName="Presence";function w7e(n){const[e,t]=F.useState(),r=F.useRef({}),i=F.useRef(n),s=F.useRef("none"),o=n?"mounted":"unmounted",[a,l]=S7e(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return F.useEffect(()=>{const c=QT(r.current);s.current=a==="mounted"?c:"none"},[a]),CW(()=>{const c=r.current,u=i.current;if(u!==n){const f=s.current,p=QT(c);n?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),CW(()=>{if(e){const c=d=>{const p=QT(r.current).includes(d.animationName);d.target===e&&p&&PC.flushSync(()=>l("ANIMATION_END"))},u=d=>{d.target===e&&(s.current=QT(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:F.useCallback(c=>{c&&(r.current=getComputedStyle(c)),t(c)},[])}}function QT(n){return(n==null?void 0:n.animationName)||"none"}function Tie(n){const e=F.useRef(n);return F.useEffect(()=>{e.current=n}),F.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}function _7e({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=C7e({defaultProp:e,onChange:t}),s=n!==void 0,o=s?n:r,a=Tie(t),l=F.useCallback(c=>{if(s){const d=typeof c=="function"?c(n):c;d!==n&&a(d)}else i(c)},[s,n,i,a]);return[o,l]}function C7e({defaultProp:n,onChange:e}){const t=F.useState(n),[r]=t,i=F.useRef(r),s=Tie(e);return F.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),t}const E7e=F.forwardRef((n,e)=>F.createElement(Cv.span,os({},n,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}))),A7e=E7e,[P3,$ut]=cie("Tooltip",[_ie]),U3=_ie(),T7e="TooltipProvider",_F="tooltip.open",[Lut,B5]=P3(T7e),$5="Tooltip",[M7e,z3]=P3($5),R7e=n=>{const{__scopeTooltip:e,children:t,open:r,defaultOpen:i=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=n,l=B5($5,n.__scopeTooltip),c=U3(e),[u,d]=F.useState(null),f=Nje(),p=F.useRef(0),g=o??l.disableHoverableContent,v=a??l.delayDuration,b=F.useRef(!1),[x=!1,_]=_7e({prop:r,defaultProp:i,onChange:L=>{L?(l.onOpen(),document.dispatchEvent(new CustomEvent(_F))):l.onClose(),s==null||s(L)}}),E=F.useMemo(()=>x?b.current?"delayed-open":"instant-open":"closed",[x]),C=F.useCallback(()=>{window.clearTimeout(p.current),b.current=!1,_(!0)},[_]),M=F.useCallback(()=>{window.clearTimeout(p.current),_(!1)},[_]),R=F.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{b.current=!0,_(!0)},v)},[v,_]);return F.useEffect(()=>()=>window.clearTimeout(p.current),[]),F.createElement(y7e,c,F.createElement(M7e,{scope:e,contentId:f,open:x,stateAttribute:E,trigger:u,onTriggerChange:d,onTriggerEnter:F.useCallback(()=>{l.isOpenDelayed?R():C()},[l.isOpenDelayed,R,C]),onTriggerLeave:F.useCallback(()=>{g?M():window.clearTimeout(p.current)},[M,g]),onOpen:C,onClose:M,disableHoverableContent:g},t))},EW="TooltipTrigger",N7e=F.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=z3(EW,t),s=B5(EW,t),o=U3(t),a=F.useRef(null),l=oS(e,a,i.onTriggerChange),c=F.useRef(!1),u=F.useRef(!1),d=F.useCallback(()=>c.current=!1,[]);return F.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),F.createElement(v7e,os({asChild:!0},o),F.createElement(Cv.button,os({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},r,{ref:l,onPointerMove:Mp(n.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:Mp(n.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:Mp(n.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Mp(n.onFocus,()=>{c.current||i.onOpen()}),onBlur:Mp(n.onBlur,i.onClose),onClick:Mp(n.onClick,i.onClose)})))}),I7e="TooltipPortal",[Fut,D7e]=P3(I7e,{forceMount:void 0}),pC="TooltipContent",k7e=F.forwardRef((n,e)=>{const t=D7e(pC,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...s}=n,o=z3(pC,n.__scopeTooltip);return F.createElement(Aie,{present:r||o.open},o.disableHoverableContent?F.createElement(Mie,os({side:i},s,{ref:e})):F.createElement(O7e,os({side:i},s,{ref:e})))}),O7e=F.forwardRef((n,e)=>{const t=z3(pC,n.__scopeTooltip),r=B5(pC,n.__scopeTooltip),i=F.useRef(null),s=oS(e,i),[o,a]=F.useState(null),{trigger:l,onClose:c}=t,u=i.current,{onPointerInTransitChange:d}=r,f=F.useCallback(()=>{a(null),d(!1)},[d]),p=F.useCallback((g,v)=>{const b=g.currentTarget,x={x:g.clientX,y:g.clientY},_=P7e(x,b.getBoundingClientRect()),E=_==="right"||_==="bottom"?-5:5,M=_==="right"||_==="left"?{x:g.clientX+E,y:g.clientY}:{x:g.clientX,y:g.clientY+E},R=U7e(v.getBoundingClientRect()),L=H7e([M,...R]);a(L),d(!0)},[d]);return F.useEffect(()=>()=>f(),[f]),F.useEffect(()=>{if(l&&u){const g=b=>p(b,u),v=b=>p(b,l);return l.addEventListener("pointerleave",g),u.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",v)}}},[l,u,p,f]),F.useEffect(()=>{if(o){const g=v=>{const b=v.target,x={x:v.clientX,y:v.clientY},_=(l==null?void 0:l.contains(b))||(u==null?void 0:u.contains(b)),E=!z7e(x,o);_?f():E&&(f(),c())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,u,o,c,f]),F.createElement(Mie,os({},n,{ref:s}))}),[B7e,$7e]=P3($5,{isInside:!1}),Mie=F.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,l=z3(pC,t),c=U3(t),{onClose:u}=l;return F.useEffect(()=>(document.addEventListener(_F,u),()=>document.removeEventListener(_F,u)),[u]),F.useEffect(()=>{if(l.trigger){const d=f=>{const p=f.target;p!=null&&p.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),F.createElement(Cje,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u},F.createElement(b7e,os({"data-state":l.stateAttribute},c,a,{ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),F.createElement(die,null,r),F.createElement(B7e,{scope:t,isInside:!0},F.createElement(A7e,{id:l.contentId,role:"tooltip"},i||r))))}),L7e="TooltipArrow",F7e=F.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=U3(t);return $7e(L7e,t).isInside?null:F.createElement(x7e,os({},i,r,{ref:e}))});function P7e(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,i,s)){case s:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:return null}}function U7e(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function z7e(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>r!=u>r&&t<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function H7e(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),V7e(e)}function V7e(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const G7e=R7e,W7e=N7e,j7e=k7e,X7e=F7e;function q7e(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Ji(n,e){if(n==null)return{};var t=q7e(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}let Is;(function(n){n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY"})(Is||(Is={}));const K7e={[Is.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[Is.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[Is.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[Is.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[Is.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[Is.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[Is.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[Is.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[Is.PATH_DOESNT_EXIST]:n=>[`Error accessing the value at path \`${n}\``],[Is.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[Is.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function Rie(n,e,...t){const[r,...i]=K7e[e](...t);console[n]("LEVA: "+r,...i)}const Dp=Rie.bind(null,"warn"),Y7e=Rie.bind(null,"log"),J7e=["value"],Z7e=["schema"],Q7e=["value"],Nie=[],Ev={};function AW(n){let{value:e}=n,t=Ji(n,J7e);for(let r of Nie){const i=r(e,t);if(i)return i}}function lm(n,e){let{schema:t}=e,r=Ji(e,Z7e);if(n in Ev){Dp(Is.ALREADY_REGISTERED_TYPE,n);return}Nie.push((i,s)=>t(i,s)&&n),Ev[n]=r}function GB(n,e,t,r){const{normalize:i}=Ev[n];if(i)return i(e,t,r);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,o=Ji(e,Q7e);return{value:s,settings:o}}function eXe(n,e,t,r,i,s){const{sanitize:o}=Ev[n];return o?o(e,t,r,i,s):e}function TW(n,e,t){const{format:r}=Ev[n];return r?r(e,t):e}function tXe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function MW(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function tr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?MW(Object(t),!0).forEach(function(r){tXe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):MW(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const Pg=(n,e,t)=>n>t?t:n<e?e:n,nXe=n=>{if(n===""||typeof n=="number")return n;try{const e=ig(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},rXe=Math.log(10);function RW(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/rXe)+1,r=Math.floor(Math.log10(Math.abs(n))),i=Math.pow(10,r-t);return Math.max(i,.001)}const MN=(n,e,t)=>t===e?0:(Pg(n,e,t)-e)/(t-e),RN=(n,e,t)=>n*(t-e)+e,iXe=()=>"_"+Math.random().toString(36).substr(2,9),NW=/\(([0-9+\-*/^ .]+)\)/,IW=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,DW=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,kW=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,OW=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,BW=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function ig(n){if(isNaN(Number(n)))if(NW.test(n)){const e=n.replace(NW,(t,r)=>String(ig(r)));return ig(e)}else if(IW.test(n)){const e=n.replace(IW,(t,r,i)=>String(Math.pow(Number(r),Number(i))));return ig(e)}else if(DW.test(n)){const e=n.replace(DW,(t,r,i)=>String(Number(r)*Number(i)));return ig(e)}else if(kW.test(n)){const e=n.replace(kW,(t,r,i)=>{if(i!=0)return String(Number(r)/Number(i));throw new Error("Division by zero")});return ig(e)}else if(OW.test(n)){const e=n.replace(OW,(t,r,i)=>String(Number(r)+Number(i)));return ig(e)}else if(BW.test(n)){const e=n.replace(BW,(t,r,i)=>String(Number(r)-Number(i)));return ig(e)}else return Number(n);return Number(n)}function sXe(n,e){return e.reduce((t,r)=>(n&&n.hasOwnProperty(r)&&(t[r]=n[r]),t),{})}function oXe(n,e){const t=tr({},n);return e.forEach(r=>r in n&&delete t[r]),t}function aXe(n,e){return n.reduce((t,r,i)=>Object.assign(t,{[e[i]]:r}),{})}function Iie(n){return Object.prototype.toString.call(n)==="[object Object]"}const lXe=n=>Iie(n)&&Object.keys(n).length===0;let ih;(function(n){n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER"})(ih||(ih={}));let ch;(function(n){n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D"})(ch||(ch={}));const cXe=["type","__customInput"],uXe=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],dXe=["type"];function Die(n,e,t={},r){var i,s;if(typeof n!="object"||Array.isArray(n))return{type:r,input:n,options:tr({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:M,__customInput:R}=n,L=Ji(n,cXe);return Die(R,e,L,M)}const{render:o,label:a,optional:l,order:c=0,disabled:u,hint:d,onChange:f,onEditStart:p,onEditEnd:g,transient:v}=n,b=Ji(n,uXe),x=tr({render:o,key:e,label:a??e,hint:d,transient:v??!!f,onEditStart:p,onEditEnd:g,disabled:u,optional:l,order:c},t);let{type:_}=b,E=Ji(b,dXe);if(_=r??_,_ in ih)return{type:_,input:E,options:x};let C;return r&&Iie(E)&&"value"in E?C=E.value:C=lXe(E)?void 0:E,{type:_,input:C,options:tr(tr({},x),{},{onChange:f,optional:(i=x.optional)!==null&&i!==void 0?i:!1,disabled:(s=x.disabled)!==null&&s!==void 0?s:!1})}}function hXe(n,e,t,r){const i=Die(n,e),{type:s,input:o,options:a}=i;if(s)return s in ih?i:{type:s,input:GB(s,o,t,r),options:a};let l=AW(o);return l?{type:l,input:GB(l,o,t,r),options:a}:(l=AW({value:o}),l?{type:l,input:GB(l,{value:o},t,r),options:a}:!1)}function $W(n,e,t,r,i){const{value:s,type:o,settings:a}=n;n.value=kie({type:o,value:s,settings:a},e,t,r),n.fromPanel=i}const fXe=function(e,t,r){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=r};function kie({type:n,value:e,settings:t},r,i,s){const o=n!=="SELECT"&&typeof r=="function"?r(e):r;let a;try{a=eXe(n,o,t,e,i,s)}catch(l){throw new fXe(`The value \`${r}\` did not result in a correct value.`,e,l)}return dC(a,e)?e:a}const Oie=(n,e,t=!1)=>{let r=0;return function(){const i=arguments,s=t&&!r,o=()=>n.apply(this,i);window.clearTimeout(r),r=window.setTimeout(o,e),s&&o()}},Bie=n=>n.shiftKey?5:n.altKey?1/5:1,pXe=["value"],mXe=["min","max"],gXe=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},$ie=(n,{min:e=-1/0,max:t=1/0,suffix:r})=>{const i=parseFloat(n);if(n===""||isNaN(i))throw Error("Invalid number");const s=Pg(i,e,t);return r?s+r:s},yXe=(n,{pad:e=0,suffix:t})=>{const r=parseFloat(n).toFixed(e);return t?r+t:r},Lie=n=>{let{value:e}=n,t=Ji(n,pXe);const{min:r=-1/0,max:i=1/0}=t,s=Ji(t,mXe);let o=parseFloat(e);const a=typeof e=="string"?e.substring((""+o).length):void 0;o=Pg(o,r,i);let l=t.step;l||(Number.isFinite(r)?Number.isFinite(i)?l=+(Math.abs(i-r)/100).toPrecision(1):l=+(Math.abs(o-r)/100).toPrecision(1):Number.isFinite(i)&&(l=+(Math.abs(i-o)/100).toPrecision(1)));const c=l?RW(l)*10:RW(o);l=l||c/10;const u=Math.round(Pg(Math.log10(1/c),0,2));return{value:a?o+a:o,settings:tr({initialValue:o,step:l,pad:u,min:r,max:i,suffix:a},s)}},Fie=(n,{step:e,initialValue:t})=>{const r=Math.round((n-t)/e);return t+r*e};var Pie=Object.freeze({__proto__:null,schema:gXe,sanitize:$ie,format:yXe,normalize:Lie,sanitizeStep:Fie});function Ys(){return Ys=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ys.apply(this,arguments)}const Uie=F.createContext({});function cl(){return F.useContext(Uie)}const L5=F.createContext(null),zie=F.createContext(null),Hie=F.createContext(null);function f2(){return F.useContext(zie)}function vXe(){return F.useContext(Hie)}const Vie=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function eM(n,e){const[t,r]=n.split(" "),i={};return t!=="none"&&(i.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),r&&(i.backgroundColor=r),i}const Lw={$inputStyle:()=>n=>eM(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>eM(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>eM(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>eM(n,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:Wn,css:Put,createTheme:bXe,globalCss:xXe,keyframes:Uut}=xWe({prefix:"leva",theme:Vie(),utils:tr(tr({},Lw),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":Lw.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":Lw.$focusStyle()(n)}),$hover:n=>({"&:hover":Lw.$hoverStyle()(n)}),$active:n=>({"&:active":Lw.$activeStyle()(n)})})}),SXe=xXe({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function wXe(n){const e=Vie();if(!n)return{theme:e,className:""};Object.keys(n).forEach(r=>{Object.assign(e[r],n[r])});const t=bXe(e);return{theme:e,className:t.className}}function Up(n,e){const{theme:t}=F.useContext(L5);if(!(n in t)||!(e in t[n]))return Dp(Is.THEME_ERROR,n,e),"";let r=e;for(;;){let i=t[n][r];if(typeof i=="string"&&i.charAt(0)==="$")r=i.substr(1);else return i}}const Gie=Wn("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),Wie=Wn("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${Gie}`]:{paddingLeft:0}}),_Xe=Wn(Wie,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),CXe=Wn("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),EXe=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],AXe=["onUpdate"];function F5(n){let{innerLabel:e,value:t,onUpdate:r,onChange:i,onKeyDown:s,type:o,id:a,inputType:l="text",rows:c=0}=n,u=Ji(n,EXe);const{id:d,emitOnEditStart:f,emitOnEditEnd:p,disabled:g}=cl(),v=a||d,b=F.useRef(null),x=c>0,_=x?"textarea":"input",E=F.useCallback(R=>L=>{const B=L.currentTarget.value;R(B)},[]);Ne.useEffect(()=>{const R=b.current,L=E(B=>{r(B),p()});return R==null||R.addEventListener("blur",L),()=>R==null?void 0:R.removeEventListener("blur",L)},[E,r,p]);const C=F.useCallback(R=>{R.key==="Enter"&&E(r)(R)},[E,r]),M=Object.assign({as:_},x?{rows:c}:{},u);return Ne.createElement(CXe,{textArea:x},e&&typeof e=="string"?Ne.createElement(Wie,null,e):e,Ne.createElement(Gie,Ys({levaType:o,ref:b,id:v,type:l,autoComplete:"off",spellCheck:"false",value:t,onChange:E(i),onFocus:()=>f(),onKeyPress:C,onKeyDown:s,disabled:g},M)))}function TXe(n){let{onUpdate:e}=n,t=Ji(n,AXe);const r=F.useCallback(s=>e(nXe(s)),[e]),i=F.useCallback(s=>{const o=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(o){s.preventDefault();const a=s.altKey?.1:s.shiftKey?10:1;e(l=>parseFloat(l)+o*a)}},[e]);return Ne.createElement(F5,Ys({},t,{onUpdate:r,onKeyDown:i,type:"number"}))}const NN=Wn("div",{}),CF=Wn("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),MXe=Wn("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${CF}::after`]:{opacity:.6},[`${NN}:hover > & + ${CF}::after`]:{opacity:.6},[`${NN}:hover > & > svg`]:{opacity:1}}),jie=Wn("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${NN}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),Xie=Wn("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${jie} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),qie=Wn(Xie,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),RXe=Wn("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),NXe=Wn("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),EF=Wn("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),IXe=Wn("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${EF}`]:{pointerEvents:"auto"}}}}}),Kie=Wn("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),DXe=Wn("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),kXe=Wn(X7e,{fill:"$toolTipBackground"});function P5({children:n}){const{className:e}=F.useContext(L5);return Ne.createElement(H9e,{className:e},n)}const OXe=["align"];function BXe(){const{id:n,disable:e,disabled:t}=cl();return Ne.createElement(Ne.Fragment,null,Ne.createElement(NXe,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),Ne.createElement("label",{htmlFor:n+"__disable"}))}function $Xe(n){const{id:e,optional:t,hint:r}=cl(),i=n.htmlFor||(e?{htmlFor:e}:null),s=!r&&typeof n.children=="string"?{title:n.children}:null;return Ne.createElement(Ne.Fragment,null,t&&Ne.createElement(BXe,null),r!==void 0?Ne.createElement(G7e,null,Ne.createElement(W7e,{asChild:!0},Ne.createElement(EF,Ys({},i,n))),Ne.createElement(j7e,{side:"top",sideOffset:2},Ne.createElement(DXe,null,r,Ne.createElement(kXe,null)))):Ne.createElement(EF,Ys({},i,s,n)))}function gh(n){let{align:e}=n,t=Ji(n,OXe);const{value:r,label:i,key:s,disabled:o}=cl(),{hideCopyButton:a}=vXe(),l=!a&&s!==void 0,[c,u]=F.useState(!1),d=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:r??""})),u(!0)}catch{Dp(Is.CLIPBOARD_ERROR,{[s]:r})}};return Ne.createElement(RXe,{align:e,onPointerLeave:()=>u(!1)},Ne.createElement($Xe,t),l&&!o&&Ne.createElement("div",{title:`Click to copy ${typeof i=="string"?i:s} value`},c?Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Ne.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),Ne.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):Ne.createElement("svg",{onClick:d,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Ne.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),Ne.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const LXe=["toggled"],FXe=Wn("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function U5(n){let{toggled:e}=n,t=Ji(n,LXe);return Ne.createElement(FXe,Ys({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),Ne.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const PXe=["input"];function sd(n){let{input:e}=n,t=Ji(n,PXe);return e?Ne.createElement(qie,t):Ne.createElement(Xie,t)}function Yie({value:n,type:e,settings:t,setValue:r}){const[i,s]=F.useState(TW(e,n,t)),o=F.useRef(n),a=F.useRef(t);a.current=t;const l=F.useCallback(u=>s(TW(e,u,a.current)),[e]),c=F.useCallback(u=>{try{r(u)}catch(d){const{type:f,previousValue:p}=d;if(f!=="LEVA_ERROR")throw d;l(p)}},[l,r]);return F.useEffect(()=>{dC(n,o.current)||l(n),o.current=n},[n,l]),{displayValue:i,onChange:s,onUpdate:c}}function p2(n,e){const{emitOnEditStart:t,emitOnEditEnd:r}=cl();return fje(i=>{i.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const s=n(i);return i.last&&(document.body.classList.remove("leva__panel__dragged"),r==null||r()),s},e)}function UXe(n){const e=F.useRef(null),t=F.useRef(null),r=F.useRef(!1);return F.useEffect(()=>{const i=Oie(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",i),r.current||(i(),r.current=!0),()=>window.removeEventListener("resize",i)},[n]),F.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function Jie(){const n=F.useRef(null),e=F.useRef({x:0,y:0}),t=F.useCallback(r=>{Object.assign(e.current,r),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const zXe=["__refCount"],WB=(n,e)=>{if(!n[e])return null;const t=n[e];return Ji(t,zXe)};function HXe(n){const e=f2(),[t,r]=F.useState(WB(e.getData(),n)),i=F.useCallback(c=>e.setValueAtPath(n,c,!0),[n,e]),s=F.useCallback(c=>e.setSettingsAtPath(n,c),[n,e]),o=F.useCallback(c=>e.disableInputAtPath(n,c),[n,e]),a=F.useCallback(()=>e.emitOnEditStart(n),[n,e]),l=F.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return F.useEffect(()=>{r(WB(e.getData(),n));const c=e.useStore.subscribe(u=>WB(u.data,n),r,{equalityFn:O3});return()=>c()},[e,n]),[t,{set:i,setSettings:s,disable:o,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:l}]}const VXe=Wn("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),Zie=Wn("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),AF=Wn("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),Qie=Wn("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),ese=Wn("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function GXe({value:n,min:e,max:t,onDrag:r,step:i,initialValue:s}){const o=F.useRef(null),a=F.useRef(null),l=F.useRef(0),c=Up("sizes","scrubberWidth"),u=p2(({event:f,first:p,xy:[g],movement:[v],memo:b})=>{if(p){const{width:_,left:E}=o.current.getBoundingClientRect();l.current=_-parseFloat(c),b=(f==null?void 0:f.target)===a.current?n:RN((g-E)/_,e,t)}const x=b+RN(v/l.current,0,t-e);return r(Fie(x,{step:i,initialValue:s})),b}),d=MN(n,e,t);return Ne.createElement(Qie,Ys({ref:o},u()),Ne.createElement(Zie,null,Ne.createElement(ese,{style:{left:0,right:`${(1-d)*100}%`}})),Ne.createElement(AF,{ref:a,style:{left:`calc(${d} * (100% - ${c}))`}}))}const WXe=Ne.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:r})=>{const[i,s]=F.useState(!1),o=p2(({active:a,delta:[l],event:c,memo:u=0,first:d,last:f,target:p})=>(d&&p.requestPointerLock(),f&&document.exitPointerLock(),s(a),u+=l/2,Math.abs(u)>=1&&(e(g=>parseFloat(g)+Math.floor(u)*t*Bie(c)),u=0),u));return Ne.createElement(_Xe,Ys({dragging:i,title:n.length>1?n:""},o()),n.slice(0,r))});function tse({label:n,id:e,displayValue:t,onUpdate:r,onChange:i,settings:s,innerLabelTrim:o=1}){const a=o>0&&Ne.createElement(WXe,{label:n,step:s.step,onUpdate:r,innerLabelTrim:o});return Ne.createElement(TXe,{id:e,value:String(t),onUpdate:r,onChange:i,innerLabel:a})}function jXe(){const n=cl(),{label:e,value:t,onUpdate:r,settings:i,id:s}=n,{min:o,max:a}=i,l=a!==1/0&&o!==-1/0;return Ne.createElement(sd,{input:!0},Ne.createElement(gh,null,e),Ne.createElement(VXe,{hasRange:l},l&&Ne.createElement(GXe,Ys({value:parseFloat(t),onDrag:r},i)),Ne.createElement(tse,Ys({},n,{id:s,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:XXe}=Pie,qXe=Ji(Pie,["sanitizeStep"]);var KXe=tr({component:jXe},qXe);const YXe=(n,e)=>Sc().schema({options:Sc().passesAnyOf(Sc().object(),Sc().array())}).test(e),JXe=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},ZXe=(n,{values:e})=>e.indexOf(n),QXe=n=>{let{value:e,options:t}=n,r,i;return Array.isArray(t)?(i=t,r=t.map(s=>String(s))):(i=Object.values(t),r=Object.keys(t)),"value"in n?i.includes(e)||(r.unshift(String(e)),i.unshift(e)):e=i[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:r,values:i}}};var eqe=Object.freeze({__proto__:null,schema:YXe,sanitize:JXe,format:ZXe,normalize:QXe});const tqe=Wn("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),TF=Wn("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),nqe=Wn("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${TF}:focus + &`]:{$focusStyle:""},[`${TF}:hover + &`]:{$hoverStyle:""}});function rqe({displayValue:n,value:e,onUpdate:t,id:r,settings:i,disabled:s}){const{keys:o,values:a}=i,l=F.useRef();return e===a[n]&&(l.current=o[n]),Ne.createElement(tqe,null,Ne.createElement(TF,{id:r,value:n,onChange:c=>t(a[Number(c.currentTarget.value)]),disabled:s},o.map((c,u)=>Ne.createElement("option",{key:c,value:u},c))),Ne.createElement(nqe,null,l.current),Ne.createElement(U5,{toggled:!0}))}function iqe(){const{label:n,value:e,displayValue:t,onUpdate:r,id:i,disabled:s,settings:o}=cl();return Ne.createElement(sd,{input:!0},Ne.createElement(gh,null,n),Ne.createElement(rqe,{id:i,value:e,displayValue:t,onUpdate:r,settings:o,disabled:s}))}var sqe=tr({component:iqe},eqe);const oqe=n=>Sc().string().test(n),aqe=n=>{if(typeof n!="string")throw Error("Invalid string");return n},lqe=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var cqe=Object.freeze({__proto__:null,schema:oqe,sanitize:aqe,normalize:lqe});const uqe=["displayValue","onUpdate","onChange","editable"],dqe=Wn("div",{whiteSpace:"pre-wrap"});function hqe(n){let{displayValue:e,onUpdate:t,onChange:r,editable:i=!0}=n,s=Ji(n,uqe);return i?Ne.createElement(F5,Ys({value:e,onUpdate:t,onChange:r},s)):Ne.createElement(dqe,null,e)}function fqe(){const{label:n,settings:e,displayValue:t,onUpdate:r,onChange:i}=cl();return Ne.createElement(sd,{input:!0},Ne.createElement(gh,null,n),Ne.createElement(hqe,Ys({displayValue:t,onUpdate:r,onChange:i},e)))}var pqe=tr({component:fqe},cqe);const mqe=n=>Sc().boolean().test(n),gqe=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var yqe=Object.freeze({__proto__:null,schema:mqe,sanitize:gqe});const vqe=Wn("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function bqe({value:n,onUpdate:e,id:t,disabled:r}){return Ne.createElement(vqe,null,Ne.createElement("input",{id:t,type:"checkbox",checked:n,onChange:i=>e(i.currentTarget.checked),disabled:r}),Ne.createElement("label",{htmlFor:t},Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ne.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function xqe(){const{label:n,value:e,onUpdate:t,disabled:r,id:i}=cl();return Ne.createElement(sd,{input:!0},Ne.createElement(gh,null,n),Ne.createElement(bqe,{value:e,onUpdate:t,id:i,disabled:r}))}var Sqe=tr({component:xqe},yqe);const wqe=["locked"];function _qe({value:n,id:e,valueKey:t,settings:r,onUpdate:i,innerLabelTrim:s}){const o=F.useRef(n[t]);o.current=n[t];const a=F.useCallback(c=>i({[t]:kie({type:"NUMBER",value:o.current,settings:r},c)}),[i,r,t]),l=Yie({type:"NUMBER",value:n[t],settings:r,setValue:a});return Ne.createElement(tse,{id:e,label:t,value:n[t],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:r,innerLabelTrim:s})}const Cqe=Wn("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function Eqe(n){let{locked:e}=n,t=Ji(n,wqe);return Ne.createElement("svg",Ys({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?Ne.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):Ne.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function z5({value:n,onUpdate:e,settings:t,innerLabelTrim:r}){const{id:i,setSettings:s}=cl(),{lock:o,locked:a}=t;return Ne.createElement(Cqe,{withLock:o},o&&Ne.createElement(Eqe,{locked:a,onClick:()=>s({locked:!a})}),Object.keys(n).map((l,c)=>Ne.createElement(_qe,{id:c===0?i:`${i}.${l}`,key:l,valueKey:l,value:n,settings:t[l],onUpdate:e,innerLabelTrim:r})))}const nse=(n,e)=>{const t={};let r=0,i=1/0;Object.entries(n).forEach(([s,o])=>{t[s]=Lie(tr({value:o},e[s])).settings,r=Math.max(r,t[s].step),i=Math.min(i,t[s].pad)});for(let s in t){const{step:o,min:a,max:l}=e[s]||{};!isFinite(o)&&(!isFinite(a)||!isFinite(l))&&(t[s].step=r,t[s].pad=i)}return t},Aqe=["lock"],Tqe=["value"];function Mqe(n){const e=Sc().array().length(n).every.number(),t=r=>{if(!r||typeof r!="object")return!1;const i=Object.values(r);return i.length===n&&i.every(s=>isFinite(s))};return r=>e.test(r)||t(r)}function Rqe(n){return Array.isArray(n)?"array":"object"}function M_(n,e,t){return Rqe(n)===e?n:e==="array"?Object.values(n):aXe(n,t)}const Nqe=(n,e,t)=>{const r=M_(n,"object",e.keys);for(let o in r)r[o]=$ie(r[o],e[o]);const i=Object.keys(r);let s={};if(i.length===e.keys.length)s=r;else{const o=M_(t,"object",e.keys);if(i.length===1&&e.locked){const a=i[0],l=r[a],c=o[a],u=c!==0?l/c:1;for(let d in o)d===a?s[a]=l:s[d]=o[d]*u}else s=tr(tr({},o),r)}return M_(s,e.format,e.keys)},Iqe=(n,e)=>M_(n,"object",e.keys),Dqe=n=>!!n&&("step"in n||"min"in n||"max"in n);function kqe(n,e,t=[]){const{lock:r=!1}=e,i=Ji(e,Aqe),s=Array.isArray(n)?"array":"object",o=s==="object"?Object.keys(n):t,a=M_(n,"object",o),l=Dqe(i)?o.reduce((u,d)=>Object.assign(u,{[d]:i}),{}):i,c=nse(a,l);return{value:s==="array"?n:a,settings:tr(tr({},c),{},{format:s,keys:o,lock:r,locked:!1})}}function rse(n){return{schema:Mqe(n.length),normalize:e=>{let{value:t}=e,r=Ji(e,Tqe);return kqe(t,r,n)},format:(e,t)=>Iqe(e,t),sanitize:(e,t,r)=>Nqe(e,t,r)}}var Oqe={grad:.9,turn:360,rad:360/(2*Math.PI)},bp=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},ta=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},ju=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},ise=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},LW=function(n){return{r:ju(n.r,0,255),g:ju(n.g,0,255),b:ju(n.b,0,255),a:ju(n.a)}},jB=function(n){return{r:ta(n.r),g:ta(n.g),b:ta(n.b),a:ta(n.a,3)}},Bqe=/^#([0-9a-f]{3,8})$/i,tM=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},sse=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),o=s-Math.min(e,t,r),a=o?s===e?(t-r)/o:s===t?2+(r-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},ose=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),o=r*(1-t),a=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),c=s%6;return{r:255*[r,a,o,o,l,r][c],g:255*[l,r,r,a,o,o][c],b:255*[o,o,l,r,r,a][c],a:i}},FW=function(n){return{h:ise(n.h),s:ju(n.s,0,100),l:ju(n.l,0,100),a:ju(n.a)}},PW=function(n){return{h:ta(n.h),s:ta(n.s),l:ta(n.l),a:ta(n.a,3)}},UW=function(n){return ose((t=(e=n).s,{h:e.h,s:(t*=((r=e.l)<50?r:100-r)/100)>0?2*t/(r+t)*100:0,v:r+t,a:e.a}));var e,t,r},R_=function(n){return{h:(e=sse(n)).h,s:(i=(200-(t=e.s))*(r=e.v)/100)>0&&i<200?t*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,r,i},$qe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Lqe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Fqe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Pqe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,MF={string:[[function(n){var e=Bqe.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?ta(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?ta(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=Fqe.exec(n)||Pqe.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:LW({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=$qe.exec(n)||Lqe.exec(n);if(!e)return null;var t,r,i=FW({h:(t=e[1],r=e[2],r===void 0&&(r="deg"),Number(t)*(Oqe[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return UW(i)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=i===void 0?1:i;return bp(e)&&bp(t)&&bp(r)?LW({r:Number(e),g:Number(t),b:Number(r),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,r=n.l,i=n.a,s=i===void 0?1:i;if(!bp(e)||!bp(t)||!bp(r))return null;var o=FW({h:Number(e),s:Number(t),l:Number(r),a:Number(s)});return UW(o)},"hsl"],[function(n){var e=n.h,t=n.s,r=n.v,i=n.a,s=i===void 0?1:i;if(!bp(e)||!bp(t)||!bp(r))return null;var o=function(a){return{h:ise(a.h),s:ju(a.s,0,100),v:ju(a.v,0,100),a:ju(a.a)}}({h:Number(e),s:Number(t),v:Number(r),a:Number(s)});return ose(o)},"hsv"]]},zW=function(n,e){for(var t=0;t<e.length;t++){var r=e[t][0](n);if(r)return[r,e[t][1]]}return[null,void 0]},ase=function(n){return typeof n=="string"?zW(n.trim(),MF.string):typeof n=="object"&&n!==null?zW(n,MF.object):[null,void 0]},Uqe=function(n){return ase(n)[1]},XB=function(n,e){var t=R_(n);return{h:t.h,s:ju(t.s+100*e,0,100),l:t.l,a:t.a}},qB=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},HW=function(n,e){var t=R_(n);return{h:t.h,s:t.s,l:ju(t.l+100*e,0,100),a:t.a}},RF=function(){function n(e){this.parsed=ase(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return ta(qB(this.rgba),2)},n.prototype.isDark=function(){return qB(this.rgba)<.5},n.prototype.isLight=function(){return qB(this.rgba)>=.5},n.prototype.toHex=function(){return e=jB(this.rgba),t=e.r,r=e.g,i=e.b,o=(s=e.a)<1?tM(ta(255*s)):"","#"+tM(t)+tM(r)+tM(i)+o;var e,t,r,i,s,o},n.prototype.toRgb=function(){return jB(this.rgba)},n.prototype.toRgbString=function(){return e=jB(this.rgba),t=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+t+", "+r+", "+i+", "+s+")":"rgb("+t+", "+r+", "+i+")";var e,t,r,i,s},n.prototype.toHsl=function(){return PW(R_(this.rgba))},n.prototype.toHslString=function(){return e=PW(R_(this.rgba)),t=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+t+", "+r+"%, "+i+"%, "+s+")":"hsl("+t+", "+r+"%, "+i+"%)";var e,t,r,i,s},n.prototype.toHsv=function(){return e=sse(this.rgba),{h:ta(e.h),s:ta(e.s),v:ta(e.v),a:ta(e.a,3)};var e},n.prototype.invert=function(){return Dl({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Dl(XB(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Dl(XB(this.rgba,-e))},n.prototype.grayscale=function(){return Dl(XB(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Dl(HW(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Dl(HW(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Dl({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):ta(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=R_(this.rgba);return typeof e=="number"?Dl({h:e,s:t.s,l:t.l,a:t.a}):ta(t.h)},n.prototype.isEqual=function(e){return this.toHex()===Dl(e).toHex()},n}(),Dl=function(n){return n instanceof RF?n:new RF(n)},VW=[],zqe=function(n){n.forEach(function(e){VW.indexOf(e)<0&&(e(RF,MF),VW.push(e))})};function Hqe(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in t)r[t[i]]=i;var s={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=r[this.toHex()];if(c)return c;if(o!=null&&o.closest){var u=this.toRgb(),d=1/0,f="black";if(!s.length)for(var p in t)s[p]=new n(t[p]).toRgb();for(var g in t){var v=(a=u,l=s[g],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));v<d&&(d=v,f=g)}return f}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new n(l).toRgb():null},"name"])}function lS(){return(lS=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function H5(n,e){if(n==null)return{};var t,r,i={},s=Object.keys(n);for(r=0;r<s.length;r++)e.indexOf(t=s[r])>=0||(i[t]=n[t]);return i}function NF(n){var e=F.useRef(n),t=F.useRef(function(r){e.current&&e.current(r)});return e.current=n,t.current}var T1=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},N_=function(n){return"touches"in n},IF=function(n){return n&&n.ownerDocument.defaultView||self},GW=function(n,e,t){var r=n.getBoundingClientRect(),i=N_(e)?function(s,o){for(var a=0;a<s.length;a++)if(s[a].identifier===o)return s[a];return s[0]}(e.touches,t):e;return{left:T1((i.pageX-(r.left+IF(n).pageXOffset))/r.width),top:T1((i.pageY-(r.top+IF(n).pageYOffset))/r.height)}},WW=function(n){!N_(n)&&n.preventDefault()},V5=Ne.memo(function(n){var e=n.onMove,t=n.onKey,r=H5(n,["onMove","onKey"]),i=F.useRef(null),s=NF(e),o=NF(t),a=F.useRef(null),l=F.useRef(!1),c=F.useMemo(function(){var p=function(b){WW(b),(N_(b)?b.touches.length>0:b.buttons>0)&&i.current?s(GW(i.current,b,a.current)):v(!1)},g=function(){return v(!1)};function v(b){var x=l.current,_=IF(i.current),E=b?_.addEventListener:_.removeEventListener;E(x?"touchmove":"mousemove",p),E(x?"touchend":"mouseup",g)}return[function(b){var x=b.nativeEvent,_=i.current;if(_&&(WW(x),!function(C,M){return M&&!N_(C)}(x,l.current)&&_)){if(N_(x)){l.current=!0;var E=x.changedTouches||[];E.length&&(a.current=E[0].identifier)}_.focus(),s(GW(_,x,a.current)),v(!0)}},function(b){var x=b.which||b.keyCode;x<37||x>40||(b.preventDefault(),o({left:x===39?.05:x===37?-.05:0,top:x===40?.05:x===38?-.05:0}))},v]},[o,s]),u=c[0],d=c[1],f=c[2];return F.useEffect(function(){return f},[f]),Ne.createElement("div",lS({},r,{onTouchStart:u,onMouseDown:u,className:"react-colorful__interactive",ref:i,onKeyDown:d,tabIndex:0,role:"slider"}))}),m2=function(n){return n.filter(Boolean).join(" ")},G5=function(n){var e=n.color,t=n.left,r=n.top,i=r===void 0?.5:r,s=m2(["react-colorful__pointer",n.className]);return Ne.createElement("div",{className:s,style:{top:100*i+"%",left:100*t+"%"}},Ne.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},Pl=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},lse=function(n){var e=n.s,t=n.v,r=n.a,i=(200-e)*t/100;return{h:Pl(n.h),s:Pl(i>0&&i<200?e*t/100/(i<=100?i:200-i)*100:0),l:Pl(i/2),a:Pl(r,2)}},DF=function(n){var e=lse(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},KB=function(n){var e=lse(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},cse=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),o=r*(1-t),a=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),c=s%6;return{r:Pl(255*[r,a,o,o,l,r][c]),g:Pl(255*[l,r,r,a,o,o][c]),b:Pl(255*[o,o,l,r,r,a][c]),a:Pl(i,2)}},use=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),o=s-Math.min(e,t,r),a=o?s===e?(t-r)/o:s===t?2+(r-e)/o:4+(e-t)/o:0;return{h:Pl(60*(a<0?a+6:a)),s:Pl(s?o/s*100:0),v:Pl(s/255*100),a:i}},dse=Ne.memo(function(n){var e=n.hue,t=n.onChange,r=m2(["react-colorful__hue",n.className]);return Ne.createElement("div",{className:r},Ne.createElement(V5,{onMove:function(i){t({h:360*i.left})},onKey:function(i){t({h:T1(e+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":Pl(e),"aria-valuemax":"360","aria-valuemin":"0"},Ne.createElement(G5,{className:"react-colorful__hue-pointer",left:e/360,color:DF({h:e,s:100,v:100,a:1})})))}),hse=Ne.memo(function(n){var e=n.hsva,t=n.onChange,r={backgroundColor:DF({h:e.h,s:100,v:100,a:1})};return Ne.createElement("div",{className:"react-colorful__saturation",style:r},Ne.createElement(V5,{onMove:function(i){t({s:100*i.left,v:100-100*i.top})},onKey:function(i){t({s:T1(e.s+100*i.left,0,100),v:T1(e.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Pl(e.s)+"%, Brightness "+Pl(e.v)+"%"},Ne.createElement(G5,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:DF(e)})))}),W5=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function fse(n,e,t){var r=NF(t),i=F.useState(function(){return n.toHsva(e)}),s=i[0],o=i[1],a=F.useRef({color:e,hsva:s});F.useEffect(function(){if(!n.equal(e,a.current.color)){var c=n.toHsva(e);a.current={hsva:c,color:e},o(c)}},[e,n]),F.useEffect(function(){var c;W5(s,a.current.hsva)||n.equal(c=n.fromHsva(s),a.current.color)||(a.current={hsva:s,color:c},r(c))},[s,n,r]);var l=F.useCallback(function(c){o(function(u){return Object.assign({},u,c)})},[]);return[s,l]}var Vqe=typeof window<"u"?F.useLayoutEffect:F.useEffect,Gqe=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},jW=new Map,pse=function(n){Vqe(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!jW.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,jW.set(e,t);var r=Gqe();r&&t.setAttribute("nonce",r),e.head.appendChild(t)}},[])},Wqe=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,o=H5(n,["className","colorModel","color","onChange"]),a=F.useRef(null);pse(a);var l=fse(t,i,s),c=l[0],u=l[1],d=m2(["react-colorful",e]);return Ne.createElement("div",lS({},o,{ref:a,className:d}),Ne.createElement(hse,{hsva:c,onChange:u}),Ne.createElement(dse,{hue:c.h,onChange:u,className:"react-colorful__last-control"}))},jqe=function(n){var e=n.className,t=n.hsva,r=n.onChange,i={backgroundImage:"linear-gradient(90deg, "+KB(Object.assign({},t,{a:0}))+", "+KB(Object.assign({},t,{a:1}))+")"},s=m2(["react-colorful__alpha",e]),o=Pl(100*t.a);return Ne.createElement("div",{className:s},Ne.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),Ne.createElement(V5,{onMove:function(a){r({a:a.left})},onKey:function(a){r({a:T1(t.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},Ne.createElement(G5,{className:"react-colorful__alpha-pointer",left:t.a,color:KB(t)})))},Xqe=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,o=H5(n,["className","colorModel","color","onChange"]),a=F.useRef(null);pse(a);var l=fse(t,i,s),c=l[0],u=l[1],d=m2(["react-colorful",e]);return Ne.createElement("div",lS({},o,{ref:a,className:d}),Ne.createElement(hse,{hsva:c,onChange:u}),Ne.createElement(dse,{hue:c.h,onChange:u}),Ne.createElement(jqe,{hsva:c,onChange:u,className:"react-colorful__last-control"}))},qqe={defaultColor:{r:0,g:0,b:0,a:1},toHsva:use,fromHsva:cse,equal:W5},Kqe=function(n){return Ne.createElement(Xqe,lS({},n,{colorModel:qqe}))},Yqe={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return use({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=cse(n)).r,g:e.g,b:e.b};var e},equal:W5},Jqe=function(n){return Ne.createElement(Wqe,lS({},n,{colorModel:Yqe}))},YB={exports:{}},JB,XW;function Zqe(){if(XW)return JB;XW=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return JB=n,JB}var ZB,qW;function Qqe(){if(qW)return ZB;qW=1;var n=Zqe();function e(){}function t(){}return t.resetWarningCache=e,ZB=function(){function r(o,a,l,c,u,d){if(d!==n){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},ZB}var KW;function eKe(){return KW||(KW=1,YB.exports=Qqe()()),YB.exports}var tKe=eKe();const vi=Zp(tKe);function cS(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}function uS(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function nKe(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function rKe(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(nKe(arguments[e]));return n}var iKe=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function g2(n,e){var t=sKe(n);if(typeof t.path!="string"){var r=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function sKe(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var r=e.split(".").pop().toLowerCase(),i=iKe.get(r);i&&Object.defineProperty(n,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return n}var oKe=[".DS_Store","Thumbs.db"];function aKe(n){return cS(this,void 0,void 0,function(){return uS(this,function(e){return IN(n)&&lKe(n)?[2,hKe(n.dataTransfer,n.type)]:cKe(n)?[2,uKe(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,dKe(n)]:[2,[]]})})}function lKe(n){return IN(n.dataTransfer)}function cKe(n){return IN(n)&&IN(n.target)}function IN(n){return typeof n=="object"&&n!==null}function uKe(n){return kF(n.target.files).map(function(e){return g2(e)})}function dKe(n){return cS(this,void 0,void 0,function(){var e;return uS(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(r){return r.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(r){return g2(r)})]}})})}function hKe(n,e){return cS(this,void 0,void 0,function(){var t,r;return uS(this,function(i){switch(i.label){case 0:return n===null?[2,[]]:n.items?(t=kF(n.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(fKe))]):[3,2];case 1:return r=i.sent(),[2,YW(mse(r))];case 2:return[2,YW(kF(n.files).map(function(s){return g2(s)}))]}})})}function YW(n){return n.filter(function(e){return oKe.indexOf(e.name)===-1})}function kF(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var r=n[t];e.push(r)}return e}function fKe(n){if(typeof n.webkitGetAsEntry!="function")return JW(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?gse(e):JW(n)}function mse(n){return n.reduce(function(e,t){return rKe(e,Array.isArray(t)?mse(t):[t])},[])}function JW(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=g2(e);return Promise.resolve(t)}function pKe(n){return cS(this,void 0,void 0,function(){return uS(this,function(e){return[2,n.isDirectory?gse(n):mKe(n)]})})}function gse(n){var e=n.createReader();return new Promise(function(t,r){var i=[];function s(){var o=this;e.readEntries(function(a){return cS(o,void 0,void 0,function(){var l,c,u;return uS(this,function(d){switch(d.label){case 0:if(a.length)return[3,5];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=d.sent(),t(l),[3,4];case 3:return c=d.sent(),r(c),[3,4];case 4:return[3,6];case 5:u=Promise.all(a.map(pKe)),i.push(u),s(),d.label=6;case 6:return[2]}})})},function(a){r(a)})}s()})}function mKe(n){return cS(this,void 0,void 0,function(){return uS(this,function(e){return[2,new Promise(function(t,r){n.file(function(i){var s=g2(i,n.fullPath);t(s)},function(i){r(i)})})]})})}var nM={},ZW;function gKe(){return ZW||(ZW=1,nM.__esModule=!0,nM.default=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var r=n.name||"",i=(n.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return t.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):i===a})}return!0}),nM}var yKe=gKe();const vKe=Zp(yKe);function QW(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ej(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?QW(Object(t),!0).forEach(function(r){yse(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):QW(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function yse(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tj(n,e){return wKe(n)||SKe(n,e)||xKe(n,e)||bKe()}function bKe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xKe(n,e){if(n){if(typeof n=="string")return nj(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return nj(n,e)}}function nj(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function SKe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function wKe(n){if(Array.isArray(n))return n}var _Ke="file-invalid-type",CKe="file-too-large",EKe="file-too-small",AKe="too-many-files",TKe=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:_Ke,message:"File type must be ".concat(t)}},rj=function(e){return{code:CKe,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},ij=function(e){return{code:EKe,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},MKe={code:AKe,message:"Too many files"};function vse(n,e){var t=n.type==="application/x-moz-file"||vKe(n,e);return[t,t?null:TKe(e)]}function bse(n,e,t){if(Fw(n.size))if(Fw(e)&&Fw(t)){if(n.size>t)return[!1,rj(t)];if(n.size<e)return[!1,ij(e)]}else{if(Fw(e)&&n.size<e)return[!1,ij(e)];if(Fw(t)&&n.size>t)return[!1,rj(t)]}return[!0,null]}function Fw(n){return n!=null}function RKe(n){var e=n.files,t=n.accept,r=n.minSize,i=n.maxSize,s=n.multiple,o=n.maxFiles;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(a){var l=vse(a,t),c=tj(l,1),u=c[0],d=bse(a,r,i),f=tj(d,1),p=f[0];return u&&p})}function DN(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function rM(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function sj(n){n.preventDefault()}function NKe(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function IKe(n){return n.indexOf("Edge/")!==-1}function DKe(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return NKe(n)||IKe(n)}function Jh(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(a){return!DN(r)&&a&&a.apply(void 0,[r].concat(s)),DN(r)})}}function kKe(){return"showOpenFilePicker"in window}function OKe(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return ej(ej({},e),{},yse({},t,[]))},{}):{}}]}function BKe(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function $Ke(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var LKe=["children"],FKe=["open"],PKe=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],UKe=["refKey","onChange","onClick"];function zKe(n){return GKe(n)||VKe(n)||xse(n)||HKe()}function HKe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VKe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function GKe(n){if(Array.isArray(n))return OF(n)}function QB(n,e){return XKe(n)||jKe(n,e)||xse(n,e)||WKe()}function WKe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xse(n,e){if(n){if(typeof n=="string")return OF(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return OF(n,e)}}function OF(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function jKe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function XKe(n){if(Array.isArray(n))return n}function oj(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ns(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oj(Object(t),!0).forEach(function(r){BF(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):oj(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function BF(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kN(n,e){if(n==null)return{};var t=qKe(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function qKe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var j5=F.forwardRef(function(n,e){var t=n.children,r=kN(n,LKe),i=wse(r),s=i.open,o=kN(i,FKe);return F.useImperativeHandle(e,function(){return{open:s}},[s]),Ne.createElement(F.Fragment,null,t(Ns(Ns({},o),{},{open:s})))});j5.displayName="Dropzone";var Sse={disabled:!1,getFilesFromEvent:aKe,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};j5.defaultProps=Sse;j5.propTypes={children:vi.func,accept:vi.oneOfType([vi.string,vi.arrayOf(vi.string)]),multiple:vi.bool,preventDropOnDocument:vi.bool,noClick:vi.bool,noKeyboard:vi.bool,noDrag:vi.bool,noDragEventsBubbling:vi.bool,minSize:vi.number,maxSize:vi.number,maxFiles:vi.number,disabled:vi.bool,getFilesFromEvent:vi.func,onFileDialogCancel:vi.func,onFileDialogOpen:vi.func,useFsAccessApi:vi.bool,onDragEnter:vi.func,onDragLeave:vi.func,onDragOver:vi.func,onDrop:vi.func,onDropAccepted:vi.func,onDropRejected:vi.func,validator:vi.func};var $F={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function wse(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Ns(Ns({},Sse),n),t=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,c=e.onDragEnter,u=e.onDragLeave,d=e.onDragOver,f=e.onDrop,p=e.onDropAccepted,g=e.onDropRejected,v=e.onFileDialogCancel,b=e.onFileDialogOpen,x=e.useFsAccessApi,_=e.preventDropOnDocument,E=e.noClick,C=e.noKeyboard,M=e.noDrag,R=e.noDragEventsBubbling,L=e.validator,B=F.useMemo(function(){return typeof b=="function"?b:aj},[b]),N=F.useMemo(function(){return typeof v=="function"?v:aj},[v]),I=F.useRef(null),D=F.useRef(null),P=F.useReducer(KKe,$F),G=QB(P,2),W=G[0],q=G[1],z=W.isFocused,J=W.isFileDialogActive,Q=W.draggedFiles,Y=F.useRef(typeof window<"u"&&window.isSecureContext&&x&&kKe()),X=function(){!Y.current&&J&&setTimeout(function(){if(D.current){var re=D.current.files;re.length||(q({type:"closeDialog"}),N())}},300)};F.useEffect(function(){return window.addEventListener("focus",X,!1),function(){window.removeEventListener("focus",X,!1)}},[D,J,N,Y]);var te=F.useRef([]),ne=function(re){I.current&&I.current.contains(re.target)||(re.preventDefault(),te.current=[])};F.useEffect(function(){return _&&(document.addEventListener("dragover",sj,!1),document.addEventListener("drop",ne,!1)),function(){_&&(document.removeEventListener("dragover",sj),document.removeEventListener("drop",ne))}},[I,_]);var le=F.useCallback(function(ce){ce.preventDefault(),ce.persist(),Ze(ce),te.current=[].concat(zKe(te.current),[ce.target]),rM(ce)&&Promise.resolve(i(ce)).then(function(re){DN(ce)&&!R||(q({draggedFiles:re,isDragActive:!0,type:"setDraggedFiles"}),c&&c(ce))})},[i,c,R]),ye=F.useCallback(function(ce){ce.preventDefault(),ce.persist(),Ze(ce);var re=rM(ce);if(re&&ce.dataTransfer)try{ce.dataTransfer.dropEffect="copy"}catch{}return re&&d&&d(ce),!1},[d,R]),ue=F.useCallback(function(ce){ce.preventDefault(),ce.persist(),Ze(ce);var re=te.current.filter(function(qe){return I.current&&I.current.contains(qe)}),$e=re.indexOf(ce.target);$e!==-1&&re.splice($e,1),te.current=re,!(re.length>0)&&(q({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),rM(ce)&&u&&u(ce))},[I,u,R]),be=F.useCallback(function(ce,re){var $e=[],qe=[];ce.forEach(function(ot){var et=vse(ot,t),Ft=QB(et,2),At=Ft[0],Ct=Ft[1],qt=bse(ot,o,s),yt=QB(qt,2),Mt=yt[0],on=yt[1],tn=L?L(ot):null;if(At&&Mt&&!tn)$e.push(ot);else{var zt=[Ct,on];tn&&(zt=zt.concat(tn)),qe.push({file:ot,errors:zt.filter(function(fn){return fn})})}}),(!a&&$e.length>1||a&&l>=1&&$e.length>l)&&($e.forEach(function(ot){qe.push({file:ot,errors:[MKe]})}),$e.splice(0)),q({acceptedFiles:$e,fileRejections:qe,type:"setFiles"}),f&&f($e,qe,re),qe.length>0&&g&&g(qe,re),$e.length>0&&p&&p($e,re)},[q,a,t,o,s,l,f,p,g,L]),xe=F.useCallback(function(ce){ce.preventDefault(),ce.persist(),Ze(ce),te.current=[],rM(ce)&&Promise.resolve(i(ce)).then(function(re){DN(ce)&&!R||be(re,ce)}),q({type:"reset"})},[i,be,R]),Pe=F.useCallback(function(){if(Y.current){q({type:"openDialog"}),B();var ce={multiple:a,types:OKe(t)};window.showOpenFilePicker(ce).then(function(re){return i(re)}).then(function(re){be(re,null),q({type:"closeDialog"})}).catch(function(re){BKe(re)?(N(re),q({type:"closeDialog"})):$Ke(re)&&(Y.current=!1,D.current&&(D.current.value=null,D.current.click()))});return}D.current&&(q({type:"openDialog"}),B(),D.current.value=null,D.current.click())},[q,B,N,x,be,t,a]),ze=F.useCallback(function(ce){!I.current||!I.current.isEqualNode(ce.target)||(ce.key===" "||ce.key==="Enter"||ce.keyCode===32||ce.keyCode===13)&&(ce.preventDefault(),Pe())},[I,Pe]),Ke=F.useCallback(function(){q({type:"focus"})},[]),pt=F.useCallback(function(){q({type:"blur"})},[]),dt=F.useCallback(function(){E||(DKe()?setTimeout(Pe,0):Pe())},[E,Pe]),pe=function(re){return r?null:re},Le=function(re){return C?null:pe(re)},Ue=function(re){return M?null:pe(re)},Ze=function(re){R&&re.stopPropagation()},je=F.useMemo(function(){return function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},re=ce.refKey,$e=re===void 0?"ref":re,qe=ce.role,ot=ce.onKeyDown,et=ce.onFocus,Ft=ce.onBlur,At=ce.onClick,Ct=ce.onDragEnter,qt=ce.onDragOver,yt=ce.onDragLeave,Mt=ce.onDrop,on=kN(ce,PKe);return Ns(Ns(BF({onKeyDown:Le(Jh(ot,ze)),onFocus:Le(Jh(et,Ke)),onBlur:Le(Jh(Ft,pt)),onClick:pe(Jh(At,dt)),onDragEnter:Ue(Jh(Ct,le)),onDragOver:Ue(Jh(qt,ye)),onDragLeave:Ue(Jh(yt,ue)),onDrop:Ue(Jh(Mt,xe)),role:typeof qe=="string"&&qe!==""?qe:"button"},$e,I),!r&&!C?{tabIndex:0}:{}),on)}},[I,ze,Ke,pt,dt,le,ye,ue,xe,C,M,r]),lt=F.useCallback(function(ce){ce.stopPropagation()},[]),st=F.useMemo(function(){return function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},re=ce.refKey,$e=re===void 0?"ref":re,qe=ce.onChange,ot=ce.onClick,et=kN(ce,UKe),Ft=BF({accept:t,multiple:a,type:"file",style:{display:"none"},onChange:pe(Jh(qe,xe)),onClick:pe(Jh(ot,lt)),tabIndex:-1},$e,D);return Ns(Ns({},Ft),et)}},[D,t,a,xe,r]),at=Q.length,Ut=at>0&&RKe({files:Q,accept:t,minSize:o,maxSize:s,multiple:a,maxFiles:l}),mt=at>0&&!Ut;return Ns(Ns({},W),{},{isDragAccept:Ut,isDragReject:mt,isFocused:z&&!r,getRootProps:je,getInputProps:st,rootRef:I,inputRef:D,open:pe(Pe)})}function KKe(n,e){switch(e.type){case"focus":return Ns(Ns({},n),{},{isFocused:!0});case"blur":return Ns(Ns({},n),{},{isFocused:!1});case"openDialog":return Ns(Ns({},$F),{},{isFileDialogActive:!0});case"closeDialog":return Ns(Ns({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,r=e.draggedFiles;return Ns(Ns({},n),{},{draggedFiles:r,isDragActive:t});case"setFiles":return Ns(Ns({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return Ns({},$F);default:return n}}function aj(){}function YKe(n){let e;const t=new Set,r=(c,u)=>{const d=typeof c=="function"?c(e):c;if(d!==e){const f=e;e=u?d:Object.assign({},e,d),t.forEach(p=>p(e,f))}},i=()=>e,s=(c,u=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=u(e);function p(){const g=u(e);if(!d(f,g)){const v=f;c(f=g,v)}}return t.add(p),()=>t.delete(p)},l={setState:r,getState:i,subscribe:(c,u,d)=>u||d?s(c,u,d):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(r,i,l),l}const JKe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),lj=JKe?F.useEffect:F.useLayoutEffect;function ZKe(n){const e=typeof n=="function"?YKe(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=F.useReducer(b=>b+1,0),o=e.getState(),a=F.useRef(o),l=F.useRef(r),c=F.useRef(i),u=F.useRef(!1),d=F.useRef();d.current===void 0&&(d.current=r(o));let f,p=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(f=r(o),p=!i(d.current,f)),lj(()=>{p&&(d.current=f),a.current=o,l.current=r,c.current=i,u.current=!1});const g=F.useRef(o);lj(()=>{const b=()=>{try{const _=e.getState(),E=l.current(_);c.current(d.current,E)||(a.current=_,d.current=E,s())}catch{u.current=!0,s()}},x=e.subscribe(b);return e.getState()!==g.current&&b(),x},[]);const v=p?f:d.current;return F.useDebugValue(v),v};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}const QKe=n=>(e,t,r)=>{const i=r.subscribe;return r.subscribe=(o,a,l)=>{let c=o;if(a){const u=(l==null?void 0:l.equalityFn)||Object.is;let d=o(r.getState());c=f=>{const p=o(f);if(!u(d,p)){const g=d;a(d=p,g)}},l!=null&&l.fireImmediately&&a(d,d)}return i(c)},n(e,t,r)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var e$,cj;function eYe(){return cj||(cj=1,e$=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1}),e$}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var t$,uj;function _se(){if(uj)return t$;uj=1;var n=eYe();function e(t){return n(t)===!0&&Object.prototype.toString.call(t)==="[object Object]"}return t$=function(r){var i,s;return!(e(r)===!1||(i=r.constructor,typeof i!="function")||(s=i.prototype,e(s)===!1)||s.hasOwnProperty("isPrototypeOf")===!1)},t$}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var n$,dj;function X5(){if(dj)return n$;dj=1;var n=_se();return n$=function(t){return n(t)||typeof t=="function"||Array.isArray(t)},n$}/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var r$,hj;function tYe(){return hj||(hj=1,r$=function(e,t,r){for(var i in e)if(t.call(r,e[i],i,e)===!1)break}),r$}var i$,fj;function nYe(){if(fj)return i$;fj=1;var n=X5(),e=tYe();function t(o,a){for(var l=arguments.length,c=0;++c<l;){var u=arguments[c];i(u)&&e(u,r,o)}return o}function r(o,a){if(s(a)){var l=this[a];i(o)&&i(l)?t(l,o):this[a]=o}}function i(o){return n(o)&&!Array.isArray(o)}function s(o){return o!=="__proto__"&&o!=="constructor"&&o!=="prototype"}return i$=t,i$}/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var s$,pj;function rYe(){if(pj)return s$;pj=1,s$=function(t,r,i,s,o){if(!n(t)||!r)return t;if(r=e(r),i&&(r+="."+e(i)),s&&(r+="."+e(s)),o&&(r+="."+e(o)),r in t)return t[r];for(var a=r.split("."),l=a.length,c=-1;t&&++c<l;){for(var u=a[c];u[u.length-1]==="\\";)u=u.slice(0,-1)+"."+a[++c];t=t[u]}return t};function n(t){return t!==null&&(typeof t=="object"||typeof t=="function")}function e(t){return t?Array.isArray(t)?t.join("."):t:""}return s$}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var o$,mj;function iYe(){return mj||(mj=1,o$=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,r=Object(n),i=arguments.length,s=0;++s<i;)for(var o=Object(arguments[s]),a=Object.getOwnPropertySymbols(o),l=0;l<a.length;l++){var c=a[l];t.call(o,c)&&(r[c]=o[c])}return r}),o$}var a$,gj;function sYe(){if(gj)return a$;gj=1;var n=X5(),e=iYe();a$=Object.assign||function(a){if(a===null||typeof a>"u")throw new TypeError("Cannot convert undefined or null to object");s(a)||(a={});for(var l=1;l<arguments.length;l++){var c=arguments[l];r(c)&&(c=i(c)),s(c)&&(t(a,c),e(a,c))}return a};function t(a,l){for(var c in l)o(l,c)&&(a[c]=l[c])}function r(a){return a&&typeof a=="string"}function i(a){var l={};for(var c in a)l[c]=a[c];return l}function s(a){return a&&typeof a=="object"||n(a)}function o(a,l){return Object.prototype.hasOwnProperty.call(a,l)}return a$}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var l$,yj;function oYe(){if(yj)return l$;yj=1;var n=sYe();l$=function(i,s,o){if(typeof i!="string")throw new TypeError("expected a string");typeof s=="function"&&(o=s,s=null),typeof s=="string"&&(s={sep:s});var a=n({sep:"."},s),l=a.quotes||['"',"'","`"],c;a.brackets===!0?c={"<":">","(":")","[":"]","{":"}"}:a.brackets&&(c=a.brackets);var u=[],d=[],f=[""],p=a.sep,g=i.length,v=-1,b;function x(){if(c&&d.length)return c[d[d.length-1]]}for(;++v<g;){var _=i[v],E=i[v+1],C={val:_,idx:v,arr:f,str:i};if(u.push(C),_==="\\"){C.val=r(a,i,v)===!0?_+E:E,C.escaped=!0,typeof o=="function"&&o(C),f[f.length-1]+=C.val,v++;continue}if(c&&c[_]){d.push(_);var M=x(),R=v+1;if(i.indexOf(M,R+1)!==-1)for(;d.length&&R<g;){var L=i[++R];if(L==="\\"){L++;continue}if(l.indexOf(L)!==-1){R=e(i,L,R+1);continue}if(M=x(),d.length&&i.indexOf(M,R+1)===-1)break;if(c[L]){d.push(L);continue}M===L&&d.pop()}if(b=R,b===-1){f[f.length-1]+=_;continue}_=i.slice(v,b+1),C.val=_,C.idx=v=b}if(l.indexOf(_)!==-1){if(b=e(i,_,v+1),b===-1){f[f.length-1]+=_;continue}t(_,a)===!0?_=i.slice(v,b+1):_=i.slice(v+1,b),C.val=_,C.idx=v=b}if(typeof o=="function"&&(o(C,u),_=C.val,v=C.idx),C.val===p&&C.split!==!1){f.push("");continue}f[f.length-1]+=C.val}return f};function e(i,s,o,a){var l=i.indexOf(s,o);return i.charAt(l-1)==="\\"?e(i,s,l+1):l}function t(i,s){return s.keepDoubleQuotes===!0&&i==='"'||s.keepSingleQuotes===!0&&i==="'"?!0:s.keepQuotes}function r(i,s,o){return typeof i.keepEscaping=="function"?i.keepEscaping(s,o):i.keepEscaping===!0||s[o+1]==="\\"}return l$}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var c$,vj;function aYe(){return vj||(vj=1,c$=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),c$}var u$,bj;function lYe(){if(bj)return u$;bj=1;var n=aYe();u$=function(i){n(i)||(i={});for(var s=arguments.length,o=1;o<s;o++){var a=arguments[o];n(a)&&e(i,a)}return i};function e(r,i){for(var s in i)t(i,s)&&(r[s]=i[s])}function t(r,i){return Object.prototype.hasOwnProperty.call(r,i)}return u$}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var d$,xj;function cYe(){return xj||(xj=1,d$=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),d$}/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var h$,Sj;function uYe(){if(Sj)return h$;Sj=1;var n=oYe(),e=lYe(),t=_se(),r=cYe();h$=function(s,o,a){if(!r(s)||(Array.isArray(o)&&(o=[].concat.apply([],o).join(".")),typeof o!="string"))return s;for(var l=n(o,{sep:".",brackets:!0}).filter(i),c=l.length,u=-1,d=s;++u<c;){var f=l[u];if(u!==c-1){r(d[f])||(d[f]={}),d=d[f];continue}t(d[f])&&t(a)?d[f]=e({},d[f],a):d[f]=a}return s};function i(s){return s!=="__proto__"&&s!=="constructor"&&s!=="prototype"}return h$}var f$,wj;function dYe(){if(wj)return f$;wj=1;var n=X5(),e=nYe(),t=rYe(),r=uYe();return f$=function(s,o,a){if(!n(s))throw new TypeError("expected an object");if(typeof o!="string"||a==null)return e.apply(null,arguments);if(typeof a=="string")return r(s,o,a),s;var l=t(s,o);return n(a)&&n(l)&&(a=e({},l,a)),r(s,o,a),s},f$}var hYe=dYe();const fYe=Zp(hYe),q5=(...n)=>n.filter(Boolean).join(".");function pYe(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function mYe(n,e){return Object.entries(sXe(n,e)).reduce((t,[,{value:r,disabled:i,key:s}])=>(t[s]=i?void 0:r,t),{})}function gYe(n,e){const t=F.useRef();return dC(n,t.current)||(t.current=n),t.current}function Cse(n,e){return F.useMemo(n,gYe(e))}function yYe(n){const e=F.useRef(null),t=F.useRef(null),r=F.useRef(!0);return F.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),F.useEffect(()=>{if(r.current){r.current=!1;return}let i;const s=e.current,o=()=>{n&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",o,{once:!0});const{height:a}=t.current.getBoundingClientRect();return s.style.height=a+"px",n||(s.style.overflow="hidden",i=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",o),clearTimeout(i)}},[n]),{wrapperRef:e,contentRef:t}}const vYe=n=>{const[e,t]=F.useState(n.getVisiblePaths());return F.useEffect(()=>{t(n.getVisiblePaths());const r=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:O3});return()=>r()},[n]),e};function bYe(n,e,t){return n.useStore(i=>{const s=tr(tr({},t),i.data);return mYe(s,e)},O3)}function Ese(n=3){const e=F.useRef(null),t=F.useRef(null),[r,i]=F.useState(!1),s=F.useCallback(()=>i(!0),[]),o=F.useCallback(()=>i(!1),[]);return F.useLayoutEffect(()=>{if(r){const{bottom:a,top:l,left:c}=e.current.getBoundingClientRect(),{height:u}=t.current.getBoundingClientRect(),d=a+u>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=c+"px",d==="down"?t.current.style.top=a+n+"px":t.current.style.bottom=window.innerHeight-l+n+"px"}},[n,r]),{popinRef:e,wrapperRef:t,shown:r,show:s,hide:o}}zqe([Hqe]);const xYe={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};Sc.extend({color:()=>n=>Dl(n).isValid()});const SYe=n=>Sc().color().test(n);function Ase(n,{format:e,hasAlpha:t,isString:r}){const i=xYe[e]+(r&&e!=="hex"?"String":""),s=n[i]();return typeof s=="object"&&!t?oXe(s,["a"]):s}const Tse=(n,e)=>{const t=Dl(n);if(!t.isValid())throw Error("Invalid color");return Ase(t,e)},wYe=(n,e)=>Ase(Dl(n),tr(tr({},e),{},{isString:!0,format:"hex"})),_Ye=({value:n})=>{const e=Uqe(n),t=e==="name"?"hex":e,r=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),i={format:t,hasAlpha:r,isString:typeof n=="string"};return{value:Tse(n,i),settings:i}};var CYe=Object.freeze({__proto__:null,schema:SYe,sanitize:Tse,format:wYe,normalize:_Ye});const EYe=Wn("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),AYe=Wn("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),TYe=Wn("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function _j(n,e){return e!=="rgb"?Dl(n).toRgb():n}function MYe({value:n,displayValue:e,settings:t,onUpdate:r}){const{emitOnEditStart:i,emitOnEditEnd:s}=cl(),{format:o,hasAlpha:a}=t,{popinRef:l,wrapperRef:c,shown:u,show:d,hide:f}=Ese(),p=F.useRef(0),[g,v]=F.useState(()=>_j(n,o)),b=a?Kqe:Jqe,x=()=>{v(_j(n,o)),d(),i()},_=()=>{f(),s(),window.clearTimeout(p.current)},E=()=>{p.current=window.setTimeout(_,500)};return F.useEffect(()=>()=>window.clearTimeout(p.current),[]),Ne.createElement(Ne.Fragment,null,Ne.createElement(EYe,{ref:l,active:u,onClick:()=>x(),style:{color:e}}),u&&Ne.createElement(P5,null,Ne.createElement(Kie,{onPointerUp:_}),Ne.createElement(TYe,{ref:c,onMouseEnter:()=>window.clearTimeout(p.current),onMouseLeave:C=>C.buttons===0&&E()},Ne.createElement(b,{color:g,onChange:r}))))}function RYe(){const{value:n,displayValue:e,label:t,onChange:r,onUpdate:i,settings:s}=cl();return Ne.createElement(sd,{input:!0},Ne.createElement(gh,null,t),Ne.createElement(AYe,null,Ne.createElement(MYe,{value:n,displayValue:e,onChange:r,onUpdate:i,settings:s}),Ne.createElement(F5,{value:e,onChange:r,onUpdate:i})))}var NYe=tr({component:RYe},CYe);function IYe(){const{label:n,displayValue:e,onUpdate:t,settings:r}=cl();return Ne.createElement(sd,{input:!0},Ne.createElement(gh,null,n),Ne.createElement(z5,{value:e,settings:r,onUpdate:t}))}var DYe=tr({component:IYe},rse(["x","y","z"]));const kYe=Wn("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),OYe=Wn("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function BYe({value:n,settings:e,onUpdate:t}){const r=F.useRef(),i=F.useRef(0),s=F.useRef(0),o=F.useRef(1),[a,l]=F.useState(!1),[c,u]=F.useState(!1),[d,f]=Jie(),p=F.useRef(null),g=F.useRef(null);F.useLayoutEffect(()=>{if(a){const{top:P,left:G,width:W,height:q}=p.current.getBoundingClientRect();g.current.style.left=G+W/2+"px",g.current.style.top=P+q/2+"px"}},[a]);const{keys:[v,b],joystick:x}=e,_=x==="invertY"?1:-1,{[v]:{step:E},[b]:{step:C}}=e,M=Up("sizes","joystickWidth"),R=Up("sizes","joystickHeight"),L=parseFloat(M)*.8/2,B=parseFloat(R)*.8/2,N=F.useCallback(()=>{r.current||(u(!0),i.current&&f({x:i.current*L}),s.current&&f({y:s.current*-B}),r.current=window.setInterval(()=>{t(P=>{const G=E*i.current*o.current,W=_*C*s.current*o.current;return Array.isArray(P)?{[v]:P[0]+G,[b]:P[1]+W}:{[v]:P[v]+G,[b]:P[b]+W}})},16))},[L,B,t,f,E,C,v,b,_]),I=F.useCallback(()=>{window.clearTimeout(r.current),r.current=void 0,u(!1)},[]);F.useEffect(()=>{function P(G){o.current=Bie(G)}return window.addEventListener("keydown",P),window.addEventListener("keyup",P),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",P),window.removeEventListener("keyup",P)}},[]);const D=p2(({first:P,active:G,delta:[W,q],movement:[z,J]})=>{P&&l(!0);const Q=Pg(z,-L,L),Y=Pg(J,-B,B);i.current=Math.abs(z)>Math.abs(Q)?Math.sign(z-Q):0,s.current=Math.abs(J)>Math.abs(Y)?Math.sign(Y-J):0;let X=n[v],te=n[b];G?(i.current||(X+=W*E*o.current,f({x:Q})),s.current||(te-=_*q*C*o.current,f({y:Y})),i.current||s.current?N():I(),t({[v]:X,[b]:te})):(l(!1),i.current=0,s.current=0,f({x:0,y:0}),I())});return Ne.createElement(kYe,Ys({ref:p},D()),a&&Ne.createElement(P5,null,Ne.createElement(OYe,{ref:g,isOutOfBounds:c},Ne.createElement("div",null),Ne.createElement("span",{ref:d}))))}const $Ye=Wn("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function LYe(){const{label:n,displayValue:e,onUpdate:t,settings:r}=cl();return Ne.createElement(sd,{input:!0},Ne.createElement(gh,null,n),Ne.createElement($Ye,{withJoystick:!!r.joystick},r.joystick&&Ne.createElement(BYe,{value:e,settings:r,onUpdate:t}),Ne.createElement(z5,{value:e,settings:r,onUpdate:t})))}const FYe=["joystick"],Mse=rse(["x","y"]),PYe=n=>{let{joystick:e=!0}=n,t=Ji(n,FYe);const{value:r,settings:i}=Mse.normalize(t);return{value:r,settings:tr(tr({},i),{},{joystick:e})}};var UYe=tr(tr({component:LYe},Mse),{},{normalize:PYe});const zYe=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob |File].")}},HYe=(n,e)=>typeof e=="object"&&"image"in e,VYe=({image:n})=>({value:n});var GYe=Object.freeze({__proto__:null,sanitize:zYe,schema:HYe,normalize:VYe});const WYe=Wn("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),jYe=Wn("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),XYe=Wn("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),qYe=Wn("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),KYe=Wn("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),YYe=Wn("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function JYe(){const{label:n,value:e,onUpdate:t,disabled:r}=cl(),{popinRef:i,wrapperRef:s,shown:o,show:a,hide:l}=Ese(),c=F.useCallback(g=>{g.length&&t(g[0])},[t]),u=F.useCallback(g=>{g.stopPropagation(),t(void 0)},[t]),{getRootProps:d,getInputProps:f,isDragAccept:p}=wse({maxFiles:1,accept:"image/*",onDrop:c,disabled:r});return Ne.createElement(sd,{input:!0},Ne.createElement(gh,null,n),Ne.createElement(WYe,null,Ne.createElement(XYe,{ref:i,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&Ne.createElement(P5,null,Ne.createElement(Kie,{onPointerUp:l,style:{cursor:"pointer"}}),Ne.createElement(qYe,{ref:s,style:{backgroundImage:`url(${e})`}})),Ne.createElement(jYe,d({isDragAccept:p}),Ne.createElement("input",f()),Ne.createElement(KYe,null,p?"drop image":"click or drop")),Ne.createElement(YYe,{onClick:u,disabled:!e})))}var ZYe=tr({component:JYe},GYe);const Cj=Sc().number(),QYe=(n,e)=>Sc().array().length(2).every.number().test(n)&&Sc().schema({min:Cj,max:Cj}).test(e),ON=n=>({min:n[0],max:n[1]}),Rse=(n,{bounds:[e,t]},r)=>{const i=Array.isArray(n)?ON(n):n,s={min:r[0],max:r[1]},{min:o,max:a}=tr(tr({},s),i);return[Pg(Number(o),e,Math.max(e,a)),Pg(Number(a),Math.min(t,o),t)]},eJe=({value:n,min:e,max:t})=>{const r={min:e,max:t},i=nse(ON(n),{min:r,max:r}),s=[e,t],o=tr(tr({},i),{},{bounds:s});return{value:Rse(ON(n),o,n),settings:o}};var tJe=Object.freeze({__proto__:null,schema:QYe,format:ON,sanitize:Rse,normalize:eJe});const nJe=["value","bounds","onDrag"],rJe=["bounds"],iJe=Wn("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function sJe(n){let{value:e,bounds:[t,r],onDrag:i}=n,s=Ji(n,nJe);const o=F.useRef(null),a=F.useRef(null),l=F.useRef(null),c=F.useRef(0),u=Up("sizes","scrubberWidth"),d=p2(({event:g,first:v,xy:[b],movement:[x],memo:_={}})=>{if(v){const{width:C,left:M}=o.current.getBoundingClientRect();c.current=C-parseFloat(u);const R=(g==null?void 0:g.target)===a.current||(g==null?void 0:g.target)===l.current;_.pos=RN((b-M)/C,t,r);const L=Math.abs(_.pos-e.min)-Math.abs(_.pos-e.max);_.key=L<0||L===0&&_.pos<=e.min?"min":"max",R&&(_.pos=e[_.key])}const E=_.pos+RN(x/c.current,0,r-t);return i({[_.key]:XXe(E,s[_.key])}),_}),f=`calc(${MN(e.min,t,r)} * (100% - ${u} - 8px) + 4px)`,p=`calc(${1-MN(e.max,t,r)} * (100% - ${u} - 8px) + 4px)`;return Ne.createElement(Qie,Ys({ref:o},d()),Ne.createElement(Zie,null,Ne.createElement(ese,{style:{left:f,right:p}})),Ne.createElement(AF,{position:"left",ref:a,style:{left:f}}),Ne.createElement(AF,{position:"right",ref:l,style:{right:p}}))}function oJe(){const{label:n,displayValue:e,onUpdate:t,settings:r}=cl(),i=Ji(r,rJe);return Ne.createElement(Ne.Fragment,null,Ne.createElement(sd,{input:!0},Ne.createElement(gh,null,n),Ne.createElement(iJe,null,Ne.createElement(sJe,Ys({value:e},r,{onDrag:t})),Ne.createElement(z5,{value:e,settings:i,onUpdate:t,innerLabelTrim:0}))))}var aJe=tr({component:oJe},tJe);const lJe=()=>{const n=new Map;return{on:(e,t)=>{let r=n.get(e);r===void 0&&(r=new Set,n.set(e,r)),r.add(t)},off:(e,t)=>{const r=n.get(e);r!==void 0&&(r.delete(t),r.size===0&&n.delete(e))},emit:(e,...t)=>{const r=n.get(e);if(r!==void 0)for(const i of r)i(...t)}}},cJe=["type","value"],uJe=["onChange","transient","onEditStart","onEditEnd"],dJe=function(){const e=ZKe(QKe(()=>({data:{}}))),t=lJe();this.storeId=iXe(),this.useStore=e;const r={},i=new Set;this.getVisiblePaths=()=>{const o=this.getData(),a=Object.keys(o),l=[];Object.entries(r).forEach(([u,d])=>{d.render&&a.some(f=>f.indexOf(u)===0)&&!d.render(this.get)&&l.push(u+".")});const c=[];return i.forEach(u=>{u in o&&o[u].__refCount>0&&l.every(d=>u.indexOf(d)===-1)&&(!o[u].render||o[u].render(this.get))&&c.push(u)}),c},this.setOrderedPaths=o=>{o.forEach(a=>i.add(a))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{e.setState(a=>{const l=a.data;return o.forEach(c=>{if(c in l){const u=l[c];u.__refCount--,u.__refCount===0&&u.type in ih&&delete l[c]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=o=>r[o]||{},this.getData=()=>e.getState().data,this.addData=(o,a)=>{e.setState(l=>{const c=l.data;return Object.entries(o).forEach(([u,d])=>{let f=c[u];if(f){const{type:p,value:g}=d,v=Ji(d,cJe);p!==f.type?Dp(Is.INPUT_TYPE_OVERRIDE,p):((f.__refCount===0||a)&&Object.assign(f,v),f.__refCount++)}else c[u]=tr(tr({},d),{},{__refCount:1})}),{data:c}})},this.setValueAtPath=(o,a,l)=>{e.setState(c=>{const u=c.data;return $W(u[o],a,o,this,l),{data:u}})},this.setSettingsAtPath=(o,a)=>{e.setState(l=>{const c=l.data;return c[o].settings=tr(tr({},c[o].settings),a),{data:c}})},this.disableInputAtPath=(o,a)=>{e.setState(l=>{const c=l.data;return c[o].disabled=a,{data:c}})},this.set=(o,a)=>{e.setState(l=>{const c=l.data;return Object.entries(o).forEach(([u,d])=>{try{$W(c[u],d,void 0,void 0,a)}catch{}}),{data:c}})},this.getInput=o=>{try{return this.getData()[o]}catch{Dp(Is.PATH_DOESNT_EXIST,o)}},this.get=o=>{var a;return(a=this.getInput(o))===null||a===void 0?void 0:a.value},this.emitOnEditStart=o=>{t.emit(`onEditStart:${o}`,this.get(o),o,tr(tr({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{t.emit(`onEditEnd:${o}`,this.get(o),o,tr(tr({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,a)=>{const l=`onEditStart:${o}`;return t.on(l,a),()=>t.off(l,a)},this.subscribeToEditEnd=(o,a)=>{const l=`onEditEnd:${o}`;return t.on(l,a),()=>t.off(l,a)};const s=(o,a,l)=>{const c={};return Object.entries(o).forEach(([u,d])=>{if(u==="")return Dp(Is.EMPTY_KEY);let f=q5(a,u);if(d.type===ih.FOLDER){const p=s(d.schema,f,l);Object.assign(c,p),f in r||(r[f]=d.settings)}else if(u in l)Dp(Is.DUPLICATE_KEYS,u,f,l[u].path);else{const p=hXe(d,u,f,c);if(p){const{type:g,options:v,input:b}=p,{onChange:x,transient:_,onEditStart:E,onEditEnd:C}=v,M=Ji(v,uJe);c[f]=tr(tr(tr({type:g},M),b),{},{fromPanel:!0}),l[u]={path:f,onChange:x,transient:_,onEditStart:E,onEditEnd:C}}else Dp(Is.UNKNOWN_INPUT,f,d)}}),c};this.getDataFromSchema=o=>{const a={};return[s(o,"",a),a]}},Nse=new dJe,hJe={collapsed:!1};function fJe(n,e){return{type:ih.FOLDER,schema:n,settings:tr(tr({},hJe),e)}}const Ej=n=>"__levaInput"in n,pJe=(n,e)=>{const t={},r=e?e.toLowerCase():null;return n.forEach(i=>{const[s,o]=pYe(i);(!r||s.toLowerCase().indexOf(r)>-1)&&fYe(t,o,{[s]:{__levaInput:!0,path:i}})}),t},mJe=["type","label","path","valueKey","value","settings","setValue","disabled"];function gJe(n){let{type:e,label:t,path:r,valueKey:i,value:s,settings:o,setValue:a,disabled:l}=n,c=Ji(n,mJe);const{displayValue:u,onChange:d,onUpdate:f}=Yie({type:e,value:s,settings:o,setValue:a}),p=Ev[e].component;return p?Ne.createElement(Uie.Provider,{value:tr({key:i,path:r,id:""+r,label:t,displayValue:u,value:s,onChange:d,onUpdate:f,settings:o,setValue:a,disabled:l},c)},Ne.createElement(IXe,{disabled:l},Ne.createElement(p,null))):(Dp(Is.NO_COMPONENT_FOR_TYPE,e,r),null)}const yJe=Wn("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function vJe({onClick:n,settings:e,label:t}){const r=f2();return Ne.createElement(sd,null,Ne.createElement(yJe,{disabled:e.disabled,onClick:()=>n(r.get)},t))}const bJe=Wn("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),xJe=Wn("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),SJe=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,r=e;return typeof e.opts=="object"&&(r.label!==void 0&&(t=e.label),r=e.opts),{label:t,opts:r}};function wJe(n){const{label:e,opts:t}=SJe(n),r=f2();return Ne.createElement(sd,{input:!!e},e&&Ne.createElement(gh,null,e),Ne.createElement(bJe,null,Object.entries(t).map(([i,s])=>Ne.createElement(xJe,{key:i,onClick:()=>s(r.get)},i))))}const _Je=Wn("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),Ise=100;function CJe(n,e){n.push(e),n.length>Ise&&n.shift()}const EJe=F.forwardRef(function({initialValue:n},e){const t=Up("colors","highlight3"),r=Up("colors","elevation2"),i=Up("colors","highlight1"),[s,o]=F.useMemo(()=>[Dl(i).alpha(.4).toRgbString(),Dl(i).alpha(.1).toRgbString()],[i]),a=F.useRef([n]),l=F.useRef(n),c=F.useRef(n),u=F.useRef(),d=F.useCallback((g,v)=>{if(!g)return;const{width:b,height:x}=g,_=new Path2D,E=b/Ise,C=x*.05;for(let L=0;L<a.current.length;L++){const B=MN(a.current[L],l.current,c.current),N=E*L,I=x-B*(x-C*2)-C;_.lineTo(N,I)}v.clearRect(0,0,b,x);const M=new Path2D(_);M.lineTo(E*(a.current.length+1),x),M.lineTo(0,x),M.lineTo(0,0);const R=v.createLinearGradient(0,0,0,x);R.addColorStop(0,s),R.addColorStop(1,o),v.fillStyle=R,v.fill(M),v.strokeStyle=r,v.lineJoin="round",v.lineWidth=14,v.stroke(_),v.strokeStyle=t,v.lineWidth=2,v.stroke(_)},[t,r,s,o]),[f,p]=UXe(d);return F.useImperativeHandle(e,()=>({frame:g=>{(l.current===void 0||g<l.current)&&(l.current=g),(c.current===void 0||g>c.current)&&(c.current=g),CJe(a.current,g),u.current=requestAnimationFrame(()=>d(f.current,p.current))}}),[f,p,d]),F.useEffect(()=>()=>cancelAnimationFrame(u.current),[]),Ne.createElement(_Je,{ref:f})}),Aj=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),AJe=F.forwardRef(function({initialValue:n},e){const[t,r]=F.useState(Aj(n));return F.useImperativeHandle(e,()=>({frame:i=>r(Aj(i))}),[]),Ne.createElement("div",null,t)});function Tj(n){return typeof n=="function"?n():n.current}function TJe({label:n,objectOrFn:e,settings:t}){const r=F.useRef(),i=F.useRef(Tj(e));return F.useEffect(()=>{const s=window.setInterval(()=>{var o;document.hidden||(o=r.current)===null||o===void 0||o.frame(Tj(e))},t.interval);return()=>window.clearInterval(s)},[e,t.interval]),Ne.createElement(sd,{input:!0},Ne.createElement(gh,{align:"top"},n),t.graph?Ne.createElement(EJe,{ref:r,initialValue:i.current}):Ne.createElement(AJe,{ref:r,initialValue:i.current}))}const MJe=["type","label","key"],RJe={[ih.BUTTON]:vJe,[ih.BUTTON_GROUP]:wJe,[ih.MONITOR]:TJe},NJe=Ne.memo(({path:n})=>{const[e,{set:t,setSettings:r,disable:i,storeId:s,emitOnEditStart:o,emitOnEditEnd:a}]=HXe(n);if(!e)return null;const{type:l,label:c,key:u}=e,d=Ji(e,MJe);if(l in ih){const f=RJe[l];return Ne.createElement(f,Ys({label:c,path:n},d))}return l in Ev?Ne.createElement(gJe,Ys({key:s+n,type:l,label:c,storeId:s,path:n,valueKey:u,setValue:t,setSettings:r,disable:i,emitOnEditStart:o,emitOnEditEnd:a},d)):(Y7e(Is.UNSUPPORTED_INPUT,l,n),null)});function IJe({toggle:n,toggled:e,name:t}){return Ne.createElement(MXe,{onClick:()=>n()},Ne.createElement(U5,{toggled:e}),Ne.createElement("div",null,t))}const DJe=({name:n,path:e,tree:t})=>{const r=f2(),i=q5(e,n),{collapsed:s,color:o}=r.getFolderSettings(i),[a,l]=F.useState(!s),c=F.useRef(null),u=Up("colors","folderWidgetColor"),d=Up("colors","folderTextColor");return F.useLayoutEffect(()=>{c.current.style.setProperty("--leva-colors-folderWidgetColor",o||u),c.current.style.setProperty("--leva-colors-folderTextColor",o||d)},[o,u,d]),Ne.createElement(NN,{ref:c},Ne.createElement(IJe,{name:n,toggled:a,toggle:()=>l(f=>!f)}),Ne.createElement(Dse,{parent:i,tree:t,toggled:a}))},Dse=Ne.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:r,tree:i,toggled:s})=>{const{wrapperRef:o,contentRef:a}=yYe(s),l=f2(),c=([d,f])=>{var p;return(Ej(f)?(p=l.getInput(f.path))===null||p===void 0?void 0:p.order:l.getFolderSettings(q5(r,d)).order)||0},u=Object.entries(i).sort((d,f)=>c(d)-c(f));return Ne.createElement(CF,{ref:o,isRoot:n,fill:e,flat:t},Ne.createElement(jie,{ref:a,isRoot:n,toggled:s},u.map(([d,f])=>Ej(f)?Ne.createElement(NJe,{key:f.path,valueKey:f.valueKey,path:f.path}):Ne.createElement(DJe,{key:d,name:d,path:r,tree:f}))))}),kJe=Wn("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${qie}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),kse=40,BN=Wn("i",{$flexCenter:"",width:kse,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),OJe=Wn("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),BJe=Wn("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${BN}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),$Je=Wn("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),LJe=Wn("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:kse}}}}),FJe=Ne.forwardRef(({setFilter:n,toggle:e},t)=>{const[r,i]=F.useState(""),s=F.useMemo(()=>Oie(n,250),[n]),o=()=>{n(""),i("")},a=l=>{const c=l.currentTarget.value;e(!0),i(c)};return F.useEffect(()=>{s(r)},[r,s]),Ne.createElement(Ne.Fragment,null,Ne.createElement($Je,{ref:t,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:a}),Ne.createElement(BN,{onClick:()=>o(),style:{visibility:r?"visible":"hidden"}},Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},Ne.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function PJe({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:r,toggle:i,toggled:s,title:o,drag:a,filterEnabled:l,from:c}){const[u,d]=F.useState(!1),f=F.useRef(null);F.useEffect(()=>{var g,v;u?(g=f.current)===null||g===void 0||g.focus():(v=f.current)===null||v===void 0||v.blur()},[u]);const p=p2(({offset:[g,v],first:b,last:x})=>{e({x:g,y:v}),b&&t({x:g,y:v}),x&&r({x:g,y:v})},{filterTaps:!0,from:({offset:[g,v]})=>[(c==null?void 0:c.x)||g,(c==null?void 0:c.y)||v]});return F.useEffect(()=>{const g=v=>{v.key==="L"&&v.shiftKey&&v.metaKey&&d(b=>!b)};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[]),Ne.createElement(Ne.Fragment,null,Ne.createElement(OJe,{mode:a?"drag":void 0},Ne.createElement(BN,{active:!s,onClick:()=>i()},Ne.createElement(U5,{toggled:s,width:12,height:8})),Ne.createElement(LJe,Ys({},a?p():{},{drag:a,filterEnabled:l}),o===void 0&&a?Ne.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},Ne.createElement("circle",{cx:"2",cy:"2",r:"2"}),Ne.createElement("circle",{cx:"14",cy:"2",r:"2"}),Ne.createElement("circle",{cx:"26",cy:"2",r:"2"}),Ne.createElement("circle",{cx:"2",cy:"12",r:"2"}),Ne.createElement("circle",{cx:"14",cy:"12",r:"2"}),Ne.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),l&&Ne.createElement(BN,{active:u,onClick:()=>d(g=>!g)},Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},Ne.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),Ne.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),Ne.createElement(BJe,{toggled:u},Ne.createElement(FJe,{ref:f,setFilter:n,toggle:i})))}const UJe=["store","hidden","theme","collapsed"];function zJe(n){let{store:e,hidden:t=!1,theme:r,collapsed:i=!1}=n,s=Ji(n,UJe);const o=Cse(()=>wXe(r),[r]),[a,l]=F.useState(!i),c=typeof i=="object"?!i.collapsed:a,u=F.useMemo(()=>typeof i=="object"?d=>{typeof d=="function"?i.onChange(!d(!i.collapsed)):i.onChange(!d)}:l,[i]);return!e||t?null:Ne.createElement(L5.Provider,{value:o},Ne.createElement(HJe,Ys({store:e},s,{toggled:c,setToggle:u,rootClass:o.className})))}const HJe=Ne.memo(({store:n,rootClass:e,fill:t=!1,flat:r=!1,neverHide:i=!1,oneLineLabels:s=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:l,setToggle:c})=>{var u,d;const f=vYe(n),[p,g]=F.useState(""),v=F.useMemo(()=>pJe(f,p),[f,p]),[b,x]=Jie(),_=i||f.length>0,E=typeof o=="object"&&o.title||void 0,C=typeof o=="object"&&(u=o.drag)!==null&&u!==void 0?u:!0,M=typeof o=="object"&&(d=o.filter)!==null&&d!==void 0?d:!0,R=typeof o=="object"&&o.position||void 0,L=typeof o=="object"&&o.onDrag||void 0,B=typeof o=="object"&&o.onDragStart||void 0,N=typeof o=="object"&&o.onDragEnd||void 0;return Ne.useEffect(()=>{x({x:R==null?void 0:R.x,y:R==null?void 0:R.y})},[R,x]),SXe(),Ne.createElement(Hie.Provider,{value:{hideCopyButton:a}},Ne.createElement(kJe,{ref:b,className:e,fill:t,flat:r,oneLineLabels:s,hideTitleBar:!o,style:{display:_?"block":"none"}},o&&Ne.createElement(PJe,{onDrag:I=>{x(I),L==null||L(I)},onDragStart:I=>B==null?void 0:B(I),onDragEnd:I=>N==null?void 0:N(I),setFilter:g,toggle:I=>c(D=>I??!D),toggled:l,title:E,drag:C,filterEnabled:M,from:R}),_&&Ne.createElement(zie.Provider,{value:n},Ne.createElement(Dse,{isRoot:!0,fill:t,flat:r,tree:v,toggled:l}))))}),VJe=["isRoot"];let $N=!1,Py=null;function K5(n){let{isRoot:e=!1}=n,t=Ji(n,VJe);return F.useEffect(()=>($N=!0,!e&&Py&&(Py.remove(),Py=null),()=>{e||($N=!1)}),[e]),Ne.createElement(zJe,Ys({store:Nse},t))}function GJe(n){F.useEffect(()=>{n&&!$N&&(Py||(Py=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(Py),qX.createRoot(Py).render(Ne.createElement(K5,{isRoot:!0})))),$N=!0)},[n])}function WJe(n,e,t,r,i){let s,o,a,l,c;return typeof n=="string"?(o=n,s=e,Array.isArray(t)?c=t:t&&("store"in t?(l=t,c=r):(a=t,Array.isArray(r)?c=r:(l=r,c=i)))):(s=n,Array.isArray(e)?c=e:(l=e,c=t)),{schema:s,folderName:o,folderSettings:a,hookSettings:l,deps:c||[]}}function Ry(n,e,t,r,i){const{folderName:s,schema:o,folderSettings:a,hookSettings:l,deps:c}=WJe(n,e,t,r,i),u=typeof o=="function",d=F.useRef(!1),f=F.useRef(!0),p=Cse(()=>{d.current=!0;const D=typeof o=="function"?o():o;return s?{[s]:fJe(D,a)}:D},c),g=!(l!=null&&l.store);GJe(g);const[v]=F.useState(()=>(l==null?void 0:l.store)||Nse),[b,x]=F.useMemo(()=>v.getDataFromSchema(p),[v,p]),[_,E,C,M,R]=F.useMemo(()=>{const D=[],P=[],G={},W={},q={};return Object.values(x).forEach(({path:z,onChange:J,onEditStart:Q,onEditEnd:Y,transient:X})=>{D.push(z),J?(G[z]=J,X||P.push(z)):P.push(z),Q&&(W[z]=Q),Y&&(q[z]=Y)}),[D,P,G,W,q]},[x]),L=F.useMemo(()=>v.orderPaths(_),[_,v]),B=bYe(v,E,b),N=F.useCallback(D=>{const P=Object.entries(D).reduce((G,[W,q])=>Object.assign(G,{[x[W].path]:q}),{});v.set(P,!1)},[v,x]),I=F.useCallback(D=>v.get(x[D].path),[v,x]);return F.useEffect(()=>{const D=!f.current&&d.current;return v.addData(b,D),f.current=!1,d.current=!1,()=>v.disposePaths(L)},[v,L,b]),F.useEffect(()=>{const D=[];return Object.entries(C).forEach(([P,G])=>{G(v.get(P),P,tr({initial:!0,get:v.get},v.getInput(P)));const W=v.useStore.subscribe(q=>{const z=q.data[P];return[z.disabled?void 0:z.value,z]},([q,z])=>G(q,P,tr({initial:!1,get:v.get},z)),{equalityFn:O3});D.push(W)}),()=>D.forEach(P=>P())},[v,C]),F.useEffect(()=>{const D=[];return Object.entries(M).forEach(([P,G])=>D.push(v.subscribeToEditStart(P,G))),Object.entries(R).forEach(([P,G])=>D.push(v.subscribeToEditEnd(P,G))),()=>D.forEach(P=>P())},[M,R,v]),u?[B,N,I]:B}lm(ch.SELECT,sqe);lm(ch.IMAGE,ZYe);lm(ch.NUMBER,KXe);lm(ch.COLOR,NYe);lm(ch.STRING,pqe);lm(ch.BOOLEAN,Sqe);lm(ch.INTERVAL,aJe);lm(ch.VECTOR3D,DYe);lm(ch.VECTOR2D,UYe);function I_(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function LF(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function jJe(n,e){if(n){if(typeof n=="string")return LF(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return LF(n,e)}}function XJe(n){if(Array.isArray(n))return LF(n)}function qJe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function KJe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YJe(n){return XJe(n)||qJe(n)||jJe(n)||KJe()}new Nt;new Nt;function JJe(n,e,t){return Math.max(e,Math.min(t,n))}function ZJe(n,e){return JJe(n-Math.floor(n/e)*e,0,e)}function QJe(n,e){var t=ZJe(e-n,Math.PI*2);return t>Math.PI&&(t-=Math.PI*2),t}function Ose(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var Du=function n(e,t,r){var i=this;Ose(this,n),I_(this,"dot2",function(s,o){return i.x*s+i.y*o}),I_(this,"dot3",function(s,o,a){return i.x*s+i.y*o+i.z*a}),this.x=e,this.y=t,this.z=r},eZe=[new Du(1,1,0),new Du(-1,1,0),new Du(1,-1,0),new Du(-1,-1,0),new Du(1,0,1),new Du(-1,0,1),new Du(1,0,-1),new Du(-1,0,-1),new Du(0,1,1),new Du(0,-1,1),new Du(0,1,-1),new Du(0,-1,-1)],Mj=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],Rj=new Array(512),Nj=new Array(512),tZe=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var r;t&1?r=Mj[t]^e&255:r=Mj[t]^e>>8&255,Rj[t]=Rj[t+256]=r,Nj[t]=Nj[t+256]=eZe[r%12]}};tZe(0);function nZe(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function Ij(n){var e=nZe(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var rZe=function n(e){var t=this;Ose(this,n),I_(this,"seed",0),I_(this,"init",function(r){t.seed=r,t.value=Ij(r)}),I_(this,"value",Ij(this.seed)),this.init(e)};new rZe(Math.random());var iZe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return r/Math.atan(1/t)*Math.atan(Math.sin(2*Math.PI*e*i)/t)},Bse=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)},sZe=function(e){return e},oZe={in:function(e){return 1-Math.cos(e*Math.PI/2)},out:function(e){return Math.sin(e*Math.PI/2)},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},aZe={in:function(e){return e*e*e},out:function(e){return 1-Math.pow(1-e,3)},inOut:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}},lZe={in:function(e){return e*e*e*e*e},out:function(e){return 1-Math.pow(1-e,5)},inOut:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}},cZe={in:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},out:function(e){return Math.sqrt(1-Math.pow(e-1,2))},inOut:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}},uZe={in:function(e){return e*e*e*e},out:function(e){return 1- --e*e*e*e},inOut:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}},dZe={in:function(e){return e===0?0:Math.pow(2,10*e-10)},out:function(e){return e===1?1:1-Math.pow(2,-10*e)},inOut:function(e){return e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}};function Ho(n,e,t){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Bse,a=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,l="velocity_"+e;if(n.__damp===void 0&&(n.__damp={}),n.__damp[l]===void 0&&(n.__damp[l]=0),Math.abs(n[e]-t)<=a)return n[e]=t,!1;r=Math.max(1e-4,r);var c=2/r,u=o(c*i),d=n[e]-t,f=t,p=s*r;d=Math.min(Math.max(d,-p),p),t=n[e]-d;var g=(n.__damp[l]+c*d)*i;n.__damp[l]=(n.__damp[l]-c*g)*u;var v=t+(d+g)*u;return f-n[e]>0==v>f&&(v=f,n.__damp[l]=(v-f)/i),n[e]=v,!0}var hZe=function(e){return e&&e.isCamera},fZe=function(e){return e&&e.isLight},Pw=new ve,Dj=new _s,kj=new _s,Uw=new zn,p$=new ve;function pZe(n,e,t,r,i,s,o){typeof e=="number"?Pw.setScalar(e):Array.isArray(e)?Pw.set(e[0],e[1],e[2]):Pw.copy(e);var a=n.parent;n.updateWorldMatrix(!0,!1),p$.setFromMatrixPosition(n.matrixWorld),hZe(n)||fZe(n)?Uw.lookAt(p$,Pw,n.up):Uw.lookAt(Pw,p$,n.up),LN(n.quaternion,kj.setFromRotationMatrix(Uw),t,r,i,s,o),a&&(Uw.extractRotation(a.matrixWorld),Dj.setFromRotationMatrix(Uw),LN(n.quaternion,kj.copy(n.quaternion).premultiply(Dj.invert()),t,r,i,s,o))}function Xx(n,e,t,r,i,s,o,a){return Ho(n,e,n[e]+QJe(n[e],t),r,i,s,o,a)}var zw=new Nt,Oj,Bj;function mZe(n,e,t,r,i,s,o){return typeof e=="number"?zw.setScalar(e):Array.isArray(e)?zw.set(e[0],e[1]):zw.copy(e),Oj=Ho(n,"x",zw.x,t,r,i,s,o),Bj=Ho(n,"y",zw.y,t,r,i,s,o),Oj||Bj}var xx=new ve,$j,Lj,Fj;function FF(n,e,t,r,i,s,o){return typeof e=="number"?xx.setScalar(e):Array.isArray(e)?xx.set(e[0],e[1],e[2]):xx.copy(e),$j=Ho(n,"x",xx.x,t,r,i,s,o),Lj=Ho(n,"y",xx.y,t,r,i,s,o),Fj=Ho(n,"z",xx.z,t,r,i,s,o),$j||Lj||Fj}var fy=new Hr,Pj,Uj,zj,Hj;function gZe(n,e,t,r,i,s,o){return typeof e=="number"?fy.setScalar(e):Array.isArray(e)?fy.set(e[0],e[1],e[2],e[3]):fy.copy(e),Pj=Ho(n,"x",fy.x,t,r,i,s,o),Uj=Ho(n,"y",fy.y,t,r,i,s,o),zj=Ho(n,"z",fy.z,t,r,i,s,o),Hj=Ho(n,"w",fy.w,t,r,i,s,o),Pj||Uj||zj||Hj}var Hw=new Ac,Vj,Gj,Wj;function yZe(n,e,t,r,i,s,o){return Array.isArray(e)?Hw.set(e[0],e[1],e[2],e[3]):Hw.copy(e),Vj=Xx(n,"x",Hw.x,t,r,i,s,o),Gj=Xx(n,"y",Hw.y,t,r,i,s,o),Wj=Xx(n,"z",Hw.z,t,r,i,s,o),Vj||Gj||Wj}var Sx=new rn,jj,Xj,qj;function vZe(n,e,t,r,i,s,o){return e instanceof rn?Sx.copy(e):Array.isArray(e)?Sx.setRGB(e[0],e[1],e[2]):Sx.set(e),jj=Ho(n,"r",Sx.r,t,r,i,s,o),Xj=Ho(n,"g",Sx.g,t,r,i,s,o),qj=Ho(n,"b",Sx.b,t,r,i,s,o),jj||Xj||qj}var Ud=new _s,xp=new Hr,Kj=new Hr,Vw=new Hr,Yj,Jj,Zj,Qj;function LN(n,e,t,r,i,s,o){var a=n;Array.isArray(e)?Ud.set(e[0],e[1],e[2],e[3]):Ud.copy(e);var l=n.dot(Ud)>0?1:-1;return Ud.x*=l,Ud.y*=l,Ud.z*=l,Ud.w*=l,Yj=Ho(n,"x",Ud.x,t,r,i,s,o),Jj=Ho(n,"y",Ud.y,t,r,i,s,o),Zj=Ho(n,"z",Ud.z,t,r,i,s,o),Qj=Ho(n,"w",Ud.w,t,r,i,s,o),xp.set(n.x,n.y,n.z,n.w).normalize(),Kj.set(a.__damp.velocity_x,a.__damp.velocity_y,a.__damp.velocity_z,a.__damp.velocity_w),Vw.copy(xp).multiplyScalar(Kj.dot(xp)/xp.dot(xp)),a.__damp.velocity_x-=Vw.x,a.__damp.velocity_y-=Vw.y,a.__damp.velocity_z-=Vw.z,a.__damp.velocity_w-=Vw.w,n.set(xp.x,xp.y,xp.z,xp.w),Yj||Jj||Zj||Qj}var Gw=new $R,e7,t7,n7;function bZe(n,e,t,r,i,s,o){return Array.isArray(e)?Gw.set(e[0],e[1],e[2]):Gw.copy(e),e7=Ho(n,"radius",Gw.radius,t,r,i,s,o),t7=Xx(n,"phi",Gw.phi,t,r,i,s,o),n7=Xx(n,"theta",Gw.theta,t,r,i,s,o),e7||t7||n7}var iM=new zn,r7=new ve,i7=new _s,s7=new ve,o7,a7,l7;function xZe(n,e,t,r,i,s,o){var a=n;return a.__damp===void 0&&(a.__damp={position:new ve,rotation:new _s,scale:new ve},n.decompose(a.__damp.position,a.__damp.rotation,a.__damp.scale)),Array.isArray(e)?iM.set.apply(iM,YJe(e)):iM.copy(e),iM.decompose(r7,i7,s7),o7=FF(a.__damp.position,r7,t,r,i,s,o),a7=LN(a.__damp.rotation,i7,t,r,i,s,o),l7=FF(a.__damp.scale,s7,t,r,i,s,o),n.compose(a.__damp.position,a.__damp.rotation,a.__damp.scale),o7||a7||l7}var SZe=Object.freeze({__proto__:null,rsqw:iZe,exp:Bse,linear:sZe,sine:oZe,cubic:aZe,quint:lZe,circ:cZe,quart:uZe,expo:dZe,damp:Ho,dampLookAt:pZe,dampAngle:Xx,damp2:mZe,damp3:FF,damp4:gZe,dampE:yZe,dampC:vZe,dampQ:LN,dampS:bZe,dampM:xZe});const H3=parseInt(_C.replace(/\D+/g,""));function c7(n,e){if(e===Mq)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===IR||e===AP){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(t)if(e===IR)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var zu=Uint8Array,pg=Uint16Array,PF=Uint32Array,$se=new zu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Lse=new zu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wZe=new zu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Fse=function(n,e){for(var t=new pg(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new PF(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},Pse=Fse($se,2),Use=Pse[0],_Ze=Pse[1];Use[28]=258,_Ze[258]=28;var CZe=Fse(Lse,0),EZe=CZe[0],UF=new pg(32768);for(var ds=0;ds<32768;++ds){var ng=(ds&43690)>>>1|(ds&21845)<<1;ng=(ng&52428)>>>2|(ng&13107)<<2,ng=(ng&61680)>>>4|(ng&3855)<<4,UF[ds]=((ng&65280)>>>8|(ng&255)<<8)>>>1}var D_=function(n,e,t){for(var r=n.length,i=0,s=new pg(e);i<r;++i)++s[n[i]-1];var o=new pg(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new pg(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var c=i<<4|n[i],u=e-n[i],d=o[n[i]-1]++<<u,f=d|(1<<u)-1;d<=f;++d)a[UF[d]>>>l]=c}else for(a=new pg(r),i=0;i<r;++i)n[i]&&(a[i]=UF[o[n[i]-1]++]>>>15-n[i]);return a},y2=new zu(288);for(var ds=0;ds<144;++ds)y2[ds]=8;for(var ds=144;ds<256;++ds)y2[ds]=9;for(var ds=256;ds<280;++ds)y2[ds]=7;for(var ds=280;ds<288;++ds)y2[ds]=8;var zse=new zu(32);for(var ds=0;ds<32;++ds)zse[ds]=5;var AZe=D_(y2,9,1),TZe=D_(zse,5,1),m$=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},zd=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},g$=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},MZe=function(n){return(n/8|0)+(n&7&&1)},RZe=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof pg?pg:n instanceof PF?PF:zu)(t-e);return r.set(n.subarray(e,t)),r},NZe=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new zu(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new zu(r*3));var o=function(be){var xe=e.length;if(be>xe){var Pe=new zu(Math.max(xe*2,be));Pe.set(e),e=Pe}},a=t.f||0,l=t.p||0,c=t.b||0,u=t.l,d=t.d,f=t.m,p=t.n,g=r*8;do{if(!u){t.f=a=zd(n,l,1);var v=zd(n,l+1,3);if(l+=3,v)if(v==1)u=AZe,d=TZe,f=9,p=5;else if(v==2){var E=zd(n,l,31)+257,C=zd(n,l+10,15)+4,M=E+zd(n,l+5,31)+1;l+=14;for(var R=new zu(M),L=new zu(19),B=0;B<C;++B)L[wZe[B]]=zd(n,l+B*3,7);l+=C*3;for(var N=m$(L),I=(1<<N)-1,D=D_(L,N,1),B=0;B<M;){var P=D[zd(n,l,I)];l+=P&15;var b=P>>>4;if(b<16)R[B++]=b;else{var G=0,W=0;for(b==16?(W=3+zd(n,l,3),l+=2,G=R[B-1]):b==17?(W=3+zd(n,l,7),l+=3):b==18&&(W=11+zd(n,l,127),l+=7);W--;)R[B++]=G}}var q=R.subarray(0,E),z=R.subarray(E);f=m$(q),p=m$(z),u=D_(q,f,1),d=D_(z,p,1)}else throw"invalid block type";else{var b=MZe(l)+4,x=n[b-4]|n[b-3]<<8,_=b+x;if(_>r){if(s)throw"unexpected EOF";break}i&&o(c+x),e.set(n.subarray(b,_),c),t.b=c+=x,t.p=l=_*8;continue}if(l>g){if(s)throw"unexpected EOF";break}}i&&o(c+131072);for(var J=(1<<f)-1,Q=(1<<p)-1,Y=l;;Y=l){var G=u[g$(n,l)&J],X=G>>>4;if(l+=G&15,l>g){if(s)throw"unexpected EOF";break}if(!G)throw"invalid length/literal";if(X<256)e[c++]=X;else if(X==256){Y=l,u=null;break}else{var te=X-254;if(X>264){var B=X-257,ne=$se[B];te=zd(n,l,(1<<ne)-1)+Use[B],l+=ne}var le=d[g$(n,l)&Q],ye=le>>>4;if(!le)throw"invalid distance";l+=le&15;var z=EZe[ye];if(ye>3){var ne=Lse[ye];z+=g$(n,l)&(1<<ne)-1,l+=ne}if(l>g){if(s)throw"unexpected EOF";break}i&&o(c+131072);for(var ue=c+te;c<ue;c+=4)e[c]=e[c-z],e[c+1]=e[c+1-z],e[c+2]=e[c+2-z],e[c+3]=e[c+3-z];c=ue}}t.l=u,t.p=Y,t.b=c,u&&(a=1,t.m=f,t.d=d,t.n=p)}while(!a);return c==e.length?e:RZe(e,0,c)},IZe=new zu(0),DZe=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function sM(n,e){return NZe((DZe(n),n.subarray(2,-4)),e)}var kZe=typeof TextDecoder<"u"&&new TextDecoder,OZe=0;try{kZe.decode(IZe,{stream:!0}),OZe=1}catch{}var BZe=Object.defineProperty,$Ze=(n,e,t)=>e in n?BZe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,u7=(n,e,t)=>($Ze(n,typeof e!="symbol"?e+"":e,t),t);const LZe=(()=>{const n={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new ve},up:{value:new ve(0,1,0)}},vertexShader:`
      uniform vec3 sunPosition;
      uniform float rayleigh;
      uniform float turbidity;
      uniform float mieCoefficient;
      uniform vec3 up;

      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      // constants for atmospheric scattering
      const float e = 2.71828182845904523536028747135266249775724709369995957;
      const float pi = 3.141592653589793238462643383279502884197169;

      // wavelength of used primaries, according to preetham
      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

      // mie stuff
      // K coefficient for the primaries
      const float v = 4.0;
      const vec3 K = vec3( 0.686, 0.678, 0.666 );
      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

      // earth shadow hack
      // cutoffAngle = pi / 1.95;
      const float cutoffAngle = 1.6110731556870734;
      const float steepness = 1.5;
      const float EE = 1000.0;

      float sunIntensity( float zenithAngleCos ) {
        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
      }

      vec3 totalMie( float T ) {
        float c = ( 0.2 * T ) * 10E-18;
        return 0.434 * c * MieConst;
      }

      void main() {

        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        gl_Position.z = gl_Position.w; // set z to camera.far

        vSunDirection = normalize( sunPosition );

        vSunE = sunIntensity( dot( vSunDirection, up ) );

        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

      // extinction (absorbtion + out scattering)
      // rayleigh coefficients
        vBetaR = totalRayleigh * rayleighCoefficient;

      // mie coefficients
        vBetaM = totalMie( turbidity ) * mieCoefficient;

      }
    `,fragmentShader:`
      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      uniform float mieDirectionalG;
      uniform vec3 up;

      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );

      // constants for atmospheric scattering
      const float pi = 3.141592653589793238462643383279502884197169;

      const float n = 1.0003; // refractive index of air
      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

      // optical length at zenith for molecules
      const float rayleighZenithLength = 8.4E3;
      const float mieZenithLength = 1.25E3;
      // 66 arc seconds -> degrees, and the cosine of that
      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

      // 3.0 / ( 16.0 * pi )
      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
      // 1.0 / ( 4.0 * pi )
      const float ONE_OVER_FOURPI = 0.07957747154594767;

      float rayleighPhase( float cosTheta ) {
        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
      }

      float hgPhase( float cosTheta, float g ) {
        float g2 = pow( g, 2.0 );
        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
      }

      void main() {

        vec3 direction = normalize( vWorldPosition - cameraPos );

      // optical length
      // cutoff angle at 90 to avoid singularity in next formula.
        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
        float sR = rayleighZenithLength * inverse;
        float sM = mieZenithLength * inverse;

      // combined extinction factor
        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

      // in scattering
        float cosTheta = dot( direction, vSunDirection );

        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
        vec3 betaRTheta = vBetaR * rPhase;

        float mPhase = hgPhase( cosTheta, mieDirectionalG );
        vec3 betaMTheta = vBetaM * mPhase;

        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

      // nightsky
        float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
        float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
        vec3 L0 = vec3( 0.1 ) * Fex;

      // composition + solar disc
        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

        gl_FragColor = vec4( retColor, 1.0 );

      #include <tonemapping_fragment>
      #include <${H3>=154?"colorspace_fragment":"encodings_fragment"}>

      }
    `},e=new Da({name:"SkyShader",fragmentShader:n.fragmentShader,vertexShader:n.vertexShader,uniforms:DP.clone(n.uniforms),side:Ma,depthWrite:!1});class t extends Li{constructor(){super(new Qp(1,1,1),e)}}return u7(t,"SkyShader",n),u7(t,"material",e),t})(),FZe=n=>n&&n.isCubeTexture;class PZe extends Li{constructor(e,t){var r,i;const s=FZe(e),a=((i=s?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(a)),c=Math.pow(2,l),u=3*Math.max(c,112),d=4*c,f=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/d}`,`#define CUBEUV_MAX_MIP ${l}.0`],p=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,g=f.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${H3>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,v={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},b=new OC(1,16),x=new Da({uniforms:v,fragmentShader:g,vertexShader:p,side:Zc});super(b,x)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}function FN(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,r=n.length;t<r;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const Uy="srgb",zp="srgb-linear",d7=3001,UZe=3e3;class Y5 extends Oa{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new WZe(t)}),this.register(function(t){return new jZe(t)}),this.register(function(t){return new tQe(t)}),this.register(function(t){return new nQe(t)}),this.register(function(t){return new rQe(t)}),this.register(function(t){return new qZe(t)}),this.register(function(t){return new KZe(t)}),this.register(function(t){return new YZe(t)}),this.register(function(t){return new JZe(t)}),this.register(function(t){return new GZe(t)}),this.register(function(t){return new ZZe(t)}),this.register(function(t){return new XZe(t)}),this.register(function(t){return new eQe(t)}),this.register(function(t){return new QZe(t)}),this.register(function(t){return new HZe(t)}),this.register(function(t){return new iQe(t)}),this.register(function(t){return new sQe(t)})}load(e,t,r,i){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=gg.extractUrlBase(e);o=gg.resolveURL(c,this.path)}else o=gg.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){i?i(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Na(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(FN(new Uint8Array(e.slice(0,4)))===Hse){try{o[zr.KHR_BINARY_GLTF]=new oQe(e)}catch(u){i&&i(u);return}s=JSON.parse(o[zr.KHR_BINARY_GLTF].content)}else s=JSON.parse(FN(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new bQe(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](l);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const u=s.extensionsUsed[c],d=s.extensionsRequired||[];switch(u){case zr.KHR_MATERIALS_UNLIT:o[u]=new VZe;break;case zr.KHR_DRACO_MESH_COMPRESSION:o[u]=new aQe(s,this.dracoLoader);break;case zr.KHR_TEXTURE_TRANSFORM:o[u]=new lQe;break;case zr.KHR_MESH_QUANTIZATION:o[u]=new cQe;break;default:d.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function zZe(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const zr={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class HZe{constructor(e){this.parser=e,this.name=zr.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new rn(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],zp);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new II(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new JP(u),c.distance=d;break;case"spot":c=new NI(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,_p(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(c),t.cache.add(r,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(t.cache,a,l)})}}class VZe{constructor(){this.name=zr.KHR_MATERIALS_UNLIT}getMaterialType(){return bc}extendParams(e,t,r){const i=[];e.color=new rn(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],zp),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,Uy))}return Promise.all(i)}}class GZe{constructor(e){this.parser=e,this.name=zr.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class WZe{constructor(e){this.parser=e,this.name=zr.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ed}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Nt(a,a)}return Promise.all(s)}}class jZe{constructor(e){this.parser=e,this.name=zr.KHR_MATERIALS_DISPERSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ed}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class XZe{constructor(e){this.parser=e,this.name=zr.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ed}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class qZe{constructor(e){this.parser=e,this.name=zr.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ed}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new rn(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],zp)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Uy)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class KZe{constructor(e){this.parser=e,this.name=zr.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ed}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class YZe{constructor(e){this.parser=e,this.name=zr.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ed}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new rn().setRGB(a[0],a[1],a[2],zp),Promise.all(s)}}class JZe{constructor(e){this.parser=e,this.name=zr.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ed}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class ZZe{constructor(e){this.parser=e,this.name=zr.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ed}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new rn().setRGB(a[0],a[1],a[2],zp),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,Uy)),Promise.all(s)}}class QZe{constructor(e){this.parser=e,this.name=zr.EXT_MATERIALS_BUMP}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ed}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(r.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class eQe{constructor(e){this.parser=e,this.name=zr.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ed}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class tQe{constructor(e){this.parser=e,this.name=zr.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class nQe{constructor(e){this.parser=e,this.name=zr.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class rQe{constructor(e){this.parser=e,this.name=zr.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class iQe{constructor(e){this.name=zr.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,c=i.byteLength||0,u=i.count,d=i.byteStride,f=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,d,f,i.mode,i.filter).then(function(p){return p.buffer}):o.ready.then(function(){const p=new ArrayBuffer(u*d);return o.decodeGltfBuffer(new Uint8Array(p),u,d,f,i.mode,i.filter),p})})}else return null}}class sQe{constructor(e){this.name=zr.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const c of i.primitives)if(c.mode!==Ou.TRIANGLES&&c.mode!==Ou.TRIANGLE_STRIP&&c.mode!==Ou.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),d=u.isGroup?u.children:[u],f=c[0].count,p=[];for(const g of d){const v=new zn,b=new ve,x=new _s,_=new ve(1,1,1),E=new $P(g.geometry,g.material,f);for(let C=0;C<f;C++)l.TRANSLATION&&b.fromBufferAttribute(l.TRANSLATION,C),l.ROTATION&&x.fromBufferAttribute(l.ROTATION,C),l.SCALE&&_.fromBufferAttribute(l.SCALE,C),E.setMatrixAt(C,v.compose(b,x,_));for(const C in l)if(C==="_COLOR_0"){const M=l[C];E.instanceColor=new rv(M.array,M.itemSize,M.normalized)}else C!=="TRANSLATION"&&C!=="ROTATION"&&C!=="SCALE"&&g.geometry.setAttribute(C,l[C]);ei.prototype.copy.call(E,g),this.parser.assignFinalMaterial(E),p.push(E)}return u.isGroup?(u.clear(),u.add(...p),u):p[0]}))}}const Hse="glTF",Ww=12,h7={JSON:1313821514,BIN:5130562};class oQe{constructor(e){this.name=zr.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Ww);if(this.header={magic:FN(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Hse)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Ww,i=new DataView(e,Ww);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===h7.JSON){const l=new Uint8Array(e,Ww+s,o);this.content=FN(l)}else if(a===h7.BIN){const l=Ww+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class aQe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=zr.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const d=zF[u]||u.toLowerCase();a[d]=o[u]}for(const u in e.attributes){const d=zF[u]||u.toLowerCase();if(o[u]!==void 0){const f=r.accessors[e.attributes[u]],p=qx[f.componentType];c[d]=p.name,l[d]=f.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(d,f){i.decodeDracoFile(u,function(p){for(const g in p.attributes){const v=p.attributes[g],b=l[g];b!==void 0&&(v.normalized=b)}d(p)},a,c,zp,f)})})}}class lQe{constructor(){this.name=zr.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class cQe{constructor(){this.name=zr.KHR_MESH_QUANTIZATION}}class Vse extends B1{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=i-t,d=(r-t)/u,f=d*d,p=f*d,g=e*c,v=g-c,b=-2*p+3*f,x=p-f,_=1-b,E=x-f+d;for(let C=0;C!==a;C++){const M=o[v+C+a],R=o[v+C+l]*u,L=o[g+C+a],B=o[g+C]*u;s[C]=_*M+E*R+b*L+x*B}return s}}const uQe=new _s;class dQe extends Vse{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return uQe.fromArray(s).normalize().toArray(s),s}}const Ou={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},qx={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},f7={9728:sa,9729:oi,9984:ZN,9985:$x,9986:Dy,9987:Hu},p7={33071:co,33648:n1,10497:Ag},y$={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},zF={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...H3>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},rg={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},hQe={CUBICSPLINE:void 0,LINEAR:l1,STEP:a1},v$={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function fQe(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new mg({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:wf})),n.DefaultMaterial}function py(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function _p(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function pQe(n,e,t){let r=!1,i=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const d=e[c];if(d.POSITION!==void 0&&(r=!0),d.NORMAL!==void 0&&(i=!0),d.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const d=e[c];if(r){const f=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(f)}if(i){const f=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(f)}if(s){const f=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(f)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],d=c[1],f=c[2];return r&&(n.morphAttributes.position=u),i&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=f),n.morphTargetsRelative=!0,n})}function mQe(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function gQe(n){let e;const t=n.extensions&&n.extensions[zr.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+b$(t.attributes):e=n.indices+":"+b$(n.attributes)+":"+n.mode,n.targets!==void 0)for(let r=0,i=n.targets.length;r<i;r++)e+=":"+b$(n.targets[r]);return e}function b$(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function HF(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function yQe(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const vQe=new zn;class bQe{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new zZe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new wK(this.options.manager):this.textureLoader=new RK(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Na(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};return py(s,a,i),_p(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[zr.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(gg.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=y$[i.type],a=qx[i.componentType],l=i.normalized===!0,c=new a(i.count*o);return Promise.resolve(new ai(c,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=y$[i.type],c=qx[i.componentType],u=c.BYTES_PER_ELEMENT,d=u*l,f=i.byteOffset||0,p=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,g=i.normalized===!0;let v,b;if(p&&p!==d){const x=Math.floor(f/p),_="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+x+":"+i.count;let E=t.cache.get(_);E||(v=new c(a,x*p,i.count*p/u),E=new NC(v,p/u),t.cache.add(_,E)),b=new Tg(E,l,f%p/u,g)}else a===null?v=new c(i.count*l):v=new c(a,f,i.count*l),b=new ai(v,l,g);if(i.sparse!==void 0){const x=y$.SCALAR,_=qx[i.sparse.indices.componentType],E=i.sparse.indices.byteOffset||0,C=i.sparse.values.byteOffset||0,M=new _(o[1],E,i.sparse.count*x),R=new c(o[2],C,i.sparse.count*l);a!==null&&(b=new ai(b.array.slice(),b.itemSize,b.normalized));for(let L=0,B=M.length;L<B;L++){const N=M[L];if(b.setX(N,R[L*l]),l>=2&&b.setY(N,R[L*l+1]),l>=3&&b.setZ(N,R[L*l+2]),l>=4&&b.setW(N,R[L*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return b})}loadTexture(e){const t=this.json,r=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,r){const i=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,r).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const f=(s.samplers||{})[o.sampler]||{};return u.magFilter=f7[f.magFilter]||oi,u.minFilter=f7[f.minFilter]||Hu,u.wrapS=p7[f.wrapS]||Ag,u.wrapT=p7[f.wrapT]||Ag,i.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(d){c=!0;const f=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(f),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(d){return new Promise(function(f,p){let g=f;t.isImageBitmapLoader===!0&&(g=function(v){const b=new Ti(v);b.needsUpdate=!0,f(b)}),t.load(gg.resolveURL(d,s.path),g,void 0,p)})}).then(function(d){return c===!0&&a.revokeObjectURL(l),_p(d,o),d.userData.mimeType=o.mimeType||yQe(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=u,u}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[zr.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[zr.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[zr.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&(typeof i=="number"&&(i=i===d7?Uy:zp),"colorSpace"in o?o.colorSpace=i:o.encoding=i===Uy?d7:UZe),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new fI,Vo.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new ol,Vo.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return mg}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[zr.KHR_MATERIALS_UNLIT]){const d=i[zr.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),c.push(d.extendParams(a,s,t))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new rn(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const f=d.baseColorFactor;a.color.setRGB(f[0],f[1],f[2],zp),a.opacity=f[3]}d.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",d.baseColorTexture,Uy)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Zc);const u=s.alphaMode||v$.OPAQUE;if(u===v$.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===v$.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==bc&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Nt(1,1),s.normalTexture.scale!==void 0)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}if(s.occlusionTexture!==void 0&&o!==bc&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==bc){const d=s.emissiveFactor;a.emissive=new rn().setRGB(d[0],d[1],d[2],zp)}return s.emissiveTexture!==void 0&&o!==bc&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Uy)),Promise.all(c).then(function(){const d=new o(a);return s.name&&(d.name=s.name),_p(d,s),t.associations.set(d,{materials:e}),s.extensions&&py(i,d,s),d})}createUniqueName(e){const t=ii.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[zr.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return m7(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=gQe(c),d=i[u];if(d)o.push(d.promise);else{let f;c.extensions&&c.extensions[zr.KHR_DRACO_MESH_COMPRESSION]?f=s(c):f=m7(new gr,c,t),i[u]={primitive:c,promise:f},o.push(f)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?fQe(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let p=0,g=u.length;p<g;p++){const v=u[p],b=o[p];let x;const _=c[p];if(b.mode===Ou.TRIANGLES||b.mode===Ou.TRIANGLE_STRIP||b.mode===Ou.TRIANGLE_FAN||b.mode===void 0)x=s.isSkinnedMesh===!0?new BP(v,_):new Li(v,_),x.isSkinnedMesh===!0&&x.normalizeSkinWeights(),b.mode===Ou.TRIANGLE_STRIP?x.geometry=c7(x.geometry,AP):b.mode===Ou.TRIANGLE_FAN&&(x.geometry=c7(x.geometry,IR));else if(b.mode===Ou.LINES)x=new hh(v,_);else if(b.mode===Ou.LINE_STRIP)x=new Hp(v,_);else if(b.mode===Ou.LINE_LOOP)x=new LP(v,_);else if(b.mode===Ou.POINTS)x=new FP(v,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+b.mode);Object.keys(x.geometry.morphAttributes).length>0&&mQe(x,s),x.name=t.createUniqueName(s.name||"mesh_"+e),_p(x,s),b.extensions&&py(i,x,b),t.assignFinalMaterial(x),d.push(x)}for(let p=0,g=d.length;p<g;p++)t.associations.set(d[p],{meshes:e,primitives:p});if(d.length===1)return s.extensions&&py(i,d[0],s),d[0];const f=new kp;s.extensions&&py(i,f,s),t.associations.set(f,{meshes:e});for(let p=0,g=d.length;p<g;p++)f.add(d[p]);return f})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new So(oI.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new Dv(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),_p(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let i=0,s=t.joints.length;i<s;i++)r.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const d=o[c];if(d){a.push(d);const f=new zn;s!==null&&f.fromArray(s.array,c*16),l.push(f)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new IC(a,l)})}loadAnimation(e){const t=this.json,r=this,i=t.animations[e],s=i.name?i.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let d=0,f=i.channels.length;d<f;d++){const p=i.channels[d],g=i.samplers[p.sampler],v=p.target,b=v.node,x=i.parameters!==void 0?i.parameters[g.input]:g.input,_=i.parameters!==void 0?i.parameters[g.output]:g.output;v.node!==void 0&&(o.push(this.getDependency("node",b)),a.push(this.getDependency("accessor",x)),l.push(this.getDependency("accessor",_)),c.push(g),u.push(v))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(d){const f=d[0],p=d[1],g=d[2],v=d[3],b=d[4],x=[];for(let _=0,E=f.length;_<E;_++){const C=f[_],M=p[_],R=g[_],L=v[_],B=b[_];if(C===void 0)continue;C.updateMatrix&&C.updateMatrix();const N=r._createAnimationTracks(C,M,R,L,B);if(N)for(let I=0;I<N.length;I++)x.push(N[I])}return new p1(s,void 0,x)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=i.weights.length;l<c;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,r=this,i=t.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let c=0,u=a.length;c<u;c++)o.push(r.getDependency("node",a[c]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],d=c[1],f=c[2];f!==null&&u.traverse(function(p){p.isSkinnedMesh&&p.bind(f,vQe)});for(let p=0,g=d.length;p<g;p++)u.add(d[p]);return u})}_loadNodeShallow(e){const t=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(c){return i._getNodeRef(i.cameraCache,s.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(s.isBone===!0?u=new dI:c.length>1?u=new kp:c.length===1?u=c[0]:u=new ei,u!==c[0])for(let d=0,f=c.length;d<f;d++)u.add(c[d]);if(s.name&&(u.userData.name=s.name,u.name=o),_p(u,s),s.extensions&&py(r,u,s),s.matrix!==void 0){const d=new zn;d.fromArray(s.matrix),u.applyMatrix4(d)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return i.associations.has(u)||i.associations.set(u,{}),i.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],i=this,s=new kp;r.name&&(s.name=i.createUniqueName(r.name)),_p(s,r),r.extensions&&py(t,s,r);const o=r.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,d=l.length;u<d;u++)s.add(l[u]);const c=u=>{const d=new Map;for(const[f,p]of i.associations)(f instanceof Vo||f instanceof Ti)&&d.set(f,p);return u.traverse(f=>{const p=i.associations.get(f);p!=null&&d.set(f,p)}),d};return i.associations=c(s),s})}_createAnimationTracks(e,t,r,i,s){const o=[],a=e.name?e.name:e.uuid,l=[];rg[s.path]===rg.weights?e.traverse(function(f){f.morphTargetInfluences&&l.push(f.name?f.name:f.uuid)}):l.push(a);let c;switch(rg[s.path]){case rg.weights:c=sv;break;case rg.rotation:c=ov;break;case rg.position:case rg.scale:c=av;break;default:switch(r.itemSize){case 1:c=sv;break;case 2:case 3:default:c=av;break}break}const u=i.interpolation!==void 0?hQe[i.interpolation]:l1,d=this._getArrayFromAccessor(r);for(let f=0,p=l.length;f<p;f++){const g=new c(l[f]+"."+rg[s.path],t.array,d,u);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(g),o.push(g)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const r=HF(t.constructor),i=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)i[s]=t[s]*r;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(r){const i=this instanceof ov?dQe:Vse;return new i(this.times,this.values,this.getValueSize()/3,r)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function xQe(n,e,t){const r=e.attributes,i=new Ra;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(i.set(new ve(l[0],l[1],l[2]),new ve(c[0],c[1],c[2])),a.normalized){const u=HF(qx[a.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new ve,l=new ve;for(let c=0,u=s.length;c<u;c++){const d=s[c];if(d.POSITION!==void 0){const f=t.json.accessors[d.POSITION],p=f.min,g=f.max;if(p!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(p[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(p[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(p[2]),Math.abs(g[2]))),f.normalized){const v=HF(qx[f.componentType]);l.multiplyScalar(v)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new oa;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function m7(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in r){const a=zF[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return _p(n,e),xQe(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?pQe(n,e.targets,t):n})}const SQe={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},wQe={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};class _Qe extends RI{constructor(e){super(e),this.type=Xs}parse(e){const o=function(B,N){switch(B){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(N||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(N||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(N||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(N||""))}},d=function(B,N,I){N=N||1024;let P=B.pos,G=-1,W=0,q="",z=String.fromCharCode.apply(null,new Uint16Array(B.subarray(P,P+128)));for(;0>(G=z.indexOf(`
`))&&W<N&&P<B.byteLength;)q+=z,W+=z.length,P+=128,z+=String.fromCharCode.apply(null,new Uint16Array(B.subarray(P,P+128)));return-1<G?(B.pos+=W+G+1,q+z.slice(0,G)):!1},f=function(B){const N=/^#\?(\S+)/,I=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,D=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,P=/^\s*FORMAT=(\S+)\s*$/,G=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,W={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let q,z;for((B.pos>=B.byteLength||!(q=d(B)))&&o(1,"no header found"),(z=q.match(N))||o(3,"bad initial token"),W.valid|=1,W.programtype=z[1],W.string+=q+`
`;q=d(B),q!==!1;){if(W.string+=q+`
`,q.charAt(0)==="#"){W.comments+=q+`
`;continue}if((z=q.match(I))&&(W.gamma=parseFloat(z[1])),(z=q.match(D))&&(W.exposure=parseFloat(z[1])),(z=q.match(P))&&(W.valid|=2,W.format=z[1]),(z=q.match(G))&&(W.valid|=4,W.height=parseInt(z[1],10),W.width=parseInt(z[2],10)),W.valid&2&&W.valid&4)break}return W.valid&2||o(3,"missing format specifier"),W.valid&4||o(3,"missing image size specifier"),W},p=function(B,N,I){const D=N;if(D<8||D>32767||B[0]!==2||B[1]!==2||B[2]&128)return new Uint8Array(B);D!==(B[2]<<8|B[3])&&o(3,"wrong scanline width");const P=new Uint8Array(4*N*I);P.length||o(4,"unable to allocate buffer space");let G=0,W=0;const q=4*D,z=new Uint8Array(4),J=new Uint8Array(q);let Q=I;for(;Q>0&&W<B.byteLength;){W+4>B.byteLength&&o(1),z[0]=B[W++],z[1]=B[W++],z[2]=B[W++],z[3]=B[W++],(z[0]!=2||z[1]!=2||(z[2]<<8|z[3])!=D)&&o(3,"bad rgbe scanline format");let Y=0,X;for(;Y<q&&W<B.byteLength;){X=B[W++];const ne=X>128;if(ne&&(X-=128),(X===0||Y+X>q)&&o(3,"bad scanline data"),ne){const le=B[W++];for(let ye=0;ye<X;ye++)J[Y++]=le}else J.set(B.subarray(W,W+X),Y),Y+=X,W+=X}const te=D;for(let ne=0;ne<te;ne++){let le=0;P[G]=J[ne+le],le+=D,P[G+1]=J[ne+le],le+=D,P[G+2]=J[ne+le],le+=D,P[G+3]=J[ne+le],G+=4}Q--}return P},g=function(B,N,I,D){const P=B[N+3],G=Math.pow(2,P-128)/255;I[D+0]=B[N+0]*G,I[D+1]=B[N+1]*G,I[D+2]=B[N+2]*G,I[D+3]=1},v=function(B,N,I,D){const P=B[N+3],G=Math.pow(2,P-128)/255;I[D+0]=Kd.toHalfFloat(Math.min(B[N+0]*G,65504)),I[D+1]=Kd.toHalfFloat(Math.min(B[N+1]*G,65504)),I[D+2]=Kd.toHalfFloat(Math.min(B[N+2]*G,65504)),I[D+3]=Kd.toHalfFloat(1)},b=new Uint8Array(e);b.pos=0;const x=f(b),_=x.width,E=x.height,C=p(b.subarray(b.pos),_,E);let M,R,L;switch(this.type){case is:L=C.length/4;const B=new Float32Array(L*4);for(let I=0;I<L;I++)g(C,I*4,B,I*4);M=B,R=is;break;case Xs:L=C.length/4;const N=new Uint16Array(L*4);for(let I=0;I<L;I++)v(C,I*4,N,I*4);M=N,R=Xs;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:_,height:E,data:M,header:x.string,gamma:x.gamma,exposure:x.exposure,type:R}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){switch(o.type){case is:case Xs:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=oi,o.magFilter=oi,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,r,i)}}const jw=H3>=152;class CQe extends RI{constructor(e){super(e),this.type=Xs}parse(e){const N=Math.pow(2.7182818,2.2);function I(oe,me){for(var Oe=0,nt=0;nt<65536;++nt)(nt==0||oe[nt>>3]&1<<(nt&7))&&(me[Oe++]=nt);for(var ct=Oe-1;Oe<65536;)me[Oe++]=0;return ct}function D(oe){for(var me=0;me<16384;me++)oe[me]={},oe[me].len=0,oe[me].lit=0,oe[me].p=null}const P={l:0,c:0,lc:0};function G(oe,me,Oe,nt,ct){for(;Oe<oe;)me=me<<8|on(nt,ct),Oe+=8;Oe-=oe,P.l=me>>Oe&(1<<oe)-1,P.c=me,P.lc=Oe}const W=new Array(59);function q(oe){for(var me=0;me<=58;++me)W[me]=0;for(var me=0;me<65537;++me)W[oe[me]]+=1;for(var Oe=0,me=58;me>0;--me){var nt=Oe+W[me]>>1;W[me]=Oe,Oe=nt}for(var me=0;me<65537;++me){var ct=oe[me];ct>0&&(oe[me]=ct|W[ct]++<<6)}}function z(oe,me,Oe,nt,ct,St,jt){for(var se=Oe,Se=0,Ae=0;ct<=St;ct++){if(se.value-Oe.value>nt)return!1;G(6,Se,Ae,oe,se);var Me=P.l;if(Se=P.c,Ae=P.lc,jt[ct]=Me,Me==63){if(se.value-Oe.value>nt)throw"Something wrong with hufUnpackEncTable";G(8,Se,Ae,oe,se);var Ce=P.l+6;if(Se=P.c,Ae=P.lc,ct+Ce>St+1)throw"Something wrong with hufUnpackEncTable";for(;Ce--;)jt[ct++]=0;ct--}else if(Me>=59){var Ce=Me-59+2;if(ct+Ce>St+1)throw"Something wrong with hufUnpackEncTable";for(;Ce--;)jt[ct++]=0;ct--}}q(jt)}function J(oe){return oe&63}function Q(oe){return oe>>6}function Y(oe,me,Oe,nt){for(;me<=Oe;me++){var ct=Q(oe[me]),St=J(oe[me]);if(ct>>St)throw"Invalid table entry";if(St>14){var jt=nt[ct>>St-14];if(jt.len)throw"Invalid table entry";if(jt.lit++,jt.p){var se=jt.p;jt.p=new Array(jt.lit);for(var Se=0;Se<jt.lit-1;++Se)jt.p[Se]=se[Se]}else jt.p=new Array(1);jt.p[jt.lit-1]=me}else if(St)for(var Ae=0,Se=1<<14-St;Se>0;Se--){var jt=nt[(ct<<14-St)+Ae];if(jt.len||jt.p)throw"Invalid table entry";jt.len=St,jt.lit=me,Ae++}}return!0}const X={c:0,lc:0};function te(oe,me,Oe,nt){oe=oe<<8|on(Oe,nt),me+=8,X.c=oe,X.lc=me}const ne={c:0,lc:0};function le(oe,me,Oe,nt,ct,St,jt,se,Se,Ae){if(oe==me){nt<8&&(te(Oe,nt,ct,jt),Oe=X.c,nt=X.lc),nt-=8;var Me=Oe>>nt,Me=new Uint8Array([Me])[0];if(Se.value+Me>Ae)return!1;for(var Ce=se[Se.value-1];Me-- >0;)se[Se.value++]=Ce}else if(Se.value<Ae)se[Se.value++]=oe;else return!1;ne.c=Oe,ne.lc=nt}function ye(oe){return oe&65535}function ue(oe){var me=ye(oe);return me>32767?me-65536:me}const be={a:0,b:0};function xe(oe,me){var Oe=ue(oe),nt=ue(me),ct=nt,St=Oe+(ct&1)+(ct>>1),jt=St,se=St-ct;be.a=jt,be.b=se}function Pe(oe,me){var Oe=ye(oe),nt=ye(me),ct=Oe-(nt>>1)&65535,St=nt+ct-32768&65535;be.a=St,be.b=ct}function ze(oe,me,Oe,nt,ct,St,jt){for(var se=jt<16384,Se=Oe>ct?ct:Oe,Ae=1,Me;Ae<=Se;)Ae<<=1;for(Ae>>=1,Me=Ae,Ae>>=1;Ae>=1;){for(var Ce=0,It=Ce+St*(ct-Me),vt=St*Ae,Tt=St*Me,Et=nt*Ae,Xt=nt*Me,Qt,Wt,bn,Hn;Ce<=It;Ce+=Tt){for(var On=Ce,ar=Ce+nt*(Oe-Me);On<=ar;On+=Xt){var yn=On+Et,ln=On+vt,Rr=ln+Et;se?(xe(oe[On+me],oe[ln+me]),Qt=be.a,bn=be.b,xe(oe[yn+me],oe[Rr+me]),Wt=be.a,Hn=be.b,xe(Qt,Wt),oe[On+me]=be.a,oe[yn+me]=be.b,xe(bn,Hn),oe[ln+me]=be.a,oe[Rr+me]=be.b):(Pe(oe[On+me],oe[ln+me]),Qt=be.a,bn=be.b,Pe(oe[yn+me],oe[Rr+me]),Wt=be.a,Hn=be.b,Pe(Qt,Wt),oe[On+me]=be.a,oe[yn+me]=be.b,Pe(bn,Hn),oe[ln+me]=be.a,oe[Rr+me]=be.b)}if(Oe&Ae){var ln=On+vt;se?xe(oe[On+me],oe[ln+me]):Pe(oe[On+me],oe[ln+me]),Qt=be.a,oe[ln+me]=be.b,oe[On+me]=Qt}}if(ct&Ae)for(var On=Ce,ar=Ce+nt*(Oe-Me);On<=ar;On+=Xt){var yn=On+Et;se?xe(oe[On+me],oe[yn+me]):Pe(oe[On+me],oe[yn+me]),Qt=be.a,oe[yn+me]=be.b,oe[On+me]=Qt}Me=Ae,Ae>>=1}return Ce}function Ke(oe,me,Oe,nt,ct,St,jt,se,Se,Ae){for(var Me=0,Ce=0,It=se,vt=Math.trunc(ct.value+(St+7)/8);ct.value<vt;)for(te(Me,Ce,Oe,ct),Me=X.c,Ce=X.lc;Ce>=14;){var Tt=Me>>Ce-14&16383,Et=me[Tt];if(Et.len)Ce-=Et.len,le(Et.lit,jt,Me,Ce,Oe,nt,ct,Se,Ae,It),Me=ne.c,Ce=ne.lc;else{if(!Et.p)throw"hufDecode issues";var Xt;for(Xt=0;Xt<Et.lit;Xt++){for(var Qt=J(oe[Et.p[Xt]]);Ce<Qt&&ct.value<vt;)te(Me,Ce,Oe,ct),Me=X.c,Ce=X.lc;if(Ce>=Qt&&Q(oe[Et.p[Xt]])==(Me>>Ce-Qt&(1<<Qt)-1)){Ce-=Qt,le(Et.p[Xt],jt,Me,Ce,Oe,nt,ct,Se,Ae,It),Me=ne.c,Ce=ne.lc;break}}if(Xt==Et.lit)throw"hufDecode issues"}}var Wt=8-St&7;for(Me>>=Wt,Ce-=Wt;Ce>0;){var Et=me[Me<<14-Ce&16383];if(Et.len)Ce-=Et.len,le(Et.lit,jt,Me,Ce,Oe,nt,ct,Se,Ae,It),Me=ne.c,Ce=ne.lc;else throw"hufDecode issues"}return!0}function pt(oe,me,Oe,nt,ct,St){var jt={value:0},se=Oe.value,Se=Mt(me,Oe),Ae=Mt(me,Oe);Oe.value+=4;var Me=Mt(me,Oe);if(Oe.value+=4,Se<0||Se>=65537||Ae<0||Ae>=65537)throw"Something wrong with HUF_ENCSIZE";var Ce=new Array(65537),It=new Array(16384);D(It);var vt=nt-(Oe.value-se);if(z(oe,me,Oe,vt,Se,Ae,Ce),Me>8*(nt-(Oe.value-se)))throw"Something wrong with hufUncompress";Y(Ce,Se,Ae,It),Ke(Ce,It,oe,me,Oe,Me,Ae,St,ct,jt)}function dt(oe,me,Oe){for(var nt=0;nt<Oe;++nt)me[nt]=oe[me[nt]]}function pe(oe){for(var me=1;me<oe.length;me++){var Oe=oe[me-1]+oe[me]-128;oe[me]=Oe}}function Le(oe,me){for(var Oe=0,nt=Math.floor((oe.length+1)/2),ct=0,St=oe.length-1;!(ct>St||(me[ct++]=oe[Oe++],ct>St));)me[ct++]=oe[nt++]}function Ue(oe){for(var me=oe.byteLength,Oe=new Array,nt=0,ct=new DataView(oe);me>0;){var St=ct.getInt8(nt++);if(St<0){var jt=-St;me-=jt+1;for(var se=0;se<jt;se++)Oe.push(ct.getUint8(nt++))}else{var jt=St;me-=2;for(var Se=ct.getUint8(nt++),se=0;se<jt+1;se++)Oe.push(Se)}}return Oe}function Ze(oe,me,Oe,nt,ct,St){var yn=new DataView(St.buffer),jt=Oe[oe.idx[0]].width,se=Oe[oe.idx[0]].height,Se=3,Ae=Math.floor(jt/8),Me=Math.ceil(jt/8),Ce=Math.ceil(se/8),It=jt-(Me-1)*8,vt=se-(Ce-1)*8,Tt={value:0},Et=new Array(Se),Xt=new Array(Se),Qt=new Array(Se),Wt=new Array(Se),bn=new Array(Se);for(let cr=0;cr<Se;++cr)bn[cr]=me[oe.idx[cr]],Et[cr]=cr<1?0:Et[cr-1]+Me*Ce,Xt[cr]=new Float32Array(64),Qt[cr]=new Uint16Array(64),Wt[cr]=new Uint16Array(Me*64);for(let cr=0;cr<Ce;++cr){var Hn=8;cr==Ce-1&&(Hn=vt);var On=8;for(let Zn=0;Zn<Me;++Zn){Zn==Me-1&&(On=It);for(let Mn=0;Mn<Se;++Mn)Qt[Mn].fill(0),Qt[Mn][0]=ct[Et[Mn]++],je(Tt,nt,Qt[Mn]),lt(Qt[Mn],Xt[Mn]),st(Xt[Mn]);at(Xt);for(let Mn=0;Mn<Se;++Mn)Ut(Xt[Mn],Wt[Mn],Zn*64)}let jn=0;for(let Zn=0;Zn<Se;++Zn){const Mn=Oe[oe.idx[Zn]].type;for(let Wr=8*cr;Wr<8*cr+Hn;++Wr){jn=bn[Zn][Wr];for(let wi=0;wi<Ae;++wi){const Sr=wi*64+(Wr&7)*8;yn.setUint16(jn+0*Mn,Wt[Zn][Sr+0],!0),yn.setUint16(jn+2*Mn,Wt[Zn][Sr+1],!0),yn.setUint16(jn+4*Mn,Wt[Zn][Sr+2],!0),yn.setUint16(jn+6*Mn,Wt[Zn][Sr+3],!0),yn.setUint16(jn+8*Mn,Wt[Zn][Sr+4],!0),yn.setUint16(jn+10*Mn,Wt[Zn][Sr+5],!0),yn.setUint16(jn+12*Mn,Wt[Zn][Sr+6],!0),yn.setUint16(jn+14*Mn,Wt[Zn][Sr+7],!0),jn+=16*Mn}}if(Ae!=Me)for(let Wr=8*cr;Wr<8*cr+Hn;++Wr){const wi=bn[Zn][Wr]+8*Ae*2*Mn,Sr=Ae*64+(Wr&7)*8;for(let _i=0;_i<On;++_i)yn.setUint16(wi+_i*2*Mn,Wt[Zn][Sr+_i],!0)}}}for(var ar=new Uint16Array(jt),yn=new DataView(St.buffer),ln=0;ln<Se;++ln){Oe[oe.idx[ln]].decoded=!0;var Rr=Oe[oe.idx[ln]].type;if(Oe[ln].type==2)for(var Jn=0;Jn<se;++Jn){const cr=bn[ln][Jn];for(var Kr=0;Kr<jt;++Kr)ar[Kr]=yn.getUint16(cr+Kr*2*Rr,!0);for(var Kr=0;Kr<jt;++Kr)yn.setFloat32(cr+Kr*2*Rr,Xe(ar[Kr]),!0)}}}function je(oe,me,Oe){for(var nt,ct=1;ct<64;)nt=me[oe.value],nt==65280?ct=64:nt>>8==255?ct+=nt&255:(Oe[ct]=nt,ct++),oe.value++}function lt(oe,me){me[0]=Xe(oe[0]),me[1]=Xe(oe[1]),me[2]=Xe(oe[5]),me[3]=Xe(oe[6]),me[4]=Xe(oe[14]),me[5]=Xe(oe[15]),me[6]=Xe(oe[27]),me[7]=Xe(oe[28]),me[8]=Xe(oe[2]),me[9]=Xe(oe[4]),me[10]=Xe(oe[7]),me[11]=Xe(oe[13]),me[12]=Xe(oe[16]),me[13]=Xe(oe[26]),me[14]=Xe(oe[29]),me[15]=Xe(oe[42]),me[16]=Xe(oe[3]),me[17]=Xe(oe[8]),me[18]=Xe(oe[12]),me[19]=Xe(oe[17]),me[20]=Xe(oe[25]),me[21]=Xe(oe[30]),me[22]=Xe(oe[41]),me[23]=Xe(oe[43]),me[24]=Xe(oe[9]),me[25]=Xe(oe[11]),me[26]=Xe(oe[18]),me[27]=Xe(oe[24]),me[28]=Xe(oe[31]),me[29]=Xe(oe[40]),me[30]=Xe(oe[44]),me[31]=Xe(oe[53]),me[32]=Xe(oe[10]),me[33]=Xe(oe[19]),me[34]=Xe(oe[23]),me[35]=Xe(oe[32]),me[36]=Xe(oe[39]),me[37]=Xe(oe[45]),me[38]=Xe(oe[52]),me[39]=Xe(oe[54]),me[40]=Xe(oe[20]),me[41]=Xe(oe[22]),me[42]=Xe(oe[33]),me[43]=Xe(oe[38]),me[44]=Xe(oe[46]),me[45]=Xe(oe[51]),me[46]=Xe(oe[55]),me[47]=Xe(oe[60]),me[48]=Xe(oe[21]),me[49]=Xe(oe[34]),me[50]=Xe(oe[37]),me[51]=Xe(oe[47]),me[52]=Xe(oe[50]),me[53]=Xe(oe[56]),me[54]=Xe(oe[59]),me[55]=Xe(oe[61]),me[56]=Xe(oe[35]),me[57]=Xe(oe[36]),me[58]=Xe(oe[48]),me[59]=Xe(oe[49]),me[60]=Xe(oe[57]),me[61]=Xe(oe[58]),me[62]=Xe(oe[62]),me[63]=Xe(oe[63])}function st(oe){const me=.5*Math.cos(.7853975),Oe=.5*Math.cos(3.14159/16),nt=.5*Math.cos(3.14159/8),ct=.5*Math.cos(3*3.14159/16),St=.5*Math.cos(5*3.14159/16),jt=.5*Math.cos(3*3.14159/8),se=.5*Math.cos(7*3.14159/16);for(var Se=new Array(4),Ae=new Array(4),Me=new Array(4),Ce=new Array(4),It=0;It<8;++It){var vt=It*8;Se[0]=nt*oe[vt+2],Se[1]=jt*oe[vt+2],Se[2]=nt*oe[vt+6],Se[3]=jt*oe[vt+6],Ae[0]=Oe*oe[vt+1]+ct*oe[vt+3]+St*oe[vt+5]+se*oe[vt+7],Ae[1]=ct*oe[vt+1]-se*oe[vt+3]-Oe*oe[vt+5]-St*oe[vt+7],Ae[2]=St*oe[vt+1]-Oe*oe[vt+3]+se*oe[vt+5]+ct*oe[vt+7],Ae[3]=se*oe[vt+1]-St*oe[vt+3]+ct*oe[vt+5]-Oe*oe[vt+7],Me[0]=me*(oe[vt+0]+oe[vt+4]),Me[3]=me*(oe[vt+0]-oe[vt+4]),Me[1]=Se[0]+Se[3],Me[2]=Se[1]-Se[2],Ce[0]=Me[0]+Me[1],Ce[1]=Me[3]+Me[2],Ce[2]=Me[3]-Me[2],Ce[3]=Me[0]-Me[1],oe[vt+0]=Ce[0]+Ae[0],oe[vt+1]=Ce[1]+Ae[1],oe[vt+2]=Ce[2]+Ae[2],oe[vt+3]=Ce[3]+Ae[3],oe[vt+4]=Ce[3]-Ae[3],oe[vt+5]=Ce[2]-Ae[2],oe[vt+6]=Ce[1]-Ae[1],oe[vt+7]=Ce[0]-Ae[0]}for(var Tt=0;Tt<8;++Tt)Se[0]=nt*oe[16+Tt],Se[1]=jt*oe[16+Tt],Se[2]=nt*oe[48+Tt],Se[3]=jt*oe[48+Tt],Ae[0]=Oe*oe[8+Tt]+ct*oe[24+Tt]+St*oe[40+Tt]+se*oe[56+Tt],Ae[1]=ct*oe[8+Tt]-se*oe[24+Tt]-Oe*oe[40+Tt]-St*oe[56+Tt],Ae[2]=St*oe[8+Tt]-Oe*oe[24+Tt]+se*oe[40+Tt]+ct*oe[56+Tt],Ae[3]=se*oe[8+Tt]-St*oe[24+Tt]+ct*oe[40+Tt]-Oe*oe[56+Tt],Me[0]=me*(oe[Tt]+oe[32+Tt]),Me[3]=me*(oe[Tt]-oe[32+Tt]),Me[1]=Se[0]+Se[3],Me[2]=Se[1]-Se[2],Ce[0]=Me[0]+Me[1],Ce[1]=Me[3]+Me[2],Ce[2]=Me[3]-Me[2],Ce[3]=Me[0]-Me[1],oe[0+Tt]=Ce[0]+Ae[0],oe[8+Tt]=Ce[1]+Ae[1],oe[16+Tt]=Ce[2]+Ae[2],oe[24+Tt]=Ce[3]+Ae[3],oe[32+Tt]=Ce[3]-Ae[3],oe[40+Tt]=Ce[2]-Ae[2],oe[48+Tt]=Ce[1]-Ae[1],oe[56+Tt]=Ce[0]-Ae[0]}function at(oe){for(var me=0;me<64;++me){var Oe=oe[0][me],nt=oe[1][me],ct=oe[2][me];oe[0][me]=Oe+1.5747*ct,oe[1][me]=Oe-.1873*nt-.4682*ct,oe[2][me]=Oe+1.8556*nt}}function Ut(oe,me,Oe){for(var nt=0;nt<64;++nt)me[Oe+nt]=Kd.toHalfFloat(mt(oe[nt]))}function mt(oe){return oe<=1?Math.sign(oe)*Math.pow(Math.abs(oe),2.2):Math.sign(oe)*Math.pow(N,Math.abs(oe)-1)}function ce(oe){return new DataView(oe.array.buffer,oe.offset.value,oe.size)}function re(oe){var me=oe.viewer.buffer.slice(oe.offset.value,oe.offset.value+oe.size),Oe=new Uint8Array(Ue(me)),nt=new Uint8Array(Oe.length);return pe(Oe),Le(Oe,nt),new DataView(nt.buffer)}function $e(oe){var me=oe.array.slice(oe.offset.value,oe.offset.value+oe.size),Oe=sM(me),nt=new Uint8Array(Oe.length);return pe(Oe),Le(Oe,nt),new DataView(nt.buffer)}function qe(oe){for(var me=oe.viewer,Oe={value:oe.offset.value},nt=new Uint16Array(oe.width*oe.scanlineBlockSize*(oe.channels*oe.type)),ct=new Uint8Array(8192),St=0,jt=new Array(oe.channels),se=0;se<oe.channels;se++)jt[se]={},jt[se].start=St,jt[se].end=jt[se].start,jt[se].nx=oe.width,jt[se].ny=oe.lines,jt[se].size=oe.type,St+=jt[se].nx*jt[se].ny*jt[se].size;var Se=Lt(me,Oe),Ae=Lt(me,Oe);if(Ae>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Se<=Ae)for(var se=0;se<Ae-Se+1;se++)ct[se+Se]=tn(me,Oe);var Me=new Uint16Array(65536),Ce=I(ct,Me),It=Mt(me,Oe);pt(oe.array,me,Oe,It,nt,St);for(var se=0;se<oe.channels;++se)for(var vt=jt[se],Tt=0;Tt<jt[se].size;++Tt)ze(nt,vt.start+Tt,vt.nx,vt.size,vt.ny,vt.nx*vt.size,Ce);dt(Me,nt,St);for(var Et=0,Xt=new Uint8Array(nt.buffer.byteLength),Qt=0;Qt<oe.lines;Qt++)for(var Wt=0;Wt<oe.channels;Wt++){var vt=jt[Wt],bn=vt.nx*vt.size,Hn=new Uint8Array(nt.buffer,vt.end*2,bn*2);Xt.set(Hn,Et),Et+=bn*2,vt.end+=bn}return new DataView(Xt.buffer)}function ot(oe){var me=oe.array.slice(oe.offset.value,oe.offset.value+oe.size),Oe=sM(me);const nt=oe.lines*oe.channels*oe.width,ct=oe.type==1?new Uint16Array(nt):new Uint32Array(nt);let St=0,jt=0;const se=new Array(4);for(let Se=0;Se<oe.lines;Se++)for(let Ae=0;Ae<oe.channels;Ae++){let Me=0;switch(oe.type){case 1:se[0]=St,se[1]=se[0]+oe.width,St=se[1]+oe.width;for(let Ce=0;Ce<oe.width;++Ce){const It=Oe[se[0]++]<<8|Oe[se[1]++];Me+=It,ct[jt]=Me,jt++}break;case 2:se[0]=St,se[1]=se[0]+oe.width,se[2]=se[1]+oe.width,St=se[2]+oe.width;for(let Ce=0;Ce<oe.width;++Ce){const It=Oe[se[0]++]<<24|Oe[se[1]++]<<16|Oe[se[2]++]<<8;Me+=It,ct[jt]=Me,jt++}break}}return new DataView(ct.buffer)}function et(oe){var me=oe.viewer,Oe={value:oe.offset.value},nt=new Uint8Array(oe.width*oe.lines*(oe.channels*oe.type*2)),ct={version:zt(me,Oe),unknownUncompressedSize:zt(me,Oe),unknownCompressedSize:zt(me,Oe),acCompressedSize:zt(me,Oe),dcCompressedSize:zt(me,Oe),rleCompressedSize:zt(me,Oe),rleUncompressedSize:zt(me,Oe),rleRawSize:zt(me,Oe),totalAcUncompressedCount:zt(me,Oe),totalDcUncompressedCount:zt(me,Oe),acCompression:zt(me,Oe)};if(ct.version<2)throw"EXRLoader.parse: "+vr.compression+" version "+ct.version+" is unsupported";for(var St=new Array,jt=Lt(me,Oe)-2;jt>0;){var se=Ft(me.buffer,Oe),Se=tn(me,Oe),Ae=Se>>2&3,Me=(Se>>4)-1,Ce=new Int8Array([Me])[0],It=tn(me,Oe);St.push({name:se,index:Ce,type:It,compression:Ae}),jt-=se.length+3}for(var vt=vr.channels,Tt=new Array(oe.channels),Et=0;Et<oe.channels;++Et){var Xt=Tt[Et]={},Qt=vt[Et];Xt.name=Qt.name,Xt.compression=0,Xt.decoded=!1,Xt.type=Qt.pixelType,Xt.pLinear=Qt.pLinear,Xt.width=oe.width,Xt.height=oe.lines}for(var Wt={idx:new Array(3)},bn=0;bn<oe.channels;++bn)for(var Xt=Tt[bn],Et=0;Et<St.length;++Et){var Hn=St[Et];Xt.name==Hn.name&&(Xt.compression=Hn.compression,Hn.index>=0&&(Wt.idx[Hn.index]=bn),Xt.offset=bn)}if(ct.acCompressedSize>0)switch(ct.acCompression){case 0:var yn=new Uint16Array(ct.totalAcUncompressedCount);pt(oe.array,me,Oe,ct.acCompressedSize,yn,ct.totalAcUncompressedCount);break;case 1:var On=oe.array.slice(Oe.value,Oe.value+ct.totalAcUncompressedCount),ar=sM(On),yn=new Uint16Array(ar.buffer);Oe.value+=ct.totalAcUncompressedCount;break}if(ct.dcCompressedSize>0){var ln={array:oe.array,offset:Oe,size:ct.dcCompressedSize},Rr=new Uint16Array($e(ln).buffer);Oe.value+=ct.dcCompressedSize}if(ct.rleRawSize>0){var On=oe.array.slice(Oe.value,Oe.value+ct.rleCompressedSize),ar=sM(On),Jn=Ue(ar.buffer);Oe.value+=ct.rleCompressedSize}for(var Kr=0,cr=new Array(Tt.length),Et=0;Et<cr.length;++Et)cr[Et]=new Array;for(var jn=0;jn<oe.lines;++jn)for(var Zn=0;Zn<Tt.length;++Zn)cr[Zn].push(Kr),Kr+=Tt[Zn].width*oe.type*2;Ze(Wt,cr,Tt,yn,Rr,nt);for(var Et=0;Et<Tt.length;++Et){var Xt=Tt[Et];if(!Xt.decoded)switch(Xt.compression){case 2:for(var Mn=0,Wr=0,jn=0;jn<oe.lines;++jn){for(var wi=cr[Et][Mn],Sr=0;Sr<Xt.width;++Sr){for(var _i=0;_i<2*Xt.type;++_i)nt[wi++]=Jn[Wr+_i*Xt.width*Xt.height];Wr++}Mn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(nt.buffer)}function Ft(oe,me){for(var Oe=new Uint8Array(oe),nt=0;Oe[me.value+nt]!=0;)nt+=1;var ct=new TextDecoder().decode(Oe.slice(me.value,me.value+nt));return me.value=me.value+nt+1,ct}function At(oe,me,Oe){var nt=new TextDecoder().decode(new Uint8Array(oe).slice(me.value,me.value+Oe));return me.value=me.value+Oe,nt}function Ct(oe,me){var Oe=yt(oe,me),nt=Mt(oe,me);return[Oe,nt]}function qt(oe,me){var Oe=Mt(oe,me),nt=Mt(oe,me);return[Oe,nt]}function yt(oe,me){var Oe=oe.getInt32(me.value,!0);return me.value=me.value+4,Oe}function Mt(oe,me){var Oe=oe.getUint32(me.value,!0);return me.value=me.value+4,Oe}function on(oe,me){var Oe=oe[me.value];return me.value=me.value+1,Oe}function tn(oe,me){var Oe=oe.getUint8(me.value);return me.value=me.value+1,Oe}const zt=function(oe,me){let Oe;return"getBigInt64"in DataView.prototype?Oe=Number(oe.getBigInt64(me.value,!0)):Oe=oe.getUint32(me.value+4,!0)+Number(oe.getUint32(me.value,!0)<<32),me.value+=8,Oe};function fn(oe,me){var Oe=oe.getFloat32(me.value,!0);return me.value+=4,Oe}function Te(oe,me){return Kd.toHalfFloat(fn(oe,me))}function Xe(oe){var me=(oe&31744)>>10,Oe=oe&1023;return(oe>>15?-1:1)*(me?me===31?Oe?NaN:1/0:Math.pow(2,me-15)*(1+Oe/1024):6103515625e-14*(Oe/1024))}function Lt(oe,me){var Oe=oe.getUint16(me.value,!0);return me.value+=2,Oe}function en(oe,me){return Xe(Lt(oe,me))}function Vt(oe,me,Oe,nt){for(var ct=Oe.value,St=[];Oe.value<ct+nt-1;){var jt=Ft(me,Oe),se=yt(oe,Oe),Se=tn(oe,Oe);Oe.value+=3;var Ae=yt(oe,Oe),Me=yt(oe,Oe);St.push({name:jt,pixelType:se,pLinear:Se,xSampling:Ae,ySampling:Me})}return Oe.value+=1,St}function Ot(oe,me){var Oe=fn(oe,me),nt=fn(oe,me),ct=fn(oe,me),St=fn(oe,me),jt=fn(oe,me),se=fn(oe,me),Se=fn(oe,me),Ae=fn(oe,me);return{redX:Oe,redY:nt,greenX:ct,greenY:St,blueX:jt,blueY:se,whiteX:Se,whiteY:Ae}}function un(oe,me){var Oe=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],nt=tn(oe,me);return Oe[nt]}function In(oe,me){var Oe=Mt(oe,me),nt=Mt(oe,me),ct=Mt(oe,me),St=Mt(oe,me);return{xMin:Oe,yMin:nt,xMax:ct,yMax:St}}function Tr(oe,me){var Oe=["INCREASING_Y"],nt=tn(oe,me);return Oe[nt]}function lr(oe,me){var Oe=fn(oe,me),nt=fn(oe,me);return[Oe,nt]}function to(oe,me){var Oe=fn(oe,me),nt=fn(oe,me),ct=fn(oe,me);return[Oe,nt,ct]}function ns(oe,me,Oe,nt,ct){if(nt==="string"||nt==="stringvector"||nt==="iccProfile")return At(me,Oe,ct);if(nt==="chlist")return Vt(oe,me,Oe,ct);if(nt==="chromaticities")return Ot(oe,Oe);if(nt==="compression")return un(oe,Oe);if(nt==="box2i")return In(oe,Oe);if(nt==="lineOrder")return Tr(oe,Oe);if(nt==="float")return fn(oe,Oe);if(nt==="v2f")return lr(oe,Oe);if(nt==="v3f")return to(oe,Oe);if(nt==="int")return yt(oe,Oe);if(nt==="rational")return Ct(oe,Oe);if(nt==="timecode")return qt(oe,Oe);if(nt==="preview")return Oe.value+=ct,"skipped";Oe.value+=ct}function pi(oe,me,Oe){const nt={};if(oe.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";nt.version=oe.getUint8(4);const ct=oe.getUint8(5);nt.spec={singleTile:!!(ct&2),longName:!!(ct&4),deepFormat:!!(ct&8),multiPart:!!(ct&16)},Oe.value=8;for(var St=!0;St;){var jt=Ft(me,Oe);if(jt==0)St=!1;else{var se=Ft(me,Oe),Se=Mt(oe,Oe),Ae=ns(oe,me,Oe,se,Se);Ae===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${se}'.`):nt[jt]=Ae}}if((ct&-5)!=0)throw console.error("EXRHeader:",nt),"THREE.EXRLoader: provided file is currently unsupported.";return nt}function Si(oe,me,Oe,nt,ct){const St={size:0,viewer:me,array:Oe,offset:nt,width:oe.dataWindow.xMax-oe.dataWindow.xMin+1,height:oe.dataWindow.yMax-oe.dataWindow.yMin+1,channels:oe.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:oe.channels[0].pixelType,uncompress:null,getter:null,format:null,[jw?"colorSpace":"encoding"]:null};switch(oe.compression){case"NO_COMPRESSION":St.lines=1,St.uncompress=ce;break;case"RLE_COMPRESSION":St.lines=1,St.uncompress=re;break;case"ZIPS_COMPRESSION":St.lines=1,St.uncompress=$e;break;case"ZIP_COMPRESSION":St.lines=16,St.uncompress=$e;break;case"PIZ_COMPRESSION":St.lines=32,St.uncompress=qe;break;case"PXR24_COMPRESSION":St.lines=16,St.uncompress=ot;break;case"DWAA_COMPRESSION":St.lines=32,St.uncompress=et;break;case"DWAB_COMPRESSION":St.lines=256,St.uncompress=et;break;default:throw"EXRLoader.parse: "+oe.compression+" is unsupported"}if(St.scanlineBlockSize=St.lines,St.type==1)switch(ct){case is:St.getter=en,St.inputSize=2;break;case Xs:St.getter=Lt,St.inputSize=2;break}else if(St.type==2)switch(ct){case is:St.getter=fn,St.inputSize=4;break;case Xs:St.getter=Te,St.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+St.type+" for "+oe.compression+".";St.blockCount=(oe.dataWindow.yMax+1)/St.scanlineBlockSize;for(var jt=0;jt<St.blockCount;jt++)zt(me,nt);St.outputChannels=St.channels==3?4:St.channels;const se=St.width*St.height*St.outputChannels;switch(ct){case is:St.byteArray=new Float32Array(se),St.channels<St.outputChannels&&St.byteArray.fill(1,0,se);break;case Xs:St.byteArray=new Uint16Array(se),St.channels<St.outputChannels&&St.byteArray.fill(15360,0,se);break;default:console.error("THREE.EXRLoader: unsupported type: ",ct);break}return St.bytesPerLine=St.width*St.inputSize*St.channels,St.outputChannels==4?St.format=uo:St.format=AC,jw?St.colorSpace="srgb-linear":St.encoding=3e3,St}const Ri=new DataView(e),as=new Uint8Array(e),Fa={value:0},vr=pi(Ri,e,Fa),Nn=Si(vr,Ri,as,Fa,this.type),Fs={value:0},ci={R:0,G:1,B:2,A:3,Y:0};for(let oe=0;oe<Nn.height/Nn.scanlineBlockSize;oe++){const me=Mt(Ri,Fa);Nn.size=Mt(Ri,Fa),Nn.lines=me+Nn.scanlineBlockSize>Nn.height?Nn.height-me:Nn.scanlineBlockSize;const nt=Nn.size<Nn.lines*Nn.bytesPerLine?Nn.uncompress(Nn):ce(Nn);Fa.value+=Nn.size;for(let ct=0;ct<Nn.scanlineBlockSize;ct++){const St=ct+oe*Nn.scanlineBlockSize;if(St>=Nn.height)break;for(let jt=0;jt<Nn.channels;jt++){const se=ci[vr.channels[jt].name];for(let Se=0;Se<Nn.width;Se++){Fs.value=(ct*(Nn.channels*Nn.width)+jt*Nn.width+Se)*Nn.inputSize;const Ae=(Nn.height-1-St)*(Nn.width*Nn.outputChannels)+Se*Nn.outputChannels+se;Nn.byteArray[Ae]=Nn.getter(nt,Fs)}}}}return{header:vr,width:Nn.width,height:Nn.height,data:Nn.byteArray,format:Nn.format,[jw?"colorSpace":"encoding"]:Nn[jw?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){jw?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=oi,o.magFilter=oi,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,r,i)}}const x$=new WeakMap;class EQe extends Oa{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const s=new Na(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const r=JSON.stringify(t);if(x$.has(e)){const l=x$.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((c,u)=>{i._callbacks[s]={resolve:c,reject:u},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),x$.set(e,{key:r,promise:a}),a}_createGeometry(e){const t=new gr;e.index&&t.setIndex(new ai(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;t.setAttribute(s,new ai(o,a))}return t}_loadLibrary(e,t){const r=new Na(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=AQe.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function AQe(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(u){n.onModuleLoaded=function(d){u({draco:d})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(u=>{const d=u.draco,f=new d.Decoder,p=new d.DecoderBuffer;p.Init(new Int8Array(l),l.byteLength);try{const g=t(d,f,p,c),v=g.attributes.map(b=>b.array.buffer);g.index&&v.push(g.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:g},v)}catch(g){console.error(g),self.postMessage({type:"error",id:a.id,error:g.message})}finally{d.destroy(p),d.destroy(f)}});break}};function t(o,a,l,c){const u=c.attributeIDs,d=c.attributeTypes;let f,p;const g=a.GetEncodedGeometryType(l);if(g===o.TRIANGULAR_MESH)f=new o.Mesh,p=a.DecodeBufferToMesh(l,f);else if(g===o.POINT_CLOUD)f=new o.PointCloud,p=a.DecodeBufferToPointCloud(l,f);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!p.ok()||f.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+p.error_msg());const v={index:null,attributes:[]};for(const b in u){const x=self[d[b]];let _,E;if(c.useUniqueIDs)E=u[b],_=a.GetAttributeByUniqueId(f,E);else{if(E=a.GetAttributeId(f,o[u[b]]),E===-1)continue;_=a.GetAttribute(f,E)}v.attributes.push(i(o,a,f,b,x,_))}return g===o.TRIANGULAR_MESH&&(v.index=r(o,a,f)),o.destroy(f),v}function r(o,a,l){const u=l.num_faces()*3,d=u*4,f=o._malloc(d);a.GetTrianglesUInt32Array(l,d,f);const p=new Uint32Array(o.HEAPF32.buffer,f,u).slice();return o._free(f),{array:p,itemSize:1}}function i(o,a,l,c,u,d){const f=d.num_components(),g=l.num_points()*f,v=g*u.BYTES_PER_ELEMENT,b=s(o,u),x=o._malloc(v);a.GetAttributeDataArrayForAllPoints(l,d,b,v,x);const _=new u(o.HEAPF32.buffer,x,g).slice();return o._free(x),{name:c,array:_,itemSize:f}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let oM;const S$=()=>{if(oM)return oM;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=n;WebAssembly.validate(t)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(d=>{s=d.instance,s.exports.__wasm_call_ctors()});function a(d){const f=new Uint8Array(d.length);for(let g=0;g<d.length;++g){const v=d.charCodeAt(g);f[g]=v>96?v-71:v>64?v-65:v>47?v+4:v>46?63:62}let p=0;for(let g=0;g<d.length;++g)f[p++]=f[g]<60?r[f[g]]:(f[g]-60)*64+f[++g];return f.buffer.slice(0,p)}function l(d,f,p,g,v,b){const x=s.exports.sbrk,_=p+3&-4,E=x(_*g),C=x(v.length),M=new Uint8Array(s.exports.memory.buffer);M.set(v,C);const R=d(E,p,g,C,v.length);if(R===0&&b&&b(E,_,g),f.set(M.subarray(E,E+p*g)),x(E-x(0)),R!==0)throw new Error(`Malformed buffer data: ${R}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return oM={ready:o,supported:!0,decodeVertexBuffer(d,f,p,g,v){l(s.exports.meshopt_decodeVertexBuffer,d,f,p,g,s.exports[c[v]])},decodeIndexBuffer(d,f,p,g){l(s.exports.meshopt_decodeIndexBuffer,d,f,p,g)},decodeIndexSequence(d,f,p,g){l(s.exports.meshopt_decodeIndexSequence,d,f,p,g)},decodeGltfBuffer(d,f,p,g,v,b){l(s.exports[u[v]],d,f,p,g,s.exports[c[b]])}},oM};let aM=null,Gse="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function Wse(n=!0,e=!0,t){return r=>{t&&t(r),n&&(aM||(aM=new EQe),aM.setDecoderPath(typeof n=="string"?n:Gse),r.setDRACOLoader(aM)),e&&r.setMeshoptDecoder(typeof S$=="function"?S$():S$)}}const r0=(n,e,t,r)=>Rf(Y5,n,Wse(e,t,r));r0.preload=(n,e,t,r)=>Rf.preload(Y5,n,Wse(e,t,r));r0.clear=n=>Rf.clear(Y5,n);r0.setDecoderPath=n=>{Gse=n};const TQe=({focus:n=0,size:e=25,samples:t=10}={})=>`
#define PENUMBRA_FILTER_SIZE float(${e})
#define RGB_NOISE_FUNCTION(uv) (randRGB(uv))
vec3 randRGB(vec2 uv) {
  return vec3(
    fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),
    fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),
    fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)
  );
}

vec3 lowPassRandRGB(vec2 uv) {
  // 3x3 convolution (average)
  // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9
  vec3 result = vec3(0);
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));
  result *= 0.111111111; // 1.0 / 9.0
  return result;
}
vec3 highPassRandRGB(vec2 uv) {
  // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal
  // hp(x) = x - lp(x)
  return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;
}


vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}
float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation
  return (zReceiver - zBlocker) / zBlocker;
}
float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float blockerDepthSum = float(${n});
  float blockers = 0.0;

  int j = 0;
  vec2 offset = vec2(0.);
  float depth = 0.;

  #pragma unroll_loop_start
  for(int i = 0; i < ${t}; i ++) {
    offset = (vogelDiskSample(j, ${t}, angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;
    depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));
    if (depth < compare) {
      blockerDepthSum += depth;
      blockers++;
    }
    j++;
  }
  #pragma unroll_loop_end

  if (blockers > 0.0) {
    return blockerDepthSum / blockers;
  }
  return -1.0;
}

        
float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float shadow = 0.0f;
  int j = 0;
  vec2 vogelSample = vec2(0.0);
  vec2 offset = vec2(0.0);
  #pragma unroll_loop_start
  for (int i = 0; i < ${t}; i++) {
    vogelSample = vogelDiskSample(j, ${t}, angle) * texelSize;
    offset = vogelSample * (1.0 + filterRadius * float(${e}));
    shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    j++;
  }
  #pragma unroll_loop_end
  return shadow * 1.0 / ${t}.0;
}

float PCSS (sampler2D shadowMap, vec4 coords) {
  vec2 uv = coords.xy;
  float zReceiver = coords.z; // Assumed to be eye-space z in this code
  float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;
  float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);
  if (avgBlockerDepth == -1.0) {
    return 1.0;
  }
  float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);
  return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);
}`;function g7(n,e,t){e.traverse(r=>{r.material&&(n.properties.remove(r.material),r.material.dispose==null||r.material.dispose())}),n.info.programs.length=0,n.compile(e,t)}function MQe({focus:n=0,samples:e=10,size:t=25}){const r=rh(o=>o.gl),i=rh(o=>o.scene),s=rh(o=>o.camera);return F.useEffect(()=>{const o=hr.shadowmap_pars_fragment;return hr.shadowmap_pars_fragment=hr.shadowmap_pars_fragment.replace("#ifdef USE_SHADOWMAP",`#ifdef USE_SHADOWMAP
`+TQe({size:t,samples:e,focus:n})).replace("#if defined( SHADOWMAP_TYPE_PCF )",`
return PCSS(shadowMap, shadowCoord);
#if defined( SHADOWMAP_TYPE_PCF )`),g7(r,i,s),()=>{hr.shadowmap_pars_fragment=o,g7(r,i,s)}},[n,t,e]),null}const RQe=F.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:r=1,floatIntensity:i=1,floatingRange:s=[-.1,.1],autoInvalidate:o=!1,...a},l)=>{const c=F.useRef(null);F.useImperativeHandle(l,()=>c.current,[]);const u=F.useRef(Math.random()*1e4);return l2(d=>{var f,p;if(!e||t===0)return;o&&d.invalidate();const g=u.current+d.clock.elapsedTime;c.current.rotation.x=Math.cos(g/4*t)/8*r,c.current.rotation.y=Math.sin(g/4*t)/8*r,c.current.rotation.z=Math.sin(g/4*t)/20*r;let v=Math.sin(g/4*t)/10;v=oI.mapLinear(v,-.1,.1,(f=s==null?void 0:s[0])!==null&&f!==void 0?f:-.1,(p=s==null?void 0:s[1])!==null&&p!==void 0?p:.1),c.current.position.y=v*i,c.current.updateMatrix()}),F.createElement("group",a,F.createElement("group",{ref:c,matrixAutoUpdate:!1},n))}),jse=(n,e,t)=>{let r;switch(n){case zl:r=new Uint8ClampedArray(e*t*4);break;case Xs:r=new Uint16Array(e*t*4);break;case Cf:r=new Uint32Array(e*t*4);break;case QN:r=new Int8Array(e*t*4);break;case eI:r=new Int16Array(e*t*4);break;case EC:r=new Int32Array(e*t*4);break;case is:r=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return r};let lM;const NQe=(n,e,t,r)=>{if(lM!==void 0)return lM;const i=new Ec(1,1,r);e.setRenderTarget(i);const s=new Li(new Of,new bc({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=jse(n,i.width,i.height);return e.readRenderTargetPixels(i,0,0,i.width,i.height,o),i.dispose(),s.geometry.dispose(),s.material.dispose(),lM=o[0]!==0,lM};class J5{constructor(e){var t,r,i,s,o,a,l,c,u,d,f,p,g,v,b,x;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(E){throw this._renderer.setRenderTarget(null),E}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const _={format:uo,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(r=e.renderTargetOptions)===null||r===void 0?void 0:r.anisotropy:1,generateMipmaps:((i=e.renderTargetOptions)===null||i===void 0?void 0:i.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter:oi,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter:oi,samples:((u=e.renderTargetOptions)===null||u===void 0?void 0:u.samples)!==void 0?(d=e.renderTargetOptions)===null||d===void 0?void 0:d.samples:void 0,wrapS:((f=e.renderTargetOptions)===null||f===void 0?void 0:f.wrapS)!==void 0?(p=e.renderTargetOptions)===null||p===void 0?void 0:p.wrapS:co,wrapT:((g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapT)!==void 0?(v=e.renderTargetOptions)===null||v===void 0?void 0:v.wrapT:co};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=J5.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new D1,this._camera=new Dv,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!NQe(this._type,this._renderer,this._camera,_)){let E;switch(this._type){case Xs:E=this._renderer.extensions.has("EXT_color_buffer_float")?is:void 0;break}E!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${is}`),this._type=E):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Li(new Of,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Ec(this.width,this.height,_),this._renderTarget.texture.mapping=((b=e.renderTargetOptions)===null||b===void 0?void 0:b.mapping)!==void 0?(x=e.renderTargetOptions)===null||x===void 0?void 0:x.mapping:Cg}static instantiateRenderer(){const e=new BI;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=jse(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Jd(this.toArray(),this.width,this.height,uo,this._type,(e==null?void 0:e.mapping)||Cg,(e==null?void 0:e.wrapS)||co,(e==null?void 0:e.wrapT)||co,(e==null?void 0:e.magFilter)||oi,(e==null?void 0:e.minFilter)||oi,(e==null?void 0:e.anisotropy)||1,Yu);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Da&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof Ti&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof Ti&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const IQe=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,DQe=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class kQe extends Da{constructor({gamma:e,offsetHdr:t,offsetSdr:r,gainMapMin:i,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:a,hdrCapacityMax:l,sdr:c,gainMap:u}){super({name:"GainMapDecoderMaterial",vertexShader:IQe,fragmentShader:DQe,uniforms:{sdr:{value:c},gainMap:{value:u},gamma:{value:new ve(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new ve().fromArray(t)},offsetSdr:{value:new ve().fromArray(r)},gainMapMin:{value:new ve().fromArray(i)},gainMapMax:{value:new ve().fromArray(s)},weightFactor:{value:(Math.log2(o)-a)/(l-a)}},blending:pf,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=a,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class Xse extends Error{}class qse extends Error{}const Xw=(n,e,t)=>{const r=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(r)return r[1];const i=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(i){const s=i[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(o=>o.replace(/<\/?rdf:li>/g,"")):i[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},OQe=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const r=e.indexOf("x:xmpmeta>",t),i=e.slice(t,r+10);try{const s=Xw(i,"hdrgm:GainMapMin","0"),o=Xw(i,"hdrgm:GainMapMax"),a=Xw(i,"hdrgm:Gamma","1"),l=Xw(i,"hdrgm:OffsetSDR","0.015625"),c=Xw(i,"hdrgm:OffsetHDR","0.015625"),u=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(i),d=u?u[1]:"0",f=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(i);if(!f)throw new Error("Incomplete gainmap metadata");const p=f[1];return{gainMapMin:Array.isArray(s)?s.map(g=>parseFloat(g)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(o)?o.map(g=>parseFloat(g)):[parseFloat(o),parseFloat(o),parseFloat(o)],gamma:Array.isArray(a)?a.map(g=>parseFloat(g)):[parseFloat(a),parseFloat(a),parseFloat(a)],offsetSdr:Array.isArray(l)?l.map(g=>parseFloat(g)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(c)?c.map(g=>parseFloat(g)):[parseFloat(c),parseFloat(c),parseFloat(c)],hdrCapacityMin:parseFloat(d),hdrCapacityMax:parseFloat(p)}}catch{}t=e.indexOf("<x:xmpmeta",r)}};class BQe{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,r)=>{const i=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){r(new Error("Not a valid jpeg"));return}const o=s.byteLength;let a=2,l=0,c;for(;a<o;){if(++l>250){r(new Error(`Found no marker after ${l} loops `));return}if(s.getUint8(a)!==255){r(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${s.getUint8(a).toString(16)}`));return}if(c=s.getUint8(a+1),i&&console.log(`Marker: ${c.toString(16)}`),c===226){i&&console.log("Found APP2 marker (0xffe2)");const u=a+4;if(s.getUint32(u)===1297106432){const d=u+4;let f;if(s.getUint16(d)===18761)f=!1;else if(s.getUint16(d)===19789)f=!0;else{r(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(d+2,!f)!==42){r(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const p=s.getUint32(d+4,!f);if(p<8){r(new Error("Not valid TIFF data! (First offset less than 8)"));return}const g=d+p,v=s.getUint16(g,!f),b=g+2;let x=0;for(let M=b;M<b+12*v;M+=12)s.getUint16(M,!f)===45057&&(x=s.getUint32(M+8,!f));const E=g+2+v*12+4,C=[];for(let M=E;M<E+x*16;M+=16){const R={MPType:s.getUint32(M,!f),size:s.getUint32(M+4,!f),dataOffset:s.getUint32(M+8,!f),dependantImages:s.getUint32(M+12,!f),start:-1,end:-1,isFII:!1};R.dataOffset?(R.start=d+R.dataOffset,R.isFII=!1):(R.start=0,R.isFII=!0),R.end=R.start+R.size,C.push(R)}if(this.options.extractNonFII&&C.length){const M=new Blob([s]),R=[];for(const L of C){if(L.isFII&&!this.options.extractFII)continue;const B=M.slice(L.start,L.end+1,"image/jpeg");R.push(B)}t(R)}}}a+=2+s.getUint16(a+2)}})}}const $Qe=async n=>{const e=OQe(n);if(!e)throw new qse("Gain map XMP metadata not found");const r=await new BQe({extractFII:!0,extractNonFII:!0}).extract(n);if(r.length!==2)throw new Xse("Gain map recovery image not found");return{sdr:new Uint8Array(await r[0].arrayBuffer()),gainMap:new Uint8Array(await r[1].arrayBuffer()),metadata:e}},y7=n=>new Promise((e,t)=>{const r=document.createElement("img");r.onload=()=>{e(r)},r.onerror=i=>{t(i)},r.src=URL.createObjectURL(n)});class Kse extends Oa{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new MI}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new kQe({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Ti,sdr:new Ti});return new J5({width:16,height:16,type:Xs,colorSpace:Yu,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,r,i){const s=i?new Blob([i],{type:"image/jpeg"}):void 0,o=new Blob([r],{type:"image/jpeg"});let a,l,c=!1;if(typeof createImageBitmap>"u"){const f=await Promise.all([s?y7(s):Promise.resolve(void 0),y7(o)]);l=f[0],a=f[1],c=!0}else{const f=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);l=f[0],a=f[1]}const u=new Ti(l||new ImageData(2,2),Cg,co,co,oi,q$,uo,zl,1,Yu);u.flipY=c,u.needsUpdate=!0;const d=new Ti(a,Cg,co,co,oi,q$,uo,zl,1,Aa);d.flipY=c,d.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=u,e.material.sdr=d,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class LQe extends Kse{load([e,t,r],i,s,o){const a=this.prepareQuadRenderer();let l,c,u;const d=async()=>{if(l&&c&&u){try{await this.render(a,u,l,c)}catch(N){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(r),typeof o=="function"&&o(N),a.disposeOnDemandRenderer();return}typeof i=="function"&&i(a),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(r),a.disposeOnDemandRenderer()}};let f=!0,p=0,g=0,v=!0,b=0,x=0,_=!0,E=0,C=0;const M=()=>{if(typeof s=="function"){const N=p+b+E,I=g+x+C,D=f&&v&&_;s(new ProgressEvent("progress",{lengthComputable:D,loaded:I,total:N}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(r);const R=new Na(this._internalLoadingManager);R.setResponseType("arraybuffer"),R.setRequestHeader(this.requestHeader),R.setPath(this.path),R.setWithCredentials(this.withCredentials),R.load(e,async N=>{if(typeof N=="string")throw new Error("Invalid sdr buffer");l=N,await d()},N=>{f=N.lengthComputable,g=N.loaded,p=N.total,M()},N=>{this.manager.itemError(e),typeof o=="function"&&o(N)});const L=new Na(this._internalLoadingManager);L.setResponseType("arraybuffer"),L.setRequestHeader(this.requestHeader),L.setPath(this.path),L.setWithCredentials(this.withCredentials),L.load(t,async N=>{if(typeof N=="string")throw new Error("Invalid gainmap buffer");c=N,await d()},N=>{v=N.lengthComputable,x=N.loaded,b=N.total,M()},N=>{this.manager.itemError(t),typeof o=="function"&&o(N)});const B=new Na(this._internalLoadingManager);return B.setRequestHeader(this.requestHeader),B.setPath(this.path),B.setWithCredentials(this.withCredentials),B.load(r,async N=>{if(typeof N!="string")throw new Error("Invalid metadata string");u=JSON.parse(N),await d()},N=>{_=N.lengthComputable,C=N.loaded,E=N.total,M()},N=>{this.manager.itemError(r),typeof o=="function"&&o(N)}),a}}class FQe extends Kse{load(e,t,r,i){const s=this.prepareQuadRenderer(),o=new Na(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(a);let c,u,d;try{const f=await $Qe(l);c=f.sdr,u=f.gainMap,d=f.metadata}catch(f){if(f instanceof qse||f instanceof Xse)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),d={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},c=l;else throw f}try{await this.render(s,d,c,u)}catch(f){this.manager.itemError(e),typeof i=="function"&&i(f),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},r,a=>{this.manager.itemError(e),typeof i=="function"&&i(a)}),s}}const mC={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},Yse="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Kx=n=>Array.isArray(n),Z5=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function V3({files:n=Z5,path:e="",preset:t=void 0,colorSpace:r=void 0,extensions:i}={}){t&&(Q5(t),n=mC[t],e=Yse);const s=Kx(n),{extension:o,isCubemap:a}=e6(n),l=t6(o);if(!l)throw new Error("useEnvironment: Unrecognized file extension: "+n);const c=rh(p=>p.gl);F.useLayoutEffect(()=>{if(o!=="webp"&&o!=="jpg"&&o!=="jpeg")return;function p(){Rf.clear(l,s?[n]:n)}c.domElement.addEventListener("webglcontextlost",p,{once:!0})},[n,c.domElement]);const u=Rf(l,s?[n]:n,p=>{(o==="webp"||o==="jpg"||o==="jpeg")&&p.setRenderer(c),p.setPath==null||p.setPath(e),i&&i(p)});let d=s?u[0]:u;if(o==="jpg"||o==="jpeg"||o==="webp"){var f;d=(f=d.renderTarget)==null?void 0:f.texture}return d.mapping=a?_f:t1,d.colorSpace=r??(a?"srgb":"srgb-linear"),d}const PQe={files:Z5,path:"",preset:void 0,extensions:void 0};V3.preload=n=>{const e={...PQe,...n};let{files:t,path:r=""}=e;const{preset:i,extensions:s}=e;i&&(Q5(i),t=mC[i],r=Yse);const{extension:o}=e6(t);if(o==="webp"||o==="jpg"||o==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const a=t6(o);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+t);Rf.preload(a,Kx(t)?[t]:t,l=>{l.setPath==null||l.setPath(r),s&&s(l)})};const UQe={files:Z5,preset:void 0};V3.clear=n=>{const e={...UQe,...n};let{files:t}=e;const{preset:r}=e;r&&(Q5(r),t=mC[r]);const{extension:i}=e6(t),s=t6(i);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);Rf.clear(s,Kx(t)?[t]:t)};function Q5(n){if(!(n in mC))throw new Error("Preset must be one of: "+Object.keys(mC).join(", "))}function e6(n){var e;const t=Kx(n)&&n.length===6,r=Kx(n)&&n.length===3&&n.some(o=>o.endsWith("json")),i=Kx(n)?n[0]:n;return{extension:t?"cube":r?"webp":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":i.startsWith("data:image/jpeg")?"jpg":(e=i.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:r}}function t6(n){return n==="cube"?SK:n==="hdr"?_Qe:n==="exr"?CQe:n==="jpg"||n==="jpeg"?FQe:n==="webp"?LQe:null}const zQe=n=>n.current&&n.current.isScene,HQe=n=>zQe(n)?n.current:n;function n6(n,e,t,r,i={}){var s,o,a,l;i={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...i};const c=HQe(e||t),u=c.background,d=c.environment,f={backgroundBlurriness:c.backgroundBlurriness,backgroundIntensity:c.backgroundIntensity,backgroundRotation:(s=(o=c.backgroundRotation)==null||o.clone==null?void 0:o.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:c.environmentIntensity,environmentRotation:(a=(l=c.environmentRotation)==null||l.clone==null?void 0:l.clone())!==null&&a!==void 0?a:[0,0,0]};return n!=="only"&&(c.environment=r),n&&(c.background=r),uf(c,i),()=>{n!=="only"&&(c.environment=d),n&&(c.background=u),uf(c,f)}}function r6({scene:n,background:e=!1,map:t,...r}){const i=rh(s=>s.scene);return F.useLayoutEffect(()=>{if(t)return n6(e,n,i,t,r)}),null}function Jse({background:n=!1,scene:e,blur:t,backgroundBlurriness:r,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:o,environmentRotation:a,...l}){const c=V3(l),u=rh(d=>d.scene);return F.useLayoutEffect(()=>n6(n,e,u,c,{backgroundBlurriness:t??r,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:o,environmentRotation:a})),F.useEffect(()=>()=>{c.dispose()},[c]),null}function VQe({children:n,near:e=.1,far:t=1e3,resolution:r=256,frames:i=1,map:s,background:o=!1,blur:a,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:d,environmentRotation:f,scene:p,files:g,path:v,preset:b=void 0,extensions:x}){const _=rh(B=>B.gl),E=rh(B=>B.scene),C=F.useRef(null),[M]=F.useState(()=>new D1),R=F.useMemo(()=>{const B=new kP(r);return B.texture.type=Xs,B},[r]);F.useEffect(()=>()=>{R.dispose()},[R]),F.useLayoutEffect(()=>{if(i===1){const B=_.autoClear;_.autoClear=!0,C.current.update(_,M),_.autoClear=B}return n6(o,p,E,R.texture,{backgroundBlurriness:a??l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:d,environmentRotation:f})},[n,M,R.texture,p,E,o,i,_]);let L=1;return l2(()=>{if(i===1/0||L<i){const B=_.autoClear;_.autoClear=!0,C.current.update(_,M),_.autoClear=B,L++}}),F.createElement(F.Fragment,null,S9e(F.createElement(F.Fragment,null,n,F.createElement("cubeCamera",{ref:C,args:[e,t,R]}),g||b?F.createElement(Jse,{background:!0,files:g,preset:b,path:v,extensions:x}):s?F.createElement(r6,{background:!0,map:s,extensions:x}):null),M))}function GQe(n){var e,t,r,i;const s=V3(n),o=n.map||s;F.useMemo(()=>zre({GroundProjectedEnvImpl:PZe}),[]),F.useEffect(()=>()=>{s.dispose()},[s]);const a=F.useMemo(()=>[o],[o]),l=(e=n.ground)==null?void 0:e.height,c=(t=n.ground)==null?void 0:t.radius,u=(r=(i=n.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return F.createElement(F.Fragment,null,F.createElement(r6,os({},n,{map:o})),F.createElement("groundProjectedEnvImpl",{args:a,scale:u,height:l,radius:c}))}function WQe(n){return n.ground?F.createElement(GQe,n):n.map?F.createElement(r6,n):n.children?F.createElement(VQe,n):F.createElement(Jse,n)}const jQe=F.forwardRef(({scale:n=10,frames:e=1/0,opacity:t=1,width:r=1,height:i=1,blur:s=1,near:o=0,far:a=10,resolution:l=512,smooth:c=!0,color:u="#000000",depthWrite:d=!1,renderOrder:f,...p},g)=>{const v=F.useRef(null),b=rh(W=>W.scene),x=rh(W=>W.gl),_=F.useRef(null);r=r*(Array.isArray(n)?n[0]:n||1),i=i*(Array.isArray(n)?n[1]:n||1);const[E,C,M,R,L,B,N]=F.useMemo(()=>{const W=new Ec(l,l),q=new Ec(l,l);q.texture.generateMipmaps=W.texture.generateMipmaps=!1;const z=new Of(r,i).rotateX(Math.PI/2),J=new Li(z),Q=new TI;Q.depthTest=Q.depthWrite=!1,Q.onBeforeCompile=te=>{te.uniforms={...te.uniforms,ucolor:{value:new rn(u)}},te.fragmentShader=te.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),te.fragmentShader=te.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const Y=new Da(SQe),X=new Da(wQe);return X.depthTest=Y.depthTest=!1,[W,z,Q,J,Y,X,q]},[l,r,i,n,u]),I=W=>{R.visible=!0,R.material=L,L.uniforms.tDiffuse.value=E.texture,L.uniforms.h.value=W*1/256,x.setRenderTarget(N),x.render(R,_.current),R.material=B,B.uniforms.tDiffuse.value=N.texture,B.uniforms.v.value=W*1/256,x.setRenderTarget(E),x.render(R,_.current),R.visible=!1};let D=0,P,G;return l2(()=>{_.current&&(e===1/0||D<e)&&(D++,P=b.background,G=b.overrideMaterial,v.current.visible=!1,b.background=null,b.overrideMaterial=M,x.setRenderTarget(E),x.render(b,_.current),I(s),c&&I(s*.4),x.setRenderTarget(null),v.current.visible=!0,b.overrideMaterial=G,b.background=P)}),F.useImperativeHandle(g,()=>v.current,[]),F.createElement("group",os({"rotation-x":Math.PI/2},p,{ref:v}),F.createElement("mesh",{renderOrder:f,geometry:C,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},F.createElement("meshBasicMaterial",{transparent:!0,map:E.texture,opacity:t,depthWrite:d})),F.createElement("orthographicCamera",{ref:_,args:[-r/2,r/2,i/2,-i/2,o,a]}))});function XQe(n,e,t=new ve){const r=Math.PI*(n-.5),i=2*Math.PI*(e-.5);return t.x=Math.cos(i),t.y=Math.sin(r),t.z=Math.sin(i),t}const qQe=F.forwardRef(({inclination:n=.6,azimuth:e=.1,distance:t=1e3,mieCoefficient:r=.005,mieDirectionalG:i=.8,rayleigh:s=.5,turbidity:o=10,sunPosition:a=XQe(n,e),...l},c)=>{const u=F.useMemo(()=>new ve().setScalar(t),[t]),[d]=F.useState(()=>new LZe);return F.createElement("primitive",os({object:d,ref:c,"material-uniforms-mieCoefficient-value":r,"material-uniforms-mieDirectionalG-value":i,"material-uniforms-rayleigh-value":s,"material-uniforms-sunPosition-value":a,"material-uniforms-turbidity-value":o,scale:u},l))}),Zse="/models/lapwing/character3.glb";function KQe({isSpeaking:n=!1,poseFromChat:e=null,morphsFromChat:t=null,...r}){const i=F.useRef(null),{nodes:s,materials:o,scene:a,animations:l}=r0(Zse),c=F.useRef(null),u=F.useRef({}),d=F.useRef(null),f=F.useRef(null),p=F.useRef(null),g=F.useRef(null),v=F.useRef(null),b=F.useRef(new ve),x=F.useRef(new ve),_=F.useRef(new ve),E=F.useRef(null),C=F.useRef(0),M=F.useRef(Math.random()*3+2),R=F.useRef(!1),L=F.useRef(0),B=F.useRef(0);F.useEffect(()=>{if(!(!a||!l.length))return c.current=new OK(a),l.forEach(Q=>{const Y=c.current.clipAction(Q);Q.name.endsWith("_A")?(Y.setLoop(_P,1),Y.clampWhenFinished=!0):Y.setLoop(CP,2),u.current[Q.name]=Y}),u.current.Neutral_A&&(d.current=u.current.Neutral_A,d.current.play()),f.current=s["DEF-breastL"],p.current=s["DEF-breastR"],g.current=s["DEF-shoulderL"],v.current=s["DEF-shoulderR"],f.current&&p.current&&b.current.copy(f.current.scale),g.current&&x.current.copy(g.current.scale),v.current&&_.current.copy(v.current.scale),E.current=s.Head,()=>{var Q;return(Q=c.current)==null?void 0:Q.stopAllAction()}},[a,l]);const{debugMode:N}=Ry("Debug",{debugMode:{value:!1,label:"Enable GUI Control (Override Props)"}}),{pose:I}=Ry("Poses",{pose:{value:"Neutral_A",options:{Neutral:"Neutral_A",Thinking:"Thinking_A",FlippingOff:"FlippingOff_A",HandsOnHips:"HandsOnHips_A",ThumbsUp:"ThumbsUp_A"}}},{collapsed:!N}),{breathing:D,breathStrength:P,breathSpeed:G}=Ry("Breathing",{breathing:!0,breathStrength:{value:.02,min:0,max:.05,step:.001},breathSpeed:{value:1.5,min:.5,max:3,step:.1}}),{enableBlinking:W,blinkSpeed:q,blinkFrequency:z}=Ry("Blinking",{enableBlinking:!0,blinkSpeed:{value:.15,min:.05,max:.5,step:.01,label:"Blink Speed (s)"},blinkFrequency:{value:3,min:1,max:10,step:.5,label:"Avg Time Between Blinks (s)"}}),J=Ry("Shape Keys",{"Eyebrows - Angry":{value:0,min:0,max:1,step:.01},"Eyebrows - Sad":{value:0,min:0,max:1,step:.01},"Right Eye - Closed":{value:0,min:0,max:1,step:.01},"Left Eye - Closed":{value:0,min:0,max:1,step:.01},"Both Eyes - Closed":{value:0,min:0,max:1,step:.01},"Mouth - Happy":{value:0,min:0,max:1,step:.01},"Mouth - Sad":{value:0,min:0,max:1,step:.01},"Mouth - A":{value:0,min:0,max:1,step:.01}},{collapsed:!N});return F.useEffect(()=>{let Q=N?I:e||"Neutral_A";console.log("Pose transition triggered:",{debugMode:N,guiPose:I,poseFromChat:e,targetPose:Q});const Y=u.current[Q];!Y||Y===d.current||(Y.reset().fadeIn(.35).play(),d.current&&d.current!==Y&&d.current.fadeOut(.35),d.current=Y)},[I,e,N]),l2((Q,Y)=>{var X;if((X=c.current)==null||X.update(Y),D&&f.current){const te=Q.clock.getElapsedTime(),ne=Math.sin(te*G)*P;f.current.scale.set(b.current.x*(1+ne*.05),b.current.y*(1+ne),b.current.z),p.current.scale.set(b.current.x*(1+ne*.05),b.current.y*(1+ne),b.current.z),g.current.scale.set(x.current.x*(1+ne*.8),x.current.y*(1+ne),x.current.z),v.current.scale.set(_.current.x*(1+ne*.8),_.current.y*(1+ne),_.current.z)}if(W&&E.current&&(C.current+=Y,!R.current&&C.current>=M.current&&(R.current=!0,L.current=0,C.current=0),R.current&&(L.current+=Y/q,L.current>=1&&(R.current=!1,L.current=0,C.current=0,M.current=Math.random()*z+z/2))),n&&(B.current+=Y),E.current&&E.current.morphTargetInfluences){const te=E.current.morphTargetDictionary,ne=N?J:t||{};Object.keys(J).forEach(le=>{const ye=te[le];if(ye!==void 0){let ue=ne[le]||0;if(W&&le==="Both Eyes - Closed"&&R.current){const be=L.current,xe=be<.5?2*be*be:1-Math.pow(-2*be+2,2)/2;ue=Math.max(ue,xe)}if(n&&le==="Mouth - A"){const be=Math.sin(B.current*8)*.5+.5,xe=Math.sin(B.current*15.7)*.2;ue=Math.max(ue,(be+xe)*.7)}E.current.morphTargetInfluences[ye]=ue}})}}),V.jsx("group",{ref:i,...r,scale:5,position:[1,-.2,4],rotation:[0,Math.PI/6,0],castShadow:!0,receiveShadow:!0,children:V.jsx("primitive",{object:a})})}r0.preload(Zse);const YQe="/models/modern_room.glb";function JQe(n){const e=F.useRef(null),{nodes:t,materials:r,scene:i}=r0(YQe);return V.jsx("group",{ref:e,...n,dispose:null,scale:7,position:[0,0,0],rotation:[0,Math.PI/2,0],children:V.jsx("primitive",{object:i})})}const Qse=new Map([["night_street","/hdris/cobblestone_street_night_4k.hdr"],["outdoors","/hdris/lilienstein_4k.hdr"]]);function ZQe({y:n=-1.2,hdri:e}){const t=Rf(k9e,Qse.get(e));return V.jsxs("mesh",{position:[0,n,0],children:[V.jsx("sphereGeometry",{args:[60,64,64]}),V.jsx("meshBasicMaterial",{map:t,side:Ma,toneMapped:!1})]})}function QQe({fov:n,position:e,rotation:t}){const{camera:r}=rh();return F.useEffect(()=>{r.fov=n,r.updateProjectionMatrix()},[n,r]),F.useEffect(()=>{r.position.set(e[0],e[1],e[2])},[e,r]),F.useEffect(()=>{r.rotation.set(t[0],t[1],t[2])},[t,r]),null}function i6({isSpeaking:n=!1,pose:e=null,expressions:t=null}){const{hdri:r,envIntensity:i,envBlur:s,sphereY:o,shadowOpacity:a,shadowBlur:l,shadowScale:c,camFov:u,camX:d,camY:f,camZ:p,camRotX:g,camRotY:v,camRotZ:b}=Ry("Scene Controls",{hdri:{value:"outdoors",options:{Outdoors:"outdoors",NightStreet:"night_street"}},envIntensity:{value:1,min:0,max:5,step:.1},envBlur:{value:.4,min:0,max:1,step:.01},sphereY:{value:-2,min:-5,max:0,step:.1},shadowOpacity:{value:.35,min:0,max:1,step:.01},shadowBlur:{value:2.5,min:0,max:10,step:.1},shadowScale:{value:10,min:1,max:30,step:1},camFov:{value:35,min:30,max:90,step:1},camX:{value:4.5,min:-20,max:20,step:.5},camY:{value:7.5,min:-20,max:20,step:.5},camZ:{value:10,min:-20,max:20,step:.5},camRotX:{value:0,min:-Math.PI,max:Math.PI,step:.01},camRotY:{value:.5,min:-Math.PI,max:Math.PI,step:.01},camRotZ:{value:0,min:-Math.PI,max:Math.PI,step:.01}});return V.jsxs("div",{className:"scene-container",children:[V.jsx(K5,{collapsed:!0}),V.jsxs(qre,{shadows:!0,dpr:[1,2],camera:{position:[8,10,16],fov:u.value},children:[V.jsx(WQe,{files:Qse.get(r),intensity:i,blur:s.value}),V.jsx(ZQe,{hdri:r,y:o.value},r),V.jsx(jQe,{position:[0,.01,0],opacity:a.value,scale:c.value,blur:l.value,far:4}),V.jsx(QQe,{fov:u,position:[d,f,p],rotation:[g,v,b]}),V.jsx(KQe,{isSpeaking:n,poseFromChat:e,morphsFromChat:t}),V.jsx(JQe,{})]})]})}function eet(n,e){n.terminate=function(){const t=()=>{};this.onerror=t,this.onmessage=t,this.onopen=t;const r=new Date,i=Math.random().toString().substring(2,8),s=this.onclose;this.onclose=o=>{const a=new Date().getTime()-r.getTime();e(`Discarded socket (#${i})  closed after ${a}ms, with code/reason: ${o.code}/${o.reason}`)},this.close(),s==null||s.call(n,{code:4001,reason:`Quick discarding socket (#${i}) without waiting for the shutdown sequence.`,wasClean:!1})}}const d_={LF:`
`,NULL:"\0"};class ag{get body(){return!this._body&&this.isBinaryBody&&(this._body=new TextDecoder().decode(this._binaryBody)),this._body||""}get binaryBody(){return!this._binaryBody&&!this.isBinaryBody&&(this._binaryBody=new TextEncoder().encode(this._body)),this._binaryBody}constructor(e){const{command:t,headers:r,body:i,binaryBody:s,escapeHeaderValues:o,skipContentLengthHeader:a}=e;this.command=t,this.headers=Object.assign({},r||{}),s?(this._binaryBody=s,this.isBinaryBody=!0):(this._body=i||"",this.isBinaryBody=!1),this.escapeHeaderValues=o||!1,this.skipContentLengthHeader=a||!1}static fromRawFrame(e,t){const r={},i=s=>s.replace(/^\s+|\s+$/g,"");for(const s of e.headers.reverse()){s.indexOf(":");const o=i(s[0]);let a=i(s[1]);t&&e.command!=="CONNECT"&&e.command!=="CONNECTED"&&(a=ag.hdrValueUnEscape(a)),r[o]=a}return new ag({command:e.command,headers:r,binaryBody:e.binaryBody,escapeHeaderValues:t})}toString(){return this.serializeCmdAndHeaders()}serialize(){const e=this.serializeCmdAndHeaders();return this.isBinaryBody?ag.toUnit8Array(e,this._binaryBody).buffer:e+this._body+d_.NULL}serializeCmdAndHeaders(){const e=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(const t of Object.keys(this.headers||{})){const r=this.headers[t];this.escapeHeaderValues&&this.command!=="CONNECT"&&this.command!=="CONNECTED"?e.push(`${t}:${ag.hdrValueEscape(`${r}`)}`):e.push(`${t}:${r}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&e.push(`content-length:${this.bodyLength()}`),e.join(d_.LF)+d_.LF+d_.LF}isBodyEmpty(){return this.bodyLength()===0}bodyLength(){const e=this.binaryBody;return e?e.length:0}static sizeOfUTF8(e){return e?new TextEncoder().encode(e).length:0}static toUnit8Array(e,t){const r=new TextEncoder().encode(e),i=new Uint8Array([0]),s=new Uint8Array(r.length+t.length+i.length);return s.set(r),s.set(t,r.length),s.set(i,r.length+t.length),s}static marshall(e){return new ag(e).serialize()}static hdrValueEscape(e){return e.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(e){return e.replace(/\\r/g,"\r").replace(/\\n/g,`
`).replace(/\\c/g,":").replace(/\\\\/g,"\\")}}const v7=0,cM=10,uM=13,tet=58;class net{constructor(e,t){this.onFrame=e,this.onIncomingPing=t,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(e,t=!1){let r;if(typeof e=="string"?r=this._encoder.encode(e):r=new Uint8Array(e),t&&r[r.length-1]!==0){const i=new Uint8Array(r.length+1);i.set(r,0),i[r.length]=0,r=i}for(let i=0;i<r.length;i++){const s=r[i];this._onByte(s)}}_collectFrame(e){if(e!==v7&&e!==uM){if(e===cM){this.onIncomingPing();return}this._onByte=this._collectCommand,this._reinjectByte(e)}}_collectCommand(e){if(e!==uM){if(e===cM){this._results.command=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaders;return}this._consumeByte(e)}}_collectHeaders(e){if(e!==uM){if(e===cM){this._setupCollectBody();return}this._onByte=this._collectHeaderKey,this._reinjectByte(e)}}_reinjectByte(e){this._onByte(e)}_collectHeaderKey(e){if(e===tet){this._headerKey=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaderValue;return}this._consumeByte(e)}_collectHeaderValue(e){if(e!==uM){if(e===cM){this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,this._onByte=this._collectHeaders;return}this._consumeByte(e)}}_setupCollectBody(){const e=this._results.headers.filter(t=>t[0]==="content-length")[0];e?(this._bodyBytesRemaining=parseInt(e[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(e){if(e===v7){this._retrievedBody();return}this._consumeByte(e)}_collectBodyFixedSize(e){if(this._bodyBytesRemaining--===0){this._retrievedBody();return}this._consumeByte(e)}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(e){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",e)}this._initState()}_consumeByte(e){this._token.push(e)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){const e=new Uint8Array(this._token);return this._token=[],e}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}}var lg;(function(n){n[n.CONNECTING=0]="CONNECTING",n[n.OPEN=1]="OPEN",n[n.CLOSING=2]="CLOSING",n[n.CLOSED=3]="CLOSED"})(lg||(lg={}));var Gd;(function(n){n[n.ACTIVE=0]="ACTIVE",n[n.DEACTIVATING=1]="DEACTIVATING",n[n.INACTIVE=2]="INACTIVE"})(Gd||(Gd={}));var PN;(function(n){n[n.LINEAR=0]="LINEAR",n[n.EXPONENTIAL=1]="EXPONENTIAL"})(PN||(PN={}));var gC;(function(n){n.Interval="interval",n.Worker="worker"})(gC||(gC={}));class ret{constructor(e,t=gC.Interval,r){this._interval=e,this._strategy=t,this._debug=r,this._workerScript=`
    var startTime = Date.now();
    setInterval(function() {
        self.postMessage(Date.now() - startTime);
    }, ${this._interval});
  `}start(e){this.stop(),this.shouldUseWorker()?this.runWorker(e):this.runInterval(e)}stop(){this.disposeWorker(),this.disposeInterval()}shouldUseWorker(){return typeof Worker<"u"&&this._strategy===gC.Worker}runWorker(e){this._debug("Using runWorker for outgoing pings"),this._worker||(this._worker=new Worker(URL.createObjectURL(new Blob([this._workerScript],{type:"text/javascript"}))),this._worker.onmessage=t=>e(t.data))}runInterval(e){if(this._debug("Using runInterval for outgoing pings"),!this._timer){const t=Date.now();this._timer=setInterval(()=>{e(Date.now()-t)},this._interval)}}disposeWorker(){this._worker&&(this._worker.terminate(),delete this._worker,this._debug("Outgoing ping disposeWorker"))}disposeInterval(){this._timer&&(clearInterval(this._timer),delete this._timer,this._debug("Outgoing ping disposeInterval"))}}class $l{constructor(e){this.versions=e}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(e=>`v${e.replace(".","")}.stomp`)}}$l.V1_0="1.0";$l.V1_1="1.1";$l.V1_2="1.2";$l.default=new $l([$l.V1_2,$l.V1_1,$l.V1_0]);class iet{get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}constructor(e,t,r){this._client=e,this._webSocket=t,this._connected=!1,this._serverFrameHandlers={CONNECTED:i=>{this.debug(`connected to server ${i.headers.server}`),this._connected=!0,this._connectedVersion=i.headers.version,this._connectedVersion===$l.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(i.headers),this.onConnect(i)},MESSAGE:i=>{const s=i.headers.subscription,o=this._subscriptions[s]||this.onUnhandledMessage,a=i,l=this,c=this._connectedVersion===$l.V1_2?a.headers.ack:a.headers["message-id"];a.ack=(u={})=>l.ack(c,s,u),a.nack=(u={})=>l.nack(c,s,u),o(a)},RECEIPT:i=>{const s=this._receiptWatchers[i.headers["receipt-id"]];s?(s(i),delete this._receiptWatchers[i.headers["receipt-id"]]):this.onUnhandledReceipt(i)},ERROR:i=>{this.onStompError(i)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=r.debug,this.stompVersions=r.stompVersions,this.connectHeaders=r.connectHeaders,this.disconnectHeaders=r.disconnectHeaders,this.heartbeatIncoming=r.heartbeatIncoming,this.heartbeatToleranceMultiplier=r.heartbeatGracePeriods,this.heartbeatOutgoing=r.heartbeatOutgoing,this.splitLargeFrames=r.splitLargeFrames,this.maxWebSocketChunkSize=r.maxWebSocketChunkSize,this.forceBinaryWSFrames=r.forceBinaryWSFrames,this.logRawCommunication=r.logRawCommunication,this.appendMissingNULLonIncoming=r.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=r.discardWebsocketOnCommFailure,this.onConnect=r.onConnect,this.onDisconnect=r.onDisconnect,this.onStompError=r.onStompError,this.onWebSocketClose=r.onWebSocketClose,this.onWebSocketError=r.onWebSocketError,this.onUnhandledMessage=r.onUnhandledMessage,this.onUnhandledReceipt=r.onUnhandledReceipt,this.onUnhandledFrame=r.onUnhandledFrame,this.onHeartbeatReceived=r.onHeartbeatReceived,this.onHeartbeatLost=r.onHeartbeatLost}start(){const e=new net(t=>{const r=ag.fromRawFrame(t,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${r}`),(this._serverFrameHandlers[r.command]||this.onUnhandledFrame)(r)},()=>{this.debug("<<< PONG"),this.onHeartbeatReceived()});this._webSocket.onmessage=t=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){const r=t.data instanceof ArrayBuffer?new TextDecoder().decode(t.data):t.data;this.debug(`<<< ${r}`)}e.parseChunk(t.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=t=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(t)},this._webSocket.onerror=t=>{this.onWebSocketError(t)},this._webSocket.onopen=()=>{const t=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),t["accept-version"]=this.stompVersions.supportedVersions(),t["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:t})}}_setupHeartbeat(e){if(e.version!==$l.V1_1&&e.version!==$l.V1_2||!e["heart-beat"])return;const[t,r]=e["heart-beat"].split(",").map(i=>parseInt(i,10));if(this.heartbeatOutgoing!==0&&r!==0){const i=Math.max(this.heartbeatOutgoing,r);this.debug(`send PING every ${i}ms`),this._pinger=new ret(i,this._client.heartbeatStrategy,this.debug),this._pinger.start(()=>{this._webSocket.readyState===lg.OPEN&&(this._webSocket.send(d_.LF),this.debug(">>> PING"))})}if(this.heartbeatIncoming!==0&&t!==0){const i=Math.max(this.heartbeatIncoming,t);this.debug(`check PONG every ${i}ms`),this._ponger=setInterval(()=>{const s=Date.now()-this._lastServerActivityTS;s>i*this.heartbeatToleranceMultiplier&&(this.debug(`did not receive server activity for the last ${s}ms`),this.onHeartbeatLost(),this._closeOrDiscardWebsocket())},i)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState===lg.CONNECTING||this._webSocket.readyState===lg.OPEN)&&this._closeOrDiscardWebsocket()}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){typeof this._webSocket.terminate!="function"&&eet(this._webSocket,e=>this.debug(e)),this._webSocket.terminate()}_transmit(e){const{command:t,headers:r,body:i,binaryBody:s,skipContentLengthHeader:o}=e,a=new ag({command:t,headers:r,body:i,binaryBody:s,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:o});let l=a.serialize();if(this.logRawCommunication?this.debug(`>>> ${l}`):this.debug(`>>> ${a}`),this.forceBinaryWSFrames&&typeof l=="string"&&(l=new TextEncoder().encode(l)),typeof l!="string"||!this.splitLargeFrames)this._webSocket.send(l);else{let c=l;for(;c.length>0;){const u=c.substring(0,this.maxWebSocketChunkSize);c=c.substring(this.maxWebSocketChunkSize),this._webSocket.send(u),this.debug(`chunk sent = ${u.length}, remaining = ${c.length}`)}}}dispose(){if(this.connected)try{const e=Object.assign({},this.disconnectHeaders);e.receipt||(e.receipt=`close-${this._counter++}`),this.watchForReceipt(e.receipt,t=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(t)}),this._transmit({command:"DISCONNECT",headers:e})}catch(e){this.debug(`Ignoring error during disconnect ${e}`)}else(this._webSocket.readyState===lg.CONNECTING||this._webSocket.readyState===lg.OPEN)&&this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(this._pinger.stop(),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(e){const{destination:t,headers:r,body:i,binaryBody:s,skipContentLengthHeader:o}=e,a=Object.assign({destination:t},r);this._transmit({command:"SEND",headers:a,body:i,binaryBody:s,skipContentLengthHeader:o})}watchForReceipt(e,t){this._receiptWatchers[e]=t}subscribe(e,t,r={}){r=Object.assign({},r),r.id||(r.id=`sub-${this._counter++}`),r.destination=e,this._subscriptions[r.id]=t,this._transmit({command:"SUBSCRIBE",headers:r});const i=this;return{id:r.id,unsubscribe(s){return i.unsubscribe(r.id,s)}}}unsubscribe(e,t={}){t=Object.assign({},t),delete this._subscriptions[e],t.id=e,this._transmit({command:"UNSUBSCRIBE",headers:t})}begin(e){const t=e||`tx-${this._counter++}`;this._transmit({command:"BEGIN",headers:{transaction:t}});const r=this;return{id:t,commit(){r.commit(t)},abort(){r.abort(t)}}}commit(e){this._transmit({command:"COMMIT",headers:{transaction:e}})}abort(e){this._transmit({command:"ABORT",headers:{transaction:e}})}ack(e,t,r={}){r=Object.assign({},r),this._connectedVersion===$l.V1_2?r.id=e:r["message-id"]=e,r.subscription=t,this._transmit({command:"ACK",headers:r})}nack(e,t,r={}){return r=Object.assign({},r),this._connectedVersion===$l.V1_2?r.id=e:r["message-id"]=e,r.subscription=t,this._transmit({command:"NACK",headers:r})}}class eoe{get webSocket(){var e;return(e=this._stompHandler)==null?void 0:e._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(e){this._disconnectHeaders=e,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===Gd.ACTIVE}_changeState(e){this.state=e,this.onChangeState(e)}constructor(e={}){this.stompVersions=$l.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this._nextReconnectDelay=0,this.maxReconnectDelay=900*1e3,this.reconnectTimeMode=PN.LINEAR,this.heartbeatIncoming=1e4,this.heartbeatToleranceMultiplier=2,this.heartbeatOutgoing=1e4,this.heartbeatStrategy=gC.Interval,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8*1024,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=Gd.INACTIVE;const t=()=>{};this.debug=t,this.beforeConnect=t,this.onConnect=t,this.onDisconnect=t,this.onUnhandledMessage=t,this.onUnhandledReceipt=t,this.onUnhandledFrame=t,this.onHeartbeatReceived=t,this.onHeartbeatLost=t,this.onStompError=t,this.onWebSocketClose=t,this.onWebSocketError=t,this.logRawCommunication=!1,this.onChangeState=t,this.connectHeaders={},this._disconnectHeaders={},this.configure(e)}configure(e){Object.assign(this,e),this.maxReconnectDelay>0&&this.maxReconnectDelay<this.reconnectDelay&&(this.debug(`Warning: maxReconnectDelay (${this.maxReconnectDelay}ms) is less than reconnectDelay (${this.reconnectDelay}ms). Using reconnectDelay as the maxReconnectDelay delay.`),this.maxReconnectDelay=this.reconnectDelay)}activate(){const e=()=>{if(this.active){this.debug("Already ACTIVE, ignoring request to activate");return}this._changeState(Gd.ACTIVE),this._nextReconnectDelay=this.reconnectDelay,this._connect()};this.state===Gd.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then(()=>{e()})):e()}async _connect(){if(await this.beforeConnect(this),this._stompHandler){this.debug("There is already a stompHandler, skipping the call to connect");return}if(!this.active){this.debug("Client has been marked inactive, will not attempt to connect");return}this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout(()=>{this.connected||(this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect())},this.connectionTimeout)),this.debug("Opening Web Socket...");const e=this._createWebSocket();this._stompHandler=new iet(this,e,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatGracePeriods:this.heartbeatToleranceMultiplier,heartbeatOutgoing:this.heartbeatOutgoing,heartbeatStrategy:this.heartbeatStrategy,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:t=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),this._nextReconnectDelay=this.reconnectDelay,!this.active){this.debug("STOMP got connected while deactivate was issued, will disconnect now"),this._disposeStompHandler();return}this.onConnect(t)},onDisconnect:t=>{this.onDisconnect(t)},onStompError:t=>{this.onStompError(t)},onWebSocketClose:t=>{this._stompHandler=void 0,this.state===Gd.DEACTIVATING&&this._changeState(Gd.INACTIVE),this.onWebSocketClose(t),this.active&&this._schedule_reconnect()},onWebSocketError:t=>{this.onWebSocketError(t)},onUnhandledMessage:t=>{this.onUnhandledMessage(t)},onUnhandledReceipt:t=>{this.onUnhandledReceipt(t)},onUnhandledFrame:t=>{this.onUnhandledFrame(t)},onHeartbeatReceived:()=>{this.onHeartbeatReceived()},onHeartbeatLost:()=>{this.onHeartbeatLost()}}),this._stompHandler.start()}_createWebSocket(){let e;if(this.webSocketFactory)e=this.webSocketFactory();else if(this.brokerURL)e=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions());else throw new Error("Either brokerURL or webSocketFactory must be provided");return e.binaryType="arraybuffer",e}_schedule_reconnect(){this._nextReconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this._nextReconnectDelay}ms`),this._reconnector=setTimeout(()=>{this.reconnectTimeMode===PN.EXPONENTIAL&&(this._nextReconnectDelay=this._nextReconnectDelay*2,this.maxReconnectDelay!==0&&(this._nextReconnectDelay=Math.min(this._nextReconnectDelay,this.maxReconnectDelay))),this._connect()},this._nextReconnectDelay))}async deactivate(e={}){var s;const t=e.force||!1,r=this.active;let i;if(this.state===Gd.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState(Gd.DEACTIVATING),this._nextReconnectDelay=0,this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),this._stompHandler&&this.webSocket.readyState!==lg.CLOSED){const o=this._stompHandler.onWebSocketClose;i=new Promise((a,l)=>{this._stompHandler.onWebSocketClose=c=>{o(c),a()}})}else return this._changeState(Gd.INACTIVE),Promise.resolve();return t?(s=this._stompHandler)==null||s.discardWebsocket():r&&this._disposeStompHandler(),i}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(e){this._checkConnection(),this._stompHandler.publish(e)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(e,t){this._checkConnection(),this._stompHandler.watchForReceipt(e,t)}subscribe(e,t,r={}){return this._checkConnection(),this._stompHandler.subscribe(e,t,r)}unsubscribe(e,t={}){this._checkConnection(),this._stompHandler.unsubscribe(e,t)}begin(e){return this._checkConnection(),this._stompHandler.begin(e)}commit(e){this._checkConnection(),this._stompHandler.commit(e)}abort(e){this._checkConnection(),this._stompHandler.abort(e)}ack(e,t,r={}){this._checkConnection(),this._stompHandler.ack(e,t,r)}nack(e,t,r={}){this._checkConnection(),this._stompHandler.nack(e,t,r)}}function set(){const n=tm(),e=LI(),[t,r]=F.useState(null),[i,s]=F.useState(""),[o,a]=F.useState(""),[l,c]=F.useState(null),[u,d]=F.useState([]),[f,p]=F.useState([]),[g,v]=F.useState(!1),[b,x]=F.useState(!1),_=F.useRef(null),E=N=>{console.log("Connecting to WebSocket for user:",N);const I=new eoe({brokerURL:"ws://localhost:8080/websocket",reconnectDelay:5e3,heartbeatIncoming:4e3,heartbeatOutgoing:4e3,onConnect:D=>{console.log("Connected to WebSocket:",D),x(!0),console.log("Subscribing to /user/queue/messages"),I.subscribe(`/user/${N}/queue/messages`,P=>{console.log(" Raw message received on /user/queue/messages:",P);const G=JSON.parse(P.body);M(G)}),console.log("Subscribing to /user/queue/history"),I.subscribe(`/user/${N}/queue/history`,P=>{console.log("Raw history received on /user/queue/history:",P);const G=JSON.parse(P.body);R(G)}),console.log("Requesting chat history for user:",N),I.publish({destination:"/app/chat/history",body:JSON.stringify({userId:N})}),console.log("History request sent")},onStompError:D=>{console.error("STOMP error:",D),x(!1)},onWebSocketClose:()=>{console.log("WebSocket connection closed"),x(!1)},onWebSocketError:D=>{console.error("WebSocket error:",D)}});I.activate(),_.current=I},C=()=>{_.current&&(_.current.deactivate(),x(!1),console.log("Disconnected from WebSocket"))},M=N=>{switch(console.log("Received WebSocket message:",N),N.type){case"received":console.log(" Message received by server");break;case"response":v(!1);const I={id:`${N.chatId}-assistant`,role:"assistant",content:N.response,expression:N.expressionValues};console.log("Expression JSON Values are: "+N.expressionValues),a(N.response),p(D=>[...D,I]),N.audioData&&N.audioData.length>0?(console.log("Audio data received, size:",N.audioData.length),c(N.audioData)):console.log("No audio data in response");break;case"error":console.error("Server error:",N.message),v(!1),p(D=>[...D,{id:`error-${Date.now()}`,role:"assistant",content:`Error: ${N.message}`}]);break;case"deleted":console.log("Chat deleted:",N.chatId),p(D=>D.filter(P=>!P.id.startsWith(`${N.chatId}-`)));break}},R=N=>{console.log("Loading chat history:",N.length,"chats");const I=N.toReversed().flatMap(D=>[{id:`${D.id}-user`,role:"user",content:D.message},{id:`${D.id}-assistant`,role:"assistant",content:D.response}]);p(I)},L=()=>{if(!i.trim()||!t||g||!b){b||console.warn("Cannot send: WebSocket not connected");return}const N=i.trim(),I={id:`temp-user-${Date.now()}`,role:"user",content:N};p(D=>[...D,I]),s(""),v(!0);try{_.current.publish({destination:"/app/chat",body:JSON.stringify({userId:t.id,message:N})}),console.log("Message sent via WebSocket:",N)}catch(D){console.error("Error sending message:",D),v(!1),p(P=>[...P,{id:`error-${Date.now()}`,role:"assistant",content:"Sorry, I encountered an error sending your message. Please try again."}])}},B=()=>{p([]),a(""),c(null),console.log("Chat history cleared")};return F.useEffect(()=>{var N;if((N=n.state)!=null&&N.user){const I=n.state.user;r(I),E(I.id),console.log("User from navigation:",I.username)}else{const I=localStorage.getItem("user");if(I){const D=JSON.parse(I);r(D),E(D.id),console.log("User from localStorage:",D.username)}else console.log("No user found, redirecting to login"),e("/login")}return()=>{C()}},[n,e]),t?V.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[!b&&V.jsx("div",{className:"bg-yellow-100 text-yellow-800 px-4 py-2 text-center text-sm",children:"Reconnecting to server..."}),V.jsx(fY,{user:t,clearChat:B,isGuest:!1}),V.jsx("div",{className:"flex-1 relative overflow-hidden",children:V.jsx(i6,{})}),V.jsx(mY,{messages:f,loading:g}),V.jsx(gY,{input:i,setInput:s,onSend:L,loading:g,disabled:!b}),V.jsx(Are,{audioData:l,autoPlay:!0})]}):V.jsx("div",{className:"flex items-center justify-center h-screen",children:V.jsx("p",{className:"text-gray-500",children:"Loading..."})})}function oet(){const[n,e]=F.useState(""),[t,r]=F.useState(""),[i,s]=F.useState(null),[o,a]=F.useState(null),[l,c]=F.useState(null),[u,d]=F.useState([]),[f,p]=F.useState(!1),[g,v]=F.useState(!1),[b,x]=F.useState(!1),_=F.useRef(`guest-${Date.now()}-${Math.random().toString(36).substr(2,9)}`),E=F.useRef(null),C=()=>{console.log("Connecting to WebSocket for guest session:",_.current);const I=new eoe({brokerURL:"ws://localhost:8080/websocket",reconnectDelay:5e3,heartbeatIncoming:4e3,heartbeatOutgoing:4e3,onConnect:D=>{console.log("Connected to WebSocket (Guest Mode):",D),v(!0),console.log("Subscribing to /user/queue/messages"),I.subscribe(`/user/${_.current}/queue/messages`,P=>{console.log(" Raw message received on /user/queue/messages:",P);const G=JSON.parse(P.body);R(G)}),console.log("Guest session ready - no chat history loaded")},onStompError:D=>{console.error("STOMP error:",D),v(!1)},onWebSocketClose:()=>{console.log("WebSocket connection closed"),v(!1)},onWebSocketError:D=>{console.error("WebSocket error:",D)}});I.activate(),E.current=I},M=()=>{E.current&&(E.current.deactivate(),v(!1),console.log("Disconnected from WebSocket"))},R=I=>{var D;switch(console.log("Received WebSocket message:",I),I.type){case"received":console.log(" Message received by server");break;case"response":p(!1);const P={id:`${Date.now()}-assistant`,role:"assistant",content:I.response,audio:I.audioData,expressions:I.expressionValues};console.log("AI Response:",P.content),console.log("Expressions (raw):",I.expressionValues),console.log("Pose data:",I.pose),a(((D=I.pose)==null?void 0:D.trim())||null);let G=null;if(I.expressionValues)try{typeof I.expressionValues=="string"?G=JSON.parse(I.expressionValues):G=I.expressionValues,console.log("Expressions (parsed):",G)}catch(W){console.error("Error parsing expressions:",W)}c(G),r(P.content),d(W=>[...W,P]),I.audioData&&I.audioData.length>0?(console.log("Audio data received, size:",I.audioData.length),s(I.audioData)):console.log("No audio data in response");break;case"error":console.error("Server error:",I.message),p(!1),d(W=>[...W,{id:`error-${Date.now()}`,role:"assistant",content:`Error: ${I.message}`}]);break}},L=()=>{if(!n.trim()||f||!g){g||console.warn("Cannot send: WebSocket not connected");return}const I=n.trim(),D={id:`temp-user-${Date.now()}`,role:"user",content:I};d(P=>[...P,D]),e(""),p(!0);try{E.current.publish({destination:"/app/chat",body:JSON.stringify({userId:_.current,message:I,isGuest:!0})}),console.log("Message sent via WebSocket (Guest):",I)}catch(P){console.error("Error sending message:",P),p(!1),d(G=>[...G,{id:`error-${Date.now()}`,role:"assistant",content:"Sorry, I encountered an error sending your message. Please try again."}])}},B=()=>{d([]),r(""),s(null),a(null),c(null),console.log("Chat history cleared")},N=I=>{x(I)};return F.useEffect(()=>(C(),()=>{M()}),[]),V.jsxs("div",{className:"relative w-screen h-screen overflow-hidden",children:[!g&&V.jsx("div",{className:"bg-yellow-100 text-yellow-800 px-4 py-2 text-center text-sm",children:" Reconnecting to server..."}),V.jsx(i6,{isSpeaking:b,pose:o,expressions:l}),V.jsx(fY,{user:null,clearChat:B,isGuest:!0}),V.jsx(mY,{messages:u,loading:f}),V.jsx(gY,{input:n,setInput:e,onSend:L,loading:f,disabled:!g,isGuest:!0}),V.jsx(Are,{audioData:i,autoPlay:!0,onPlayingStateChange:N})]})}function Kp(n,...e){const t=new URL(`https://mui.com/production-error/?code=${n}`);return e.forEach(r=>t.searchParams.append("args[]",r)),`Minified MUI error #${n}; visit ${t} for the full message.`}function Rn(n){if(typeof n!="string")throw new Error(Kp(7));return n.charAt(0).toUpperCase()+n.slice(1)}var w$={exports:{}},ji={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b7;function aet(){if(b7)return ji;b7=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.for("react.view_transition"),p=Symbol.for("react.client.reference");function g(v){if(typeof v=="object"&&v!==null){var b=v.$$typeof;switch(b){case n:switch(v=v.type,v){case t:case i:case r:case l:case c:case f:return v;default:switch(v=v&&v.$$typeof,v){case o:case a:case d:case u:return v;case s:return v;default:return b}}case e:return b}}}return ji.ContextConsumer=s,ji.ContextProvider=o,ji.Element=n,ji.ForwardRef=a,ji.Fragment=t,ji.Lazy=d,ji.Memo=u,ji.Portal=e,ji.Profiler=i,ji.StrictMode=r,ji.Suspense=l,ji.SuspenseList=c,ji.isContextConsumer=function(v){return g(v)===s},ji.isContextProvider=function(v){return g(v)===o},ji.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===n},ji.isForwardRef=function(v){return g(v)===a},ji.isFragment=function(v){return g(v)===t},ji.isLazy=function(v){return g(v)===d},ji.isMemo=function(v){return g(v)===u},ji.isPortal=function(v){return g(v)===e},ji.isProfiler=function(v){return g(v)===i},ji.isStrictMode=function(v){return g(v)===r},ji.isSuspense=function(v){return g(v)===l},ji.isSuspenseList=function(v){return g(v)===c},ji.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===t||v===i||v===r||v===l||v===c||typeof v=="object"&&v!==null&&(v.$$typeof===d||v.$$typeof===u||v.$$typeof===o||v.$$typeof===s||v.$$typeof===a||v.$$typeof===p||v.getModuleId!==void 0)},ji.typeOf=g,ji}var x7;function cet(){return x7||(x7=1,w$.exports=aet()),w$.exports}var toe=cet();function df(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function noe(n){if(F.isValidElement(n)||toe.isValidElementType(n)||!df(n))return n;const e={};return Object.keys(n).forEach(t=>{e[t]=noe(n[t])}),e}function aa(n,e,t={clone:!0}){const r=t.clone?{...n}:n;return df(n)&&df(e)&&Object.keys(e).forEach(i=>{F.isValidElement(e[i])||toe.isValidElementType(e[i])?r[i]=e[i]:df(e[i])&&Object.prototype.hasOwnProperty.call(n,i)&&df(n[i])?r[i]=aa(n[i],e[i],t):t.clone?r[i]=df(e[i])?noe(e[i]):e[i]:r[i]=e[i]}),r}function k_(n,e){return e?aa(n,e,{clone:!1}):n}function S7(n,e){if(!n.containerQueries)return e;const t=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,i)=>{var o,a;const s=/min-width:\s*([0-9.]+)/;return+(((o=r.match(s))==null?void 0:o[1])||0)-+(((a=i.match(s))==null?void 0:a[1])||0)});return t.length?t.reduce((r,i)=>{const s=e[i];return delete r[i],r[i]=s,r},{...e}):e}function uet(n,e){return e==="@"||e.startsWith("@")&&(n.some(t=>e.startsWith(`@${t}`))||!!e.match(/^@\d/))}function det(n,e){const t=e.match(/^@([^/]+)?\/?(.+)?$/);if(!t)return null;const[,r,i]=t,s=Number.isNaN(+r)?r||0:+r;return n.containerQueries(i).up(s)}function het(n){const e=(s,o)=>s.replace("@media",o?`@container ${o}`:"@container");function t(s,o){s.up=(...a)=>e(n.breakpoints.up(...a),o),s.down=(...a)=>e(n.breakpoints.down(...a),o),s.between=(...a)=>e(n.breakpoints.between(...a),o),s.only=(...a)=>e(n.breakpoints.only(...a),o),s.not=(...a)=>{const l=e(n.breakpoints.not(...a),o);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const r={},i=s=>(t(r,s),r);return t(i),{...n,containerQueries:i}}const G3={xs:0,sm:600,md:900,lg:1200,xl:1536},w7={keys:["xs","sm","md","lg","xl"],up:n=>`@media (min-width:${G3[n]}px)`},fet={containerQueries:n=>({up:e=>{let t=typeof e=="number"?e:G3[e]||e;return typeof t=="number"&&(t=`${t}px`),n?`@container ${n} (min-width:${t})`:`@container (min-width:${t})`}})};function uh(n,e,t){const r=n.theme||{};if(Array.isArray(e)){const s=r.breakpoints||w7;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=t(e[l]),o),{})}if(typeof e=="object"){const s=r.breakpoints||w7;return Object.keys(e).reduce((o,a)=>{if(uet(s.keys,a)){const l=det(r.containerQueries?r:fet,a);l&&(o[l]=t(e[a],a))}else if(Object.keys(s.values||G3).includes(a)){const l=s.up(a);o[l]=t(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return t(e)}function roe(n={}){var t;return((t=n.keys)==null?void 0:t.reduce((r,i)=>{const s=n.up(i);return r[s]={},r},{}))||{}}function VF(n,e){return n.reduce((t,r)=>{const i=t[r];return(!i||Object.keys(i).length===0)&&delete t[r],t},e)}function pet(n,...e){const t=roe(n),r=[t,...e].reduce((i,s)=>aa(i,s),{});return VF(Object.keys(t),r)}function met(n,e){if(typeof n!="object")return{};const t={},r=Object.keys(e);return Array.isArray(n)?r.forEach((i,s)=>{s<n.length&&(t[i]=!0)}):r.forEach(i=>{n[i]!=null&&(t[i]=!0)}),t}function _$({values:n,breakpoints:e,base:t}){const r=t||met(n,e),i=Object.keys(r);if(i.length===0)return n;let s;return i.reduce((o,a,l)=>(Array.isArray(n)?(o[a]=n[l]!=null?n[l]:n[s],s=l):typeof n=="object"?(o[a]=n[a]!=null?n[a]:n[s],s=a):o[a]=n,o),{})}function af(n,e,t=!0){if(!e||typeof e!="string")return null;if(n&&n.vars&&t){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,n);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,n)}function UN(n,e,t,r=t){let i;return typeof n=="function"?i=n(t):Array.isArray(n)?i=n[t]||r:i=af(n,t)||r,e&&(i=e(i,r,n)),i}function fo(n){const{prop:e,cssProperty:t=n.prop,themeKey:r,transform:i}=n,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,c=af(l,r)||{};return uh(o,a,d=>{let f=UN(c,i,d);return d===f&&typeof d=="string"&&(f=UN(c,i,`${e}${d==="default"?"":Rn(d)}`,d)),t===!1?f:{[t]:f}})};return s.propTypes={},s.filterProps=[e],s}function get(n){const e={};return t=>(e[t]===void 0&&(e[t]=n(t)),e[t])}const yet={m:"margin",p:"padding"},vet={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},_7={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},bet=get(n=>{if(n.length>2)if(_7[n])n=_7[n];else return[n];const[e,t]=n.split(""),r=yet[e],i=vet[t]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),s6=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],o6=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...s6,...o6];function v2(n,e,t,r){const i=af(n,e,!0)??t;return typeof i=="number"||typeof i=="string"?s=>typeof s=="string"?s:typeof i=="string"?i.startsWith("var(")&&s===0?0:i.startsWith("var(")&&s===1?i:`calc(${s} * ${i})`:i*s:Array.isArray(i)?s=>{if(typeof s=="string")return s;const o=Math.abs(s),a=i[o];return s>=0?a:typeof a=="number"?-a:typeof a=="string"&&a.startsWith("var(")?`calc(-1 * ${a})`:`-${a}`}:typeof i=="function"?i:()=>{}}function W3(n){return v2(n,"spacing",8)}function Av(n,e){return typeof e=="string"||e==null?e:n(e)}function xet(n,e){return t=>n.reduce((r,i)=>(r[i]=Av(e,t),r),{})}function wet(n,e,t,r){if(!e.includes(t))return null;const i=bet(t),s=xet(i,r),o=n[t];return uh(n,o,s)}function ioe(n,e){const t=W3(n.theme);return Object.keys(n).map(r=>wet(n,e,r,t)).reduce(k_,{})}function Gs(n){return ioe(n,s6)}Gs.propTypes={};Gs.filterProps=s6;function Ws(n){return ioe(n,o6)}Ws.propTypes={};Ws.filterProps=o6;function j3(...n){const e=n.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),t=r=>Object.keys(r).reduce((i,s)=>e[s]?k_(i,e[s](r)):i,{});return t.propTypes={},t.filterProps=n.reduce((r,i)=>r.concat(i.filterProps),[]),t}function Pu(n){return typeof n!="number"?n:`${n}px solid`}function od(n,e){return fo({prop:n,themeKey:"borders",transform:e})}const _et=od("border",Pu),Cet=od("borderTop",Pu),Eet=od("borderRight",Pu),Aet=od("borderBottom",Pu),Tet=od("borderLeft",Pu),Met=od("borderColor"),Ret=od("borderTopColor"),Net=od("borderRightColor"),Iet=od("borderBottomColor"),Det=od("borderLeftColor"),ket=od("outline",Pu),Oet=od("outlineColor"),X3=n=>{if(n.borderRadius!==void 0&&n.borderRadius!==null){const e=v2(n.theme,"shape.borderRadius",4),t=r=>({borderRadius:Av(e,r)});return uh(n,n.borderRadius,t)}return null};X3.propTypes={};X3.filterProps=["borderRadius"];j3(_et,Cet,Eet,Aet,Tet,Met,Ret,Net,Iet,Det,X3,ket,Oet);const q3=n=>{if(n.gap!==void 0&&n.gap!==null){const e=v2(n.theme,"spacing",8),t=r=>({gap:Av(e,r)});return uh(n,n.gap,t)}return null};q3.propTypes={};q3.filterProps=["gap"];const K3=n=>{if(n.columnGap!==void 0&&n.columnGap!==null){const e=v2(n.theme,"spacing",8),t=r=>({columnGap:Av(e,r)});return uh(n,n.columnGap,t)}return null};K3.propTypes={};K3.filterProps=["columnGap"];const Y3=n=>{if(n.rowGap!==void 0&&n.rowGap!==null){const e=v2(n.theme,"spacing",8),t=r=>({rowGap:Av(e,r)});return uh(n,n.rowGap,t)}return null};Y3.propTypes={};Y3.filterProps=["rowGap"];const Bet=fo({prop:"gridColumn"}),$et=fo({prop:"gridRow"}),Let=fo({prop:"gridAutoFlow"}),Fet=fo({prop:"gridAutoColumns"}),Pet=fo({prop:"gridAutoRows"}),Uet=fo({prop:"gridTemplateColumns"}),zet=fo({prop:"gridTemplateRows"}),Het=fo({prop:"gridTemplateAreas"}),Vet=fo({prop:"gridArea"});j3(q3,K3,Y3,Bet,$et,Let,Fet,Pet,Uet,zet,Het,Vet);function Yx(n,e){return e==="grey"?e:n}const Get=fo({prop:"color",themeKey:"palette",transform:Yx}),Wet=fo({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Yx}),jet=fo({prop:"backgroundColor",themeKey:"palette",transform:Yx});j3(Get,Wet,jet);function eu(n){return n<=1&&n!==0?`${n*100}%`:n}const Xet=fo({prop:"width",transform:eu}),a6=n=>{if(n.maxWidth!==void 0&&n.maxWidth!==null){const e=t=>{var i,s,o,a,l;const r=((o=(s=(i=n.theme)==null?void 0:i.breakpoints)==null?void 0:s.values)==null?void 0:o[t])||G3[t];return r?((l=(a=n.theme)==null?void 0:a.breakpoints)==null?void 0:l.unit)!=="px"?{maxWidth:`${r}${n.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:eu(t)}};return uh(n,n.maxWidth,e)}return null};a6.filterProps=["maxWidth"];const qet=fo({prop:"minWidth",transform:eu}),Ket=fo({prop:"height",transform:eu}),Yet=fo({prop:"maxHeight",transform:eu}),Jet=fo({prop:"minHeight",transform:eu});fo({prop:"size",cssProperty:"width",transform:eu});fo({prop:"size",cssProperty:"height",transform:eu});const Zet=fo({prop:"boxSizing"});j3(Xet,a6,qet,Ket,Yet,Jet,Zet);const b2={border:{themeKey:"borders",transform:Pu},borderTop:{themeKey:"borders",transform:Pu},borderRight:{themeKey:"borders",transform:Pu},borderBottom:{themeKey:"borders",transform:Pu},borderLeft:{themeKey:"borders",transform:Pu},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Pu},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:X3},color:{themeKey:"palette",transform:Yx},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Yx},backgroundColor:{themeKey:"palette",transform:Yx},p:{style:Ws},pt:{style:Ws},pr:{style:Ws},pb:{style:Ws},pl:{style:Ws},px:{style:Ws},py:{style:Ws},padding:{style:Ws},paddingTop:{style:Ws},paddingRight:{style:Ws},paddingBottom:{style:Ws},paddingLeft:{style:Ws},paddingX:{style:Ws},paddingY:{style:Ws},paddingInline:{style:Ws},paddingInlineStart:{style:Ws},paddingInlineEnd:{style:Ws},paddingBlock:{style:Ws},paddingBlockStart:{style:Ws},paddingBlockEnd:{style:Ws},m:{style:Gs},mt:{style:Gs},mr:{style:Gs},mb:{style:Gs},ml:{style:Gs},mx:{style:Gs},my:{style:Gs},margin:{style:Gs},marginTop:{style:Gs},marginRight:{style:Gs},marginBottom:{style:Gs},marginLeft:{style:Gs},marginX:{style:Gs},marginY:{style:Gs},marginInline:{style:Gs},marginInlineStart:{style:Gs},marginInlineEnd:{style:Gs},marginBlock:{style:Gs},marginBlockStart:{style:Gs},marginBlockEnd:{style:Gs},displayPrint:{cssProperty:!1,transform:n=>({"@media print":{display:n}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:q3},rowGap:{style:Y3},columnGap:{style:K3},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:eu},maxWidth:{style:a6},minWidth:{transform:eu},height:{transform:eu},maxHeight:{transform:eu},minHeight:{transform:eu},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Qet(...n){const e=n.reduce((r,i)=>r.concat(Object.keys(i)),[]),t=new Set(e);return n.every(r=>t.size===Object.keys(r).length)}function ett(n,e){return typeof n=="function"?n(e):n}function ttt(){function n(t,r,i,s){const o={[t]:r,theme:i},a=s[t];if(!a)return{[t]:r};const{cssProperty:l=t,themeKey:c,transform:u,style:d}=a;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[t]:r};const f=af(i,c)||{};return d?d(o):uh(o,r,g=>{let v=UN(f,u,g);return g===v&&typeof g=="string"&&(v=UN(f,u,`${t}${g==="default"?"":Rn(g)}`,g)),l===!1?v:{[l]:v}})}function e(t){const{sx:r,theme:i={},nested:s}=t||{};if(!r)return null;const o=i.unstable_sxConfig??b2;function a(l){let c=l;if(typeof l=="function")c=l(i);else if(typeof l!="object")return l;if(!c)return null;const u=roe(i.breakpoints),d=Object.keys(u);let f=u;return Object.keys(c).forEach(p=>{const g=ett(c[p],i);if(g!=null)if(typeof g=="object")if(o[p])f=k_(f,n(p,g,i,o));else{const v=uh({theme:i},g,b=>({[p]:b}));Qet(v,g)?f[p]=e({sx:g,theme:i,nested:!0}):f=k_(f,v)}else f=k_(f,n(p,g,i,o))}),!s&&i.modularCssLayers?{"@layer sx":S7(i,VF(d,f))}:S7(i,VF(d,f))}return Array.isArray(r)?r.map(a):a(r)}return e}const Ug=ttt();Ug.filterProps=["sx"];const ntt=n=>{var r;const e={systemProps:{},otherProps:{}},t=((r=n==null?void 0:n.theme)==null?void 0:r.unstable_sxConfig)??b2;return Object.keys(n).forEach(i=>{t[i]?e.systemProps[i]=n[i]:e.otherProps[i]=n[i]}),e};function l6(n){const{sx:e,...t}=n,{systemProps:r,otherProps:i}=ntt(t);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return df(a)?{...r,...a}:r}:s={...r,...e},{...i,sx:s}}function rtt(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function itt(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var stt=function(){function n(t){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(itt(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=rtt(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},n}(),Ja="-ms-",zN="-moz-",yi="-webkit-",soe="comm",c6="rule",u6="decl",ott="@import",ooe="@keyframes",att="@layer",ltt=Math.abs,J3=String.fromCharCode,ctt=Object.assign;function utt(n,e){return Ta(n,0)^45?(((e<<2^Ta(n,0))<<2^Ta(n,1))<<2^Ta(n,2))<<2^Ta(n,3):0}function aoe(n){return n.trim()}function dtt(n,e){return(n=e.exec(n))?n[0]:n}function bi(n,e,t){return n.replace(e,t)}function GF(n,e){return n.indexOf(e)}function Ta(n,e){return n.charCodeAt(e)|0}function yC(n,e,t){return n.slice(e,t)}function lf(n){return n.length}function d6(n){return n.length}function dM(n,e){return e.push(n),n}function htt(n,e){return n.map(e).join("")}var Z3=1,M1=1,loe=0,Ic=0,wo=0,dS="";function Q3(n,e,t,r,i,s,o){return{value:n,root:e,parent:t,type:r,props:i,children:s,line:Z3,column:M1,length:o,return:""}}function qw(n,e){return ctt(Q3("",null,null,"",null,null,0),n,{length:-n.length},e)}function ftt(){return wo}function ptt(){return wo=Ic>0?Ta(dS,--Ic):0,M1--,wo===10&&(M1=1,Z3--),wo}function su(){return wo=Ic<loe?Ta(dS,Ic++):0,M1++,wo===10&&(M1=1,Z3++),wo}function xf(){return Ta(dS,Ic)}function UM(){return Ic}function x2(n,e){return yC(dS,n,e)}function vC(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function coe(n){return Z3=M1=1,loe=lf(dS=n),Ic=0,[]}function uoe(n){return dS="",n}function zM(n){return aoe(x2(Ic-1,WF(n===91?n+2:n===40?n+1:n)))}function mtt(n){for(;(wo=xf())&&wo<33;)su();return vC(n)>2||vC(wo)>3?"":" "}function gtt(n,e){for(;--e&&su()&&!(wo<48||wo>102||wo>57&&wo<65||wo>70&&wo<97););return x2(n,UM()+(e<6&&xf()==32&&su()==32))}function WF(n){for(;su();)switch(wo){case n:return Ic;case 34:case 39:n!==34&&n!==39&&WF(wo);break;case 40:n===41&&WF(n);break;case 92:su();break}return Ic}function ytt(n,e){for(;su()&&n+wo!==57;)if(n+wo===84&&xf()===47)break;return"/*"+x2(e,Ic-1)+"*"+J3(n===47?n:su())}function vtt(n){for(;!vC(xf());)su();return x2(n,Ic)}function btt(n){return uoe(HM("",null,null,null,[""],n=coe(n),0,[0],n))}function HM(n,e,t,r,i,s,o,a,l){for(var c=0,u=0,d=o,f=0,p=0,g=0,v=1,b=1,x=1,_=0,E="",C=i,M=s,R=r,L=E;b;)switch(g=_,_=su()){case 40:if(g!=108&&Ta(L,d-1)==58){GF(L+=bi(zM(_),"&","&\f"),"&\f")!=-1&&(x=-1);break}case 34:case 39:case 91:L+=zM(_);break;case 9:case 10:case 13:case 32:L+=mtt(g);break;case 92:L+=gtt(UM()-1,7);continue;case 47:switch(xf()){case 42:case 47:dM(xtt(ytt(su(),UM()),e,t),l);break;default:L+="/"}break;case 123*v:a[c++]=lf(L)*x;case 125*v:case 59:case 0:switch(_){case 0:case 125:b=0;case 59+u:x==-1&&(L=bi(L,/\f/g,"")),p>0&&lf(L)-d&&dM(p>32?E7(L+";",r,t,d-1):E7(bi(L," ","")+";",r,t,d-2),l);break;case 59:L+=";";default:if(dM(R=C7(L,e,t,c,u,i,a,E,C=[],M=[],d),s),_===123)if(u===0)HM(L,e,R,R,C,s,d,a,M);else switch(f===99&&Ta(L,3)===110?100:f){case 100:case 108:case 109:case 115:HM(n,R,R,r&&dM(C7(n,R,R,0,0,i,a,E,i,C=[],d),M),i,M,d,a,r?C:M);break;default:HM(L,R,R,R,[""],M,0,a,M)}}c=u=p=0,v=x=1,E=L="",d=o;break;case 58:d=1+lf(L),p=g;default:if(v<1){if(_==123)--v;else if(_==125&&v++==0&&ptt()==125)continue}switch(L+=J3(_),_*v){case 38:x=u>0?1:(L+="\f",-1);break;case 44:a[c++]=(lf(L)-1)*x,x=1;break;case 64:xf()===45&&(L+=zM(su())),f=xf(),u=d=lf(E=L+=vtt(UM())),_++;break;case 45:g===45&&lf(L)==2&&(v=0)}}return s}function C7(n,e,t,r,i,s,o,a,l,c,u){for(var d=i-1,f=i===0?s:[""],p=d6(f),g=0,v=0,b=0;g<r;++g)for(var x=0,_=yC(n,d+1,d=ltt(v=o[g])),E=n;x<p;++x)(E=aoe(v>0?f[x]+" "+_:bi(_,/&\f/g,f[x])))&&(l[b++]=E);return Q3(n,e,t,i===0?c6:a,l,c,u)}function xtt(n,e,t){return Q3(n,e,t,soe,J3(ftt()),yC(n,2,-2),0)}function E7(n,e,t,r){return Q3(n,e,t,u6,yC(n,0,r),yC(n,r+1,-1),r)}function Jx(n,e){for(var t="",r=d6(n),i=0;i<r;i++)t+=e(n[i],i,n,e)||"";return t}function Stt(n,e,t,r){switch(n.type){case att:if(n.children.length)break;case ott:case u6:return n.return=n.return||n.value;case soe:return"";case ooe:return n.return=n.value+"{"+Jx(n.children,r)+"}";case c6:n.value=n.props.join(",")}return lf(t=Jx(n.children,r))?n.return=n.value+"{"+t+"}":""}function wtt(n){var e=d6(n);return function(t,r,i,s){for(var o="",a=0;a<e;a++)o+=n[a](t,r,i,s)||"";return o}}function _tt(n){return function(e){e.root||(e=e.return)&&n(e)}}function doe(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var Ctt=function(e,t,r){for(var i=0,s=0;i=s,s=xf(),i===38&&s===12&&(t[r]=1),!vC(s);)su();return x2(e,Ic)},Ett=function(e,t){var r=-1,i=44;do switch(vC(i)){case 0:i===38&&xf()===12&&(t[r]=1),e[r]+=Ctt(Ic-1,t,r);break;case 2:e[r]+=zM(i);break;case 4:if(i===44){e[++r]=xf()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=J3(i)}while(i=su());return e},Att=function(e,t){return uoe(Ett(coe(e),t))},A7=new WeakMap,Ttt=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!A7.get(r))&&!i){A7.set(e,!0);for(var s=[],o=Att(t,s),a=r.props,l=0,c=0;l<o.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[u]):a[u]+" "+o[l]}}},Mtt=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function hoe(n,e){switch(utt(n,e)){case 5103:return yi+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return yi+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return yi+n+zN+n+Ja+n+n;case 6828:case 4268:return yi+n+Ja+n+n;case 6165:return yi+n+Ja+"flex-"+n+n;case 5187:return yi+n+bi(n,/(\w+).+(:[^]+)/,yi+"box-$1$2"+Ja+"flex-$1$2")+n;case 5443:return yi+n+Ja+"flex-item-"+bi(n,/flex-|-self/,"")+n;case 4675:return yi+n+Ja+"flex-line-pack"+bi(n,/align-content|flex-|-self/,"")+n;case 5548:return yi+n+Ja+bi(n,"shrink","negative")+n;case 5292:return yi+n+Ja+bi(n,"basis","preferred-size")+n;case 6060:return yi+"box-"+bi(n,"-grow","")+yi+n+Ja+bi(n,"grow","positive")+n;case 4554:return yi+bi(n,/([^-])(transform)/g,"$1"+yi+"$2")+n;case 6187:return bi(bi(bi(n,/(zoom-|grab)/,yi+"$1"),/(image-set)/,yi+"$1"),n,"")+n;case 5495:case 3959:return bi(n,/(image-set\([^]*)/,yi+"$1$`$1");case 4968:return bi(bi(n,/(.+:)(flex-)?(.*)/,yi+"box-pack:$3"+Ja+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+yi+n+n;case 4095:case 3583:case 4068:case 2532:return bi(n,/(.+)-inline(.+)/,yi+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(lf(n)-1-e>6)switch(Ta(n,e+1)){case 109:if(Ta(n,e+4)!==45)break;case 102:return bi(n,/(.+:)(.+)-([^]+)/,"$1"+yi+"$2-$3$1"+zN+(Ta(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~GF(n,"stretch")?hoe(bi(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(Ta(n,e+1)!==115)break;case 6444:switch(Ta(n,lf(n)-3-(~GF(n,"!important")&&10))){case 107:return bi(n,":",":"+yi)+n;case 101:return bi(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+yi+(Ta(n,14)===45?"inline-":"")+"box$3$1"+yi+"$2$3$1"+Ja+"$2box$3")+n}break;case 5936:switch(Ta(n,e+11)){case 114:return yi+n+Ja+bi(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return yi+n+Ja+bi(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return yi+n+Ja+bi(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return yi+n+Ja+n+n}return n}var Rtt=function(e,t,r,i){if(e.length>-1&&!e.return)switch(e.type){case u6:e.return=hoe(e.value,e.length);break;case ooe:return Jx([qw(e,{value:bi(e.value,"@","@"+yi)})],i);case c6:if(e.length)return htt(e.props,function(s){switch(dtt(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Jx([qw(e,{props:[bi(s,/:(read-\w+)/,":"+zN+"$1")]})],i);case"::placeholder":return Jx([qw(e,{props:[bi(s,/:(plac\w+)/,":"+yi+"input-$1")]}),qw(e,{props:[bi(s,/:(plac\w+)/,":"+zN+"$1")]}),qw(e,{props:[bi(s,/:(plac\w+)/,Ja+"input-$1")]})],i)}return""})}},Ntt=[Rtt],Itt=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(v){var b=v.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var i=e.stylisPlugins||Ntt,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(v){for(var b=v.getAttribute("data-emotion").split(" "),x=1;x<b.length;x++)s[b[x]]=!0;a.push(v)});var l,c=[Ttt,Mtt];{var u,d=[Stt,_tt(function(v){u.insert(v)})],f=wtt(c.concat(i,d)),p=function(b){return Jx(btt(b),f)};l=function(b,x,_,E){u=_,p(b?b+"{"+x.styles+"}":x.styles),E&&(g.inserted[x.name]=!0)}}var g={key:t,sheet:new stt({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return g.sheet.hydrate(a),g},C$={exports:{}},Ei={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T7;function Dtt(){if(T7)return Ei;T7=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,o=n?Symbol.for("react.provider"):60109,a=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,c=n?Symbol.for("react.concurrent_mode"):60111,u=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,p=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,x=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function E(M){if(typeof M=="object"&&M!==null){var R=M.$$typeof;switch(R){case e:switch(M=M.type,M){case l:case c:case r:case s:case i:case d:return M;default:switch(M=M&&M.$$typeof,M){case a:case u:case g:case p:case o:return M;default:return R}}case t:return R}}}function C(M){return E(M)===c}return Ei.AsyncMode=l,Ei.ConcurrentMode=c,Ei.ContextConsumer=a,Ei.ContextProvider=o,Ei.Element=e,Ei.ForwardRef=u,Ei.Fragment=r,Ei.Lazy=g,Ei.Memo=p,Ei.Portal=t,Ei.Profiler=s,Ei.StrictMode=i,Ei.Suspense=d,Ei.isAsyncMode=function(M){return C(M)||E(M)===l},Ei.isConcurrentMode=C,Ei.isContextConsumer=function(M){return E(M)===a},Ei.isContextProvider=function(M){return E(M)===o},Ei.isElement=function(M){return typeof M=="object"&&M!==null&&M.$$typeof===e},Ei.isForwardRef=function(M){return E(M)===u},Ei.isFragment=function(M){return E(M)===r},Ei.isLazy=function(M){return E(M)===g},Ei.isMemo=function(M){return E(M)===p},Ei.isPortal=function(M){return E(M)===t},Ei.isProfiler=function(M){return E(M)===s},Ei.isStrictMode=function(M){return E(M)===i},Ei.isSuspense=function(M){return E(M)===d},Ei.isValidElementType=function(M){return typeof M=="string"||typeof M=="function"||M===r||M===c||M===s||M===i||M===d||M===f||typeof M=="object"&&M!==null&&(M.$$typeof===g||M.$$typeof===p||M.$$typeof===o||M.$$typeof===a||M.$$typeof===u||M.$$typeof===b||M.$$typeof===x||M.$$typeof===_||M.$$typeof===v)},Ei.typeOf=E,Ei}var M7;function ktt(){return M7||(M7=1,C$.exports=Dtt()),C$.exports}var E$,R7;function Ott(){if(R7)return E$;R7=1;var n=ktt(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[n.ForwardRef]=r,s[n.Memo]=i;function o(g){return n.isMemo(g)?i:s[g.$$typeof]||e}var a=Object.defineProperty,l=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,f=Object.prototype;function p(g,v,b){if(typeof v!="string"){if(f){var x=d(v);x&&x!==f&&p(g,x,b)}var _=l(v);c&&(_=_.concat(c(v)));for(var E=o(g),C=o(v),M=0;M<_.length;++M){var R=_[M];if(!t[R]&&!(b&&b[R])&&!(C&&C[R])&&!(E&&E[R])){var L=u(v,R);try{a(g,R,L)}catch{}}}}return g}return E$=p,E$}Ott();var Btt=!0;function foe(n,e,t){var r="";return t.split(" ").forEach(function(i){n[i]!==void 0?e.push(n[i]+";"):i&&(r+=i+" ")}),r}var h6=function(e,t,r){var i=e.key+"-"+t.name;(r===!1||Btt===!1)&&e.registered[i]===void 0&&(e.registered[i]=t.styles)},f6=function(e,t,r){h6(e,t,r);var i=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var s=t;do e.insert(t===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function $tt(n){for(var e=0,t,r=0,i=n.length;i>=4;++r,i-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Ltt={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ftt=/[A-Z]|^ms/g,Ptt=/_EMO_([^_]+?)_([^]*?)_EMO_/g,poe=function(e){return e.charCodeAt(1)===45},N7=function(e){return e!=null&&typeof e!="boolean"},A$=doe(function(n){return poe(n)?n:n.replace(Ftt,"-$&").toLowerCase()}),I7=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(Ptt,function(r,i,s){return cf={name:i,styles:s,next:cf},i})}return Ltt[e]!==1&&!poe(e)&&typeof t=="number"&&t!==0?t+"px":t};function bC(n,e,t){if(t==null)return"";var r=t;if(r.__emotion_styles!==void 0)return r;switch(typeof t){case"boolean":return"";case"object":{var i=t;if(i.anim===1)return cf={name:i.name,styles:i.styles,next:cf},i.name;var s=t;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)cf={name:o.name,styles:o.styles,next:cf},o=o.next;var a=s.styles+";";return a}return Utt(n,e,t)}case"function":{if(n!==void 0){var l=cf,c=t(n);return cf=l,bC(n,e,c)}break}}var u=t;if(e==null)return u;var d=e[u];return d!==void 0?d:u}function Utt(n,e,t){var r="";if(Array.isArray(t))for(var i=0;i<t.length;i++)r+=bC(n,e,t[i])+";";else for(var s in t){var o=t[s];if(typeof o!="object"){var a=o;e!=null&&e[a]!==void 0?r+=s+"{"+e[a]+"}":N7(a)&&(r+=A$(s)+":"+I7(s,a)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var l=0;l<o.length;l++)N7(o[l])&&(r+=A$(s)+":"+I7(s,o[l])+";");else{var c=bC(n,e,o);switch(s){case"animation":case"animationName":{r+=A$(s)+":"+c+";";break}default:r+=s+"{"+c+"}"}}}return r}var D7=/label:\s*([^\s;{]+)\s*(;|$)/g,cf;function S2(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,i="";cf=void 0;var s=n[0];if(s==null||s.raw===void 0)r=!1,i+=bC(t,e,s);else{var o=s;i+=o[0]}for(var a=1;a<n.length;a++)if(i+=bC(t,e,n[a]),r){var l=s;i+=l[a]}D7.lastIndex=0;for(var c="",u;(u=D7.exec(i))!==null;)c+="-"+u[1];var d=$tt(i)+c;return{name:d,styles:i,next:cf}}var ztt=function(e){return e()},moe=KM.useInsertionEffect?KM.useInsertionEffect:!1,goe=moe||ztt,k7=moe||F.useLayoutEffect,yoe=F.createContext(typeof HTMLElement<"u"?Itt({key:"css"}):null);yoe.Provider;var p6=function(e){return F.forwardRef(function(t,r){var i=F.useContext(yoe);return e(t,i,r)})},w2=F.createContext({}),m6={}.hasOwnProperty,jF="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Htt=function(e,t){var r={};for(var i in t)m6.call(t,i)&&(r[i]=t[i]);return r[jF]=e,r},Vtt=function(e){var t=e.cache,r=e.serialized,i=e.isStringTag;return h6(t,r,i),goe(function(){return f6(t,r,i)}),null},Gtt=p6(function(n,e,t){var r=n.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=n[jF],s=[r],o="";typeof n.className=="string"?o=foe(e.registered,s,n.className):n.className!=null&&(o=n.className+" ");var a=S2(s,void 0,F.useContext(w2));o+=e.key+"-"+a.name;var l={};for(var c in n)m6.call(n,c)&&c!=="css"&&c!==jF&&(l[c]=n[c]);return l.className=o,t&&(l.ref=t),F.createElement(F.Fragment,null,F.createElement(Vtt,{cache:e,serialized:a,isStringTag:typeof i=="string"}),F.createElement(i,l))}),Wtt=Gtt,O7=function(e,t){var r=arguments;if(t==null||!m6.call(t,"css"))return F.createElement.apply(void 0,r);var i=r.length,s=new Array(i);s[0]=Wtt,s[1]=Htt(e,t);for(var o=2;o<i;o++)s[o]=r[o];return F.createElement.apply(null,s)};(function(n){var e;e||(e=n.JSX||(n.JSX={}))})(O7||(O7={}));var jtt=p6(function(n,e){var t=n.styles,r=S2([t],void 0,F.useContext(w2)),i=F.useRef();return k7(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),i.current=[o,a],function(){o.flush()}},[e]),k7(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&f6(e,r.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function g6(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return S2(e)}function _2(){var n=g6.apply(void 0,arguments),e="animation-"+n.name;return{name:e,styles:"@keyframes "+e+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Xtt=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,qtt=doe(function(n){return Xtt.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91}),Ktt=qtt,Ytt=function(e){return e!=="theme"},B7=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?Ktt:Ytt},$7=function(e,t,r){var i;if(t){var s=t.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},Jtt=function(e){var t=e.cache,r=e.serialized,i=e.isStringTag;return h6(t,r,i),goe(function(){return f6(t,r,i)}),null},Ztt=function n(e,t){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,o;t!==void 0&&(s=t.label,o=t.target);var a=$7(e,t,r),l=a||B7(i),c=!l("as");return function(){var u=arguments,d=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&d.push("label:"+s+";"),u[0]==null||u[0].raw===void 0)d.push.apply(d,u);else{var f=u[0];d.push(f[0]);for(var p=u.length,g=1;g<p;g++)d.push(u[g],f[g])}var v=p6(function(b,x,_){var E=c&&b.as||i,C="",M=[],R=b;if(b.theme==null){R={};for(var L in b)R[L]=b[L];R.theme=F.useContext(w2)}typeof b.className=="string"?C=foe(x.registered,M,b.className):b.className!=null&&(C=b.className+" ");var B=S2(d.concat(M),x.registered,R);C+=x.key+"-"+B.name,o!==void 0&&(C+=" "+o);var N=c&&a===void 0?B7(E):l,I={};for(var D in b)c&&D==="as"||N(D)&&(I[D]=b[D]);return I.className=C,_&&(I.ref=_),F.createElement(F.Fragment,null,F.createElement(Jtt,{cache:x,serialized:B,isStringTag:typeof E=="string"}),F.createElement(E,I))});return v.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",v.defaultProps=e.defaultProps,v.__emotion_real=v,v.__emotion_base=i,v.__emotion_styles=d,v.__emotion_forwardProp=a,Object.defineProperty(v,"toString",{value:function(){return"."+o}}),v.withComponent=function(b,x){var _=n(b,os({},t,x,{shouldForwardProp:$7(v,x,!0)}));return _.apply(void 0,d)},v}},Qtt=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],XF=Ztt.bind(null);Qtt.forEach(function(n){XF[n]=XF(n)});function ent(n){return n==null||Object.keys(n).length===0}function voe(n){const{styles:e,defaultTheme:t={}}=n,r=typeof e=="function"?i=>e(ent(i)?t:i):e;return V.jsx(jtt,{styles:r})}function boe(n,e){return XF(n,e)}function tnt(n,e){Array.isArray(n.__emotion_styles)&&(n.__emotion_styles=e(n.__emotion_styles))}const L7=[];function wg(n){return L7[0]=n,S2(L7)}const nnt=n=>{const e=Object.keys(n).map(t=>({key:t,val:n[t]}))||[];return e.sort((t,r)=>t.val-r.val),e.reduce((t,r)=>({...t,[r.key]:r.val}),{})};function rnt(n){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:r=5,...i}=n,s=nnt(e),o=Object.keys(s);function a(f){return`@media (min-width:${typeof e[f]=="number"?e[f]:f}${t})`}function l(f){return`@media (max-width:${(typeof e[f]=="number"?e[f]:f)-r/100}${t})`}function c(f,p){const g=o.indexOf(p);return`@media (min-width:${typeof e[f]=="number"?e[f]:f}${t}) and (max-width:${(g!==-1&&typeof e[o[g]]=="number"?e[o[g]]:p)-r/100}${t})`}function u(f){return o.indexOf(f)+1<o.length?c(f,o[o.indexOf(f)+1]):a(f)}function d(f){const p=o.indexOf(f);return p===0?a(o[1]):p===o.length-1?l(o[p]):c(f,o[o.indexOf(f)+1]).replace("@media","@media not all and")}return{keys:o,values:s,up:a,down:l,between:c,only:u,not:d,unit:t,...i}}const int={borderRadius:4};function xoe(n=8,e=W3({spacing:n})){if(n.mui)return n;const t=(...r)=>(r.length===0?[1]:r).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return t.mui=!0,t}function snt(n,e){var r;const t=this;if(t.vars){if(!((r=t.colorSchemes)!=null&&r[n])||typeof t.getColorSchemeSelector!="function")return{};let i=t.getColorSchemeSelector(n);return i==="&"?e:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:e})}return t.palette.mode===n?e:{}}function ek(n={},...e){const{breakpoints:t={},palette:r={},spacing:i,shape:s={},...o}=n,a=rnt(t),l=xoe(i);let c=aa({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:l,shape:{...int,...s}},o);return c=het(c),c.applyStyles=snt,c=e.reduce((u,d)=>aa(u,d),c),c.unstable_sxConfig={...b2,...o==null?void 0:o.unstable_sxConfig},c.unstable_sx=function(d){return Ug({sx:d,theme:this})},c}function ont(n){return Object.keys(n).length===0}function y6(n=null){const e=F.useContext(w2);return!e||ont(e)?n:e}const ant=ek();function tk(n=ant){return y6(n)}function T$(n){const e=wg(n);return n!==e&&e.styles?(e.styles.match(/^@layer\s+[^{]*$/)||(e.styles=`@layer global{${e.styles}}`),e):n}function Soe({styles:n,themeId:e,defaultTheme:t={}}){const r=tk(t),i=e&&r[e]||r;let s=typeof n=="function"?n(i):n;return i.modularCssLayers&&(Array.isArray(s)?s=s.map(o=>T$(typeof o=="function"?o(i):o)):s=T$(s)),V.jsx(voe,{styles:s})}const F7=n=>n,lnt=()=>{let n=F7;return{configure(e){n=e},generate(e){return n(e)},reset(){n=F7}}},woe=lnt();function _oe(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=_oe(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Pn(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=_oe(n))&&(r&&(r+=" "),r+=e);return r}function cnt(n={}){const{themeId:e,defaultTheme:t,defaultClassName:r="MuiBox-root",generateClassName:i}=n,s=boe("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(Ug);return F.forwardRef(function(l,c){const u=tk(t),{className:d,component:f="div",...p}=l6(l);return V.jsx(s,{as:f,ref:c,className:Pn(d,i?i(r):r),theme:e&&u[e]||u,...p})})}const unt={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Fr(n,e,t="Mui"){const r=unt[e];return r?`${t}-${r}`:`${woe.generate(n)}-${e}`}function yr(n,e,t="Mui"){const r={};return e.forEach(i=>{r[i]=Fr(n,i,t)}),r}function Coe(n){const{variants:e,...t}=n,r={variants:e,style:wg(t),isProcessed:!0};return r.style===t||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=wg(i.style))}),r}const dnt=ek();function M$(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}function zy(n,e){return e&&n&&typeof n=="object"&&n.styles&&!n.styles.startsWith("@layer")&&(n.styles=`@layer ${e}{${String(n.styles)}}`),n}function hnt(n){return n?(e,t)=>t[n]:null}function fnt(n,e,t){n.theme=mnt(n.theme)?t:n.theme[e]||n.theme}function VM(n,e,t){const r=typeof e=="function"?e(n):e;if(Array.isArray(r))return r.flatMap(i=>VM(n,i,t));if(Array.isArray(r==null?void 0:r.variants)){let i;if(r.isProcessed)i=t?zy(r.style,t):r.style;else{const{variants:s,...o}=r;i=t?zy(wg(o),t):o}return Eoe(n,r.variants,[i],t)}return r!=null&&r.isProcessed?t?zy(wg(r.style),t):r.style:t?zy(wg(r),t):r}function Eoe(n,e,t=[],r=void 0){var s;let i;e:for(let o=0;o<e.length;o+=1){const a=e[o];if(typeof a.props=="function"){if(i??(i={...n,...n.ownerState,ownerState:n.ownerState}),!a.props(i))continue}else for(const l in a.props)if(n[l]!==a.props[l]&&((s=n.ownerState)==null?void 0:s[l])!==a.props[l])continue e;typeof a.style=="function"?(i??(i={...n,...n.ownerState,ownerState:n.ownerState}),t.push(r?zy(wg(a.style(i)),r):a.style(i))):t.push(r?zy(wg(a.style),r):a.style)}return t}function Aoe(n={}){const{themeId:e,defaultTheme:t=dnt,rootShouldForwardProp:r=M$,slotShouldForwardProp:i=M$}=n;function s(a){fnt(a,e,t)}return(a,l={})=>{tnt(a,R=>R.filter(L=>L!==Ug));const{name:c,slot:u,skipVariantsResolver:d,skipSx:f,overridesResolver:p=hnt(ynt(u)),...g}=l,v=c&&c.startsWith("Mui")||u?"components":"custom",b=d!==void 0?d:u&&u!=="Root"&&u!=="root"||!1,x=f||!1;let _=M$;u==="Root"||u==="root"?_=r:u?_=i:gnt(a)&&(_=void 0);const E=boe(a,{shouldForwardProp:_,label:pnt(),...g}),C=R=>{if(R.__emotion_real===R)return R;if(typeof R=="function")return function(B){return VM(B,R,B.theme.modularCssLayers?v:void 0)};if(df(R)){const L=Coe(R);return function(N){return L.variants?VM(N,L,N.theme.modularCssLayers?v:void 0):N.theme.modularCssLayers?zy(L.style,v):L.style}}return R},M=(...R)=>{const L=[],B=R.map(C),N=[];if(L.push(s),c&&p&&N.push(function(G){var J,Q;const q=(Q=(J=G.theme.components)==null?void 0:J[c])==null?void 0:Q.styleOverrides;if(!q)return null;const z={};for(const Y in q)z[Y]=VM(G,q[Y],G.theme.modularCssLayers?"theme":void 0);return p(G,z)}),c&&!b&&N.push(function(G){var z,J;const W=G.theme,q=(J=(z=W==null?void 0:W.components)==null?void 0:z[c])==null?void 0:J.variants;return q?Eoe(G,q,[],G.theme.modularCssLayers?"theme":void 0):null}),x||N.push(Ug),Array.isArray(B[0])){const P=B.shift(),G=new Array(L.length).fill(""),W=new Array(N.length).fill("");let q;q=[...G,...P,...W],q.raw=[...G,...P.raw,...W],L.unshift(q)}const I=[...L,...B,...N],D=E(...I);return a.muiName&&(D.muiName=a.muiName),D};return E.withConfig&&(M.withConfig=E.withConfig),M}}function pnt(n,e){return void 0}function mnt(n){for(const e in n)return!1;return!0}function gnt(n){return typeof n=="string"&&n.charCodeAt(0)>96}function ynt(n){return n&&n.charAt(0).toLowerCase()+n.slice(1)}const vnt=Aoe();function xC(n,e,t=!1){const r={...e};for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){const s=i;if(s==="components"||s==="slots")r[s]={...n[s],...r[s]};else if(s==="componentsProps"||s==="slotProps"){const o=n[s],a=e[s];if(!a)r[s]=o||{};else if(!o)r[s]=a;else{r[s]={...a};for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const c=l;r[s][c]=xC(o[c],a[c],t)}}}else s==="className"&&t&&e.className?r.className=Pn(n==null?void 0:n.className,e==null?void 0:e.className):s==="style"&&t&&e.style?r.style={...n==null?void 0:n.style,...e==null?void 0:e.style}:r[s]===void 0&&(r[s]=n[s])}return r}function bnt(n){const{theme:e,name:t,props:r}=n;return!e||!e.components||!e.components[t]||!e.components[t].defaultProps?r:xC(e.components[t].defaultProps,r)}function xnt({props:n,name:e,defaultTheme:t,themeId:r}){let i=tk(t);return r&&(i=i[r]||i),bnt({theme:i,name:e,props:n})}const Df=typeof window<"u"?F.useLayoutEffect:F.useEffect;function Snt(n,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(n,t))}function v6(n,e=0,t=1){return Snt(n,e,t)}function wnt(n){n=n.slice(1);const e=new RegExp(`.{1,${n.length>=6?2:1}}`,"g");let t=n.match(e);return t&&t[0].length===1&&(t=t.map(r=>r+r)),t?`rgb${t.length===4?"a":""}(${t.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function zg(n){if(n.type)return n;if(n.charAt(0)==="#")return zg(wnt(n));const e=n.indexOf("("),t=n.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(t))throw new Error(Kp(9,n));let r=n.substring(e+1,n.length-1),i;if(t==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(Kp(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:t,values:r,colorSpace:i}}const _nt=n=>{const e=zg(n);return e.values.slice(0,3).map((t,r)=>e.type.includes("hsl")&&r!==0?`${t}%`:t).join(" ")},h_=(n,e)=>{try{return _nt(n)}catch{return n}};function nk(n){const{type:e,colorSpace:t}=n;let{values:r}=n;return e.includes("rgb")?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${t} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function Toe(n){n=zg(n);const{values:e}=n,t=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),o=(c,u=(c+t/30)%12)=>i-s*Math.max(Math.min(u-3,9-u,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return n.type==="hsla"&&(a+="a",l.push(e[3])),nk({type:a,values:l})}function qF(n){n=zg(n);let e=n.type==="hsl"||n.type==="hsla"?zg(Toe(n)).values:n.values;return e=e.map(t=>(n.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function Cnt(n,e){const t=qF(n),r=qF(e);return(Math.max(t,r)+.05)/(Math.min(t,r)+.05)}function or(n,e){return n=zg(n),e=v6(e),(n.type==="rgb"||n.type==="hsl")&&(n.type+="a"),n.type==="color"?n.values[3]=`/${e}`:n.values[3]=e,nk(n)}function my(n,e,t){try{return or(n,e)}catch{return n}}function rk(n,e){if(n=zg(n),e=v6(e),n.type.includes("hsl"))n.values[2]*=1-e;else if(n.type.includes("rgb")||n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]*=1-e;return nk(n)}function Oi(n,e,t){try{return rk(n,e)}catch{return n}}function ik(n,e){if(n=zg(n),e=v6(e),n.type.includes("hsl"))n.values[2]+=(100-n.values[2])*e;else if(n.type.includes("rgb"))for(let t=0;t<3;t+=1)n.values[t]+=(255-n.values[t])*e;else if(n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]+=(1-n.values[t])*e;return nk(n)}function Bi(n,e,t){try{return ik(n,e)}catch{return n}}function Ent(n,e=.15){return qF(n)>.5?rk(n,e):ik(n,e)}function hM(n,e,t){try{return Ent(n,e)}catch{return n}}const Moe=F.createContext(null);function b6(){return F.useContext(Moe)}const Ant=typeof Symbol=="function"&&Symbol.for,Tnt=Ant?Symbol.for("mui.nested"):"__THEME_NESTED__";function Mnt(n,e){return typeof e=="function"?e(n):{...n,...e}}function Rnt(n){const{children:e,theme:t}=n,r=b6(),i=F.useMemo(()=>{const s=r===null?{...t}:Mnt(r,t);return s!=null&&(s[Tnt]=r!==null),s},[t,r]);return V.jsx(Moe.Provider,{value:i,children:e})}const Roe=F.createContext();function Nnt({value:n,...e}){return V.jsx(Roe.Provider,{value:n??!0,...e})}const Int=()=>F.useContext(Roe)??!1,Noe=F.createContext(void 0);function Dnt({value:n,children:e}){return V.jsx(Noe.Provider,{value:n,children:e})}function knt(n){const{theme:e,name:t,props:r}=n;if(!e||!e.components||!e.components[t])return r;const i=e.components[t];return i.defaultProps?xC(i.defaultProps,r,e.components.mergeClassNameAndStyle):!i.styleOverrides&&!i.variants?xC(i,r,e.components.mergeClassNameAndStyle):r}function Ont({props:n,name:e}){const t=F.useContext(Noe);return knt({props:n,name:e,theme:{components:t}})}let P7=0;function Bnt(n){const[e,t]=F.useState(n),r=n||e;return F.useEffect(()=>{e==null&&(P7+=1,t(`mui-${P7}`))},[e]),r}const $nt={...KM},U7=$nt.useId;function hS(n){if(U7!==void 0){const e=U7();return n??e}return Bnt(n)}function Lnt(n){const e=y6(),t=hS()||"",{modularCssLayers:r}=n;let i="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return!r||e!==null?i="":typeof r=="string"?i=r.replace(/mui(?!\.)/g,i):i=`@layer ${i};`,Df(()=>{var a,l;const s=document.querySelector("head");if(!s)return;const o=s.firstChild;if(i){if(o&&((a=o.hasAttribute)!=null&&a.call(o,"data-mui-layer-order"))&&o.getAttribute("data-mui-layer-order")===t)return;const c=document.createElement("style");c.setAttribute("data-mui-layer-order",t),c.textContent=i,s.prepend(c)}else(l=s.querySelector(`style[data-mui-layer-order="${t}"]`))==null||l.remove()},[i,t]),i?V.jsx(Soe,{styles:i}):null}const z7={};function H7(n,e,t,r=!1){return F.useMemo(()=>{const i=n&&e[n]||e;if(typeof t=="function"){const s=t(i),o=n?{...e,[n]:s}:s;return r?()=>o:o}return n?{...e,[n]:t}:{...e,...t}},[n,e,t,r])}function Ioe(n){const{children:e,theme:t,themeId:r}=n,i=y6(z7),s=b6()||z7,o=H7(r,i,t),a=H7(r,s,t,!0),l=(r?o[r]:o).direction==="rtl",c=Lnt(o);return V.jsx(Rnt,{theme:a,children:V.jsx(w2.Provider,{value:o,children:V.jsx(Nnt,{value:l,children:V.jsxs(Dnt,{value:r?o[r].components:o.components,children:[c,e]})})})})}const V7={theme:void 0};function Fnt(n){let e,t;return function(i){let s=e;return(s===void 0||i.theme!==t)&&(V7.theme=i.theme,s=Coe(n(V7)),e=s,t=i.theme),s}}const x6="mode",S6="color-scheme",Pnt="data-color-scheme";function Unt(n){const{defaultMode:e="system",defaultLightColorScheme:t="light",defaultDarkColorScheme:r="dark",modeStorageKey:i=x6,colorSchemeStorageKey:s=S6,attribute:o=Pnt,colorSchemeNode:a="document.documentElement",nonce:l}=n||{};let c="",u=o;if(o==="class"&&(u=".%s"),o==="data"&&(u="[data-%s]"),u.startsWith(".")){const f=u.substring(1);c+=`${a}.classList.remove('${f}'.replace('%s', light), '${f}'.replace('%s', dark));
      ${a}.classList.add('${f}'.replace('%s', colorScheme));`}const d=u.match(/\[([^[\]]+)\]/);if(d){const[f,p]=d[1].split("=");p||(c+=`${a}.removeAttribute('${f}'.replace('%s', light));
      ${a}.removeAttribute('${f}'.replace('%s', dark));`),c+=`
      ${a}.setAttribute('${f}'.replace('%s', colorScheme), ${p?`${p}.replace('%s', colorScheme)`:'""'});`}else c+=`${a}.setAttribute('${u}', colorScheme);`;return V.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${i}') || '${e}';
  const dark = localStorage.getItem('${s}-dark') || '${r}';
  const light = localStorage.getItem('${s}-light') || '${t}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${c}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function znt(){}const Hnt=({key:n,storageWindow:e})=>(!e&&typeof window<"u"&&(e=window),{get(t){if(typeof window>"u")return;if(!e)return t;let r;try{r=e.localStorage.getItem(n)}catch{}return r||t},set:t=>{if(e)try{e.localStorage.setItem(n,t)}catch{}},subscribe:t=>{if(!e)return znt;const r=i=>{const s=i.newValue;i.key===n&&t(s)};return e.addEventListener("storage",r),()=>{e.removeEventListener("storage",r)}}});function R$(){}function G7(n){if(typeof window<"u"&&typeof window.matchMedia=="function"&&n==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function Doe(n,e){if(n.mode==="light"||n.mode==="system"&&n.systemMode==="light")return e("light");if(n.mode==="dark"||n.mode==="system"&&n.systemMode==="dark")return e("dark")}function Vnt(n){return Doe(n,e=>{if(e==="light")return n.lightColorScheme;if(e==="dark")return n.darkColorScheme})}function Gnt(n){const{defaultMode:e="light",defaultLightColorScheme:t,defaultDarkColorScheme:r,supportedColorSchemes:i=[],modeStorageKey:s=x6,colorSchemeStorageKey:o=S6,storageWindow:a=typeof window>"u"?void 0:window,storageManager:l=Hnt,noSsr:c=!1}=n,u=i.join(","),d=i.length>1,f=F.useMemo(()=>l==null?void 0:l({key:s,storageWindow:a}),[l,s,a]),p=F.useMemo(()=>l==null?void 0:l({key:`${o}-light`,storageWindow:a}),[l,o,a]),g=F.useMemo(()=>l==null?void 0:l({key:`${o}-dark`,storageWindow:a}),[l,o,a]),[v,b]=F.useState(()=>{const B=(f==null?void 0:f.get(e))||e,N=(p==null?void 0:p.get(t))||t,I=(g==null?void 0:g.get(r))||r;return{mode:B,systemMode:G7(B),lightColorScheme:N,darkColorScheme:I}}),[x,_]=F.useState(c||!d);F.useEffect(()=>{_(!0)},[]);const E=Vnt(v),C=F.useCallback(B=>{b(N=>{if(B===N.mode)return N;const I=B??e;return f==null||f.set(I),{...N,mode:I,systemMode:G7(I)}})},[f,e]),M=F.useCallback(B=>{B?typeof B=="string"?B&&!u.includes(B)?console.error(`\`${B}\` does not exist in \`theme.colorSchemes\`.`):b(N=>{const I={...N};return Doe(N,D=>{D==="light"&&(p==null||p.set(B),I.lightColorScheme=B),D==="dark"&&(g==null||g.set(B),I.darkColorScheme=B)}),I}):b(N=>{const I={...N},D=B.light===null?t:B.light,P=B.dark===null?r:B.dark;return D&&(u.includes(D)?(I.lightColorScheme=D,p==null||p.set(D)):console.error(`\`${D}\` does not exist in \`theme.colorSchemes\`.`)),P&&(u.includes(P)?(I.darkColorScheme=P,g==null||g.set(P)):console.error(`\`${P}\` does not exist in \`theme.colorSchemes\`.`)),I}):b(N=>(p==null||p.set(t),g==null||g.set(r),{...N,lightColorScheme:t,darkColorScheme:r}))},[u,p,g,t,r]),R=F.useCallback(B=>{v.mode==="system"&&b(N=>{const I=B!=null&&B.matches?"dark":"light";return N.systemMode===I?N:{...N,systemMode:I}})},[v.mode]),L=F.useRef(R);return L.current=R,F.useEffect(()=>{if(typeof window.matchMedia!="function"||!d)return;const B=(...I)=>L.current(...I),N=window.matchMedia("(prefers-color-scheme: dark)");return N.addListener(B),B(N),()=>{N.removeListener(B)}},[d]),F.useEffect(()=>{if(d){const B=(f==null?void 0:f.subscribe(D=>{(!D||["light","dark","system"].includes(D))&&C(D||e)}))||R$,N=(p==null?void 0:p.subscribe(D=>{(!D||u.match(D))&&M({light:D})}))||R$,I=(g==null?void 0:g.subscribe(D=>{(!D||u.match(D))&&M({dark:D})}))||R$;return()=>{B(),N(),I()}}},[M,C,u,e,a,d,f,p,g]),{...v,mode:x?v.mode:void 0,systemMode:x?v.systemMode:void 0,colorScheme:x?E:void 0,setMode:C,setColorScheme:M}}const Wnt="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function jnt(n){const{themeId:e,theme:t={},modeStorageKey:r=x6,colorSchemeStorageKey:i=S6,disableTransitionOnChange:s=!1,defaultColorScheme:o,resolveTheme:a}=n,l={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},c=F.createContext(void 0),u=()=>F.useContext(c)||l,d={},f={};function p(x){var qe,ot,et,Ft;const{children:_,theme:E,modeStorageKey:C=r,colorSchemeStorageKey:M=i,disableTransitionOnChange:R=s,storageManager:L,storageWindow:B=typeof window>"u"?void 0:window,documentNode:N=typeof document>"u"?void 0:document,colorSchemeNode:I=typeof document>"u"?void 0:document.documentElement,disableNestedContext:D=!1,disableStyleSheetGeneration:P=!1,defaultMode:G="system",forceThemeRerender:W=!1,noSsr:q}=x,z=F.useRef(!1),J=b6(),Q=F.useContext(c),Y=!!Q&&!D,X=F.useMemo(()=>E||(typeof t=="function"?t():t),[E]),te=X[e],ne=te||X,{colorSchemes:le=d,components:ye=f,cssVarPrefix:ue}=ne,be=Object.keys(le).filter(At=>!!le[At]).join(","),xe=F.useMemo(()=>be.split(","),[be]),Pe=typeof o=="string"?o:o.light,ze=typeof o=="string"?o:o.dark,Ke=le[Pe]&&le[ze]?G:((ot=(qe=le[ne.defaultColorScheme])==null?void 0:qe.palette)==null?void 0:ot.mode)||((et=ne.palette)==null?void 0:et.mode),{mode:pt,setMode:dt,systemMode:pe,lightColorScheme:Le,darkColorScheme:Ue,colorScheme:Ze,setColorScheme:je}=Gnt({supportedColorSchemes:xe,defaultLightColorScheme:Pe,defaultDarkColorScheme:ze,modeStorageKey:C,colorSchemeStorageKey:M,defaultMode:Ke,storageManager:L,storageWindow:B,noSsr:q});let lt=pt,st=Ze;Y&&(lt=Q.mode,st=Q.colorScheme);let at=st||ne.defaultColorScheme;ne.vars&&!W&&(at=ne.defaultColorScheme);const Ut=F.useMemo(()=>{var qt;const At=((qt=ne.generateThemeVars)==null?void 0:qt.call(ne))||ne.vars,Ct={...ne,components:ye,colorSchemes:le,cssVarPrefix:ue,vars:At};if(typeof Ct.generateSpacing=="function"&&(Ct.spacing=Ct.generateSpacing()),at){const yt=le[at];yt&&typeof yt=="object"&&Object.keys(yt).forEach(Mt=>{yt[Mt]&&typeof yt[Mt]=="object"?Ct[Mt]={...Ct[Mt],...yt[Mt]}:Ct[Mt]=yt[Mt]})}return a?a(Ct):Ct},[ne,at,ye,le,ue]),mt=ne.colorSchemeSelector;Df(()=>{if(st&&I&&mt&&mt!=="media"){const At=mt;let Ct=mt;if(At==="class"&&(Ct=".%s"),At==="data"&&(Ct="[data-%s]"),At!=null&&At.startsWith("data-")&&!At.includes("%s")&&(Ct=`[${At}="%s"]`),Ct.startsWith("."))I.classList.remove(...xe.map(qt=>Ct.substring(1).replace("%s",qt))),I.classList.add(Ct.substring(1).replace("%s",st));else{const qt=Ct.replace("%s",st).match(/\[([^\]]+)\]/);if(qt){const[yt,Mt]=qt[1].split("=");Mt||xe.forEach(on=>{I.removeAttribute(yt.replace(st,on))}),I.setAttribute(yt,Mt?Mt.replace(/"|'/g,""):"")}else I.setAttribute(Ct,st)}}},[st,mt,I,xe]),F.useEffect(()=>{let At;if(R&&z.current&&N){const Ct=N.createElement("style");Ct.appendChild(N.createTextNode(Wnt)),N.head.appendChild(Ct),window.getComputedStyle(N.body),At=setTimeout(()=>{N.head.removeChild(Ct)},1)}return()=>{clearTimeout(At)}},[st,R,N]),F.useEffect(()=>(z.current=!0,()=>{z.current=!1}),[]);const ce=F.useMemo(()=>({allColorSchemes:xe,colorScheme:st,darkColorScheme:Ue,lightColorScheme:Le,mode:lt,setColorScheme:je,setMode:dt,systemMode:pe}),[xe,st,Ue,Le,lt,je,dt,pe,Ut.colorSchemeSelector]);let re=!0;(P||ne.cssVariables===!1||Y&&(J==null?void 0:J.cssVarPrefix)===ue)&&(re=!1);const $e=V.jsxs(F.Fragment,{children:[V.jsx(Ioe,{themeId:te?e:void 0,theme:Ut,children:_}),re&&V.jsx(voe,{styles:((Ft=Ut.generateStyleSheets)==null?void 0:Ft.call(Ut))||[]})]});return Y?$e:V.jsx(c.Provider,{value:ce,children:$e})}const g=typeof o=="string"?o:o.light,v=typeof o=="string"?o:o.dark;return{CssVarsProvider:p,useColorScheme:u,getInitColorSchemeScript:x=>Unt({colorSchemeStorageKey:i,defaultLightColorScheme:g,defaultDarkColorScheme:v,modeStorageKey:r,...x})}}function Xnt(n=""){function e(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${n?`${n}-`:""}${i}${e(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${n?`${n}-`:""}${r}${e(...i)})`}const W7=(n,e,t,r=[])=>{let i=n;e.forEach((s,o)=>{o===e.length-1?Array.isArray(i)?i[Number(s)]=t:i&&typeof i=="object"&&(i[s]=t):i&&typeof i=="object"&&(i[s]||(i[s]=r.includes(s)?[]:{}),i=i[s])})},qnt=(n,e,t)=>{function r(i,s=[],o=[]){Object.entries(i).forEach(([a,l])=>{(!t||t&&!t([...s,a]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?r(l,[...s,a],Array.isArray(l)?[...o,a]:o):e([...s,a],l,o))})}r(n)},Knt=(n,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>n.includes(r))||n[n.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function N$(n,e){const{prefix:t,shouldSkipGeneratingVar:r}=e||{},i={},s={},o={};return qnt(n,(a,l,c)=>{if((typeof l=="string"||typeof l=="number")&&(!r||!r(a,l))){const u=`--${t?`${t}-`:""}${a.join("-")}`,d=Knt(a,l);Object.assign(i,{[u]:d}),W7(s,a,`var(${u})`,c),W7(o,a,`var(${u}, ${d})`,c)}},a=>a[0]==="vars"),{css:i,vars:s,varsWithDefaults:o}}function Ynt(n,e={}){const{getSelector:t=x,disableCssColorScheme:r,colorSchemeSelector:i,enableContrastVars:s}=e,{colorSchemes:o={},components:a,defaultColorScheme:l="light",...c}=n,{vars:u,css:d,varsWithDefaults:f}=N$(c,e);let p=f;const g={},{[l]:v,...b}=o;if(Object.entries(b||{}).forEach(([C,M])=>{const{vars:R,css:L,varsWithDefaults:B}=N$(M,e);p=aa(p,B),g[C]={css:L,vars:R}}),v){const{css:C,vars:M,varsWithDefaults:R}=N$(v,e);p=aa(p,R),g[l]={css:C,vars:M}}function x(C,M){var L,B;let R=i;if(i==="class"&&(R=".%s"),i==="data"&&(R="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(R=`[${i}="%s"]`),C){if(R==="media")return n.defaultColorScheme===C?":root":{[`@media (prefers-color-scheme: ${((B=(L=o[C])==null?void 0:L.palette)==null?void 0:B.mode)||C})`]:{":root":M}};if(R)return n.defaultColorScheme===C?`:root, ${R.replace("%s",String(C))}`:R.replace("%s",String(C))}return":root"}return{vars:p,generateThemeVars:()=>{let C={...u};return Object.entries(g).forEach(([,{vars:M}])=>{C=aa(C,M)}),C},generateStyleSheets:()=>{var N,I;const C=[],M=n.defaultColorScheme||"light";function R(D,P){Object.keys(P).length&&C.push(typeof D=="string"?{[D]:{...P}}:D)}R(t(void 0,{...d}),d);const{[M]:L,...B}=g;if(L){const{css:D}=L,P=(I=(N=o[M])==null?void 0:N.palette)==null?void 0:I.mode,G=!r&&P?{colorScheme:P,...D}:{...D};R(t(M,{...G}),G)}return Object.entries(B).forEach(([D,{css:P}])=>{var q,z;const G=(z=(q=o[D])==null?void 0:q.palette)==null?void 0:z.mode,W=!r&&G?{colorScheme:G,...P}:{...P};R(t(D,{...W}),W)}),s&&C.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),C}}}function Jnt(n){return function(t){return n==="media"?`@media (prefers-color-scheme: ${t})`:n?n.startsWith("data-")&&!n.includes("%s")?`[${n}="${t}"] &`:n==="class"?`.${t} &`:n==="data"?`[data-${t}] &`:`${n.replace("%s",t)} &`:"&"}}function Pr(n,e,t=void 0){const r={};for(const i in n){const s=n[i];let o="",a=!0;for(let l=0;l<s.length;l+=1){const c=s[l];c&&(o+=(a===!0?"":" ")+e(c),a=!1,t&&t[c]&&(o+=" "+t[c]))}r[i]=o}return r}function I$(n,e){var t,r,i;return F.isValidElement(n)&&e.indexOf(n.type.muiName??((i=(r=(t=n.type)==null?void 0:t._payload)==null?void 0:r.value)==null?void 0:i.muiName))!==-1}const Znt=ek(),Qnt=vnt("div",{name:"MuiStack",slot:"Root"});function ert(n){return xnt({props:n,name:"MuiStack",defaultTheme:Znt})}function trt(n,e){const t=F.Children.toArray(n).filter(Boolean);return t.reduce((r,i,s)=>(r.push(i),s<t.length-1&&r.push(F.cloneElement(e,{key:`separator-${s}`})),r),[])}const nrt=n=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[n],rrt=({ownerState:n,theme:e})=>{let t={display:"flex",flexDirection:"column",...uh({theme:e},_$({values:n.direction,breakpoints:e.breakpoints.values}),r=>({flexDirection:r}))};if(n.spacing){const r=W3(e),i=Object.keys(e.breakpoints.values).reduce((l,c)=>((typeof n.spacing=="object"&&n.spacing[c]!=null||typeof n.direction=="object"&&n.direction[c]!=null)&&(l[c]=!0),l),{}),s=_$({values:n.direction,base:i}),o=_$({values:n.spacing,base:i});typeof s=="object"&&Object.keys(s).forEach((l,c,u)=>{if(!s[l]){const f=c>0?s[u[c-1]]:"column";s[l]=f}}),t=aa(t,uh({theme:e},o,(l,c)=>n.useFlexGap?{gap:Av(r,l)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${nrt(c?s[c]:n.direction)}`]:Av(r,l)}}))}return t=pet(e.breakpoints,t),t};function irt(n={}){const{createStyledComponent:e=Qnt,useThemeProps:t=ert,componentName:r="MuiStack"}=n,i=()=>Pr({root:["root"]},l=>Fr(r,l),{}),s=e(rrt);return F.forwardRef(function(l,c){const u=t(l),d=l6(u),{component:f="div",direction:p="column",spacing:g=0,divider:v,children:b,className:x,useFlexGap:_=!1,...E}=d,C={direction:p,spacing:g,useFlexGap:_},M=i();return V.jsx(s,{as:f,ownerState:C,ref:c,className:Pn(M.root,x),...E,children:v?trt(b,v):b})})}const SC={black:"#000",white:"#fff"},srt={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},wx={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},_x={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Kw={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Cx={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Ex={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Ax={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function koe(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:SC.white,default:SC.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const Ooe=koe();function Boe(){return{text:{primary:SC.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:SC.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const KF=Boe();function j7(n,e,t,r){const i=r.light||r,s=r.dark||r*1.5;n[e]||(n.hasOwnProperty(t)?n[e]=n[t]:e==="light"?n.light=ik(n.main,i):e==="dark"&&(n.dark=rk(n.main,s)))}function X7(n,e,t,r,i){const s=i.light||i,o=i.dark||i*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=`color-mix(in ${n}, ${e.main}, #fff ${(s*100).toFixed(0)}%)`:t==="dark"&&(e.dark=`color-mix(in ${n}, ${e.main}, #000 ${(o*100).toFixed(0)}%)`))}function ort(n="light"){return n==="dark"?{main:Cx[200],light:Cx[50],dark:Cx[400]}:{main:Cx[700],light:Cx[400],dark:Cx[800]}}function art(n="light"){return n==="dark"?{main:wx[200],light:wx[50],dark:wx[400]}:{main:wx[500],light:wx[300],dark:wx[700]}}function lrt(n="light"){return n==="dark"?{main:_x[500],light:_x[300],dark:_x[700]}:{main:_x[700],light:_x[400],dark:_x[800]}}function crt(n="light"){return n==="dark"?{main:Ex[400],light:Ex[300],dark:Ex[700]}:{main:Ex[700],light:Ex[500],dark:Ex[900]}}function urt(n="light"){return n==="dark"?{main:Ax[400],light:Ax[300],dark:Ax[700]}:{main:Ax[800],light:Ax[500],dark:Ax[900]}}function drt(n="light"){return n==="dark"?{main:Kw[400],light:Kw[300],dark:Kw[700]}:{main:"#ed6c02",light:Kw[500],dark:Kw[900]}}function hrt(n){return`oklch(from ${n} var(--__l) 0 h / var(--__a))`}function w6(n){const{mode:e="light",contrastThreshold:t=3,tonalOffset:r=.2,colorSpace:i,...s}=n,o=n.primary||ort(e),a=n.secondary||art(e),l=n.error||lrt(e),c=n.info||crt(e),u=n.success||urt(e),d=n.warning||drt(e);function f(b){return i?hrt(b):Cnt(b,KF.text.primary)>=t?KF.text.primary:Ooe.text.primary}const p=({color:b,name:x,mainShade:_=500,lightShade:E=300,darkShade:C=700})=>{if(b={...b},!b.main&&b[_]&&(b.main=b[_]),!b.hasOwnProperty("main"))throw new Error(Kp(11,x?` (${x})`:"",_));if(typeof b.main!="string")throw new Error(Kp(12,x?` (${x})`:"",JSON.stringify(b.main)));return i?(X7(i,b,"light",E,r),X7(i,b,"dark",C,r)):(j7(b,"light",E,r),j7(b,"dark",C,r)),b.contrastText||(b.contrastText=f(b.main)),b};let g;return e==="light"?g=koe():e==="dark"&&(g=Boe()),aa({common:{...SC},mode:e,primary:p({color:o,name:"primary"}),secondary:p({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:p({color:l,name:"error"}),warning:p({color:d,name:"warning"}),info:p({color:c,name:"info"}),success:p({color:u,name:"success"}),grey:srt,contrastThreshold:t,getContrastText:f,augmentColor:p,tonalOffset:r,...g},s)}function frt(n){const e={};return Object.entries(n).forEach(r=>{const[i,s]=r;typeof s=="object"&&(e[i]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),e}function prt(n,e){return{toolbar:{minHeight:56,[n.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[n.up("sm")]:{minHeight:64}},...e}}function mrt(n){return Math.round(n*1e5)/1e5}const q7={textTransform:"uppercase"},K7='"Roboto", "Helvetica", "Arial", sans-serif';function $oe(n,e){const{fontFamily:t=K7,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:s=400,fontWeightMedium:o=500,fontWeightBold:a=700,htmlFontSize:l=16,allVariants:c,pxToRem:u,...d}=typeof e=="function"?e(n):e,f=r/14,p=u||(b=>`${b/l*f}rem`),g=(b,x,_,E,C)=>({fontFamily:t,fontWeight:b,fontSize:p(x),lineHeight:_,...t===K7?{letterSpacing:`${mrt(E/x)}em`}:{},...C,...c}),v={h1:g(i,96,1.167,-1.5),h2:g(i,60,1.2,-.5),h3:g(s,48,1.167,0),h4:g(s,34,1.235,.25),h5:g(s,24,1.334,0),h6:g(o,20,1.6,.15),subtitle1:g(s,16,1.75,.15),subtitle2:g(o,14,1.57,.1),body1:g(s,16,1.5,.15),body2:g(s,14,1.43,.15),button:g(o,14,1.75,.4,q7),caption:g(s,12,1.66,.4),overline:g(s,12,2.66,1,q7),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return aa({htmlFontSize:l,pxToRem:p,fontFamily:t,fontSize:r,fontWeightLight:i,fontWeightRegular:s,fontWeightMedium:o,fontWeightBold:a,...v},d,{clone:!1})}const grt=.2,yrt=.14,vrt=.12;function bs(...n){return[`${n[0]}px ${n[1]}px ${n[2]}px ${n[3]}px rgba(0,0,0,${grt})`,`${n[4]}px ${n[5]}px ${n[6]}px ${n[7]}px rgba(0,0,0,${yrt})`,`${n[8]}px ${n[9]}px ${n[10]}px ${n[11]}px rgba(0,0,0,${vrt})`].join(",")}const brt=["none",bs(0,2,1,-1,0,1,1,0,0,1,3,0),bs(0,3,1,-2,0,2,2,0,0,1,5,0),bs(0,3,3,-2,0,3,4,0,0,1,8,0),bs(0,2,4,-1,0,4,5,0,0,1,10,0),bs(0,3,5,-1,0,5,8,0,0,1,14,0),bs(0,3,5,-1,0,6,10,0,0,1,18,0),bs(0,4,5,-2,0,7,10,1,0,2,16,1),bs(0,5,5,-3,0,8,10,1,0,3,14,2),bs(0,5,6,-3,0,9,12,1,0,3,16,2),bs(0,6,6,-3,0,10,14,1,0,4,18,3),bs(0,6,7,-4,0,11,15,1,0,4,20,3),bs(0,7,8,-4,0,12,17,2,0,5,22,4),bs(0,7,8,-4,0,13,19,2,0,5,24,4),bs(0,7,9,-4,0,14,21,2,0,5,26,4),bs(0,8,9,-5,0,15,22,2,0,6,28,5),bs(0,8,10,-5,0,16,24,2,0,6,30,5),bs(0,8,11,-5,0,17,26,2,0,6,32,5),bs(0,9,11,-5,0,18,28,2,0,7,34,6),bs(0,9,12,-6,0,19,29,2,0,7,36,6),bs(0,10,13,-6,0,20,31,3,0,8,38,7),bs(0,10,13,-6,0,21,33,3,0,8,40,7),bs(0,10,14,-6,0,22,35,3,0,8,42,7),bs(0,11,14,-7,0,23,36,3,0,9,44,8),bs(0,11,15,-7,0,24,38,3,0,9,46,8)],xrt={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Srt={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Y7(n){return`${Math.round(n)}ms`}function wrt(n){if(!n)return 0;const e=n/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function _rt(n){const e={...xrt,...n.easing},t={...Srt,...n.duration};return{getAutoHeightDuration:wrt,create:(i=["all"],s={})=>{const{duration:o=t.standard,easing:a=e.easeInOut,delay:l=0,...c}=s;return(Array.isArray(i)?i:[i]).map(u=>`${u} ${typeof o=="string"?o:Y7(o)} ${a} ${typeof l=="string"?l:Y7(l)}`).join(",")},...n,easing:e,duration:t}}const Crt={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Ert(n){return df(n)||typeof n>"u"||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||Array.isArray(n)}function Loe(n={}){const e={...n};function t(r){const i=Object.entries(r);for(let s=0;s<i.length;s++){const[o,a]=i[s];!Ert(a)||o.startsWith("unstable_")?delete r[o]:df(a)&&(r[o]={...a},t(r[o]))}}return t(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function J7(n){return typeof n=="number"?`${(n*100).toFixed(0)}%`:`calc((${n}) * 100%)`}const Art=n=>{if(!Number.isNaN(+n))return+n;const e=n.match(/\d*\.?\d+/g);if(!e)return 0;let t=0;for(let r=0;r<e.length;r+=1)t+=+e[r];return t};function Trt(n){Object.assign(n,{alpha(e,t){const r=this||n;return r.colorSpace?`oklch(from ${e} l c h / ${typeof t=="string"?`calc(${t})`:t})`:r.vars?`rgba(${e.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof t=="string"?`calc(${t})`:t})`:or(e,Art(t))},lighten(e,t){const r=this||n;return r.colorSpace?`color-mix(in ${r.colorSpace}, ${e}, #fff ${J7(t)})`:ik(e,t)},darken(e,t){const r=this||n;return r.colorSpace?`color-mix(in ${r.colorSpace}, ${e}, #000 ${J7(t)})`:rk(e,t)}})}function YF(n={},...e){const{breakpoints:t,mixins:r={},spacing:i,palette:s={},transitions:o={},typography:a={},shape:l,colorSpace:c,...u}=n;if(n.vars&&n.generateThemeVars===void 0)throw new Error(Kp(20));const d=w6({...s,colorSpace:c}),f=ek(n);let p=aa(f,{mixins:prt(f.breakpoints,r),palette:d,shadows:brt.slice(),typography:$oe(d,a),transitions:_rt(o),zIndex:{...Crt}});return p=aa(p,u),p=e.reduce((g,v)=>aa(g,v),p),p.unstable_sxConfig={...b2,...u==null?void 0:u.unstable_sxConfig},p.unstable_sx=function(v){return Ug({sx:v,theme:this})},p.toRuntimeSource=Loe,Trt(p),p}function JF(n){let e;return n<1?e=5.11916*n**2:e=4.5*Math.log(n+1)+2,Math.round(e*10)/1e3}const Mrt=[...Array(25)].map((n,e)=>{if(e===0)return"none";const t=JF(e);return`linear-gradient(rgba(255 255 255 / ${t}), rgba(255 255 255 / ${t}))`});function Foe(n){return{inputPlaceholder:n==="dark"?.5:.42,inputUnderline:n==="dark"?.7:.42,switchTrackDisabled:n==="dark"?.2:.12,switchTrack:n==="dark"?.3:.38}}function Poe(n){return n==="dark"?Mrt:[]}function Rrt(n){const{palette:e={mode:"light"},opacity:t,overlays:r,colorSpace:i,...s}=n,o=w6({...e,colorSpace:i});return{palette:o,opacity:{...Foe(o.mode),...t},overlays:r||Poe(o.mode),...s}}function Nrt(n){var e;return!!n[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!n[0].match(/sxConfig$/)||n[0]==="palette"&&!!((e=n[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const Irt=n=>[...[...Array(25)].map((e,t)=>`--${n?`${n}-`:""}overlays-${t}`),`--${n?`${n}-`:""}palette-AppBar-darkBg`,`--${n?`${n}-`:""}palette-AppBar-darkColor`],Drt=n=>(e,t)=>{const r=n.rootSelector||":root",i=n.colorSchemeSelector;let s=i;if(i==="class"&&(s=".%s"),i==="data"&&(s="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(s=`[${i}="%s"]`),n.defaultColorScheme===e){if(e==="dark"){const o={};return Irt(n.cssVarPrefix).forEach(a=>{o[a]=t[a],delete t[a]}),s==="media"?{[r]:t,"@media (prefers-color-scheme: dark)":{[r]:o}}:s?{[s.replace("%s",e)]:o,[`${r}, ${s.replace("%s",e)}`]:t}:{[r]:{...t,...o}}}if(s&&s!=="media")return`${r}, ${s.replace("%s",String(e))}`}else if(e){if(s==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:t}};if(s)return s.replace("%s",String(e))}return r};function krt(n,e){e.forEach(t=>{n[t]||(n[t]={})})}function Rt(n,e,t){!n[e]&&t&&(n[e]=t)}function f_(n){return typeof n!="string"||!n.startsWith("hsl")?n:Toe(n)}function Sp(n,e){`${e}Channel`in n||(n[`${e}Channel`]=h_(f_(n[e])))}function Ort(n){return typeof n=="number"?`${n}px`:typeof n=="string"||typeof n=="function"||Array.isArray(n)?n:"8px"}const Zh=n=>{try{return n()}catch{}},Brt=(n="mui")=>Xnt(n);function D$(n,e,t,r,i){if(!t)return;t=t===!0?{}:t;const s=i==="dark"?"dark":"light";if(!r){e[i]=Rrt({...t,palette:{mode:s,...t==null?void 0:t.palette},colorSpace:n});return}const{palette:o,...a}=YF({...r,palette:{mode:s,...t==null?void 0:t.palette},colorSpace:n});return e[i]={...t,palette:o,opacity:{...Foe(s),...t==null?void 0:t.opacity},overlays:(t==null?void 0:t.overlays)||Poe(s)},a}function $rt(n={},...e){const{colorSchemes:t={light:!0},defaultColorScheme:r,disableCssColorScheme:i=!1,cssVarPrefix:s="mui",nativeColor:o=!1,shouldSkipGeneratingVar:a=Nrt,colorSchemeSelector:l=t.light&&t.dark?"media":void 0,rootSelector:c=":root",...u}=n,d=Object.keys(t)[0],f=r||(t.light&&d!=="light"?"light":d),p=Brt(s),{[f]:g,light:v,dark:b,...x}=t,_={...x};let E=g;if((f==="dark"&&!("dark"in t)||f==="light"&&!("light"in t))&&(E=!0),!E)throw new Error(Kp(21,f));let C;o&&(C="oklch");const M=D$(C,_,E,u,f);v&&!_.light&&D$(C,_,v,void 0,"light"),b&&!_.dark&&D$(C,_,b,void 0,"dark");let R={defaultColorScheme:f,...M,cssVarPrefix:s,colorSchemeSelector:l,rootSelector:c,getCssVar:p,colorSchemes:_,font:{...frt(M.typography),...M.font},spacing:Ort(u.spacing)};Object.keys(R.colorSchemes).forEach(D=>{const P=R.colorSchemes[D].palette,G=q=>{const z=q.split("-"),J=z[1],Q=z[2];return p(q,P[J][Q])};P.mode==="light"&&(Rt(P.common,"background","#fff"),Rt(P.common,"onBackground","#000")),P.mode==="dark"&&(Rt(P.common,"background","#000"),Rt(P.common,"onBackground","#fff"));function W(q,z,J){if(C){let Q;return q===my&&(Q=`transparent ${((1-J)*100).toFixed(0)}%`),q===Oi&&(Q=`#000 ${(J*100).toFixed(0)}%`),q===Bi&&(Q=`#fff ${(J*100).toFixed(0)}%`),`color-mix(in ${C}, ${z}, ${Q})`}return q(z,J)}if(krt(P,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),P.mode==="light"){Rt(P.Alert,"errorColor",W(Oi,P.error.light,.6)),Rt(P.Alert,"infoColor",W(Oi,P.info.light,.6)),Rt(P.Alert,"successColor",W(Oi,P.success.light,.6)),Rt(P.Alert,"warningColor",W(Oi,P.warning.light,.6)),Rt(P.Alert,"errorFilledBg",G("palette-error-main")),Rt(P.Alert,"infoFilledBg",G("palette-info-main")),Rt(P.Alert,"successFilledBg",G("palette-success-main")),Rt(P.Alert,"warningFilledBg",G("palette-warning-main")),Rt(P.Alert,"errorFilledColor",Zh(()=>P.getContrastText(P.error.main))),Rt(P.Alert,"infoFilledColor",Zh(()=>P.getContrastText(P.info.main))),Rt(P.Alert,"successFilledColor",Zh(()=>P.getContrastText(P.success.main))),Rt(P.Alert,"warningFilledColor",Zh(()=>P.getContrastText(P.warning.main))),Rt(P.Alert,"errorStandardBg",W(Bi,P.error.light,.9)),Rt(P.Alert,"infoStandardBg",W(Bi,P.info.light,.9)),Rt(P.Alert,"successStandardBg",W(Bi,P.success.light,.9)),Rt(P.Alert,"warningStandardBg",W(Bi,P.warning.light,.9)),Rt(P.Alert,"errorIconColor",G("palette-error-main")),Rt(P.Alert,"infoIconColor",G("palette-info-main")),Rt(P.Alert,"successIconColor",G("palette-success-main")),Rt(P.Alert,"warningIconColor",G("palette-warning-main")),Rt(P.AppBar,"defaultBg",G("palette-grey-100")),Rt(P.Avatar,"defaultBg",G("palette-grey-400")),Rt(P.Button,"inheritContainedBg",G("palette-grey-300")),Rt(P.Button,"inheritContainedHoverBg",G("palette-grey-A100")),Rt(P.Chip,"defaultBorder",G("palette-grey-400")),Rt(P.Chip,"defaultAvatarColor",G("palette-grey-700")),Rt(P.Chip,"defaultIconColor",G("palette-grey-700")),Rt(P.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Rt(P.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Rt(P.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Rt(P.LinearProgress,"primaryBg",W(Bi,P.primary.main,.62)),Rt(P.LinearProgress,"secondaryBg",W(Bi,P.secondary.main,.62)),Rt(P.LinearProgress,"errorBg",W(Bi,P.error.main,.62)),Rt(P.LinearProgress,"infoBg",W(Bi,P.info.main,.62)),Rt(P.LinearProgress,"successBg",W(Bi,P.success.main,.62)),Rt(P.LinearProgress,"warningBg",W(Bi,P.warning.main,.62)),Rt(P.Skeleton,"bg",C?W(my,P.text.primary,.11):`rgba(${G("palette-text-primaryChannel")} / 0.11)`),Rt(P.Slider,"primaryTrack",W(Bi,P.primary.main,.62)),Rt(P.Slider,"secondaryTrack",W(Bi,P.secondary.main,.62)),Rt(P.Slider,"errorTrack",W(Bi,P.error.main,.62)),Rt(P.Slider,"infoTrack",W(Bi,P.info.main,.62)),Rt(P.Slider,"successTrack",W(Bi,P.success.main,.62)),Rt(P.Slider,"warningTrack",W(Bi,P.warning.main,.62));const q=C?W(Oi,P.background.default,.6825):hM(P.background.default,.8);Rt(P.SnackbarContent,"bg",q),Rt(P.SnackbarContent,"color",Zh(()=>C?KF.text.primary:P.getContrastText(q))),Rt(P.SpeedDialAction,"fabHoverBg",hM(P.background.paper,.15)),Rt(P.StepConnector,"border",G("palette-grey-400")),Rt(P.StepContent,"border",G("palette-grey-400")),Rt(P.Switch,"defaultColor",G("palette-common-white")),Rt(P.Switch,"defaultDisabledColor",G("palette-grey-100")),Rt(P.Switch,"primaryDisabledColor",W(Bi,P.primary.main,.62)),Rt(P.Switch,"secondaryDisabledColor",W(Bi,P.secondary.main,.62)),Rt(P.Switch,"errorDisabledColor",W(Bi,P.error.main,.62)),Rt(P.Switch,"infoDisabledColor",W(Bi,P.info.main,.62)),Rt(P.Switch,"successDisabledColor",W(Bi,P.success.main,.62)),Rt(P.Switch,"warningDisabledColor",W(Bi,P.warning.main,.62)),Rt(P.TableCell,"border",W(Bi,W(my,P.divider,1),.88)),Rt(P.Tooltip,"bg",W(my,P.grey[700],.92))}if(P.mode==="dark"){Rt(P.Alert,"errorColor",W(Bi,P.error.light,.6)),Rt(P.Alert,"infoColor",W(Bi,P.info.light,.6)),Rt(P.Alert,"successColor",W(Bi,P.success.light,.6)),Rt(P.Alert,"warningColor",W(Bi,P.warning.light,.6)),Rt(P.Alert,"errorFilledBg",G("palette-error-dark")),Rt(P.Alert,"infoFilledBg",G("palette-info-dark")),Rt(P.Alert,"successFilledBg",G("palette-success-dark")),Rt(P.Alert,"warningFilledBg",G("palette-warning-dark")),Rt(P.Alert,"errorFilledColor",Zh(()=>P.getContrastText(P.error.dark))),Rt(P.Alert,"infoFilledColor",Zh(()=>P.getContrastText(P.info.dark))),Rt(P.Alert,"successFilledColor",Zh(()=>P.getContrastText(P.success.dark))),Rt(P.Alert,"warningFilledColor",Zh(()=>P.getContrastText(P.warning.dark))),Rt(P.Alert,"errorStandardBg",W(Oi,P.error.light,.9)),Rt(P.Alert,"infoStandardBg",W(Oi,P.info.light,.9)),Rt(P.Alert,"successStandardBg",W(Oi,P.success.light,.9)),Rt(P.Alert,"warningStandardBg",W(Oi,P.warning.light,.9)),Rt(P.Alert,"errorIconColor",G("palette-error-main")),Rt(P.Alert,"infoIconColor",G("palette-info-main")),Rt(P.Alert,"successIconColor",G("palette-success-main")),Rt(P.Alert,"warningIconColor",G("palette-warning-main")),Rt(P.AppBar,"defaultBg",G("palette-grey-900")),Rt(P.AppBar,"darkBg",G("palette-background-paper")),Rt(P.AppBar,"darkColor",G("palette-text-primary")),Rt(P.Avatar,"defaultBg",G("palette-grey-600")),Rt(P.Button,"inheritContainedBg",G("palette-grey-800")),Rt(P.Button,"inheritContainedHoverBg",G("palette-grey-700")),Rt(P.Chip,"defaultBorder",G("palette-grey-700")),Rt(P.Chip,"defaultAvatarColor",G("palette-grey-300")),Rt(P.Chip,"defaultIconColor",G("palette-grey-300")),Rt(P.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Rt(P.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Rt(P.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Rt(P.LinearProgress,"primaryBg",W(Oi,P.primary.main,.5)),Rt(P.LinearProgress,"secondaryBg",W(Oi,P.secondary.main,.5)),Rt(P.LinearProgress,"errorBg",W(Oi,P.error.main,.5)),Rt(P.LinearProgress,"infoBg",W(Oi,P.info.main,.5)),Rt(P.LinearProgress,"successBg",W(Oi,P.success.main,.5)),Rt(P.LinearProgress,"warningBg",W(Oi,P.warning.main,.5)),Rt(P.Skeleton,"bg",C?W(my,P.text.primary,.13):`rgba(${G("palette-text-primaryChannel")} / 0.13)`),Rt(P.Slider,"primaryTrack",W(Oi,P.primary.main,.5)),Rt(P.Slider,"secondaryTrack",W(Oi,P.secondary.main,.5)),Rt(P.Slider,"errorTrack",W(Oi,P.error.main,.5)),Rt(P.Slider,"infoTrack",W(Oi,P.info.main,.5)),Rt(P.Slider,"successTrack",W(Oi,P.success.main,.5)),Rt(P.Slider,"warningTrack",W(Oi,P.warning.main,.5));const q=C?W(Bi,P.background.default,.985):hM(P.background.default,.98);Rt(P.SnackbarContent,"bg",q),Rt(P.SnackbarContent,"color",Zh(()=>C?Ooe.text.primary:P.getContrastText(q))),Rt(P.SpeedDialAction,"fabHoverBg",hM(P.background.paper,.15)),Rt(P.StepConnector,"border",G("palette-grey-600")),Rt(P.StepContent,"border",G("palette-grey-600")),Rt(P.Switch,"defaultColor",G("palette-grey-300")),Rt(P.Switch,"defaultDisabledColor",G("palette-grey-600")),Rt(P.Switch,"primaryDisabledColor",W(Oi,P.primary.main,.55)),Rt(P.Switch,"secondaryDisabledColor",W(Oi,P.secondary.main,.55)),Rt(P.Switch,"errorDisabledColor",W(Oi,P.error.main,.55)),Rt(P.Switch,"infoDisabledColor",W(Oi,P.info.main,.55)),Rt(P.Switch,"successDisabledColor",W(Oi,P.success.main,.55)),Rt(P.Switch,"warningDisabledColor",W(Oi,P.warning.main,.55)),Rt(P.TableCell,"border",W(Oi,W(my,P.divider,1),.68)),Rt(P.Tooltip,"bg",W(my,P.grey[700],.92))}Sp(P.background,"default"),Sp(P.background,"paper"),Sp(P.common,"background"),Sp(P.common,"onBackground"),Sp(P,"divider"),Object.keys(P).forEach(q=>{const z=P[q];q!=="tonalOffset"&&z&&typeof z=="object"&&(z.main&&Rt(P[q],"mainChannel",h_(f_(z.main))),z.light&&Rt(P[q],"lightChannel",h_(f_(z.light))),z.dark&&Rt(P[q],"darkChannel",h_(f_(z.dark))),z.contrastText&&Rt(P[q],"contrastTextChannel",h_(f_(z.contrastText))),q==="text"&&(Sp(P[q],"primary"),Sp(P[q],"secondary")),q==="action"&&(z.active&&Sp(P[q],"active"),z.selected&&Sp(P[q],"selected")))})}),R=e.reduce((D,P)=>aa(D,P),R);const L={prefix:s,disableCssColorScheme:i,shouldSkipGeneratingVar:a,getSelector:Drt(R),enableContrastVars:o},{vars:B,generateThemeVars:N,generateStyleSheets:I}=Ynt(R,L);return R.vars=B,Object.entries(R.colorSchemes[R.defaultColorScheme]).forEach(([D,P])=>{R[D]=P}),R.generateThemeVars=N,R.generateStyleSheets=I,R.generateSpacing=function(){return xoe(u.spacing,W3(this))},R.getColorSchemeSelector=Jnt(l),R.spacing=R.generateSpacing(),R.shouldSkipGeneratingVar=a,R.unstable_sxConfig={...b2,...u==null?void 0:u.unstable_sxConfig},R.unstable_sx=function(P){return Ug({sx:P,theme:this})},R.toRuntimeSource=Loe,R}function Z7(n,e,t){n.colorSchemes&&t&&(n.colorSchemes[e]={...t!==!0&&t,palette:w6({...t===!0?{}:t.palette,mode:e})})}function C2(n={},...e){const{palette:t,cssVariables:r=!1,colorSchemes:i=t?void 0:{light:!0},defaultColorScheme:s=t==null?void 0:t.mode,...o}=n,a=s||"light",l=i==null?void 0:i[a],c={...i,...t?{[a]:{...typeof l!="boolean"&&l,palette:t}}:void 0};if(r===!1){if(!("colorSchemes"in n))return YF(n,...e);let u=t;"palette"in n||c[a]&&(c[a]!==!0?u=c[a].palette:a==="dark"&&(u={mode:"dark"}));const d=YF({...n,palette:u},...e);return d.defaultColorScheme=a,d.colorSchemes=c,d.palette.mode==="light"&&(d.colorSchemes.light={...c.light!==!0&&c.light,palette:d.palette},Z7(d,"dark",c.dark)),d.palette.mode==="dark"&&(d.colorSchemes.dark={...c.dark!==!0&&c.dark,palette:d.palette},Z7(d,"light",c.light)),d}return!t&&!("light"in c)&&a==="light"&&(c.light=!0),$rt({...o,colorSchemes:c,defaultColorScheme:a,...typeof r!="boolean"&&r},...e)}const _6=C2(),Sf="$$material";function E2(){const n=tk(_6);return n[Sf]||n}function Lrt(n){return V.jsx(Soe,{...n,defaultTheme:_6,themeId:Sf})}function Uoe(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const jl=n=>Uoe(n)&&n!=="classes",an=Aoe({themeId:Sf,defaultTheme:_6,rootShouldForwardProp:jl});function C6(n){return function(t){return V.jsx(Lrt,{styles:typeof n=="function"?r=>n({theme:r,...t}):n})}}function Frt(){return l6}function Gr(n){return Ont(n)}const ZF=typeof C6({})=="function",Prt=(n,e)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...e&&!n.vars&&{colorScheme:n.palette.mode}}),Urt=n=>({color:(n.vars||n).palette.text.primary,...n.typography.body1,backgroundColor:(n.vars||n).palette.background.default,"@media print":{backgroundColor:(n.vars||n).palette.common.white}}),zoe=(n,e=!1)=>{var s,o;const t={};e&&n.colorSchemes&&typeof n.getColorSchemeSelector=="function"&&Object.entries(n.colorSchemes).forEach(([a,l])=>{var u,d;const c=n.getColorSchemeSelector(a);c.startsWith("@")?t[c]={":root":{colorScheme:(u=l.palette)==null?void 0:u.mode}}:t[c.replace(/\s*&/,"")]={colorScheme:(d=l.palette)==null?void 0:d.mode}});let r={html:Prt(n,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:n.typography.fontWeightBold},body:{margin:0,...Urt(n),"&::backdrop":{backgroundColor:(n.vars||n).palette.background.default}},...t};const i=(o=(s=n.components)==null?void 0:s.MuiCssBaseline)==null?void 0:o.styleOverrides;return i&&(r=[r,i]),r},GM="mui-ecs",zrt=n=>{const e=zoe(n,!1),t=Array.isArray(e)?e[0]:e;return!n.vars&&t&&(t.html[`:root:has(${GM})`]={colorScheme:n.palette.mode}),n.colorSchemes&&Object.entries(n.colorSchemes).forEach(([r,i])=>{var o,a;const s=n.getColorSchemeSelector(r);s.startsWith("@")?t[s]={[`:root:not(:has(.${GM}))`]:{colorScheme:(o=i.palette)==null?void 0:o.mode}}:t[s.replace(/\s*&/,"")]={[`&:not(:has(.${GM}))`]:{colorScheme:(a=i.palette)==null?void 0:a.mode}}}),e},Hrt=C6(ZF?({theme:n,enableColorScheme:e})=>zoe(n,e):({theme:n})=>zrt(n));function Hoe(n){const e=Gr({props:n,name:"MuiCssBaseline"}),{children:t,enableColorScheme:r=!1}=e;return V.jsxs(F.Fragment,{children:[ZF&&V.jsx(Hrt,{enableColorScheme:r}),!ZF&&!r&&V.jsx("span",{className:GM,style:{display:"none"}}),t]})}const Zx=irt({createStyledComponent:an("div",{name:"MuiStack",slot:"Root"}),useThemeProps:n=>Gr({props:n,name:"MuiStack"})});function Vrt({theme:n,...e}){const t=Sf in n?n[Sf]:void 0;return V.jsx(Ioe,{...e,themeId:t?Sf:void 0,theme:t||n})}const fM={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:Grt,useColorScheme:Wrt}=jnt({themeId:Sf,theme:()=>C2({cssVariables:!0}),colorSchemeStorageKey:fM.colorSchemeStorageKey,modeStorageKey:fM.modeStorageKey,defaultColorScheme:{light:fM.defaultLightColorScheme,dark:fM.defaultDarkColorScheme},resolveTheme:n=>{const e={...n,typography:$oe(n.palette,n.typography)};return e.unstable_sx=function(r){return Ug({sx:r,theme:this})},e}}),jrt=Grt;function Xrt({theme:n,...e}){const t=F.useMemo(()=>{if(typeof n=="function")return n;const r=Sf in n?n[Sf]:n;return"colorSchemes"in r?null:"vars"in r?n:{...n,vars:null}},[n]);return t?V.jsx(Vrt,{theme:t,...e}):V.jsx(jrt,{theme:n,...e})}const li=Fnt;var Q7;const qrt=an("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:jl})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Krt=an("legend",{name:"MuiNotchedOutlined",shouldForwardProp:jl})(li(({theme:n})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:e})=>!e.withLabel,style:{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})}},{props:({ownerState:e})=>e.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:e})=>e.withLabel&&e.notched,style:{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}}]})));function Yrt(n){const{children:e,classes:t,className:r,label:i,notched:s,...o}=n,a=i!=null&&i!=="",l={...n,notched:s,withLabel:a};return V.jsx(qrt,{"aria-hidden":!0,className:r,ownerState:l,...o,children:V.jsx(Krt,{ownerState:l,children:a?V.jsx("span",{children:i}):Q7||(Q7=V.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const E6=F.createContext(void 0);function i0(){return F.useContext(E6)}function Gv({props:n,states:e,muiFormControl:t}){return e.reduce((r,i)=>(r[i]=n[i],t&&typeof n[i]>"u"&&(r[i]=t[i]),r),{})}function Jrt(n){return typeof n.main=="string"}function Zrt(n,e=[]){if(!Jrt(n))return!1;for(const t of e)if(!n.hasOwnProperty(t)||typeof n[t]!="string")return!1;return!0}function Ul(n=[]){return([,e])=>e&&Zrt(e,n)}function HN(n){return typeof n=="string"}function Voe(n,e=166){let t;function r(...i){const s=()=>{n.apply(this,i)};clearTimeout(t),t=setTimeout(s,e)}return r.clear=()=>{clearTimeout(t)},r}function Wl(...n){const e=F.useRef(void 0),t=F.useCallback(r=>{const i=n.map(s=>{if(s==null)return null;if(typeof s=="function"){const o=s,a=o(r);return typeof a=="function"?a:()=>{o(null)}}return s.current=r,()=>{s.current=null}});return()=>{i.forEach(s=>s==null?void 0:s())}},n);return F.useMemo(()=>n.every(r=>r==null)?null:r=>{e.current&&(e.current(),e.current=void 0),r!=null&&(e.current=t(r))},n)}function ev(n){const e=F.useRef(n);return Df(()=>{e.current=n}),F.useRef((...t)=>(0,e.current)(...t)).current}function dh(n){return n&&n.ownerDocument||document}function Yp(n){return dh(n).defaultView||window}function pM(n){return parseInt(n,10)||0}const Qrt={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function eit(n){for(const e in n)return!1;return!0}function eX(n){return eit(n)||n.outerHeightStyle===0&&!n.overflowing}const tit=F.forwardRef(function(e,t){const{onChange:r,maxRows:i,minRows:s=1,style:o,value:a,...l}=e,{current:c}=F.useRef(a!=null),u=F.useRef(null),d=Wl(t,u),f=F.useRef(null),p=F.useRef(null),g=F.useCallback(()=>{const E=u.current,C=p.current;if(!E||!C)return;const R=Yp(E).getComputedStyle(E);if(R.width==="0px")return{outerHeightStyle:0,overflowing:!1};C.style.width=R.width,C.value=E.value||e.placeholder||"x",C.value.slice(-1)===`
`&&(C.value+=" ");const L=R.boxSizing,B=pM(R.paddingBottom)+pM(R.paddingTop),N=pM(R.borderBottomWidth)+pM(R.borderTopWidth),I=C.scrollHeight;C.value="x";const D=C.scrollHeight;let P=I;s&&(P=Math.max(Number(s)*D,P)),i&&(P=Math.min(Number(i)*D,P)),P=Math.max(P,D);const G=P+(L==="border-box"?B+N:0),W=Math.abs(P-I)<=1;return{outerHeightStyle:G,overflowing:W}},[i,s,e.placeholder]),v=ev(()=>{const E=u.current,C=g();if(!E||!C||eX(C))return!1;const M=C.outerHeightStyle;return f.current!=null&&f.current!==M}),b=F.useCallback(()=>{const E=u.current,C=g();if(!E||!C||eX(C))return;const M=C.outerHeightStyle;f.current!==M&&(f.current=M,E.style.height=`${M}px`),E.style.overflow=C.overflowing?"hidden":""},[g]),x=F.useRef(-1);Df(()=>{const E=Voe(b),C=u==null?void 0:u.current;if(!C)return;const M=Yp(C);M.addEventListener("resize",E);let R;return typeof ResizeObserver<"u"&&(R=new ResizeObserver(()=>{v()&&(R.unobserve(C),cancelAnimationFrame(x.current),b(),x.current=requestAnimationFrame(()=>{R.observe(C)}))}),R.observe(C)),()=>{E.clear(),cancelAnimationFrame(x.current),M.removeEventListener("resize",E),R&&R.disconnect()}},[g,b,v]),Df(()=>{b()});const _=E=>{c||b();const C=E.target,M=C.value.length,R=C.value.endsWith(`
`),L=C.selectionStart===M;R&&L&&C.setSelectionRange(M,M),r&&r(E)};return V.jsxs(F.Fragment,{children:[V.jsx("textarea",{value:a,onChange:_,ref:d,rows:s,style:o,...l}),V.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:p,tabIndex:-1,style:{...Qrt.shadow,...o,paddingTop:0,paddingBottom:0}})]})});function tX(n){return n!=null&&!(Array.isArray(n)&&n.length===0)}function VN(n,e=!1){return n&&(tX(n.value)&&n.value!==""||e&&tX(n.defaultValue)&&n.defaultValue!=="")}function nit(n){return n.startAdornment}function rit(n){return Fr("MuiInputBase",n)}const R1=yr("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var nX;const sk=(n,e)=>{const{ownerState:t}=n;return[e.root,t.formControl&&e.formControl,t.startAdornment&&e.adornedStart,t.endAdornment&&e.adornedEnd,t.error&&e.error,t.size==="small"&&e.sizeSmall,t.multiline&&e.multiline,t.color&&e[`color${Rn(t.color)}`],t.fullWidth&&e.fullWidth,t.hiddenLabel&&e.hiddenLabel]},ok=(n,e)=>{const{ownerState:t}=n;return[e.input,t.size==="small"&&e.inputSizeSmall,t.multiline&&e.inputMultiline,t.type==="search"&&e.inputTypeSearch,t.startAdornment&&e.inputAdornedStart,t.endAdornment&&e.inputAdornedEnd,t.hiddenLabel&&e.inputHiddenLabel]},iit=n=>{const{classes:e,color:t,disabled:r,error:i,endAdornment:s,focused:o,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:d,size:f,startAdornment:p,type:g}=n,v={root:["root",`color${Rn(t)}`,r&&"disabled",i&&"error",l&&"fullWidth",o&&"focused",a&&"formControl",f&&f!=="medium"&&`size${Rn(f)}`,u&&"multiline",p&&"adornedStart",s&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled",g==="search"&&"inputTypeSearch",u&&"inputMultiline",f==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",p&&"inputAdornedStart",s&&"inputAdornedEnd",d&&"readOnly"]};return Pr(v,rit,e)},ak=an("div",{name:"MuiInputBase",slot:"Root",overridesResolver:sk})(li(({theme:n})=>({...n.typography.body1,color:(n.vars||n).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${R1.disabled}`]:{color:(n.vars||n).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:e})=>e.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:e,size:t})=>e.multiline&&t==="small",style:{paddingTop:1}},{props:({ownerState:e})=>e.fullWidth,style:{width:"100%"}}]}))),lk=an("input",{name:"MuiInputBase",slot:"Input",overridesResolver:ok})(li(({theme:n})=>{const e=n.palette.mode==="light",t={color:"currentColor",...n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5},transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})},r={opacity:"0 !important"},i=n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":t,"&::-moz-placeholder":t,"&::-ms-input-placeholder":t,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${R1.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus::-ms-input-placeholder":i},[`&.${R1.disabled}`]:{opacity:1,WebkitTextFillColor:(n.vars||n).palette.text.disabled},variants:[{props:({ownerState:s})=>!s.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:s})=>s.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),rX=C6({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),A6=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:s,autoFocus:o,className:a,color:l,components:c={},componentsProps:u={},defaultValue:d,disabled:f,disableInjectingGlobalStyles:p,endAdornment:g,error:v,fullWidth:b=!1,id:x,inputComponent:_="input",inputProps:E={},inputRef:C,margin:M,maxRows:R,minRows:L,multiline:B=!1,name:N,onBlur:I,onChange:D,onClick:P,onFocus:G,onKeyDown:W,onKeyUp:q,placeholder:z,readOnly:J,renderSuffix:Q,rows:Y,size:X,slotProps:te={},slots:ne={},startAdornment:le,type:ye="text",value:ue,...be}=r,xe=E.value!=null?E.value:ue,{current:Pe}=F.useRef(xe!=null),ze=F.useRef(),Ke=F.useCallback(Ct=>{},[]),pt=Wl(ze,C,E.ref,Ke),[dt,pe]=F.useState(!1),Le=i0(),Ue=Gv({props:r,muiFormControl:Le,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Ue.focused=Le?Le.focused:dt,F.useEffect(()=>{!Le&&f&&dt&&(pe(!1),I&&I())},[Le,f,dt,I]);const Ze=Le&&Le.onFilled,je=Le&&Le.onEmpty,lt=F.useCallback(Ct=>{VN(Ct)?Ze&&Ze():je&&je()},[Ze,je]);Df(()=>{Pe&&lt({value:xe})},[xe,lt,Pe]);const st=Ct=>{G&&G(Ct),E.onFocus&&E.onFocus(Ct),Le&&Le.onFocus?Le.onFocus(Ct):pe(!0)},at=Ct=>{I&&I(Ct),E.onBlur&&E.onBlur(Ct),Le&&Le.onBlur?Le.onBlur(Ct):pe(!1)},Ut=(Ct,...qt)=>{if(!Pe){const yt=Ct.target||ze.current;if(yt==null)throw new Error(Kp(1));lt({value:yt.value})}E.onChange&&E.onChange(Ct,...qt),D&&D(Ct,...qt)};F.useEffect(()=>{lt(ze.current)},[]);const mt=Ct=>{ze.current&&Ct.currentTarget===Ct.target&&ze.current.focus(),P&&P(Ct)};let ce=_,re=E;B&&ce==="input"&&(Y?re={type:void 0,minRows:Y,maxRows:Y,...re}:re={type:void 0,maxRows:R,minRows:L,...re},ce=tit);const $e=Ct=>{lt(Ct.animationName==="mui-auto-fill-cancel"?ze.current:{value:"x"})};F.useEffect(()=>{Le&&Le.setAdornedStart(!!le)},[Le,le]);const qe={...r,color:Ue.color||"primary",disabled:Ue.disabled,endAdornment:g,error:Ue.error,focused:Ue.focused,formControl:Le,fullWidth:b,hiddenLabel:Ue.hiddenLabel,multiline:B,size:Ue.size,startAdornment:le,type:ye},ot=iit(qe),et=ne.root||c.Root||ak,Ft=te.root||u.root||{},At=ne.input||c.Input||lk;return re={...re,...te.input??u.input},V.jsxs(F.Fragment,{children:[!p&&typeof rX=="function"&&(nX||(nX=V.jsx(rX,{}))),V.jsxs(et,{...Ft,ref:t,onClick:mt,...be,...!HN(et)&&{ownerState:{...qe,...Ft.ownerState}},className:Pn(ot.root,Ft.className,a,J&&"MuiInputBase-readOnly"),children:[le,V.jsx(E6.Provider,{value:null,children:V.jsx(At,{"aria-invalid":Ue.error,"aria-describedby":i,autoComplete:s,autoFocus:o,defaultValue:d,disabled:Ue.disabled,id:x,onAnimationStart:$e,name:N,placeholder:z,readOnly:J,required:Ue.required,rows:Y,value:xe,onKeyDown:W,onKeyUp:q,type:ye,...re,...!HN(At)&&{as:ce,ownerState:{...qe,...re.ownerState}},ref:pt,className:Pn(ot.input,re.className,J&&"MuiInputBase-readOnly"),onBlur:at,onChange:Ut,onFocus:st})}),g,Q?Q({...Ue,startAdornment:le}):null]})]})});function sit(n){return Fr("MuiOutlinedInput",n)}const Vd={...R1,...yr("MuiOutlinedInput",["root","notchedOutline","input"])};function Goe(n,e,t){return n===void 0||HN(n)?e:{...e,ownerState:{...e.ownerState,...t}}}function Woe(n,e,t){return typeof n=="function"?n(e,t):n}function joe(n,e=[]){if(n===void 0)return{};const t={};return Object.keys(n).filter(r=>r.match(/^on[A-Z]/)&&typeof n[r]=="function"&&!e.includes(r)).forEach(r=>{t[r]=n[r]}),t}function iX(n){if(n===void 0)return{};const e={};return Object.keys(n).filter(t=>!(t.match(/^on[A-Z]/)&&typeof n[t]=="function")).forEach(t=>{e[t]=n[t]}),e}function Xoe(n){const{getSlotProps:e,additionalProps:t,externalSlotProps:r,externalForwardedProps:i,className:s}=n;if(!e){const p=Pn(t==null?void 0:t.className,s,i==null?void 0:i.className,r==null?void 0:r.className),g={...t==null?void 0:t.style,...i==null?void 0:i.style,...r==null?void 0:r.style},v={...t,...i,...r};return p.length>0&&(v.className=p),Object.keys(g).length>0&&(v.style=g),{props:v,internalRef:void 0}}const o=joe({...i,...r}),a=iX(r),l=iX(i),c=e(o),u=Pn(c==null?void 0:c.className,t==null?void 0:t.className,s,i==null?void 0:i.className,r==null?void 0:r.className),d={...c==null?void 0:c.style,...t==null?void 0:t.style,...i==null?void 0:i.style,...r==null?void 0:r.style},f={...c,...t,...l,...a};return u.length>0&&(f.className=u),Object.keys(d).length>0&&(f.style=d),{props:f,internalRef:c.ref}}function xi(n,e){const{className:t,elementType:r,ownerState:i,externalForwardedProps:s,internalForwardedProps:o,shouldForwardComponentProp:a=!1,...l}=e,{component:c,slots:u={[n]:void 0},slotProps:d={[n]:void 0},...f}=s,p=u[n]||r,g=Woe(d[n],i),{props:{component:v,...b},internalRef:x}=Xoe({className:t,...l,externalForwardedProps:n==="root"?f:void 0,externalSlotProps:g}),_=Wl(x,g==null?void 0:g.ref,e.ref),E=n==="root"?v||c:v,C=Goe(p,{...n==="root"&&!c&&!u[n]&&o,...n!=="root"&&!u[n]&&o,...b,...E&&!a&&{as:E},...E&&a&&{component:E},ref:_},i);return[p,C]}const oit=n=>{const{classes:e}=n,r=Pr({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},sit,e);return{...e,...r}},ait=an(ak,{shouldForwardProp:n=>jl(n)||n==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:sk})(li(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(n.vars||n).shape.borderRadius,[`&:hover .${Vd.notchedOutline}`]:{borderColor:(n.vars||n).palette.text.primary},"@media (hover: none)":{[`&:hover .${Vd.notchedOutline}`]:{borderColor:n.vars?n.alpha(n.vars.palette.common.onBackground,.23):e}},[`&.${Vd.focused} .${Vd.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(n.palette).filter(Ul()).map(([t])=>({props:{color:t},style:{[`&.${Vd.focused} .${Vd.notchedOutline}`]:{borderColor:(n.vars||n).palette[t].main}}})),{props:{},style:{[`&.${Vd.error} .${Vd.notchedOutline}`]:{borderColor:(n.vars||n).palette.error.main},[`&.${Vd.disabled} .${Vd.notchedOutline}`]:{borderColor:(n.vars||n).palette.action.disabled}}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:14}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:14}},{props:({ownerState:t})=>t.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:t,size:r})=>t.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),lit=an(Yrt,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(li(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:n.vars?n.alpha(n.vars.palette.common.onBackground,.23):e}})),cit=an(lk,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:ok})(li(({theme:n})=>({padding:"16.5px 14px",...!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...n.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:e})=>e.multiline,style:{padding:0}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}}]}))),ck=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiOutlinedInput"}),{components:i={},fullWidth:s=!1,inputComponent:o="input",label:a,multiline:l=!1,notched:c,slots:u={},slotProps:d={},type:f="text",...p}=r,g=oit(r),v=i0(),b=Gv({props:r,muiFormControl:v,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),x={...r,color:b.color||"primary",disabled:b.disabled,error:b.error,focused:b.focused,formControl:v,fullWidth:s,hiddenLabel:b.hiddenLabel,multiline:l,size:b.size,type:f},_=u.root??i.Root??ait,E=u.input??i.Input??cit,[C,M]=xi("notchedOutline",{elementType:lit,className:g.notchedOutline,shouldForwardComponentProp:!0,ownerState:x,externalForwardedProps:{slots:u,slotProps:d},additionalProps:{label:a!=null&&a!==""&&b.required?V.jsxs(F.Fragment,{children:[a,"","*"]}):a}});return V.jsx(A6,{slots:{root:_,input:E},slotProps:d,renderSuffix:R=>V.jsx(C,{...M,notched:typeof c<"u"?c:!!(R.startAdornment||R.filled||R.focused)}),fullWidth:s,inputComponent:o,multiline:l,ref:t,type:f,...p,classes:{...g,notchedOutline:null}})});ck.muiName="Input";function uit(n){return Fr("MuiSvgIcon",n)}const WM=yr("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]),dit=n=>{const{color:e,fontSize:t,classes:r}=n,i={root:["root",e!=="inherit"&&`color${Rn(e)}`,`fontSize${Rn(t)}`]};return Pr(i,uit,r)},hit=an("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="inherit"&&e[`color${Rn(t.color)}`],e[`fontSize${Rn(t.fontSize)}`]]}})(li(({theme:n})=>{var e,t,r,i,s,o,a,l,c,u,d,f,p,g;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(i=(e=n.transitions)==null?void 0:e.create)==null?void 0:i.call(e,"fill",{duration:(r=(t=(n.vars??n).transitions)==null?void 0:t.duration)==null?void 0:r.shorter}),variants:[{props:v=>!v.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((o=(s=n.typography)==null?void 0:s.pxToRem)==null?void 0:o.call(s,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((l=(a=n.typography)==null?void 0:a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((u=(c=n.typography)==null?void 0:c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}},...Object.entries((n.vars??n).palette).filter(([,v])=>v&&v.main).map(([v])=>{var b,x;return{props:{color:v},style:{color:(x=(b=(n.vars??n).palette)==null?void 0:b[v])==null?void 0:x.main}}}),{props:{color:"action"},style:{color:(f=(d=(n.vars??n).palette)==null?void 0:d.action)==null?void 0:f.active}},{props:{color:"disabled"},style:{color:(g=(p=(n.vars??n).palette)==null?void 0:p.action)==null?void 0:g.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),Jp=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiSvgIcon"}),{children:i,className:s,color:o="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:d,viewBox:f="0 0 24 24",...p}=r,g=F.isValidElement(i)&&i.type==="svg",v={...r,color:o,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:f,hasSvgAsChild:g},b={};u||(b.viewBox=f);const x=dit(v);return V.jsxs(hit,{as:a,className:Pn(x.root,s),focusable:"false",color:c,"aria-hidden":d?void 0:!0,role:d?"img":void 0,ref:t,...b,...p,...g&&i.props,ownerState:v,children:[g?i.props.children:i,d?V.jsx("title",{children:d}):null]})});Jp.muiName="SvgIcon";const sX=yr("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),fit=yr("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]);function GN(n){try{return n.matches(":focus-visible")}catch{}return!1}const oX={};function qoe(n,e){const t=F.useRef(oX);return t.current===oX&&(t.current=n(e)),t}class WN{constructor(){gw(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new WN}static use(){const e=qoe(WN.create).current,[t,r]=F.useState(!1);return e.shouldMount=t,e.setShouldMount=r,F.useEffect(e.mountEffect,[t]),e}mount(){return this.mounted||(this.mounted=mit(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.start(...e)})}stop(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.stop(...e)})}pulsate(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.pulsate(...e)})}}function pit(){return WN.use()}function mit(){let n,e;const t=new Promise((r,i)=>{n=r,e=i});return t.resolve=n,t.reject=e,t}function Koe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function QF(n,e){return QF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},QF(n,e)}function Yoe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,QF(n,e)}const aX={disabled:!1},jN=Ne.createContext(null);var git=function(e){return e.scrollTop},p_="unmounted",wy="exited",_y="entering",Dx="entered",eP="exiting",Ff=function(n){Yoe(e,n);function e(r,i){var s;s=n.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=wy,s.appearStatus=_y):l=Dx:r.unmountOnExit||r.mountOnEnter?l=p_:l=wy,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===p_?{status:wy}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==_y&&o!==Dx&&(s=_y):(o===_y||o===Dx)&&(s=eP)}this.updateStatus(!1,s)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},t.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===_y){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:n_.findDOMNode(this);o&&git(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===wy&&this.setState({status:p_})},t.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[n_.findDOMNode(this),a],c=l[0],u=l[1],d=this.getTimeouts(),f=a?d.appear:d.enter;if(!i&&!o||aX.disabled){this.safeSetState({status:Dx},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:_y},function(){s.props.onEntering(c,u),s.onTransitionEnd(f,function(){s.safeSetState({status:Dx},function(){s.props.onEntered(c,u)})})})},t.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:n_.findDOMNode(this);if(!s||aX.disabled){this.safeSetState({status:wy},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:eP},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:wy},function(){i.props.onExited(a)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},t.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},t.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:n_.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}i!=null&&setTimeout(this.nextCallback,i)},t.render=function(){var i=this.state.status;if(i===p_)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=Koe(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ne.createElement(jN.Provider,{value:null},typeof o=="function"?o(i,a):Ne.cloneElement(Ne.Children.only(o),a))},e}(Ne.Component);Ff.contextType=jN;Ff.propTypes={};function Tx(){}Ff.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Tx,onEntering:Tx,onEntered:Tx,onExit:Tx,onExiting:Tx,onExited:Tx};Ff.UNMOUNTED=p_;Ff.EXITED=wy;Ff.ENTERING=_y;Ff.ENTERED=Dx;Ff.EXITING=eP;function yit(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function T6(n,e){var t=function(s){return e&&F.isValidElement(s)?e(s):s},r=Object.create(null);return n&&F.Children.map(n,function(i){return i}).forEach(function(i){r[i.key]=t(i)}),r}function vit(n,e){n=n||{},e=e||{};function t(u){return u in e?e[u]:n[u]}var r=Object.create(null),i=[];for(var s in n)s in e?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var l in e){if(r[l])for(o=0;o<r[l].length;o++){var c=r[l][o];a[r[l][o]]=t(c)}a[l]=t(l)}for(o=0;o<i.length;o++)a[i[o]]=t(i[o]);return a}function Hy(n,e,t){return t[e]!=null?t[e]:n.props[e]}function bit(n,e){return T6(n.children,function(t){return F.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:Hy(t,"appear",n),enter:Hy(t,"enter",n),exit:Hy(t,"exit",n)})})}function xit(n,e,t){var r=T6(n.children),i=vit(e,r);return Object.keys(i).forEach(function(s){var o=i[s];if(F.isValidElement(o)){var a=s in e,l=s in r,c=e[s],u=F.isValidElement(c)&&!c.props.in;l&&(!a||u)?i[s]=F.cloneElement(o,{onExited:t.bind(null,o),in:!0,exit:Hy(o,"exit",n),enter:Hy(o,"enter",n)}):!l&&a&&!u?i[s]=F.cloneElement(o,{in:!1}):l&&a&&F.isValidElement(c)&&(i[s]=F.cloneElement(o,{onExited:t.bind(null,o),in:c.props.in,exit:Hy(o,"exit",n),enter:Hy(o,"enter",n)}))}}),i}var Sit=Object.values||function(n){return Object.keys(n).map(function(e){return n[e]})},wit={component:"div",childFactory:function(e){return e}},M6=function(n){Yoe(e,n);function e(r,i){var s;s=n.call(this,r,i)||this;var o=s.handleExited.bind(yit(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,l=s.firstRender;return{children:l?bit(i,a):xit(i,o,a),firstRender:!1}},t.handleExited=function(i,s){var o=T6(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var l=os({},a.children);return delete l[i.key],{children:l}}))},t.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=Koe(i,["component","childFactory"]),l=this.state.contextValue,c=Sit(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?Ne.createElement(jN.Provider,{value:l},c):Ne.createElement(jN.Provider,{value:l},Ne.createElement(s,a,c))},e}(Ne.Component);M6.propTypes={};M6.defaultProps=wit;const _it=[];function Cit(n){F.useEffect(n,_it)}class R6{constructor(){gw(this,"currentId",null);gw(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});gw(this,"disposeEffect",()=>this.clear)}static create(){return new R6}start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},e)}}function Joe(){const n=qoe(R6.create).current;return Cit(n.disposeEffect),n}function Eit(n){const{className:e,classes:t,pulsate:r=!1,rippleX:i,rippleY:s,rippleSize:o,in:a,onExited:l,timeout:c}=n,[u,d]=F.useState(!1),f=Pn(e,t.ripple,t.rippleVisible,r&&t.ripplePulsate),p={width:o,height:o,top:-(o/2)+s,left:-(o/2)+i},g=Pn(t.child,u&&t.childLeaving,r&&t.childPulsate);return!a&&!u&&d(!0),F.useEffect(()=>{if(!a&&l!=null){const v=setTimeout(l,c);return()=>{clearTimeout(v)}}},[l,a,c]),V.jsx("span",{className:f,style:p,children:V.jsx("span",{className:g})})}const $u=yr("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),tP=550,Ait=80,Tit=_2`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,Mit=_2`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,Rit=_2`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,Nit=an("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Iit=an(Eit,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${$u.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${Tit};
    animation-duration: ${tP}ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
  }

  &.${$u.ripplePulsate} {
    animation-duration: ${({theme:n})=>n.transitions.duration.shorter}ms;
  }

  & .${$u.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${$u.childLeaving} {
    opacity: 0;
    animation-name: ${Mit};
    animation-duration: ${tP}ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
  }

  & .${$u.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${Rit};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,Dit=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:o,...a}=r,[l,c]=F.useState([]),u=F.useRef(0),d=F.useRef(null);F.useEffect(()=>{d.current&&(d.current(),d.current=null)},[l]);const f=F.useRef(!1),p=Joe(),g=F.useRef(null),v=F.useRef(null),b=F.useCallback(C=>{const{pulsate:M,rippleX:R,rippleY:L,rippleSize:B,cb:N}=C;c(I=>[...I,V.jsx(Iit,{classes:{ripple:Pn(s.ripple,$u.ripple),rippleVisible:Pn(s.rippleVisible,$u.rippleVisible),ripplePulsate:Pn(s.ripplePulsate,$u.ripplePulsate),child:Pn(s.child,$u.child),childLeaving:Pn(s.childLeaving,$u.childLeaving),childPulsate:Pn(s.childPulsate,$u.childPulsate)},timeout:tP,pulsate:M,rippleX:R,rippleY:L,rippleSize:B},u.current)]),u.current+=1,d.current=N},[s]),x=F.useCallback((C={},M={},R=()=>{})=>{const{pulsate:L=!1,center:B=i||M.pulsate,fakeElement:N=!1}=M;if((C==null?void 0:C.type)==="mousedown"&&f.current){f.current=!1;return}(C==null?void 0:C.type)==="touchstart"&&(f.current=!0);const I=N?null:v.current,D=I?I.getBoundingClientRect():{width:0,height:0,left:0,top:0};let P,G,W;if(B||C===void 0||C.clientX===0&&C.clientY===0||!C.clientX&&!C.touches)P=Math.round(D.width/2),G=Math.round(D.height/2);else{const{clientX:q,clientY:z}=C.touches&&C.touches.length>0?C.touches[0]:C;P=Math.round(q-D.left),G=Math.round(z-D.top)}if(B)W=Math.sqrt((2*D.width**2+D.height**2)/3),W%2===0&&(W+=1);else{const q=Math.max(Math.abs((I?I.clientWidth:0)-P),P)*2+2,z=Math.max(Math.abs((I?I.clientHeight:0)-G),G)*2+2;W=Math.sqrt(q**2+z**2)}C!=null&&C.touches?g.current===null&&(g.current=()=>{b({pulsate:L,rippleX:P,rippleY:G,rippleSize:W,cb:R})},p.start(Ait,()=>{g.current&&(g.current(),g.current=null)})):b({pulsate:L,rippleX:P,rippleY:G,rippleSize:W,cb:R})},[i,b,p]),_=F.useCallback(()=>{x({},{pulsate:!0})},[x]),E=F.useCallback((C,M)=>{if(p.clear(),(C==null?void 0:C.type)==="touchend"&&g.current){g.current(),g.current=null,p.start(0,()=>{E(C,M)});return}g.current=null,c(R=>R.length>0?R.slice(1):R),d.current=M},[p]);return F.useImperativeHandle(t,()=>({pulsate:_,start:x,stop:E}),[_,x,E]),V.jsx(Nit,{className:Pn($u.root,s.root,o),ref:v,...a,children:V.jsx(M6,{component:null,exit:!0,children:l})})});function kit(n){return Fr("MuiButtonBase",n)}const N6=yr("MuiButtonBase",["root","disabled","focusVisible"]),Oit=n=>{const{disabled:e,focusVisible:t,focusVisibleClassName:r,classes:i}=n,o=Pr({root:["root",e&&"disabled",t&&"focusVisible"]},kit,i);return t&&r&&(o.root+=` ${r}`),o},Bit=an("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${N6.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),uk=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:o,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:f=!1,focusVisibleClassName:p,LinkComponent:g="a",onBlur:v,onClick:b,onContextMenu:x,onDragLeave:_,onFocus:E,onFocusVisible:C,onKeyDown:M,onKeyUp:R,onMouseDown:L,onMouseLeave:B,onMouseUp:N,onTouchEnd:I,onTouchMove:D,onTouchStart:P,tabIndex:G=0,TouchRippleProps:W,touchRippleRef:q,type:z,...J}=r,Q=F.useRef(null),Y=pit(),X=Wl(Y.ref,q),[te,ne]=F.useState(!1);c&&te&&ne(!1),F.useImperativeHandle(i,()=>({focusVisible:()=>{ne(!0),Q.current.focus()}}),[]);const le=Y.shouldMount&&!u&&!c;F.useEffect(()=>{te&&f&&!u&&Y.pulsate()},[u,f,te,Y]);const ye=wp(Y,"start",L,d),ue=wp(Y,"stop",x,d),be=wp(Y,"stop",_,d),xe=wp(Y,"stop",N,d),Pe=wp(Y,"stop",mt=>{te&&mt.preventDefault(),B&&B(mt)},d),ze=wp(Y,"start",P,d),Ke=wp(Y,"stop",I,d),pt=wp(Y,"stop",D,d),dt=wp(Y,"stop",mt=>{GN(mt.target)||ne(!1),v&&v(mt)},!1),pe=ev(mt=>{Q.current||(Q.current=mt.currentTarget),GN(mt.target)&&(ne(!0),C&&C(mt)),E&&E(mt)}),Le=()=>{const mt=Q.current;return l&&l!=="button"&&!(mt.tagName==="A"&&mt.href)},Ue=ev(mt=>{f&&!mt.repeat&&te&&mt.key===" "&&Y.stop(mt,()=>{Y.start(mt)}),mt.target===mt.currentTarget&&Le()&&mt.key===" "&&mt.preventDefault(),M&&M(mt),mt.target===mt.currentTarget&&Le()&&mt.key==="Enter"&&!c&&(mt.preventDefault(),b&&b(mt))}),Ze=ev(mt=>{f&&mt.key===" "&&te&&!mt.defaultPrevented&&Y.stop(mt,()=>{Y.pulsate(mt)}),R&&R(mt),b&&mt.target===mt.currentTarget&&Le()&&mt.key===" "&&!mt.defaultPrevented&&b(mt)});let je=l;je==="button"&&(J.href||J.to)&&(je=g);const lt={};je==="button"?(lt.type=z===void 0?"button":z,lt.disabled=c):(!J.href&&!J.to&&(lt.role="button"),c&&(lt["aria-disabled"]=c));const st=Wl(t,Q),at={...r,centerRipple:s,component:l,disabled:c,disableRipple:u,disableTouchRipple:d,focusRipple:f,tabIndex:G,focusVisible:te},Ut=Oit(at);return V.jsxs(Bit,{as:je,className:Pn(Ut.root,a),ownerState:at,onBlur:dt,onClick:b,onContextMenu:ue,onFocus:pe,onKeyDown:Ue,onKeyUp:Ze,onMouseDown:ye,onMouseLeave:Pe,onMouseUp:xe,onDragLeave:be,onTouchEnd:Ke,onTouchMove:pt,onTouchStart:ze,ref:st,tabIndex:c?-1:G,type:z,...lt,...J,children:[o,le?V.jsx(Dit,{ref:X,center:s,...W}):null]})});function wp(n,e,t,r=!1){return ev(i=>(t&&t(i),r||n[e](i),!0))}function lX(...n){return n.reduce((e,t)=>t==null?e:function(...i){e.apply(this,i),t.apply(this,i)},()=>{})}function La(n,e){function t(r,i){return V.jsx(Jp,{"data-testid":void 0,ref:i,...r,children:n})}return t.muiName=Jp.muiName,F.memo(F.forwardRef(t))}function cX(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function nP(n){const{controlled:e,default:t,name:r,state:i="value"}=n,{current:s}=F.useRef(e!==void 0),[o,a]=F.useState(t),l=s?e:o,c=F.useCallback(u=>{s||a(u)},[]);return[l,c]}function $it(n,e){const t=n.charCodeAt(2);return n[0]==="o"&&n[1]==="n"&&t>=65&&t<=90&&typeof e=="function"}function Zoe(n,e){if(!n)return e;function t(o,a){const l={};return Object.keys(a).forEach(c=>{$it(c,a[c])&&typeof o[c]=="function"&&(l[c]=(...u)=>{o[c](...u),a[c](...u)})}),l}if(typeof n=="function"||typeof e=="function")return o=>{const a=typeof e=="function"?e(o):e,l=typeof n=="function"?n({...o,...a}):n,c=Pn(o==null?void 0:o.className,a==null?void 0:a.className,l==null?void 0:l.className),u=t(l,a);return{...a,...l,...u,...!!c&&{className:c},...(a==null?void 0:a.style)&&(l==null?void 0:l.style)&&{style:{...a.style,...l.style}},...(a==null?void 0:a.sx)&&(l==null?void 0:l.sx)&&{sx:[...Array.isArray(a.sx)?a.sx:[a.sx],...Array.isArray(l.sx)?l.sx:[l.sx]]}}};const r=e,i=t(n,r),s=Pn(r==null?void 0:r.className,n==null?void 0:n.className);return{...e,...n,...i,...!!s&&{className:s},...(r==null?void 0:r.style)&&(n==null?void 0:n.style)&&{style:{...r.style,...n.style}},...(r==null?void 0:r.sx)&&(n==null?void 0:n.sx)&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(n.sx)?n.sx:[n.sx]]}}}const Lit=La(V.jsx("path",{d:"M18 19H6c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v12c0 .55-.45 1-1 1m1-16H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"})),Fit=La(V.jsx("path",{d:"M9 16.17 5.53 12.7a.996.996 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71c.39-.39.39-1.02 0-1.41a.996.996 0 0 0-1.41 0z"})),Pit=La(V.jsx("path",{d:"M18 13H6c-.55 0-1-.45-1-1s.45-1 1-1h12c.55 0 1 .45 1 1s-.45 1-1 1"})),Jc=C2();[...Jc.shadows];const Ln={50:"hsl(210, 100%, 95%)",100:"hsl(210, 100%, 92%)",200:"hsl(210, 100%, 80%)",300:"hsl(210, 100%, 65%)",400:"hsl(210, 98%, 48%)",500:"hsl(210, 98%, 42%)",600:"hsl(210, 98%, 55%)",700:"hsl(210, 100%, 35%)",900:"hsl(210, 100%, 21%)"},Yt={50:"hsl(220, 35%, 97%)",100:"hsl(220, 30%, 94%)",200:"hsl(220, 20%, 88%)",300:"hsl(220, 20%, 80%)",400:"hsl(220, 20%, 65%)",500:"hsl(220, 20%, 42%)",600:"hsl(220, 20%, 35%)",700:"hsl(220, 20%, 25%)",800:"hsl(220, 30%, 6%)",900:"hsl(220, 35%, 3%)"},mc={50:"hsl(120, 80%, 98%)",200:"hsl(120, 75%, 87%)",300:"hsl(120, 61%, 77%)",400:"hsl(120, 44%, 53%)",500:"hsl(120, 59%, 30%)",700:"hsl(120, 75%, 16%)",800:"hsl(120, 84%, 10%)",900:"hsl(120, 87%, 6%)"},Lu={100:"hsl(45, 92%, 90%)",300:"hsl(45, 90%, 65%)",400:"hsl(45, 90%, 40%)",500:"hsl(45, 90%, 35%)",700:"hsl(45, 94%, 20%)",800:"hsl(45, 95%, 16%)",900:"hsl(45, 93%, 12%)"},gc={50:"hsl(0, 100%, 97%)",100:"hsl(0, 92%, 90%)",200:"hsl(0, 94%, 80%)",300:"hsl(0, 90%, 65%)",400:"hsl(0, 90%, 40%)",500:"hsl(0, 90%, 30%)",700:"hsl(0, 94%, 18%)",800:"hsl(0, 95%, 12%)",900:"hsl(0, 93%, 6%)"},Uit={light:{palette:{primary:{light:Ln[200],main:Ln[400],dark:Ln[700],contrastText:Ln[50]},info:{light:Ln[100],main:Ln[300],dark:Ln[600],contrastText:Yt[50]},warning:{light:Lu[300],main:Lu[400],dark:Lu[800]},error:{light:gc[300],main:gc[400],dark:gc[800]},success:{light:mc[300],main:mc[400],dark:mc[800]},grey:{...Yt},divider:or(Yt[300],.4),background:{default:"hsl(0, 0%, 99%)",paper:"hsl(220, 35%, 97%)"},text:{primary:Yt[800],secondary:Yt[600],warning:Lu[400]},action:{hover:or(Yt[200],.2),selected:`${or(Yt[200],.3)}`},baseShadow:"hsla(220, 30%, 5%, 0.07) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.07) 0px 8px 16px -5px"}},dark:{palette:{primary:{contrastText:Ln[50],light:Ln[300],main:Ln[400],dark:Ln[700]},info:{contrastText:Ln[300],light:Ln[500],main:Ln[700],dark:Ln[900]},warning:{light:Lu[400],main:Lu[500],dark:Lu[700]},error:{light:gc[400],main:gc[500],dark:gc[700]},success:{light:mc[400],main:mc[500],dark:mc[700]},grey:{...Yt},divider:or(Yt[700],.6),background:{default:Yt[900],paper:"hsl(220, 30%, 7%)"},text:{primary:"hsl(0, 0%, 100%)",secondary:Yt[400]},action:{hover:or(Yt[600],.2),selected:or(Yt[600],.3)},baseShadow:"hsla(220, 30%, 5%, 0.7) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.8) 0px 8px 16px -5px"}}},zit={fontFamily:"Inter, sans-serif",h1:{fontSize:Jc.typography.pxToRem(48),fontWeight:600,lineHeight:1.2,letterSpacing:-.5},h2:{fontSize:Jc.typography.pxToRem(36),fontWeight:600,lineHeight:1.2},h3:{fontSize:Jc.typography.pxToRem(30),lineHeight:1.2},h4:{fontSize:Jc.typography.pxToRem(24),fontWeight:600,lineHeight:1.5},h5:{fontSize:Jc.typography.pxToRem(20),fontWeight:600},h6:{fontSize:Jc.typography.pxToRem(18),fontWeight:600},subtitle1:{fontSize:Jc.typography.pxToRem(18)},subtitle2:{fontSize:Jc.typography.pxToRem(14),fontWeight:500},body1:{fontSize:Jc.typography.pxToRem(14)},body2:{fontSize:Jc.typography.pxToRem(14),fontWeight:400},caption:{fontSize:Jc.typography.pxToRem(12),fontWeight:400}},Hit={borderRadius:8},Vit=["none","var(--template-palette-baseShadow)",...Jc.shadows.slice(2)],Git=Vit,Wit={MuiButtonBase:{defaultProps:{disableTouchRipple:!0,disableRipple:!0},styleOverrides:{root:({theme:n})=>({boxSizing:"border-box",transition:"all 100ms ease-in","&:focus-visible":{outline:`3px solid ${or(n.palette.primary.main,.5)}`,outlineOffset:"2px"}})}},MuiButton:{styleOverrides:{root:({theme:n})=>({boxShadow:"none",borderRadius:(n.vars||n).shape.borderRadius,textTransform:"none",variants:[{props:{size:"small"},style:{height:"2.25rem",padding:"8px 12px"}},{props:{size:"medium"},style:{height:"2.5rem"}},{props:{color:"primary",variant:"contained"},style:{color:"white",backgroundColor:Yt[900],backgroundImage:`linear-gradient(to bottom, ${Yt[700]}, ${Yt[800]})`,boxShadow:`inset 0 1px 0 ${Yt[600]}, inset 0 -1px 0 1px hsl(220, 0%, 0%)`,border:`1px solid ${Yt[700]}`,"&:hover":{backgroundImage:"none",backgroundColor:Yt[700],boxShadow:"none"},"&:active":{backgroundColor:Yt[800]},...n.applyStyles("dark",{color:"black",backgroundColor:Yt[50],backgroundImage:`linear-gradient(to bottom, ${Yt[100]}, ${Yt[50]})`,boxShadow:"inset 0 -1px 0  hsl(220, 30%, 80%)",border:`1px solid ${Yt[50]}`,"&:hover":{backgroundImage:"none",backgroundColor:Yt[300],boxShadow:"none"},"&:active":{backgroundColor:Yt[400]}})}},{props:{color:"secondary",variant:"contained"},style:{color:"white",backgroundColor:Ln[300],backgroundImage:`linear-gradient(to bottom, ${or(Ln[400],.8)}, ${Ln[500]})`,boxShadow:`inset 0 2px 0 ${or(Ln[200],.2)}, inset 0 -2px 0 ${or(Ln[700],.4)}`,border:`1px solid ${Ln[500]}`,"&:hover":{backgroundColor:Ln[700],boxShadow:"none"},"&:active":{backgroundColor:Ln[700],backgroundImage:"none"}}},{props:{variant:"outlined"},style:{color:(n.vars||n).palette.text.primary,border:"1px solid",borderColor:Yt[200],backgroundColor:or(Yt[50],.3),"&:hover":{backgroundColor:Yt[100],borderColor:Yt[300]},"&:active":{backgroundColor:Yt[200]},...n.applyStyles("dark",{backgroundColor:Yt[800],borderColor:Yt[700],"&:hover":{backgroundColor:Yt[900],borderColor:Yt[600]},"&:active":{backgroundColor:Yt[900]}})}},{props:{color:"secondary",variant:"outlined"},style:{color:Ln[700],border:"1px solid",borderColor:Ln[200],backgroundColor:Ln[50],"&:hover":{backgroundColor:Ln[100],borderColor:Ln[400]},"&:active":{backgroundColor:or(Ln[200],.7)},...n.applyStyles("dark",{color:Ln[50],border:"1px solid",borderColor:Ln[900],backgroundColor:or(Ln[900],.3),"&:hover":{borderColor:Ln[700],backgroundColor:or(Ln[900],.6)},"&:active":{backgroundColor:or(Ln[900],.5)}})}},{props:{variant:"text"},style:{color:Yt[600],"&:hover":{backgroundColor:Yt[100]},"&:active":{backgroundColor:Yt[200]},...n.applyStyles("dark",{color:Yt[50],"&:hover":{backgroundColor:Yt[700]},"&:active":{backgroundColor:or(Yt[700],.7)}})}},{props:{color:"secondary",variant:"text"},style:{color:Ln[700],"&:hover":{backgroundColor:or(Ln[100],.5)},"&:active":{backgroundColor:or(Ln[200],.7)},...n.applyStyles("dark",{color:Ln[100],"&:hover":{backgroundColor:or(Ln[900],.5)},"&:active":{backgroundColor:or(Ln[900],.3)}})}}]})}},MuiIconButton:{styleOverrides:{root:({theme:n})=>({boxShadow:"none",borderRadius:(n.vars||n).shape.borderRadius,textTransform:"none",fontWeight:n.typography.fontWeightMedium,letterSpacing:0,color:(n.vars||n).palette.text.primary,border:"1px solid ",borderColor:Yt[200],backgroundColor:or(Yt[50],.3),"&:hover":{backgroundColor:Yt[100],borderColor:Yt[300]},"&:active":{backgroundColor:Yt[200]},...n.applyStyles("dark",{backgroundColor:Yt[800],borderColor:Yt[700],"&:hover":{backgroundColor:Yt[900],borderColor:Yt[600]},"&:active":{backgroundColor:Yt[900]}}),variants:[{props:{size:"small"},style:{width:"2.25rem",height:"2.25rem",padding:"0.25rem",[`& .${WM.root}`]:{fontSize:"1rem"}}},{props:{size:"medium"},style:{width:"2.5rem",height:"2.5rem"}}]})}},MuiToggleButtonGroup:{styleOverrides:{root:({theme:n})=>({borderRadius:"10px",boxShadow:`0 4px 16px ${or(Yt[400],.2)}`,[`& .${sX.selected}`]:{color:Ln[500]},...n.applyStyles("dark",{[`& .${sX.selected}`]:{color:"#fff"},boxShadow:`0 4px 16px ${or(Ln[700],.5)}`})})}},MuiToggleButton:{styleOverrides:{root:({theme:n})=>({padding:"12px 16px",textTransform:"none",borderRadius:"10px",fontWeight:500,...n.applyStyles("dark",{color:Yt[400],boxShadow:"0 4px 16px rgba(0, 0, 0, 0.5)",[`&.${fit.selected}`]:{color:Ln[300]}})})}},MuiCheckbox:{defaultProps:{disableRipple:!0,icon:V.jsx(Lit,{sx:{color:"hsla(210, 0%, 0%, 0.0)"}}),checkedIcon:V.jsx(Fit,{sx:{height:14,width:14}}),indeterminateIcon:V.jsx(Pit,{sx:{height:14,width:14}})},styleOverrides:{root:({theme:n})=>({margin:10,height:16,width:16,borderRadius:5,border:"1px solid ",borderColor:or(Yt[300],.8),boxShadow:"0 0 0 1.5px hsla(210, 0%, 0%, 0.04) inset",backgroundColor:or(Yt[100],.4),transition:"border-color, background-color, 120ms ease-in","&:hover":{borderColor:Ln[300]},"&.Mui-focusVisible":{outline:`3px solid ${or(Ln[500],.5)}`,outlineOffset:"2px",borderColor:Ln[400]},"&.Mui-checked":{color:"white",backgroundColor:Ln[500],borderColor:Ln[500],boxShadow:"none","&:hover":{backgroundColor:Ln[600]}},...n.applyStyles("dark",{borderColor:or(Yt[700],.8),boxShadow:"0 0 0 1.5px hsl(210, 0%, 0%) inset",backgroundColor:or(Yt[900],.8),"&:hover":{borderColor:Ln[300]},"&.Mui-focusVisible":{borderColor:Ln[400],outline:`3px solid ${or(Ln[500],.5)}`,outlineOffset:"2px"}})})}},MuiInputBase:{styleOverrides:{root:{border:"none"},input:{"&::placeholder":{opacity:.7,color:Yt[500]}}}},MuiOutlinedInput:{styleOverrides:{input:{padding:0},root:({theme:n})=>({padding:"8px 12px",color:(n.vars||n).palette.text.primary,borderRadius:(n.vars||n).shape.borderRadius,border:`1px solid ${(n.vars||n).palette.divider}`,backgroundColor:(n.vars||n).palette.background.default,transition:"border 120ms ease-in","&:hover":{borderColor:Yt[400]},[`&.${Vd.focused}`]:{outline:`3px solid ${or(Ln[500],.5)}`,borderColor:Ln[400]},...n.applyStyles("dark",{"&:hover":{borderColor:Yt[500]}}),variants:[{props:{size:"small"},style:{height:"2.25rem"}},{props:{size:"medium"},style:{height:"2.5rem"}}]}),notchedOutline:{border:"none"}}},MuiInputAdornment:{styleOverrides:{root:({theme:n})=>({color:(n.vars||n).palette.grey[500],...n.applyStyles("dark",{color:(n.vars||n).palette.grey[400]})})}},MuiFormLabel:{styleOverrides:{root:({theme:n})=>({typography:n.typography.caption,marginBottom:8})}}};function jit(n){return Fr("MuiTypography",n)}const Xit=yr("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),qit={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Kit=Frt(),Yit=n=>{const{align:e,gutterBottom:t,noWrap:r,paragraph:i,variant:s,classes:o}=n,a={root:["root",s,n.align!=="inherit"&&`align${Rn(e)}`,t&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return Pr(a,jit,o)},Jit=an("span",{name:"MuiTypography",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.variant&&e[t.variant],t.align!=="inherit"&&e[`align${Rn(t.align)}`],t.noWrap&&e.noWrap,t.gutterBottom&&e.gutterBottom,t.paragraph&&e.paragraph]}})(li(({theme:n})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(n.typography).filter(([t,r])=>t!=="inherit"&&r&&typeof r=="object").map(([t,r])=>({props:{variant:t},style:r})),...Object.entries(n.palette).filter(Ul()).map(([t])=>({props:{color:t},style:{color:(n.vars||n).palette[t].main}})),...Object.entries(((e=n.palette)==null?void 0:e.text)||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${Rn(t)}`},style:{color:(n.vars||n).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}})),uX={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Ku=F.forwardRef(function(e,t){const{color:r,...i}=Gr({props:e,name:"MuiTypography"}),s=!qit[r],o=Kit({...i,...s&&{color:r}}),{align:a="inherit",className:l,component:c,gutterBottom:u=!1,noWrap:d=!1,paragraph:f=!1,variant:p="body1",variantMapping:g=uX,...v}=o,b={...o,align:a,color:r,className:l,component:c,gutterBottom:u,noWrap:d,paragraph:f,variant:p,variantMapping:g},x=c||(f?"p":g[p]||uX[p])||"span",_=Yit(b);return V.jsx(Jit,{as:x,ref:t,className:Pn(_.root,l),...v,ownerState:b,style:{...a!=="inherit"&&{"--Typography-textAlign":a},...v.style}})}),Nl=yr("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]);function Zit(n){return Fr("MuiCircularProgress",n)}yr("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Hd=44,rP=_2`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,iP=_2`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,Qit=typeof rP!="string"?g6`
        animation: ${rP} 1.4s linear infinite;
      `:null,est=typeof iP!="string"?g6`
        animation: ${iP} 1.4s ease-in-out infinite;
      `:null,tst=n=>{const{classes:e,variant:t,color:r,disableShrink:i}=n,s={root:["root",t,`color${Rn(r)}`],svg:["svg"],track:["track"],circle:["circle",`circle${Rn(t)}`,i&&"circleDisableShrink"]};return Pr(s,Zit,e)},nst=an("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],e[`color${Rn(t.color)}`]]}})(li(({theme:n})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:n.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Qit||{animation:`${rP} 1.4s linear infinite`}},...Object.entries(n.palette).filter(Ul()).map(([e])=>({props:{color:e},style:{color:(n.vars||n).palette[e].main}}))]}))),rst=an("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),ist=an("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.circle,e[`circle${Rn(t.variant)}`],t.disableShrink&&e.circleDisableShrink]}})(li(({theme:n})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:n.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:est||{animation:`${iP} 1.4s ease-in-out infinite`}}]}))),sst=an("circle",{name:"MuiCircularProgress",slot:"Track"})(li(({theme:n})=>({stroke:"currentColor",opacity:(n.vars||n).palette.action.activatedOpacity}))),dk=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiCircularProgress"}),{className:i,color:s="primary",disableShrink:o=!1,enableTrackSlot:a=!1,size:l=40,style:c,thickness:u=3.6,value:d=0,variant:f="indeterminate",...p}=r,g={...r,color:s,disableShrink:o,size:l,thickness:u,value:d,variant:f,enableTrackSlot:a},v=tst(g),b={},x={},_={};if(f==="determinate"){const E=2*Math.PI*((Hd-u)/2);b.strokeDasharray=E.toFixed(3),_["aria-valuenow"]=Math.round(d),b.strokeDashoffset=`${((100-d)/100*E).toFixed(3)}px`,x.transform="rotate(-90deg)"}return V.jsx(nst,{className:Pn(v.root,i),style:{width:l,height:l,...x,...c},ownerState:g,ref:t,role:"progressbar",..._,...p,children:V.jsxs(rst,{className:v.svg,ownerState:g,viewBox:`${Hd/2} ${Hd/2} ${Hd} ${Hd}`,children:[a?V.jsx(sst,{className:v.track,ownerState:g,cx:Hd,cy:Hd,r:(Hd-u)/2,fill:"none",strokeWidth:u,"aria-hidden":"true"}):null,V.jsx(ist,{className:v.circle,style:b,ownerState:g,cx:Hd,cy:Hd,r:(Hd-u)/2,fill:"none",strokeWidth:u})]})})});function ost(n){return Fr("MuiIconButton",n)}const sP=yr("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),ast=n=>{const{classes:e,disabled:t,color:r,edge:i,size:s,loading:o}=n,a={root:["root",o&&"loading",t&&"disabled",r!=="default"&&`color${Rn(r)}`,i&&`edge${Rn(i)}`,`size${Rn(s)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Pr(a,ost,e)},lst=an(uk,{name:"MuiIconButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.loading&&e.loading,t.color!=="default"&&e[`color${Rn(t.color)}`],t.edge&&e[`edge${Rn(t.edge)}`],e[`size${Rn(t.size)}`]]}})(li(({theme:n})=>({textAlign:"center",flex:"0 0 auto",fontSize:n.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(n.vars||n).palette.action.active,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":n.alpha((n.vars||n).palette.action.active,(n.vars||n).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),li(({theme:n})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(n.palette).filter(Ul()).map(([e])=>({props:{color:e},style:{color:(n.vars||n).palette[e].main}})),...Object.entries(n.palette).filter(Ul()).map(([e])=>({props:{color:e},style:{"--IconButton-hoverBg":n.alpha((n.vars||n).palette[e].main,(n.vars||n).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:n.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:n.typography.pxToRem(28)}}],[`&.${sP.disabled}`]:{backgroundColor:"transparent",color:(n.vars||n).palette.action.disabled},[`&.${sP.loading}`]:{color:"transparent"}}))),cst=an("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:n})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(n.vars||n).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),ust=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiIconButton"}),{edge:i=!1,children:s,className:o,color:a="default",disabled:l=!1,disableFocusRipple:c=!1,size:u="medium",id:d,loading:f=null,loadingIndicator:p,...g}=r,v=hS(d),b=p??V.jsx(dk,{"aria-labelledby":v,color:"inherit",size:16}),x={...r,edge:i,color:a,disabled:l,disableFocusRipple:c,loading:f,loadingIndicator:b,size:u},_=ast(x);return V.jsxs(lst,{id:f?v:d,className:Pn(_.root,o),centerRipple:!0,focusRipple:!c,disabled:l||f,ref:t,...g,ownerState:x,children:[typeof f=="boolean"&&V.jsx("span",{className:_.loadingWrapper,style:{display:"contents"},children:V.jsx(cst,{className:_.loadingIndicator,ownerState:x,children:f&&b})}),s]})}),dst={MuiList:{styleOverrides:{root:{padding:"8px",display:"flex",flexDirection:"column",gap:0}}},MuiListItem:{styleOverrides:{root:({theme:n})=>({[`& .${WM.root}`]:{width:"1rem",height:"1rem",color:(n.vars||n).palette.text.secondary},[`& .${Xit.root}`]:{fontWeight:500},[`& .${N6.root}`]:{display:"flex",gap:8,padding:"2px 8px",borderRadius:(n.vars||n).shape.borderRadius,opacity:.7,"&.Mui-selected":{opacity:1,backgroundColor:or(n.palette.action.selected,.3),[`& .${WM.root}`]:{color:(n.vars||n).palette.text.primary},"&:focus-visible":{backgroundColor:or(n.palette.action.selected,.3)},"&:hover":{backgroundColor:or(n.palette.action.selected,.5)}},"&:focus-visible":{backgroundColor:"transparent"}}})}},MuiListItemText:{styleOverrides:{primary:({theme:n})=>({fontSize:n.typography.body2.fontSize,fontWeight:500,lineHeight:n.typography.body2.lineHeight}),secondary:({theme:n})=>({fontSize:n.typography.caption.fontSize,lineHeight:n.typography.caption.lineHeight})}},MuiListSubheader:{styleOverrides:{root:({theme:n})=>({backgroundColor:"transparent",padding:"4px 8px",fontSize:n.typography.caption.fontSize,fontWeight:500,lineHeight:n.typography.caption.lineHeight})}},MuiListItemIcon:{styleOverrides:{root:{minWidth:0}}},MuiChip:{defaultProps:{size:"small"},styleOverrides:{root:({theme:n})=>({border:"1px solid",borderRadius:"999px",[`& .${Nl.label}`]:{fontWeight:600},variants:[{props:{color:"default"},style:{borderColor:Yt[200],backgroundColor:Yt[100],[`& .${Nl.label}`]:{color:Yt[500]},[`& .${Nl.icon}`]:{color:Yt[500]},...n.applyStyles("dark",{borderColor:Yt[700],backgroundColor:Yt[800],[`& .${Nl.label}`]:{color:Yt[300]},[`& .${Nl.icon}`]:{color:Yt[300]}})}},{props:{color:"success"},style:{borderColor:mc[200],backgroundColor:mc[50],[`& .${Nl.label}`]:{color:mc[500]},[`& .${Nl.icon}`]:{color:mc[500]},...n.applyStyles("dark",{borderColor:mc[800],backgroundColor:mc[900],[`& .${Nl.label}`]:{color:mc[300]},[`& .${Nl.icon}`]:{color:mc[300]}})}},{props:{color:"error"},style:{borderColor:gc[100],backgroundColor:gc[50],[`& .${Nl.label}`]:{color:gc[500]},[`& .${Nl.icon}`]:{color:gc[500]},...n.applyStyles("dark",{borderColor:gc[800],backgroundColor:gc[900],[`& .${Nl.label}`]:{color:gc[200]},[`& .${Nl.icon}`]:{color:gc[300]}})}},{props:{size:"small"},style:{maxHeight:20,[`& .${Nl.label}`]:{fontSize:n.typography.caption.fontSize},[`& .${WM.root}`]:{fontSize:n.typography.caption.fontSize}}},{props:{size:"medium"},style:{[`& .${Nl.label}`]:{fontSize:n.typography.caption.fontSize}}}]})}},MuiTablePagination:{styleOverrides:{actions:{display:"flex",gap:8,marginRight:6,[`& .${sP.root}`]:{minWidth:0,width:36,height:36}}}},MuiIcon:{defaultProps:{fontSize:"small"},styleOverrides:{root:{variants:[{props:{fontSize:"small"},style:{fontSize:"1rem"}}]}}}},hst={MuiAlert:{styleOverrides:{root:({theme:n})=>({borderRadius:10,backgroundColor:Lu[100],color:(n.vars||n).palette.text.primary,border:`1px solid ${or(Lu[300],.5)}`,"& .MuiAlert-icon":{color:Lu[500]},...n.applyStyles("dark",{backgroundColor:`${or(Lu[900],.5)}`,border:`1px solid ${or(Lu[800],.5)}`})})}},MuiDialog:{styleOverrides:{root:({theme:n})=>({"& .MuiDialog-paper":{borderRadius:"10px",border:"1px solid",borderColor:(n.vars||n).palette.divider}})}},MuiLinearProgress:{styleOverrides:{root:({theme:n})=>({height:8,borderRadius:8,backgroundColor:Yt[200],...n.applyStyles("dark",{backgroundColor:Yt[800]})})}}};function fst(n){return Fr("MuiDivider",n)}const oP=yr("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),pst=n=>{const{absolute:e,children:t,classes:r,flexItem:i,light:s,orientation:o,textAlign:a,variant:l}=n;return Pr({root:["root",e&&"absolute",l,s&&"light",o==="vertical"&&"vertical",i&&"flexItem",t&&"withChildren",t&&o==="vertical"&&"withChildrenVertical",a==="right"&&o!=="vertical"&&"textAlignRight",a==="left"&&o!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",o==="vertical"&&"wrapperVertical"]},fst,r)},mst=an("div",{name:"MuiDivider",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.absolute&&e.absolute,e[t.variant],t.light&&e.light,t.orientation==="vertical"&&e.vertical,t.flexItem&&e.flexItem,t.children&&e.withChildren,t.children&&t.orientation==="vertical"&&e.withChildrenVertical,t.textAlign==="right"&&t.orientation!=="vertical"&&e.textAlignRight,t.textAlign==="left"&&t.orientation!=="vertical"&&e.textAlignLeft]}})(li(({theme:n})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(n.vars||n).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:n.alpha((n.vars||n).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:n.spacing(2),marginRight:n.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:n.spacing(1),marginBottom:n.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:e})=>!!e.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:e})=>e.children&&e.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(n.vars||n).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:e})=>e.orientation==="vertical"&&e.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(n.vars||n).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:e})=>e.textAlign==="right"&&e.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:e})=>e.textAlign==="left"&&e.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),gst=an("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.wrapper,t.orientation==="vertical"&&e.wrapperVertical]}})(li(({theme:n})=>({display:"inline-block",paddingLeft:`calc(${n.spacing(1)} * 1.2)`,paddingRight:`calc(${n.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${n.spacing(1)} * 1.2)`,paddingBottom:`calc(${n.spacing(1)} * 1.2)`}}]}))),XN=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiDivider"}),{absolute:i=!1,children:s,className:o,orientation:a="horizontal",component:l=s||a==="vertical"?"div":"hr",flexItem:c=!1,light:u=!1,role:d=l!=="hr"?"separator":void 0,textAlign:f="center",variant:p="fullWidth",...g}=r,v={...r,absolute:i,component:l,flexItem:c,light:u,orientation:a,role:d,textAlign:f,variant:p},b=pst(v);return V.jsx(mst,{as:l,className:Pn(b.root,o),role:d,ref:t,ownerState:v,"aria-orientation":d==="separator"&&(l!=="hr"||a==="vertical")?a:void 0,...g,children:s?V.jsx(gst,{className:b.wrapper,ownerState:v,children:s}):null})});XN&&(XN.muiSkipListHighlight=!0);const aP=F.createContext({}),dX=yr("MuiListItemIcon",["root","alignItemsFlexStart"]),hX=yr("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function yst(n){return Fr("MuiMenuItem",n)}const cg=yr("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),vst=(n,e)=>{const{ownerState:t}=n;return[e.root,t.dense&&e.dense,t.divider&&e.divider,!t.disableGutters&&e.gutters]},bst=n=>{const{disabled:e,dense:t,divider:r,disableGutters:i,selected:s,classes:o}=n,l=Pr({root:["root",t&&"dense",e&&"disabled",!i&&"gutters",r&&"divider",s&&"selected"]},yst,o);return{...o,...l}},xst=an(uk,{shouldForwardProp:n=>jl(n)||n==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:vst})(li(({theme:n})=>({...n.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${cg.selected}`]:{backgroundColor:n.alpha((n.vars||n).palette.primary.main,(n.vars||n).palette.action.selectedOpacity),[`&.${cg.focusVisible}`]:{backgroundColor:n.alpha((n.vars||n).palette.primary.main,`${(n.vars||n).palette.action.selectedOpacity} + ${(n.vars||n).palette.action.focusOpacity}`)}},[`&.${cg.selected}:hover`]:{backgroundColor:n.alpha((n.vars||n).palette.primary.main,`${(n.vars||n).palette.action.selectedOpacity} + ${(n.vars||n).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:n.alpha((n.vars||n).palette.primary.main,(n.vars||n).palette.action.selectedOpacity)}},[`&.${cg.focusVisible}`]:{backgroundColor:(n.vars||n).palette.action.focus},[`&.${cg.disabled}`]:{opacity:(n.vars||n).palette.action.disabledOpacity},[`& + .${oP.root}`]:{marginTop:n.spacing(1),marginBottom:n.spacing(1)},[`& + .${oP.inset}`]:{marginLeft:52},[`& .${hX.root}`]:{marginTop:0,marginBottom:0},[`& .${hX.inset}`]:{paddingLeft:36},[`& .${dX.root}`]:{minWidth:36},variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(n.vars||n).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>!e.dense,style:{[n.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:e})=>e.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...n.typography.body2,[`& .${dX.root} svg`]:{fontSize:"1.25rem"}}}]}))),k$=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:s="li",dense:o=!1,divider:a=!1,disableGutters:l=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:d,className:f,...p}=r,g=F.useContext(aP),v=F.useMemo(()=>({dense:o||g.dense||!1,disableGutters:l}),[g.dense,o,l]),b=F.useRef(null);Df(()=>{i&&b.current&&b.current.focus()},[i]);const x={...r,dense:v.dense,divider:a,disableGutters:l},_=bst(r),E=Wl(b,t);let C;return r.disabled||(C=d!==void 0?d:-1),V.jsx(aP.Provider,{value:v,children:V.jsx(xst,{ref:E,role:u,tabIndex:C,component:s,focusVisibleClassName:Pn(_.focusVisible,c),className:Pn(_.root,f),...p,ownerState:x,classes:_})})});function A2(n){var e;return parseInt(F.version,10)>=19?((e=n==null?void 0:n.props)==null?void 0:e.ref)||null:(n==null?void 0:n.ref)||null}function Sst(n){var d;const{elementType:e,externalSlotProps:t,ownerState:r,skipResolvingSlotProps:i=!1,...s}=n,o=i?{}:Woe(t,r),{props:a,internalRef:l}=Xoe({...s,externalSlotProps:o}),c=Wl(l,o==null?void 0:o.ref,(d=n.additionalProps)==null?void 0:d.ref);return Goe(e,{...a,ref:c},r)}function wst(n){return Fr("MuiList",n)}yr("MuiList",["root","padding","dense","subheader"]);const _st=n=>{const{classes:e,disablePadding:t,dense:r,subheader:i}=n;return Pr({root:["root",!t&&"padding",r&&"dense",i&&"subheader"]},wst,e)},Cst=an("ul",{name:"MuiList",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disablePadding&&e.padding,t.dense&&e.dense,t.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:n})=>!n.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:n})=>n.subheader,style:{paddingTop:0}}]}),Est=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiList"}),{children:i,className:s,component:o="ul",dense:a=!1,disablePadding:l=!1,subheader:c,...u}=r,d=F.useMemo(()=>({dense:a}),[a]),f={...r,component:o,dense:a,disablePadding:l},p=_st(f);return V.jsx(aP.Provider,{value:d,children:V.jsxs(Cst,{as:o,className:Pn(p.root,s),ref:t,ownerState:f,...u,children:[c,i]})})});function Qoe(n=window){const e=n.document.documentElement.clientWidth;return n.innerWidth-e}function O$(n,e,t){return n===e?n.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t?null:n.firstChild}function fX(n,e,t){return n===e?t?n.firstChild:n.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t?null:n.lastChild}function eae(n,e){if(e===void 0)return!0;let t=n.innerText;return t===void 0&&(t=n.textContent),t=t.trim().toLowerCase(),t.length===0?!1:e.repeating?t[0]===e.keys[0]:t.startsWith(e.keys.join(""))}function Yw(n,e,t,r,i,s){let o=!1,a=i(n,e,e?t:!1);for(;a;){if(a===n.firstChild){if(o)return!1;o=!0}const l=r?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!eae(a,s)||l)a=i(n,a,t);else return a.focus(),!0}return!1}const Ast=F.forwardRef(function(e,t){const{actions:r,autoFocus:i=!1,autoFocusItem:s=!1,children:o,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:d="selectedMenu",...f}=e,p=F.useRef(null),g=F.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Df(()=>{i&&p.current.focus()},[i]),F.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(E,{direction:C})=>{const M=!p.current.style.width;if(E.clientHeight<p.current.clientHeight&&M){const R=`${Qoe(Yp(E))}px`;p.current.style[C==="rtl"?"paddingLeft":"paddingRight"]=R,p.current.style.width=`calc(100% + ${R})`}return p.current}}),[]);const v=E=>{const C=p.current,M=E.key;if(E.ctrlKey||E.metaKey||E.altKey){u&&u(E);return}const L=dh(C).activeElement;if(M==="ArrowDown")E.preventDefault(),Yw(C,L,c,l,O$);else if(M==="ArrowUp")E.preventDefault(),Yw(C,L,c,l,fX);else if(M==="Home")E.preventDefault(),Yw(C,null,c,l,O$);else if(M==="End")E.preventDefault(),Yw(C,null,c,l,fX);else if(M.length===1){const B=g.current,N=M.toLowerCase(),I=performance.now();B.keys.length>0&&(I-B.lastTime>500?(B.keys=[],B.repeating=!0,B.previousKeyMatched=!0):B.repeating&&N!==B.keys[0]&&(B.repeating=!1)),B.lastTime=I,B.keys.push(N);const D=L&&!B.repeating&&eae(L,B);B.previousKeyMatched&&(D||Yw(C,L,!1,l,O$,B))?E.preventDefault():B.previousKeyMatched=!1}u&&u(E)},b=Wl(p,t);let x=-1;F.Children.forEach(o,(E,C)=>{if(!F.isValidElement(E)){x===C&&(x+=1,x>=o.length&&(x=-1));return}E.props.disabled||(d==="selectedMenu"&&E.props.selected||x===-1)&&(x=C),x===C&&(E.props.disabled||E.props.muiSkipListHighlight||E.type.muiSkipListHighlight)&&(x+=1,x>=o.length&&(x=-1))});const _=F.Children.map(o,(E,C)=>{if(C===x){const M={};return s&&(M.autoFocus=!0),E.props.tabIndex===void 0&&d==="selectedMenu"&&(M.tabIndex=0),F.cloneElement(E,M)}return E});return V.jsx(Est,{role:"menu",ref:b,className:a,onKeyDown:v,tabIndex:i?0:-1,...f,children:_})}),tae=n=>n.scrollTop;function qN(n,e){const{timeout:t,easing:r,style:i={}}=n;return{duration:i.transitionDuration??(typeof t=="number"?t:t[e.mode]||0),easing:i.transitionTimingFunction??(typeof r=="object"?r[e.mode]:r),delay:i.transitionDelay}}function lP(n){return`scale(${n}, ${n**2})`}const Tst={entering:{opacity:1,transform:lP(1)},entered:{opacity:1,transform:"none"}},B$=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),cP=F.forwardRef(function(e,t){const{addEndListener:r,appear:i=!0,children:s,easing:o,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:d,onExited:f,onExiting:p,style:g,timeout:v="auto",TransitionComponent:b=Ff,...x}=e,_=Joe(),E=F.useRef(),C=E2(),M=F.useRef(null),R=Wl(M,A2(s),t),L=q=>z=>{if(q){const J=M.current;z===void 0?q(J):q(J,z)}},B=L(u),N=L((q,z)=>{tae(q);const{duration:J,delay:Q,easing:Y}=qN({style:g,timeout:v,easing:o},{mode:"enter"});let X;v==="auto"?(X=C.transitions.getAutoHeightDuration(q.clientHeight),E.current=X):X=J,q.style.transition=[C.transitions.create("opacity",{duration:X,delay:Q}),C.transitions.create("transform",{duration:B$?X:X*.666,delay:Q,easing:Y})].join(","),l&&l(q,z)}),I=L(c),D=L(p),P=L(q=>{const{duration:z,delay:J,easing:Q}=qN({style:g,timeout:v,easing:o},{mode:"exit"});let Y;v==="auto"?(Y=C.transitions.getAutoHeightDuration(q.clientHeight),E.current=Y):Y=z,q.style.transition=[C.transitions.create("opacity",{duration:Y,delay:J}),C.transitions.create("transform",{duration:B$?Y:Y*.666,delay:B$?J:J||Y*.333,easing:Q})].join(","),q.style.opacity=0,q.style.transform=lP(.75),d&&d(q)}),G=L(f),W=q=>{v==="auto"&&_.start(E.current||0,q),r&&r(M.current,q)};return V.jsx(b,{appear:i,in:a,nodeRef:M,onEnter:N,onEntered:I,onEntering:B,onExit:P,onExited:G,onExiting:D,addEndListener:W,timeout:v==="auto"?null:v,...x,children:(q,{ownerState:z,...J})=>F.cloneElement(s,{style:{opacity:0,transform:lP(.75),visibility:q==="exited"&&!a?"hidden":void 0,...Tst[q],...g,...s.props.style},ref:R,...J})})});cP&&(cP.muiSupportAuto=!0);function Mst(n){const e=dh(n);return e.body===n?Yp(n).innerWidth>e.documentElement.clientWidth:n.scrollHeight>n.clientHeight}function O_(n,e){e?n.setAttribute("aria-hidden","true"):n.removeAttribute("aria-hidden")}function pX(n){return parseInt(Yp(n).getComputedStyle(n).paddingRight,10)||0}function Rst(n){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(n.tagName),r=n.tagName==="INPUT"&&n.getAttribute("type")==="hidden";return t||r}function mX(n,e,t,r,i){const s=[e,t,...r];[].forEach.call(n.children,o=>{const a=!s.includes(o),l=!Rst(o);a&&l&&O_(o,i)})}function $$(n,e){let t=-1;return n.some((r,i)=>e(r)?(t=i,!0):!1),t}function Nst(n,e){const t=[],r=n.container;if(!e.disableScrollLock){if(Mst(r)){const o=Qoe(Yp(r));t.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${pX(r)+o}px`;const a=dh(r).querySelectorAll(".mui-fixed");[].forEach.call(a,l=>{t.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${pX(l)+o}px`})}let s;if(r.parentNode instanceof DocumentFragment)s=dh(r).body;else{const o=r.parentElement,a=Yp(r);s=(o==null?void 0:o.nodeName)==="HTML"&&a.getComputedStyle(o).overflowY==="scroll"?o:r}t.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{t.forEach(({value:s,el:o,property:a})=>{s?o.style.setProperty(a,s):o.style.removeProperty(a)})}}function Ist(n){const e=[];return[].forEach.call(n.children,t=>{t.getAttribute("aria-hidden")==="true"&&e.push(t)}),e}class Dst{constructor(){this.modals=[],this.containers=[]}add(e,t){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&O_(e.modalRef,!1);const i=Ist(t);mX(t,e.mount,e.modalRef,i,!0);const s=$$(this.containers,o=>o.container===t);return s!==-1?(this.containers[s].modals.push(e),r):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:i}),r)}mount(e,t){const r=$$(this.containers,s=>s.modals.includes(e)),i=this.containers[r];i.restore||(i.restore=Nst(i,t))}remove(e,t=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=$$(this.containers,o=>o.modals.includes(e)),s=this.containers[i];if(s.modals.splice(s.modals.indexOf(e),1),this.modals.splice(r,1),s.modals.length===0)s.restore&&s.restore(),e.modalRef&&O_(e.modalRef,t),mX(s.container,e.mount,e.modalRef,s.hiddenSiblings,!1),this.containers.splice(i,1);else{const o=s.modals[s.modals.length-1];o.modalRef&&O_(o.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}const kst=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Ost(n){const e=parseInt(n.getAttribute("tabindex")||"",10);return Number.isNaN(e)?n.contentEditable==="true"||(n.nodeName==="AUDIO"||n.nodeName==="VIDEO"||n.nodeName==="DETAILS")&&n.getAttribute("tabindex")===null?0:n.tabIndex:e}function Bst(n){if(n.tagName!=="INPUT"||n.type!=="radio"||!n.name)return!1;const e=r=>n.ownerDocument.querySelector(`input[type="radio"]${r}`);let t=e(`[name="${n.name}"]:checked`);return t||(t=e(`[name="${n.name}"]`)),t!==n}function $st(n){return!(n.disabled||n.tagName==="INPUT"&&n.type==="hidden"||Bst(n))}function Lst(n){const e=[],t=[];return Array.from(n.querySelectorAll(kst)).forEach((r,i)=>{const s=Ost(r);s===-1||!$st(r)||(s===0?e.push(r):t.push({documentOrder:i,tabIndex:s,node:r}))}),t.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function Fst(){return!0}function Pst(n){const{children:e,disableAutoFocus:t=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:s=Lst,isEnabled:o=Fst,open:a}=n,l=F.useRef(!1),c=F.useRef(null),u=F.useRef(null),d=F.useRef(null),f=F.useRef(null),p=F.useRef(!1),g=F.useRef(null),v=Wl(A2(e),g),b=F.useRef(null);F.useEffect(()=>{!a||!g.current||(p.current=!t)},[t,a]),F.useEffect(()=>{if(!a||!g.current)return;const E=dh(g.current);return g.current.contains(E.activeElement)||(g.current.hasAttribute("tabIndex")||g.current.setAttribute("tabIndex","-1"),p.current&&g.current.focus()),()=>{i||(d.current&&d.current.focus&&(l.current=!0,d.current.focus()),d.current=null)}},[a]),F.useEffect(()=>{if(!a||!g.current)return;const E=dh(g.current),C=L=>{b.current=L,!(r||!o()||L.key!=="Tab")&&E.activeElement===g.current&&L.shiftKey&&(l.current=!0,u.current&&u.current.focus())},M=()=>{var N,I;const L=g.current;if(L===null)return;if(!E.hasFocus()||!o()||l.current){l.current=!1;return}if(L.contains(E.activeElement)||r&&E.activeElement!==c.current&&E.activeElement!==u.current)return;if(E.activeElement!==f.current)f.current=null;else if(f.current!==null)return;if(!p.current)return;let B=[];if((E.activeElement===c.current||E.activeElement===u.current)&&(B=s(g.current)),B.length>0){const D=!!((N=b.current)!=null&&N.shiftKey&&((I=b.current)==null?void 0:I.key)==="Tab"),P=B[0],G=B[B.length-1];typeof P!="string"&&typeof G!="string"&&(D?G.focus():P.focus())}else L.focus()};E.addEventListener("focusin",M),E.addEventListener("keydown",C,!0);const R=setInterval(()=>{E.activeElement&&E.activeElement.tagName==="BODY"&&M()},50);return()=>{clearInterval(R),E.removeEventListener("focusin",M),E.removeEventListener("keydown",C,!0)}},[t,r,i,o,a,s]);const x=E=>{d.current===null&&(d.current=E.relatedTarget),p.current=!0,f.current=E.target;const C=e.props.onFocus;C&&C(E)},_=E=>{d.current===null&&(d.current=E.relatedTarget),p.current=!0};return V.jsxs(F.Fragment,{children:[V.jsx("div",{tabIndex:a?0:-1,onFocus:_,ref:c,"data-testid":"sentinelStart"}),F.cloneElement(e,{ref:v,onFocus:x}),V.jsx("div",{tabIndex:a?0:-1,onFocus:_,ref:u,"data-testid":"sentinelEnd"})]})}function Ust(n){return typeof n=="function"?n():n}const zst=F.forwardRef(function(e,t){const{children:r,container:i,disablePortal:s=!1}=e,[o,a]=F.useState(null),l=Wl(F.isValidElement(r)?A2(r):null,t);if(Df(()=>{s||a(Ust(i)||document.body)},[i,s]),Df(()=>{if(o&&!s)return cX(t,o),()=>{cX(t,null)}},[t,o,s]),s){if(F.isValidElement(r)){const c={ref:l};return F.cloneElement(r,c)}return r}return o&&PC.createPortal(r,o)}),Hst={entering:{opacity:1},entered:{opacity:1}},uP=F.forwardRef(function(e,t){const r=E2(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:o=!0,children:a,easing:l,in:c,onEnter:u,onEntered:d,onEntering:f,onExit:p,onExited:g,onExiting:v,style:b,timeout:x=i,TransitionComponent:_=Ff,...E}=e,C=F.useRef(null),M=Wl(C,A2(a),t),R=W=>q=>{if(W){const z=C.current;q===void 0?W(z):W(z,q)}},L=R(f),B=R((W,q)=>{tae(W);const z=qN({style:b,timeout:x,easing:l},{mode:"enter"});W.style.webkitTransition=r.transitions.create("opacity",z),W.style.transition=r.transitions.create("opacity",z),u&&u(W,q)}),N=R(d),I=R(v),D=R(W=>{const q=qN({style:b,timeout:x,easing:l},{mode:"exit"});W.style.webkitTransition=r.transitions.create("opacity",q),W.style.transition=r.transitions.create("opacity",q),p&&p(W)}),P=R(g),G=W=>{s&&s(C.current,W)};return V.jsx(_,{appear:o,in:c,nodeRef:C,onEnter:B,onEntered:N,onEntering:L,onExit:D,onExited:P,onExiting:I,addEndListener:G,timeout:x,...E,children:(W,{ownerState:q,...z})=>F.cloneElement(a,{style:{opacity:0,visibility:W==="exited"&&!c?"hidden":void 0,...Hst[W],...b,...a.props.style},ref:M,...z})})});function Vst(n){return Fr("MuiBackdrop",n)}yr("MuiBackdrop",["root","invisible"]);const Gst=n=>{const{classes:e,invisible:t}=n;return Pr({root:["root",t&&"invisible"]},Vst,e)},Wst=an("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),nae=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiBackdrop"}),{children:i,className:s,component:o="div",invisible:a=!1,open:l,components:c={},componentsProps:u={},slotProps:d={},slots:f={},TransitionComponent:p,transitionDuration:g,...v}=r,b={...r,component:o,invisible:a},x=Gst(b),_={transition:p,root:c.Root,...f},E={...u,...d},C={component:o,slots:_,slotProps:E},[M,R]=xi("root",{elementType:Wst,externalForwardedProps:C,className:Pn(x.root,s),ownerState:b}),[L,B]=xi("transition",{elementType:uP,externalForwardedProps:C,ownerState:b});return V.jsx(L,{in:l,timeout:g,...v,...B,children:V.jsx(M,{"aria-hidden":!0,...R,classes:x,ref:t,children:i})})});function jst(n){return typeof n=="function"?n():n}function Xst(n){return n?n.props.hasOwnProperty("in"):!1}const gX=()=>{},mM=new Dst;function qst(n){const{container:e,disableEscapeKeyDown:t=!1,disableScrollLock:r=!1,closeAfterTransition:i=!1,onTransitionEnter:s,onTransitionExited:o,children:a,onClose:l,open:c,rootRef:u}=n,d=F.useRef({}),f=F.useRef(null),p=F.useRef(null),g=Wl(p,u),[v,b]=F.useState(!c),x=Xst(a);let _=!0;(n["aria-hidden"]==="false"||n["aria-hidden"]===!1)&&(_=!1);const E=()=>dh(f.current),C=()=>(d.current.modalRef=p.current,d.current.mount=f.current,d.current),M=()=>{mM.mount(C(),{disableScrollLock:r}),p.current&&(p.current.scrollTop=0)},R=ev(()=>{const q=jst(e)||E().body;mM.add(C(),q),p.current&&M()}),L=()=>mM.isTopModal(C()),B=ev(q=>{f.current=q,q&&(c&&L()?M():p.current&&O_(p.current,_))}),N=F.useCallback(()=>{mM.remove(C(),_)},[_]);F.useEffect(()=>()=>{N()},[N]),F.useEffect(()=>{c?R():(!x||!i)&&N()},[c,N,x,i,R]);const I=q=>z=>{var J;(J=q.onKeyDown)==null||J.call(q,z),!(z.key!=="Escape"||z.which===229||!L())&&(t||(z.stopPropagation(),l&&l(z,"escapeKeyDown")))},D=q=>z=>{var J;(J=q.onClick)==null||J.call(q,z),z.target===z.currentTarget&&l&&l(z,"backdropClick")};return{getRootProps:(q={})=>{const z=joe(n);delete z.onTransitionEnter,delete z.onTransitionExited;const J={...z,...q};return{role:"presentation",...J,onKeyDown:I(J),ref:g}},getBackdropProps:(q={})=>{const z=q;return{"aria-hidden":!0,...z,onClick:D(z),open:c}},getTransitionProps:()=>{const q=()=>{b(!1),s&&s()},z=()=>{b(!0),o&&o(),i&&N()};return{onEnter:lX(q,(a==null?void 0:a.props.onEnter)??gX),onExited:lX(z,(a==null?void 0:a.props.onExited)??gX)}},rootRef:g,portalRef:B,isTopModal:L,exited:v,hasTransition:x}}function Kst(n){return Fr("MuiModal",n)}yr("MuiModal",["root","hidden","backdrop"]);const Yst=n=>{const{open:e,exited:t,classes:r}=n;return Pr({root:["root",!e&&t&&"hidden"],backdrop:["backdrop"]},Kst,r)},Jst=an("div",{name:"MuiModal",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.open&&t.exited&&e.hidden]}})(li(({theme:n})=>({position:"fixed",zIndex:(n.vars||n).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),Zst=an(nae,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),rae=F.forwardRef(function(e,t){const r=Gr({name:"MuiModal",props:e}),{BackdropComponent:i=Zst,BackdropProps:s,classes:o,className:a,closeAfterTransition:l=!1,children:c,container:u,component:d,components:f={},componentsProps:p={},disableAutoFocus:g=!1,disableEnforceFocus:v=!1,disableEscapeKeyDown:b=!1,disablePortal:x=!1,disableRestoreFocus:_=!1,disableScrollLock:E=!1,hideBackdrop:C=!1,keepMounted:M=!1,onClose:R,onTransitionEnter:L,onTransitionExited:B,open:N,slotProps:I={},slots:D={},theme:P,...G}=r,W={...r,closeAfterTransition:l,disableAutoFocus:g,disableEnforceFocus:v,disableEscapeKeyDown:b,disablePortal:x,disableRestoreFocus:_,disableScrollLock:E,hideBackdrop:C,keepMounted:M},{getRootProps:q,getBackdropProps:z,getTransitionProps:J,portalRef:Q,isTopModal:Y,exited:X,hasTransition:te}=qst({...W,rootRef:t}),ne={...W,exited:X},le=Yst(ne),ye={};if(c.props.tabIndex===void 0&&(ye.tabIndex="-1"),te){const{onEnter:Ke,onExited:pt}=J();ye.onEnter=Ke,ye.onExited=pt}const ue={slots:{root:f.Root,backdrop:f.Backdrop,...D},slotProps:{...p,...I}},[be,xe]=xi("root",{ref:t,elementType:Jst,externalForwardedProps:{...ue,...G,component:d},getSlotProps:q,ownerState:ne,className:Pn(a,le==null?void 0:le.root,!ne.open&&ne.exited&&(le==null?void 0:le.hidden))}),[Pe,ze]=xi("backdrop",{ref:s==null?void 0:s.ref,elementType:i,externalForwardedProps:ue,shouldForwardComponentProp:!0,additionalProps:s,getSlotProps:Ke=>z({...Ke,onClick:pt=>{Ke!=null&&Ke.onClick&&Ke.onClick(pt)}}),className:Pn(s==null?void 0:s.className,le==null?void 0:le.backdrop),ownerState:ne});return!M&&!N&&(!te||X)?null:V.jsx(zst,{ref:Q,container:u,disablePortal:x,children:V.jsxs(be,{...xe,children:[!C&&i?V.jsx(Pe,{...ze}):null,V.jsx(Pst,{disableEnforceFocus:v,disableAutoFocus:g,disableRestoreFocus:_,isEnabled:Y,open:N,children:F.cloneElement(c,ye)})]})})});function Qst(n){return Fr("MuiPaper",n)}yr("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const eot=n=>{const{square:e,elevation:t,variant:r,classes:i}=n,s={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${t}`]};return Pr(s,Qst,i)},tot=an("div",{name:"MuiPaper",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],!t.square&&e.rounded,t.variant==="elevation"&&e[`elevation${t.elevation}`]]}})(li(({theme:n})=>({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:n.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(n.vars||n).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),T2=F.forwardRef(function(e,t){var p;const r=Gr({props:e,name:"MuiPaper"}),i=E2(),{className:s,component:o="div",elevation:a=1,square:l=!1,variant:c="elevation",...u}=r,d={...r,component:o,elevation:a,square:l,variant:c},f=eot(d);return V.jsx(tot,{as:o,ownerState:d,className:Pn(f.root,s),ref:t,...u,style:{...c==="elevation"&&{"--Paper-shadow":(i.vars||i).shadows[a],...i.vars&&{"--Paper-overlay":(p=i.vars.overlays)==null?void 0:p[a]},...!i.vars&&i.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${or("#fff",JF(a))}, ${or("#fff",JF(a))})`}},...u.style}})});function not(n){return Fr("MuiPopover",n)}yr("MuiPopover",["root","paper"]);function yX(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.height/2:e==="bottom"&&(t=n.height),t}function vX(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.width/2:e==="right"&&(t=n.width),t}function bX(n){return[n.horizontal,n.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function gM(n){return typeof n=="function"?n():n}const rot=n=>{const{classes:e}=n;return Pr({root:["root"],paper:["paper"]},not,e)},iot=an(rae,{name:"MuiPopover",slot:"Root"})({}),iae=an(T2,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),sot=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiPopover"}),{action:i,anchorEl:s,anchorOrigin:o={vertical:"top",horizontal:"left"},anchorPosition:a,anchorReference:l="anchorEl",children:c,className:u,container:d,elevation:f=8,marginThreshold:p=16,open:g,PaperProps:v={},slots:b={},slotProps:x={},transformOrigin:_={vertical:"top",horizontal:"left"},TransitionComponent:E,transitionDuration:C="auto",TransitionProps:M={},disableScrollLock:R=!1,...L}=r,B=F.useRef(),N={...r,anchorOrigin:o,anchorReference:l,elevation:f,marginThreshold:p,transformOrigin:_,TransitionComponent:E,transitionDuration:C,TransitionProps:M},I=rot(N),D=F.useCallback(()=>{if(l==="anchorPosition")return a;const Ke=gM(s),dt=(Ke&&Ke.nodeType===1?Ke:dh(B.current).body).getBoundingClientRect();return{top:dt.top+yX(dt,o.vertical),left:dt.left+vX(dt,o.horizontal)}},[s,o.horizontal,o.vertical,a,l]),P=F.useCallback(Ke=>({vertical:yX(Ke,_.vertical),horizontal:vX(Ke,_.horizontal)}),[_.horizontal,_.vertical]),G=F.useCallback(Ke=>{const pt={width:Ke.offsetWidth,height:Ke.offsetHeight},dt=P(pt);if(l==="none")return{top:null,left:null,transformOrigin:bX(dt)};const pe=D();let Le=pe.top-dt.vertical,Ue=pe.left-dt.horizontal;const Ze=Le+pt.height,je=Ue+pt.width,lt=Yp(gM(s)),st=lt.innerHeight-p,at=lt.innerWidth-p;if(p!==null&&Le<p){const Ut=Le-p;Le-=Ut,dt.vertical+=Ut}else if(p!==null&&Ze>st){const Ut=Ze-st;Le-=Ut,dt.vertical+=Ut}if(p!==null&&Ue<p){const Ut=Ue-p;Ue-=Ut,dt.horizontal+=Ut}else if(je>at){const Ut=je-at;Ue-=Ut,dt.horizontal+=Ut}return{top:`${Math.round(Le)}px`,left:`${Math.round(Ue)}px`,transformOrigin:bX(dt)}},[s,l,D,P,p]),[W,q]=F.useState(g),z=F.useCallback(()=>{const Ke=B.current;if(!Ke)return;const pt=G(Ke);pt.top!==null&&Ke.style.setProperty("top",pt.top),pt.left!==null&&(Ke.style.left=pt.left),Ke.style.transformOrigin=pt.transformOrigin,q(!0)},[G]);F.useEffect(()=>(R&&window.addEventListener("scroll",z),()=>window.removeEventListener("scroll",z)),[s,R,z]);const J=()=>{z()},Q=()=>{q(!1)};F.useEffect(()=>{g&&z()}),F.useImperativeHandle(i,()=>g?{updatePosition:()=>{z()}}:null,[g,z]),F.useEffect(()=>{if(!g)return;const Ke=Voe(()=>{z()}),pt=Yp(gM(s));return pt.addEventListener("resize",Ke),()=>{Ke.clear(),pt.removeEventListener("resize",Ke)}},[s,g,z]);let Y=C;const X={slots:{transition:E,...b},slotProps:{transition:M,paper:v,...x}},[te,ne]=xi("transition",{elementType:cP,externalForwardedProps:X,ownerState:N,getSlotProps:Ke=>({...Ke,onEntering:(pt,dt)=>{var pe;(pe=Ke.onEntering)==null||pe.call(Ke,pt,dt),J()},onExited:pt=>{var dt;(dt=Ke.onExited)==null||dt.call(Ke,pt),Q()}}),additionalProps:{appear:!0,in:g}});C==="auto"&&!te.muiSupportAuto&&(Y=void 0);const le=d||(s?dh(gM(s)).body:void 0),[ye,{slots:ue,slotProps:be,...xe}]=xi("root",{ref:t,elementType:iot,externalForwardedProps:{...X,...L},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:b.backdrop},slotProps:{backdrop:Zoe(typeof x.backdrop=="function"?x.backdrop(N):x.backdrop,{invisible:!0})},container:le,open:g},ownerState:N,className:Pn(I.root,u)}),[Pe,ze]=xi("paper",{ref:B,className:I.paper,elementType:iae,externalForwardedProps:X,shouldForwardComponentProp:!0,additionalProps:{elevation:f,style:W?void 0:{opacity:0}},ownerState:N});return V.jsx(ye,{...xe,...!HN(ye)&&{slots:ue,slotProps:be,disableScrollLock:R},children:V.jsx(te,{...ne,timeout:Y,children:V.jsx(Pe,{...ze,children:c})})})});function oot(n){return Fr("MuiMenu",n)}yr("MuiMenu",["root","paper","list"]);const aot={vertical:"top",horizontal:"right"},lot={vertical:"top",horizontal:"left"},cot=n=>{const{classes:e}=n;return Pr({root:["root"],paper:["paper"],list:["list"]},oot,e)},uot=an(sot,{shouldForwardProp:n=>jl(n)||n==="classes",name:"MuiMenu",slot:"Root"})({}),dot=an(iae,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),hot=an(Ast,{name:"MuiMenu",slot:"List"})({outline:0}),fot=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiMenu"}),{autoFocus:i=!0,children:s,className:o,disableAutoFocusItem:a=!1,MenuListProps:l={},onClose:c,open:u,PaperProps:d={},PopoverClasses:f,transitionDuration:p="auto",TransitionProps:{onEntering:g,...v}={},variant:b="selectedMenu",slots:x={},slotProps:_={},...E}=r,C=Int(),M={...r,autoFocus:i,disableAutoFocusItem:a,MenuListProps:l,onEntering:g,PaperProps:d,transitionDuration:p,TransitionProps:v,variant:b},R=cot(M),L=i&&!a&&u,B=F.useRef(null),N=(Y,X)=>{B.current&&B.current.adjustStyleForScrollbar(Y,{direction:C?"rtl":"ltr"}),g&&g(Y,X)},I=Y=>{Y.key==="Tab"&&(Y.preventDefault(),c&&c(Y,"tabKeyDown"))};let D=-1;F.Children.map(s,(Y,X)=>{F.isValidElement(Y)&&(Y.props.disabled||(b==="selectedMenu"&&Y.props.selected||D===-1)&&(D=X))});const P={slots:x,slotProps:{list:l,transition:v,paper:d,..._}},G=Sst({elementType:x.root,externalSlotProps:_.root,ownerState:M,className:[R.root,o]}),[W,q]=xi("paper",{className:R.paper,elementType:dot,externalForwardedProps:P,shouldForwardComponentProp:!0,ownerState:M}),[z,J]=xi("list",{className:Pn(R.list,l.className),elementType:hot,shouldForwardComponentProp:!0,externalForwardedProps:P,getSlotProps:Y=>({...Y,onKeyDown:X=>{var te;I(X),(te=Y.onKeyDown)==null||te.call(Y,X)}}),ownerState:M}),Q=typeof P.slotProps.transition=="function"?P.slotProps.transition(M):P.slotProps.transition;return V.jsx(uot,{onClose:c,anchorOrigin:{vertical:"bottom",horizontal:C?"right":"left"},transformOrigin:C?aot:lot,slots:{root:x.root,paper:W,backdrop:x.backdrop,...x.transition&&{transition:x.transition}},slotProps:{root:G,paper:q,backdrop:typeof _.backdrop=="function"?_.backdrop(M):_.backdrop,transition:{...Q,onEntering:(...Y)=>{var X;N(...Y),(X=Q==null?void 0:Q.onEntering)==null||X.call(Q,...Y)}}},open:u,ref:t,transitionDuration:p,ownerState:M,...E,classes:f,children:V.jsx(z,{actions:B,autoFocus:i&&(D===-1||a),autoFocusItem:L,variant:b,...J,children:s})})});function pot(n){return Fr("MuiNativeSelect",n)}const I6=yr("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),mot=n=>{const{classes:e,variant:t,disabled:r,multiple:i,open:s,error:o}=n,a={select:["select",t,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${Rn(t)}`,s&&"iconOpen",r&&"disabled"]};return Pr(a,pot,e)},sae=an("select",{name:"MuiNativeSelect"})(({theme:n})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${I6.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},variants:[{props:({ownerState:e})=>e.variant!=="filled"&&e.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}}}]})),got=an(sae,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:jl,overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.select,e[t.variant],t.error&&e.error,{[`&.${I6.multiple}`]:e.multiple}]}})({}),oae=an("svg",{name:"MuiNativeSelect"})(({theme:n})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,[`&.${I6.disabled}`]:{color:(n.vars||n).palette.action.disabled},variants:[{props:({ownerState:e})=>e.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),yot=an(oae,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${Rn(t.variant)}`],t.open&&e.iconOpen]}})({}),vot=F.forwardRef(function(e,t){const{className:r,disabled:i,error:s,IconComponent:o,inputRef:a,variant:l="standard",...c}=e,u={...e,disabled:i,variant:l,error:s},d=mot(u);return V.jsxs(F.Fragment,{children:[V.jsx(got,{ownerState:u,className:Pn(d.select,r),disabled:i,ref:a||t,...c}),e.multiple?null:V.jsx(yot,{as:o,ownerState:u,className:d.icon})]})});function aae(n){return Fr("MuiSelect",n)}const Ny=yr("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var xX;const bot=an(sae,{name:"MuiSelect",slot:"Select",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`&.${Ny.select}`]:e.select},{[`&.${Ny.select}`]:e[t.variant]},{[`&.${Ny.error}`]:e.error},{[`&.${Ny.multiple}`]:e.multiple}]}})({[`&.${Ny.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),xot=an(oae,{name:"MuiSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${Rn(t.variant)}`],t.open&&e.iconOpen]}})({}),Sot=an("input",{shouldForwardProp:n=>Uoe(n)&&n!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function SX(n,e){return typeof e=="object"&&e!==null?n===e:String(n)===String(e)}function wot(n){return n==null||typeof n=="string"&&!n.trim()}const _ot=n=>{const{classes:e,variant:t,disabled:r,multiple:i,open:s,error:o}=n,a={select:["select",t,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${Rn(t)}`,s&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return Pr(a,aae,e)},Cot=F.forwardRef(function(e,t){var on,tn,zt,fn;const{"aria-describedby":r,"aria-label":i,autoFocus:s,autoWidth:o,children:a,className:l,defaultOpen:c,defaultValue:u,disabled:d,displayEmpty:f,error:p=!1,IconComponent:g,inputRef:v,labelId:b,MenuProps:x={},multiple:_,name:E,onBlur:C,onChange:M,onClose:R,onFocus:L,onOpen:B,open:N,readOnly:I,renderValue:D,required:P,SelectDisplayProps:G={},tabIndex:W,type:q,value:z,variant:J="standard",...Q}=e,[Y,X]=nP({controlled:z,default:u,name:"Select"}),[te,ne]=nP({controlled:N,default:c,name:"Select"}),le=F.useRef(null),ye=F.useRef(null),[ue,be]=F.useState(null),{current:xe}=F.useRef(N!=null),[Pe,ze]=F.useState(),Ke=Wl(t,v),pt=F.useCallback(Te=>{ye.current=Te,Te&&be(Te)},[]),dt=ue==null?void 0:ue.parentNode;F.useImperativeHandle(Ke,()=>({focus:()=>{ye.current.focus()},node:le.current,value:Y}),[Y]),F.useEffect(()=>{c&&te&&ue&&!xe&&(ze(o?null:dt.clientWidth),ye.current.focus())},[ue,o]),F.useEffect(()=>{s&&ye.current.focus()},[s]),F.useEffect(()=>{if(!b)return;const Te=dh(ye.current).getElementById(b);if(Te){const Xe=()=>{getSelection().isCollapsed&&ye.current.focus()};return Te.addEventListener("click",Xe),()=>{Te.removeEventListener("click",Xe)}}},[b]);const pe=(Te,Xe)=>{Te?B&&B(Xe):R&&R(Xe),xe||(ze(o?null:dt.clientWidth),ne(Te))},Le=Te=>{Te.button===0&&(Te.preventDefault(),ye.current.focus(),pe(!0,Te))},Ue=Te=>{pe(!1,Te)},Ze=F.Children.toArray(a),je=Te=>{const Xe=Ze.find(Lt=>Lt.props.value===Te.target.value);Xe!==void 0&&(X(Xe.props.value),M&&M(Te,Xe))},lt=Te=>Xe=>{let Lt;if(Xe.currentTarget.hasAttribute("tabindex")){if(_){Lt=Array.isArray(Y)?Y.slice():[];const en=Y.indexOf(Te.props.value);en===-1?Lt.push(Te.props.value):Lt.splice(en,1)}else Lt=Te.props.value;if(Te.props.onClick&&Te.props.onClick(Xe),Y!==Lt&&(X(Lt),M)){const en=Xe.nativeEvent||Xe,Vt=new en.constructor(en.type,en);Object.defineProperty(Vt,"target",{writable:!0,value:{value:Lt,name:E}}),M(Vt,Te)}_||pe(!1,Xe)}},st=Te=>{I||[" ","ArrowUp","ArrowDown","Enter"].includes(Te.key)&&(Te.preventDefault(),pe(!0,Te))},at=ue!==null&&te,Ut=Te=>{!at&&C&&(Object.defineProperty(Te,"target",{writable:!0,value:{value:Y,name:E}}),C(Te))};delete Q["aria-invalid"];let mt,ce;const re=[];let $e=!1;(VN({value:Y})||f)&&(D?mt=D(Y):$e=!0);const qe=Ze.map(Te=>{if(!F.isValidElement(Te))return null;let Xe;if(_){if(!Array.isArray(Y))throw new Error(Kp(2));Xe=Y.some(Lt=>SX(Lt,Te.props.value)),Xe&&$e&&re.push(Te.props.children)}else Xe=SX(Y,Te.props.value),Xe&&$e&&(ce=Te.props.children);return F.cloneElement(Te,{"aria-selected":Xe?"true":"false",onClick:lt(Te),onKeyUp:Lt=>{Lt.key===" "&&Lt.preventDefault(),Te.props.onKeyUp&&Te.props.onKeyUp(Lt)},role:"option",selected:Xe,value:void 0,"data-value":Te.props.value})});$e&&(_?re.length===0?mt=null:mt=re.reduce((Te,Xe,Lt)=>(Te.push(Xe),Lt<re.length-1&&Te.push(", "),Te),[]):mt=ce);let ot=Pe;!o&&xe&&ue&&(ot=dt.clientWidth);let et;typeof W<"u"?et=W:et=d?null:0;const Ft=G.id||(E?`mui-component-select-${E}`:void 0),At={...e,variant:J,value:Y,open:at,error:p},Ct=_ot(At),qt={...x.PaperProps,...typeof((on=x.slotProps)==null?void 0:on.paper)=="function"?x.slotProps.paper(At):(tn=x.slotProps)==null?void 0:tn.paper},yt={...x.MenuListProps,...typeof((zt=x.slotProps)==null?void 0:zt.list)=="function"?x.slotProps.list(At):(fn=x.slotProps)==null?void 0:fn.list},Mt=hS();return V.jsxs(F.Fragment,{children:[V.jsx(bot,{as:"div",ref:pt,tabIndex:et,role:"combobox","aria-controls":at?Mt:void 0,"aria-disabled":d?"true":void 0,"aria-expanded":at?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[b,Ft].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":P?"true":void 0,"aria-invalid":p?"true":void 0,onKeyDown:st,onMouseDown:d||I?null:Le,onBlur:Ut,onFocus:L,...G,ownerState:At,className:Pn(G.className,Ct.select,l),id:Ft,children:wot(mt)?xX||(xX=V.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):mt}),V.jsx(Sot,{"aria-invalid":p,value:Array.isArray(Y)?Y.join(","):Y,name:E,ref:le,"aria-hidden":!0,onChange:je,tabIndex:-1,disabled:d,className:Ct.nativeInput,autoFocus:s,required:P,...Q,ownerState:At}),V.jsx(xot,{as:g,className:Ct.icon,ownerState:At}),V.jsx(fot,{id:`menu-${E||""}`,anchorEl:dt,open:at,onClose:Ue,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...x,slotProps:{...x.slotProps,list:{"aria-labelledby":b,role:"listbox","aria-multiselectable":_?"true":void 0,disableListWrap:!0,id:Mt,...yt},paper:{...qt,style:{minWidth:ot,...qt!=null?qt.style:null}}},children:qe})]})}),Eot=La(V.jsx("path",{d:"M7 10l5 5 5-5z"}));function Aot(n){return Fr("MuiInput",n)}const Jw={...R1,...yr("MuiInput",["root","underline","input"])},Tot=n=>{const{classes:e,disableUnderline:t}=n,i=Pr({root:["root",!t&&"underline"],input:["input"]},Aot,e);return{...e,...i}},Mot=an(ak,{shouldForwardProp:n=>jl(n)||n==="classes",name:"MuiInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...sk(n,e),!t.disableUnderline&&e.underline]}})(li(({theme:n})=>{let t=n.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(t=n.alpha(n.vars.palette.common.onBackground,n.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Jw.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Jw.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Jw.disabled}, .${Jw.error}):before`]:{borderBottom:`2px solid ${(n.vars||n).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${t}`}},[`&.${Jw.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(n.palette).filter(Ul()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(n.vars||n).palette[r].main}`}}}))]}})),Rot=an(lk,{name:"MuiInput",slot:"Input",overridesResolver:ok})({}),D6=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiInput"}),{disableUnderline:i=!1,components:s={},componentsProps:o,fullWidth:a=!1,inputComponent:l="input",multiline:c=!1,slotProps:u,slots:d={},type:f="text",...p}=r,g=Tot(r),b={root:{ownerState:{disableUnderline:i}}},x=u??o?aa(u??o,b):b,_=d.root??s.Root??Mot,E=d.input??s.Input??Rot;return V.jsx(A6,{slots:{root:_,input:E},slotProps:x,fullWidth:a,inputComponent:l,multiline:c,ref:t,type:f,...p,classes:g})});D6.muiName="Input";function Not(n){return Fr("MuiFilledInput",n)}const gy={...R1,...yr("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},Iot=n=>{const{classes:e,disableUnderline:t,startAdornment:r,endAdornment:i,size:s,hiddenLabel:o,multiline:a}=n,l={root:["root",!t&&"underline",r&&"adornedStart",i&&"adornedEnd",s==="small"&&`size${Rn(s)}`,o&&"hiddenLabel",a&&"multiline"],input:["input"]},c=Pr(l,Not,e);return{...e,...c}},Dot=an(ak,{shouldForwardProp:n=>jl(n)||n==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...sk(n,e),!t.disableUnderline&&e.underline]}})(li(({theme:n})=>{const e=n.palette.mode==="light",t=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",s=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),"&:hover":{backgroundColor:n.vars?n.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r}},[`&.${gy.focused}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r},[`&.${gy.disabled}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.disabledBg:s},variants:[{props:({ownerState:o})=>!o.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${gy.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${gy.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${n.vars?n.alpha(n.vars.palette.common.onBackground,n.vars.opacity.inputUnderline):t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${gy.disabled}, .${gy.error}):before`]:{borderBottom:`1px solid ${(n.vars||n).palette.text.primary}`},[`&.${gy.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(n.palette).filter(Ul()).map(([o])=>{var a;return{props:{disableUnderline:!1,color:o},style:{"&::after":{borderBottom:`2px solid ${(a=(n.vars||n).palette[o])==null?void 0:a.main}`}}}}),{props:({ownerState:o})=>o.startAdornment,style:{paddingLeft:12}},{props:({ownerState:o})=>o.endAdornment,style:{paddingRight:12}},{props:({ownerState:o})=>o.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:o,size:a})=>o.multiline&&a==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel&&o.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),kot=an(lk,{name:"MuiFilledInput",slot:"Input",overridesResolver:ok})(li(({theme:n})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...n.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:e})=>e.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}},{props:({ownerState:e})=>e.hiddenLabel&&e.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:e})=>e.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),k6=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiFilledInput"}),{disableUnderline:i=!1,components:s={},componentsProps:o,fullWidth:a=!1,hiddenLabel:l,inputComponent:c="input",multiline:u=!1,slotProps:d,slots:f={},type:p="text",...g}=r,v={...r,disableUnderline:i,fullWidth:a,inputComponent:c,multiline:u,type:p},b=Iot(r),x={root:{ownerState:v},input:{ownerState:v}},_=d??o?aa(x,d??o):x,E=f.root??s.Root??Dot,C=f.input??s.Input??kot;return V.jsx(A6,{slots:{root:E,input:C},slotProps:_,fullWidth:a,inputComponent:c,multiline:u,ref:t,type:p,...g,classes:b})});k6.muiName="Input";const Oot=n=>{const{classes:e}=n,r=Pr({root:["root"]},aae,e);return{...e,...r}},O6={name:"MuiSelect",slot:"Root",shouldForwardProp:n=>jl(n)&&n!=="variant"},Bot=an(D6,O6)(""),$ot=an(ck,O6)(""),Lot=an(k6,O6)(""),B6=F.forwardRef(function(e,t){const r=Gr({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:s,classes:o={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=Eot,id:d,input:f,inputProps:p,label:g,labelId:v,MenuProps:b,multiple:x=!1,native:_=!1,onClose:E,onOpen:C,open:M,renderValue:R,SelectDisplayProps:L,variant:B="outlined",...N}=r,I=_?vot:Cot,D=i0(),P=Gv({props:r,muiFormControl:D,states:["variant","error"]}),G=P.variant||B,W={...r,variant:G,classes:o},q=Oot(W),{root:z,...J}=q,Q=f||{standard:V.jsx(Bot,{ownerState:W}),outlined:V.jsx($ot,{label:g,ownerState:W}),filled:V.jsx(Lot,{ownerState:W})}[G],Y=Wl(t,A2(Q));return V.jsx(F.Fragment,{children:F.cloneElement(Q,{inputComponent:I,inputProps:{children:s,error:P.error,IconComponent:u,variant:G,type:void 0,multiple:x,..._?{id:d}:{autoWidth:i,defaultOpen:l,displayEmpty:c,labelId:v,MenuProps:b,onClose:E,onOpen:C,open:M,renderValue:R,SelectDisplayProps:{id:d,...L}},...p,classes:p?aa(J,p.classes):J,...f?f.props.inputProps:{}},...(x&&_||c)&&G==="outlined"?{notched:!0}:{},ref:Y,className:Pn(Q.props.className,a,q.root),...!f&&{variant:G},...N})})});B6.muiName="Select";const wX=yr("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),Fot=La(V.jsx("path",{d:"m12 5.83 2.46 2.46c.39.39 1.02.39 1.41 0s.39-1.02 0-1.41L12.7 3.7a.996.996 0 0 0-1.41 0L8.12 6.88c-.39.39-.39 1.02 0 1.41s1.02.39 1.41 0zm0 12.34-2.46-2.46a.996.996 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l3.17 3.18c.39.39 1.02.39 1.41 0l3.17-3.17c.39-.39.39-1.02 0-1.41a.996.996 0 0 0-1.41 0z"})),Pot={MuiMenuItem:{styleOverrides:{root:({theme:n})=>({borderRadius:(n.vars||n).shape.borderRadius,padding:"6px 8px",[`&.${cg.focusVisible}`]:{backgroundColor:"transparent"},[`&.${cg.selected}`]:{[`&.${cg.focusVisible}`]:{backgroundColor:or(n.palette.action.selected,.3)}}})}},MuiMenu:{styleOverrides:{list:{gap:"0px",[`&.${oP.root}`]:{margin:"0 -8px"}},paper:({theme:n})=>({marginTop:"4px",borderRadius:(n.vars||n).shape.borderRadius,border:`1px solid ${(n.vars||n).palette.divider}`,backgroundImage:"none",background:"hsl(0, 0%, 100%)",boxShadow:"hsla(220, 30%, 5%, 0.07) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.07) 0px 8px 16px -5px",[`& .${N6.root}`]:{"&.Mui-selected":{backgroundColor:or(n.palette.action.selected,.3)}},...n.applyStyles("dark",{background:Yt[900],boxShadow:"hsla(220, 30%, 5%, 0.7) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.8) 0px 8px 16px -5px"})})}},MuiSelect:{defaultProps:{IconComponent:F.forwardRef((n,e)=>V.jsx(Fot,{fontSize:"small",...n,ref:e}))},styleOverrides:{root:({theme:n})=>({borderRadius:(n.vars||n).shape.borderRadius,border:"1px solid",borderColor:Yt[200],backgroundColor:(n.vars||n).palette.background.paper,boxShadow:"inset 0 1px 0 1px hsla(220, 0%, 100%, 0.6), inset 0 -1px 0 1px hsla(220, 35%, 90%, 0.5)","&:hover":{borderColor:Yt[300],backgroundColor:(n.vars||n).palette.background.paper,boxShadow:"none"},[`&.${Ny.focused}`]:{outlineOffset:0,borderColor:Yt[400]},"&:before, &:after":{display:"none"},...n.applyStyles("dark",{borderRadius:(n.vars||n).shape.borderRadius,borderColor:Yt[700],backgroundColor:(n.vars||n).palette.background.paper,boxShadow:`inset 0 1px 0 1px ${or(Yt[700],.15)}, inset 0 -1px 0 1px hsla(220, 0%, 0%, 0.7)`,"&:hover":{borderColor:or(Yt[700],.7),backgroundColor:(n.vars||n).palette.background.paper,boxShadow:"none"},[`&.${Ny.focused}`]:{outlineOffset:0,borderColor:Yt[900]},"&:before, &:after":{display:"none"}})}),select:({theme:n})=>({display:"flex",alignItems:"center",...n.applyStyles("dark",{display:"flex",alignItems:"center","&:focus-visible":{backgroundColor:Yt[900]}})})}},MuiLink:{defaultProps:{underline:"none"},styleOverrides:{root:({theme:n})=>({color:(n.vars||n).palette.text.primary,fontWeight:500,position:"relative",textDecoration:"none",width:"fit-content","&::before":{content:'""',position:"absolute",width:"100%",height:"1px",bottom:0,left:0,backgroundColor:(n.vars||n).palette.text.secondary,opacity:.3,transition:"width 0.3s ease, opacity 0.3s ease"},"&:hover::before":{width:0},"&:focus-visible":{outline:`3px solid ${or(Ln[500],.5)}`,outlineOffset:"4px",borderRadius:"2px"}})}},MuiDrawer:{styleOverrides:{paper:({theme:n})=>({backgroundColor:(n.vars||n).palette.background.default})}},MuiPaginationItem:{styleOverrides:{root:({theme:n})=>({"&.Mui-selected":{color:"white",backgroundColor:(n.vars||n).palette.grey[900]},...n.applyStyles("dark",{"&.Mui-selected":{color:"black",backgroundColor:(n.vars||n).palette.grey[50]}})})}},MuiTabs:{styleOverrides:{root:{minHeight:"fit-content"},indicator:({theme:n})=>({backgroundColor:(n.vars||n).palette.grey[800],...n.applyStyles("dark",{backgroundColor:(n.vars||n).palette.grey[200]})})}},MuiTab:{styleOverrides:{root:({theme:n})=>({padding:"6px 8px",marginBottom:"8px",textTransform:"none",minWidth:"fit-content",minHeight:"fit-content",color:(n.vars||n).palette.text.secondary,borderRadius:(n.vars||n).shape.borderRadius,border:"1px solid",borderColor:"transparent",":hover":{color:(n.vars||n).palette.text.primary,backgroundColor:Yt[100],borderColor:Yt[200]},[`&.${wX.selected}`]:{color:Yt[900]},...n.applyStyles("dark",{":hover":{color:(n.vars||n).palette.text.primary,backgroundColor:Yt[800],borderColor:Yt[700]},[`&.${wX.selected}`]:{color:"#fff"}})})}},MuiStepConnector:{styleOverrides:{line:({theme:n})=>({borderTop:"1px solid",borderColor:(n.vars||n).palette.divider,flex:1,borderRadius:"99px"})}},MuiStepIcon:{styleOverrides:{root:({theme:n})=>({color:"transparent",border:`1px solid ${Yt[400]}`,width:12,height:12,borderRadius:"50%","& text":{display:"none"},"&.Mui-active":{border:"none",color:(n.vars||n).palette.primary.main},"&.Mui-completed":{border:"none",color:(n.vars||n).palette.success.main},...n.applyStyles("dark",{border:`1px solid ${Yt[700]}`,"&.Mui-active":{border:"none",color:(n.vars||n).palette.primary.light},"&.Mui-completed":{border:"none",color:(n.vars||n).palette.success.light}}),variants:[{props:{completed:!0},style:{width:12,height:12}}]})}},MuiStepLabel:{styleOverrides:{label:({theme:n})=>({"&.Mui-completed":{opacity:.6,...n.applyStyles("dark",{opacity:.5})}})}}},Uot={MuiAccordion:{defaultProps:{elevation:0,disableGutters:!0},styleOverrides:{root:({theme:n})=>({padding:4,overflow:"clip",backgroundColor:(n.vars||n).palette.background.default,border:"1px solid",borderColor:(n.vars||n).palette.divider,":before":{backgroundColor:"transparent"},"&:not(:last-of-type)":{borderBottom:"none"},"&:first-of-type":{borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(n.vars||n).shape.borderRadius,borderBottomRightRadius:(n.vars||n).shape.borderRadius}})}},MuiAccordionSummary:{styleOverrides:{root:({theme:n})=>({border:"none",borderRadius:8,"&:hover":{backgroundColor:Yt[50]},"&:focus-visible":{backgroundColor:"transparent"},...n.applyStyles("dark",{"&:hover":{backgroundColor:Yt[800]}})})}},MuiAccordionDetails:{styleOverrides:{root:{mb:20,border:"none"}}},MuiPaper:{defaultProps:{elevation:0}},MuiCard:{styleOverrides:{root:({theme:n})=>({padding:16,gap:16,transition:"all 100ms ease",backgroundColor:Yt[50],borderRadius:(n.vars||n).shape.borderRadius,border:`1px solid ${(n.vars||n).palette.divider}`,boxShadow:"none",...n.applyStyles("dark",{backgroundColor:Yt[800]}),variants:[{props:{variant:"outlined"},style:{border:`1px solid ${(n.vars||n).palette.divider}`,boxShadow:"none",background:"hsl(0, 0%, 100%)",...n.applyStyles("dark",{background:or(Yt[900],.4)})}}]})}},MuiCardContent:{styleOverrides:{root:{padding:0,"&:last-child":{paddingBottom:0}}}},MuiCardHeader:{styleOverrides:{root:{padding:0}}},MuiCardActions:{styleOverrides:{root:{padding:0}}}};function $6(n){const{children:e,disableCustomTheme:t,themeComponents:r}=n,i=F.useMemo(()=>t?{}:C2({cssVariables:{colorSchemeSelector:"data-mui-color-scheme",cssVarPrefix:"template"},colorSchemes:Uit,typography:zit,shadows:Git,shape:Hit,components:{...Wit,...dst,...hst,...Pot,...Uot,...r}}),[t,r]);return t?V.jsx(F.Fragment,{children:e}):V.jsx(Xrt,{theme:i,disableTransitionOnChange:!0,children:e})}$6.propTypes={children:vi.node,disableCustomTheme:vi.bool,themeComponents:vi.object};function lae(n){const{mode:e,setMode:t}=Wrt();return e?V.jsxs(B6,{value:e,onChange:r=>t(r.target.value),SelectDisplayProps:{"data-screenshot":"toggle-mode"},...n,children:[V.jsx(k$,{value:"system",children:"System"}),V.jsx(k$,{value:"light",children:"Light"}),V.jsx(k$,{value:"dark",children:"Dark"})]}):null}function cae(n,e){return function(){return n.apply(e,arguments)}}const{toString:zot}=Object.prototype,{getPrototypeOf:L6}=Object,{iterator:hk,toStringTag:uae}=Symbol,fk=(n=>e=>{const t=zot.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),yh=n=>(n=n.toLowerCase(),e=>fk(e)===n),pk=n=>e=>typeof e===n,{isArray:fS}=Array,N1=pk("undefined");function M2(n){return n!==null&&!N1(n)&&n.constructor!==null&&!N1(n.constructor)&&_c(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const dae=yh("ArrayBuffer");function Hot(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&dae(n.buffer),e}const Vot=pk("string"),_c=pk("function"),hae=pk("number"),R2=n=>n!==null&&typeof n=="object",Got=n=>n===!0||n===!1,jM=n=>{if(fk(n)!=="object")return!1;const e=L6(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(uae in n)&&!(hk in n)},Wot=n=>{if(!R2(n)||M2(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},jot=yh("Date"),Xot=yh("File"),qot=yh("Blob"),Kot=yh("FileList"),Yot=n=>R2(n)&&_c(n.pipe),Jot=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||_c(n.append)&&((e=fk(n))==="formdata"||e==="object"&&_c(n.toString)&&n.toString()==="[object FormData]"))},Zot=yh("URLSearchParams"),[Qot,eat,tat,nat]=["ReadableStream","Request","Response","Headers"].map(yh),rat=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function N2(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),fS(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{if(M2(n))return;const s=t?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,n[a],a,n)}}function fae(n,e){if(M2(n))return null;e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const Vy=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,pae=n=>!N1(n)&&n!==Vy;function dP(){const{caseless:n,skipUndefined:e}=pae(this)&&this||{},t={},r=(i,s)=>{const o=n&&fae(t,s)||s;jM(t[o])&&jM(i)?t[o]=dP(t[o],i):jM(i)?t[o]=dP({},i):fS(i)?t[o]=i.slice():(!e||!N1(i))&&(t[o]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&N2(arguments[i],r);return t}const iat=(n,e,t,{allOwnKeys:r}={})=>(N2(e,(i,s)=>{t&&_c(i)?n[s]=cae(i,t):n[s]=i},{allOwnKeys:r}),n),sat=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),oat=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},aat=(n,e,t,r)=>{let i,s,o;const a={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),s=i.length;s-- >0;)o=i[s],(!r||r(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&L6(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},lat=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},cat=n=>{if(!n)return null;if(fS(n))return n;let e=n.length;if(!hae(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},uat=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&L6(Uint8Array)),dat=(n,e)=>{const r=(n&&n[hk]).call(n);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(n,s[0],s[1])}},hat=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},fat=yh("HTMLFormElement"),pat=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),_X=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),mat=yh("RegExp"),mae=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};N2(t,(i,s)=>{let o;(o=e(i,s,n))!==!1&&(r[s]=o||i)}),Object.defineProperties(n,r)},gat=n=>{mae(n,(e,t)=>{if(_c(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(_c(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},yat=(n,e)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return fS(n)?r(n):r(String(n).split(e)),t},vat=()=>{},bat=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function xat(n){return!!(n&&_c(n.append)&&n[uae]==="FormData"&&n[hk])}const Sat=n=>{const e=new Array(10),t=(r,i)=>{if(R2(r)){if(e.indexOf(r)>=0)return;if(M2(r))return r;if(!("toJSON"in r)){e[i]=r;const s=fS(r)?[]:{};return N2(r,(o,a)=>{const l=t(o,i+1);!N1(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return t(n,0)},wat=yh("AsyncFunction"),_at=n=>n&&(R2(n)||_c(n))&&_c(n.then)&&_c(n.catch),gae=((n,e)=>n?setImmediate:e?((t,r)=>(Vy.addEventListener("message",({source:i,data:s})=>{i===Vy&&s===t&&r.length&&r.shift()()},!1),i=>{r.push(i),Vy.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",_c(Vy.postMessage)),Cat=typeof queueMicrotask<"u"?queueMicrotask.bind(Vy):typeof process<"u"&&process.nextTick||gae,Eat=n=>n!=null&&_c(n[hk]),wt={isArray:fS,isArrayBuffer:dae,isBuffer:M2,isFormData:Jot,isArrayBufferView:Hot,isString:Vot,isNumber:hae,isBoolean:Got,isObject:R2,isPlainObject:jM,isEmptyObject:Wot,isReadableStream:Qot,isRequest:eat,isResponse:tat,isHeaders:nat,isUndefined:N1,isDate:jot,isFile:Xot,isBlob:qot,isRegExp:mat,isFunction:_c,isStream:Yot,isURLSearchParams:Zot,isTypedArray:uat,isFileList:Kot,forEach:N2,merge:dP,extend:iat,trim:rat,stripBOM:sat,inherits:oat,toFlatObject:aat,kindOf:fk,kindOfTest:yh,endsWith:lat,toArray:cat,forEachEntry:dat,matchAll:hat,isHTMLForm:fat,hasOwnProperty:_X,hasOwnProp:_X,reduceDescriptors:mae,freezeMethods:gat,toObjectSet:yat,toCamelCase:pat,noop:vat,toFiniteNumber:bat,findKey:fae,global:Vy,isContextDefined:pae,isSpecCompliantForm:xat,toJSONObject:Sat,isAsyncFn:wat,isThenable:_at,setImmediate:gae,asap:Cat,isIterable:Eat};function Cr(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}wt.inherits(Cr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:wt.toJSONObject(this.config),code:this.code,status:this.status}}});const yae=Cr.prototype,vae={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{vae[n]={value:n}});Object.defineProperties(Cr,vae);Object.defineProperty(yae,"isAxiosError",{value:!0});Cr.from=(n,e,t,r,i,s)=>{const o=Object.create(yae);wt.toFlatObject(n,o,function(u){return u!==Error.prototype},c=>c!=="isAxiosError");const a=n&&n.message?n.message:"Error",l=e==null&&n?n.code:e;return Cr.call(o,a,l,t,r,i),n&&o.cause==null&&Object.defineProperty(o,"cause",{value:n,configurable:!0}),o.name=n&&n.name||"Error",s&&Object.assign(o,s),o};const Aat=null;function hP(n){return wt.isPlainObject(n)||wt.isArray(n)}function bae(n){return wt.endsWith(n,"[]")?n.slice(0,-2):n}function CX(n,e,t){return n?n.concat(e).map(function(i,s){return i=bae(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function Tat(n){return wt.isArray(n)&&!n.some(hP)}const Mat=wt.toFlatObject(wt,{},null,function(e){return/^is[A-Z]/.test(e)});function mk(n,e,t){if(!wt.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=wt.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,b){return!wt.isUndefined(b[v])});const r=t.metaTokens,i=t.visitor||u,s=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&wt.isSpecCompliantForm(e);if(!wt.isFunction(i))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(wt.isDate(g))return g.toISOString();if(wt.isBoolean(g))return g.toString();if(!l&&wt.isBlob(g))throw new Cr("Blob is not supported. Use a Buffer instead.");return wt.isArrayBuffer(g)||wt.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,v,b){let x=g;if(g&&!b&&typeof g=="object"){if(wt.endsWith(v,"{}"))v=r?v:v.slice(0,-2),g=JSON.stringify(g);else if(wt.isArray(g)&&Tat(g)||(wt.isFileList(g)||wt.endsWith(v,"[]"))&&(x=wt.toArray(g)))return v=bae(v),x.forEach(function(E,C){!(wt.isUndefined(E)||E===null)&&e.append(o===!0?CX([v],C,s):o===null?v:v+"[]",c(E))}),!1}return hP(g)?!0:(e.append(CX(b,v,s),c(g)),!1)}const d=[],f=Object.assign(Mat,{defaultVisitor:u,convertValue:c,isVisitable:hP});function p(g,v){if(!wt.isUndefined(g)){if(d.indexOf(g)!==-1)throw Error("Circular reference detected in "+v.join("."));d.push(g),wt.forEach(g,function(x,_){(!(wt.isUndefined(x)||x===null)&&i.call(e,x,wt.isString(_)?_.trim():_,v,f))===!0&&p(x,v?v.concat(_):[_])}),d.pop()}}if(!wt.isObject(n))throw new TypeError("data must be an object");return p(n),e}function EX(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function F6(n,e){this._pairs=[],n&&mk(n,this,e)}const xae=F6.prototype;xae.append=function(e,t){this._pairs.push([e,t])};xae.toString=function(e){const t=e?function(r){return e.call(this,r,EX)}:EX;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function Rat(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Sae(n,e,t){if(!e)return n;const r=t&&t.encode||Rat;wt.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let s;if(i?s=i(e,t):s=wt.isURLSearchParams(e)?e.toString():new F6(e,t).toString(r),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class AX{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){wt.forEach(this.handlers,function(r){r!==null&&e(r)})}}const wae={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Nat=typeof URLSearchParams<"u"?URLSearchParams:F6,Iat=typeof FormData<"u"?FormData:null,Dat=typeof Blob<"u"?Blob:null,kat={isBrowser:!0,classes:{URLSearchParams:Nat,FormData:Iat,Blob:Dat},protocols:["http","https","file","blob","url","data"]},P6=typeof window<"u"&&typeof document<"u",fP=typeof navigator=="object"&&navigator||void 0,Oat=P6&&(!fP||["ReactNative","NativeScript","NS"].indexOf(fP.product)<0),Bat=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",$at=P6&&window.location.href||"http://localhost",Lat=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:P6,hasStandardBrowserEnv:Oat,hasStandardBrowserWebWorkerEnv:Bat,navigator:fP,origin:$at},Symbol.toStringTag,{value:"Module"})),nl={...Lat,...kat};function Fat(n,e){return mk(n,new nl.classes.URLSearchParams,{visitor:function(t,r,i,s){return nl.isNode&&wt.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function Pat(n){return wt.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Uat(n){const e={},t=Object.keys(n);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],e[s]=n[s];return e}function _ae(n){function e(t,r,i,s){let o=t[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=t.length;return o=!o&&wt.isArray(i)?i.length:o,l?(wt.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!wt.isObject(i[o]))&&(i[o]=[]),e(t,r,i[o],s)&&wt.isArray(i[o])&&(i[o]=Uat(i[o])),!a)}if(wt.isFormData(n)&&wt.isFunction(n.entries)){const t={};return wt.forEachEntry(n,(r,i)=>{e(Pat(r),i,t,0)}),t}return null}function zat(n,e,t){if(wt.isString(n))try{return(e||JSON.parse)(n),wt.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const I2={transitional:wae,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=wt.isObject(e);if(s&&wt.isHTMLForm(e)&&(e=new FormData(e)),wt.isFormData(e))return i?JSON.stringify(_ae(e)):e;if(wt.isArrayBuffer(e)||wt.isBuffer(e)||wt.isStream(e)||wt.isFile(e)||wt.isBlob(e)||wt.isReadableStream(e))return e;if(wt.isArrayBufferView(e))return e.buffer;if(wt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Fat(e,this.formSerializer).toString();if((a=wt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return mk(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),zat(e)):e}],transformResponse:[function(e){const t=this.transitional||I2.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(wt.isResponse(e)||wt.isReadableStream(e))return e;if(e&&wt.isString(e)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?Cr.from(a,Cr.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:nl.classes.FormData,Blob:nl.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};wt.forEach(["delete","get","head","post","put","patch"],n=>{I2.headers[n]={}});const Hat=wt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Vat=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||e[t]&&Hat[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},TX=Symbol("internals");function Zw(n){return n&&String(n).trim().toLowerCase()}function XM(n){return n===!1||n==null?n:wt.isArray(n)?n.map(XM):String(n)}function Gat(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const Wat=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function L$(n,e,t,r,i){if(wt.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!wt.isString(e)){if(wt.isString(r))return e.indexOf(r)!==-1;if(wt.isRegExp(r))return r.test(e)}}function jat(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function Xat(n,e){const t=wt.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let Cc=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function s(a,l,c){const u=Zw(l);if(!u)throw new Error("header name must be a non-empty string");const d=wt.findKey(i,u);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||l]=XM(a))}const o=(a,l)=>wt.forEach(a,(c,u)=>s(c,u,l));if(wt.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(wt.isString(e)&&(e=e.trim())&&!Wat(e))o(Vat(e),t);else if(wt.isObject(e)&&wt.isIterable(e)){let a={},l,c;for(const u of e){if(!wt.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?wt.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}o(a,t)}else e!=null&&s(t,e,r);return this}get(e,t){if(e=Zw(e),e){const r=wt.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return Gat(i);if(wt.isFunction(t))return t.call(this,i,r);if(wt.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Zw(e),e){const r=wt.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||L$(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function s(o){if(o=Zw(o),o){const a=wt.findKey(r,o);a&&(!t||L$(r,r[a],a,t))&&(delete r[a],i=!0)}}return wt.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!e||L$(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,r={};return wt.forEach(this,(i,s)=>{const o=wt.findKey(r,s);if(o){t[o]=XM(i),delete t[s];return}const a=e?jat(s):String(s).trim();a!==s&&delete t[s],t[a]=XM(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return wt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&wt.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[TX]=this[TX]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Zw(o);r[a]||(Xat(i,o),r[a]=!0)}return wt.isArray(e)?e.forEach(s):s(e),this}};Cc.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);wt.reduceDescriptors(Cc.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});wt.freezeMethods(Cc);function F$(n,e){const t=this||I2,r=e||t,i=Cc.from(r.headers);let s=r.data;return wt.forEach(n,function(a){s=a.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function Cae(n){return!!(n&&n.__CANCEL__)}function pS(n,e,t){Cr.call(this,n??"canceled",Cr.ERR_CANCELED,e,t),this.name="CanceledError"}wt.inherits(pS,Cr,{__CANCEL__:!0});function Eae(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Cr("Request failed with status code "+t.status,[Cr.ERR_BAD_REQUEST,Cr.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function qat(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function Kat(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[s];o||(o=c),t[i]=l,r[i]=c;let d=s,f=0;for(;d!==i;)f+=t[d++],d=d%n;if(i=(i+1)%n,i===s&&(s=(s+1)%n),c-o<e)return;const p=u&&c-u;return p?Math.round(f*1e3/p):void 0}}function Yat(n,e){let t=0,r=1e3/e,i,s;const o=(c,u=Date.now())=>{t=u,i=null,s&&(clearTimeout(s),s=null),n(...c)};return[(...c)=>{const u=Date.now(),d=u-t;d>=r?o(c,u):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-d)))},()=>i&&o(i)]}const KN=(n,e,t=3)=>{let r=0;const i=Kat(50,250);return Yat(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),u=o<=a;r=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};n(d)},t)},MX=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},RX=n=>(...e)=>wt.asap(()=>n(...e)),Jat=nl.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,nl.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(nl.origin),nl.navigator&&/(msie|trident)/i.test(nl.navigator.userAgent)):()=>!0,Zat=nl.hasStandardBrowserEnv?{write(n,e,t,r,i,s){const o=[n+"="+encodeURIComponent(e)];wt.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),wt.isString(r)&&o.push("path="+r),wt.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Qat(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function elt(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Aae(n,e,t){let r=!Qat(e);return n&&(r||t==!1)?elt(n,e):e}const NX=n=>n instanceof Cc?{...n}:n;function Tv(n,e){e=e||{};const t={};function r(c,u,d,f){return wt.isPlainObject(c)&&wt.isPlainObject(u)?wt.merge.call({caseless:f},c,u):wt.isPlainObject(u)?wt.merge({},u):wt.isArray(u)?u.slice():u}function i(c,u,d,f){if(wt.isUndefined(u)){if(!wt.isUndefined(c))return r(void 0,c,d,f)}else return r(c,u,d,f)}function s(c,u){if(!wt.isUndefined(u))return r(void 0,u)}function o(c,u){if(wt.isUndefined(u)){if(!wt.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,d){if(d in e)return r(c,u);if(d in n)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,d)=>i(NX(c),NX(u),d,!0)};return wt.forEach(Object.keys({...n,...e}),function(u){const d=l[u]||i,f=d(n[u],e[u],u);wt.isUndefined(f)&&d!==a||(t[u]=f)}),t}const Tae=n=>{const e=Tv({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;if(e.headers=o=Cc.from(o),e.url=Sae(Aae(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),wt.isFormData(t)){if(nl.hasStandardBrowserEnv||nl.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(wt.isFunction(t.getHeaders)){const l=t.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([u,d])=>{c.includes(u.toLowerCase())&&o.set(u,d)})}}if(nl.hasStandardBrowserEnv&&(r&&wt.isFunction(r)&&(r=r(e)),r||r!==!1&&Jat(e.url))){const l=i&&s&&Zat.read(s);l&&o.set(i,l)}return e},tlt=typeof XMLHttpRequest<"u",nlt=tlt&&function(n){return new Promise(function(t,r){const i=Tae(n);let s=i.data;const o=Cc.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,u,d,f,p,g;function v(){p&&p(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function x(){if(!b)return;const E=Cc.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),M={data:!a||a==="text"||a==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:E,config:n,request:b};Eae(function(L){t(L),v()},function(L){r(L),v()},M),b=null}"onloadend"in b?b.onloadend=x:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(x)},b.onabort=function(){b&&(r(new Cr("Request aborted",Cr.ECONNABORTED,n,b)),b=null)},b.onerror=function(C){const M=C&&C.message?C.message:"Network Error",R=new Cr(M,Cr.ERR_NETWORK,n,b);R.event=C||null,r(R),b=null},b.ontimeout=function(){let C=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const M=i.transitional||wae;i.timeoutErrorMessage&&(C=i.timeoutErrorMessage),r(new Cr(C,M.clarifyTimeoutError?Cr.ETIMEDOUT:Cr.ECONNABORTED,n,b)),b=null},s===void 0&&o.setContentType(null),"setRequestHeader"in b&&wt.forEach(o.toJSON(),function(C,M){b.setRequestHeader(M,C)}),wt.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),a&&a!=="json"&&(b.responseType=i.responseType),c&&([f,g]=KN(c,!0),b.addEventListener("progress",f)),l&&b.upload&&([d,p]=KN(l),b.upload.addEventListener("progress",d),b.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(u=E=>{b&&(r(!E||E.type?new pS(null,n,b):E),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const _=qat(i.url);if(_&&nl.protocols.indexOf(_)===-1){r(new Cr("Unsupported protocol "+_+":",Cr.ERR_BAD_REQUEST,n));return}b.send(s||null)})},rlt=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const u=c instanceof Error?c:this.reason;r.abort(u instanceof Cr?u:new pS(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,s(new Cr(`timeout ${e} of ms exceeded`,Cr.ETIMEDOUT))},e);const a=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),n=null)};n.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>wt.asap(a),l}},ilt=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},slt=async function*(n,e){for await(const t of olt(n))yield*ilt(t,e)},olt=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},IX=(n,e,t,r)=>{const i=slt(n,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await i.next();if(c){a(),l.close();return}let d=u.byteLength;if(t){let f=s+=d;t(f)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},DX=64*1024,{isFunction:yM}=wt,alt=(({Request:n,Response:e})=>({Request:n,Response:e}))(wt.global),{ReadableStream:kX,TextEncoder:OX}=wt.global,BX=(n,...e)=>{try{return!!n(...e)}catch{return!1}},llt=n=>{n=wt.merge.call({skipUndefined:!0},alt,n);const{fetch:e,Request:t,Response:r}=n,i=e?yM(e):typeof fetch=="function",s=yM(t),o=yM(r);if(!i)return!1;const a=i&&yM(kX),l=i&&(typeof OX=="function"?(g=>v=>g.encode(v))(new OX):async g=>new Uint8Array(await new t(g).arrayBuffer())),c=s&&a&&BX(()=>{let g=!1;const v=new t(nl.origin,{body:new kX,method:"POST",get duplex(){return g=!0,"half"}}).headers.has("Content-Type");return g&&!v}),u=o&&a&&BX(()=>wt.isReadableStream(new r("").body)),d={stream:u&&(g=>g.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!d[g]&&(d[g]=(v,b)=>{let x=v&&v[g];if(x)return x.call(v);throw new Cr(`Response type '${g}' is not supported`,Cr.ERR_NOT_SUPPORT,b)})});const f=async g=>{if(g==null)return 0;if(wt.isBlob(g))return g.size;if(wt.isSpecCompliantForm(g))return(await new t(nl.origin,{method:"POST",body:g}).arrayBuffer()).byteLength;if(wt.isArrayBufferView(g)||wt.isArrayBuffer(g))return g.byteLength;if(wt.isURLSearchParams(g)&&(g=g+""),wt.isString(g))return(await l(g)).byteLength},p=async(g,v)=>{const b=wt.toFiniteNumber(g.getContentLength());return b??f(v)};return async g=>{let{url:v,method:b,data:x,signal:_,cancelToken:E,timeout:C,onDownloadProgress:M,onUploadProgress:R,responseType:L,headers:B,withCredentials:N="same-origin",fetchOptions:I}=Tae(g),D=e||fetch;L=L?(L+"").toLowerCase():"text";let P=rlt([_,E&&E.toAbortSignal()],C),G=null;const W=P&&P.unsubscribe&&(()=>{P.unsubscribe()});let q;try{if(R&&c&&b!=="get"&&b!=="head"&&(q=await p(B,x))!==0){let te=new t(v,{method:"POST",body:x,duplex:"half"}),ne;if(wt.isFormData(x)&&(ne=te.headers.get("content-type"))&&B.setContentType(ne),te.body){const[le,ye]=MX(q,KN(RX(R)));x=IX(te.body,DX,le,ye)}}wt.isString(N)||(N=N?"include":"omit");const z=s&&"credentials"in t.prototype,J={...I,signal:P,method:b.toUpperCase(),headers:B.normalize().toJSON(),body:x,duplex:"half",credentials:z?N:void 0};G=s&&new t(v,J);let Q=await(s?D(G,I):D(v,J));const Y=u&&(L==="stream"||L==="response");if(u&&(M||Y&&W)){const te={};["status","statusText","headers"].forEach(ue=>{te[ue]=Q[ue]});const ne=wt.toFiniteNumber(Q.headers.get("content-length")),[le,ye]=M&&MX(ne,KN(RX(M),!0))||[];Q=new r(IX(Q.body,DX,le,()=>{ye&&ye(),W&&W()}),te)}L=L||"text";let X=await d[wt.findKey(d,L)||"text"](Q,g);return!Y&&W&&W(),await new Promise((te,ne)=>{Eae(te,ne,{data:X,headers:Cc.from(Q.headers),status:Q.status,statusText:Q.statusText,config:g,request:G})})}catch(z){throw W&&W(),z&&z.name==="TypeError"&&/Load failed|fetch/i.test(z.message)?Object.assign(new Cr("Network Error",Cr.ERR_NETWORK,g,G),{cause:z.cause||z}):Cr.from(z,z&&z.code,g,G)}}},clt=new Map,Mae=n=>{let e=n?n.env:{};const{fetch:t,Request:r,Response:i}=e,s=[r,i,t];let o=s.length,a=o,l,c,u=clt;for(;a--;)l=s[a],c=u.get(l),c===void 0&&u.set(l,c=a?new Map:llt(e)),u=c;return c};Mae();const pP={http:Aat,xhr:nlt,fetch:{get:Mae}};wt.forEach(pP,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const $X=n=>`- ${n}`,ult=n=>wt.isFunction(n)||n===null||n===!1,Rae={getAdapter:(n,e)=>{n=wt.isArray(n)?n:[n];const{length:t}=n;let r,i;const s={};for(let o=0;o<t;o++){r=n[o];let a;if(i=r,!ult(r)&&(i=pP[(a=String(r)).toLowerCase()],i===void 0))throw new Cr(`Unknown adapter '${a}'`);if(i&&(wt.isFunction(i)||(i=i.get(e))))break;s[a||"#"+o]=i}if(!i){const o=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=t?o.length>1?`since :
`+o.map($X).join(`
`):" "+$X(o[0]):"as no adapter specified";throw new Cr("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i},adapters:pP};function P$(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new pS(null,n)}function LX(n){return P$(n),n.headers=Cc.from(n.headers),n.data=F$.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Rae.getAdapter(n.adapter||I2.adapter,n)(n).then(function(r){return P$(n),r.data=F$.call(n,n.transformResponse,r),r.headers=Cc.from(r.headers),r},function(r){return Cae(r)||(P$(n),r&&r.response&&(r.response.data=F$.call(n,n.transformResponse,r.response),r.response.headers=Cc.from(r.response.headers))),Promise.reject(r)})}const Nae="1.12.2",gk={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{gk[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const FX={};gk.transitional=function(e,t,r){function i(s,o){return"[Axios v"+Nae+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new Cr(i(o," has been removed"+(t?" in "+t:"")),Cr.ERR_DEPRECATED);return t&&!FX[o]&&(FX[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};gk.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function dlt(n,e,t){if(typeof n!="object")throw new Cr("options must be an object",Cr.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=n[s],l=a===void 0||o(a,s,n);if(l!==!0)throw new Cr("option "+s+" must be "+l,Cr.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Cr("Unknown option "+s,Cr.ERR_BAD_OPTION)}}const qM={assertOptions:dlt,validators:gk},Qh=qM.validators;let tv=class{constructor(e){this.defaults=e||{},this.interceptors={request:new AX,response:new AX}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Tv(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&qM.assertOptions(r,{silentJSONParsing:Qh.transitional(Qh.boolean),forcedJSONParsing:Qh.transitional(Qh.boolean),clarifyTimeoutError:Qh.transitional(Qh.boolean)},!1),i!=null&&(wt.isFunction(i)?t.paramsSerializer={serialize:i}:qM.assertOptions(i,{encode:Qh.function,serialize:Qh.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),qM.assertOptions(t,{baseUrl:Qh.spelling("baseURL"),withXsrfToken:Qh.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&wt.merge(s.common,s[t.method]);s&&wt.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),t.headers=Cc.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(t)===!1||(l=l&&v.synchronous,a.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let u,d=0,f;if(!l){const g=[LX.bind(this),void 0];for(g.unshift(...a),g.push(...c),f=g.length,u=Promise.resolve(t);d<f;)u=u.then(g[d++],g[d++]);return u}f=a.length;let p=t;for(;d<f;){const g=a[d++],v=a[d++];try{p=g(p)}catch(b){v.call(this,b);break}}try{u=LX.call(this,p)}catch(g){return Promise.reject(g)}for(d=0,f=c.length;d<f;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=Tv(this.defaults,e);const t=Aae(e.baseURL,e.url,e.allowAbsoluteUrls);return Sae(t,e.params,e.paramsSerializer)}};wt.forEach(["delete","get","head","options"],function(e){tv.prototype[e]=function(t,r){return this.request(Tv(r||{},{method:e,url:t,data:(r||{}).data}))}});wt.forEach(["post","put","patch"],function(e){function t(r){return function(s,o,a){return this.request(Tv(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}tv.prototype[e]=t(),tv.prototype[e+"Form"]=t(!0)});let hlt=class Iae{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new pS(s,o,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Iae(function(i){e=i}),cancel:e}}};function flt(n){return function(t){return n.apply(null,t)}}function plt(n){return wt.isObject(n)&&n.isAxiosError===!0}const mP={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(mP).forEach(([n,e])=>{mP[e]=n});function Dae(n){const e=new tv(n),t=cae(tv.prototype.request,e);return wt.extend(t,tv.prototype,e,{allOwnKeys:!0}),wt.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return Dae(Tv(n,i))},t}const Js=Dae(I2);Js.Axios=tv;Js.CanceledError=pS;Js.CancelToken=hlt;Js.isCancel=Cae;Js.VERSION=Nae;Js.toFormData=mk;Js.AxiosError=Cr;Js.Cancel=Js.CanceledError;Js.all=function(e){return Promise.all(e)};Js.spread=flt;Js.isAxiosError=plt;Js.mergeConfig=Tv;Js.AxiosHeaders=Cc;Js.formToJSON=n=>_ae(wt.isHTMLForm(n)?new FormData(n):n);Js.getAdapter=Rae.getAdapter;Js.HttpStatusCode=mP;Js.default=Js;const{Axios:Vut,AxiosError:Gut,CanceledError:Wut,isCancel:jut,CancelToken:Xut,VERSION:qut,all:Kut,Cancel:Yut,isAxiosError:Jut,spread:Zut,toFormData:Qut,AxiosHeaders:edt,HttpStatusCode:tdt,formToJSON:ndt,getAdapter:rdt,mergeConfig:idt}=Js,mlt=yr("MuiBox",["root"]),glt=C2(),Gy=cnt({themeId:Sf,defaultTheme:glt,defaultClassName:mlt.root,generateClassName:woe.generate});function ylt(n){return Fr("MuiButton",n)}const yy=yr("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),vlt=F.createContext({}),blt=F.createContext(void 0),xlt=n=>{const{color:e,disableElevation:t,fullWidth:r,size:i,variant:s,loading:o,loadingPosition:a,classes:l}=n,c={root:["root",o&&"loading",s,`${s}${Rn(e)}`,`size${Rn(i)}`,`${s}Size${Rn(i)}`,`color${Rn(e)}`,t&&"disableElevation",r&&"fullWidth",o&&`loadingPosition${Rn(a)}`],startIcon:["icon","startIcon",`iconSize${Rn(i)}`],endIcon:["icon","endIcon",`iconSize${Rn(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},u=Pr(c,ylt,l);return{...l,...u}},kae=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],Slt=an(uk,{shouldForwardProp:n=>jl(n)||n==="classes",name:"MuiButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],e[`${t.variant}${Rn(t.color)}`],e[`size${Rn(t.size)}`],e[`${t.variant}Size${Rn(t.size)}`],t.color==="inherit"&&e.colorInherit,t.disableElevation&&e.disableElevation,t.fullWidth&&e.fullWidth,t.loading&&e.loading]}})(li(({theme:n})=>{const e=n.palette.mode==="light"?n.palette.grey[300]:n.palette.grey[800],t=n.palette.mode==="light"?n.palette.grey.A100:n.palette.grey[700];return{...n.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create(["background-color","box-shadow","border-color","color"],{duration:n.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${yy.disabled}`]:{color:(n.vars||n).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(n.vars||n).shadows[2],"&:hover":{boxShadow:(n.vars||n).shadows[4],"@media (hover: none)":{boxShadow:(n.vars||n).shadows[2]}},"&:active":{boxShadow:(n.vars||n).shadows[8]},[`&.${yy.focusVisible}`]:{boxShadow:(n.vars||n).shadows[6]},[`&.${yy.disabled}`]:{color:(n.vars||n).palette.action.disabled,boxShadow:(n.vars||n).shadows[0],backgroundColor:(n.vars||n).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${yy.disabled}`]:{border:`1px solid ${(n.vars||n).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(n.palette).filter(Ul()).map(([r])=>({props:{color:r},style:{"--variant-textColor":(n.vars||n).palette[r].main,"--variant-outlinedColor":(n.vars||n).palette[r].main,"--variant-outlinedBorder":n.alpha((n.vars||n).palette[r].main,.5),"--variant-containedColor":(n.vars||n).palette[r].contrastText,"--variant-containedBg":(n.vars||n).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(n.vars||n).palette[r].dark,"--variant-textBg":n.alpha((n.vars||n).palette[r].main,(n.vars||n).palette.action.hoverOpacity),"--variant-outlinedBorder":(n.vars||n).palette[r].main,"--variant-outlinedBg":n.alpha((n.vars||n).palette[r].main,(n.vars||n).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":n.vars?n.vars.palette.Button.inheritContainedBg:e,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":n.vars?n.vars.palette.Button.inheritContainedHoverBg:t,"--variant-textBg":n.alpha((n.vars||n).palette.text.primary,(n.vars||n).palette.action.hoverOpacity),"--variant-outlinedBg":n.alpha((n.vars||n).palette.text.primary,(n.vars||n).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:n.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:n.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:n.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:n.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:n.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:n.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${yy.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${yy.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:n.transitions.create(["background-color","box-shadow","border-color"],{duration:n.transitions.duration.short}),[`&.${yy.loading}`]:{color:"transparent"}}}]}})),wlt=an("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.startIcon,t.loading&&e.startIconLoadingStart,e[`iconSize${Rn(t.size)}`]]}})(({theme:n})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:n.transitions.create(["opacity"],{duration:n.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...kae]})),_lt=an("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.endIcon,t.loading&&e.endIconLoadingEnd,e[`iconSize${Rn(t.size)}`]]}})(({theme:n})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:n.transitions.create(["opacity"],{duration:n.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...kae]})),Clt=an("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:n})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(n.vars||n).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),PX=an("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),_g=F.forwardRef(function(e,t){const r=F.useContext(vlt),i=F.useContext(blt),s=xC(r,e),o=Gr({props:s,name:"MuiButton"}),{children:a,color:l="primary",component:c="button",className:u,disabled:d=!1,disableElevation:f=!1,disableFocusRipple:p=!1,endIcon:g,focusVisibleClassName:v,fullWidth:b=!1,id:x,loading:_=null,loadingIndicator:E,loadingPosition:C="center",size:M="medium",startIcon:R,type:L,variant:B="text",...N}=o,I=hS(x),D=E??V.jsx(dk,{"aria-labelledby":I,color:"inherit",size:16}),P={...o,color:l,component:c,disabled:d,disableElevation:f,disableFocusRipple:p,fullWidth:b,loading:_,loadingIndicator:D,loadingPosition:C,size:M,type:L,variant:B},G=xlt(P),W=(R||_&&C==="start")&&V.jsx(wlt,{className:G.startIcon,ownerState:P,children:R||V.jsx(PX,{className:G.loadingIconPlaceholder,ownerState:P})}),q=(g||_&&C==="end")&&V.jsx(_lt,{className:G.endIcon,ownerState:P,children:g||V.jsx(PX,{className:G.loadingIconPlaceholder,ownerState:P})}),z=i||"",J=typeof _=="boolean"?V.jsx("span",{className:G.loadingWrapper,style:{display:"contents"},children:_&&V.jsx(Clt,{className:G.loadingIndicator,ownerState:P,children:D})}):null;return V.jsxs(Slt,{ownerState:P,className:Pn(r.className,G.root,u,z),component:c,disabled:d||_,focusRipple:!p,focusVisibleClassName:Pn(G.focusVisible,v),ref:t,type:L,id:_?I:x,...N,classes:G,children:[W,C!=="end"&&J,a,C==="end"&&J,q]})});function Elt(n){return Fr("MuiCard",n)}yr("MuiCard",["root"]);const Alt=n=>{const{classes:e}=n;return Pr({root:["root"]},Elt,e)},Tlt=an(T2,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),Oae=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiCard"}),{className:i,raised:s=!1,...o}=r,a={...r,raised:s},l=Alt(a);return V.jsx(Tlt,{className:Pn(l.root,i),elevation:s?8:void 0,ref:t,ownerState:a,...o})});function Mlt(n){return Fr("PrivateSwitchBase",n)}yr("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Rlt=n=>{const{classes:e,checked:t,disabled:r,edge:i}=n,s={root:["root",t&&"checked",r&&"disabled",i&&`edge${Rn(i)}`],input:["input"]};return Pr(s,Mlt,e)},Nlt=an(uk,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:n,ownerState:e})=>n==="start"&&e.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:n,ownerState:e})=>n==="end"&&e.size!=="small",style:{marginRight:-12}}]}),Ilt=an("input",{name:"MuiSwitchBase",shouldForwardProp:jl})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Dlt=F.forwardRef(function(e,t){const{autoFocus:r,checked:i,checkedIcon:s,defaultChecked:o,disabled:a,disableFocusRipple:l=!1,edge:c=!1,icon:u,id:d,inputProps:f,inputRef:p,name:g,onBlur:v,onChange:b,onFocus:x,readOnly:_,required:E=!1,tabIndex:C,type:M,value:R,slots:L={},slotProps:B={},...N}=e,[I,D]=nP({controlled:i,default:!!o,name:"SwitchBase",state:"checked"}),P=i0(),G=ue=>{x&&x(ue),P&&P.onFocus&&P.onFocus(ue)},W=ue=>{v&&v(ue),P&&P.onBlur&&P.onBlur(ue)},q=ue=>{if(ue.nativeEvent.defaultPrevented)return;const be=ue.target.checked;D(be),b&&b(ue,be)};let z=a;P&&typeof z>"u"&&(z=P.disabled);const J=M==="checkbox"||M==="radio",Q={...e,checked:I,disabled:z,disableFocusRipple:l,edge:c},Y=Rlt(Q),X={slots:L,slotProps:{input:f,...B}},[te,ne]=xi("root",{ref:t,elementType:Nlt,className:Y.root,shouldForwardComponentProp:!0,externalForwardedProps:{...X,component:"span",...N},getSlotProps:ue=>({...ue,onFocus:be=>{var xe;(xe=ue.onFocus)==null||xe.call(ue,be),G(be)},onBlur:be=>{var xe;(xe=ue.onBlur)==null||xe.call(ue,be),W(be)}}),ownerState:Q,additionalProps:{centerRipple:!0,focusRipple:!l,disabled:z,role:void 0,tabIndex:null}}),[le,ye]=xi("input",{ref:p,elementType:Ilt,className:Y.input,externalForwardedProps:X,getSlotProps:ue=>({...ue,onChange:be=>{var xe;(xe=ue.onChange)==null||xe.call(ue,be),q(be)}}),ownerState:Q,additionalProps:{autoFocus:r,checked:i,defaultChecked:o,disabled:z,id:J?d:void 0,name:g,readOnly:_,required:E,tabIndex:C,type:M,...M==="checkbox"&&R===void 0?{}:{value:R}}});return V.jsxs(te,{...ne,children:[V.jsx(le,{...ye}),I?s:u]})}),klt=La(V.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),Olt=La(V.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),Blt=La(V.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function $lt(n){return Fr("MuiCheckbox",n)}const U$=yr("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Llt=n=>{const{classes:e,indeterminate:t,color:r,size:i}=n,s={root:["root",t&&"indeterminate",`color${Rn(r)}`,`size${Rn(i)}`]},o=Pr(s,$lt,e);return{...e,...o}},Flt=an(Dlt,{shouldForwardProp:n=>jl(n)||n==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.indeterminate&&e.indeterminate,e[`size${Rn(t.size)}`],t.color!=="default"&&e[`color${Rn(t.color)}`]]}})(li(({theme:n})=>({color:(n.vars||n).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:n.alpha((n.vars||n).palette.action.active,(n.vars||n).palette.action.hoverOpacity)}}},...Object.entries(n.palette).filter(Ul()).map(([e])=>({props:{color:e,disableRipple:!1},style:{"&:hover":{backgroundColor:n.alpha((n.vars||n).palette[e].main,(n.vars||n).palette.action.hoverOpacity)}}})),...Object.entries(n.palette).filter(Ul()).map(([e])=>({props:{color:e},style:{[`&.${U$.checked}, &.${U$.indeterminate}`]:{color:(n.vars||n).palette[e].main},[`&.${U$.disabled}`]:{color:(n.vars||n).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),Plt=V.jsx(Olt,{}),Ult=V.jsx(klt,{}),zlt=V.jsx(Blt,{}),Bae=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiCheckbox"}),{checkedIcon:i=Plt,color:s="primary",icon:o=Ult,indeterminate:a=!1,indeterminateIcon:l=zlt,inputProps:c,size:u="medium",disableRipple:d=!1,className:f,slots:p={},slotProps:g={},...v}=r,b=a?l:o,x=a?l:i,_={...r,disableRipple:d,color:s,indeterminate:a,size:u},E=Llt(_),C=g.input??c,[M,R]=xi("root",{ref:t,elementType:Flt,className:Pn(E.root,f),shouldForwardComponentProp:!0,externalForwardedProps:{slots:p,slotProps:g,...v},ownerState:_,additionalProps:{type:"checkbox",icon:F.cloneElement(b,{fontSize:b.props.fontSize??u}),checkedIcon:F.cloneElement(x,{fontSize:x.props.fontSize??u}),disableRipple:d,slots:p,slotProps:{input:Zoe(typeof C=="function"?C(_):C,{"data-indeterminate":a})}}});return V.jsx(M,{...R,classes:E})});function Hlt(n){return Fr("MuiFormLabel",n)}const B_=yr("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Vlt=n=>{const{classes:e,color:t,focused:r,disabled:i,error:s,filled:o,required:a}=n,l={root:["root",`color${Rn(t)}`,i&&"disabled",s&&"error",o&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",s&&"error"]};return Pr(l,Hlt,e)},Glt=an("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color==="secondary"&&e.colorSecondary,t.filled&&e.filled]}})(li(({theme:n})=>({color:(n.vars||n).palette.text.secondary,...n.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(n.palette).filter(Ul()).map(([e])=>({props:{color:e},style:{[`&.${B_.focused}`]:{color:(n.vars||n).palette[e].main}}})),{props:{},style:{[`&.${B_.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${B_.error}`]:{color:(n.vars||n).palette.error.main}}}]}))),Wlt=an("span",{name:"MuiFormLabel",slot:"Asterisk"})(li(({theme:n})=>({[`&.${B_.error}`]:{color:(n.vars||n).palette.error.main}}))),Qx=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiFormLabel"}),{children:i,className:s,color:o,component:a="label",disabled:l,error:c,filled:u,focused:d,required:f,...p}=r,g=i0(),v=Gv({props:r,muiFormControl:g,states:["color","required","focused","disabled","error","filled"]}),b={...r,color:v.color||"primary",component:a,disabled:v.disabled,error:v.error,filled:v.filled,focused:v.focused,required:v.required},x=Vlt(b);return V.jsxs(Glt,{as:a,ownerState:b,className:Pn(x.root,s),ref:t,...p,children:[i,v.required&&V.jsxs(Wlt,{ownerState:b,"aria-hidden":!0,className:x.asterisk,children:["","*"]})]})});function jlt(n){return Fr("MuiFormControl",n)}yr("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Xlt=n=>{const{classes:e,margin:t,fullWidth:r}=n,i={root:["root",t!=="none"&&`margin${Rn(t)}`,r&&"fullWidth"]};return Pr(i,jlt,e)},qlt=an("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`margin${Rn(t.margin)}`],t.fullWidth&&e.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),e1=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiFormControl"}),{children:i,className:s,color:o="primary",component:a="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:d=!1,hiddenLabel:f=!1,margin:p="none",required:g=!1,size:v="medium",variant:b="outlined",...x}=r,_={...r,color:o,component:a,disabled:l,error:c,fullWidth:d,hiddenLabel:f,margin:p,required:g,size:v,variant:b},E=Xlt(_),[C,M]=F.useState(()=>{let q=!1;return i&&F.Children.forEach(i,z=>{if(!I$(z,["Input","Select"]))return;const J=I$(z,["Select"])?z.props.input:z;J&&nit(J.props)&&(q=!0)}),q}),[R,L]=F.useState(()=>{let q=!1;return i&&F.Children.forEach(i,z=>{I$(z,["Input","Select"])&&(VN(z.props,!0)||VN(z.props.inputProps,!0))&&(q=!0)}),q}),[B,N]=F.useState(!1);l&&B&&N(!1);const I=u!==void 0&&!l?u:B;let D;F.useRef(!1);const P=F.useCallback(()=>{L(!0)},[]),G=F.useCallback(()=>{L(!1)},[]),W=F.useMemo(()=>({adornedStart:C,setAdornedStart:M,color:o,disabled:l,error:c,filled:R,focused:I,fullWidth:d,hiddenLabel:f,size:v,onBlur:()=>{N(!1)},onFocus:()=>{N(!0)},onEmpty:G,onFilled:P,registerEffect:D,required:g,variant:b}),[C,o,l,c,R,I,d,f,D,G,P,g,v,b]);return V.jsx(E6.Provider,{value:W,children:V.jsx(qlt,{as:a,ownerState:_,className:Pn(E.root,s),ref:t,...x,children:i})})});function Klt(n){return Fr("MuiFormControlLabel",n)}const m_=yr("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Ylt=n=>{const{classes:e,disabled:t,labelPlacement:r,error:i,required:s}=n,o={root:["root",t&&"disabled",`labelPlacement${Rn(r)}`,i&&"error",s&&"required"],label:["label",t&&"disabled"],asterisk:["asterisk",i&&"error"]};return Pr(o,Klt,e)},Jlt=an("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${m_.label}`]:e.label},e.root,e[`labelPlacement${Rn(t.labelPlacement)}`]]}})(li(({theme:n})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${m_.disabled}`]:{cursor:"default"},[`& .${m_.label}`]:{[`&.${m_.disabled}`]:{color:(n.vars||n).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:e})=>e==="start"||e==="top"||e==="bottom",style:{marginLeft:16}}]}))),Zlt=an("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(li(({theme:n})=>({[`&.${m_.error}`]:{color:(n.vars||n).palette.error.main}}))),$ae=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiFormControlLabel"}),{checked:i,className:s,componentsProps:o={},control:a,disabled:l,disableTypography:c,inputRef:u,label:d,labelPlacement:f="end",name:p,onChange:g,required:v,slots:b={},slotProps:x={},value:_,...E}=r,C=i0(),M=l??a.props.disabled??(C==null?void 0:C.disabled),R=v??a.props.required,L={disabled:M,required:R};["checked","name","onChange","value","inputRef"].forEach(q=>{typeof a.props[q]>"u"&&typeof r[q]<"u"&&(L[q]=r[q])});const B=Gv({props:r,muiFormControl:C,states:["error"]}),N={...r,disabled:M,labelPlacement:f,required:R,error:B.error},I=Ylt(N),D={slots:b,slotProps:{...o,...x}},[P,G]=xi("typography",{elementType:Ku,externalForwardedProps:D,ownerState:N});let W=d;return W!=null&&W.type!==Ku&&!c&&(W=V.jsx(P,{component:"span",...G,className:Pn(I.label,G==null?void 0:G.className),children:W})),V.jsxs(Jlt,{className:Pn(I.root,s),ownerState:N,ref:t,...E,children:[F.cloneElement(a,L),R?V.jsxs("div",{children:[W,V.jsxs(Zlt,{ownerState:N,"aria-hidden":!0,className:I.asterisk,children:["","*"]})]}):W]})});function Qlt(n){return Fr("MuiLink",n)}const ect=yr("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),tct=({theme:n,ownerState:e})=>{const t=e.color;if("colorSpace"in n&&n.colorSpace){const s=af(n,`palette.${t}.main`)||af(n,`palette.${t}`)||e.color;return n.alpha(s,.4)}const r=af(n,`palette.${t}.main`,!1)||af(n,`palette.${t}`,!1)||e.color,i=af(n,`palette.${t}.mainChannel`)||af(n,`palette.${t}Channel`);return"vars"in n&&i?`rgba(${i} / 0.4)`:or(r,.4)},UX={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},nct=n=>{const{classes:e,component:t,focusVisible:r,underline:i}=n,s={root:["root",`underline${Rn(i)}`,t==="button"&&"button",r&&"focusVisible"]};return Pr(s,Qlt,e)},rct=an(Ku,{name:"MuiLink",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`underline${Rn(t.underline)}`],t.component==="button"&&e.button]}})(li(({theme:n})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:e,ownerState:t})=>e==="always"&&t.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},{props:({underline:e,ownerState:t})=>e==="always"&&t.color==="inherit",style:n.colorSpace?{textDecorationColor:n.alpha("currentColor",.4)}:null},...Object.entries(n.palette).filter(Ul()).map(([e])=>({props:{underline:"always",color:e},style:{"--Link-underlineColor":n.alpha((n.vars||n).palette[e].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":n.alpha((n.vars||n).palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":n.alpha((n.vars||n).palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(n.vars||n).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${ect.focusVisible}`]:{outline:"auto"}}}]}))),gP=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiLink"}),i=E2(),{className:s,color:o="primary",component:a="a",onBlur:l,onFocus:c,TypographyClasses:u,underline:d="always",variant:f="inherit",sx:p,...g}=r,[v,b]=F.useState(!1),x=M=>{GN(M.target)||b(!1),l&&l(M)},_=M=>{GN(M.target)&&b(!0),c&&c(M)},E={...r,color:o,component:a,focusVisible:v,underline:d,variant:f},C=nct(E);return V.jsx(rct,{color:o,className:Pn(C.root,s),classes:u,component:a,onBlur:x,onFocus:_,ref:t,ownerState:E,variant:f,...g,sx:[...UX[o]===void 0?[{color:o}]:[],...Array.isArray(p)?p:[p]],style:{...g.style,...d==="always"&&o!=="inherit"&&!UX[o]&&{"--Link-underlineColor":tct({theme:i,ownerState:E})}}})});function ict(n){return Fr("MuiInputLabel",n)}yr("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const sct=n=>{const{classes:e,formControl:t,size:r,shrink:i,disableAnimation:s,variant:o,required:a}=n,l={root:["root",t&&"formControl",!s&&"animated",i&&"shrink",r&&r!=="medium"&&`size${Rn(r)}`,o],asterisk:[a&&"asterisk"]},c=Pr(l,ict,e);return{...e,...c}},oct=an(Qx,{shouldForwardProp:n=>jl(n)||n==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${B_.asterisk}`]:e.asterisk},e.root,t.formControl&&e.formControl,t.size==="small"&&e.sizeSmall,t.shrink&&e.shrink,!t.disableAnimation&&e.animated,t.focused&&e.focused,e[t.variant]]}})(li(({theme:n})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:e})=>e.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:e})=>e.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:e})=>!e.disableAnimation,style:{transition:n.transitions.create(["color","transform","max-width"],{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:e,ownerState:t})=>e==="filled"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:e,ownerState:t,size:r})=>e==="filled"&&t.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:e,ownerState:t})=>e==="outlined"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),act=F.forwardRef(function(e,t){const r=Gr({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,margin:s,shrink:o,variant:a,className:l,...c}=r,u=i0();let d=o;typeof d>"u"&&u&&(d=u.filled||u.focused||u.adornedStart);const f=Gv({props:r,muiFormControl:u,states:["size","variant","required","focused"]}),p={...r,disableAnimation:i,formControl:u,shrink:d,size:f.size,variant:f.variant,required:f.required,focused:f.focused},g=sct(p);return V.jsx(oct,{"data-shrink":d,ref:t,className:Pn(g.root,l),...c,ownerState:p,classes:g})});function lct(n){return Fr("MuiFormHelperText",n)}const zX=yr("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var HX;const cct=n=>{const{classes:e,contained:t,size:r,disabled:i,error:s,filled:o,focused:a,required:l}=n,c={root:["root",i&&"disabled",s&&"error",r&&`size${Rn(r)}`,t&&"contained",a&&"focused",o&&"filled",l&&"required"]};return Pr(c,lct,e)},uct=an("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.size&&e[`size${Rn(t.size)}`],t.contained&&e.contained,t.filled&&e.filled]}})(li(({theme:n})=>({color:(n.vars||n).palette.text.secondary,...n.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${zX.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${zX.error}`]:{color:(n.vars||n).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:e})=>e.contained,style:{marginLeft:14,marginRight:14}}]}))),dct=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiFormHelperText"}),{children:i,className:s,component:o="p",disabled:a,error:l,filled:c,focused:u,margin:d,required:f,variant:p,...g}=r,v=i0(),b=Gv({props:r,muiFormControl:v,states:["variant","size","disabled","error","filled","focused","required"]}),x={...r,component:o,contained:b.variant==="filled"||b.variant==="outlined",variant:b.variant,size:b.size,disabled:b.disabled,error:b.error,filled:b.filled,focused:b.focused,required:b.required};delete x.ownerState;const _=cct(x);return V.jsx(uct,{as:o,className:Pn(_.root,s),ref:t,...g,ownerState:x,children:i===" "?HX||(HX=V.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):i})});function hct(n){return Fr("MuiTextField",n)}yr("MuiTextField",["root"]);const fct={standard:D6,filled:k6,outlined:ck},pct=n=>{const{classes:e}=n;return Pr({root:["root"]},hct,e)},mct=an(e1,{name:"MuiTextField",slot:"Root"})({}),$_=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:s=!1,children:o,className:a,color:l="primary",defaultValue:c,disabled:u=!1,error:d=!1,FormHelperTextProps:f,fullWidth:p=!1,helperText:g,id:v,InputLabelProps:b,inputProps:x,InputProps:_,inputRef:E,label:C,maxRows:M,minRows:R,multiline:L=!1,name:B,onBlur:N,onChange:I,onFocus:D,placeholder:P,required:G=!1,rows:W,select:q=!1,SelectProps:z,slots:J={},slotProps:Q={},type:Y,value:X,variant:te="outlined",...ne}=r,le={...r,autoFocus:s,color:l,disabled:u,error:d,fullWidth:p,multiline:L,required:G,select:q,variant:te},ye=pct(le),ue=hS(v),be=g&&ue?`${ue}-helper-text`:void 0,xe=C&&ue?`${ue}-label`:void 0,Pe=fct[te],ze={slots:J,slotProps:{input:_,inputLabel:b,htmlInput:x,formHelperText:f,select:z,...Q}},Ke={},pt=ze.slotProps.inputLabel;te==="outlined"&&(pt&&typeof pt.shrink<"u"&&(Ke.notched=pt.shrink),Ke.label=C),q&&((!z||!z.native)&&(Ke.id=void 0),Ke["aria-describedby"]=void 0);const[dt,pe]=xi("root",{elementType:mct,shouldForwardComponentProp:!0,externalForwardedProps:{...ze,...ne},ownerState:le,className:Pn(ye.root,a),ref:t,additionalProps:{disabled:u,error:d,fullWidth:p,required:G,color:l,variant:te}}),[Le,Ue]=xi("input",{elementType:Pe,externalForwardedProps:ze,additionalProps:Ke,ownerState:le}),[Ze,je]=xi("inputLabel",{elementType:act,externalForwardedProps:ze,ownerState:le}),[lt,st]=xi("htmlInput",{elementType:"input",externalForwardedProps:ze,ownerState:le}),[at,Ut]=xi("formHelperText",{elementType:dct,externalForwardedProps:ze,ownerState:le}),[mt,ce]=xi("select",{elementType:B6,externalForwardedProps:ze,ownerState:le}),re=V.jsx(Le,{"aria-describedby":be,autoComplete:i,autoFocus:s,defaultValue:c,fullWidth:p,multiline:L,name:B,rows:W,maxRows:M,minRows:R,type:Y,value:X,id:ue,inputRef:E,onBlur:N,onChange:I,onFocus:D,placeholder:P,inputProps:st,slots:{input:J.htmlInput?lt:void 0},...Ue});return V.jsxs(dt,{...pe,children:[C!=null&&C!==""&&V.jsx(Ze,{htmlFor:ue,id:xe,...je,children:C}),q?V.jsx(mt,{"aria-describedby":be,id:ue,labelId:xe,value:X,input:re,...ce,children:o}):re,g&&V.jsx(at,{id:be,...Ut,children:g})]})});function gct(n){return Fr("MuiAlert",n)}const VX=yr("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),yct=La(V.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),vct=La(V.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),bct=La(V.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),xct=La(V.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),Sct=La(V.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),wct=n=>{const{variant:e,color:t,severity:r,classes:i}=n,s={root:["root",`color${Rn(t||r)}`,`${e}${Rn(t||r)}`,`${e}`],icon:["icon"],message:["message"],action:["action"]};return Pr(s,gct,i)},_ct=an(T2,{name:"MuiAlert",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],e[`${t.variant}${Rn(t.color||t.severity)}`]]}})(li(({theme:n})=>{const e=n.palette.mode==="light"?n.darken:n.lighten,t=n.palette.mode==="light"?n.lighten:n.darken;return{...n.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(n.palette).filter(Ul(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"standard"},style:{color:n.vars?n.vars.palette.Alert[`${r}Color`]:e(n.palette[r].light,.6),backgroundColor:n.vars?n.vars.palette.Alert[`${r}StandardBg`]:t(n.palette[r].light,.9),[`& .${VX.icon}`]:n.vars?{color:n.vars.palette.Alert[`${r}IconColor`]}:{color:n.palette[r].main}}})),...Object.entries(n.palette).filter(Ul(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"outlined"},style:{color:n.vars?n.vars.palette.Alert[`${r}Color`]:e(n.palette[r].light,.6),border:`1px solid ${(n.vars||n).palette[r].light}`,[`& .${VX.icon}`]:n.vars?{color:n.vars.palette.Alert[`${r}IconColor`]}:{color:n.palette[r].main}}})),...Object.entries(n.palette).filter(Ul(["dark"])).map(([r])=>({props:{colorSeverity:r,variant:"filled"},style:{fontWeight:n.typography.fontWeightMedium,...n.vars?{color:n.vars.palette.Alert[`${r}FilledColor`],backgroundColor:n.vars.palette.Alert[`${r}FilledBg`]}:{backgroundColor:n.palette.mode==="dark"?n.palette[r].dark:n.palette[r].main,color:n.palette.getContrastText(n.palette[r].main)}}}))]}})),Cct=an("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),Ect=an("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),Act=an("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),GX={success:V.jsx(yct,{fontSize:"inherit"}),warning:V.jsx(vct,{fontSize:"inherit"}),error:V.jsx(bct,{fontSize:"inherit"}),info:V.jsx(xct,{fontSize:"inherit"})},YN=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiAlert"}),{action:i,children:s,className:o,closeText:a="Close",color:l,components:c={},componentsProps:u={},icon:d,iconMapping:f=GX,onClose:p,role:g="alert",severity:v="success",slotProps:b={},slots:x={},variant:_="standard",...E}=r,C={...r,color:l,severity:v,variant:_,colorSeverity:l||v},M=wct(C),R={slots:{closeButton:c.CloseButton,closeIcon:c.CloseIcon,...x},slotProps:{...u,...b}},[L,B]=xi("root",{ref:t,shouldForwardComponentProp:!0,className:Pn(M.root,o),elementType:_ct,externalForwardedProps:{...R,...E},ownerState:C,additionalProps:{role:g,elevation:0}}),[N,I]=xi("icon",{className:M.icon,elementType:Cct,externalForwardedProps:R,ownerState:C}),[D,P]=xi("message",{className:M.message,elementType:Ect,externalForwardedProps:R,ownerState:C}),[G,W]=xi("action",{className:M.action,elementType:Act,externalForwardedProps:R,ownerState:C}),[q,z]=xi("closeButton",{elementType:ust,externalForwardedProps:R,ownerState:C}),[J,Q]=xi("closeIcon",{elementType:Sct,externalForwardedProps:R,ownerState:C});return V.jsxs(L,{...B,children:[d!==!1?V.jsx(N,{...I,children:d||f[v]||GX[v]}):null,V.jsx(D,{...P,children:s}),i!=null?V.jsx(G,{...W,children:i}):null,i==null&&p?V.jsx(G,{...W,children:V.jsx(q,{size:"small","aria-label":a,title:a,color:"inherit",onClick:p,...z,children:V.jsx(J,{fontSize:"small",...Q})})}):null]})});function Tct(n){return Fr("MuiDialog",n)}const z$=yr("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),Lae=F.createContext({}),Mct=an(nae,{name:"MuiDialog",slot:"Backdrop",overrides:(n,e)=>e.backdrop})({zIndex:-1}),Rct=n=>{const{classes:e,scroll:t,maxWidth:r,fullWidth:i,fullScreen:s}=n,o={root:["root"],container:["container",`scroll${Rn(t)}`],paper:["paper",`paperScroll${Rn(t)}`,`paperWidth${Rn(String(r))}`,i&&"paperFullWidth",s&&"paperFullScreen"]};return Pr(o,Tct,e)},Nct=an(rae,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),Ict=an("div",{name:"MuiDialog",slot:"Container",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.container,e[`scroll${Rn(t.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),Dct=an(T2,{name:"MuiDialog",slot:"Paper",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.paper,e[`scrollPaper${Rn(t.scroll)}`],e[`paperWidth${Rn(String(t.maxWidth))}`],t.fullWidth&&e.paperFullWidth,t.fullScreen&&e.paperFullScreen]}})(li(({theme:n})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:e})=>!e.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:n.breakpoints.unit==="px"?Math.max(n.breakpoints.values.xs,444):`max(${n.breakpoints.values.xs}${n.breakpoints.unit}, 444px)`,[`&.${z$.paperScrollBody}`]:{[n.breakpoints.down(Math.max(n.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(n.breakpoints.values).filter(e=>e!=="xs").map(e=>({props:{maxWidth:e},style:{maxWidth:`${n.breakpoints.values[e]}${n.breakpoints.unit}`,[`&.${z$.paperScrollBody}`]:{[n.breakpoints.down(n.breakpoints.values[e]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:e})=>e.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:e})=>e.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${z$.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),kct=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiDialog"}),i=E2(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":o,"aria-labelledby":a,"aria-modal":l=!0,BackdropComponent:c,BackdropProps:u,children:d,className:f,disableEscapeKeyDown:p=!1,fullScreen:g=!1,fullWidth:v=!1,maxWidth:b="sm",onClick:x,onClose:_,open:E,PaperComponent:C=T2,PaperProps:M={},scroll:R="paper",slots:L={},slotProps:B={},TransitionComponent:N=uP,transitionDuration:I=s,TransitionProps:D,...P}=r,G={...r,disableEscapeKeyDown:p,fullScreen:g,fullWidth:v,maxWidth:b,scroll:R},W=Rct(G),q=F.useRef(),z=pe=>{q.current=pe.target===pe.currentTarget},J=pe=>{x&&x(pe),q.current&&(q.current=null,_&&_(pe,"backdropClick"))},Q=hS(a),Y=F.useMemo(()=>({titleId:Q}),[Q]),X={transition:N,...L},te={transition:D,paper:M,backdrop:u,...B},ne={slots:X,slotProps:te},[le,ye]=xi("root",{elementType:Nct,shouldForwardComponentProp:!0,externalForwardedProps:ne,ownerState:G,className:Pn(W.root,f),ref:t}),[ue,be]=xi("backdrop",{elementType:Mct,shouldForwardComponentProp:!0,externalForwardedProps:ne,ownerState:G}),[xe,Pe]=xi("paper",{elementType:Dct,shouldForwardComponentProp:!0,externalForwardedProps:ne,ownerState:G,className:Pn(W.paper,M.className)}),[ze,Ke]=xi("container",{elementType:Ict,externalForwardedProps:ne,ownerState:G,className:W.container}),[pt,dt]=xi("transition",{elementType:uP,externalForwardedProps:ne,ownerState:G,additionalProps:{appear:!0,in:E,timeout:I,role:"presentation"}});return V.jsx(le,{closeAfterTransition:!0,slots:{backdrop:ue},slotProps:{backdrop:{transitionDuration:I,as:c,...be}},disableEscapeKeyDown:p,onClose:_,open:E,onClick:J,...ye,...P,children:V.jsx(pt,{...dt,children:V.jsx(ze,{onMouseDown:z,...Ke,children:V.jsx(xe,{as:C,elevation:24,role:"dialog","aria-describedby":o,"aria-labelledby":Q,"aria-modal":l,...Pe,children:V.jsx(Lae.Provider,{value:Y,children:d})})})})})});function Oct(n){return Fr("MuiDialogActions",n)}yr("MuiDialogActions",["root","spacing"]);const Bct=n=>{const{classes:e,disableSpacing:t}=n;return Pr({root:["root",!t&&"spacing"]},Oct,e)},$ct=an("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:n})=>!n.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Lct=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiDialogActions"}),{className:i,disableSpacing:s=!1,...o}=r,a={...r,disableSpacing:s},l=Bct(a);return V.jsx($ct,{className:Pn(l.root,i),ownerState:a,ref:t,...o})});function Fct(n){return Fr("MuiDialogContent",n)}yr("MuiDialogContent",["root","dividers"]);function Pct(n){return Fr("MuiDialogTitle",n)}const Uct=yr("MuiDialogTitle",["root"]),zct=n=>{const{classes:e,dividers:t}=n;return Pr({root:["root",t&&"dividers"]},Fct,e)},Hct=an("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.dividers&&e.dividers]}})(li(({theme:n})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:e})=>e.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(n.vars||n).palette.divider}`,borderBottom:`1px solid ${(n.vars||n).palette.divider}`}},{props:({ownerState:e})=>!e.dividers,style:{[`.${Uct.root} + &`]:{paddingTop:0}}}]}))),Vct=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiDialogContent"}),{className:i,dividers:s=!1,...o}=r,a={...r,dividers:s},l=zct(a);return V.jsx(Hct,{className:Pn(l.root,i),ownerState:a,ref:t,...o})});function Gct(n){return Fr("MuiDialogContentText",n)}yr("MuiDialogContentText",["root"]);const Wct=n=>{const{classes:e}=n,r=Pr({root:["root"]},Gct,e);return{...e,...r}},jct=an(Ku,{shouldForwardProp:n=>jl(n)||n==="classes",name:"MuiDialogContentText",slot:"Root"})({}),Xct=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiDialogContentText"}),{children:i,className:s,...o}=r,a=Wct(o);return V.jsx(jct,{component:"p",variant:"body1",color:"textSecondary",ref:t,ownerState:o,className:Pn(a.root,s),...r,classes:a})}),qct=n=>{const{classes:e}=n;return Pr({root:["root"]},Pct,e)},Kct=an(Ku,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),Yct=F.forwardRef(function(e,t){const r=Gr({props:e,name:"MuiDialogTitle"}),{className:i,id:s,...o}=r,a=r,l=qct(a),{titleId:c=s}=F.useContext(Lae);return V.jsx(Kct,{component:"h2",className:Pn(l.root,i),ownerState:a,ref:t,variant:"h6",id:s??c,...o})});function Fae({open:n,handleClose:e}){return V.jsxs(kct,{open:n,onClose:e,slotProps:{paper:{component:"form",onSubmit:t=>{t.preventDefault(),e()},sx:{backgroundImage:"none"}}},children:[V.jsx(Yct,{children:"Reset password"}),V.jsxs(Vct,{sx:{display:"flex",flexDirection:"column",gap:2,width:"100%"},children:[V.jsx(Xct,{children:"Enter your account's email address, and we'll send you a link to reset your password."}),V.jsx(ck,{autoFocus:!0,required:!0,margin:"dense",id:"email",name:"email",label:"Email address",placeholder:"Email address",type:"email",fullWidth:!0})]}),V.jsxs(Lct,{sx:{pb:3,px:3},children:[V.jsx(_g,{onClick:e,children:"Cancel"}),V.jsx(_g,{variant:"contained",type:"submit",children:"Continue"})]})]})}Fae.propTypes={handleClose:vi.func.isRequired,open:vi.bool.isRequired};function Pae(){return V.jsx(Jp,{sx:{height:21,width:100,mr:2},children:V.jsxs("svg",{width:86,height:19,viewBox:"0 0 86 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[V.jsx("path",{fill:"#B4C0D3",d:"m.787 12.567 6.055-2.675 3.485 2.006.704 6.583-4.295-.035.634-4.577-.74-.422-3.625 2.817-2.218-3.697Z"}),V.jsx("path",{fill:"#00D3AB",d:"m10.714 11.616 5.352 3.908 2.112-3.767-4.295-1.725v-.845l4.295-1.76-2.112-3.732-5.352 3.908v4.013Z"}),V.jsx("path",{fill:"#4876EF",d:"m10.327 7.286.704-6.583-4.295.07.634 4.577-.74.422-3.66-2.816L.786 6.617l6.055 2.676 3.485-2.007Z"}),V.jsx("path",{fill:"#4876EE",d:"M32.507 8.804v6.167h2.312v-7.86h-3.366v1.693h1.054ZM32.435 6.006c.212.22.535.33.968.33.434 0 .751-.11.953-.33.213-.23.318-.516.318-.86 0-.354-.105-.641-.318-.86-.202-.23-.52-.345-.953-.345-.433 0-.756.115-.968.344-.202.22-.303.507-.303.86 0 .345.101.632.303.861ZM24.46 14.799c.655.296 1.46.444 2.413.444.896 0 1.667-.139 2.312-.416.645-.277 1.141-.664 1.488-1.162.357-.506.535-1.094.535-1.764 0-.65-.169-1.2-.506-1.649-.328-.459-.785-.818-1.373-1.076-.587-.267-1.266-.435-2.037-.502l-.809-.071c-.481-.039-.828-.168-1.04-.388a1.08 1.08 0 0 1-.318-.774c0-.23.058-.44.173-.631.116-.201.29-.359.52-.474.241-.114.535-.172.882-.172.366 0 .67.067.91.201.053.029.104.059.15.09l.012.009.052.037c.146.111.263.243.35.395.125.21.188.444.188.703h2.311c0-.689-.159-1.286-.476-1.793-.318-.516-.776-.913-1.373-1.19-.588-.287-1.296-.43-2.124-.43-.79 0-1.474.133-2.052.4a3.131 3.131 0 0 0-1.358 1.12c-.318.487-.477 1.066-.477 1.735 0 .927.314 1.673.94 2.237.626.564 1.464.89 2.514.976l.794.071c.645.058 1.113.187 1.401.388a.899.899 0 0 1 .434.788 1.181 1.181 0 0 1-.231.717c-.154.201-.38.36-.68.474-.298.115-.669.172-1.112.172-.49 0-.89-.067-1.199-.2-.308-.144-.539-.33-.694-.56a1.375 1.375 0 0 1-.216-.746h-2.297c0 .679.168 1.281.505 1.807.337.517.834.928 1.489 1.234ZM39.977 15.07c-.8 0-1.445-.095-1.936-.286a2.03 2.03 0 0 1-1.084-.99c-.221-.469-.332-1.1-.332-1.893V8.789h-1.2V7.11h1.2V4.988h2.153V7.11h2.312V8.79h-2.312v3.198c0 .373.096.66.289.86.202.192.486.287.852.287h1.17v1.937h-1.112Z"}),V.jsx("path",{fill:"#4876EE",fillRule:"evenodd",d:"M43.873 14.899c.52.23 1.117.344 1.791.344.665 0 1.252-.115 1.763-.344.51-.23.934-.55 1.271-.96.337-.412.564-.88.679-1.407h-2.124c-.096.24-.279.44-.549.603-.27.162-.616.244-1.04.244-.262 0-.497-.031-.704-.093a1.572 1.572 0 0 1-.423-.194 1.662 1.662 0 0 1-.636-.803 3.159 3.159 0 0 1-.163-.645h5.784v-.775a4.28 4.28 0 0 0-.463-1.98 3.686 3.686 0 0 0-1.343-1.477c-.578-.382-1.291-.574-2.139-.574-.645 0-1.223.115-1.733.345-.501.22-.92.52-1.257.903a4.178 4.178 0 0 0-.78 1.305c-.174.478-.26.98-.26 1.506v.287c0 .507.086 1.004.26 1.492.183.478.443.913.78 1.305.347.382.775.688 1.286.918Zm-.094-4.674.02-.09a2.507 2.507 0 0 1 .117-.356c.145-.354.356-.622.636-.804.104-.067.217-.123.339-.165.204-.071.433-.107.686-.107.395 0 .723.09.983.272.27.173.472.426.607.76a2.487 2.487 0 0 1 .16.603h-3.57c.006-.038.013-.076.022-.113Z",clipRule:"evenodd"}),V.jsx("path",{fill:"#4876EE",d:"M50.476 14.97V7.112h1.835v1.98a4.54 4.54 0 0 1 .173-.603c.202-.536.506-.937.91-1.205.405-.277.9-.416 1.488-.416h.101c.598 0 1.094.139 1.489.416.404.268.707.67.91 1.205l.016.04.013.037.028-.077c.212-.536.52-.937.925-1.205.405-.277.901-.416 1.489-.416h.1c.598 0 1.098.139 1.503.416.414.268.727.67.94 1.205.211.535.317 1.205.317 2.008v4.475h-2.312v-4.604c0-.43-.115-.78-.346-1.047-.222-.268-.54-.402-.954-.402-.414 0-.742.139-.982.416-.241.268-.362.626-.362 1.076v4.56h-2.326v-4.603c0-.43-.115-.78-.346-1.047-.222-.268-.535-.402-.94-.402-.423 0-.756.139-.996.416-.241.268-.362.626-.362 1.076v4.56h-2.311Z"}),V.jsx("path",{fill:"#4876EE",fillRule:"evenodd",d:"M68.888 13.456v1.515h1.834v-4.82c0-.726-.144-1.319-.433-1.778-.289-.468-.712-.817-1.271-1.047-.549-.23-1.228-.344-2.037-.344a27.76 27.76 0 0 0-.896.014c-.318.01-.626.024-.924.043l-.229.016a36.79 36.79 0 0 0-.552.042v1.936a81.998 81.998 0 0 1 1.733-.09 37.806 37.806 0 0 1 1.171-.025c.424 0 .732.1.925.301.193.201.289.502.289.904v.029h-1.43c-.704 0-1.325.09-1.864.272-.54.172-.959.445-1.257.818-.299.363-.448.832-.448 1.405 0 .526.12.98.361 1.363.24.373.573.66.997.86.433.201.934.302 1.502.302.55 0 1.012-.1 1.388-.302.385-.2.683-.487.895-.86a2.443 2.443 0 0 0 .228-.498l.018-.056Zm-.39-1.397v-.63h-1.445c-.405 0-.718.1-.939.3-.212.192-.318.455-.318.79 0 .157.026.3.08.429a.99.99 0 0 0 .238.345c.221.191.534.287.939.287a2.125 2.125 0 0 0 .394-.038c.106-.021.206-.052.3-.092.212-.095.385-.253.52-.473.135-.22.212-.526.23-.918Z",clipRule:"evenodd"}),V.jsx("path",{fill:"#4876EE",d:"M72.106 14.97V7.11h1.835v2.595c.088-.74.31-1.338.665-1.791.481-.603 1.174-.904 2.08-.904h.303v1.98h-.578c-.635 0-1.127.172-1.473.516-.347.334-.52.822-.52 1.463v4.001h-2.312ZM79.92 11.298h.767l2.499 3.672h2.6l-3.169-4.51 2.606-3.35h-2.427l-2.875 3.737V4.5h-2.312v10.47h2.312v-3.672Z"})]})})}function Jct(){return V.jsx(Jp,{children:V.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[V.jsx("path",{d:"M6.68 15.92C2.88 15.24 0 11.96 0 8C0 3.6 3.6 0 8 0C12.4 0 16 3.6 16 8C16 11.96 13.12 15.24 9.32 15.92L8.88 15.56H7.12L6.68 15.92Z",fill:"url(#paint0_linear_795_116)"}),V.jsx("path",{d:"M11.12 10.2391L11.48 7.99914H9.36V6.43914C9.36 5.79914 9.6 5.31914 10.56 5.31914H11.6V3.27914C11.04 3.19914 10.4 3.11914 9.84 3.11914C8 3.11914 6.72 4.23914 6.72 6.23914V7.99914H4.72V10.2391H6.72V15.8791C7.16 15.9591 7.6 15.9991 8.04 15.9991C8.48 15.9991 8.92 15.9591 9.36 15.8791V10.2391H11.12Z",fill:"white"}),V.jsx("defs",{children:V.jsxs("linearGradient",{id:"paint0_linear_795_116",x1:"8",y1:"0",x2:"8",y2:"15.9991",gradientUnits:"userSpaceOnUse",children:[V.jsx("stop",{stopColor:"#1AAFFF"}),V.jsx("stop",{offset:"1",stopColor:"#0163E0"})]})})]})})}function Zct(){return V.jsx(Jp,{children:V.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[V.jsx("path",{d:"M15.68 8.18182C15.68 7.61455 15.6291 7.06909 15.5345 6.54545H8V9.64364H12.3055C12.1164 10.64 11.5491 11.4836 10.6982 12.0509V14.0655H13.2945C14.8073 12.6691 15.68 10.6182 15.68 8.18182Z",fill:"#4285F4"}),V.jsx("path",{d:"M8 16C10.16 16 11.9709 15.2873 13.2945 14.0655L10.6982 12.0509C9.98545 12.5309 9.07636 12.8218 8 12.8218C5.92 12.8218 4.15273 11.4182 3.52 9.52727H0.858182V11.5927C2.17455 14.2036 4.87273 16 8 16Z",fill:"#34A853"}),V.jsx("path",{d:"M3.52 9.52C3.36 9.04 3.26545 8.53091 3.26545 8C3.26545 7.46909 3.36 6.96 3.52 6.48V4.41455H0.858182C0.312727 5.49091 0 6.70545 0 8C0 9.29455 0.312727 10.5091 0.858182 11.5855L2.93091 9.97091L3.52 9.52Z",fill:"#FBBC05"}),V.jsx("path",{d:"M8 3.18545C9.17818 3.18545 10.2255 3.59273 11.0618 4.37818L13.3527 2.08727C11.9636 0.792727 10.16 0 8 0C4.87273 0 2.17455 1.79636 0.858182 4.41455L3.52 6.48C4.15273 4.58909 5.92 3.18545 8 3.18545Z",fill:"#EA4335"})]})})}const Qct=an(Oae)(({theme:n})=>({display:"flex",flexDirection:"column",alignSelf:"center",width:"100%",padding:n.spacing(4),gap:n.spacing(2),boxShadow:"hsla(220, 30%, 5%, 0.05) 0px 5px 15px 0px, hsla(220, 25%, 10%, 0.05) 0px 15px 35px -5px",[n.breakpoints.up("sm")]:{width:"450px"},...n.applyStyles("dark",{boxShadow:"hsla(220, 30%, 5%, 0.5) 0px 5px 15px 0px, hsla(220, 25%, 10%, 0.08) 0px 15px 35px -5px"})})),eut=Js.create({baseURL:"http://localhost:8080/",timeout:5e3});function tut(){const n=LI(),[e,t]=F.useState(!1),[r,i]=F.useState(""),[s,o]=F.useState(!1),[a,l]=F.useState(""),[c,u]=F.useState(!1),[d,f]=F.useState(!1),[p,g]=F.useState(""),[v,b]=F.useState(!1),x=()=>{u(!0)},_=()=>{u(!1)},E=async M=>{if(M.preventDefault(),g(""),b(!1),!C())return;const R=new FormData(M.currentTarget),L=R.get("email"),B=R.get("password");f(!0);try{const N=await eut.post("/api/v1/users/login",{email:L,password:B});N.status===200&&(b(!0),console.log("Login successful:",N.data));const I=N.data;localStorage.setItem("user",JSON.stringify({id:N.data.id,username:N.data.username,email:N.data.email})),setTimeout(()=>{n("/chatbot",{state:{user:I}})},1500)}catch(N){if(console.error("Login error:",N),N.response){const I=N.response.data.error||"Login failed. Please check your credentials.";g(I)}else N.request?g("Unable to connect to server. Please try again later."):g("An unexpected error occurred. Please try again.")}finally{f(!1)}},C=()=>{const M=document.getElementById("email"),R=document.getElementById("password");let L=!0;return!M.value||!/\S+@\S+\.\S+/.test(M.value)?(t(!0),i("Please enter a valid email address."),L=!1):(t(!1),i("")),!R.value||R.value.length<6?(o(!0),l("Password must be at least 6 characters long."),L=!1):(o(!1),l("")),L};return V.jsxs(Qct,{variant:"outlined",children:[V.jsx(Gy,{sx:{display:{xs:"flex",md:"none"}},children:V.jsx(Pae,{})}),V.jsx(Ku,{component:"h1",variant:"h4",sx:{width:"100%",fontSize:"clamp(2rem, 10vw, 2.15rem)"},children:"Sign in"}),p&&V.jsx(YN,{severity:"error",onClose:()=>g(""),children:p}),v&&V.jsx(YN,{severity:"success",children:"Login successful! Redirecting..."}),V.jsxs(Gy,{component:"form",onSubmit:E,noValidate:!0,sx:{display:"flex",flexDirection:"column",width:"100%",gap:2},children:[V.jsxs(e1,{children:[V.jsx(Qx,{htmlFor:"email",children:"Email"}),V.jsx($_,{error:e,helperText:r,id:"email",type:"email",name:"email",placeholder:"your@email.com",autoComplete:"email",autoFocus:!0,required:!0,fullWidth:!0,variant:"outlined",color:e?"error":"primary",disabled:d})]}),V.jsxs(e1,{children:[V.jsxs(Gy,{sx:{display:"flex",justifyContent:"space-between"},children:[V.jsx(Qx,{htmlFor:"password",children:"Password"}),V.jsx(gP,{component:"button",type:"button",onClick:x,variant:"body2",sx:{alignSelf:"baseline"},children:"Forgot your password?"})]}),V.jsx($_,{error:s,helperText:a,name:"password",placeholder:"",type:"password",id:"password",autoComplete:"current-password",required:!0,fullWidth:!0,variant:"outlined",color:s?"error":"primary",disabled:d})]}),V.jsx($ae,{control:V.jsx(Bae,{value:"remember",color:"primary"}),label:"Remember me",disabled:d}),V.jsx(Fae,{open:c,handleClose:_}),V.jsx(_g,{type:"submit",fullWidth:!0,variant:"contained",disabled:d,children:d?V.jsx(dk,{size:24}):"Sign in"}),V.jsxs(Ku,{sx:{textAlign:"center"},children:["Don't have an account?"," ",V.jsx("span",{children:V.jsx(gP,{href:"/signup",variant:"body2",sx:{alignSelf:"center"},children:"Sign up"})})]})]}),V.jsx(XN,{children:"or"}),V.jsxs(Gy,{sx:{display:"flex",flexDirection:"column",gap:2},children:[V.jsx(_g,{fullWidth:!0,variant:"outlined",onClick:()=>alert("Sign in with Google"),startIcon:V.jsx(Zct,{}),disabled:d,children:"Sign in with Google"}),V.jsx(_g,{fullWidth:!0,variant:"outlined",onClick:()=>alert("Sign in with Facebook"),startIcon:V.jsx(Jct,{}),disabled:d,children:"Sign in with Facebook"})]})]})}const nut=La(V.jsx("path",{d:"m20.45 6 .49-1.06L22 4.45c.39-.18.39-.73 0-.91l-1.06-.49L20.45 2c-.18-.39-.73-.39-.91 0l-.49 1.06-1.05.49c-.39.18-.39.73 0 .91l1.06.49.49 1.05c.17.39.73.39.9 0M8.95 6l.49-1.06 1.06-.49c.39-.18.39-.73 0-.91l-1.06-.48L8.95 2c-.17-.39-.73-.39-.9 0l-.49 1.06-1.06.49c-.39.18-.39.73 0 .91l1.06.49L8.05 6c.17.39.73.39.9 0m10.6 7.5-.49 1.06-1.06.49c-.39.18-.39.73 0 .91l1.06.49.49 1.06c.18.39.73.39.91 0l.49-1.06 1.05-.5c.39-.18.39-.73 0-.91l-1.06-.49-.49-1.06c-.17-.38-.73-.38-.9.01m-1.84-4.38-2.83-2.83a.996.996 0 0 0-1.41 0L2.29 17.46c-.39.39-.39 1.02 0 1.41l2.83 2.83c.39.39 1.02.39 1.41 0L17.7 10.53c.4-.38.4-1.02.01-1.41m-3.5 2.09L12.8 9.8l1.38-1.38 1.41 1.41z"})),rut=La(V.jsx("path",{d:"m20.99 17.99-4.94-4.94-2.12 2.12 4.94 4.94c.59.59 1.54.59 2.12 0s.58-1.54 0-2.12M17.65 10c1.93 0 3.5-1.57 3.5-3.5 0-.58-.16-1.12-.41-1.6l-2.7 2.7-1.49-1.49 2.7-2.7c-.48-.25-1.02-.41-1.6-.41-1.93 0-3.5 1.57-3.5 3.5 0 .41.08.8.21 1.16l-1.85 1.85-1.78-1.78c.39-.39.39-1.02 0-1.41l-.71-.71 2.12-2.12c-1.17-1.17-3.07-1.17-4.24 0L5.08 6.32c-.39.39-.39 1.02 0 1.41l.71.71H3.25c-.19 0-.37.07-.5.21-.28.28-.28.72 0 1l2.54 2.54c.28.28.72.28 1 0 .13-.13.21-.31.21-.5V9.15l.7.7c.39.39 1.02.39 1.41 0l1.78 1.78-6.35 6.35c-.59.59-.59 1.54 0 2.12.59.59 1.54.59 2.12 0L16.48 9.79c.37.13.76.21 1.17.21"})),iut=La(V.jsx("path",{d:"m18.04 7.99-.63-1.4-1.4-.63c-.39-.18-.39-.73 0-.91l1.4-.63.63-1.4c.18-.39.73-.39.91 0l.63 1.4 1.4.63c.39.18.39.73 0 .91l-1.4.63-.63 1.4c-.17.39-.73.39-.91 0m3.24 4.73-.32-.72c-.18-.39-.73-.39-.91 0l-.32.72-.73.32c-.39.18-.39.73 0 .91l.72.32.32.73c.18.39.73.39.91 0l.32-.72.73-.32c.39-.18.39-.73 0-.91zm-5.04 1.65 1.23.93c.4.3.51.86.26 1.3l-1.62 2.8c-.25.44-.79.62-1.25.42l-1.43-.6c-.2.13-.42.26-.64.37l-.19 1.54c-.06.5-.49.88-.99.88H8.38c-.5 0-.93-.38-.99-.88l-.19-1.54c-.22-.11-.43-.23-.64-.37l-1.43.6c-.46.2-1 .02-1.25-.42l-1.62-2.8c-.25-.44-.14-.99.26-1.3l1.23-.93V14c0-.12 0-.25.01-.37l-1.23-.93c-.4-.3-.51-.86-.26-1.3l1.62-2.8c.25-.44.79-.62 1.25-.42l1.43.6c.2-.13.42-.26.64-.37l.19-1.54c.05-.49.48-.87.98-.87h3.23c.5 0 .93.38.99.88l.19 1.54c.22.11.43.23.64.37l1.43-.6c.46-.2 1-.02 1.25.42l1.62 2.8c.25.44.14.99-.26 1.3l-1.23.93c.01.12.01.24.01.37s0 .24-.01.36M13 14c0-1.66-1.34-3-3-3s-3 1.34-3 3 1.34 3 3 3 3-1.34 3-3"})),sut=La(V.jsx("path",{d:"M13.12 2.06 7.58 7.6c-.37.37-.58.88-.58 1.41V19c0 1.1.9 2 2 2h9c.8 0 1.52-.48 1.84-1.21l3.26-7.61C23.94 10.2 22.49 8 20.34 8h-5.65l.95-4.58c.1-.5-.05-1.01-.41-1.37-.59-.58-1.53-.58-2.11.01M3 21c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2s-2 .9-2 2v8c0 1.1.9 2 2 2"})),out=[{icon:V.jsx(iut,{sx:{color:"text.secondary"}}),title:"Adaptable performance",description:"Our product effortlessly adjusts to your needs, boosting efficiency and simplifying your tasks."},{icon:V.jsx(rut,{sx:{color:"text.secondary"}}),title:"Built to last",description:"Experience unmatched durability that goes above and beyond with lasting investment."},{icon:V.jsx(sut,{sx:{color:"text.secondary"}}),title:"Great user experience",description:"Integrate our product into your routine with an intuitive and easy-to-use interface."},{icon:V.jsx(nut,{sx:{color:"text.secondary"}}),title:"Innovative functionality",description:"Stay ahead with features that set new standards, addressing your evolving needs better than the rest."}];function aut(){return V.jsxs(Zx,{sx:{flexDirection:"column",alignSelf:"center",gap:4,maxWidth:450},children:[V.jsx(Gy,{sx:{display:{xs:"none",md:"flex"}},children:V.jsx(Pae,{})}),out.map((n,e)=>V.jsxs(Zx,{direction:"row",sx:{gap:2},children:[n.icon,V.jsxs("div",{children:[V.jsx(Ku,{gutterBottom:!0,sx:{fontWeight:"medium"},children:n.title}),V.jsx(Ku,{variant:"body2",sx:{color:"text.secondary"},children:n.description})]})]},e))]})}function lut(n){return V.jsxs($6,{...n,children:[V.jsx(Hoe,{enableColorScheme:!0}),V.jsx(lae,{sx:{position:"fixed",top:"1rem",right:"1rem"}}),V.jsx(Zx,{direction:"column",component:"main",sx:[{justifyContent:"center",height:"calc((1 - var(--template-frame-height, 0)) * 100%)",marginTop:"max(40px - var(--template-frame-height, 0px), 0px)",minHeight:"100%"},e=>({"&::before":{content:'""',display:"block",position:"absolute",zIndex:-1,inset:0,backgroundImage:"radial-gradient(ellipse at 50% 50%, hsl(210, 100%, 97%), hsl(0, 0%, 100%))",backgroundRepeat:"no-repeat",...e.applyStyles("dark",{backgroundImage:"radial-gradient(at 50% 50%, hsla(210, 100%, 16%, 0.5), hsl(220, 30%, 5%))"})}})],children:V.jsx(Zx,{direction:{xs:"column-reverse",md:"row"},sx:{justifyContent:"center",gap:{xs:6,sm:12},p:2,mx:"auto"},children:V.jsxs(Zx,{direction:{xs:"column-reverse",md:"row"},sx:{justifyContent:"center",gap:{xs:6,sm:12},p:{xs:2,sm:4},m:"auto"},children:[V.jsx(aut,{}),V.jsx(tut,{})]})})})]})}function cut(){return V.jsx(Jp,{sx:{height:21,width:100},children:V.jsxs("svg",{width:86,height:19,viewBox:"0 0 86 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[V.jsx("path",{fill:"#B4C0D3",d:"m.787 12.567 6.055-2.675 3.485 2.006.704 6.583-4.295-.035.634-4.577-.74-.422-3.625 2.817-2.218-3.697Z"}),V.jsx("path",{fill:"#00D3AB",d:"m10.714 11.616 5.352 3.908 2.112-3.767-4.295-1.725v-.845l4.295-1.76-2.112-3.732-5.352 3.908v4.013Z"}),V.jsx("path",{fill:"#4876EF",d:"m10.327 7.286.704-6.583-4.295.07.634 4.577-.74.422-3.66-2.816L.786 6.617l6.055 2.676 3.485-2.007Z"}),V.jsx("path",{fill:"#4876EE",d:"M32.507 8.804v6.167h2.312v-7.86h-3.366v1.693h1.054ZM32.435 6.006c.212.22.535.33.968.33.434 0 .751-.11.953-.33.213-.23.318-.516.318-.86 0-.354-.105-.641-.318-.86-.202-.23-.52-.345-.953-.345-.433 0-.756.115-.968.344-.202.22-.303.507-.303.86 0 .345.101.632.303.861ZM24.46 14.799c.655.296 1.46.444 2.413.444.896 0 1.667-.139 2.312-.416.645-.277 1.141-.664 1.488-1.162.357-.506.535-1.094.535-1.764 0-.65-.169-1.2-.506-1.649-.328-.459-.785-.818-1.373-1.076-.587-.267-1.266-.435-2.037-.502l-.809-.071c-.481-.039-.828-.168-1.04-.388a1.08 1.08 0 0 1-.318-.774c0-.23.058-.44.173-.631.116-.201.29-.359.52-.474.241-.114.535-.172.882-.172.366 0 .67.067.91.201.053.029.104.059.15.09l.012.009.052.037c.146.111.263.243.35.395.125.21.188.444.188.703h2.311c0-.689-.159-1.286-.476-1.793-.318-.516-.776-.913-1.373-1.19-.588-.287-1.296-.43-2.124-.43-.79 0-1.474.133-2.052.4a3.131 3.131 0 0 0-1.358 1.12c-.318.487-.477 1.066-.477 1.735 0 .927.314 1.673.94 2.237.626.564 1.464.89 2.514.976l.794.071c.645.058 1.113.187 1.401.388a.899.899 0 0 1 .434.788 1.181 1.181 0 0 1-.231.717c-.154.201-.38.36-.68.474-.298.115-.669.172-1.112.172-.49 0-.89-.067-1.199-.2-.308-.144-.539-.33-.694-.56a1.375 1.375 0 0 1-.216-.746h-2.297c0 .679.168 1.281.505 1.807.337.517.834.928 1.489 1.234ZM39.977 15.07c-.8 0-1.445-.095-1.936-.286a2.03 2.03 0 0 1-1.084-.99c-.221-.469-.332-1.1-.332-1.893V8.789h-1.2V7.11h1.2V4.988h2.153V7.11h2.312V8.79h-2.312v3.198c0 .373.096.66.289.86.202.192.486.287.852.287h1.17v1.937h-1.112Z"}),V.jsx("path",{fill:"#4876EE",fillRule:"evenodd",d:"M43.873 14.899c.52.23 1.117.344 1.791.344.665 0 1.252-.115 1.763-.344.51-.23.934-.55 1.271-.96.337-.412.564-.88.679-1.407h-2.124c-.096.24-.279.44-.549.603-.27.162-.616.244-1.04.244-.262 0-.497-.031-.704-.093a1.572 1.572 0 0 1-.423-.194 1.662 1.662 0 0 1-.636-.803 3.159 3.159 0 0 1-.163-.645h5.784v-.775a4.28 4.28 0 0 0-.463-1.98 3.686 3.686 0 0 0-1.343-1.477c-.578-.382-1.291-.574-2.139-.574-.645 0-1.223.115-1.733.345-.501.22-.92.52-1.257.903a4.178 4.178 0 0 0-.78 1.305c-.174.478-.26.98-.26 1.506v.287c0 .507.086 1.004.26 1.492.183.478.443.913.78 1.305.347.382.775.688 1.286.918Zm-.094-4.674.02-.09a2.507 2.507 0 0 1 .117-.356c.145-.354.356-.622.636-.804.104-.067.217-.123.339-.165.204-.071.433-.107.686-.107.395 0 .723.09.983.272.27.173.472.426.607.76a2.487 2.487 0 0 1 .16.603h-3.57c.006-.038.013-.076.022-.113Z",clipRule:"evenodd"}),V.jsx("path",{fill:"#4876EE",d:"M50.476 14.97V7.112h1.835v1.98a4.54 4.54 0 0 1 .173-.603c.202-.536.506-.937.91-1.205.405-.277.9-.416 1.488-.416h.101c.598 0 1.094.139 1.489.416.404.268.707.67.91 1.205l.016.04.013.037.028-.077c.212-.536.52-.937.925-1.205.405-.277.901-.416 1.489-.416h.1c.598 0 1.098.139 1.503.416.414.268.727.67.94 1.205.211.535.317 1.205.317 2.008v4.475h-2.312v-4.604c0-.43-.115-.78-.346-1.047-.222-.268-.54-.402-.954-.402-.414 0-.742.139-.982.416-.241.268-.362.626-.362 1.076v4.56h-2.326v-4.603c0-.43-.115-.78-.346-1.047-.222-.268-.535-.402-.94-.402-.423 0-.756.139-.996.416-.241.268-.362.626-.362 1.076v4.56h-2.311Z"}),V.jsx("path",{fill:"#4876EE",fillRule:"evenodd",d:"M68.888 13.456v1.515h1.834v-4.82c0-.726-.144-1.319-.433-1.778-.289-.468-.712-.817-1.271-1.047-.549-.23-1.228-.344-2.037-.344a27.76 27.76 0 0 0-.896.014c-.318.01-.626.024-.924.043l-.229.016a36.79 36.79 0 0 0-.552.042v1.936a81.998 81.998 0 0 1 1.733-.09 37.806 37.806 0 0 1 1.171-.025c.424 0 .732.1.925.301.193.201.289.502.289.904v.029h-1.43c-.704 0-1.325.09-1.864.272-.54.172-.959.445-1.257.818-.299.363-.448.832-.448 1.405 0 .526.12.98.361 1.363.24.373.573.66.997.86.433.201.934.302 1.502.302.55 0 1.012-.1 1.388-.302.385-.2.683-.487.895-.86a2.443 2.443 0 0 0 .228-.498l.018-.056Zm-.39-1.397v-.63h-1.445c-.405 0-.718.1-.939.3-.212.192-.318.455-.318.79 0 .157.026.3.08.429a.99.99 0 0 0 .238.345c.221.191.534.287.939.287a2.125 2.125 0 0 0 .394-.038c.106-.021.206-.052.3-.092.212-.095.385-.253.52-.473.135-.22.212-.526.23-.918Z",clipRule:"evenodd"}),V.jsx("path",{fill:"#4876EE",d:"M72.106 14.97V7.11h1.835v2.595c.088-.74.31-1.338.665-1.791.481-.603 1.174-.904 2.08-.904h.303v1.98h-.578c-.635 0-1.127.172-1.473.516-.347.334-.52.822-.52 1.463v4.001h-2.312ZM79.92 11.298h.767l2.499 3.672h2.6l-3.169-4.51 2.606-3.35h-2.427l-2.875 3.737V4.5h-2.312v10.47h2.312v-3.672Z"})]})})}function uut(){return V.jsx(Jp,{children:V.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[V.jsx("path",{d:"M6.68 15.92C2.88 15.24 0 11.96 0 8C0 3.6 3.6 0 8 0C12.4 0 16 3.6 16 8C16 11.96 13.12 15.24 9.32 15.92L8.88 15.56H7.12L6.68 15.92Z",fill:"url(#paint0_linear_795_116)"}),V.jsx("path",{d:"M11.12 10.2391L11.48 7.99914H9.36V6.43914C9.36 5.79914 9.6 5.31914 10.56 5.31914H11.6V3.27914C11.04 3.19914 10.4 3.11914 9.84 3.11914C8 3.11914 6.72 4.23914 6.72 6.23914V7.99914H4.72V10.2391H6.72V15.8791C7.16 15.9591 7.6 15.9991 8.04 15.9991C8.48 15.9991 8.92 15.9591 9.36 15.8791V10.2391H11.12Z",fill:"white"}),V.jsx("defs",{children:V.jsxs("linearGradient",{id:"paint0_linear_795_116",x1:"8",y1:"0",x2:"8",y2:"15.9991",gradientUnits:"userSpaceOnUse",children:[V.jsx("stop",{stopColor:"#1AAFFF"}),V.jsx("stop",{offset:"1",stopColor:"#0163E0"})]})})]})})}function dut(){return V.jsx(Jp,{children:V.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[V.jsx("path",{d:"M15.68 8.18182C15.68 7.61455 15.6291 7.06909 15.5345 6.54545H8V9.64364H12.3055C12.1164 10.64 11.5491 11.4836 10.6982 12.0509V14.0655H13.2945C14.8073 12.6691 15.68 10.6182 15.68 8.18182Z",fill:"#4285F4"}),V.jsx("path",{d:"M8 16C10.16 16 11.9709 15.2873 13.2945 14.0655L10.6982 12.0509C9.98545 12.5309 9.07636 12.8218 8 12.8218C5.92 12.8218 4.15273 11.4182 3.52 9.52727H0.858182V11.5927C2.17455 14.2036 4.87273 16 8 16Z",fill:"#34A853"}),V.jsx("path",{d:"M3.52 9.52C3.36 9.04 3.26545 8.53091 3.26545 8C3.26545 7.46909 3.36 6.96 3.52 6.48V4.41455H0.858182C0.312727 5.49091 0 6.70545 0 8C0 9.29455 0.312727 10.5091 0.858182 11.5855L2.93091 9.97091L3.52 9.52Z",fill:"#FBBC05"}),V.jsx("path",{d:"M8 3.18545C9.17818 3.18545 10.2255 3.59273 11.0618 4.37818L13.3527 2.08727C11.9636 0.792727 10.16 0 8 0C4.87273 0 2.17455 1.79636 0.858182 4.41455L3.52 6.48C4.15273 4.58909 5.92 3.18545 8 3.18545Z",fill:"#EA4335"})]})})}const hut=an(Oae)(({theme:n})=>({display:"flex",flexDirection:"column",alignSelf:"center",width:"100%",padding:n.spacing(4),gap:n.spacing(2),margin:"auto",boxShadow:"hsla(220, 30%, 5%, 0.05) 0px 5px 15px 0px, hsla(220, 25%, 10%, 0.05) 0px 15px 35px -5px",[n.breakpoints.up("sm")]:{width:"450px"},...n.applyStyles("dark",{boxShadow:"hsla(220, 30%, 5%, 0.5) 0px 5px 15px 0px, hsla(220, 25%, 10%, 0.08) 0px 15px 35px -5px"})})),fut=an(Zx)(({theme:n})=>({height:"calc((1 - var(--template-frame-height, 0)) * 100dvh)",minHeight:"100%",padding:n.spacing(2),[n.breakpoints.up("sm")]:{padding:n.spacing(4)},"&::before":{content:'""',display:"block",position:"absolute",zIndex:-1,inset:0,backgroundImage:"radial-gradient(ellipse at 50% 50%, hsl(210, 100%, 97%), hsl(0, 0%, 100%))",backgroundRepeat:"no-repeat",...n.applyStyles("dark",{backgroundImage:"radial-gradient(at 50% 50%, hsla(210, 100%, 16%, 0.5), hsl(220, 30%, 5%))"})}})),put=Js.create({baseURL:"http://localhost:8080/",timeout:5e3});function mut(n){const[e,t]=F.useState(!1),[r,i]=F.useState(""),[s,o]=F.useState(!1),[a,l]=F.useState(""),[c,u]=F.useState(!1),[d,f]=F.useState(""),[p,g]=F.useState(!1),[v,b]=F.useState(""),[x,_]=F.useState(!1),E=()=>{const M=document.getElementById("email"),R=document.getElementById("password"),L=document.getElementById("name");let B=!0;return!M.value||!/\S+@\S+\.\S+/.test(M.value)?(t(!0),i("Please enter a valid email address."),B=!1):(t(!1),i("")),!R.value||R.value.length<6?(o(!0),l("Password must be at least 6 characters long."),B=!1):(o(!1),l("")),!L.value||L.value.length<1?(u(!0),f("Name is required."),B=!1):(u(!1),f("")),B},C=async M=>{if(M.preventDefault(),b(""),_(!1),!E())return;const R=new FormData(M.currentTarget),L=R.get("name"),B=R.get("email"),N=R.get("password");g(!0);try{const I=new Date().toISOString(),D=await put.post("/api/v1/users/create-user",{username:L,email:B,password:N});console.log("Signup successful:",D.data),_(!0),M.target.reset(),setTimeout(()=>{window.location.href="/login"},2e3)}catch(I){if(console.error("Signup error:",I),I.response)if(I.response.status===409)b("An account with this email already exists.");else{const D=I.response.data||"Signup failed. Please try again.";b(typeof D=="string"?D:"Signup failed. Please try again.")}else I.request?b("Unable to connect to server. Please try again later."):b("An unexpected error occurred. Please try again.")}finally{g(!1)}};return V.jsxs($6,{...n,children:[V.jsx(Hoe,{enableColorScheme:!0}),V.jsx(lae,{sx:{position:"fixed",top:"1rem",right:"1rem"}}),V.jsx(fut,{direction:"column",justifyContent:"space-between",children:V.jsxs(hut,{variant:"outlined",children:[V.jsx(cut,{}),V.jsx(Ku,{component:"h1",variant:"h4",sx:{width:"100%",fontSize:"clamp(2rem, 10vw, 2.15rem)"},children:"Sign up"}),v&&V.jsx(YN,{severity:"error",onClose:()=>b(""),children:v}),x&&V.jsx(YN,{severity:"success",children:"Account created successfully! Redirecting to login..."}),V.jsxs(Gy,{component:"form",onSubmit:C,sx:{display:"flex",flexDirection:"column",gap:2},children:[V.jsxs(e1,{children:[V.jsx(Qx,{htmlFor:"name",children:"Full name"}),V.jsx($_,{autoComplete:"name",name:"name",required:!0,fullWidth:!0,id:"name",placeholder:"Jon Snow",error:c,helperText:d,color:c?"error":"primary",disabled:p})]}),V.jsxs(e1,{children:[V.jsx(Qx,{htmlFor:"email",children:"Email"}),V.jsx($_,{required:!0,fullWidth:!0,id:"email",placeholder:"your@email.com",name:"email",autoComplete:"email",variant:"outlined",error:e,helperText:r,color:e?"error":"primary",disabled:p})]}),V.jsxs(e1,{children:[V.jsx(Qx,{htmlFor:"password",children:"Password"}),V.jsx($_,{required:!0,fullWidth:!0,name:"password",placeholder:"",type:"password",id:"password",autoComplete:"new-password",variant:"outlined",error:s,helperText:a,color:s?"error":"primary",disabled:p})]}),V.jsx($ae,{control:V.jsx(Bae,{value:"allowExtraEmails",color:"primary"}),label:"I want to receive updates via email.",disabled:p}),V.jsx(_g,{type:"submit",fullWidth:!0,variant:"contained",disabled:p,children:p?V.jsx(dk,{size:24}):"Sign up"})]}),V.jsx(XN,{children:V.jsx(Ku,{sx:{color:"text.secondary"},children:"or"})}),V.jsxs(Gy,{sx:{display:"flex",flexDirection:"column",gap:2},children:[V.jsx(_g,{fullWidth:!0,variant:"outlined",onClick:()=>alert("Sign up with Google"),startIcon:V.jsx(dut,{}),disabled:p,children:"Sign up with Google"}),V.jsx(_g,{fullWidth:!0,variant:"outlined",onClick:()=>alert("Sign up with Facebook"),startIcon:V.jsx(uut,{}),disabled:p,children:"Sign up with Facebook"}),V.jsxs(Ku,{sx:{textAlign:"center"},children:["Already have an account?"," ",V.jsx(gP,{href:"/login",variant:"body2",sx:{alignSelf:"center"},children:"Sign in"})]})]})]})})]})}const Uae="/room-transformed.glb";function gut(n){const{nodes:e,materials:t}=r0(Uae);return V.jsx("group",{...n,dispose:null,children:V.jsxs("group",{rotation:[-Math.PI/2,0,0],children:[V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_2.geometry,material:t.Material}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_3.geometry,material:t["Material.002"]}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_4.geometry,material:t["Material.003"]}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_6.geometry,material:t.krzeslo_1}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_7.geometry,material:t.krzeslo_okno}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_8.geometry,material:t.krzeslo_prawe}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_9.geometry,material:t.krzeslo_srodek}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_10.geometry,material:t.podloga}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_11.geometry,material:t.sciana_okno}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_12.geometry,material:t["stolik.001"]}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_16.geometry,material:t["Material.006"]}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_5.geometry,material:t["Material.004"]}),V.jsx("mesh",{geometry:e.Object_13.geometry,children:V.jsx("meshStandardMaterial",{transparent:!0,opacity:.5})}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_14.geometry,material:t["Material.002"]}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_15.geometry,material:t["Material.005"]}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_17.geometry,material:t.mata}),V.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Object_18.geometry,material:t.stolik})]})})}r0.preload(Uae);function yut(){const n=F.useRef(null);return l2((e,t)=>{SZe.dampE(n.current.rotation,[e.pointer.y*Math.PI/50,e.pointer.x*Math.PI/20,0],.2,t)}),V.jsx("group",{ref:n,children:V.jsx("directionalLight",{position:[5,5,-8],castShadow:!0,intensity:5,"shadow-mapSize":2048,"shadow-bias":-.001,children:V.jsx("orthographicCamera",{attach:"shadow-camera",args:[-8.5,8.5,8.5,-8.5,.1,20]})})})}function H$({color:n="hotpink",floatIntensity:e=15,position:t=[0,5,-8],scale:r=1}){return V.jsx(RQe,{floatIntensity:e,children:V.jsxs("mesh",{castShadow:!0,position:t,scale:r,children:[V.jsx("sphereGeometry",{}),V.jsx("meshStandardMaterial",{color:n,roughness:1})]})})}function vut(){const[n,e]=F.useState(!1),{debug:t,enabled:r,samples:i,...s}=Ry({debug:!1,enabled:!1,size:{value:35,min:0,max:100,step:.1},focus:{value:.5,min:0,max:2,step:.1},samples:{value:16,min:1,max:40,step:1}});return V.jsxs(V.Fragment,{children:[V.jsx("div",{className:"scene-container",children:V.jsxs(qre,{shadows:!0,camera:{position:[5,2,7],fov:50},gl:{alpha:!0},children:[r&&V.jsx(MQe,{...s,samples:n?Math.min(6,i):i}),V.jsx("color",{attach:"background",args:["transparent"]}),V.jsx("fog",{attach:"fog",args:["#d0d0d0",8,35]}),V.jsx("ambientLight",{intensity:.4}),V.jsx(yut,{}),V.jsx(gut,{scale:.5,position:[0,-1,0]}),V.jsx(H$,{}),V.jsx(H$,{position:[2,4,-8],scale:.9}),V.jsx(H$,{position:[-2,2,-8],scale:.8}),V.jsx(qQe,{inclination:.52,scale:20})]})}),V.jsx(K5,{collapsed:!0})]})}function WX(){return V.jsxs(V.Fragment,{children:[V.jsx("div",{className:"fixed top-0 left-0 w-full h-full",children:V.jsx(vut,{})}),V.jsx(Ule,{}),V.jsx(zle,{}),V.jsx(Kle,{}),V.jsx(Hle,{}),V.jsx(qle,{})]})}function but({children:n}){const e=tm(),t=e.pathname==="/"||e.pathname==="/denniswong-portfolio",[r,i]=F.useState(!1);return V.jsxs(V.Fragment,{children:[t&&V.jsx(Fle,{menuOpen:r,setMenuOpen:i}),t&&V.jsx(Ple,{menuOpen:r,setMenuOpen:i}),n]})}function xut(){const[n,e]=F.useState(!1);return V.jsxs(V.Fragment,{children:[!n&&V.jsx(Lle,{onComplete:()=>e(!0)}),V.jsx("div",{className:`font-display min-h-screen transition-opacity duration-700 ${n?"opacity-100":"opacity-0"} bg-black text-gray-100`,children:V.jsx($ye,{children:V.jsx(but,{children:V.jsxs(fye,{children:[V.jsx(ef,{path:"/",element:V.jsx(WX,{})}),V.jsx(ef,{path:"/denniswong-portfolio",element:V.jsx(WX,{})}),V.jsx(ef,{path:"/chatbot",element:V.jsx(set,{})}),V.jsx(ef,{path:"/tutorial",element:V.jsx(_0e,{})}),V.jsx(ef,{path:"/login",element:V.jsx(lut,{})}),V.jsx(ef,{path:"/signup",element:V.jsx(mut,{})}),V.jsx(ef,{path:"/video-test",element:V.jsx(yGe,{})}),V.jsx(ef,{path:"/scene-test",element:V.jsx(i6,{})}),V.jsx(ef,{path:"/chatbot-test",element:V.jsx(oet,{})})]})})})})]})}qX.createRoot(document.getElementById("root")).render(V.jsx(xut,{}));
